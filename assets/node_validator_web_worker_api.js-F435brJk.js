var Sl=Object.defineProperty;var Nl=(q,V,K)=>V in q?Sl(q,V,{enumerable:!0,configurable:!0,writable:!0,value:K}):q[V]=K;var n=(q,V,K)=>(Nl(q,typeof V!="symbol"?V+"":V,K),K);(function(){"use strict";class q{assert(){}}function V(){return new q}const K=V();function N(t,e){K.assert(t,e)}function ho(t,e){N(typeof t===e,`type assertion failed: expected "${e}", received "${typeof t}"`)}function rr(t){N(t!==null,"expected a non-null value, received null")}function A(t,e){N(t instanceof e,`given value is not an instance of "${e.name}", specific type is "${typeof t=="object"&&t!==null?t.constructor.name:typeof t}"`)}class rt extends Error{constructor(o,r,s=`expected object with key: "${r}", instead found ${o}`){super(s);n(this,"key");n(this,"haveType");this.haveType=o,this.key=r,Object.freeze(this)}toJSON(){return{code:rt.name,message:this.message,have:this.haveType,key:this.key}}}class Z{encode(e){return this.encoder.convert(e)}decode(e){return this.decoder.convert(e)}}class a extends Z{}function st(t){return typeof t=="number"}function ee(t){return typeof t=="string"}function sr(t){return typeof t=="object"&&t!==null}function xe(t){return t!==void 0}function cr(t,e){return Array.isArray(t)&&t.every(e)}function ar(t){return e=>cr(e,t)}function ct(t,e,o){return sr(t)&&e in t&&o(t[e])}function d(t,...e){if(typeof t!="object")throw new Error("expected object");if(t===null)throw new Error("received null");for(const o of e)if(!(o in t))throw new rt("object",o)}function f(t,e){if(!ee(t.code))throw new Error("code must be a string");if(t.code!==e)throw new Error(`expected code to be ${e}, got ${t.code}`)}function L(t,e){if(!ee(t.type))throw new Error("type must be a string");if(t.type!==e)throw new Error(`expected type to be ${e}, got ${t.type}`)}class y extends Error{constructor(e){super(e)}get code(){return this.constructor.name}toJSON(){return G.convert(this)}}class H{convert(e){return A(e,y),{code:e.code,message:e.message}}}const G=new H;class ue extends Error{constructor(o,r=`no codec found for: "${o}"`){super(r);n(this,"codec");this.codec=o,Object.freeze(this);debugger}toJSON(){return{code:i.encode(ue.name),message:i.encode(this.message),codec:i.encode(this.codec)}}}const at=new Map;class dr{convert(e){d(e,"code");const o=i.decode(e.code),r=at.get(o);if(!r)throw new ue(o);return r.decode(e)}}class ir{convert(e){const o=at.get(e.code);if(!o)throw new ue(e.code);return o.encode(e)}}class lr extends Z{constructor(){super(...arguments);n(this,"encoder",new ir);n(this,"decoder",new dr)}}const wo=new lr;function p(t,e){at.set(t,e)}class S extends y{constructor(o,r,s=`invalid type: have "${o}", want "${r}"`){super(s);n(this,"have");n(this,"want");this.have=o,this.want=r,Object.freeze(this)}toJSON(){return Ao.encode(this)}}class ur{convert(e){return d(e,"code","have","want","message"),f(e,S.name),new S(i.decode(e.have),i.decode(e.want),i.decode(e.message))}}class hr{convert(e){return A(e,S),{...G.convert(e),have:i.encode(e.have),want:i.encode(e.want)}}}class wr extends a{constructor(){super(...arguments);n(this,"encoder",new hr);n(this,"decoder",new ur)}}const Ao=new wr;p(S.name,Ao);const mo=ar(xe);class Ar{convert(e){return e}}const go=new Ar;class mr extends Z{constructor(){super(...arguments);n(this,"encoder",go);n(this,"decoder",go)}}const Se=new mr;class I{constructor(e){n(this,"itemCodec");this.itemCodec=e}convert(e){if(!mo(e)){const o=typeof e=="object"&&e!==null?e.constructor.name:typeof e,r="array";throw new Error(`invalid array value: have "${o}", want "${r}"`)}return e.map(o=>this.itemCodec.decode(o))}}class D{constructor(e){n(this,"itemCodec");this.itemCodec=e}convert(e){return A(e,Array),e.map(o=>this.itemCodec.encode(o))}}class k extends a{constructor(o,r){super();n(this,"encoder");n(this,"decoder");this.encoder=r,this.decoder=o}}class gr{convert(e){if(!ee(e))throw new S(typeof e,"string");return e}}class fr{convert(e){return ho(e,"string"),e}}class pr extends a{constructor(){super(...arguments);n(this,"encoder",new fr);n(this,"decoder",new gr)}}const i=new pr;new k(new I(i),new D(i));class Ne extends y{constructor(e="completer has already been completed"){super(e),Object.freeze(this)}}class yr{convert(e){return d(e,"code","message"),f(e,Ne.name),new Ne(i.decode(e.message))}}class Cr extends H{}class Br extends a{constructor(){super(...arguments);n(this,"encoder",new Cr);n(this,"decoder",new yr)}}const vr=new Br;p(Ne.name,vr);function Ie(){return N(!1,"completer is not ready, this should never be reached")}function De(){throw new Ne}class br{constructor(){n(this,"resolve",Ie);n(this,"reject",Ie);n(this,"completed",!1);n(this,"promise");this.promise=new Promise((e,o)=>{this.resolve=e,this.reject=o}),N(this.resolve!==Ie,"resolve should be set"),N(this.reject!==Ie,"resolve should be set")}get isCompleted(){return this.completed}complete(e){const o=this.resolve,r=this.reject;if(this.completed=!0,this.resolve=De,this.reject=De,e instanceof Promise){e.then(o,r);return}o(e)}completeError(e){this.reject(e),this.completed=!0,this.resolve=De,this.reject=De}}function dt(){return new br}class he extends y{constructor(o,r,s){super(s);n(this,"response");n(this,"status");this.status=o,this.response=r}toJSON(){return fo.convert(this)}}class ke{convert(e){return A(e,he),{...G.convert(e),status:e.status}}}const fo=new ke;class it extends he{constructor(e,o,r="bad server response: client error"){super(e,o,r),Object.freeze(this)}toJSON(){return po.encode(this)}}class Er{convert(e){return d(e,"code","message","status"),f(e,it.name),new it(Number(e.status),null,i.decode(e.message))}}class xr extends ke{}class Sr extends a{constructor(){super(...arguments);n(this,"encoder",new xr);n(this,"decoder",new Er)}}const po=new Sr;p(it.name,po);class lt extends he{constructor(e,o,r="bad server response"){super(e,o,r),Object.freeze(this)}toJSON(){return yo.encode(this)}}class Nr{convert(e){return d(e,"code","message","status"),f(e,lt.name),new lt(Number(e.status),null,i.decode(e.message))}}class Ir extends ke{}class Dr extends a{constructor(){super(...arguments);n(this,"encoder",new Ir);n(this,"decoder",new Nr)}}const yo=new Dr;p(lt.name,yo);class ut extends he{constructor(e,o,r="bad server response: server error"){super(e,o,r),Object.freeze(this)}}class kr{convert(e){return d(e,"code","message","status"),f(e,ut.name),new ut(Number(e.status),null,i.decode(e.message))}}class Pr extends ke{}class Tr extends a{constructor(){super(...arguments);n(this,"encoder",new Pr);n(this,"decoder",new kr)}}const Mr=new Tr;p(ut.name,Mr);class te extends y{constructor(e="channel closed"){super(e),Object.freeze(this)}}class Or{convert(e){return d(e,"code","message"),f(e,te.name),new te(i.decode(e.message))}}class Hr extends H{}class Rr extends a{constructor(){super(...arguments);n(this,"encoder",new Hr);n(this,"decoder",new Or)}}const Lr=new Rr;p(te.name,Lr);class ht extends y{constructor(o,r=`fetch failed: ${String(o)}`){super(r);n(this,"cause");this.cause=o,Object.freeze(this)}}class Ur{convert(e){return d(e,"code","message"),f(e,ht.name),new ht({},i.decode(e.message))}}class Gr extends H{}class Fr extends a{constructor(){super(...arguments);n(this,"encoder",new Gr);n(this,"decoder",new Ur)}}const Jr=new Fr;p(ht.name,Jr);class Pe extends y{constructor(e="incorrect padding"){super(e),Object.freeze(this)}}class zr{convert(e){return d(e,"code","message"),f(e,Pe.name),new Pe(i.decode(e.message))}}class Qr extends H{}class jr extends a{constructor(){super(...arguments);n(this,"encoder",new Qr);n(this,"decoder",new zr)}}const _r=new jr;p(Pe.name,_r);class Vr{convert(e){if(!st(e))throw new S(typeof e,"number");return e}}class $r{convert(e){return ho(e,"number"),e}}class Yr extends a{constructor(){super(...arguments);n(this,"encoder",new $r);n(this,"decoder",new Vr)}}const u=new Yr,P=new k(new I(u),new D(u));class we extends y{constructor(o,r=`alphabet needs to be 64 characters, received ${o}`){super(r);n(this,"length");this.length=o,Object.freeze(this)}toJSON(){return Co.encode(this)}}class Xr{convert(e){return d(e,"code","length","message"),f(e,we.name),new we(u.decode(e.length),i.decode(e.message))}}class Wr{convert(e){return A(e,we),{...G.convert(e),length:u.encode(e.length)}}}class qr extends a{constructor(){super(...arguments);n(this,"encoder",new Wr);n(this,"decoder",new Xr)}}const Co=new qr;p(we.name,Co);class Ae extends y{constructor(e="invalid hex string"){super(e),Object.freeze(this)}}class Kr{convert(e){return d(e,"code","message"),f(e,Ae.name),new Ae(i.decode(e.message))}}class Zr extends H{}class es extends a{constructor(){super(...arguments);n(this,"encoder",new Zr);n(this,"decoder",new Kr)}}const ts=new es;p(Ae.name,ts);class Te extends y{constructor(o,r=`invalid hex value "${o}"`){super(r);n(this,"value");this.value=o,Object.freeze(this)}toJSON(){return Bo.encode(this)}}class os{convert(e){return d(e,"code","value","message"),f(e,Te.name),new Te(u.decode(e.value),i.decode(e.message))}}class ns{convert(e){return{...G.convert(e),value:u.encode(e.value)}}}class rs extends a{constructor(){super(...arguments);n(this,"encoder",new ns);n(this,"decoder",new os)}}const Bo=new rs;p(Te.name,Bo);class F extends y{constructor(e="invalid input"){super(e),Object.freeze(this)}}class ss{convert(e){return d(e,"code","message"),f(e,F.name),new F(i.decode(e.message))}}class cs extends H{}class as extends a{constructor(){super(...arguments);n(this,"encoder",new cs);n(this,"decoder",new ss)}}const ds=new as;p(F.name,ds);class Me extends y{constructor(o,r,s=`invalid string value: have "${o}", want "${r}"`){super(s);n(this,"have");n(this,"want");this.have=o,this.want=r,Object.freeze(this)}toJSON(){return vo.encode(this)}}class is{convert(e){return d(e,"code","have","want","message"),f(e,Me.name),new Me(i.decode(e.have),i.decode(e.want),i.decode(e.message))}}class ls{convert(e){return A(e,Me),{...G.convert(e),have:i.encode(e.have),want:i.encode(e.want)}}}class us extends a{constructor(){super(...arguments);n(this,"encoder",new ls);n(this,"decoder",new is)}}const vo=new us;p(Me.name,vo);class Oe extends y{constructor(e="invalid tagged base64 encoding"){super(e),Object.freeze(this)}toJSON(){return bo.encode(this)}}class hs{convert(e){return d(e,"code","message"),f(e,Oe.name),new Oe(i.decode(e.message))}}class ws extends H{}class As extends a{constructor(){super(...arguments);n(this,"encoder",new ws);n(this,"decoder",new hs)}}const bo=new As;p(Oe.name,bo);class se extends y{constructor(e="missing element"){super(e),Object.freeze(this)}}class ms{convert(e){return d(e,"code","message"),f(e,se.name),new se(i.decode(e.message))}}class gs extends H{}class fs extends a{constructor(){super(...arguments);n(this,"encoder",new gs);n(this,"decoder",new ms)}}const ps=new fs;p(se.name,ps);class He extends y{constructor(o,r=`no completer found for request id "${o}"`){super(r);n(this,"requestID");this.requestID=o,Object.freeze(this)}toJSON(){return Eo.encode(this)}}class ys{convert(e){return d(e,"code","requestID","message"),f(e,He.name),new He(Se.decode(e.requestID),i.decode(e.message))}}class Cs{convert(e){return A(e,He),{...G.convert(e),requestID:Se.encode(e.requestID)}}}class Bs extends a{constructor(){super(...arguments);n(this,"encoder",new Cs);n(this,"decoder",new ys)}}const Eo=new Bs;p(He.name,Eo);class wt extends y{constructor(e="no url provided"){super(e),Object.freeze(this)}}class vs{convert(e){return d(e,"code","message"),f(e,wt.name),new wt(i.decode(e.message))}}class bs extends H{}class Es extends a{constructor(){super(...arguments);n(this,"encoder",new bs);n(this,"decoder",new vs)}}const xs=new Es;p(wt.name,xs);class At extends y{constructor(o,r=`Not Found: ${o}`){super(r);n(this,"key");this.key=o,Object.freeze(this)}}class xo{constructor(e){n(this,"codec");this.codec=e}convert(e){return d(e,"code","key"),f(e,At.name),new At(this.codec.decode(e.key))}}class So{constructor(e){n(this,"codec");this.codec=e}convert(e){return{...G.convert(e),key:this.codec.encode(e.key)}}}class No extends a{constructor(o,r){super();n(this,"encoder");n(this,"decoder");this.encoder=o,this.decoder=r}}new No(new So(i),new xo(i));const Ss=new No(new So(Se),new xo(Se));p(At.name,Ss);class me extends he{constructor(o,r,s,c="response content type is not application/json"){super(r,s,c);n(this,"haveHeaderType");this.haveHeaderType=o,Object.freeze(this)}static fromResponse(o,r){return new me(o.headers.get("content-type")??"undefined",o.status,o,r)}toJSON(){return Io.encode(this)}}class Ns{convert(e){return d(e,"code","status","have","want","message"),f(e,me.name),new me(i.decode(e.code),u.decode(e.status),null,i.decode(e.message))}}class Is{convert(e){return{...fo.convert(e),have:i.encode(e.haveHeaderType),want:i.encode("application/json")}}}class Ds extends a{constructor(){super(...arguments);n(this,"encoder",new Is);n(this,"decoder",new Ns)}}const Io=new Ds;p(me.name,Io);class oe extends y{constructor(e="unimplemented"){super(e),Object.freeze(this);debugger}}class ks{convert(e){return d(e,"code","message"),f(e,oe.name),new oe(i.decode(e.message))}}class Ps extends H{}class Ts extends a{constructor(){super(...arguments);n(this,"encoder",new Ps);n(this,"decoder",new ks)}}const Ms=new Ts;p(oe.name,Ms);class mt extends y{constructor(o,r="error in web worker"){super(r);n(this,"error");this.error=o,Object.freeze(this)}toJSON(){return Do.encode(this)}}class Os{convert(e){return d(e,"code","error","message"),f(e,mt.name),new mt(wo.decode(e.error),i.decode(e.message))}}class Hs{convert(e){return{...G.convert(e),error:wo.encode(e.error)}}}class Rs extends a{constructor(){super(...arguments);n(this,"encoder",new Hs);n(this,"decoder",new Os)}}const Do=new Rs;p(mt.name,Do);var gt=(t=>(t[t.success=0]="success",t[t.full=1]="full",t[t.failed=2]="failed",t))(gt||{});class Ls{getFromEmpty(){}}class Us{getFromEmpty(){return null}}class Gs{getFromEmpty(){throw new se}}const ko={returnNull:new Us,returnUndefined:new Ls,throwMissingElement:new Gs};class Fs{constructor(e){n(this,"maxSize");N(!Number.isNaN(e),"maxSize must not be NaN"),N(Number.isInteger(e),"maxSize must be an integer"),N(e>0,"maxSize must be greater than 0"),this.maxSize=e}nextIndex(e){return N(e>=0,"index must be greater than or equal to 0"),(e+1)%this.maxSize}}class Js{constructor(e){n(this,"preComputedSizeMinus1");N(!Number.isNaN(e),"maxSize must not be NaN"),N(Number.isInteger(e),"maxSize must be an integer"),N(e>0,"maxSize must be greater than 0"),N(Po(e),"maxSize must be a power of two"),this.preComputedSizeMinus1=e-1}nextIndex(e){return N(e>=0,"index must be greater than or equal to 0"),e+1&this.preComputedSizeMinus1}}function Po(t){return(t&t-1)===0}class Re extends y{constructor(e="buffer full"){super(e),Object.freeze(this)}}class zs{convert(e){return d(e,"code","message"),f(e,Re.name),new Re(i.decode(e.message))}}class Qs extends H{}class js extends a{constructor(){super(...arguments);n(this,"encoder",new Qs);n(this,"decoder",new zs)}}const _s=new js;p(Re.name,_s);class Vs{putToFull(e,o){return e.get(),e.put(o)}}class $s{putToFull(){return gt.full}}class Ys{putToFull(){throw new Re}}const To={overwriteOldest:new Vs,returnFull:new $s,throw:new Ys};function Xs(t){return Po(t)?new Js(t):new Fs(t)}class Ws{constructor(e,o,r){n(this,"readIndex",0);n(this,"writeIndex",0);n(this,"buffer");n(this,"nextIndex");n(this,"getOnEmpty");n(this,"putOnFull");N(!Number.isNaN(e),"maxSize must not be NaN"),this.buffer=new Array(e),this.nextIndex=Xs(e),this.getOnEmpty=o,this.putOnFull=r}get maxSize(){return this.buffer.length}get length(){return this.writeIndex<this.readIndex?this.writeIndex+this.maxSize-this.readIndex:this.writeIndex-this.readIndex}put(e){const o=this.nextIndex.nextIndex(this.writeIndex);return o===this.readIndex?this.putOnFull.putToFull(this,e):(this.buffer[this.writeIndex]=e,this.writeIndex=o,gt.success)}get(){if(this.readIndex===this.writeIndex)return this.getOnEmpty.getFromEmpty(this);const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),e}[Symbol.iterator](){return new qs(this)}immutableIterable(){return{[Symbol.iterator]:()=>this.immutableIterator()}}immutableIterator(){return new Ks(this.readIndex,this.writeIndex,this.buffer,this.nextIndex)}}class qs{constructor(e){n(this,"buffer");this.buffer=e}next(){const e=this.buffer.get();return e==null?{value:void 0,done:!0}:{value:e,done:!1}}}class Ks{constructor(e,o,r,s){n(this,"readIndex");n(this,"writeIndex");n(this,"buffer");n(this,"nextIndex");this.readIndex=e,this.writeIndex=o,this.buffer=r,this.nextIndex=s}next(){if(this.readIndex===this.writeIndex)return{value:void 0,done:!0};const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),{value:e,done:!1}}}function ge(t=32,e=ko.returnUndefined,o=To.overwriteOldest){return new Ws(t,e,o)}class Zs{constructor(e){n(this,"publishQueue");n(this,"pollBlocked");n(this,"publishBlocked");n(this,"capacity");n(this,"closed",!1);this.publishQueue=ge(Math.max(2,e),ko.throwMissingElement,To.throw);const o=dt();this.pollBlocked=o,this.publishBlocked=o,o.complete(),this.capacity=e-1}get isClosed(){return this.closed}close(){if(this.closed)throw new te;this.closed=!0}async drain(){for(;this.publishQueue.length>0;)this.publishQueue.get()}async publish(e){if(this.closed)throw new te;if(this.publishQueue.length>=this.capacity){if(this.publishBlocked.isCompleted){const o=dt();this.publishBlocked=o,await o.promise}return await this.publishBlocked.promise,this.publish(e)}this.publishQueue.put(e),this.pollBlocked.isCompleted||this.pollBlocked.complete()}async poll(){if(this.publishQueue.length<=0){if(this.isClosed)throw new te;if(this.pollBlocked.isCompleted){const o=dt();this.pollBlocked=o}return await this.pollBlocked.promise,this.poll()}const e=this.publishQueue.get();return this.publishBlocked.isCompleted||this.publishBlocked.complete(),e}[Symbol.asyncIterator](){return new ec(this)}}class ec{constructor(e){n(this,"channel");this.channel=e}async next(){try{return{done:!1,value:await this.channel.poll()}}catch(e){if(e instanceof te)return{done:!0,value:void 0};throw e}}}function Mo(t){return new Zs(t)}async function tc(t){return new Promise(e=>{const o=setTimeout(()=>{clearTimeout(o),e()},t)})}function*oc(t,e){for(let o=t.next();!o.done;o=t.next())e(o.value)&&(yield o.value)}function Oo(t,e){return oc(t[Symbol.iterator](),e)}function*Ho(t,e){for(let o=t.next();!o.done;o=t.next())yield e(o.value)}function Le(t,e){return Ho(t[Symbol.iterator](),e)}function*nc(t,e){for(let o=0;o<e;o++){const r=t.next();if(r.done)return;yield r.value}}function rc(t,e){return nc(t[Symbol.iterator](),e)}function Ro(t){const e=t.next();if(e.done)throw new se;return e.value}function sc(t){let e;for(let o=t.next();!o.done;o=t.next())e=o.value;if(e===void 0)throw new se;return e}function cc(t){return sc(t[Symbol.iterator]())}function*ac(t,e){for(let o=t.next();!o.done;o=t.next())yield*e(o.value)}function dc(t,e){return ac(t[Symbol.iterator](),e)}function*ic(){let t=0;for(;;)yield t++}function Lo(t){return rc(ic(),Math.ceil(t))}function Uo(t,e,o){const r=o;let s=e;for(let c=r.next();!c.done;c=r.next())s=t(s,c.value);return s}function*lc(t,e,o){for(let r=t.next(),s=e.next();!r.done&&!s.done;r=t.next(),s=e.next())yield o(r.value,s.value)}function Go(t,e,o){return lc(t[Symbol.iterator](),e[Symbol.iterator](),o)}class ${constructor(e,o,r){n(this,"significantDigitsMultiplier");this.alpha3Code=e,this.code=o,this.significantDigits=r,this.alpha3Code=e,this.code=o,this.significantDigits=r,this.significantDigitsMultiplier=BigInt(10)**BigInt(this.significantDigits)}toJSON(){return Ue.encode(this)}}const Fo=new $("JPY",392,0),uc=new $("GBP",826,2),Jo=new $("USD",840,2),hc=new $("EUR",978,2),wc=new $("XXX",999,2),zo=new $("ETH",1001,18),ft=new $("XBT",1002,8),Qo=new $("ESP",10001,18),Ac=[Fo,uc,Jo,hc,wc,zo,ft,Qo],mc=new Map(Ac.map(t=>[t.alpha3Code,t]));class gc{convert(e){if(typeof e!="string")throw new F("CurrencyCodeDecoder: expected string");if(e==="BTC")return ft;const o=mc.get(e);if(o===void 0)throw new F(`CurrencyCodeDecoder: unknown currency: "${e}"`);return o}}class fc{convert(e){return A(e,$),e.alpha3Code}}class pc extends a{constructor(){super(...arguments);n(this,"decoder",new gc);n(this,"encoder",new fc)}}const Ue=new pc;class J{constructor(e,o){this.currency=e,this.value=o,this.currency=e,this.value=o}static USD(e){return new J(Jo,BigInt(e))}static ETH(e){return new J(zo,BigInt(e))}static ESP(e){return new J(Qo,BigInt(e))}static JPY(e){return new J(Fo,BigInt(e))}static BTC(e){return new J(ft,BigInt(e))}toString(){return Ge.encode(this)}toJSON(){return Ge.encode(this)}}function yc(t){return t==="."||t===","||t===" "}function Cc(t,e){let o=-1;const r=t.length;for(let s=0;s<r;s++)e(t[s])&&(o=s);return o}class Bc{parseCurrencyCode(e){return Ue.decode(e)}parseValue(e,o){let r=1n;o[0]==="-"&&(r=-1n,o=o.substring(1));const s=Cc(o,yc);if(s===-1){const w=BigInt(o.replace(/\D/g,""))*e.significantDigitsMultiplier;return r*w}const c=o.substring(0,s).replace(/\D/g,""),l=o.substring(s+1).replace(/\D/g,""),h=BigInt(c)*e.significantDigitsMultiplier,m=BigInt(l)*10n**BigInt(e.significantDigits-l.length);return r*(h+m)}convert(e){if(typeof e!="string")throw new F("MonetaryValueDecoder: expected string");const o=e.indexOf(" ");if(o<=-1)throw new F("MonetaryValueDecoder: missing non-breaking space");const r=e.substring(0,o),s=e.substring(o+1);if(/^-?[\d .,]+$/.test(r)){const l=this.parseCurrencyCode(s);return new J(l,this.parseValue(l,r))}const c=this.parseCurrencyCode(r);return new J(c,this.parseValue(c,s))}}class vc{convert(e){A(e,J);const o=e.value<0n?"-":"",r=e.value<0n?-e.value:e.value,s=r%e.currency.significantDigitsMultiplier,c=r/e.currency.significantDigitsMultiplier,l=String(c),h=String(s);return/^0+$/.test(h)?`${Ue.encode(e.currency)} ${o}${l}`:`${Ue.encode(e.currency)} ${o}${c}.${String(s).padStart(e.currency.significantDigits,"0")}`}}class bc extends a{constructor(){super(...arguments);n(this,"decoder",new Bc);n(this,"encoder",new vc)}}const Ge=new bc,jo=new k(new I(Ge),new D(Ge));class U{constructor(e,o,r,s){n(this,"namespace");n(this,"name");n(this,"site");n(this,"blockExplorer");this.namespace=e,this.name=o,this.site=r,this.blockExplorer=s}}const Ec=new U(202374881,"Vienna",new URL("https://vienna.caldera.dev/"),new URL("https://vienna.calderaexplorer.xyz/")),xc=new U(202374882,"OP Stack",new URL("https://stack.optimism.io/"),new URL("https://www.blockscout.com/")),Sc=new U(33914988448,"Arbitrum",new URL("https://arbitrum.io/"),new URL("https://arbiscan.io/")),Nc=new U(33914988449,"Eigen Layer",new URL("https://www.eigenlayer.xyz/"),new URL("https://www.blockscout.com/")),Ic=new U(33914988450,"Spire",new URL("https://www.spire.dev/"),new URL("https://www.blockscout.com/")),Dc=new U(33914988451,"Alt Layer",new URL("https://altlayer.io/"),new URL("https://www.blockscout.com/")),kc=new U(33914988452,"Caldera",new URL("https://www.caldera.xyz/"),new URL("https://www.blockscout.com/")),Pc=new U(33914988453,"Vistara Labs",new URL("https://vistara.dev/"),new URL("https://www.blockscout.com/")),Tc=new U(33914988454,"Polygon",new URL("https://polygon.technology/"),new URL("https://www.blockscout.com/")),Mc=new U(263,"Milan",new URL("https://milan.caldera.dev/"),new URL("https://milan-devnet.explorer.caldera.xyz/")),Oc=new U(41234687,"Kyoto",new URL("https://example.com/"),new URL("https://kyoto-explorer.altlayer.io/")),Hc=new Map([Ec,xc,Sc,Tc,Nc,Ic,Dc,kc,Pc,Mc,Oc].map(t=>[t.namespace,t]));class z extends y{constructor(o,r=`corrupt input error at ${o}`){super(r);n(this,"offset");this.offset=o,Object.freeze(this)}toJSON(){return _o.encode(this)}}class Rc{convert(e){return d(e,"code","offset","message"),f(e,z.name),new z(u.decode(e.offset),i.decode(e.message))}}class Lc{convert(e){return A(e,z),{...G.convert(e),offset:u.encode(e.offset),message:i.encode(e.message)}}}class Uc extends a{constructor(){super(...arguments);n(this,"encoder",new Lc);n(this,"decoder",new Rc)}}const _o=new Uc;p(z.name,_o);const Gc=new TextEncoder;function Vo(t){return Gc.encode(t)}const Fc=new TextDecoder;function Jc(t){return Fc.decode(t)}function*$o(t){yield*Vo(t)}function*zc(){for(let t=0;t<256;t++)yield 255}const fe=-1,Qc=61;class pe{constructor(e,o,r=Qc,s=!1){n(this,"encodeMap");n(this,"decodeMap");n(this,"padChar");n(this,"strict");this.encodeMap=e,this.decodeMap=o,this.padChar=r,this.strict=s}static withAlphabet(e){const o=e.length;if(o!==64)throw new we(o);const r=Array.from($o(e)),s=Array.from(zc());for(let c=0;c<o;c++)s[r[c]]=c;return new pe(r,s)}withPadding(e){return new pe(this.encodeMap,this.decodeMap,e,this.strict)}encode(e){if(e.byteLength===0)return new ArrayBuffer(0);let o=0,r=0;const s=Math.floor(e.byteLength/3)*3,c=Math.ceil(e.byteLength/3)*4,l=new ArrayBuffer(c),h=new DataView(e),m=new DataView(l);for(;r<s;){const R=h.getUint8(r+0)<<16|h.getUint8(r+1)<<8|h.getUint8(r+2);m.setUint8(o+0,this.encodeMap[R>>18&63]),m.setUint8(o+1,this.encodeMap[R>>12&63]),m.setUint8(o+2,this.encodeMap[R>>6&63]),m.setUint8(o+3,this.encodeMap[R&63]),r+=3,o+=4}const w=e.byteLength-r;if(w===0)return l;let x=h.getUint8(r+0)<<16;switch(w===2&&(x|=h.getUint8(r+1)<<8),m.setUint8(o+0,this.encodeMap[x>>18&63]),m.setUint8(o+1,this.encodeMap[x>>12&63]),w){case 2:return m.setUint8(o+2,this.encodeMap[x>>6&63]),this.padChar!==fe?(m.setUint8(o+3,this.padChar),l.slice(0,o+4)):l.slice(0,o+3);case 1:if(this.padChar!==fe)return m.setUint8(o+2,this.padChar),m.setUint8(o+3,this.padChar),l.slice(0,o+4);break}return l.slice(0,o+2)}decode(e){const o=e.byteLength;if(o===0)return new ArrayBuffer(0);const r=new DataView(e),s=new ArrayBuffer(Math.floor(o/4*3)),c=new DataView(s),l=new ArrayBuffer(4),h=new DataView(l);let m=0,w=0,x=0,R=!1;for(;w<o&&!R;){let W=3,X=4;for(let O=0;O<4;O++){if(w===o){if(O===0)return s;if(O===1||this.padChar!==fe)throw new z(w-O);W=O-1,X=O,R=!0;break}const _=r.getUint8(w);w++;const nr=this.decodeMap[_];if(nr!==255){h.setUint8(O,nr);continue}if(_===10||_===13){O--;continue}if(_===this.padChar){switch(O){case 0:case 1:throw new Pe;case 2:for(;w<o&&(r.getUint8(w)===10||r.getUint8(w)===13);)w++;if(w===o)throw new z(o);w++}for(;w<o&&(r.getUint8(w)===10||r.getUint8(w)===13);)w++;if(w<o)throw new z(w);W=3,X=O,R=!0;break}throw new z(w-1)}const M=h.getUint8(0)<<18|h.getUint8(1)<<12|h.getUint8(2)<<6|h.getUint8(3);switch(h.setUint8(2,M>>0&255),h.setUint8(1,M>>8&255),h.setUint8(0,M>>16&255),X){case 4:c.setUint8(x+2,h.getUint8(2)),h.setUint8(2,0);case 3:if(c.setUint8(x+1,h.getUint8(1)),this.strict&&h.getUint8(2)!==0)throw new z(w-1);case 2:if(c.setUint8(x+0,h.getUint8(0)),this.strict&&(h.getUint8(1)!==0||h.getUint8(2)!==0))throw new z(w-2)}x+=W,m+=X-1}return s.slice(0,m)}decodeString(e){return this.decode(Vo(e).buffer)}encodeToString(e){return Jc(this.encode(e))}}const pt=pe.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),jc=pt.withPadding(fe),Yo=pe.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),yt=Yo.withPadding(fe);class Y{constructor(e,o){n(this,"tag");n(this,"data");this.tag=e,this.data=o}static fromString(e){const o=e.indexOf("~");if(o<0)throw new Oe;const r=e.substring(0,o),s=yt.decodeString(e.substring(o+1));return new Y(r,s)}static inflate(e){return g.decode(e)}toString(){return`${this.tag}~${yt.encodeToString(this.data)}`}valueOf(){return this.toString()}toJSON(){return this.toString()}}class _c{convert(e){if(typeof e!="string")throw new S(typeof e,"string");return Y.fromString(e)}}class Vc{convert(e){return A(e,Y),e.toString()}}class $c extends a{constructor(){super(...arguments);n(this,"encoder",new Vc);n(this,"decoder",new _c)}}const g=new $c,Xo=["Residential","Mobile","Enterprise","AWS","Azure","GCP"],Wo=["Espresso v1.0","Espresso v1.1","Espresso v1.2","Espresso v1.3","Espresso v1.4"],qo=["Linux","Unix","Windows","MacOS"],Ko=[["Espresso","https://espressosys.com/"],["BlockDaemon","https://www.blockdaemon.com/"],["Unit 410","https://unit410.com/"],["Nethermind","https://www.nethermind.io/"],["Sub7","https://sub7.xyz/"],["KudasaiJP","https://kudasai.co.jp/"],["Informal Systems","https://informal.systems/"],["P2P","https://p2p.org/"],["LinkPool","https://linkpool.com/"],["ZKV","https://zkvalidator.com/"],["Figment","https://figment.io/"]],Fe=2147483648,Yc=1103515245,Xc=12345;class ce{constructor(e){n(this,"state");this.state=e!==void 0?e:Math.floor(Math.random()*(Fe-1))}nextInt(){return this.state=(Yc*this.state+Xc)%Fe,this.state}nextFloat(){return this.nextInt()/(Fe-1)}nextRange(e,o){const r=o-e,s=this.nextInt()/Fe;return e+Math.floor(s*r)}fillBytes(e){const o=new ArrayBuffer(e),r=new DataView(o);let s=0;for(;s<e-4;s+=4)r.setUint32(s,this.nextRange(0,4294967295));for(let c=s;c<e;c++)r.setUint8(c,this.nextRange(0,256));return o}}const Wc=[[["Mexico City",19.4333,-99.1333,"MX"],["Guadalajara",20.6767,-103.3475,"MX"],["Monterrey",25.6667,-100.3,"MX"],["Guatemala City",14.6133,-90.5353,"GT"],["Tijuana",32.525,-117.0333,"MX"],["Ecatepec",19.6097,-99.06,"MX"],["Tegucigalpa",14.1058,-87.2047,"HN"],["León de los Aldama",21.1167,-101.6833,"MX"],["San José",9.9325,-84.08,"CR"],["Panama City",8.9833,-79.5167,"PA"],["Juárez",31.745,-106.485,"MX"],["Comayagüela",14.098,-87.21,"HN"],["Mexicali",32.6633,-115.4678,"MX"],["Nezahualcóyotl",19.4081,-99.0186,"MX"],["Managua",12.1364,-86.2514,"NI"],["Morelia",19.7683,-101.1894,"MX"],["Aguascalientes",21.876,-102.296,"MX"],["Mérida",20.97,-89.62,"MX"],["Saltillo",25.4231,-100.9919,"MX"],["Culiacán",24.8069,-107.3939,"MX"]],[["Havana",23.1367,-82.3589,"CU"],["San Juan",18.3985,-66.061,"PR"],["Santiago",19.4572,-70.6889,"DO"],["Santo Domingo",18.4667,-69.95,"DO"],["Port-au-Prince",18.5333,-72.3333,"HT"],["Santo Domingo Este",18.4855,-69.8734,"DO"],["Kingston",17.9714,-76.7931,"JM"],["Carrefour",18.5344,-72.4094,"HT"],["Santiago de Cuba",20.0217,-75.8294,"CU"],["Pétion-Ville",18.5128,-72.2864,"HT"],["Holguín",20.8869,-76.2592,"CU"],["Gonaïves",19.4456,-72.6883,"HT"],["Camagüey",21.3839,-77.9075,"CU"],["Puerto Plata",19.8,-70.6833,"DO"],["Croix-des-Bouquets",18.5761,-72.2269,"HT"],["Nassau",25.0781,-77.3386,"BS"],["Fort-de-France",14.6,-61.0667,"MQ"],["Higüey",18.6167,-68.7,"DO"],["Santa Clara",22.4069,-79.9649,"CU"],["Bayamo",20.3817,-76.6428,"CU"]],[["Cairo",30.0444,31.2358,"EG"],["Lagos",6.455,3.3841,"NG"],["Kinshasa",-4.3219,15.3119,"CD"],["Luanda",-8.8383,13.2344,"AO"],["Johannesburg",-26.2044,28.0456,"ZA"],["Dar es Salaam",-6.8161,39.2803,"TZ"],["Douala",4.05,9.7,"CM"],["Giza",29.987,31.2118,"EG"],["Abidjan",5.3167,-4.0333,"CI"],["Cape Town",-33.9253,18.4239,"ZA"],["Bamako",12.6392,-8.0028,"ML"],["Abuja",9.0667,7.4833,"NG"],["Ibadan",7.3964,3.9167,"NG"],["Addis Ababa",9.03,38.74,"ET"],["Mbuji-Mayi",-6.15,23.6,"CD"],["Mogadishu",2.0392,45.3419,"SO"],["Lusaka",-15.4167,28.2833,"ZM"],["Antananarivo",-18.91,47.525,"MG"],["Awka",6.2069,7.0678,"NG"],["Bamenda",5.9614,10.1517,"CM"]],[["Tokyo",35.6897,139.6922,"JP"],["Delhi",28.61,77.23,"IN"],["Manila",14.5958,120.9772,"PH"],["Dhaka",23.7639,90.3889,"BD"],["Moscow",55.7558,37.6172,"RU"],["Ho Chi Minh City",10.7756,106.7019,"VN"],["Xi’an",34.2611,108.9422,"CN"],["Dongguan",23.021,113.752,"CN"],["Tongshan",34.204,117.284,"CN"],["Jining",35.4151,116.5871,"CN"],["Cangzhou",38.3047,116.8387,"CN"],["Shaoyang",27.2395,111.4679,"CN"],["Dalian",38.9,121.6,"CN"],["Ankara",39.93,32.85,"TR"],["Zhangzhou",24.513,117.647,"CN"],["Changsha",28.228,112.939,"CN"],["Ürümqi",43.8225,87.6125,"CN"],["Ningbo",29.8603,121.6245,"CN"],["Suihua",46.654,126.969,"CN"],["Deyang",31.127,104.398,"CN"]],[["London",51.5072,-.1275,"GB"],["Madrid",40.4169,-3.7033,"ES"],["Berlin",52.52,13.405,"DE"],["Barcelona",41.3828,2.1769,"ES"],["Athens",37.9842,23.7281,"GR"],["Budapest",47.4925,19.0514,"HU"],["Birmingham",52.48,-1.9025,"GB"],["Stuttgart",48.7775,9.18,"DE"],["Munich",48.1375,11.575,"DE"],["Hamburg",53.55,10,"DE"],["Bucharest",44.4325,26.1039,"RO"],["Vienna",48.2083,16.3725,"AT"],["Stockholm",59.3294,18.0686,"SE"],["Minsk",53.9,27.5667,"BY"],["Warsaw",52.23,21.0111,"PL"],["Valencia",39.47,-.3764,"ES"],["Amsterdam",52.3728,4.8936,"NL"],["Copenhagen",55.6761,12.5683,"DK"],["Porto",41.1621,-8.622,"PT"],["Brussels",50.8467,4.3525,"BE"]],[["New York",40.6943,-73.9249,"US"],["Los Angeles",34.1141,-118.4068,"US"],["Chicago",41.8375,-87.6866,"US"],["Miami",25.784,-80.2101,"US"],["Dallas",32.7935,-96.7667,"US"],["Philadelphia",40.0077,-75.1339,"US"],["Atlanta",33.7628,-84.422,"US"],["Boston",42.3188,-71.0852,"US"],["Phoenix",33.5722,-112.0892,"US"],["Detroit",42.3834,-83.1024,"US"],["Seattle",47.6211,-122.3244,"US"],["San Francisco",37.7558,-122.4449,"US"],["San Diego",32.8313,-117.1222,"US"],["Minneapolis",44.9635,-93.2678,"US"],["Brooklyn",40.6501,-73.9496,"US"],["Vancouver",49.25,-123.1,"CA"],["Riverside",33.9381,-117.3949,"US"],["Baltimore",39.3051,-76.6144,"US"],["Portland",45.5371,-122.65,"US"],["Sacramento",38.5677,-121.4685,"US"]],[["Melbourne",-37.8142,144.9631,"AU"],["Sydney",-33.8678,151.21,"AU"],["Brisbane",-27.4678,153.0281,"AU"],["Perth",-31.9559,115.8606,"AU"],["Auckland",-36.8406,174.74,"NZ"],["Adelaide",-34.9275,138.6,"AU"],["Port Moresby",-9.4789,147.1494,"PG"],["Gold Coast",-28.0167,153.4,"AU"],["Cranbourne",-38.0996,145.2834,"AU"],["Christchurch",-43.531,172.6365,"NZ"],["Manukau City",-37,174.885,"NZ"],["Central Coast",-33.3,151.2,"AU"],["Wollongong",-34.4331,150.8831,"AU"],["Ipswich",-27.6144,152.7608,"AU"],["Wellington",-41.2889,174.7772,"NZ"],["Northcote",-36.8019,174.7494,"NZ"],["Hobart",-42.8806,147.325,"AU"],["Lae",-6.7303,147.0008,"PG"],["Suva",-18.1416,178.4419,"FJ"],["Nouméa",-22.2758,166.458,"NC"]],[["São Paulo",-23.55,-46.6333,"BR"],["Buenos Aires",-34.6033,-58.3817,"AR"],["Rio de Janeiro",-22.9111,-43.2056,"BR"],["Lima",-12.06,-77.0375,"PE"],["Bogotá",4.7111,-74.0722,"CO"],["Santiago",-33.4372,-70.6506,"CL"],["Belo Horizonte",-19.9167,-43.9333,"BR"],["Fortaleza",-3.7275,-38.5275,"BR"],["Santa Cruz de la Sierra",-17.7892,-63.1975,"BO"],["La Paz",-16.4958,-68.1333,"BO"],["Guayaquil",-2.19,-79.8875,"EC"],["Medellín",6.2308,-75.5906,"CO"],["Salvador",-12.9747,-38.4767,"BR"],["Caracas",10.4806,-66.9036,"VE"],["Córdoba",-31.4167,-64.1833,"AR"],["Santos",-23.9369,-46.325,"BR"],["Curitiba",-25.4297,-49.2711,"BR"],["Maracaibo",10.6333,-71.6333,"VE"],["Recife",-8.05,-34.9,"BR"],["Porto Alegre",-30.0331,-51.23,"BR"]]],Zo=[0,0,5,26,28,26,9,6],qc=Zo.reduce((t,e)=>t+e,0),Kc=Zo.reduce((t,e)=>{const o=t[t.length-1]??0;return t.push(o+e),t},[]),Zc=Array.from(Go(Kc,Wc,(t,e)=>[t,e])),Je=new Date,ze=new Date(Je.getFullYear(),Je.getMonth(),Je.getDate()).valueOf();function ea(){return ze}async function*ta(){}function en(){const t=new Uint8Array(new Array(20).map(()=>0)).buffer;return{hash:new Y("BLOCK",t),height:0,time:new Date(0),genTime:0,transactions:ta(),numTransactions:0,proposer:t,size:0,fees:[]}}async function*oa(t){let e=1,o=ze;for(;o<Je.valueOf();){const r=Math.floor(t.nextFloat()*14*1e3);yield tn(new ce(e+r),e,o,o+r),o+=r,e++}}async function*na(t=new ce(ze)){yield en(),yield*oa(t)}async function*ra(t,e,o){let r=e,s=o;for(;;){const c=Math.floor(t.nextFloat()*14*1e3),l=r+c-Date.now();await tc(l),yield tn(new ce(s+c),s,r,r+c),r+=c,s++}}function tn(t,e,o,r){const s=Math.floor(t.nextRange(0,5)),c=t.nextRange(0,Qe.length),l=Qe[c];return{hash:new Y("BLOCK",t.fillBytes(32)),height:e,genTime:r-o,time:new Date(r),numTransactions:s,transactions:ca(new ce(e+o),e,o,r,s),proposer:l.address,size:Math.floor(t.nextFloat()*1024*s)+8,fees:[J.ESP(BigInt(t.nextRange(0,1e9)*1e3))]}}const on=Array.from(Hc.keys());function sa(t){return t.nextFloat()>.98?1:on[t.nextRange(0,on.length)]}async function*ca(t,e,o,r,s){const c=(r-o)/s;for(let l=0,h=o;h<r;h+=c,l++){const m=sa(t),w=Math.floor(1024*t.nextFloat());yield{block:e,index:l,size:w,hash:new Y("COMMIT",t.fillBytes(32)),time:new Date(h),sender:new Y("PUBKEY",t.fillBytes(32)),tree:{namespace:m,data:t.fillBytes(w)}}}}function aa(t){const e=t.nextRange(0,qc),o=Oo(Zc,([l])=>l<=e),[,r]=cc(o),s=t.nextRange(0,r.length);return r[s]}function da(t){const e=t.nextRange(0,Ko.length);return Ko[e]}function ia(t){const e=t.nextRange(0,qo.length);return qo[e]}function la(t){const e=t.nextRange(0,Wo.length);return Wo[e]}function ua(t){const e=t.nextRange(0,Xo.length);return Xo[e]}function ha(t){const[e,o]=da(t),[,r,s,c]=aa(t),l=ia(t),h=la(t),m=ua(t);return{pubkey:new Y("PUBKEY",t.fillBytes(32)),name:`${e} Node ${c} ${t.nextRange(0,100)}`,address:t.fillBytes(32),company:{name:e,website:o},location:{coords:[r,s],country:c},operatingSystem:l,networkType:m,nodeType:h}}function*wa(){const t=new ce(ze),e=t.nextRange(50,150);for(let o=0;o<e;o++)yield ha(t)}const Qe=Array.from(wa());class ye{constructor(e){this.value=e,this.value=e}valueOf(){return Number(this.value)}toString(){return Number(this.value).toString()}}function Ct(t,e){return t.valueOf()<e.valueOf()}function Aa(t,e){return t.valueOf()<=e.valueOf()}function je(t,e){return t.valueOf()>e.valueOf()}function nn(t,e){return Aa(t,e)?t:e}function rn(t,e){return je(t,e)?t:e}class Bt{constructor(e,o){n(this,"min");n(this,"max");this.min=e,this.max=o}contains(e){return!(Ct(e.lat,this.min.lat)||je(e.lat,this.max.lat)||Ct(e.lng,this.min.lng)||je(e.lng,this.max.lng))}}function Ce(t){const e=t[Symbol.iterator](),o=Ro(e),[r,s]=Uo(([c,l],h)=>[c.min(h.bbox.min),l.max(h.bbox.max)],[o.bbox.min,o.bbox.max],e);return new Bt(r,s)}function ma(t){const e=t[Symbol.iterator](),o=Ro(e),[r,s]=Uo(([c,l],h)=>[c.min(h),l.max(h)],[o,o],e);return new Bt(r,s)}function sn(t){if(t.startsWith("0x"))return sn(t.substring(2));if(t.length&1)throw new Ae;const e=new ArrayBuffer(t.length/2);return ga($o(t),e),e}function ga(t,e){const o=new DataView(e);let r=0;for(;r<e.byteLength;){const s=t.next(),c=t.next();if(s.done||c.done)throw new Ae;const l=cn(s.value),h=cn(c.value),m=l<<4|h;o.setUint8(r,m),r++}}function cn(t){if(t>=48&&t<=57)return t-48;if(t>=97&&t<=102)return t-97+10;if(t>=65&&t<=70)return t-65+10;throw new Te(t)}function fa(t){return t.toString(16).padStart(2,"0")}function*pa(t){yield*Ho(t,fa)}function ya(t){return pa(t[Symbol.iterator]())}class Ca{convert(e){if(typeof e!="string")throw new S(typeof e,"string");return sn(e)}}class Ba{convert(e){return A(e,ArrayBuffer),["0x",...ya(new Uint8Array(e))].join("")}}class va extends a{constructor(){super(...arguments);n(this,"encoder",new Ba);n(this,"decoder",new Ca)}}const v=new va;class ba{constructor(e){n(this,"encoding");this.encoding=e}convert(e){if(typeof e!="string")throw new S(typeof e,"string");return this.encoding.decodeString(e)}}class Ea{constructor(e){n(this,"encoding");this.encoding=e}convert(e){return this.encoding.encodeToString(e)}}class _e extends a{constructor(o){super();n(this,"encoder");n(this,"decoder");this.encoder=new Ea(o),this.decoder=new ba(o)}}new _e(yt),new _e(jc);const an=new _e(Yo),dn=new _e(pt);class xa{convert(e){if(!ee(e))throw new S(typeof e,"string");const o=new Date(e);if(Number.isNaN(o.valueOf()))throw new S("NaN","number");return o}}class Sa{convert(e){return A(e,Date),e.toISOString()}}class Na extends a{constructor(){super(...arguments);n(this,"encoder",new Sa);n(this,"decoder",new xa)}}const ae=new Na;class ln{constructor(e){n(this,"itemCodec");this.itemCodec=e}convert(e){return e===null?null:this.itemCodec.decode(e)}}class un{constructor(e){n(this,"itemCodec");this.itemCodec=e}convert(e){return e===null?null:(rr(e),this.itemCodec.encode(e))}}class hn extends a{constructor(o,r){super();n(this,"encoder");n(this,"decoder");this.encoder=r,this.decoder=o}}class ne{}const wn=new Map;function re(t,e){wn.set(t,e)}function An(t){const e=wn.get(t);if(!e)throw new ue(t);return e}class Ia{convert(e){return An(e.type).encode(e)}}class Da{convert(e){if(d(e,"type","coordinates"),!ee(e.type))throw new S(typeof e.type,"string");return An(e.type).decode(e)}}class ka extends a{constructor(){super();n(this,"encoder");n(this,"decoder");this.encoder=new Ia,this.decoder=new Da}}const mn=new ka,gn=new k(new I(mn),new D(mn)),vt="GeometryCollection";class Pa extends ne{constructor(o){super();n(this,"type",vt);n(this,"geometries");n(this,"bbox");this.geometries=o,this.bbox=Ce(o)}toJSON(){return fn.encode(this)}}class Ta{constructor(e){n(this,"listGeometryCodec");this.listGeometryCodec=e}convert(e){return{type:e.type,geometries:this.listGeometryCodec.encode(e.geometries)}}}class Ma{constructor(e){n(this,"listGeometryCodec");this.listGeometryCodec=e}convert(e){return d(e,"type","geometries"),L(e,vt),new Pa(this.listGeometryCodec.decode(e.geometries))}}class Oa extends a{constructor(){super(...arguments);n(this,"encoder",new Ta(gn));n(this,"decoder",new Ma(gn))}}const fn=new Oa;re(vt,fn);class T extends ye{toString(){return`${Number(this)}°`}}class Ha{convert(e){return Number(e)}}class Ra{convert(e){if(!st(e))throw new S(typeof e,"number");return new T(e)}}class La extends a{constructor(){super();n(this,"encoder");n(this,"decoder");this.encoder=new Ha,this.decoder=new Ra}}const Ua=new La;class b extends ye{toString(){return`${String(this.value)} lat`}}class E extends ye{toString(){return`${String(this.value)} lng`}}class Q extends ye{toString(){return`${Number(this)} rad`}}class Ga{convert(e){return Number(e)}}class Fa{convert(e){if(!st(e))throw new S(typeof e,"number");return new Q(e)}}class Ja extends a{constructor(){super();n(this,"encoder");n(this,"decoder");this.encoder=new Ga,this.decoder=new Fa}}const za=new Ja;class C{constructor(e,o){this.lat=e,this.lng=o,this.lat=e,this.lng=o}min(e){return new C(nn(this.lat,e.lat),nn(this.lng,e.lng))}max(e){return new C(rn(this.lat,e.lat),rn(this.lng,e.lng))}toString(){return`${this.lat}, ${this.lng}`}}class Qa{constructor(e){n(this,"unitCodec");this.unitCodec=e}convert(e){return[this.unitCodec.encode(e.lat.value),this.unitCodec.encode(e.lng.value)]}}class ja{constructor(e){n(this,"unitCodec");this.unitCodec=e}convert(e){if(!(e instanceof Array))throw new S(typeof e,"Array");if(e.length!==2)throw new TypeError(`Expected array of length 2, got ${e.length}`);const[o,r]=e;return new C(new b(this.unitCodec.decode(o)),new E(this.unitCodec.decode(r)))}}class pn extends a{constructor(o){super();n(this,"encoder");n(this,"decoder");this.encoder=new Qa(o),this.decoder=new ja(o)}}const yn=new pn(Ua);new pn(za);class _a{convert(e){return[Number(e.lng),Number(e.lat)]}}class Va{convert(e){if(!(e instanceof Array))throw new S(typeof e,"Array");if(e.length!==2)throw new TypeError(`Expected array of length 2, got ${e.length}`);return new C(new b(new T(e[1])),new E(new T(e[0])))}}class $a extends a{constructor(){super(...arguments);n(this,"encoder",new _a);n(this,"decoder",new Va)}}const Ve=new $a,de=new k(new I(Ve),new D(Ve)),ie=new k(new I(de),new D(de)),Cn=new k(new I(ie),new D(ie)),bt="LineString";class Bn extends ne{constructor(o){super();n(this,"type",bt);n(this,"coordinates");n(this,"bbox");this.coordinates=o,this.bbox=ma(o)}[Symbol.iterator](){return this.coordinates[Symbol.iterator]()}toJSON(){return vn.encode(this)}}class Ya{constructor(e){n(this,"codec");this.codec=e}convert(e){return{type:e.type,coordinates:this.codec.encode(e.coordinates)}}}class Xa{constructor(e){n(this,"codec");this.codec=e}convert(e){d(e,"type","coordinates"),L(e,bt);const o=this.codec.decode(e.coordinates);return new Bn(o)}}class Wa extends a{constructor(){super(...arguments);n(this,"encoder",new Ya(de));n(this,"decoder",new Xa(de))}}const vn=new Wa;re(bt,vn);const Et="MultiLineString";class qa extends ne{constructor(o){super();n(this,"type",Et);n(this,"coordinates");n(this,"bbox");this.coordinates=o,this.bbox=Ce(o)}[Symbol.iterator](){return this.coordinates[Symbol.iterator]()}toJSON(){return bn.encode(this)}}class Ka{constructor(e){n(this,"codec");this.codec=e}convert(e){return{type:e.type,coordinates:this.codec.encode(e.coordinates.map(o=>o.coordinates))}}}class Za{constructor(e){n(this,"codec");this.codec=e}convert(e){d(e,"type","coordinates"),L(e,Et);const o=this.codec.decode(e.coordinates);return new qa(o.map(r=>new Bn(r)))}}class ed extends a{constructor(){super(...arguments);n(this,"encoder",new Ka(ie));n(this,"decoder",new Za(ie))}}const bn=new ed;re(Et,bn);const xt="Point";class $e extends ne{constructor(o){super();n(this,"type",xt);n(this,"coordinates");n(this,"bbox");this.coordinates=o,this.bbox=new Bt(this.coordinates,this.coordinates)}toJSON(){return En.encode(this)}}class td{constructor(e){n(this,"codec");this.codec=e}convert(e){return{type:e.type,coordinates:this.codec.encode(e.coordinates)}}}class od{constructor(e){n(this,"codec");this.codec=e}convert(e){return d(e,"type","coordinates"),L(e,xt),new $e(this.codec.decode(e.coordinates))}}class nd extends a{constructor(){super(...arguments);n(this,"encoder",new td(Ve));n(this,"decoder",new od(Ve))}}const En=new nd;re(xt,En);const St="MultiPoint";class Nt extends ne{constructor(o){super();n(this,"type",St);n(this,"coordinates");n(this,"bbox");this.coordinates=o,this.bbox=Ce(o)}[Symbol.iterator](){return this.coordinates[Symbol.iterator]()}toJSON(){return xn.encode(this)}}class rd{constructor(e){n(this,"codec");this.codec=e}convert(e){return{type:e.type,coordinates:this.codec.encode(e.coordinates.map(o=>o.coordinates))}}}class sd{constructor(e){n(this,"codec");this.codec=e}convert(e){d(e,"type","coordinates"),L(e,St);const o=this.codec.decode(e.coordinates);return new Nt(o.map(r=>new $e(r)))}}class cd extends a{constructor(){super(...arguments);n(this,"encoder",new rd(de));n(this,"decoder",new sd(de))}}const xn=new cd;re(St,xn);const It="Polygon";class Sn extends ne{constructor(o){super();n(this,"type",It);n(this,"coordinates");n(this,"bbox");this.coordinates=o,this.bbox=Ce(o)}[Symbol.iterator](){return this.coordinates[Symbol.iterator]()}toJSON(){return Nn.encode(this)}}class ad{constructor(e){n(this,"codec");this.codec=e}convert(e){return{type:e.type,coordinates:this.codec.encode(e.coordinates.map(o=>o.coordinates.map(r=>r.coordinates)))}}}class dd{constructor(e){n(this,"codec");this.codec=e}convert(e){d(e,"type","coordinates"),L(e,It);const o=this.codec.decode(e.coordinates);return new Sn(o.map(r=>new Nt(r.map(s=>new $e(s)))))}}class id extends a{constructor(){super(...arguments);n(this,"encoder",new ad(ie));n(this,"decoder",new dd(ie))}}const Nn=new id;re(It,Nn);const Dt="MultiPolygon";class ld extends ne{constructor(o){super();n(this,"type",Dt);n(this,"coordinates");n(this,"bbox");this.coordinates=o,this.bbox=Ce(o)}[Symbol.iterator](){return this.coordinates[Symbol.iterator]()}toJSON(){return In.encode(this)}}class ud{constructor(e){n(this,"codec");this.codec=e}convert(e){return{type:e.type,coordinates:this.codec.encode(e.coordinates.map(o=>o.coordinates.map(r=>r.coordinates.map(s=>s.coordinates))))}}}class hd{constructor(e){n(this,"codec");this.codec=e}convert(e){d(e,"type","coordinates"),L(e,Dt);const o=this.codec.decode(e.coordinates);return new ld(o.map(r=>new Sn(r.map(s=>new Nt(s.map(c=>new $e(c)))))))}}class wd extends a{constructor(){super(...arguments);n(this,"encoder",new ud(Cn));n(this,"decoder",new hd(Cn))}}const In=new wd;re(Dt,In);const nt=class nt{constructor(e,o,r,s){n(this,"inputMin");n(this,"inputMax");n(this,"outputMin");n(this,"outputMax");n(this,"inputRangeInv");n(this,"outputRange");this.inputMin=e,this.inputMax=o,this.outputMin=r,this.outputMax=s,this.inputRangeInv=1/(this.inputMax-this.inputMin),this.outputRange=this.outputMax-this.outputMin}transform(e){return(e-this.inputMin)*this.inputRangeInv*this.outputRange+this.outputMin}};n(nt,"identity",new nt(0,1,0,1));let le=nt;class j extends ye{toString(){return`${Number(this)} dp`}}class Ad{constructor(e,o,r,s){n(this,"minInput");n(this,"maxInput");n(this,"minOutput");n(this,"maxOutput");n(this,"horizontalAffine");n(this,"inverseHorizontalAffine");n(this,"verticalAffine");n(this,"inverseVerticalAffine");this.minInput=e,this.maxInput=o,this.minOutput=r,this.maxOutput=s,this.horizontalAffine=new le(Number(e.lat),Number(o.lat),Number(r.lat),Number(s.lat)),this.inverseHorizontalAffine=new le(Number(r.lat),Number(s.lat),Number(e.lat),Number(o.lat)),this.verticalAffine=new le(Number(e.lng),Number(o.lng),Number(r.lng),Number(s.lng)),this.inverseVerticalAffine=new le(Number(r.lng),Number(s.lng),Number(e.lng),Number(o.lng))}project(e){return new C(new b(new j(this.horizontalAffine.transform(Number(e.lat)))),new E(new j(this.verticalAffine.transform(Number(e.lng)))))}inverseProject(e){const o=new Q(this.inverseHorizontalAffine.transform(Number(e.lat))),r=new Q(this.inverseVerticalAffine.transform(Number(e.lng)));return new C(new b(o),new E(r))}}class md{constructor(){n(this,"minInput",new C(new b(new T(-90)),new E(new T(-180))));n(this,"maxInput",new C(new b(new T(90)),new E(new T(180))));n(this,"minOutput",new C(new b(new Q(-Math.PI/2)),new E(new Q(-Math.PI))));n(this,"maxOutput",new C(new b(new Q(Math.PI/2)),new E(new Q(Math.PI))))}projectLatitude(e){return new b(this.convertDegreesToRadians(e))}convertDegreesToRadians(e){return new Q(Number(e)*(Math.PI/180))}convertRadiansToDegrees(e){return new T(Number(e)*(180/Math.PI))}projectLongitude(e){return new E(this.convertDegreesToRadians(e))}inverseProjectLatitude(e){return new b(this.convertRadiansToDegrees(e))}inverseProjectLongitude(e){return new E(this.convertRadiansToDegrees(e))}project(e){return new C(this.projectLatitude(e.lat),this.projectLongitude(e.lng))}inverseProject(e){return new C(this.inverseProjectLatitude(e.lat),this.inverseProjectLongitude(e.lng))}}const Dn=new md,kn=85.05133,B=class B{constructor(){n(this,"minInput",B.min);n(this,"maxInput",B.max);n(this,"minOutput",B.minProjection);n(this,"maxOutput",B.maxProjection)}static projectLongitude(e){return new E(Number(e))}static ensureLatitudeBounds(e){return je(e,B.max.lat)?B.max.lat:Ct(e,B.min.lat)?B.min.lat:e}static projectLatitude(e){return new b(Math.log(Math.tan(Math.PI/4+Number(this.ensureLatitudeBounds(e))/2)))}static inverseProjectLongitude(e){return new E(new Q(Number(e)))}static inverseProjectLatitude(e){return new b(new Q(2*Math.atan(Math.exp(Number(e)))-Math.PI/2))}static staticProject(e){return new C(this.projectLatitude(e.lat),this.projectLongitude(e.lng))}project(e){return B.staticProject(e)}static staticInverseProject(e){return new C(this.inverseProjectLatitude(e.lat),this.inverseProjectLongitude(e.lng))}inverseProject(e){return B.staticInverseProject(e)}};n(B,"min",Dn.project(new C(new b(new T(-kn)),new E(new T(-180))))),n(B,"max",Dn.project(new C(new b(new T(kn)),new E(new T(180))))),n(B,"minProjection",B.staticProject(B.min)),n(B,"maxProjection",B.staticProject(B.max));let Ye=B;const gd="AwABAQEcDQABDA0AAQYNAAEEDgABgAwAAQINAAEWAWEMAAF6AfgMAAH/AfIMAAH/AfwMAAH/AfgMAAH/AeAMAAF/AdAMAAF/AfAMAAF/AeAMAAF/AeAMAAE/AfAMAAEfAfAMAAEfAfwMAAE/AfwMAAF/Af4MAAF/Af8BgAsAAT8B/wHgCgABHwE/Av8BgAkAAZ8BPwL/AeAIAAEDAUwBPwL/AfAIAAEDAU8B3wL/AfgIAAEFAUMBzwL/AfoIAAEMAWMB7wL/Af0IAAEBAaMB7wP/CQABZwHPA/8BgAcAATgBoAHvA/8B4AcAARwBQAFvA/8B4AcAAYQB7gEPA/8B8AcAAQwBDgEvAv8B/gEwBgABAwGBAS8BzwHvAf8B/AEQBgABAwH4AYwBfwGDAf8B/AEYBgABCAHyAeMBHwEDAf8B/AE4BgABHgF9AS8BhgEBAf8B/AEIBgABKwHXAWwBvQGBAf8B/AEOBgABHgH/AW8B+QEBAf8B/gcAAe4B/wEHAYABQAE/AfABAAEYBQABfwH8AQcBwQHpAf8B8AHBAT4FAAH/AdgBAwHgAX8B/wHAAQMB/wGAAQABoAIAAf8BwAEBAfcBPwH/AQABAwH/AcABHQH8AgAB/gEIAQABfwGfAfYBAAEjAf8BxwH/AfgCAAH+AR8BgAFfAUcB7AEAAQMD/wHkAgABfQGfAYABDQGPAf4BAAEDAv8B/gMAATEB/wEAAQQBDwHkAQABAwL/AfgDAAEPAf8BgAEAAQEB4AEAAQEC/wHwAwABFwH/AYABAAEBAdACAAL/AfADAAEfAf8B8AIAAZACAAL/AcADAAEHAf8B/gFMBAAC/wHAAwABDwL/AV8EAAF/Af8BgAMAAT8D/wHAAwABHwH+BAABfwP/AeADAAEfAfgEAAFfA/8B8AMAAQ8B8AQABP8BgAMAAQ8B8AQAAX8C/wH8BAABDwHAAwABAwP/AfwEAAEGBAABAwF/Av8B+AkAAQMD/wHgCQABAwHvAv8B8AkAAQEC/wH+AeAKAAFnAf8B+wFACgABXwH+AbgBgAoAAQ8BogFQAQMKAAEGAQABIAEDCgABDgIAAQMDAAH8BgABDAUAAQEB/wwAAQMB/woAAQEBgQHPAf8BgAkAAQYBAQL/AYAJAAEFAdEB3wH/AYAKAALfAf8LAAI/Af8LAAF+AT8B/woAAXgB/gE/Af8BgAkAAXsB/QG/Af8BgAYAAWABAAEBAfkB/gEPAf8B+AYAATwBAAEXAf4B/QEPAv8B8AUAAXsBAAEfAfwB/gHHAv8B/gUAAZgBAAE/AZQB/gEHA/8BwAQAAZgBAAE/AQMB/wGPA/8BwAQAAeQBAAF8AesB/wFHA/8BwAQAAcABAAF/Ae8B/wFHA/8BwAYAAX8B7wH+AccD/wGABgABPwH/AfgBxwP/BwABPwH/Af0B5QL/AfwHAAE8Af8B+AHOAX8B/wHgBwABHQH/AfwB/wEfAf8BwAcAAQ8B/wH+Af8BzwHxAYAHAAEHA/8B9wHgCAABFwP/AfsBwAF8BQABgAEAAQcB/wH5Af8B+wGAAXgEAAEDAYABAAEvAf8B+AE8AfoBAAGABgABAQEfAf8B+wE+AfAIAAEPAY8C/wH+AfAGAAEGAQABOAGfA/8BYAYAAQEBAAFgAV8D/wkAAcABPwP/BwABAgEAAYABPwP/CAABAQGAAV8D/wkAAQME/wGACAABAwH7A/8BwAgAAQUBbwP/AfgIAAEBAd8D/wH+CAABBwT/Af4IAAEFBP8B8QgAAQcE/wHgCAABDwT/AcAIAAE/BP8BgAgAAX8E/wGABgABAwGAAX8E/wHABgABAwFgBf8B8AGABgABcAF/BP8B+AFABgABCAX/AfgBoAYAARsF/wH8AVgGAAEDBf8B/gEcBwAF/wHMAQQHAAHvBP8B4AEwBwABfwT/AcABcAcAAQcE/wGAAXABDwYAAQcE/wGAAeABHwHABQABAwP/Ab4BAAEYAR8BwAUAAQMD/wGAAQEBKAE/AcAFAAEPA/8BgAEFARIBfwGABQABBwP/AeACAAF/AYAGAAP/AwABfwGABgAC/wH+ARABAAEQAf8BgAYAAv8B/gMAAf8BgAYAAf8B/gH8ATABAAEIAf8BwAUAAWIB/wH8AfABIAEAAQwBPwHgBQABawH/AfABAgGAAQABDgH/AfAFAAFDAf8B8AECAgABDAF/AfAFAAEBAf8B8AMAAQQBHwH2BQABIQH/AfADAAECAQ8B8AYAAf8B8AQAAQcBwAYAAf8B8AwAAf8B4wGACwAB/wHHAYALAAE/Ae8DAAECCAABPwGQDAABPwHgDAABfwHgBQABAQYAAV8B4AUAAQMGAAE/AcAFAAEGBgABPwHABQABHAYAAT4BgAgA";function fd(t){const e=new DataView(t),o=new Array(t.byteLength*8),r=t.byteLength;for(let s=0;s<r;s++){const c=e.getUint8(s);for(let l=0;l<8;l++){const h=7-l,m=s;o[m*8+l]=!!(c&1<<h)}}return o}function pd(t){const e=new DataView(t),o=t.byteLength;let r=0;for(let l=0;l<o;l+=2)r+=e.getUint8(l);const s=new ArrayBuffer(r),c=new DataView(s);for(let l=0,h=0;l<o;l+=2){const m=e.getUint8(l),w=e.getUint8(l+1);for(let x=0;x<m;x++)c.setUint8(h++,w)}return s}const Xe=new j(12*7*16),yd=new j(Math.floor(Number(Xe)*.75)),Be=new j(9),Cd=Xe,Bd=Xe;new Ad(Ye.minProjection,Ye.maxProjection,new C(new b(Bd),new E(new j(0))),new C(new b(new j(0)),new E(Cd)));const vd=Xe,bd=yd,Pn=new j(Math.floor(Number(Be)/2)),Ed=Math.floor(Number(vd)/Number(Be)),xd=Math.floor(Number(bd)/Number(Be)),Sd=Array.from(Le(Lo(xd),t=>new b(new j(t*Number(Be)+Number(Pn))))),Nd=Array.from(Le(Lo(Ed),t=>new E(new j(t*Number(Be)+Number(Pn))))),Tn=Array.from(dc(Nd,t=>Le(Sd,e=>new C(e,t))));Math.ceil(Tn.length/8);const Id=pt.decodeString(gd),Dd=pd(Id),kd=fd(Dd),Pd=Go(Tn,kd,(t,e)=>[t,e]),Td=Oo(Pd,([,t])=>t),Md=Le(Td,([t])=>t);Array.from(Md);class Mn{constructor(e,o){n(this,"width");n(this,"index");this.width=e,this.index=o}toJSON(){return kt.encode(this)}}class Od{convert(e){return d(e,"width","index"),new Mn(u.decode(e.width),u.decode(e.index))}}class Hd{convert(e){return A(e,Mn),{width:u.encode(e.width),index:u.encode(e.index)}}}class Rd extends a{constructor(){super(...arguments);n(this,"encoder",new Hd);n(this,"decoder",new Od)}}const kt=new Rd;class On{constructor(e,o,r,s){n(this,"order");n(this,"head");n(this,"bits");n(this,"data");this.order=e,this.head=o,this.bits=r,this.data=s}toJSON(){return Pt.encode(this)}}class Ld{convert(e){return d(e,"order","head","bits","data"),new On(i.decode(e.order),kt.decode(e.head),u.decode(e.bits),P.decode(e.data))}}class Ud{convert(e){return A(e,On),{order:i.encode(e.order),head:kt.encode(e.head),bits:u.encode(e.bits),data:P.encode(e.data)}}}class Gd extends a{constructor(){super(...arguments);n(this,"encoder",new Ud);n(this,"decoder",new Ld)}}const Pt=new Gd;class Hn{constructor(e,o,r){n(this,"r");n(this,"s");n(this,"v");this.r=e,this.s=o,this.v=r}toJSON(){return Tt.encode(this)}}class Fd{convert(e){return d(e,"r","s","v"),new Hn(v.decode(e.r),v.decode(e.s),u.decode(e.v))}}class Jd{convert(e){return A(e,Hn),{r:v.encode(e.r),s:v.encode(e.s),v:u.encode(e.v)}}}class zd extends a{constructor(){super(...arguments);n(this,"encoder",new Jd);n(this,"decoder",new Fd)}}const Tt=new zd;class Rn{constructor(e,o){n(this,"account");n(this,"amount");this.account=e,this.amount=o}toJSON(){return Mt.encode(this)}}class Qd{convert(e){return d(e,"account","amount"),new Rn(v.decode(e.account),v.decode(e.amount))}}class jd{convert(e){return A(e,Rn),{account:v.encode(e.account),amount:v.encode(e.amount)}}}class _d extends a{constructor(){super(...arguments);n(this,"encoder",new jd);n(this,"decoder",new Qd)}}const Mt=new _d;class Ln{constructor(e,o,r){n(this,"number");n(this,"timestamp");n(this,"hash");this.number=e,this.timestamp=o,this.hash=r}toJSON(){return Ot.encode(this)}}class Vd{convert(e){return d(e,"number","timestamp","hash"),new Ln(u.decode(e.number),i.decode(e.timestamp),i.decode(e.hash))}}class $d{convert(e){return A(e,Ln),{number:u.encode(e.number),timestamp:i.encode(e.timestamp),hash:i.encode(e.hash)}}}class Yd extends a{constructor(){super(...arguments);n(this,"encoder",new $d);n(this,"decoder",new Vd)}}const Ot=new Yd,Un=new hn(new ln(Ot),new un(Ot));class Gn{constructor(e){n(this,"bytes");this.bytes=e}toJSON(){return Ht.encode(this)}}class Xd{convert(e){return d(e,"bytes"),new Gn(an.decode(e.bytes))}}class Wd{convert(e){return A(e,Gn),{bytes:an.encode(e.bytes)}}}class qd extends a{constructor(){super(...arguments);n(this,"encoder",new Wd);n(this,"decoder",new Xd)}}const Ht=new qd;class Fn{constructor(e,o,r,s,c,l,h,m,w,x){n(this,"height");n(this,"timestamp");n(this,"l1_head");n(this,"l1_finalized");n(this,"payload_commitment");n(this,"ns_table");n(this,"block_merkle_root");n(this,"fee_merkle_root");n(this,"builder_signature");n(this,"fee_info");this.height=e,this.timestamp=o,this.l1_head=r,this.l1_finalized=s,this.payload_commitment=c,this.ns_table=l,this.block_merkle_root=h,this.fee_merkle_root=m,this.builder_signature=w,this.fee_info=x}toJSON(){return ve.encode(this)}}class Kd{convert(e){return d(e,"height","timestamp","l1_head","l1_finalized","payload_commitment","ns_table","block_merkle_root","fee_merkle_root","builder_signature","fee_info"),new Fn(u.decode(e.height),u.decode(e.timestamp),u.decode(e.l1_head),Un.decode(e.l1_finalized),P.decode(e.payload_commitment),Ht.decode(e.ns_table),g.decode(e.block_merkle_root),g.decode(e.fee_merkle_root),Tt.decode(e.builder_signature),Mt.decode(e.fee_info))}}class Zd{convert(e){return A(e,Fn),{height:u.encode(e.height),timestamp:u.encode(e.timestamp),l1_head:u.encode(e.l1_head),l1_finalized:Un.encode(e.l1_finalized),payload_commitment:P.encode(e.payload_commitment),ns_table:Ht.encode(e.ns_table),block_merkle_root:g.encode(e.block_merkle_root),fee_merkle_root:g.encode(e.fee_merkle_root),builder_signature:Tt.encode(e.builder_signature),fee_info:Mt.encode(e.fee_info)}}}class ei extends a{constructor(){super(...arguments);n(this,"encoder",new Zd);n(this,"decoder",new Kd)}}const ve=new ei;class Jn{constructor(e,o){n(this,"vm");n(this,"payload");this.vm=e,this.payload=o}toJSON(){return be.encode(this)}}class ti{convert(e){return d(e,"vm","payload"),new Jn(u.decode(e.vm),P.decode(e.payload))}}class oi{convert(e){return A(e,Jn),{vm:u.encode(e.vm),payload:P.encode(e.payload)}}}class ni extends a{constructor(){super(...arguments);n(this,"encoder",new oi);n(this,"decoder",new ti)}}const be=new ni;new k(new I(be),new D(be));class zn{constructor(e,o,r,s,c){n(this,"header");n(this,"hash");n(this,"size");n(this,"num_transactions");n(this,"proposer_id");this.header=e,this.hash=o,this.size=r,this.num_transactions=s,this.proposer_id=c}toJSON(){return Rt.encode(this)}}class ri{convert(e){return d(e,"header","hash","size","num_transactions","proposer_id"),new zn(ve.decode(e.header),g.decode(e.hash),u.decode(e.size),u.decode(e.num_transactions),v.decode(e.proposer_id))}}class si{convert(e){return A(e,zn),{header:ve.encode(e.header),hash:g.encode(e.hash),size:u.encode(e.size),num_transactions:u.encode(e.num_transactions),proposer_id:v.encode(e.proposer_id)}}}class ci extends a{constructor(){super(...arguments);n(this,"encoder",new si);n(this,"decoder",new ri)}}const Rt=new ci;new k(new I(Rt),new D(Rt));class Qn{constructor(e,o,r,s){n(this,"hash");n(this,"header");n(this,"offset");n(this,"transaction");this.hash=e,this.header=o,this.offset=r,this.transaction=s}toJSON(){return Lt.encode(this)}}class ai{convert(e){return d(e,"hash","header","offset","transaction"),new Qn(g.decode(e.hash),ve.decode(e.header),u.decode(e.offset),be.decode(e.transaction))}}class di{convert(e){return A(e,Qn),{hash:g.encode(e.hash),header:ve.encode(e.header),offset:u.encode(e.offset),transaction:be.encode(e.transaction)}}}class ii extends a{constructor(){super(...arguments);n(this,"encoder",new di);n(this,"decoder",new ai)}}const Lt=new ii;new k(new I(Lt),new D(Lt));class jn{constructor(e,o){n(this,"signature");n(this,"bitvec");this.signature=e,this.bitvec=o}toJSON(){return Ut.encode(this)}}class li{convert(e){if(!mo(e)||e.length!==2)throw new S(typeof e,"Array");return new jn(g.decode(e[0]),Pt.decode(e[1]))}}class ui{convert(e){return A(e,jn),[g.encode(e.signature),Pt.encode(e.bitvec)]}}class hi extends a{constructor(){super(...arguments);n(this,"encoder",new ui);n(this,"decoder",new li)}}const Ut=new hi;new hn(new ln(Ut),new un(Ut));class Ee{}class Gt extends Ee{toJSON(){return Ft.encode(this)}}class wi{convert(e){if(!ee(e)||e!=="Empty")throw new F;return new Gt}}class Ai{convert(e){return A(e,Gt),"Empty"}}class mi extends a{constructor(){super(...arguments);n(this,"encoder",new Ai);n(this,"decoder",new wi)}}const Ft=new mi;class Jt extends Ee{constructor(o,r,s){super();n(this,"value");n(this,"pos");n(this,"elem");this.value=o,this.pos=r,this.elem=s}toJSON(){return zt.encode(this)}}class gi{convert(e){d(e,"Leaf");const o=e.Leaf;return d(o,"value","pos","elem"),new Jt(g.decode(o.value),g.decode(o.pos),g.decode(o.elem))}}class fi{convert(e){return A(e,Jt),{Leaf:{value:g.encode(e.value),pos:g.encode(e.pos),elem:g.encode(e.elem)}}}}class pi extends Z{constructor(){super(...arguments);n(this,"encoder",new fi);n(this,"decoder",new gi)}}const zt=new pi;class Qt extends Ee{constructor(o){super();n(this,"value");this.value=o}toJSON(){return jt.encode(this)}}class yi{convert(e){d(e,"ForgettenSubtree");const o=e.ForgettenSubtree;return d(o,"value"),new Qt(g.decode(o.value))}}class Ci{convert(e){return A(e,Qt),{ForgettenSubtree:{value:g.encode(e.value)}}}}class Bi extends Z{constructor(){super(...arguments);n(this,"encoder",new Ci);n(this,"decoder",new yi)}}const jt=new Bi;class _t extends Ee{constructor(o,r){super();n(this,"value");n(this,"children");this.value=o,this.children=r}toJSON(){return Vt.encode(this)}}class vi{convert(e){d(e,"Branch");const o=e.Branch;return d(o,"value","children"),new _t(g.decode(o.value),Vn.decode(o.children))}}class bi{convert(e){return A(e,_t),{Branch:{value:g.encode(e.value),children:Vn.encode(e.children)}}}}class Ei extends a{constructor(){super(...arguments);n(this,"encoder",new bi);n(this,"decoder",new vi)}}const Vt=new Ei;class xi{convert(e){if(ct(e,"Leaf",xe))return zt.decoder.convert(e);if(ct(e,"Branch",xe))return Vt.decoder.convert(e);if(ct(e,"ForgettenSubtree",xe))return jt.decoder.convert(e);if(ee(e))return Ft.decoder.convert(e);throw new F}}class Si{convert(e){if(A(e,Ee),e instanceof Jt)return zt.encode(e);if(e instanceof _t)return Vt.encode(e);if(e instanceof Qt)return jt.encode(e);if(e instanceof Gt)return Ft.encode(e);throw new F}}class Ni extends a{constructor(){super(...arguments);n(this,"encoder",new Si);n(this,"decoder",new xi)}}const _n=new Ni,Vn=new k(new I(_n),new D(_n));class $t{constructor(e,o,r,s,c,l,h,m){n(this,"hash");n(this,"height");n(this,"time");n(this,"numTransactions");n(this,"proposerID");n(this,"feeRecipient");n(this,"size");n(this,"blockReward");this.hash=e,this.height=o,this.time=r,this.numTransactions=s,this.proposerID=c,this.feeRecipient=l,this.size=h,this.blockReward=m}toJSON(){return Yt.encode(this)}}class Ii{convert(e){return d(e,"hash","height","time","num_transactions","proposer_id","fee_recipient","size","block_reward"),new $t(g.decode(e.hash),u.decode(e.height),ae.decode(e.time),u.decode(e.num_transactions),v.decode(e.proposer_id),v.decode(e.fee_recipient),u.decode(e.size),jo.decode(e.block_reward))}}class Di{convert(e){return A(e,$t),{hash:g.encode(e.hash),height:u.encode(e.height),time:ae.encode(e.time),num_transactions:u.encode(e.numTransactions),proposer_id:v.encode(e.proposerID),fee_recipient:v.encode(e.feeRecipient),size:u.encode(e.size),block_reward:jo.encode(e.blockReward)}}}class ki extends Z{constructor(){super(...arguments);n(this,"encoder",new Di);n(this,"decoder",new Ii)}}const Yt=new ki;class $n{constructor(e,o,r,s,c,l){n(this,"hash");n(this,"height");n(this,"proposerID");n(this,"numTransactions");n(this,"size");n(this,"time");this.hash=e,this.height=o,this.proposerID=r,this.numTransactions=s,this.size=c,this.time=l}toJSON(){return Xt.encode(this)}}class Pi{convert(e){return d(e,"hash","height","proposer_id","num_transactions","size","time"),new $n(g.decode(e.hash),u.decode(e.height),v.decode(e.proposer_id),u.decode(e.num_transactions),u.decode(e.size),ae.decode(e.time))}}class Ti{convert(e){return A(e,$n),{hash:g.encode(e.hash),height:u.encode(e.height),proposer_id:v.encode(e.proposerID),num_transactions:u.encode(e.numTransactions),size:u.encode(e.size),time:ae.encode(e.time)}}}class Mi extends Z{constructor(){super(...arguments);n(this,"encoder",new Ti);n(this,"decoder",new Pi)}}const Xt=new Mi;new k(new I(Xt),new D(Xt));function We(t){return t!==null}function Oi(t,e){return t.blockHeights-e.blockHeights}class Wt{constructor(e,o,r,s){n(this,"blockTime");n(this,"blockSize");n(this,"blockTransactions");n(this,"blockHeights");const c=[],l=s.length;for(let M=0;M<l;M++)c.push({blockTime:e[M],blockSize:o[M],blockTransactions:r[M],blockHeights:s[M]});c.sort(Oi);const h=c[0].blockHeights,m=c[l-1].blockHeights,w=[],x=[],R=[],W=[];for(let M=h,O=0;M<=m;M++){const _=c[O];if(_.blockHeights!==M){w.push(null),x.push(null),R.push(null),W.push(null);continue}w.push(_.blockTime),x.push(_.blockSize),R.push(_.blockTransactions),W.push(_.blockHeights),O++}const X=Math.max(0,W.length-50);this.blockTime=w.slice(X),this.blockSize=x.slice(X),this.blockTransactions=R.slice(X),this.blockHeights=W.slice(X)}toJSON(){return qt.encode(this)}}class Hi{convert(e){return d(e,"block_time","block_size","block_transactions","block_heights"),new Wt(P.decode(e.block_time),P.decode(e.block_size),P.decode(e.block_transactions),P.decode(e.block_heights))}}class Ri{convert(e){return A(e,Wt),{block_time:P.encode(e.blockTime.filter(We)),block_size:P.encode(e.blockSize.filter(We)),block_transactions:P.encode(e.blockTransactions.filter(We)),block_heights:P.encode(e.blockHeights.filter(We))}}}class Li extends a{constructor(){super(...arguments);n(this,"encoder",new Ri);n(this,"decoder",new Hi)}}const qt=new Li,Yn=P;class Xn{constructor(e,o,r,s,c,l){n(this,"hash");n(this,"rollups");n(this,"height");n(this,"time");n(this,"offset");n(this,"numTransactions");this.hash=e,this.rollups=o,this.height=r,this.time=s,this.offset=c,this.numTransactions=l}toJSON(){return Kt.encode(this)}}class Ui{convert(e){return d(e,"hash","rollups","height","time","offset","num_transactions"),new Xn(g.decode(e.hash),Yn.decode(e.rollups),u.decode(e.height),ae.decode(e.time),u.decode(e.offset),u.decode(e.num_transactions))}}class Gi{convert(e){return A(e,Xn),{hash:g.encode(e.hash),rollups:Yn.encode(e.rollups),height:u.encode(e.height),time:ae.encode(e.time),offset:u.encode(e.offset),num_transactions:u.encode(e.numTransactions)}}}class Fi extends a{constructor(){super(...arguments);n(this,"encoder",new Gi);n(this,"decoder",new Ui)}}const Kt=new Fi;new k(new I(Kt),new D(Kt));const Wn=u;class qn{constructor(e,o){n(this,"namespace");n(this,"payload");this.namespace=e,this.payload=o}toJSON(){return Zt.encode(this)}}class Ji{convert(e){return d(e,"namespace","payload"),new qn(Wn.decode(e.namespace),dn.decode(e.payload))}}class zi{convert(e){return A(e,qn),{namespace:Wn.encode(e.namespace),payload:dn.encode(e.payload)}}}class Qi extends a{constructor(){super(...arguments);n(this,"encoder",new zi);n(this,"decoder",new Ji)}}const Zt=new Qi;new k(new I(Zt),new D(Zt));class Kn{constructor(e,o){n(this,"name");n(this,"website");this.name=e,this.website=o}toJSON(){return eo.encode(this)}}class ji{convert(e){return{name:i.encode(e.name),website:i.encode(e.website)}}}class _i{convert(e){return d(e,"name","website"),new Kn(i.decode(e.name),i.decode(e.website))}}class Vi extends a{constructor(){super(...arguments);n(this,"encoder",new ji);n(this,"decoder",new _i)}}const eo=new Vi;class Zn{constructor(e,o){n(this,"coords");n(this,"country");this.coords=e,this.country=o}toJSON(){return to.encode(this)}}class $i{convert(e){return{coords:yn.encode(e.coords),country:i.encode(e.country)}}}class Yi{convert(e){return d(e,"coords","country"),new Zn(yn.decode(e.coords),i.decode(e.country))}}class Xi extends a{constructor(){super(...arguments);n(this,"encoder",new $i);n(this,"decoder",new Yi)}}const to=new Xi;class er{constructor(e,o,r,s,c,l,h,m){n(this,"publicKey");n(this,"name");n(this,"address");n(this,"company");n(this,"location");n(this,"operatingSystem");n(this,"nodeType");n(this,"networkType");this.publicKey=e,this.name=o,this.address=r,this.company=s,this.location=c,this.operatingSystem=l,this.nodeType=h,this.networkType=m}toJSON(){return oo.encode(this)}}class Wi{convert(e){return{publicKey:g.encode(e.publicKey),name:i.encode(e.name),address:v.encode(e.address),company:eo.encode(e.company),location:to.encode(e.location),operatingSystem:i.encode(e.operatingSystem),nodeType:i.encode(e.nodeType),networkType:i.encode(e.networkType)}}}class qi{convert(e){return d(e,"publicKey","name","address","company","location","operatingSystem","nodeType","networkType"),new er(g.decode(e.publicKey),i.decode(e.name),v.decode(e.address),eo.decode(e.company),to.decode(e.location),i.decode(e.operatingSystem),i.decode(e.nodeType),i.decode(e.networkType))}}class Ki extends a{constructor(){super(...arguments);n(this,"encoder",new Wi);n(this,"decoder",new qi)}}const oo=new Ki,tr=new k(new I(oo),new D(oo));class Zi{}const qe="NodeIdentityRollCall";class no extends Zi{get type(){return qe}toJSON(){return ro.encode(this)}}class el{convert(e){return d(e,"type"),L(e,qe),new no}}class tl{convert(){return{type:qe}}}class ol extends a{constructor(){super(...arguments);n(this,"encoder",new tl);n(this,"decoder",new el)}}const ro=new ol;class so{}const Ke="HistogramSnapshot";class co extends so{constructor(o){super();n(this,"histograms");this.histograms=o}get type(){return Ke}toJSON(){return ao.encode(this)}}class nl{convert(e){return d(e,"histograms","type"),L(e,Ke),new co(qt.decode(e.histograms))}}class rl{convert(e){return{histograms:qt.encode(e.histograms),type:Ke}}}class sl extends a{constructor(){super(...arguments);n(this,"encoder",new rl);n(this,"decoder",new nl)}}const ao=new sl,Ze="LatestBlockSnapshot";class et extends so{constructor(o){super();n(this,"latestBlock");this.latestBlock=o}get type(){return Ze}toJSON(){return io.encode(this)}}class cl{convert(e){return d(e,"latestBlock","type"),L(e,Ze),new et(Yt.decode(e.latestBlock))}}class al{convert(e){return{latestBlock:Yt.encode(e.latestBlock),type:Ze}}}class dl extends a{constructor(){super(...arguments);n(this,"encoder",new al);n(this,"decoder",new cl)}}const io=new dl,tt="NodeIdentitySnapshot";class ot extends so{constructor(o){super();n(this,"nodes");this.nodes=o}get type(){return tt}toJSON(){return lo.encode(this)}}class il{convert(e){return d(e,"nodes","type"),L(e,tt),new ot(tr.decode(e.nodes))}}class ll{convert(e){return{nodes:tr.encode(e.nodes),type:tt}}}class ul extends a{constructor(){super(...arguments);n(this,"encoder",new ll);n(this,"decoder",new il)}}const lo=new ul;function uo(t){return new $t(t.hash,t.height,t.time,t.numTransactions,t.proposer,t.proposer,t.size,t.fees)}function or(t){return new er(t.pubkey,t.name,t.address,new Kn(t.company.name,t.company.website),new Zn(new C(new b(new T(t.location.coords[0])),new E(new T(t.location.coords[1]))),t.location.country),t.operatingSystem,t.nodeType,t.networkType)}class hl{constructor(e,o){n(this,"responseStream");n(this,"requestStream");n(this,"prng",new ce(ea()));n(this,"latestBlock",uo(en()));n(this,"histogramBlockTimeData",ge(64));n(this,"histogramBlockSizeData",ge(64));n(this,"histogramBlockTransactionData",ge(64));n(this,"histogramBlockHeightData",ge(64));this.requestStream=e,this.responseStream=o}get stream(){return this.responseStream}async send(e){await this.requestStream.publish(e)}updateBlockDetails(e){const o=this.latestBlock;this.latestBlock=e,this.histogramBlockTimeData.put((e.time.valueOf()-o.time.valueOf())/1e3),this.histogramBlockSizeData.put(e.size),this.histogramBlockTransactionData.put(e.numTransactions),this.histogramBlockHeightData.put(e.height)}async initializeState(){for await(const e of na(this.prng))this.updateBlockDetails(uo(e));this.responseStream.publish(new et(this.latestBlock)),this.responseStream.publish(new co(new Wt(Array.from(this.histogramBlockTimeData.immutableIterable()),Array.from(this.histogramBlockSizeData.immutableIterable()),Array.from(this.histogramBlockTransactionData.immutableIterable()),Array.from(this.histogramBlockHeightData.immutableIterable())))),this.responseStream.publish(new ot(Qe.map(or)))}async startProcessing(){await this.initializeState(),this.handleRequests(),this.streamBlocks()}async handleRequests(){for await(const e of this.requestStream)this.handleRequest(e)}async streamBlocks(){const e=this.latestBlock;for await(const o of ra(this.prng,e.time.valueOf(),e.height)){const r=uo(o);this.updateBlockDetails(r),this.responseStream.publish(new et(r))}}handleRequest(e){if(e instanceof no){this.handleRoleCall();return}}handleRoleCall(){this.responseStream.publish(new ot(Qe.map(or)))}}class wl{convert(e){switch(d(e,"type"),e.type){case qe:return ro.decode(e)}throw new oe}}class Al{convert(e){if(e instanceof no)return ro.encode(e);throw new oe}}class ml extends a{constructor(){super(...arguments);n(this,"encoder",new Al);n(this,"decoder",new wl)}}const gl=new ml;class fl{convert(e){switch(d(e,"type"),e.type){case tt:return lo.decode(e);case Ze:return io.decode(e);case Ke:return ao.decode(e)}throw new oe}}class pl{convert(e){if(e instanceof ot)return lo.encode(e);if(e instanceof et)return io.encode(e);if(e instanceof co)return ao.encode(e);throw new oe}}class yl extends a{constructor(){super(...arguments);n(this,"encoder",new pl);n(this,"decoder",new fl)}}const Cl=new yl;async function Bl(){try{(await(await fetch("/config.json")).json()).node_validator_service_url}catch{}const t=Mo(1024),e=Mo(1024),o=new hl(t,e);return o.startProcessing(),o}async function vl(){return new bl(await Bl())}class bl{constructor(e){n(this,"service");this.service=e}get stream(){return this.service.stream}async send(e){return this.service.send(e)}}async function El(t,e){const o=await t;for await(const r of o.stream)e(Cl.encode(r))}class xl{constructor(e){n(this,"service");const o=vl();this.service=o,El(o,e)}async handleEvent(e){const o=gl.decode(e.data);try{(await this.service).send(o)}catch{}}}self.addEventListener("message",new xl(self.postMessage.bind(self)))})();
