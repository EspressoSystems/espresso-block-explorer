(function(){"use strict";class oi{breakpoint(){}}function ni(){return new oi}const si=ni();function We(){si.breakpoint()}class ci{assert(){}}function ai(){return new ci}const ii=ai();function U(t,e){ii.assert(t,e)}function Je(t,e){U(typeof t===e,`type assertion failed: expected "${e}", received "${typeof t}"`)}function di(t){U(t!=null,"expected a non-null value, received null")}function h(t,e){U(t instanceof e,`given value is not an instance of "${e.name}", specific type is "${typeof t=="object"&&t!==null?t.constructor.name:typeof t}"`)}class At extends Error{key;haveType;constructor(e,r,o=`expected object with key: "${r}", instead found ${e}`){super(o),this.haveType=e,this.key=r,Object.freeze(this),We()}toJSON(){return{code:At.name,message:this.message,have:this.haveType,key:this.key}}}class R{encode(e){return this.encoder.convert(e)}decode(e){return this.decoder.convert(e)}}class i extends R{}function li(t){return typeof t=="boolean"}function Tt(t){return typeof t=="number"}function ie(t){return typeof t=="string"}function hi(t){return typeof t=="bigint"}function ui(t){return typeof t=="object"&&t!==null}function G(t){return t!==void 0}function wi(t,e){return Array.isArray(t)&&t.every(e)}function pi(t){return e=>wi(e,t)}function J(t,e,r){return ui(t)&&e in t&&r(t[e])}function d(t,...e){if(typeof t!="object")throw new Error("expected object");if(t===null)throw new Error("received null");for(const r of e)if(!(r in t))throw new At("object",r)}function E(t,e){if(!ie(t.code))throw new Error("code must be a string");if(t.code!==e)throw new Error(`expected code to be ${e}, got ${t.code}`)}class v extends Error{constructor(e){super(e)}get code(){return this.constructor.name}toJSON(){return j.convert(this)}}class V{convert(e){return h(e,v),{code:e.code,message:e.message}}}const j=new V,mi="NoCodecFoundError";class je extends Error{codec;constructor(e,r=`no codec found for: "${e}"`){super(r),this.codec=e,Object.freeze(this),We()}toJSON(){return{code:u.encode(je.name),message:u.encode(this.message),codec:u.encode(this.codec)}}get code(){return mi}}const Dt=new Map;class fi{convert(e){d(e,"code");const r=u.decode(e.code),o=Dt.get(r);if(!o)throw new je(r);return o.decode(e)}}class gi{convert(e){const r=Dt.get(e.code);if(!r)throw new je(e.code);return r.encode(e)}}class yi extends R{encoder=new gi;decoder=new fi}const Z=new yi;function x(t,e){Dt.set(t,e)}const _t="InvalidTypeError";class _ extends v{have;want;constructor(e,r,o=`invalid type: have "${e}", want "${r}"`){super(o),this.have=e,this.want=r,Object.freeze(this)}toJSON(){return Gn.encode(this)}get code(){return _t}}class Ci{convert(e){return d(e,"code","have","want","message"),E(e,_t),new _(u.decode(e.have),u.decode(e.want),u.decode(e.message))}}class bi{convert(e){return h(e,_),{...j.convert(e),have:u.encode(e.have),want:u.encode(e.want)}}}class vi extends i{encoder=new bi;decoder=new Ci}const Gn=new vi;x(_t,Gn);const Vn=pi(G);class Ei{convert(e){return e}}const Wn=new Ei;class xi extends R{encoder=Wn;decoder=Wn}const qe=new xi;class I{itemCodec;constructor(e){this.itemCodec=e}convert(e){if(!Vn(e)){const r=typeof e=="object"&&e!==null?e.constructor.name:typeof e,o="array";throw new Error(`invalid array value: have "${r}", want "${o}"`)}return e.map(r=>this.itemCodec.decode(r))}}class B{itemCodec;constructor(e){this.itemCodec=e}convert(e){return h(e,Array),e.map(r=>this.itemCodec.encode(r))}}class A extends i{encoder;decoder;constructor(e,r){super(),this.encoder=r,this.decoder=e}}class P{itemCodec;constructor(e){this.itemCodec=e}convert(e){return e===null?null:this.itemCodec.decode(e)}}class O{itemCodec;constructor(e){this.itemCodec=e}convert(e){return e===null?null:(di(e),this.itemCodec.encode(e))}}class M extends i{encoder;decoder;constructor(e,r){super(),this.encoder=r,this.decoder=e}}class ki{convert(e){if(!ie(e))throw new _(typeof e,"string");return e}}class Si{convert(e){return Je(e,"string"),e}}class Ri extends i{encoder=new Si;decoder=new ki}const u=new Ri;new A(new I(u),new B(u)),new M(new P(u),new O(u));class Ut extends v{constructor(e="completer has already been completed"){super(e),Object.freeze(this)}get code(){return Jn}}const Jn="CompleterAlreadyCompletedError";class Ii{convert(e){return d(e,"code","message"),E(e,Jn),new Ut(u.decode(e.message))}}class Bi extends V{}class Ai extends i{encoder=new Bi;decoder=new Ii}const Ti=new Ai;x(Ut.name,Ti);function $e(){U(!1,"completer is not ready, this should never be reached")}function Qe(){throw new Ut}class Di{resolve=$e;reject=$e;completed=!1;promise;get isCompleted(){return this.completed}constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r}),U(this.resolve!==$e,"resolve should be set"),U(this.reject!==$e,"resolve should be set")}complete(e){const r=this.resolve,o=this.reject;if(this.completed=!0,this.resolve=Qe,this.reject=Qe,e instanceof Promise){e.then(r,o);return}r(e)}completeError(e){this.reject(e),this.completed=!0,this.resolve=Qe,this.reject=Qe}}function Lt(){return new Di}class ve extends v{response;status;constructor(e,r,o){super(o),this.status=e,this.response=r}toJSON(){return jn.convert(this)}}class Ke{convert(e){return h(e,ve),{...j.convert(e),status:e.status}}}const jn=new Ke,Nt="BadResponseClientError";class qn extends ve{constructor(e,r,o="bad server response: client error"){super(e,r,o),Object.freeze(this)}get code(){return Nt}toJSON(){return $n.encode(this)}}class _i{convert(e){return d(e,"code","message","status"),E(e,Nt),new qn(Number(e.status),null,u.decode(e.message))}}class Ui extends Ke{}class Li extends i{encoder=new Ui;decoder=new _i}const $n=new Li;x(Nt,$n);const Pt="BadResponseError";class Qn extends ve{constructor(e,r,o="bad server response"){super(e,r,o),Object.freeze(this)}get code(){return Pt}toJSON(){return Kn.encode(this)}}class Ni{convert(e){return d(e,"code","message","status"),E(e,Pt),new Qn(Number(e.status),null,u.decode(e.message))}}class Pi extends Ke{}class Oi extends i{encoder=new Pi;decoder=new Ni}const Kn=new Oi;x(Pt,Kn);class Xn extends ve{constructor(e,r,o="bad server response: server error"){super(e,r,o),Object.freeze(this)}get code(){return Ot}}const Ot="BadResponseServerError";class Mi{convert(e){return d(e,"code","message","status"),E(e,Ot),new Xn(Number(e.status),null,u.decode(e.message))}}class Fi extends Ke{}class zi extends i{encoder=new Fi;decoder=new Mi}const Hi=new zi;x(Ot,Hi);const Mt="ChannelClosedError";class Ee extends v{constructor(e="channel closed"){super(e),Object.freeze(this)}get code(){return Mt}}class Gi{convert(e){return d(e,"code","message"),E(e,Mt),new Ee(u.decode(e.message))}}class Vi extends V{}class Wi extends i{encoder=new Vi;decoder=new Gi}const Ji=new Wi;x(Mt,Ji);const Ft="FetchError";class Yn extends v{cause;constructor(e,r=`fetch failed: ${String(e)}`){super(r),this.cause=e,Object.freeze(this)}get code(){return Ft}}class ji{convert(e){return d(e,"code","message"),E(e,Ft),new Yn({},u.decode(e.message))}}class qi extends V{}class $i extends i{encoder=new qi;decoder=new ji}const Qi=new $i;x(Ft,Qi);const zt="IncorrectBase64PaddingError";class Zn extends v{constructor(e="incorrect padding"){super(e),Object.freeze(this)}get code(){return zt}}class Ki{convert(e){return d(e,"code","message"),E(e,zt),new Zn(u.decode(e.message))}}class Xi extends V{}class Yi extends i{encoder=new Xi;decoder=new Ki}const Zi=new Yi;x(zt,Zi);class ed{convert(e){if(!Tt(e))throw new _(typeof e,"number");return e}}class td{convert(e){return Je(e,"number"),e}}class rd extends i{encoder=new td;decoder=new ed}const c=new rd,es=new M(new P(c),new O(c)),de=new A(new I(c),new B(c)),ee=new A(new I(es),new B(es)),Ht="InvalidBase64AlphabetLengthError";class Gt extends v{length;constructor(e,r=`alphabet needs to be 64 characters, received ${e}`){super(r),this.length=e,Object.freeze(this)}toJSON(){return ts.encode(this)}get code(){return Ht}}class od{convert(e){return d(e,"code","length","message"),E(e,Ht),new Gt(c.decode(e.length),u.decode(e.message))}}class nd{convert(e){return h(e,Gt),{...j.convert(e),length:c.encode(e.length)}}}class sd extends i{encoder=new nd;decoder=new od}const ts=new sd;x(Ht,ts);const Vt="InvalidHexStringError";class rs extends v{constructor(e="invalid hex string"){super(e),Object.freeze(this)}get code(){return Vt}}class cd{convert(e){return d(e,"code","message"),E(e,Vt),new rs(u.decode(e.message))}}class ad extends V{}class id extends i{encoder=new ad;decoder=new cd}const dd=new id;x(Vt,dd);const Wt="InvalidHexValueError";class os extends v{value;constructor(e,r=`invalid hex value "${e}"`){super(r),this.value=e,Object.freeze(this)}toJSON(){return ns.encode(this)}get code(){return Wt}}class ld{convert(e){return d(e,"code","value","message"),E(e,Wt),new os(c.decode(e.value),u.decode(e.message))}}class hd{convert(e){return{...j.convert(e),value:c.encode(e.value)}}}class ud extends i{encoder=new hd;decoder=new ld}const ns=new ud;x(Wt,ns);const Jt="InvalidInputError";class W extends v{constructor(e="invalid input"){super(e),Object.freeze(this),We()}get code(){return Jt}}class wd{convert(e){return d(e,"code","message"),E(e,Jt),new W(u.decode(e.message))}}class pd extends V{}class md extends i{encoder=new pd;decoder=new wd}const fd=new md;x(Jt,fd);const jt="InvalidStringValueError";class ss extends v{have;want;constructor(e,r,o=`invalid string value: have "${e}", want "${r}"`){super(o),this.have=e,this.want=r,Object.freeze(this)}toJSON(){return cs.encode(this)}get code(){return jt}}class gd{convert(e){return d(e,"code","have","want","message"),E(e,jt),new ss(u.decode(e.have),u.decode(e.want),u.decode(e.message))}}class yd{convert(e){return h(e,ss),{...j.convert(e),have:u.encode(e.have),want:u.encode(e.want)}}}class Cd extends i{encoder=new yd;decoder=new gd}const cs=new Cd;x(jt,cs);const qt="InvalidTaggedBase64EncodingError";class as extends v{constructor(e="invalid tagged base64 encoding"){super(e),Object.freeze(this)}toJSON(){return is.encode(this)}get code(){return qt}}class bd{convert(e){return d(e,"code","message"),E(e,qt),new as(u.decode(e.message))}}class vd extends V{}class Ed extends i{encoder=new vd;decoder=new bd}const is=new Ed;x(qt,is);const $t="MissingElementError";class xe extends v{constructor(e="missing element"){super(e),Object.freeze(this)}get code(){return $t}}class xd{convert(e){return d(e,"code","message"),E(e,$t),new xe(u.decode(e.message))}}class kd extends V{}class Sd extends i{encoder=new kd;decoder=new xd}const Rd=new Sd;x($t,Rd);const Qt="NoCompleterFoundForRequestID";class ds extends v{requestID;constructor(e,r=`no completer found for request id "${e}"`){super(r),this.requestID=e,Object.freeze(this)}toJSON(){return ls.encode(this)}get code(){return Qt}}class Id{convert(e){return d(e,"code","requestID","message"),E(e,Qt),new ds(qe.decode(e.requestID),u.decode(e.message))}}class Bd{convert(e){return h(e,ds),{...j.convert(e),requestID:qe.encode(e.requestID)}}}class Ad extends i{encoder=new Bd;decoder=new Id}const ls=new Ad;x(Qt,ls);const Kt="NotFoundError";class hs extends v{key;constructor(e,r=`Not Found: ${e}`){super(r),this.key=e,Object.freeze(this)}get code(){return Kt}}class us{codec;constructor(e){this.codec=e}convert(e){return d(e,"code","key"),E(e,Kt),new hs(this.codec.decode(e.key))}}class ws{codec;constructor(e){this.codec=e}convert(e){return{...j.convert(e),key:this.codec.encode(e.key)}}}class ps extends i{encoder;decoder;constructor(e,r){super(),this.encoder=e,this.decoder=r}}new ps(new ws(u),new us(u));const Td=new ps(new ws(qe),new us(qe));x(Kt,Td);const Xt="NoURLProvidedError";class Dd extends v{constructor(e="no url provided"){super(e),Object.freeze(this)}get code(){return Xt}}class _d{convert(e){return d(e,"code","message"),E(e,Xt),new Dd(u.decode(e.message))}}class Ud extends V{}class Ld extends i{encoder=new Ud;decoder=new _d}const Nd=new Ld;x(Xt,Nd);const Yt="UnimplementedError";class N extends v{constructor(e="unimplemented"){super(e),Object.freeze(this),We()}get code(){return Yt}}class Pd{convert(e){return d(e,"code","message"),E(e,Yt),new N(u.decode(e.message))}}class Od extends V{}class Md extends i{encoder=new Od;decoder=new Pd}const Fd=new Md;x(Yt,Fd);const Zt="QUERY_ERROR";class zd extends v{error;constructor(e,r="missing element"){super(r),this.error=e,Object.freeze(this)}get code(){return Zt}}class Hd{convert(e){return d(e,"code","error","message"),E(e,Zt),new zd(ys.decode(e.error),u.decode(e.message))}}class Gd{convert(e){return{code:e.code,error:ys.encode(e.error),message:u.encode(e.message)}}}class Vd extends i{encoder=new Gd;decoder=new Hd}const Wd=new Vd;class er{}const tr="NotFound";class ms extends er{constructor(){super(),Object.freeze(this)}valueOf(){return tr}toJSON(){return this.valueOf()}}const Jd=new ms,rr="Missing";class fs extends er{constructor(){super(),Object.freeze(this)}valueOf(){return rr}toJSON(){return this.valueOf()}}const jd=new fs;class gs extends er{error;constructor(e){super(),this.error=e,Object.freeze(this)}toJSON(){return nr.encode(this)}}class qd{message;constructor(e){this.message=e,Object.freeze(this)}toJSON(){return or.encode(this)}}class $d{convert(e){return d(e,"message"),new qd(u.decode(e.message))}}class Qd{convert(e){return{message:u.encode(e.message)}}}class Kd extends i{encoder=new Qd;decoder=new $d}const or=new Kd;class Xd{convert(e){return d(e,"Error"),new gs(or.decode(e.Error))}}class Yd{convert(e){return{Error:or.encode(e.error)}}}class Zd extends i{encoder=new Yd;decoder=new Xd}const nr=new Zd;class el{convert(e){return e===tr?Jd:e===rr?jd:nr.decode(e)}}class tl{convert(e){if(e instanceof ms)return tr;if(e instanceof fs)return rr;if(e instanceof gs)return nr.encode(e);throw new N}}class rl extends i{encoder=new tl;decoder=new el}const ys=new rl;x(Zt,Wd);const Cs="ResponseContentTypeIsNotApplicationJSONError";class ke extends ve{haveHeaderType;constructor(e,r,o,n="response content type is not application/json"){super(r,o,n),this.haveHeaderType=e,Object.freeze(this)}static fromResponse(e,r){return new ke(e.headers.get("content-type")??"undefined",e.status,e,r)}toJSON(){return bs.encode(this)}get code(){return Cs}}class ol{convert(e){return d(e,"code","status","have","want","message"),E(e,Cs),new ke(u.decode(e.code),c.decode(e.status),null,u.decode(e.message))}}class nl{convert(e){return{...jn.convert(e),have:u.encode(e.haveHeaderType),want:u.encode("application/json")}}}class sl extends i{encoder=new nl;decoder=new ol}const bs=new sl;x(ke.name,bs);const sr="WebWorkerErrorResponse";class cl extends v{error;constructor(e,r="error in web worker"){super(r),this.error=e,Object.freeze(this)}toJSON(){return vs.encode(this)}get code(){return sr}}class al{convert(e){return d(e,"code","error","message"),E(e,sr),new cl(Z.decode(e.error),u.decode(e.message))}}class il{convert(e){return{...j.convert(e),error:Z.encode(e.error)}}}class dl extends i{encoder=new il;decoder=new al}const vs=new dl;x(sr,vs);var Es=(t=>(t[t.success=0]="success",t[t.full=1]="full",t[t.failed=2]="failed",t))(Es||{});class ll{getFromEmpty(){}}class hl{getFromEmpty(){throw new xe}}const xs={returnUndefined:new ll,throwMissingElement:new hl};class ul{maxSize;constructor(e){U(!Number.isNaN(e),"maxSize must not be NaN"),U(Number.isInteger(e),"maxSize must be an integer"),U(e>0,"maxSize must be greater than 0"),this.maxSize=e}nextIndex(e){return U(e>=0,"index must be greater than or equal to 0"),(e+1)%this.maxSize}}class wl{preComputedSizeMinus1;constructor(e){U(!Number.isNaN(e),"maxSize must not be NaN"),U(Number.isInteger(e),"maxSize must be an integer"),U(e>0,"maxSize must be greater than 0"),U(ks(e),"maxSize must be a power of two"),this.preComputedSizeMinus1=e-1}nextIndex(e){return U(e>=0,"index must be greater than or equal to 0"),e+1&this.preComputedSizeMinus1}}function ks(t){return(t&t-1)===0}const cr="BufferFullError";class Ss extends v{constructor(e="buffer full"){super(e),Object.freeze(this)}get code(){return cr}}class pl{convert(e){return d(e,"code","message"),E(e,cr),new Ss(u.decode(e.message))}}class ml extends V{}class fl extends i{encoder=new ml;decoder=new pl}const gl=new fl;x(cr,gl);class yl{putToFull(e,r){return e.get(),e.put(r)}}class Cl{putToFull(){throw new Ss}}const Rs={overwriteOldest:new yl,throw:new Cl};function bl(t){return ks(t)?new wl(t):new ul(t)}class vl{readIndex=0;writeIndex=0;buffer;nextIndex;getOnEmpty;putOnFull;constructor(e,r,o){U(!Number.isNaN(e),"maxSize must not be NaN"),this.buffer=new Array(e),this.nextIndex=bl(e),this.getOnEmpty=r,this.putOnFull=o}get maxSize(){return this.buffer.length}get length(){return this.writeIndex<this.readIndex?this.writeIndex+this.maxSize-this.readIndex:this.writeIndex-this.readIndex}put(e){const r=this.nextIndex.nextIndex(this.writeIndex);return r===this.readIndex?this.putOnFull.putToFull(this,e):(this.buffer[this.writeIndex]=e,this.writeIndex=r,Es.success)}get(){if(this.readIndex===this.writeIndex)return this.getOnEmpty.getFromEmpty(this);const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),e}[Symbol.iterator](){return new El(this)}immutableIterable(){return{[Symbol.iterator]:()=>this.immutableIterator()}}immutableIterator(){return new xl(this.readIndex,this.writeIndex,this.buffer,this.nextIndex)}}class El{buffer;constructor(e){this.buffer=e}next(){const e=this.buffer.get();return e==null?{value:void 0,done:!0}:{value:e,done:!1}}}class xl{readIndex;writeIndex;buffer;nextIndex;constructor(e,r,o,n){this.readIndex=e,this.writeIndex=r,this.buffer=o,this.nextIndex=n}next(){if(this.readIndex===this.writeIndex)return{value:void 0,done:!0};const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),{value:e,done:!1}}}function q(t=32,e=xs.returnUndefined,r=Rs.overwriteOldest){return new vl(t,e,r)}class kl{publishQueue;pollBlocked;publishBlocked;capacity;closed=!1;constructor(e){this.publishQueue=q(Math.max(2,e),xs.throwMissingElement,Rs.throw);const r=Lt();this.pollBlocked=r,this.publishBlocked=r,r.complete(),this.capacity=e-1}get isClosed(){return this.closed}close(){if(this.closed)throw new Ee;this.closed=!0}async drain(){for(;this.publishQueue.length>0;)this.publishQueue.get()}async publish(e){if(this.closed)throw new Ee;if(this.publishQueue.length>=this.capacity){if(this.publishBlocked.isCompleted){const r=Lt();this.publishBlocked=r,await r.promise}return await this.publishBlocked.promise,this.publish(e)}this.publishQueue.put(e),this.pollBlocked.isCompleted||this.pollBlocked.complete()}async poll(){if(this.publishQueue.length<=0){if(this.isClosed)throw new Ee;if(this.pollBlocked.isCompleted){const r=Lt();this.pollBlocked=r}return await this.pollBlocked.promise,this.poll()}const e=this.publishQueue.get();return this.publishBlocked.isCompleted||this.publishBlocked.complete(),e}[Symbol.asyncIterator](){return new Sl(this)}}class Sl{channel;constructor(e){this.channel=e}async next(){try{return{done:!1,value:await this.channel.poll()}}catch(e){if(e instanceof Ee)return{done:!0,value:void 0};throw e}}}function Rl(t){return new kl(t)}const we=c;class Is{requestID;api;method;param;constructor(e,r,o,n){this.requestID=e,this.api=r,this.method=o,this.param=n}toJSON(){return{requestID:this.requestID,api:this.api,method:this.method,param:this.param}}}class Il{convert(e){return d(e,"requestID","api","method","param"),new Is(we.decode(e.requestID),u.decode(e.api),u.decode(e.method),e.param)}}class Bl{convert(e){return h(e,Is),{requestID:we.encode(e.requestID),api:u.encode(e.api),method:u.encode(e.method),param:e.param}}}class Al extends i{encoder=new Bl;decoder=new Il}const Tl=new Al;class Bs{requestID;constructor(e){this.requestID=e}}class ar extends Bs{response;constructor(e,r){super(e),this.response=r}toJSON(){return As.encode(this)}}class Dl{convert(e){return d(e,"requestID","response"),new ar(we.decode(e.requestID),e.response)}}class _l{convert(e){return h(e,ar),{requestID:we.encode(e.requestID),response:e.response}}}class Ul extends i{encoder=new _l;decoder=new Dl}const As=new Ul;class ir extends Bs{error;constructor(e,r){super(e),this.error=r}toJSON(){return Ts.encode(this)}}class Ll{convert(e){return d(e,"requestID","error"),new ir(we.decode(e.requestID),Z.decode(e.error))}}class Nl{convert(e){return h(e,ir),{requestID:we.encode(e.requestID),error:Z.encode(e.error)}}}class Pl extends i{encoder=new Nl;decoder=new Ll}const Ts=new Pl;class Ol{convert(e){if(hi(e))return e;if(Tt(e))return BigInt(e);if(!ie(e))throw new _(typeof e,"string | bigint | number");return BigInt(e)}}class Ml{convert(e){return Je(e,"bigint"),`0x${e.toString(16)}`}}class Fl extends i{encoder=new Ml;decoder=new Ol}const T=new Fl,Se=new M(new P(T),new O(T)),Ds=new A(new I(T),new B(T));new A(new I(Se),new B(Se)),BigInt.prototype.toJSON=function(){return T.encode(this)};class Q{constructor(e,r,o){this.alpha3Code=e,this.code=r,this.significantDigits=o,this.alpha3Code=e,this.code=r,this.significantDigits=o,this.significantDigitsMultiplier=BigInt(10)**BigInt(this.significantDigits)}significantDigitsMultiplier;toJSON(){return lr.encode(this)}}const _s=new Q("JPY",392,0),zl=new Q("GBP",826,2),Us=new Q("USD",840,2),Hl=new Q("EUR",978,2),Gl=new Q("XXX",999,2),Ls=new Q("ETH",1001,18),dr=new Q("XBT",1002,8),Ns=new Q("ESP",10001,18),Vl=[_s,zl,Us,Hl,Gl,Ls,dr,Ns],Wl=new Map(Vl.map(t=>[t.alpha3Code,t]));class Jl{convert(e){if(typeof e!="string")throw new W("CurrencyCodeDecoder: expected string");if(e==="BTC")return dr;const r=Wl.get(e);if(r===void 0)throw new W(`CurrencyCodeDecoder: unknown currency: "${e}"`);return r}}class jl{convert(e){return h(e,Q),e.alpha3Code}}class ql extends i{decoder=new Jl;encoder=new jl}const lr=new ql;class ${constructor(e,r){this.currency=e,this.value=r,this.currency=e,this.value=r}static USD(e){return new $(Us,BigInt(e))}static ETH(e){return new $(Ls,BigInt(e))}static ESP(e){return new $(Ns,BigInt(e))}static JPY(e){return new $(_s,BigInt(e))}static BTC(e){return new $(dr,BigInt(e))}toString(){return Xe.encode(this)}toISOString(){return this.toString()}toNumericLiteralString(){return Ps.convert(this)}toHexString(){return T.encode(this.value)}toJSON(){return Xe.encode(this)}}function $l(t){return t==="."||t===","||t===" "}function Ql(t,e){let r=-1;const o=t.length;for(let n=0;n<o;n++)e(t[n])&&(r=n);return r}class Kl{parseCurrencyCode(e){return lr.decode(e)}parseValue(e,r){let o=1n;r[0]==="-"&&(o=-1n,r=r.substring(1));const n=Ql(r,$l);if(n===-1){const p=BigInt(r.replace(/\D/g,""))*e.significantDigitsMultiplier;return o*p}const s=r.substring(0,n).replace(/\D/g,""),a=r.substring(n+1).replace(/\D/g,""),l=BigInt(s)*e.significantDigitsMultiplier,m=BigInt(a)*10n**BigInt(e.significantDigits-a.length);return o*(l+m)}convert(e){if(typeof e!="string")throw new W("MonetaryValueDecoder: expected string");const r=e.indexOf(" ");if(r<=-1)throw new W("MonetaryValueDecoder: missing non-breaking space");const o=e.substring(0,r),n=e.substring(r+1);if(/^-?[\d .,]+$/.test(o)){const a=this.parseCurrencyCode(n);return new $(a,this.parseValue(a,o))}const s=this.parseCurrencyCode(o);return new $(s,this.parseValue(s,n))}}class Xl{convert(e){const r=e.value<0n?"-":"",o=e.value<0n?-e.value:e.value,n=o%e.currency.significantDigitsMultiplier,s=o/e.currency.significantDigitsMultiplier,a=String(s),l=String(n);return/^0+$/.test(l)?`${r}${a}`:`${r}${s}.${String(n).padStart(e.currency.significantDigits,"0")}`}}const Ps=new Xl;class Yl{convert(e){h(e,$);const r=Ps.convert(e);return`${lr.encode(e.currency)} ${r}`}}class Zl extends i{decoder=new Kl;encoder=new Yl}const Xe=new Zl,Os=new A(new I(Xe),new B(Xe));class b{namespace;name;site;blockExplorer;constructor(e,r,o,n){this.namespace=e,this.name=r,this.site=o,this.blockExplorer=n}}const eh=new b(202374881,"Vienna",new URL("https://vienna.caldera.dev/"),new URL("https://vienna.calderaexplorer.xyz/")),th=new b(202374882,"OP Stack",new URL("https://stack.optimism.io/"),new URL("https://www.blockscout.com/")),rh=new b(33914988448,"Arbitrum",new URL("https://arbitrum.io/"),new URL("https://arbiscan.io/")),oh=new b(33914988449,"Eigen Layer",new URL("https://www.eigenlayer.xyz/"),new URL("https://www.blockscout.com/")),nh=new b(33914988450,"Spire",new URL("https://www.spire.dev/"),new URL("https://www.blockscout.com/")),sh=new b(33914988451,"Alt Layer",new URL("https://altlayer.io/"),new URL("https://www.blockscout.com/")),ch=new b(33914988452,"Caldera",new URL("https://www.caldera.xyz/"),new URL("https://www.blockscout.com/")),ah=new b(33914988453,"Vistara Labs",new URL("https://vistara.dev/"),new URL("https://www.blockscout.com/")),ih=new b(33914988454,"Polygon",new URL("https://polygon.technology/"),new URL("https://www.blockscout.com/")),dh=new b(263,"Milan",new URL("https://milan.caldera.dev/"),new URL("https://milan-devnet.explorer.caldera.xyz/")),lh=new b(41234687,"Kyoto",new URL("https://example.com/"),new URL("https://kyoto-explorer.altlayer.io/")),hh=1918988905,uh=new b(hh,"RARI",new URL("https://rarichain.org/"),new URL("https://explorer.rarichain.org/")),wh=1380012617,ph=new b(wh,"RARI",new URL("https://rarichain.org/"),new URL("https://mainnet.explorer.rarichain.org/")),mh=9369,fh=new b(mh,"LogX",new URL("https://logx.network/"),new URL("https://kartel-testnet-explorer.alt.technology/")),gh=936369,yh=new b(gh,"LogX",new URL("https://logx.network/"),new URL("https://vzjuxmhfn70kgnlds27h-explorer.alt.technology")),Ch=466,bh=new b(Ch,"AppChain",new URL("https://appchain.xyz/"),new URL("https://explorer.appchain.xyz/")),vh=4661,Eh=new b(vh,"AppChain",new URL("https://appchain.xyz/"),new URL("https://appchaintestnet.explorer.caldera.xyz/")),xh=360,kh=new b(xh,"Molten",new URL("https://www.moltennetwork.com/"),new URL("https://molten.explorer.caldera.dev/")),Sh=3609,Rh=new b(Sh,"Molten",new URL("https://www.moltennetwork.com/"),new URL("https://molten.explorer.caldera.dev/")),Ih=33139,Bh=new b(Ih,"APECHAIN",new URL("https://apechain.com/"),new URL("https://apescan.io/")),Ah=3313939,Th=new b(Ah,"APECHAIN",new URL("https://apechain.com/"),new URL("https://apechain-testnet.explorer.caldera.xyz/")),Dh=13107,_h=new b(Dh,"t3rn",new URL("https://t3rn.io/"),new URL("https://brn-testnet.explorer.caldera.xyz/")),Uh=819,Lh=new b(Uh,"t3rn",new URL("https://t3rn.io/"),new URL("https://exporer.t3rn.io/")),Ms=21341,Nh=new b(Ms,"Rufus",new URL("https://l2beat.com/scaling/projects/rufus"),new URL("https://rufus-sepolia-testnet.explorer.caldera.xyz/")),Ph=new b(Ms,"Rufus",new URL("https://l2beat.com/scaling/projects/rufus"),new URL("https://rufus.calderaexplorer.xyz/")),Oh=2524852,Mh=new b(Oh,"Huddle01",new URL("https://huddle01.com/"),new URL("https://hudlscan.com/txs")),Fh=1397311310,Fs=new b(Fh,"Infinite Garden",new URL("https://infinitegarden.espressosys.com/"),new URL("https://explorer.main.net.espressosys.com/")),zh=10101,Hh=new b(zh,"Timeboost Decaf",new URL("https://espressosys.com/"),new URL("https://explorer.decaf.testnet.espresso.network/")),Gh=[Fs,ph,yh,kh,bh,Bh,Lh,Ph],Vh=[Fs,uh,fh,Eh,Rh,Th,_h,Nh,Mh,Hh],Wh=new Map([eh,th,rh,ih,oh,nh,sh,ch,ah,dh,lh,...Gh,...Vh].map(t=>[t.namespace,t])),hr="CorruptBase64InputError";class te extends v{offset;constructor(e,r=`corrupt input error at ${e}`){super(r),this.offset=e,Object.freeze(this)}get code(){return hr}toJSON(){return zs.encode(this)}}class Jh{convert(e){return d(e,"code","offset","message"),E(e,hr),new te(c.decode(e.offset),u.decode(e.message))}}class jh{convert(e){return h(e,te),{...j.convert(e),offset:c.encode(e.offset),message:u.encode(e.message)}}}class qh extends i{encoder=new jh;decoder=new Jh}const zs=new qh;x(hr,zs);class $h{convert(e){const r=new ArrayBuffer(e.byteLength);return new Uint8Array(r).set(e),r}}class Qh{convert(e){return new Uint8Array(e)}}class Kh extends i{encoder=new $h;decoder=new Qh}const ur=new Kh,Xh=new TextEncoder;function Hs(t){return Xh.encode(t)}const Yh=new TextDecoder;function Zh(t){return Yh.decode(t)}function*Gs(t){yield*Hs(t)}function*eu(){for(let t=0;t<256;t++)yield 255}const Re=-1,tu=61;class Ie{encodeMap;decodeMap;padChar;strict;constructor(e,r,o=tu,n=!1){this.encodeMap=e,this.decodeMap=r,this.padChar=o,this.strict=n}static withAlphabet(e){const r=e.length;if(r!==64)throw new Gt(r);const o=Array.from(Gs(e)),n=Array.from(eu());for(let s=0;s<r;s++)n[o[s]]=s;return new Ie(o,n)}withPadding(e){return new Ie(this.encodeMap,this.decodeMap,e,this.strict)}encode(e){if(e.byteLength===0)return new ArrayBuffer(0);let r=0,o=0;const n=Math.floor(e.byteLength/3)*3,s=Math.ceil(e.byteLength/3)*4,a=new ArrayBuffer(s),l=new DataView(e),m=new DataView(a);for(;o<n;){const y=l.getUint8(o+0)<<16|l.getUint8(o+1)<<8|l.getUint8(o+2);m.setUint8(r+0,this.encodeMap[y>>18&63]),m.setUint8(r+1,this.encodeMap[y>>12&63]),m.setUint8(r+2,this.encodeMap[y>>6&63]),m.setUint8(r+3,this.encodeMap[y&63]),o+=3,r+=4}const p=e.byteLength-o;if(p===0)return a;let C=l.getUint8(o+0)<<16;switch(p===2&&(C|=l.getUint8(o+1)<<8),m.setUint8(r+0,this.encodeMap[C>>18&63]),m.setUint8(r+1,this.encodeMap[C>>12&63]),p){case 2:return m.setUint8(r+2,this.encodeMap[C>>6&63]),this.padChar!==Re?(m.setUint8(r+3,this.padChar),a.slice(0,r+4)):a.slice(0,r+3);case 1:if(this.padChar!==Re)return m.setUint8(r+2,this.padChar),m.setUint8(r+3,this.padChar),a.slice(0,r+4);break}return a.slice(0,r+2)}decode(e){const r=e.byteLength;if(r===0)return new ArrayBuffer(0);const o=new DataView(e),n=new ArrayBuffer(Math.floor(r/4*3)),s=new DataView(n),a=new ArrayBuffer(4),l=new DataView(a);let m=0,p=0,C=0,y=!1;for(;p<r&&!y;){let f=3,g=4;for(let D=0;D<4;D++){if(p===r){if(D===0)return n;if(D===1||this.padChar!==Re)throw new te(p-D);f=D-1,g=D,y=!0;break}const H=o.getUint8(p);p++;const Ve=this.decodeMap[H];if(Ve!==255){l.setUint8(D,Ve);continue}if(H===10||H===13){D--;continue}if(H===this.padChar){switch(D){case 0:case 1:throw new Zn;case 2:for(;p<r&&(o.getUint8(p)===10||o.getUint8(p)===13);)p++;if(p===r)throw new te(r);p++}for(;p<r&&(o.getUint8(p)===10||o.getUint8(p)===13);)p++;if(p<r)throw new te(p);f=3,g=D,y=!0;break}throw new te(p-1)}const L=l.getUint8(0)<<18|l.getUint8(1)<<12|l.getUint8(2)<<6|l.getUint8(3);switch(l.setUint8(2,L>>0&255),l.setUint8(1,L>>8&255),l.setUint8(0,L>>16&255),g){case 4:s.setUint8(C+2,l.getUint8(2)),l.setUint8(2,0);case 3:if(s.setUint8(C+1,l.getUint8(1)),this.strict&&l.getUint8(2)!==0)throw new te(p-1);case 2:if(s.setUint8(C+0,l.getUint8(0)),this.strict&&(l.getUint8(1)!==0||l.getUint8(2)!==0))throw new te(p-2)}C+=f,m+=g-1}return n.slice(0,m)}decodeString(e){return this.decode(ur.encode(Hs(e)))}encodeToString(e){return Zh(this.encode(e))}}const Vs=Ie.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),ru=Vs.withPadding(Re),Ws=Ie.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),wr=Ws.withPadding(Re);class k{tag;data;constructor(e,r){this.tag=e,this.data=r}static fromString(e){const r=e.indexOf("~");if(r<0)throw new as;const o=e.substring(0,r),n=wr.decodeString(e.substring(r+1));return new k(o,n)}static inflate(e){return w.decode(e)}toString(){return`${this.tag}~${wr.encodeToString(this.data)}`}valueOf(){return this.toString()}toJSON(){return this.toString()}}class ou{convert(e){if(typeof e!="string")throw new _(typeof e,"string");return k.fromString(e)}}class nu{convert(e){return h(e,k),e.toString()}}class su extends i{encoder=new nu;decoder=new ou}const w=new su,Be=2147483648,cu=1103515245,au=12345;class re{state;constructor(e){this.state=e!==void 0?e:Math.floor(Math.random()*(Be-1))}nextInt(){return this.state=(cu*this.state+au)%Be,this.state}nextFloat(){return this.nextInt()/(Be-1)}nextRange(e,r){const o=r-e,n=this.nextInt()/Be;return e+Math.floor(n*o)}nextRangeBigInt(e,r){const o=r-e,n=BigInt(this.nextInt())*1000000n/BigInt(Be);return e+n*o/1000000n}fillBytes(e){const r=new ArrayBuffer(e),o=new DataView(r);let n=0;for(;n<e-4;n+=4)o.setUint32(n,this.nextRange(0,4294967295));for(let s=n;s<e;s++)o.setUint8(s,this.nextRange(0,256));return r}}const Ye=new Date,iu=new Date(Ye.getFullYear(),Ye.getMonth(),Ye.getDate()).valueOf();function Js(){return Ye.valueOf()}function Ae(){return iu}class du{value;next;constructor(e,r){this.value=e,this.next=r}[Symbol.iterator](){return js(this)}}function lu(t,e){return new du(e,t)}function*js(t){if(t!==null)for(let e=t;e!==null;e=e.next)yield e.value}function*hu(t,e){for(let r=t.next();!r.done;r=t.next())e(r.value)&&(yield r.value)}function uu(t,e){return hu(t[Symbol.iterator](),e)}function*qs(t,e){for(let r=t.next();!r.done;r=t.next())yield e(r.value)}function Ze(t,e){return qs(t[Symbol.iterator](),e)}function*wu(t,e){for(let r=0;r<e;r++){const o=t.next();if(o.done)return;yield o.value}}function pu(t,e){return wu(t[Symbol.iterator](),e)}function mu(t){let e;for(let r=t.next();!r.done;r=t.next())e=r.value;if(e===void 0)throw new xe;return e}function fu(t){return mu(t[Symbol.iterator]())}function*gu(t,e){for(let r=t.next();!r.done;r=t.next())yield*e(r.value)}function yu(t,e){return gu(t[Symbol.iterator](),e)}function*Cu(){let t=0;for(;;)yield t++}function $s(t){return pu(Cu(),Math.ceil(t))}function*bu(t,e,r){for(let o=t.next(),n=e.next();!o.done&&!n.done;o=t.next(),n=e.next())yield r(o.value,n.value)}function Qs(t,e,r){return bu(t[Symbol.iterator](),e[Symbol.iterator](),r)}const Ks=["Residential","Mobile","Enterprise","AWS","Azure","GCP"],Xs=["Espresso v1.0","Espresso v1.1","Espresso v1.2","Espresso v1.3","Espresso v1.4"],Ys=["Linux","Unix","Windows","MacOS"],Zs=[["Espresso","https://espressosys.com/"],["BlockDaemon","https://www.blockdaemon.com/"],["Unit 410","https://unit410.com/"],["Nethermind","https://www.nethermind.io/"],["Sub7","https://sub7.xyz/"],["KudasaiJP","https://kudasai.co.jp/"],["Informal Systems","https://informal.systems/"],["P2P","https://p2p.org/"],["LinkPool","https://linkpool.com/"],["ZKV","https://zkvalidator.com/"],["Figment","https://figment.io/"]],vu=[[["Mexico City",19.4333,-99.1333,"MX"],["Guadalajara",20.6767,-103.3475,"MX"],["Monterrey",25.6667,-100.3,"MX"],["Guatemala City",14.6133,-90.5353,"GT"],["Tijuana",32.525,-117.0333,"MX"],["Ecatepec",19.6097,-99.06,"MX"],["Tegucigalpa",14.1058,-87.2047,"HN"],["León de los Aldama",21.1167,-101.6833,"MX"],["San José",9.9325,-84.08,"CR"],["Panama City",8.9833,-79.5167,"PA"],["Juárez",31.745,-106.485,"MX"],["Comayagüela",14.098,-87.21,"HN"],["Mexicali",32.6633,-115.4678,"MX"],["Nezahualcóyotl",19.4081,-99.0186,"MX"],["Managua",12.1364,-86.2514,"NI"],["Morelia",19.7683,-101.1894,"MX"],["Aguascalientes",21.876,-102.296,"MX"],["Mérida",20.97,-89.62,"MX"],["Saltillo",25.4231,-100.9919,"MX"],["Culiacán",24.8069,-107.3939,"MX"]],[["Havana",23.1367,-82.3589,"CU"],["San Juan",18.3985,-66.061,"PR"],["Santiago",19.4572,-70.6889,"DO"],["Santo Domingo",18.4667,-69.95,"DO"],["Port-au-Prince",18.5333,-72.3333,"HT"],["Santo Domingo Este",18.4855,-69.8734,"DO"],["Kingston",17.9714,-76.7931,"JM"],["Carrefour",18.5344,-72.4094,"HT"],["Santiago de Cuba",20.0217,-75.8294,"CU"],["Pétion-Ville",18.5128,-72.2864,"HT"],["Holguín",20.8869,-76.2592,"CU"],["Gonaïves",19.4456,-72.6883,"HT"],["Camagüey",21.3839,-77.9075,"CU"],["Puerto Plata",19.8,-70.6833,"DO"],["Croix-des-Bouquets",18.5761,-72.2269,"HT"],["Nassau",25.0781,-77.3386,"BS"],["Fort-de-France",14.6,-61.0667,"MQ"],["Higüey",18.6167,-68.7,"DO"],["Santa Clara",22.4069,-79.9649,"CU"],["Bayamo",20.3817,-76.6428,"CU"]],[["Cairo",30.0444,31.2358,"EG"],["Lagos",6.455,3.3841,"NG"],["Kinshasa",-4.3219,15.3119,"CD"],["Luanda",-8.8383,13.2344,"AO"],["Johannesburg",-26.2044,28.0456,"ZA"],["Dar es Salaam",-6.8161,39.2803,"TZ"],["Douala",4.05,9.7,"CM"],["Giza",29.987,31.2118,"EG"],["Abidjan",5.3167,-4.0333,"CI"],["Cape Town",-33.9253,18.4239,"ZA"],["Bamako",12.6392,-8.0028,"ML"],["Abuja",9.0667,7.4833,"NG"],["Ibadan",7.3964,3.9167,"NG"],["Addis Ababa",9.03,38.74,"ET"],["Mbuji-Mayi",-6.15,23.6,"CD"],["Mogadishu",2.0392,45.3419,"SO"],["Lusaka",-15.4167,28.2833,"ZM"],["Antananarivo",-18.91,47.525,"MG"],["Awka",6.2069,7.0678,"NG"],["Bamenda",5.9614,10.1517,"CM"]],[["Tokyo",35.6897,139.6922,"JP"],["Delhi",28.61,77.23,"IN"],["Manila",14.5958,120.9772,"PH"],["Dhaka",23.7639,90.3889,"BD"],["Moscow",55.7558,37.6172,"RU"],["Ho Chi Minh City",10.7756,106.7019,"VN"],["Xi’an",34.2611,108.9422,"CN"],["Dongguan",23.021,113.752,"CN"],["Tongshan",34.204,117.284,"CN"],["Jining",35.4151,116.5871,"CN"],["Cangzhou",38.3047,116.8387,"CN"],["Shaoyang",27.2395,111.4679,"CN"],["Dalian",38.9,121.6,"CN"],["Ankara",39.93,32.85,"TR"],["Zhangzhou",24.513,117.647,"CN"],["Changsha",28.228,112.939,"CN"],["Ürümqi",43.8225,87.6125,"CN"],["Ningbo",29.8603,121.6245,"CN"],["Suihua",46.654,126.969,"CN"],["Deyang",31.127,104.398,"CN"]],[["London",51.5072,-.1275,"GB"],["Madrid",40.4169,-3.7033,"ES"],["Berlin",52.52,13.405,"DE"],["Barcelona",41.3828,2.1769,"ES"],["Athens",37.9842,23.7281,"GR"],["Budapest",47.4925,19.0514,"HU"],["Birmingham",52.48,-1.9025,"GB"],["Stuttgart",48.7775,9.18,"DE"],["Munich",48.1375,11.575,"DE"],["Hamburg",53.55,10,"DE"],["Bucharest",44.4325,26.1039,"RO"],["Vienna",48.2083,16.3725,"AT"],["Stockholm",59.3294,18.0686,"SE"],["Minsk",53.9,27.5667,"BY"],["Warsaw",52.23,21.0111,"PL"],["Valencia",39.47,-.3764,"ES"],["Amsterdam",52.3728,4.8936,"NL"],["Copenhagen",55.6761,12.5683,"DK"],["Porto",41.1621,-8.622,"PT"],["Brussels",50.8467,4.3525,"BE"]],[["New York",40.6943,-73.9249,"US"],["Los Angeles",34.1141,-118.4068,"US"],["Chicago",41.8375,-87.6866,"US"],["Miami",25.784,-80.2101,"US"],["Dallas",32.7935,-96.7667,"US"],["Philadelphia",40.0077,-75.1339,"US"],["Atlanta",33.7628,-84.422,"US"],["Boston",42.3188,-71.0852,"US"],["Phoenix",33.5722,-112.0892,"US"],["Detroit",42.3834,-83.1024,"US"],["Seattle",47.6211,-122.3244,"US"],["San Francisco",37.7558,-122.4449,"US"],["San Diego",32.8313,-117.1222,"US"],["Minneapolis",44.9635,-93.2678,"US"],["Brooklyn",40.6501,-73.9496,"US"],["Vancouver",49.25,-123.1,"CA"],["Riverside",33.9381,-117.3949,"US"],["Baltimore",39.3051,-76.6144,"US"],["Portland",45.5371,-122.65,"US"],["Sacramento",38.5677,-121.4685,"US"]],[["Melbourne",-37.8142,144.9631,"AU"],["Sydney",-33.8678,151.21,"AU"],["Brisbane",-27.4678,153.0281,"AU"],["Perth",-31.9559,115.8606,"AU"],["Auckland",-36.8406,174.74,"NZ"],["Adelaide",-34.9275,138.6,"AU"],["Port Moresby",-9.4789,147.1494,"PG"],["Gold Coast",-28.0167,153.4,"AU"],["Cranbourne",-38.0996,145.2834,"AU"],["Christchurch",-43.531,172.6365,"NZ"],["Manukau City",-37,174.885,"NZ"],["Central Coast",-33.3,151.2,"AU"],["Wollongong",-34.4331,150.8831,"AU"],["Ipswich",-27.6144,152.7608,"AU"],["Wellington",-41.2889,174.7772,"NZ"],["Northcote",-36.8019,174.7494,"NZ"],["Hobart",-42.8806,147.325,"AU"],["Lae",-6.7303,147.0008,"PG"],["Suva",-18.1416,178.4419,"FJ"],["Nouméa",-22.2758,166.458,"NC"]],[["São Paulo",-23.55,-46.6333,"BR"],["Buenos Aires",-34.6033,-58.3817,"AR"],["Rio de Janeiro",-22.9111,-43.2056,"BR"],["Lima",-12.06,-77.0375,"PE"],["Bogotá",4.7111,-74.0722,"CO"],["Santiago",-33.4372,-70.6506,"CL"],["Belo Horizonte",-19.9167,-43.9333,"BR"],["Fortaleza",-3.7275,-38.5275,"BR"],["Santa Cruz de la Sierra",-17.7892,-63.1975,"BO"],["La Paz",-16.4958,-68.1333,"BO"],["Guayaquil",-2.19,-79.8875,"EC"],["Medellín",6.2308,-75.5906,"CO"],["Salvador",-12.9747,-38.4767,"BR"],["Caracas",10.4806,-66.9036,"VE"],["Córdoba",-31.4167,-64.1833,"AR"],["Santos",-23.9369,-46.325,"BR"],["Curitiba",-25.4297,-49.2711,"BR"],["Maracaibo",10.6333,-71.6333,"VE"],["Recife",-8.05,-34.9,"BR"],["Porto Alegre",-30.0331,-51.23,"BR"]]],ec=[0,0,5,26,28,26,9,6],Eu=ec.reduce((t,e)=>t+e,0),xu=ec.reduce((t,e)=>{const r=t[t.length-1]??0;return t.push(r+e),t},[]),ku=Array.from(Qs(xu,vu,(t,e)=>[t,e]));function Su(t){const e=t.nextRange(0,Eu),r=uu(ku,([a])=>a<=e),[,o]=fu(r),n=t.nextRange(0,o.length);return o[n]}function Ru(t){const e=t.nextRange(0,Zs.length);return Zs[e]}function Iu(t){const e=t.nextRange(0,Ys.length);return Ys[e]}function Bu(t){const e=t.nextRange(0,Xs.length);return Xs[e]}function Au(t){const e=t.nextRange(0,Ks.length);return Ks[e]}function Tu(t){const[e,r]=Ru(t),[,o,n,s]=Su(t),a=Iu(t),l=Bu(t),m=Au(t);return{pubkey:new k("PUBKEY",t.fillBytes(32)),stateVerKey:new k("STATE_VER_KEY",t.fillBytes(32)),stake:t.nextRangeBigInt(0n,1000n)*1000000000000000000n,commission:t.nextRange(0,5e3),name:`${e} Node ${s} ${t.nextRange(0,100)}`,address:t.fillBytes(32),company:{name:e,website:r},location:{coords:[o,n],country:s},operatingSystem:a,networkType:m,nodeType:l}}function*Du(t=new re(Ae())){const e=t.nextRange(100,350);for(let r=0;r<e;r++)yield Tu(new re(r))}const et=Array.from(Du());async function*_u(){}function Uu(){const t=new Uint8Array(new Array(20).map(()=>0)).buffer;return{hash:new k("BLOCK",t),height:0,time:new Date(0),genTime:0,transactions:_u(),numTransactions:0,proposer:[],size:0,fees:[]}}async function*Lu(t,e=Js()){let r=1,o=Ae();for(;o<e;){const n=Math.floor(t.nextFloat()*14*1e3);yield Nu(new re(r+n),r,o,o+n),o+=n,r++}}async function*z(t=new re(Ae()),e=Js()){yield Uu(),yield*Lu(t,e)}function Nu(t,e,r,o){const n=Math.floor(t.nextRange(0,5)),s=t.nextRange(0,et.length),a=et[s];return{hash:new k("BLOCK",t.fillBytes(32)),height:e,genTime:o-r,time:new Date(o),numTransactions:n,transactions:Ou(new re(e+r),e,r,o,n),proposer:[a.address],size:Math.floor(t.nextFloat()*1024*n)+8,fees:[$.ESP(BigInt(t.nextRange(0,1e9)*1e3))]}}const tc=Array.from(Wh.keys());function Pu(t){return t.nextFloat()>.98?1:tc[t.nextRange(0,tc.length)]}async function*Ou(t,e,r,o,n){const s=(o-r)/n;for(let a=0,l=r;l<o;l+=s,a++){const m=Pu(t),p=Math.floor(1024*t.nextFloat());yield{block:e,index:a,size:p,hash:new k("COMMIT",t.fillBytes(32)),time:new Date(l),sender:new k("PUBKEY",t.fillBytes(32)),tree:{namespace:m,data:t.fillBytes(p)}}}}async function*Mu(t){for(let e=t.next();!e.done;e=t.next())yield e.value}function Fu(t){return Mu(t[Symbol.iterator]())}async function*zu(t){for(let e=await t.next();!e.done;e=await t.next())yield e.value}async function*pr(t,e){for(let r=await t.next();!r.done;r=await t.next())e(r.value)&&(yield r.value)}function rc(t,e){return pr(t[Symbol.asyncIterator](),e)}async function*le(t,e){for(let r=await t.next();!r.done;r=await t.next())yield await e(r.value)}function K(t,e){return le(t[Symbol.asyncIterator](),e)}async function*oe(t,e){for(let r=0;r<e;r++){const o=await t.next();if(o.done)return;yield o.value}}function mr(t,e){return oe(t[Symbol.asyncIterator](),e)}async function*fr(t,e){for(let r=await t.next();!r.done&&e(r.value);r=await t.next())yield r.value}function gr(t,e){return fr(t[Symbol.asyncIterator](),e)}async function*ne(t,e){for(let r=0;r<e;r++)if((await t.next()).done)return;yield*zu(t)}function tt(t,e){return ne(t[Symbol.asyncIterator](),e)}async function Te(t){const e=await t.next();if(e.done)throw new xe;return e.value}async function Hu(t){return Te(t[Symbol.asyncIterator]())}async function Gu(t,e){for(let r=await t.next();!r.done;r=await t.next())if(e(r.value))return r.value}async function Vu(t,e){return Gu(t[Symbol.asyncIterator](),e)}async function Wu(t){let e;for(let r=await t.next();!r.done;r=await t.next())e=r.value;if(e===void 0)throw new xe;return e}async function oc(t){return Wu(t[Symbol.asyncIterator]())}async function*nc(t,e){for(let r=await t.next();!r.done;r=await t.next())yield*e(r.value)}function pe(t,e){return nc(t[Symbol.asyncIterator](),e)}async function*yr(t){yield*$s(t)}async function Ju(t,e,r){const o=r;let n=e;for(let s=await o.next();!s.done;s=await o.next())n=t(await n,s.value);return n}async function*rt(t){let e=null;for(let r=await t.next();!r.done;r=await t.next())e=lu(e,r.value);yield*js(e)}function De(t){return rt(t[Symbol.asyncIterator]())}function X(t){return Ju(async(e,r)=>(e.push(r),e),Promise.resolve([]),t)}async function Cr(t){return X(t[Symbol.asyncIterator]())}new Promise(()=>{});function br(t){if(t.startsWith("0x"))return br(t.substring(2));if((t.length&1)!==0)return br("0"+t);const e=new ArrayBuffer(t.length/2);return ju(Gs(t),e),e}function ju(t,e){const r=new DataView(e);let o=0;for(;o<e.byteLength;){const n=t.next(),s=t.next();if(n.done||s.done)throw new rs;const a=sc(n.value),l=sc(s.value),m=a<<4|l;r.setUint8(o,m),o++}}function sc(t){if(t>=48&&t<=57)return t-48;if(t>=97&&t<=102)return t-97+10;if(t>=65&&t<=70)return t-65+10;throw new os(t)}function qu(t){return t.toString(16).padStart(2,"0")}function*$u(t){yield*qs(t,qu)}function cc(t){return $u(t[Symbol.iterator]())}class Qu{convert(e){if(typeof e!="string")throw new _(typeof e,"string");return br(e)}}class Ku{convert(e){return`0x${Array.from(cc(new Uint8Array(e))).join("")}`}}class Xu extends i{encoder=new Ku;decoder=new Qu}const S=new Xu;new M(new P(S),new O(S));const ac=new A(new I(S),new B(S));class Yu{convert(e){return e instanceof Array?ac.decode(e):[S.decode(e)]}}class Zu{convert(e){return ac.encode(e)}}class ew extends i{encoder=new Zu;decoder=new Yu}const se=new ew;class tw{encoding;constructor(e){this.encoding=e}convert(e){if(typeof e!="string")throw new _(typeof e,"string");return this.encoding.decodeString(e)}}class rw{encoding;constructor(e){this.encoding=e}convert(e){return this.encoding.encodeToString(e)}}class ot extends i{encoder;decoder;constructor(e){super(),this.encoder=new rw(e),this.decoder=new tw(e)}}new ot(wr),new ot(ru);const ic=new ot(Ws),nt=new ot(Vs);new M(new P(nt),new O(nt));class vr{r;s;v;constructor(e,r,o){this.r=e,this.s=r,this.v=o}toJSON(){return Er.encode(this)}}class ow{convert(e){return d(e,"r","s","v"),new vr(S.decode(e.r),S.decode(e.s),c.decode(e.v))}}class nw{convert(e){return h(e,vr),{r:S.encode(e.r),s:S.encode(e.s),v:c.encode(e.v)}}}class sw extends i{encoder=new nw;decoder=new ow}const Er=new sw;class xr{account;amount;constructor(e,r){this.account=e,this.amount=r}toJSON(){return kr.encode(this)}}class cw{convert(e){return d(e,"account","amount"),new xr(S.decode(e.account),S.decode(e.amount))}}class aw{convert(e){return h(e,xr),{account:S.encode(e.account),amount:S.encode(e.amount)}}}class iw extends i{encoder=new aw;decoder=new cw}const kr=new iw;class Sr{number;timestamp;hash;constructor(e,r,o){this.number=e,this.timestamp=r,this.hash=o}toJSON(){return Rr.encode(this)}}class dw{convert(e){return d(e,"number","timestamp","hash"),new Sr(c.decode(e.number),u.decode(e.timestamp),u.decode(e.hash))}}class lw{convert(e){return h(e,Sr),{number:c.encode(e.number),timestamp:u.encode(e.timestamp),hash:u.encode(e.hash)}}}class hw extends i{encoder=new lw;decoder=new dw}const Rr=new hw,dc=new M(new P(Rr),new O(Rr));class Ir{bytes;constructor(e){this.bytes=e}toJSON(){return Br.encode(this)}}class uw{convert(e){return d(e,"bytes"),new Ir(ic.decode(e.bytes))}}class ww{convert(e){return h(e,Ir),{bytes:ic.encode(e.bytes)}}}class pw extends i{encoder=new ww;decoder=new uw}const Br=new pw;class Ar{height;timestamp;l1_head;l1_finalized;payload_commitment;ns_table;block_merkle_root;fee_merkle_root;builder_signature;fee_info;constructor(e,r,o,n,s,a,l,m,p,C){this.height=e,this.timestamp=r,this.l1_head=o,this.l1_finalized=n,this.payload_commitment=s,this.ns_table=a,this.block_merkle_root=l,this.fee_merkle_root=m,this.builder_signature=p,this.fee_info=C}toJSON(){return Y.encode(this)}}class mw{convert(e){return d(e,"height","timestamp","l1_head","l1_finalized","payload_commitment","ns_table","block_merkle_root","fee_merkle_root","builder_signature","fee_info"),new Ar(c.decode(e.height),c.decode(e.timestamp),c.decode(e.l1_head),dc.decode(e.l1_finalized),de.decode(e.payload_commitment),Br.decode(e.ns_table),w.decode(e.block_merkle_root),w.decode(e.fee_merkle_root),Er.decode(e.builder_signature),kr.decode(e.fee_info))}}class fw{convert(e){return h(e,Ar),{height:c.encode(e.height),timestamp:c.encode(e.timestamp),l1_head:c.encode(e.l1_head),l1_finalized:dc.encode(e.l1_finalized),payload_commitment:de.encode(e.payload_commitment),ns_table:Br.encode(e.ns_table),block_merkle_root:w.encode(e.block_merkle_root),fee_merkle_root:w.encode(e.fee_merkle_root),builder_signature:Er.encode(e.builder_signature),fee_info:kr.encode(e.fee_info)}}}class gw extends i{encoder=new fw;decoder=new mw}const Y=new gw;class _e{vm;payload;constructor(e,r){this.vm=e,this.payload=r}toJSON(){return he.encode(this)}}class yw{convert(e){return d(e,"vm","payload"),new _e(c.decode(e.vm),de.decode(e.payload))}}class Cw{convert(e){return h(e,_e),{vm:c.encode(e.vm),payload:de.encode(e.payload)}}}class bw extends i{encoder=new Cw;decoder=new yw}const he=new bw,lc=new A(new I(he),new B(he));class Tr{transaction_nmt;constructor(e){this.transaction_nmt=e}toJSON(){return Ue.encode(this)}}class vw{convert(e){return d(e,"transaction_nmt"),new Tr(lc.decode(e.transaction_nmt))}}class Ew{convert(e){return h(e,Tr),{transaction_nmt:lc.encode(e.transaction_nmt)}}}class xw extends i{encoder=new Ew;decoder=new vw}const Ue=new xw;class Dr{header;payload;hash;size;numTransactions;constructor(e,r,o,n,s){this.header=e,this.payload=r,this.hash=o,this.size=n,this.numTransactions=s}toJSON(){return _r.encode(this)}}class kw{convert(e){return d(e,"header","payload","hash","size","num_transactions"),new Dr(Y.decode(e.header),Ue.decode(e.payload),w.decode(e.hash),c.decode(e.size),c.decode(e.num_transactions))}}class Sw{convert(e){return h(e,Dr),{header:Y.encode(e.header),payload:Ue.encode(e.payload),hash:w.encode(e.hash),size:c.encode(e.size),num_transactions:c.encode(e.numTransactions)}}}class Rw extends R{encoder=new Sw;decoder=new kw}const _r=new Rw;class st{header;hash;size;num_transactions;proposer_id;constructor(e,r,o,n,s){this.header=e,this.hash=r,this.size=o,this.num_transactions=n,this.proposer_id=s}toJSON(){return Ur.encode(this)}}class Iw{convert(e){return d(e,"header","hash","size","num_transactions","proposer_id"),new st(Y.decode(e.header),w.decode(e.hash),c.decode(e.size),c.decode(e.num_transactions),se.decode(e.proposer_id))}}class Bw{convert(e){return h(e,st),{header:Y.encode(e.header),hash:w.encode(e.hash),size:c.encode(e.size),num_transactions:c.encode(e.num_transactions),proposer_id:se.encode(e.proposer_id)}}}class Aw extends i{encoder=new Bw;decoder=new Iw}const Ur=new Aw,Tw=new A(new I(Ur),new B(Ur));class ct{hash;header;offset;transaction;constructor(e,r,o,n){this.hash=e,this.header=r,this.offset=o,this.transaction=n}toJSON(){return Lr.encode(this)}}class Dw{convert(e){return d(e,"hash","header","offset","transaction"),new ct(w.decode(e.hash),Y.decode(e.header),c.decode(e.offset),he.decode(e.transaction))}}class _w{convert(e){return h(e,ct),{hash:w.encode(e.hash),header:Y.encode(e.header),offset:c.encode(e.offset),transaction:he.encode(e.transaction)}}}class Uw extends i{encoder=new _w;decoder=new Dw}const Lr=new Uw,hc=new A(new I(Lr),new B(Lr));class Lw{convert(e){if(!li(e))throw new _(typeof e,"boolean");return e}}class Nw{convert(e){return Je(e,"boolean"),e}}class Pw extends i{encoder=new Nw;decoder=new Lw}const at=new Pw;class it{leaf_commit;constructor(e){this.leaf_commit=e}toJSON(){return Nr.encode(this)}}class Ow{convert(e){return d(e,"leaf_commit"),new it(w.decode(e.leaf_commit))}}class Mw{convert(e){return h(e,it),{leaf_commit:w.encode(e.leaf_commit)}}}class Fw extends i{encoder=new Mw;decoder=new Ow}const Nr=new Fw;class zw{convert(e){if(!ie(e))throw new _(typeof e,"string");const r=new Date(e);if(Number.isNaN(r.valueOf()))throw new _("NaN","number");return r}}class Hw{convert(e){return h(e,Date),e.toISOString()}}class Gw extends i{encoder=new Hw;decoder=new zw}const ce=new Gw,uc=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];function dt(t){for(let e=0;e<24;++e){const r=t[0]^t[10]^t[20]^t[30]^t[40],o=t[1]^t[11]^t[21]^t[31]^t[41],n=t[2]^t[12]^t[22]^t[32]^t[42],s=t[3]^t[13]^t[23]^t[33]^t[43],a=t[4]^t[14]^t[24]^t[34]^t[44],l=t[5]^t[15]^t[25]^t[35]^t[45],m=t[6]^t[16]^t[26]^t[36]^t[46],p=t[7]^t[17]^t[27]^t[37]^t[47],C=t[8]^t[18]^t[28]^t[38]^t[48],y=t[9]^t[19]^t[29]^t[39]^t[49];let f=C^(n<<1|s>>>31),g=y^(s<<1|n>>>31);const L=t[0]^f,D=t[1]^g,H=t[10]^f,Ve=t[11]^g,ha=t[20]^f,ua=t[21]^g,wa=t[30]^f,pa=t[31]^g,ma=t[40]^f,fa=t[41]^g;f=r^(a<<1|l>>>31),g=o^(l<<1|a>>>31);const ga=t[2]^f,ya=t[3]^g,Ca=t[12]^f,ba=t[13]^g,va=t[22]^f,Ea=t[23]^g,xa=t[32]^f,ka=t[33]^g,Sa=t[42]^f,Ra=t[43]^g;f=n^(m<<1|p>>>31),g=s^(p<<1|m>>>31);const Ia=t[4]^f,Ba=t[5]^g,Aa=t[14]^f,Ta=t[15]^g,Da=t[24]^f,_a=t[25]^g,Ua=t[34]^f,La=t[35]^g,Na=t[44]^f,Pa=t[45]^g;f=a^(C<<1|y>>>31),g=l^(y<<1|C>>>31);const Oa=t[6]^f,Ma=t[7]^g,Fa=t[16]^f,za=t[17]^g,Ha=t[26]^f,Ga=t[27]^g,Va=t[36]^f,Wa=t[37]^g,Ja=t[46]^f,ja=t[47]^g;f=m^(r<<1|o>>>31),g=p^(o<<1|r>>>31);const qa=t[8]^f,$a=t[9]^g,Qa=t[18]^f,Ka=t[19]^g,Xa=t[28]^f,Ya=t[29]^g,Za=t[38]^f,ei=t[39]^g,ti=t[48]^f,ri=t[49]^g,Jo=L,jo=D,qo=Ve<<4|H>>>28,$o=H<<4|Ve>>>28,Qo=ha<<3|ua>>>29,Ko=ua<<3|ha>>>29,Xo=pa<<9|wa>>>23,Yo=wa<<9|pa>>>23,Zo=ma<<18|fa>>>14,en=fa<<18|ma>>>14,tn=ga<<1|ya>>>31,rn=ya<<1|ga>>>31,on=ba<<12|Ca>>>20,nn=Ca<<12|ba>>>20,sn=va<<10|Ea>>>22,cn=Ea<<10|va>>>22,an=ka<<13|xa>>>19,dn=xa<<13|ka>>>19,ln=Sa<<2|Ra>>>30,hn=Ra<<2|Sa>>>30,un=Ba<<30|Ia>>>2,wn=Ia<<30|Ba>>>2,pn=Aa<<6|Ta>>>26,mn=Ta<<6|Aa>>>26,fn=_a<<11|Da>>>21,gn=Da<<11|_a>>>21,yn=Ua<<15|La>>>17,Cn=La<<15|Ua>>>17,bn=Pa<<29|Na>>>3,vn=Na<<29|Pa>>>3,En=Oa<<28|Ma>>>4,xn=Ma<<28|Oa>>>4,kn=za<<23|Fa>>>9,Sn=Fa<<23|za>>>9,Rn=Ha<<25|Ga>>>7,In=Ga<<25|Ha>>>7,Bn=Va<<21|Wa>>>11,An=Wa<<21|Va>>>11,Tn=ja<<24|Ja>>>8,Dn=Ja<<24|ja>>>8,_n=qa<<27|$a>>>5,Un=$a<<27|qa>>>5,Ln=Qa<<20|Ka>>>12,Nn=Ka<<20|Qa>>>12,Pn=Ya<<7|Xa>>>25,On=Xa<<7|Ya>>>25,Mn=Za<<8|ei>>>24,Fn=ei<<8|Za>>>24,zn=ti<<14|ri>>>18,Hn=ri<<14|ti>>>18;t[0]=Jo^~on&fn,t[1]=jo^~nn&gn,t[10]=En^~Ln&Qo,t[11]=xn^~Nn&Ko,t[20]=tn^~pn&Rn,t[21]=rn^~mn&In,t[30]=_n^~qo&sn,t[31]=Un^~$o&cn,t[40]=un^~kn&Pn,t[41]=wn^~Sn&On,t[2]=on^~fn&Bn,t[3]=nn^~gn&An,t[12]=Ln^~Qo&an,t[13]=Nn^~Ko&dn,t[22]=pn^~Rn&Mn,t[23]=mn^~In&Fn,t[32]=qo^~sn&yn,t[33]=$o^~cn&Cn,t[42]=kn^~Pn&Xo,t[43]=Sn^~On&Yo,t[4]=fn^~Bn&zn,t[5]=gn^~An&Hn,t[14]=Qo^~an&bn,t[15]=Ko^~dn&vn,t[24]=Rn^~Mn&Zo,t[25]=In^~Fn&en,t[34]=sn^~yn&Tn,t[35]=cn^~Cn&Dn,t[44]=Pn^~Xo&ln,t[45]=On^~Yo&hn,t[6]=Bn^~zn&Jo,t[7]=An^~Hn&jo,t[16]=an^~bn&En,t[17]=dn^~vn&xn,t[26]=Mn^~Zo&tn,t[27]=Fn^~en&rn,t[36]=yn^~Tn&_n,t[37]=Cn^~Dn&Un,t[46]=Xo^~ln&un,t[47]=Yo^~hn&wn,t[8]=zn^~Jo&on,t[9]=Hn^~jo&nn,t[18]=bn^~En&Ln,t[19]=vn^~xn&Nn,t[28]=Zo^~tn&pn,t[29]=en^~rn&mn,t[38]=Tn^~_n&qo,t[39]=Dn^~Un&$o,t[48]=ln^~un&kn,t[49]=hn^~wn&Sn,t[0]^=uc[e*2],t[1]^=uc[e*2+1]}}class Vw{state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];blockSize=0;count=0;squeezing=!1;initialize(e,r){for(let o=0;o<50;++o)this.state[o]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1}absorb(e){for(let r=0;r<e.length;++r)this.state[~~(this.count/4)]^=e[r]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(dt(this.state),this.count=0)}absorbLastFewBits(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),(e&128)!==0&&this.count===this.blockSize-1&&dt(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),dt(this.state),this.count=0,this.squeezing=!0}squeeze(e){this.squeezing||this.absorbLastFewBits(1);const r=new Uint8Array(e);for(let o=0;o<e;++o)r[o]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(dt(this.state),this.count=0);return r}copy(e){for(let r=0;r<50;++r)e.state[r]=this.state[r];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing}}class ae{_rate;_capacity;_delimitedSuffix;_hashBitLength;_state;_finalized;constructor(e,r,o,n){this._rate=e,this._capacity=r,this._delimitedSuffix=o,this._hashBitLength=n,this._state=new Vw,this._state.initialize(e,r),this._finalized=!1}update(e){if(this._finalized)throw new Error("Digest already called");return this._state.absorb(new Uint8Array(e)),this}digest(){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);const e=this._state.squeeze(this._hashBitLength/8);return this._resetState(),ur.encode(e)}_resetState(){return this._state.initialize(this._rate,this._capacity),this}}function Ww(t){switch(t.toLowerCase()){case"keccak224":return new ae(1152,448,null,224);case"keccak256":return new ae(1088,512,null,256);case"keccak384":return new ae(832,768,null,384);case"keccak512":return new ae(576,1024,null,512);case"sha3-224":return new ae(1152,448,6,224);case"sha3-256":return new ae(1088,512,6,256);case"sha3-384":return new ae(832,768,6,384);case"sha3-512":return new ae(576,1024,6,512);default:throw new Error("invalid algorithm: "+t)}}const Jw=48,jw=57,qw=97,$w=102;class Qw{convert(e){if(h(e,ArrayBuffer),e.byteLength!==20)throw new _(typeof e,"20-byte ArrayBuffer");const o=[...yu(cc(new Uint8Array(e)),m=>m.split(""))],n=Ww("keccak256"),s=new TextEncoder;n.update(ur.encode(s.encode(o.join(""))));const a=new Uint8Array(n.digest());return["0x",...Ze(Qs($s(e.byteLength*2),o,(m,p)=>[m,p]),([m,p])=>{const C=p.charCodeAt(0);if(C>=Jw&&C<=jw)return p;if(C>=qw&&C<=$w){const y=Math.floor(m/2),f=m&1,g=a[y];return(f===0?g>>4:g&15)>7?p.toUpperCase():p}throw new N})].join("")}}const Kw=new Qw;class Pr{keyCodec;valueCodec;constructor(e,r){this.keyCodec=e,this.valueCodec=r}convert(e){if(typeof e!="object"||e===null)throw new Error(`invalid map value: expected an object, got ${typeof e}`);const r=new Map;for(const[o,n]of Object.entries(e)){const s=this.keyCodec.decode(o),a=this.valueCodec.decode(n);r.set(s,a)}return r}}class Or{keyCodec;valueCodec;constructor(e,r){this.keyCodec=e,this.valueCodec=r}convert(e){h(e,Map);const r={};for(const[o,n]of e.entries()){const s=this.keyCodec.encode(o),a=this.valueCodec.encode(n);r[s]=a}return r}}class Le extends i{encoder;decoder;constructor(e,r){super(),this.encoder=r,this.decoder=e}static keyStringCodec(e){return new Le(new Pr(u,e),new Or(u,e))}}class Xw{convert(e){if(!ie(e))throw new _(typeof e,"string");return new URL(e)}}class Yw{convert(e){return e.toString()}}class Zw extends i{encoder=new Yw;decoder=new Xw}const wc=new Zw;new M(new P(wc),new O(wc));class pc{width;index;constructor(e,r){this.width=e,this.index=r}toJSON(){return Mr.encode(this)}}class ep{convert(e){return d(e,"width","index"),new pc(c.decode(e.width),c.decode(e.index))}}class tp{convert(e){return h(e,pc),{width:c.encode(e.width),index:c.encode(e.index)}}}class rp extends i{encoder=new tp;decoder=new ep}const Mr=new rp;class Ne{static get lsb0(){return np}static get msb0(){return cp}valueOf(){return this.toString()}toJSON(){return this.toString()}}const mc="bitvec::order::Lsb0",fc="bitvec::order::Msb0";class op extends Ne{toString(){return mc}}const np=new op;class sp extends Ne{toString(){return fc}}const cp=new sp;class ap{convert(e){if(typeof e!="string")throw new _(typeof e,"string");switch(e){case mc:return Ne.lsb0;case fc:return Ne.msb0;default:throw new _(e,"CappuccinoAPIBitVecOrder")}}}class ip{convert(e){return e.toString()}}class dp extends i{encoder=new ip;decoder=new ap}const gc=new dp;class yc{order;head;bits;data;constructor(e,r,o,n){this.order=e,this.head=r,this.bits=o,this.data=n}getBitVecIndexIterable(){return this.order===Ne.lsb0?new mp(this.head.width,this.bits):new gp(this.head.width,this.bits)}[Symbol.iterator](){const e=this.getBitVecIndexIterable();return Ze(e,r=>wp(this.data,r))[Symbol.iterator]()}toJSON(){return Pe.encode(this)}}class lp{convert(e){return d(e,"order","head","bits","data"),new yc(gc.decode(e.order),Mr.decode(e.head),c.decode(e.bits),Ds.decode(e.data))}}class hp{convert(e){return h(e,yc),{order:gc.encode(e.order),head:Mr.encode(e.head),bits:c.encode(e.bits),data:Ds.encode(e.data)}}}class up extends i{encoder=new hp;decoder=new lp}const Pe=new up;new A(new I(Pe),new B(Pe));function wp(t,e){return(t[e.bucket]>>e.bitOffset&1n)===1n}class Cc{constructor(e,r){this.bucket=e,this.bitOffset=r}}function bc(t){switch(U(t===8||t===16||t===32||t===64,"bit width should be a power of two that is supported"),t){case 8:return 3;case 16:return 4;case 32:return 5;case 64:return 6;default:throw new N}}class pp{totalBits;bitWidthMask;bitWidthShift;offset=0n;constructor(e,r){this.totalBits=r;const o=BigInt(bc(e));this.bitWidthMask=BigInt(e)-1n,this.bitWidthShift=o}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,r=this.offset&this.bitWidthMask;return this.offset+=1n,{done:!1,value:new Cc(Number(e),r)}}}class mp{bitWidth;totalBits;constructor(e,r){this.bitWidth=e,this.totalBits=r}[Symbol.iterator](){return new pp(this.bitWidth,this.totalBits)}}class fp{bitWidth;totalBits;bitWidthMask;bitWidthShift;offset=0n;constructor(e,r){this.bitWidth=BigInt(e),this.totalBits=BigInt(r);const o=BigInt(bc(e));this.bitWidthMask=BigInt(e)-1n,this.bitWidthShift=o}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,r=this.bitWidth-1n-(this.offset&this.bitWidthMask);return this.offset+=1n,{done:!1,value:new Cc(Number(e),r)}}}class gp{bitWidth;totalBits;constructor(e,r){this.bitWidth=e,this.totalBits=r}[Symbol.iterator](){return new fp(this.bitWidth,this.totalBits)}}class vc{signature;bitvec;constructor(e,r){this.signature=e,this.bitvec=r}toJSON(){return Fr.encode(this)}}class yp{convert(e){if(!Vn(e)||e.length!==2)throw new _(typeof e,"Array");return new vc(w.decode(e[0]),Pe.decode(e[1]))}}class Cp{convert(e){return h(e,vc),[w.encode(e.signature),Pe.encode(e.bitvec)]}}class bp extends i{encoder=new Cp;decoder=new yp}const Fr=new bp,Ec=new M(new P(Fr),new O(Fr));class lt{data;vote_commitment;view_number;signatures;is_genesis;_pd;constructor(e,r,o,n,s,a){this.data=e,this.vote_commitment=r,this.view_number=o,this.signatures=n,this.is_genesis=s,this._pd=a}toJSON(){return Oe.encode(this)}}class vp{convert(e){return d(e,"data","vote_commitment","view_number","signatures","is_genesis","_pd"),new lt(Nr.decode(e.data),w.decode(e.vote_commitment),c.decode(e.view_number),Ec.decode(e.signatures),at.decode(e.is_genesis),null)}}class Ep{convert(e){return h(e,lt),{data:Nr.encode(e.data),vote_commitment:w.encode(e.vote_commitment),view_number:c.encode(e.view_number),signatures:Ec.encode(e.signatures),is_genesis:at.encode(e.is_genesis),_pd:null}}}class xp extends i{encoder=new Ep;decoder=new vp}const Oe=new xp;class zr{view_number;justify_qc;parent_commitment;block_header;block_payload;rejected;timestamp;proposer_id;constructor(e,r,o,n,s,a,l,m){this.view_number=e,this.justify_qc=r,this.parent_commitment=o,this.block_header=n,this.block_payload=s,this.rejected=a,this.timestamp=l,this.proposer_id=m}toJSON(){return Hr.encode(this)}}class kp{convert(e){return d(e,"view_number","justify_qc","parent_commitment","block_header","block_payload","rejected","timestamp","proposer_id"),new zr(c.decode(e.view_number),Oe.decode(e.justify_qc),w.decode(e.parent_commitment),Y.decode(e.block_header),Ue.decode(e.block_payload),de.decode(e.rejected),c.decode(e.timestamp),S.decode(e.proposer_id))}}class Sp{convert(e){return h(e,zr),{view_number:c.encode(e.view_number),justify_qc:Oe.encode(e.justify_qc),parent_commitment:w.encode(e.parent_commitment),block_header:Y.encode(e.block_header),block_payload:Ue.encode(e.block_payload),rejected:de.encode(e.rejected),timestamp:c.encode(e.timestamp),proposer_id:S.encode(e.proposer_id)}}}class Rp extends i{encoder=new Sp;decoder=new kp}const Hr=new Rp;class Gr{leaf;qc;constructor(e,r){this.leaf=e,this.qc=r}toJSON(){return Vr.encode(this)}}class Ip{convert(e){return d(e,"leaf","qc"),new Gr(Hr.decode(e.leaf),Oe.decode(e.qc))}}class Bp{convert(e){return h(e,Gr),{leaf:Hr.encode(e.leaf),qc:Oe.encode(e.qc)}}}class Ap extends i{encoder=new Bp;decoder=new Ip}const Vr=new Ap;class Me{}class Wr extends Me{toJSON(){return Jr.encode(this)}}class Tp{convert(e){if(!ie(e)||e!=="Empty")throw new W;return new Wr}}class Dp{convert(e){return h(e,Wr),"Empty"}}class _p extends i{encoder=new Dp;decoder=new Tp}const Jr=new _p;class jr extends Me{value;pos;elem;constructor(e,r,o){super(),this.value=e,this.pos=r,this.elem=o}toJSON(){return qr.encode(this)}}class Up{convert(e){d(e,"Leaf");const r=e.Leaf;return d(r,"value","pos","elem"),new jr(w.decode(r.value),w.decode(r.pos),w.decode(r.elem))}}class Lp{convert(e){return h(e,jr),{Leaf:{value:w.encode(e.value),pos:w.encode(e.pos),elem:w.encode(e.elem)}}}}class Np extends R{encoder=new Lp;decoder=new Up}const qr=new Np;class $r extends Me{value;constructor(e){super(),this.value=e}toJSON(){return Qr.encode(this)}}class Pp{convert(e){d(e,"ForgettenSubtree");const r=e.ForgettenSubtree;return d(r,"value"),new $r(w.decode(r.value))}}class Op{convert(e){return h(e,$r),{ForgettenSubtree:{value:w.encode(e.value)}}}}class Mp extends R{encoder=new Op;decoder=new Pp}const Qr=new Mp;class ht extends Me{value;children;constructor(e,r){super(),this.value=e,this.children=r}toJSON(){return Kr.encode(this)}}class Fp{convert(e){d(e,"Branch");const r=e.Branch;return d(r,"value","children"),new ht(w.decode(r.value),ut.decode(r.children))}}class zp{convert(e){return h(e,ht),{Branch:{value:w.encode(e.value),children:ut.encode(e.children)}}}}class Hp extends i{encoder=new zp;decoder=new Fp}const Kr=new Hp;class Gp{convert(e){if(J(e,"Leaf",G))return qr.decoder.convert(e);if(J(e,"Branch",G))return Kr.decoder.convert(e);if(J(e,"ForgettenSubtree",G))return Qr.decoder.convert(e);if(ie(e))return Jr.decoder.convert(e);throw new W}}class Vp{convert(e){if(h(e,Me),e instanceof jr)return qr.encode(e);if(e instanceof ht)return Kr.encode(e);if(e instanceof $r)return Qr.encode(e);if(e instanceof Wr)return Jr.encode(e);throw new W}}class Wp extends i{encoder=new Vp;decoder=new Gp}const xc=new Wp,ut=new A(new I(xc),new B(xc));class Xr{pos;proof;constructor(e,r){this.pos=e,this.proof=r}toJSON(){return Yr.encode(this)}}class Jp{convert(e){return d(e,"pos","proof"),new Xr(w.decode(e.pos),ut.decode(e.proof))}}class jp{convert(e){return h(e,Xr),{pos:w.encode(e.pos),proof:ut.encode(e.proof)}}}class qp extends i{encoder=new jp;decoder=new Jp}const Yr=new qp;class Zr{transaction;block_hash;proof;height;hash;constructor(e,r,o,n,s){this.transaction=e,this.block_hash=r,this.proof=o,this.height=n,this.hash=s}toJSON(){return eo.encode(this)}}class $p{convert(e){return d(e,"transaction","block_hash","proof","height","hash"),new Zr(he.decoder.convert(e.transaction),w.decode(e.block_hash),Yr.decoder.convert(e.proof),c.decode(e.height),w.decode(e.hash))}}class Qp{convert(e){return h(e,Zr),{transaction:he.encode(e.transaction),block_hash:w.encode(e.block_hash),proof:Yr.encode(e.proof),height:c.encode(e.height),hash:w.encode(e.hash)}}}class Kp extends i{encoder=new Qp;decoder=new $p}const eo=new Kp;function wt(t){return new Ar(t.height,t.time.valueOf()/1e3,0,new Sr(0,"00","00"),[],new Ir(new ArrayBuffer(0)),new k("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new k("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new vr(new ArrayBuffer(0),new ArrayBuffer(0),0),new xr(new ArrayBuffer(0),new ArrayBuffer(0)))}async function Xp(t){return new Dr(wt(t),new Tr(await X(K(t.transactions,async e=>new _e(e.tree.namespace,Array.from(new Uint8Array(e.tree.data)))))),new k("BLOCK",new Uint8Array([0,0,0,0]).buffer),t.size,t.numTransactions)}function Yp(t){return new st(wt(t),new k("BLOCK",new Uint8Array([0,0,0,0]).buffer),t.size,t.numTransactions,t.proposer)}function Zp(t){const e=t.transactions,r=wt(t);return K(e,async o=>new ct(o.hash,r,o.index,new _e(o.tree.namespace,Array.from(new Uint8Array(o.tree.data)))))}async function*em(t){const e=wt(t),r=t.transactions;yield*K(r,async o=>new Zr(new _e(o.tree.namespace,Array.from(new Uint8Array(o.tree.data))),new k("BLOCK",new Uint8Array([0,0,0,0]).buffer),new Xr(new k("POS",new Uint8Array([0,0,0,0]).buffer),[new ht(new k("EMPTY",new Uint8Array([0,0,0,0]).buffer),[])]),e.height,new k("COMMIT",o.tree.data.slice(0,32))))}class tm{async getLeafFromHeight(e){const r=await this.getBlockFromHeight(e);return new Gr(new zr(e,new lt(new it(new k("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new k("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null),new k("LEAF",new Uint8Array([0,0,0,0]).buffer),r.header,r.payload,[],r.header.timestamp,r.header.fee_info.account),new lt(new it(new k("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new k("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null))}async getTransactionFromHeightAndOffset(e,r){const o=await Te(ne(z(),e)),n=em(o);return await Hu(tt(n,r))}async getBlockSummaries(e,r){const o=ne(z(),e),n=oe(o,r-e),s=le(n,async a=>Yp(a));return await X(s)}async getBlockFromHeight(e){const r=ne(z(),e),o=await Te(r);return Xp(o)}async*streamTransactionSummaries(e){const r=fr(z(),s=>s.height<=e),o=rt(r);yield*pe(o,s=>De(Zp(s)))}async getTransactionSummaryRange(e,r,o){const n=this.streamTransactionSummaries(e),s=ne(n,r),a=oe(s,o);return await X(a)}async getTransactionSummaryRangeForRollup(e,r,o,n){const s=this.streamTransactionSummaries(r),a=pr(s,p=>p.transaction.vm===e),l=ne(a,o),m=oe(l,n);return await X(m)}}class to{hash;height;time;numTransactions;proposerID;feeRecipient;size;blockReward;constructor(e,r,o,n,s,a,l,m){this.hash=e,this.height=r,this.time=o,this.numTransactions=n,this.proposerID=s,this.feeRecipient=a,this.size=l,this.blockReward=m}toJSON(){return ue.encode(this)}}class rm{convert(e){return d(e,"hash","height","time","num_transactions","proposer_id","fee_recipient","size","block_reward"),new to(w.decode(e.hash),c.decode(e.height),ce.decode(e.time),c.decode(e.num_transactions),se.decode(e.proposer_id),se.decode(e.fee_recipient),c.decode(e.size),Os.decode(e.block_reward))}}class om{convert(e){return h(e,to),{hash:w.encode(e.hash),height:c.encode(e.height),time:ce.encode(e.time),num_transactions:c.encode(e.numTransactions),proposer_id:se.encode(e.proposerID),fee_recipient:se.encode(e.feeRecipient),size:c.encode(e.size),block_reward:Os.encode(e.blockReward)}}}class nm extends R{encoder=new om;decoder=new rm}const ue=new nm;new A(new I(ue),new B(ue));class ro{hash;height;proposerID;numTransactions;size;time;constructor(e,r,o,n,s,a){this.hash=e,this.height=r,this.proposerID=o,this.numTransactions=n,this.size=s,this.time=a}toJSON(){return oo.encode(this)}}class sm{convert(e){return d(e,"hash","height","proposer_id","num_transactions","size","time"),new ro(w.decode(e.hash),c.decode(e.height),se.decode(e.proposer_id),c.decode(e.num_transactions),c.decode(e.size),ce.decode(e.time))}}class cm{convert(e){return h(e,ro),{hash:w.encode(e.hash),height:c.encode(e.height),proposer_id:se.encode(e.proposerID),num_transactions:c.encode(e.numTransactions),size:c.encode(e.size),time:ce.encode(e.time)}}}class am extends R{encoder=new cm;decoder=new sm}const oo=new am,me=new A(new I(oo),new B(oo)),fe="latest";class no{rollups;transactions;blocks;constructor(e,r,o){this.rollups=e,this.transactions=r,this.blocks=o}toJSON(){return so.encode(this)}}class im{convert(e){return d(e,"rollups","transactions","blocks"),new no(c.decode(e.rollups),c.decode(e.transactions),c.decode(e.blocks))}}class dm{convert(e){return h(e,no),{rollups:c.encode(e.rollups),transactions:c.encode(e.transactions),blocks:c.encode(e.blocks)}}}class lm extends i{encoder=new dm;decoder=new im}const so=new lm;function hm(t,e){return t.blockHeights-e.blockHeights}class co{blockTime;blockSize;blockTransactions;blockHeights;constructor(e,r,o,n){const s=[],a=Math.min(e.length,r.length,o.length,n.length);for(let L=0;L<a;L++){const D=n[L];D!==null&&s.push({blockTime:e[L],blockSize:r[L],blockTransactions:o[L],blockHeights:D})}s.sort(hm);const l=s[0].blockHeights,m=s[s.length-1].blockHeights,p=[],C=[],y=[],f=[];for(let L=l,D=0;L<=m;L++){const H=s[D];if(H.blockHeights!==L){p.push(null),C.push(null),y.push(null),f.push(null);continue}p.push(H.blockTime),C.push(H.blockSize),y.push(H.blockTransactions),f.push(H.blockHeights),D++}const g=Math.max(0,f.length-50);this.blockTime=p.slice(g),this.blockSize=C.slice(g),this.blockTransactions=y.slice(g),this.blockHeights=f.slice(g)}toJSON(){return ao.encode(this)}}class um{convert(e){return d(e,"block_time","block_size","block_transactions","block_heights"),new co(ee.decode(e.block_time),ee.decode(e.block_size),ee.decode(e.block_transactions),ee.decode(e.block_heights))}}class wm{convert(e){return h(e,co),{block_time:ee.encode(e.blockTime),block_size:ee.encode(e.blockSize),block_transactions:ee.encode(e.blockTransactions),block_heights:ee.encode(e.blockHeights)}}}class pm extends i{encoder=new wm;decoder=new um}const ao=new pm,kc=de;class pt{hash;rollups;height;time;offset;numTransactions;constructor(e,r,o,n,s,a){this.hash=e,this.rollups=r,this.height=o,this.time=n,this.offset=s,this.numTransactions=a}toJSON(){return io.encode(this)}}class mm{convert(e){return d(e,"hash","rollups","height","time","offset","num_transactions"),new pt(w.decode(e.hash),kc.decode(e.rollups),c.decode(e.height),ce.decode(e.time),c.decode(e.offset),c.decode(e.num_transactions))}}class fm{convert(e){return h(e,pt),{hash:w.encode(e.hash),rollups:kc.encode(e.rollups),height:c.encode(e.height),time:ce.encode(e.time),offset:c.encode(e.offset),num_transactions:c.encode(e.numTransactions)}}}class gm extends i{encoder=new fm;decoder=new mm}const io=new gm,ge=new A(new I(io),new B(io));class lo{latestBlock;genesisOverview;latestBlocks;latestTransactions;histograms;constructor(e,r,o,n,s){this.latestBlock=e,this.genesisOverview=r,this.latestBlocks=o,this.latestTransactions=n,this.histograms=s}toJSON(){return ho.encode(this)}}class ym{convert(e){return d(e,"latest_block","genesis_overview","latest_blocks","latest_transactions","histograms"),new lo(ue.decode(e.latest_block),so.decode(e.genesis_overview),me.decode(e.latest_blocks),ge.decode(e.latest_transactions),ao.decode(e.histograms))}}class Cm{convert(e){return h(e,lo),{latest_block:ue.encode(e.latestBlock),genesis_overview:so.encode(e.genesisOverview),latest_blocks:me.encode(e.latestBlocks),latest_transactions:ge.encode(e.latestTransactions),histograms:ao.encode(e.histograms)}}}class bm extends i{encoder=new Cm;decoder=new ym}const ho=new bm;class uo{blockDetail;constructor(e){this.blockDetail=e}toJSON(){return wo.encode(this)}}class vm{convert(e){return d(e,"block_detail"),new uo(ue.decode(e.block_detail))}}class Em{convert(e){return h(e,uo),{block_detail:ue.encode(e.blockDetail)}}}class xm extends R{encoder=new Em;decoder=new vm}const wo=new xm;class po{blockSummaries;constructor(e){this.blockSummaries=e}toJSON(){return mo.encode(this)}}class km{convert(e){return d(e,"block_summaries"),new po(me.decode(e.block_summaries))}}class Sm{convert(e){return h(e,po),{block_summaries:me.encode(e.blockSummaries)}}}class Rm extends R{encoder=new Sm;decoder=new km}const mo=new Rm;class fo{explorerSummary;constructor(e){this.explorerSummary=e}toJSON(){return go.encode(this)}}class Im{convert(e){return d(e,"explorer_summary"),new fo(ho.decode(e.explorer_summary))}}class Bm{convert(e){return h(e,fo),{explorer_summary:ho.encode(e.explorerSummary)}}}class Am extends i{encoder=new Bm;decoder=new Im}const go=new Am;class yo{blocks;transactions;constructor(e,r){this.blocks=e,this.transactions=r}toJSON(){return Co.encode(this)}}class Tm{convert(e){return d(e,"blocks","transactions"),new yo(me.decode(e.blocks),ge.decode(e.transactions))}}class Dm{convert(e){return h(e,yo),{blocks:me.encode(e.blocks),transactions:ge.encode(e.transactions)}}}class _m extends R{encoder=new Dm;decoder=new Tm}const Co=new _m;class bo{searchResults;constructor(e){this.searchResults=e}toJSON(){return vo.encode(this)}}class Um{convert(e){return d(e,"search_results"),new bo(Co.decode(e.search_results))}}class Lm{convert(e){return h(e,bo),{search_results:Co.encode(e.searchResults)}}}class Nm extends R{encoder=new Lm;decoder=new Um}const vo=new Nm;class Eo{static heightAndOffset(e,r){return new Fe(e,r)}static hash(e){return new ze(e)}toJSON(){return Sc.encode(this)}}class Pm{convert(e){if(h(e,Eo),e instanceof Fe)return{height:c.encode(e.height),offset:c.encode(e.offset)};if(e instanceof ze)return{hash:w.encode(e.hash)};throw new W}}class Om{convert(e){if(J(e,"height",G)&&J(e,"offset",G))return new Fe(c.decode(e.height),c.decode(e.offset));if(J(e,"hash",G))return new ze(w.decode(e.hash));throw new W}}class Mm extends i{encoder=new Pm;decoder=new Om}const Sc=new Mm;class Fe extends Eo{height;offset;constructor(e,r){super(),this.height=e,this.offset=r}}class ze extends Eo{hash;constructor(e){super(),this.hash=e}}const Rc=c;class xo{namespace;payload;constructor(e,r){this.namespace=e,this.payload=r}toJSON(){return ko.encode(this)}}class Fm{convert(e){return d(e,"namespace","payload"),new xo(Rc.decode(e.namespace),nt.decode(e.payload))}}class zm{convert(e){return h(e,xo),{namespace:Rc.encode(e.namespace),payload:nt.encode(e.payload)}}}class Hm extends i{encoder=new zm;decoder=new Fm}const ko=new Hm,Ic=new A(new I(ko),new B(ko));class So{hash;height;blockConfirmed;offset;numTransactions;size;time;sequencingFees;feeDetails;constructor(e,r,o,n,s,a,l,m,p){this.hash=e,this.height=r,this.blockConfirmed=o,this.offset=n,this.numTransactions=s,this.size=a,this.time=l,this.sequencingFees=m,this.feeDetails=p}toJSON(){return Ro.encode(this)}}class Gm{convert(e){return d(e,"hash","height","block_confirmed","offset","num_transactions","size","time","sequencing_fees","fee_details"),new So(w.decode(e.hash),c.decode(e.height),at.decode(e.block_confirmed),c.decode(e.offset),c.decode(e.num_transactions),c.decode(e.size),ce.decode(e.time),[],[])}}class Vm{convert(e){return h(e,So),{hash:w.encode(e.hash),height:c.encode(e.height),block_confirmed:at.encode(e.blockConfirmed),offset:c.encode(e.offset),num_transactions:c.encode(e.numTransactions),size:c.encode(e.size),time:ce.encode(e.time),sequencing_fees:[],fee_details:[]}}}class Wm extends i{encoder=new Vm;decoder=new Gm}const Ro=new Wm;class Io{details;data;constructor(e,r){this.details=e,this.data=r}toJSON(){return Bo.encode(this)}}class Jm{convert(e){return d(e,"details","data"),new Io(Ro.decode(e.details),Ic.decode(e.data))}}class jm{convert(e){return h(e,Io),{details:Ro.encode(e.details),data:Ic.encode(e.data)}}}class qm extends i{encoder=new jm;decoder=new Jm}const Bo=new qm;class mt{transactionDetail;constructor(e){this.transactionDetail=e}toJSON(){return Ao.encode(this)}}class $m{convert(e){return d(e,"transaction_detail"),new mt(Bo.decode(e.transaction_detail))}}class Qm{convert(e){return h(e,mt),{transaction_detail:Bo.encode(e.transactionDetail)}}}class Km extends R{encoder=new Qm;decoder=new $m}const Ao=new Km;class ft{constructor(){}static block(e){return new gt(e)}static namespace(e){return new yt(e)}static none(){return new Do}toJSON(){return To.encode(this)}}class Xm{convert(e){return J(e,"block",G)?new gt(c.decode(e.block)):J(e,"namespace",G)?new yt(c.decode(e.namespace)):new Do}}class Ym{convert(e){if(h(e,ft),e instanceof Do)return{};if(e instanceof gt)return{block:c.encode(e.block)};if(e instanceof yt)return{namespace:c.encode(e.namespace)};throw new W}}class Zm extends R{encoder=new Ym;decoder=new Xm}const To=new Zm;class Do extends ft{constructor(){super()}convertURL(e){return e}}class gt extends ft{block;constructor(e){super(),this.block=e}convertURL(e){return new URL(`${e.pathname}/block/${this.block}`,e)}}class yt extends ft{namespace;constructor(e){super(),this.namespace=e}convertURL(e){return new URL(`${e.pathname}/namespace/${this.namespace}`,e)}}class He{transactionSummaries;constructor(e){this.transactionSummaries=e}toJSON(){return _o.encode(this)}}class ef{convert(e){return d(e,"transaction_summaries"),new He(ge.decode(e.transaction_summaries))}}class tf{convert(e){return h(e,He),{transaction_summaries:ge.encode(e.transactionSummaries)}}}class rf extends R{encoder=new tf;decoder=new ef}const _o=new rf;class Ct{limit;constructor(e){this.limit=e}static latest(e){return new bt(e)}static heightAndOffset(e,r,o){return new vt(e,r,o)}static hash(e,r){return new Et(e,r)}toJSON(){return Uo.encode(this)}}class of{convert(e){return d(e,"limit"),J(e,"height",G)&&J(e,"offset",G)?new vt(c.decode(e.height),c.decode(e.offset),c.decode(e.limit)):J(e,"hash",G)?new Et(w.decode(e.hash),c.decode(e.limit)):new bt(c.decode(e.limit))}}class nf{convert(e){if(h(e,Ct),e instanceof bt)return{limit:c.encode(e.limit)};if(e instanceof vt)return{height:c.encode(e.height),offset:c.encode(e.offset),limit:c.encode(e.limit)};if(e instanceof Et)return{hash:w.encode(e.hash),limit:c.encode(e.limit)};throw new W}}class sf extends R{encoder=new nf;decoder=new of}const Uo=new sf;class bt extends Ct{constructor(e){super(e)}convertURL(e){return new URL(`transactions/latest/${this.limit}`,e)}}class vt extends Ct{height;offset;constructor(e,r,o){super(o),this.height=e,this.offset=r}convertURL(e){return new URL(`transactions/from/${this.height}/${this.offset}/${this.limit}`,e)}}class Et extends Ct{hash;constructor(e,r){super(r),this.hash=e}convertURL(e){return new URL(`transactions/hash/${this.hash}/${this.limit}`,e)}}function Bc(t){return new to(t.hash,t.height,t.time,t.numTransactions,t.proposer,t.proposer,t.size,t.fees)}function Lo(t){return new ro(t.hash,t.height,t.proposer,t.numTransactions,t.size,t.time)}function Ac(t,e){return new Io(new So(e.hash,e.block,!0,e.index,t.numTransactions,e.size,e.time,[],[]),[new xo(e.tree.namespace,e.tree.data)])}function xt(t,e){return new pt(e.hash,[e.tree.namespace],e.block,e.time,e.index,t.numTransactions)}class cf{async getBlockDetail(e){const r=e.target,o=await(r===fe?oc(z()):Te(tt(z(),r)));return new uo(Bc(o))}async getBlockSummaries(e){const r=fr(z(),l=>e.from===fe||l.height<=e.from),o=rt(r),n=oe(o,e.limit),s=le(n,async l=>Lo(l)),a=await X(s);return new po(a)}async getTransactionDetail(e){const r=z();if(e instanceof Fe){const o=gr(r,l=>l.height<=e.height),n=pe(o,l=>K(l.transactions,async m=>Ac(l,m))),s=tt(De(n),e.offset),a=await Te(s);return new mt(a)}if(e instanceof ze){const o=pe(r,s=>K(s.transactions,async a=>Ac(s,a))),n=await Vu(o,s=>s.details.hash===e.hash);if(!n)throw new hs(e.hash);return new mt(n)}throw new N}applyFilter(e,r){return r instanceof gt?rc(e,o=>o.height==r.block):r instanceof yt?rc(e,o=>o.rollups.indexOf(r.namespace)>=0):e}async getTransactionSummaries(e){const r=z(),{target:o,filter:n}=e;if(o instanceof bt){const a=pe(r,C=>K(C.transactions,async y=>xt(C,y))),l=De(a),m=this.applyFilter(l,n),p=await Cr(mr(m,o.limit));return new He(p)}if(o instanceof vt){const s=gr(r,y=>y.height<=o.height),a=pe(s,y=>K(y.transactions,async f=>xt(y,f))),l=De(a),m=tt(l,o.offset),p=this.applyFilter(m,n),C=await Cr(mr(p,o.limit));return new He(C)}if(o instanceof Et){const s=z(),a=pe(s,y=>K(y.transactions,async f=>new pt(f.hash,[f.tree.namespace],f.block,f.time,f.index,y.numTransactions))),l=gr(a,y=>y.hash!==o.hash),m=De(l),p=this.applyFilter(m,n),C=await Cr(mr(p,o.limit));return new He(C)}throw new N}async getExplorerOverview(){let e;const r=q(11),o=q(51),n=q(51),s=q(51),a=q(51),l=q(11);let m=0,p=0;const C=new Map;for await(const y of z()){e=Bc(y),r.put(Lo(y)),o.put(y.size),n.put(Math.round(y.genTime/1e3)),s.put(y.numTransactions),a.put(y.height),m++,p+=y.numTransactions;for await(const f of y.transactions){l.put(xt(y,f));const g=C.get(f.tree.namespace)||0;C.set(f.tree.namespace,g+1)}}return new fo(new lo(e,new no(Array.from(C.keys()).length,p,m),Array.from(r),Array.from(l),new co(Array.from(n),Array.from(o),Array.from(s),Array.from(a))))}async getSearchResult(e){const r=q(101),o=q(10),n=q(10);for await(const s of z())r.put(s);for(const s of r){s.hash.toString().startsWith(e.query)&&o.put(Lo(s));for await(const a of s.transactions)a.hash.toString().startsWith(e.query)&&n.put(xt(s,a))}return new bo(new yo(Array.from(o),Array.from(n)))}}const No=1e4,Tc=0,af="PercentageOutOfRange";class df extends v{value;constructor(e,r=`the commission percentage is outside of the range [${Tc}, ${No}], have ${e}`){super(r),this.value=e,Object.freeze(this)}get code(){return af}}class Po{value;constructor(e){if(e<Tc||e>No)throw new df(e);this.value=e}toString(){return`${this.value/100}%`}toJSON(){return this.value}valueOf(){return this.value/No}}class lf{convert(e){if(typeof e!="number")throw new _(typeof e,"number");return new Po(e)}}class hf{convert(e){if(!(e instanceof Po))throw new _(e,"CommissionPercent");return Math.floor(e.value)}}class uf extends i{encoder=new hf;decoder=new lf}const kt=new uf;let Dc=class{stakeKey;stakeAmount;constructor(e,r){this.stakeKey=e,this.stakeAmount=r}},wf=class{convert(e){return d(e,"stake_key","stake_amount"),new Dc(w.decode(e.stake_key),T.decode(e.stake_amount))}},pf=class{convert(e){return h(e,Dc),{stake_key:w.encode(e.stakeKey),stake_amount:T.encode(e.stakeAmount)}}},mf=class extends i{encoder=new pf;decoder=new wf};const ye=new mf;new M(new P(ye),new O(ye)),new A(new I(ye),new B(ye));class _c{stakeTableEntry;stateVerKey;constructor(e,r){this.stakeTableEntry=e,this.stateVerKey=r}}class ff{convert(e){return d(e,"stake_table_entry","state_ver_key"),new _c(ye.decode(e.stake_table_entry),w.decode(e.state_ver_key))}}class gf{convert(e){return h(e,_c),{stake_table_entry:ye.encode(e.stakeTableEntry),state_ver_key:w.encode(e.stateVerKey)}}}class yf extends i{encoder=new gf;decoder=new ff}const St=new yf;new M(new P(St),new O(St)),new A(new I(St),new B(St));class Cf{address;constructor(e){this.address=e,Object.freeze(this)}toJSON(){return Ce.encode(this)}toString(){return Ce.encode(this)}}class bf{convert(e){return e.address.byteLength!==20?S.encode(e.address):Kw.convert(e.address)}}class vf{convert(e){return new Cf(S.decode(e))}}class Ef extends i{encoder=new bf;decoder=new vf}const Ce=new Ef;new M(new P(Ce),new O(Ce));const Uc=Le.keyStringCodec(T);class Lc{account;stakeTableKey;stateVerKey;stake;commission;delegators;constructor(e,r,o,n,s,a){this.account=e,this.stakeTableKey=r,this.stateVerKey=o,this.stake=n,this.commission=s,this.delegators=a}}class xf{convert(e){return d(e,"account","stake_table_key","state_ver_key","stake","commission","delegators"),new Lc(Ce.decode(e.account),w.decode(e.stake_table_key),w.decode(e.state_ver_key),T.decode(e.stake),kt.decode(e.commission),Uc.decode(e.delegators))}}class kf{convert(e){return h(e,Lc),{account:Ce.encode(e.account),stake_table_key:w.encode(e.stakeTableKey),state_ver_key:w.encode(e.stateVerKey),stake:T.encode(e.stake),commission:kt.encode(e.commission),delegators:Uc.encode(e.delegators)}}}class Sf extends i{encoder=new kf;decoder=new xf}const Rt=new Sf;new M(new P(Rt),new O(Rt)),new A(new I(Rt),new B(Rt));class Nc{constructor(e,r,o,n,s,a){this.address=e,this.stakeTableKey=r,this.stakeKey=o,this.stake=n,this.comission=s,this.delegators=a,Object.freeze(this)}toJSON(){return Oo.encode(this)}}const Pc=new Le(new Pr(u,T),new Or(u,T));class Rf{convert(e){return d(e,"account","stake_table_key","state_ver_key","stake","commission","delegators"),new Nc(S.decode(e.account),w.decode(e.stake_table_key),w.decode(e.state_ver_key),T.decode(e.stake),kt.decode(e.commission),Pc.decode(e.delegators))}}class If{convert(e){return{account:S.encode(e.address),stake_table_key:w.encode(e.stakeTableKey),state_ver_key:w.encode(e.stakeKey),stake:T.encode(e.stake),commission:kt.encode(e.comission),delegators:Pc.encode(e.delegators)}}}class Bf extends i{encoder=new If;decoder=new Rf}const Oo=new Bf;class Oc{constructor(e){this.validators=e,Object.freeze(this)}toJSON(){return Mo.encode(this)}}const Mc=new Le(new Pr(u,Oo),new Or(u,Oo));class Af{convert(e){return new Oc(Mc.decode(e))}}class Tf{convert(e){return Mc.encode(e.validators)}}class Df extends i{encoder=new Tf;decoder=new Af}const Mo=new Df;class Fc{constructor(e,r){this.stakeKey=e,this.stakeAmount=r,Object.freeze(this)}toJSON(){return Fo.encode(this)}}class _f{convert(e){return d(e,"stake_key","stake_amount"),new Fc(w.decode(e.stake_key),T.decode(e.stake_amount))}}class Uf{convert(e){return{stake_key:w.encode(e.stakeKey),stake_amount:T.encode(e.stakeAmount)}}}class Lf extends i{encoder=new Uf;decoder=new _f}const Fo=new Lf;class zc{constructor(e,r){this.stakeTableEntry=e,this.stateVerKey=r,Object.freeze(this)}}class Nf{convert(e){return d(e,"stake_table_entry","state_ver_key"),new zc(Fo.decode(e.stake_table_entry),w.decode(e.state_ver_key))}}class Pf{convert(e){return{stake_table_entry:Fo.encode(e.stakeTableEntry),state_ver_key:w.encode(e.stateVerKey)}}}class Of extends i{encoder=new Pf;decoder=new Nf}const Hc=new Of,Gc=new A(new I(Hc),new B(Hc));class Vc{constructor(e){this.entries=e,Object.freeze(this)}}class Mf{convert(e){return new Vc(Gc.decode(e))}}class Ff{convert(e){return Gc.encode(e.entries)}}class zf extends i{encoder=new Ff;decoder=new Mf}const Wc=new zf;class Hf{async getStakeTableForEpoch(){return new Vc(Array.from(Ze(et,e=>new zc(new Fc(e.pubkey,e.stake),e.stateVerKey))))}async getValidatorsAtEpoch(){return new Oc(new Map(Ze(et,e=>[S.encode(e.address),new Nc(e.address,e.pubkey,e.stateVerKey,e.stake,new Po(e.commission),new Map([[S.encode(e.address),e.stake]]))])))}}class It{constructor(e,r){this.lifetimeRewards=e,this.authData=r,Object.freeze(this)}toJSON(){return Bt.encode(this)}}class Gf{convert(e){return d(e,"lifetime_rewards","auth_data"),new It(T.decode(e.lifetime_rewards),S.decode(e.auth_data))}}class Vf{convert(e){return h(e,It),{lifetime_rewards:T.encode(e.lifetimeRewards),auth_data:S.encode(e.authData)}}}class Wf extends i{encoder=new Vf;decoder=new Gf}const Bt=new Wf,Jc=new M(new P(Bt),new O(Bt)),Jf=new re(Ae());class jf{async getLatestRewardBalance(){return 123000000000000000000n}async getLatestRewardClaimInput(){return new It(123000000000000000000n,Jf.fillBytes(5344))}async getRewardBalance(){return 123000000000000000000n}async getRewardClaimInput(e){const r=new re(e.height);return new It(123000000000000000000n,r.fillBytes(5344))}}class qf{async blockHeight(){const e=Date.now(),r=new re(Ae());return(await oc(z(r,e))).height}}class $f{availability=new tm;status=new qf;explorer=new cf;rewardState=new jf;node=new Hf;async setURL(){throw new N}}function F(t,e){return async r=>(await Qf(r,e),zo(r),t.convert(await r.json()))}async function Qf(t,e){if(!t.ok){if(t.status>=500&&t.status<600){try{if(zo(t),e!==void 0){const r=await t.json();throw e.convert(r)}}catch(r){if(r instanceof v)throw r;console.error("encountered an error attempting to decode a server error from the server",r)}throw new Xn(t.status,t)}if(t.status>=400&&t.status<500){try{if(zo(t),e!==void 0){const r=await t.json();throw e.convert(r)}}catch(r){if(r instanceof v)throw r;console.error("encountered an error attempting to decode a client error from the server",r)}throw new qn(t.status,t)}throw new Qn(t.status,t)}}function zo(t){const e=t.headers.get("content-type");if(!e||!e.startsWith("application/json"))throw ke.fromResponse(t,e||"undefined")}class jc{availability;constructor(e){this.availability=e}toJSON(){return qc.encode(this)}}class Kf{convert(e){return d(e,"Availability"),new jc(Z.decode(e.Availability))}}class Xf{convert(e){return h(e,jc),{Availability:Z.encode(e.availability)}}}class Yf extends i{encoder=new Xf;decoder=new Kf}const qc=new Yf;class Zf{convert(e){return qc.decode(e).availability}}const Ho=new Zf;async function eg(t,e){return new st(t.header,t.hash,t.size,t.payload.transaction_nmt.length,[e.leaf.proposer_id])}async function*tg(t,e){const r=e[Symbol.asyncIterator]();yield*K(Fu(t.leaf.block_payload.transaction_nmt),async o=>{const n=t.leaf.block_payload.transaction_nmt.indexOf(o),s=await r.next();if(s.done)throw new Error("Not enough transactions");return new ct(s.value.hash,t.leaf.block_header,n,o)})}class rg{fetcher;baseURL;constructor(e,r){this.fetcher=e,this.baseURL=r}getLeafFromHeight(e){const r=new URL(`leaf/${e}`,this.baseURL);return this.fetcher(r).then(F(Vr.decoder,Ho))}getTransactionFromHeightAndOffset(e,r){const o=new URL(`transaction/${e}/${r}`,this.baseURL);return this.fetcher(o).then(F(eo.decoder,Ho))}async getBlockSummaries(e,r){const o=yr(r-e),n=le(o,a=>Promise.all([this.getBlockFromHeight(e+a),this.getLeafFromHeight(e+a)])),s=le(n,([a,l])=>eg(a,l));return await X(s)}getBlockFromHeight(e){const r=new URL(`block/${e}`,this.baseURL);return this.fetcher(r).then(F(_r.decoder,Ho))}async*streamBlocksFromHeightRange(e,r){const o=yr(e),n=le(o,a=>this.getLeafFromHeight(e-a)),s=nc(n,a=>rt(tg(a,le(yr(a.leaf.block_payload.transaction_nmt.length),l=>this.getTransactionFromHeightAndOffset(a.leaf.block_header.height,l)))));if(r===void 0){yield*s;return}yield*oe(s,r)}async getTransactionSummaryRange(e,r,o){const n=this.streamBlocksFromHeightRange(e,50),s=ne(n,r),a=oe(s,o);return await X(a)}async getTransactionSummaryRangeForRollup(e,r,o,n){const s=this.streamBlocksFromHeightRange(r,50),a=pr(s,p=>p.transaction.vm===e),l=ne(a,o),m=oe(l,n);return await X(m)}}class $c{explorer;constructor(e){this.explorer=e}toJSON(){return Kc.encode(this)}}class og{convert(e){return d(e,"Explorer"),new $c(Go.decode(e.Explorer))}}class ng{convert(e){return h(e,$c),{Explorer:Go.encode(e.explorer)}}}class sg extends i{encoder=new ng;decoder=new og}class Qc{error;constructor(e){this.error=e}toJSON(){return Go.encode(this)}}class cg{convert(e){return d(e,"error"),new Qc(Z.decode(e.error))}}class ag{convert(e){return h(e,Qc),{Explorer:Z.encode(e.error)}}}class ig extends i{encoder=new ag;decoder=new cg}const Go=new ig,Kc=new sg;class dg{convert(e){return Kc.decode(e).explorer.error}}const be=new dg;class lg{fetcher;baseURL;constructor(e,r){this.fetcher=e,this.baseURL=r}async getBlockDetail(e){const r=new URL(`block/${e.target}`,this.baseURL);return this.fetcher(r).then(F(wo.decoder,be))}async getBlockSummaries(e){const r=new URL(`blocks/${e.from}/${e.limit}`,this.baseURL);return this.fetcher(r).then(F(mo.decoder,be))}async getTransactionDetail(e){let r=null;if(e instanceof ze?r=new URL(`transaction/hash/${e.hash}`,this.baseURL):e instanceof Fe&&(r=new URL(`transaction/${e.height}/${e.offset}`,this.baseURL)),!r)throw new N;return this.fetcher(r).then(F(Ao.decoder,be))}async getTransactionSummaries(e){const{target:r,filter:o}=e;let n=r.convertURL(this.baseURL);return n=o.convertURL(n),this.fetcher(n).then(F(_o.decoder,be))}async getExplorerOverview(){const e=new URL("explorer-summary",this.baseURL);return this.fetcher(e).then(F(go.decoder,be))}async getSearchResult(e){const r=new URL(`search/${encodeURIComponent(e.query)}`,this.baseURL);return this.fetcher(r).then(F(vo.decoder,be))}}class hg{fetcher;baseURL;stakeTableURL;validatorsURL;blockHeightResponseValidator=F(Wc.decoder);validatorsResponseValidator=F(Mo.decoder);constructor(e,r){this.fetcher=e,this.baseURL=r,this.stakeTableURL=new URL("stake-table/",this.baseURL),this.validatorsURL=new URL("validators/",this.baseURL)}getStakeTableForEpoch(e){const r=new URL(String(e),this.stakeTableURL);return this.fetcher(r).then(this.blockHeightResponseValidator)}getValidatorsAtEpoch(e){const r=new URL(String(e),this.validatorsURL);return this.fetcher(r).then(this.validatorsResponseValidator)}}class ug{fetcher;baseURL;rewardBalanceResponseValidator=F(Se.decoder);rewardClaimInputResponseValidator=F(Bt.decoder);constructor(e,r){this.fetcher=e,this.baseURL=r}async getLatestRewardBalance(e){return this.fetcher(new URL(`reward-balance/latest/${e}`,this.baseURL)).then(this.rewardBalanceResponseValidator)}async getLatestRewardClaimInput(e){return this.fetcher(new URL(`reward-claim-input/latest/${e}`,this.baseURL)).then(this.rewardClaimInputResponseValidator)}async getRewardBalance(e){return this.fetcher(new URL(`reward-balance/${e.height}/${e.address}`,this.baseURL)).then(this.rewardBalanceResponseValidator)}async getRewardClaimInput(e){return this.fetcher(new URL(`reward-claim-input/${e.height}/${e.address}`,this.baseURL)).then(this.rewardClaimInputResponseValidator)}}class wg{fetcher;baseURL;blockHeightURL;blockHeightResponseValidator=F(c.decoder);constructor(e,r){this.fetcher=e,this.baseURL=r,this.blockHeightURL=new URL("block-height",this.baseURL)}blockHeight(){return this.fetcher(this.blockHeightURL).then(this.blockHeightResponseValidator)}}class Xc{availability;status;explorer;rewardState;node;constructor(e,r){this.availability=new rg(e,new URL("availability/",r)),this.status=new wg(e,new URL("status/",r)),this.explorer=new lg(e,new URL("explorer/",r)),this.rewardState=new ug(e,new URL("reward-state-v2/",r)),this.node=new hg(e,new URL("node/",r))}async setURL(){throw new N}}class pg{service;constructor(e){this.service=e}async getLeafFromHeight(e){return Vr.encode(await this.service.getLeafFromHeight(e))}async getTransactionFromHeightAndOffset(e,r){return eo.encode(await this.service.getTransactionFromHeightAndOffset(e,r))}async getBlockFromHeight(e){return _r.encode(await this.service.getBlockFromHeight(e))}async getBlockSummaries(e,r){return Tw.encode(await this.service.getBlockSummaries(e,r))}async getTransactionSummaryRange(e,r,o){return hc.encode(await this.service.getTransactionSummaryRange(e,r,o))}async getTransactionSummaryRangeForRollup(e,r,o,n){return hc.encode(await this.service.getTransactionSummaryRangeForRollup(e,r,o,n))}async handleRequest(e){switch(e.method){case"getLeafFromHeight":return await this.getLeafFromHeight(c.decode(e.param[0]));case"getTransactionFromHeightAndOffset":return await this.getTransactionFromHeightAndOffset(c.decode(e.param[0]),c.decode(e.param[1]));case"getBlockFromHeight":return await this.getBlockFromHeight(c.decode(e.param[0]));case"getBlockSummaries":return await this.getBlockSummaries(c.decode(e.param[0]),c.decode(e.param[1]));case"getTransactionSummaryRange":return await this.getTransactionSummaryRange(c.decode(e.param[0]),c.decode(e.param[1]),c.decode(e.param[2]));case"getTransactionSummaryRangeForRollup":return await this.getTransactionSummaryRangeForRollup(c.decode(e.param[0]),c.decode(e.param[1]),c.decode(e.param[2]),c.decode(e.param[3]));default:throw new N}}}class Vo{target;constructor(e){this.target=e}static latest(){return new Zc}static height(e){return new ea(e)}toJSON(){return Yc.encode(this)}}class mg{convert(e){return h(e,Vo),typeof e.target=="number"?c.encode(e.target):u.encode(e.target)}}class fg{convert(e){return e===fe?new Zc:new ea(c.decode(e))}}class gg extends R{encoder=new mg;decoder=new fg}const Yc=new gg;class Zc extends Vo{constructor(){super(fe)}}class ea extends Vo{constructor(e){super(e)}}class Wo{limit;constructor(e){this.limit=e}static latest(e){return new ra(e)}static from(e,r){return new oa(e,r)}toJSON(){return ta.encode(this)}}class yg{convert(e){return h(e,Wo),Tt(e.from)?{from:c.encode(e.from),limit:c.encode(e.limit)}:{from:u.encode(e.from),limit:c.encode(e.limit)}}}class Cg{convert(e){return d(e,"from","limit"),e.from===fe?new ra(c.decode(e.limit)):new oa(c.decode(e.from),c.decode(e.limit))}}class bg extends R{encoder=new yg;decoder=new Cg}const ta=new bg;class ra extends Wo{constructor(e){super(e)}get from(){return fe}}class oa extends Wo{from;constructor(e,r){super(r),this.from=e}}class na{query;constructor(e){this.query=e}toJSON(){return sa.encode(this)}}class vg{convert(e){return h(e,na),u.encode(e.query)}}class Eg{convert(e){return new na(u.decode(e))}}class xg extends R{encoder=new vg;decoder=new Eg}const sa=new xg;class ca{target;filter;constructor(e,r){this.target=e,this.filter=r}toJSON(){return aa.encode(this)}}class kg{convert(e){return d(e,"filter","target"),new ca(Uo.decode(e.target),To.decode(e.filter))}}class Sg{convert(e){return h(e,ca),{filter:To.encode(e.filter),target:Uo.encode(e.target)}}}class Rg extends R{encoder=new Sg;decoder=new kg}const aa=new Rg;class Ig{service;constructor(e){this.service=e}async getBlockDetail(e){return wo.encode(await this.service.getBlockDetail(e))}async getBlockSummaries(e){return mo.encode(await this.service.getBlockSummaries(e))}async getTransactionDetail(e){return Ao.encode(await this.service.getTransactionDetail(e))}async getTransactionSummaries(e){return _o.encode(await this.service.getTransactionSummaries(e))}async getExplorerOverview(){return go.encode(await this.service.getExplorerOverview())}async getSearchResult(e){return vo.encode(await this.service.getSearchResult(e))}async handleRequest(e){switch(e.method){case"getBlockDetail":return await this.getBlockDetail(Yc.decode(e.param[0]));case"getBlockSummaries":return await this.getBlockSummaries(ta.decode(e.param[0]));case"getTransactionDetail":return this.getTransactionDetail(Sc.decode(e.param[0]));case"getTransactionSummaries":return this.getTransactionSummaries(aa.decode(e.param[0]));case"getExplorerOverview":return this.getExplorerOverview();case"getSearchResult":return this.getSearchResult(sa.decode(e.param[0]))}}}class Bg{service;constructor(e){this.service=e}async getStakeTableForEpoch(e){return Wc.encode(await this.service.getStakeTableForEpoch(e))}async getValidatorsAtEpoch(e){return Mo.encode(await this.service.getValidatorsAtEpoch(e))}async handleRequest(e){switch(e.method){case"getStakeTableForEpoch":return this.getStakeTableForEpoch(c.decode(e.param[0]));case"getValidatorsAtEpoch":return this.getValidatorsAtEpoch(c.decode(e.param[0]));default:throw new N}}}class ia{constructor(e,r){this.height=e,this.address=r,Object.freeze(this)}toJSON(){return Ge.encode(this)}}class Ag{convert(e){return d(e,"height","address"),new ia(c.decode(e.height),u.decode(e.address))}}class Tg{convert(e){return h(e,ia),{height:c.encode(e.height),address:u.encode(e.address)}}}class Dg extends i{encoder=new Tg;decoder=new Ag}const Ge=new Dg;new M(new P(Ge),new O(Ge));class _g{service;constructor(e){this.service=e}async getLatestRewardBalance(e){return Se.encode(await this.service.getLatestRewardBalance(e))}async getLatestRewardClaimInput(e){return Jc.encode(await this.service.getLatestRewardClaimInput(e))}async getRewardBalance(e){return Se.encode(await this.service.getRewardBalance(e))}async getRewardClaimInput(e){return Jc.encode(await this.service.getRewardClaimInput(e))}async handleRequest(e){switch(e.method){case"getLatestRewardBalance":return await this.getLatestRewardBalance(u.decode(e.param[0]));case"getLatestRewardClaimInput":return await this.getLatestRewardClaimInput(u.decode(e.param[0]));case"getRewardBalance":return await this.getRewardBalance(Ge.decode(e.param[0]));case"getRewardClaimInput":return await this.getRewardClaimInput(Ge.decode(e.param[0]));default:throw new N}}}class Ug{service;constructor(e){this.service=e}blockHeight(){return this.service.blockHeight()}async handleRequest(e){switch(e.method){case"blockHeight":return this.blockHeight();default:throw new N}}}class da{availability;status;explorer;rewardState;node;constructor(e){this.availability=new pg(e.availability),this.status=new Ug(e.status),this.explorer=new Ig(e.explorer),this.rewardState=new _g(e.rewardState),this.node=new Bg(e.node)}async handleRequest(e){switch(e.api){case"availability":return this.availability.handleRequest(e);case"status":return this.status.handleRequest(e);case"explorer":return this.explorer.handleRequest(e);case"reward-state":return this.rewardState.handleRequest(e);case"node":return this.node.handleRequest(e);default:throw new N}}}const la=async(t,e)=>{try{return await fetch(t,e)}catch(r){throw new Yn(r)}};async function Lg(){try{const e=await(await fetch("/config.json")).json();if(e.hotshot_query_service_url){const r=new URL(e.hotshot_query_service_url);return new Xc(la,r)}}catch{}return new $f}async function Ng(){return new da(await Lg())}class Pg{service;postMessage;requestChannel;constructor(e){this.postMessage=e,this.service=Ng(),this.requestChannel=Rl(10),this.processRequests()}async handleProxyRequest(e){if(e.method==="set-url"){const r=e.param[0];if(!r||typeof r!="string")throw new N("Invalid URL provided");return this.service=Promise.resolve(new da(new Xc(la,new URL(r)))),!0}else throw new N(`Unknown proxy method: ${e.method}`)}async processRequests(){for await(const e of this.requestChannel)try{const r=await this.service;let o;e.api==="proxy"?o=await this.handleProxyRequest(e):o=await r.handleRequest(e),this.postMessage(As.encode(new ar(e.requestID,o)))}catch(r){this.postMessage(Ts.encode(new ir(e.requestID,r)))}}async handleEvent(e){const r=Tl.decode(e.data);await this.requestChannel.publish(r)}}self.addEventListener("message",new Pg(self.postMessage.bind(self)))})();
