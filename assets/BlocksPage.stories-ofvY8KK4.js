import{j as r,a as C}from"./jsx-runtime-5BUNAZ9W.js";import{P,O as B,H as x,a as _}from"./Header-efnDnTsH.js";import{W as b,H as D,C as w,P as z,g as R,S as F}from"./StoryBookPathResolver-8EOso1hl.js";import{F as A}from"./Footer-CrD2Tz-8.js";import{R as s}from"./index-4g5l5LRQ.js";import{b as N,d as i,S as T,D as S,a as L,c as E,r as O}from"./DataTable-iTPprKGc.js";import{P as I}from"./PromiseBuilder-Wx5BoySI.js";import{L as H}from"./Link-Cn5sJHnZ.js";import{B as M}from"./ByteSizeText-Je_qPo_H.js";import{N as k}from"./NumberText-vuBi4ZSJ.js";import{T as j}from"./TaggedBase64Text-Q_YkSFSF.js";import{T as U}from"./TimeText-GYuBLmF5.js";import{T as V}from"./Text-qj7igP2-.js";import{t as W,d as q}from"./functional-Sf3DWwwq.js";import"./Close-bhffxfNn.js";import"./higher_order-VtSBvwoq.js";import"./SVGIconBase-1p394ezW.js";import"./IconButton-7JNgBrhk.js";import"./Button-I3bbD5ni.js";import"./typography-fmBtJntk.js";import"./TaggedBase64-4sAxGbCE.js";import"./ArrowRight-9gpb0-y0.js";import"./AnchorButton-nRlYYR1D.js";import"./FlatIconAnchorButton-1U1EvmN5.js";import"./IconAnchorButton-HujeWbUs.js";import"./LabeledAnchorButton-vxbK3n4D.js";import"./LabeledButton-lVcWQ9Rx.js";import"./DiscordIcon-3IewVXYd.js";import"./EspressoLogo-WrwOKMPe.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./ChevronUp-LKTnnBoj.js";import"./NumberFormattersProvider-olCp0Cc0.js";import"./DateTimeFormattersProvider-ojTofX-n.js";var a=(e=>(e.height="height",e.proposer="proposer",e.size="size",e.time="time",e.transactions="transaction",e))(a||{});const G=()=>{const e=s.useContext(P),t=s.useContext(i);return r(H,{href:e.block(t.block),children:r(k,{number:t.block})})},J=()=>{const e=s.useContext(i);return r(j,{value:e.proposer})},K=()=>{const e=s.useContext(i);return r(k,{number:e.transactions})},Q=()=>{const e=s.useContext(i);return r(M,{bytes:e.size})},X=()=>{const e=s.useContext(i);return r(U,{date:e.time})},Y=()=>{const e=s.useContext(v),t=s.useContext(S),o=Z(e);return r(I,{promise:o(t),builder:E(u)})},v=s.createContext({async retrieve(){throw new Error("unimplemented")}});function Z(e){return async t=>{const o=t;return(await e.retrieve({page:o.page,resultsPerPage:20,sortColumn:o.sortColumn,sortDir:o.sortDir})).map(n=>({block:n.height,proposer:n.proposer,transactions:n.transactions,size:n.size,time:n.time}))}}const $=()=>{const[e,t]=s.useState({sortColumn:a.height,sortDir:T.desc,page:0});return r(S.Provider,{value:e,children:r(L.Provider,{value:t,children:r(Y,{})})})},u=()=>r(N,{columns:[{label:"Blocks",columnType:a.height,buildCell:G},{label:"Proposer",columnType:a.proposer,buildCell:J},{label:"Transaction",columnType:a.transactions,buildCell:K},{label:"Size",columnType:a.size,buildCell:Q},{label:"Time",columnType:a.time,buildCell:X}]});try{u.displayName="BlockSummaryDataTable",u.__docgenInfo={description:"",displayName:"BlockSummaryDataTable",props:{}}}catch{}const ee=b(w),te=b(z),d=()=>C(B,{pathname:"/blocks",children:[r(x,{}),r(te,{children:r(D,{children:r(V,{text:"Blocks"})})}),r(ee,{children:r($,{})}),r(A,{})]});try{d.displayName="BlocksPage",d.__docgenInfo={description:"",displayName:"BlocksPage",props:{}}}catch{}function re(e,t){return e.height-t.height}function oe(e,t){const o=new DataView(e),p=new DataView(t),n=Math.min(e.byteLength,t.byteLength);for(let c=0;c<n;c++){const g=o.getUint8(c)-p.getUint8(c);if(g!==0)return g}return e.byteLength-t.byteLength}function ae(e,t){const o=e.proposer.tag.localeCompare(t.proposer.tag);return o!==0?o:oe(e.proposer.data,t.proposer.data)}function se(e,t){return e.transactions-t.transactions}function ne(e,t){return e.size-t.size}function ie(e,t){return e.time.valueOf()-t.time.valueOf()}function ce(e){switch(e){case a.proposer:return ae;case a.size:return ne;case a.time:return ie;case a.transactions:return se}return re}function le(e){const t=ce(e.sortColumn);switch(e.sortDir){case T.desc:return O(t)}return t}let m=null;function pe(){return m===null&&(m=me()),m}async function me(){const e=[];for await(const t of R())e.push({height:t.height,proposer:t.proposer,transactions:t.numTransactions,size:t.size,time:t.time});return e}const ue=e=>r(v.Provider,{...e,value:{async retrieve(t){const o=Array.from(await pe());return o.sort(le(t)),Array.from(W(q(o,t.page*t.resultsPerPage),t.resultsPerPage))}}});try{FakeBlocksSummaryDataSource.displayName="FakeBlocksSummaryDataSource",FakeBlocksSummaryDataSource.__docgenInfo={description:"",displayName:"FakeBlocksSummaryDataSource",props:{}}}catch{}const de=()=>r(_,{pathResolver:new F,children:r(ue,{children:r(d,{})})}),Je={title:"Pages/Blocks",component:de,parameters:{layout:"fullscreen"}},l={args:{}};var h,f,y;l.parameters={...l.parameters,docs:{...(h=l.parameters)==null?void 0:h.docs,source:{originalSource:`{
  args: {}
}`,...(y=(f=l.parameters)==null?void 0:f.docs)==null?void 0:y.source}}};const Ke=["Blocks"];export{l as Blocks,Ke as __namedExportsOrder,Je as default};
