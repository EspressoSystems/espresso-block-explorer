import{a as o,F as l,j as t}from"./jsx-runtime-5BUNAZ9W.js";import{P as A,O as E,H as F,a as R}from"./Header-efnDnTsH.js";import{W as g,C as I,H as L,P as W,g as j,S as z}from"./StoryBookPathResolver-8EOso1hl.js";import{F as U}from"./Footer-CrD2Tz-8.js";import{R as s}from"./index-4g5l5LRQ.js";import{T as M,c as O}from"./TaggedBase64-4sAxGbCE.js";import{P as V,S as q,C as $,a as G,b as J,D as K}from"./PromiseBuilder-Wx5BoySI.js";import{j as Q,h as X}from"./typography-fmBtJntk.js";import{T as c,P as Y}from"./TabledLabeledValue-HOywpDwW.js";import{L as Z}from"./Link-Cn5sJHnZ.js";import{B as ee}from"./ByteSizeText-Je_qPo_H.js";import{F as te}from"./FullHexText-2oYdKF9G.js";import{H as re}from"./HexText-rq0ubeAq.js";import{N as ae}from"./NumberText-vuBi4ZSJ.js";import{T as ne}from"./TaggedBase64Text-Q_YkSFSF.js";import{T as i}from"./Text-qj7igP2-.js";import{T as oe}from"./TimeText-GYuBLmF5.js";import{a as ie}from"./higher_order-VtSBvwoq.js";import{a as se,f as ce,e as le,g as de,c as me}from"./functional-Sf3DWwwq.js";import"./AnchorButton-nRlYYR1D.js";import"./Button-I3bbD5ni.js";import"./FlatIconAnchorButton-1U1EvmN5.js";import"./IconAnchorButton-HujeWbUs.js";import"./IconButton-7JNgBrhk.js";import"./LabeledAnchorButton-vxbK3n4D.js";import{L as pe}from"./LabeledButton-lVcWQ9Rx.js";import{R as ue}from"./RollUpSimple-tOS3HHQF.js";import"./Close-bhffxfNn.js";import"./SVGIconBase-1p394ezW.js";import"./ArrowRight-9gpb0-y0.js";import"./DiscordIcon-3IewVXYd.js";import"./EspressoLogo-WrwOKMPe.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./NumberFormattersProvider-olCp0Cc0.js";import"./DateTimeFormattersProvider-ojTofX-n.js";const he=Q("h2");try{Heading2.displayName="Heading2",Heading2.__docgenInfo={description:"",displayName:"Heading2",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}function fe(e){return Number(e).toString(16).padStart(6,"0")}function xe(e){return Number(e).toString(16).padStart(2,"0")}function*ge(e,r){yield e;for(let a=r.next();!a.done;a=r.next())yield a.value}const S=16;function*ye(e,r){yield fe(e),yield"  ";for(let a=0,n=r.next();a<S&&!n.done;a++,n=r.next())!(a&1)&&a!==0&&(yield" "),yield n.value}function*Te(e){let r=0;for(let a=e.next();!a.done;a=e.next()){const n=Array.from(ye(r,ge(a.value,e))).join("");r+=S,yield n}}function _e(e){const r=new Uint8Array(e),a=se(r,xe);return Array.from(Te(a)).join(`
`)}const u=({value:e,className:r,...a})=>o(l,{children:[t("pre",{...a,className:ie(r,"hex-dump"),children:t(i,{text:_e(e)})}),t("br",{}),t(pe,{onClick:()=>{const n=new Blob([e],{type:"application/octet-stream"});navigator.clipboard.write([new ClipboardItem({[n.type]:n})])},children:t(i,{text:"Copy"})})]});try{u.displayName="HexDump",u.__docgenInfo={description:"",displayName:"HexDump",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"ArrayBuffer"}}}}}catch{}const y=s.createContext(new ArrayBuffer(0)),w=g(I),be=X("label"),h=()=>{const e=s.useContext(y);return t(be,{children:t(te,{value:e})})},T=s.createContext({block:0,index:0,total:0,size:0,hash:new ArrayBuffer(0),time:new Date,sender:new M("ERR",new ArrayBuffer(0)),tree:[]}),N=s.createContext({async retrieve(){throw new Error("unimplemented")}}),ve=()=>{const e=s.useContext(T),r=s.useContext(A);return o(l,{children:[o(c,{children:[t(i,{text:"Block"}),t(Z,{href:r.block(e.block),children:t(ae,{number:e.block})})]}),o(c,{children:[t(i,{text:"Transaction index in block"}),t(i,{text:`index ${e.index} out of ${e.total} transactions`})]}),o(c,{children:[t(i,{text:"Transaction Size"}),t(ee,{bytes:e.size})]}),o(c,{children:[t(i,{text:"Espresso Sequencer Hash"}),t(re,{value:e.hash})]}),o(c,{children:[t(i,{text:"Time"}),t(oe,{date:e.time})]}),o(c,{children:[t(i,{text:"Sender"}),t(ne,{value:e.sender})]})]})},Ce=e=>{const r=s.useContext(K);return r?t(T.Provider,{value:r,children:e.children}):t(Y,{children:t(i,{text:"No Data Found"})})},De=e=>{const r=e.snapshot;return t(q,{loading:r.connectionState===$.waiting,children:t(G,{error:r.error,children:t(J,{data:r.data,children:t(Ne,{})})})})},f=()=>{const e=s.useContext(y),r=s.useContext(N);return t(V,{promise:r.retrieve(e),builder:De})},Se=g(he),we=()=>{const r=s.useContext(T).tree;return r.length<=0?null:o(l,{children:[t(Se,{children:t(i,{text:"Data"})}),r.map((a,n)=>t(w,{children:o(l,{children:[o(c,{children:[t(i,{text:"Rollup"}),t(l,{children:t(ue,{namespace:a.namespace})})]}),o(c,{children:[t(i,{text:"Transaction data"}),t(u,{value:a.data})]})]})},n))]})},Ne=()=>o(Ce,{children:[t(w,{children:t(ve,{})}),t(we,{})]});try{h.displayName="TransactionSubHeading",h.__docgenInfo={description:"",displayName:"TransactionSubHeading",props:{}}}catch{}try{f.displayName="TransactionDetailContent",f.__docgenInfo={description:"",displayName:"TransactionDetailContent",props:{}}}catch{}const He=g(W),x=()=>o(E,{pathname:"/transaction",children:[t(F,{}),o(He,{children:[t(L,{children:t(i,{text:"Transaction Details"})}),t(h,{})]}),t(f,{}),t(U,{})]});try{x.displayName="TransactionPage",x.__docgenInfo={description:"",displayName:"TransactionPage",props:{}}}catch{}let p=null;function Pe(){return p===null&&(p=Be()),p}async function Be(){const e=[];for await(const r of le(j(),a=>de(a.transactions,n=>Promise.resolve({block:n.block,index:n.index,total:a.numTransactions,size:n.size,hash:n.hash,time:n.time,sender:n.sender,tree:n.tree}))))e.push(r);return e}const ke=e=>t(N.Provider,{...e,value:{async retrieve(r){const a=await Pe(),n=ce(a,d=>me(d.hash,r)===0);if(!n)throw new Error("Not Found");return n}}});try{FakeTransactionDetailDataSource.displayName="FakeTransactionDetailDataSource",FakeTransactionDetailDataSource.__docgenInfo={description:"",displayName:"FakeTransactionDetailDataSource",props:{}}}catch{}function H(e){if(e.startsWith("0x"))return H(e.substring(2));if(e.length&1)throw new Error("Hex string invalid, not a multiple of 2");const r=new ArrayBuffer(e.length/2);return Ae(O(e),r),r}function Ae(e,r){const a=new DataView(r);let n=0;for(;n<r.byteLength;){const d=e.next(),_=e.next();if(d.done||_.done)throw new Error("hex encoding terminated early");const P=b(d.value),B=b(_.value),k=P<<4|B;a.setUint8(n,k),n++}}function b(e){if(e>=48&&e<=57)return e-48;if(e>=97&&e<=102)return e-97+10;if(e>=65&&e<=70)return e-65+10;throw new TypeError(`invalid hex value "${e}"`)}const Ee=e=>t(R,{pathResolver:new z,children:t(y.Provider,{value:H(e.hash),children:t(ke,{children:t(x,{})})})}),ft={title:"Pages/Transaction",component:Ee,parameters:{layout:"fullscreen"}},m={args:{hash:"0xdeadbeef"}};var v,C,D;m.parameters={...m.parameters,docs:{...(v=m.parameters)==null?void 0:v.docs,source:{originalSource:`{
  args: {
    hash: '0xdeadbeef'
  }
}`,...(D=(C=m.parameters)==null?void 0:C.docs)==null?void 0:D.source}}};const xt=["Transaction"];export{m as Transaction,xt as __namedExportsOrder,ft as default};
