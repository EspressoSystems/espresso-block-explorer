import{R as c,j as y}from"./iframe-3Z2fgCPY.js";import{b as i,a as r,A as p,P as b}from"./provide_async_states-1FCOnEtg.js";const I=o=>{const e=o.asyncIterable,l=o.next,[n,u]=c.useState({asyncIterable:e,inFlightPromise:null,state:i.waiting()}),t=n.state;return c.useEffect(()=>{let s=u;if(n.asyncIterable!==e){s({asyncIterable:e,inFlightPromise:null,state:i.waiting()});return}const m=e[Symbol.asyncIterator](),h=a=>{if(a.done){s({asyncIterable:e,inFlightPromise:null,state:i.withData(r.done,t.data)});return}s({asyncIterable:e,inFlightPromise:null,state:i.withData(r.active,a.value)})},d=a=>{s({asyncIterable:e,inFlightPromise:null,state:i.withError(r.done,a)})};if(n.inFlightPromise!==null){n.inFlightPromise.then(h,d);return}if(t.asyncState!==r.done){if(t.asyncState===r.waiting||t.asyncState===r.active){const a=m.next(l);s({asyncIterable:e,inFlightPromise:a,state:t})}return()=>{s=()=>{}}}},[e,t,t.asyncState,t.data,n.inFlightPromise,n.asyncIterable,l]),y.jsx(p.Provider,{value:t,children:y.jsx(b,{children:o.children})})};try{asynciterableresolver.displayName="asynciterableresolver",asynciterableresolver.__docgenInfo={description:`AsyncIterableResolver is a component that resolves an AsyncIterable into a series of AsyncSnapshots.
This component is useful for consuming an AsyncIterable in a React component.`,displayName:"asynciterableresolver",props:{asyncIterable:{defaultValue:null,description:"",name:"asyncIterable",required:!0,type:{name:"AsyncIterable<unknown>"}},next:{defaultValue:null,description:"",name:"next",required:!1,type:{name:"any"}}}}}catch{}export{I as A};
