import{c as h}from"./assert-B20_bgky.js";import{B,d as m,r as b,T as g,a as x,b as M,c as P,s as T,A as O,k as $,l as V}from"./string-DO2hqbbz.js";import{b as N}from"./bigint-Rw5otYDY.js";const C="InvalidInputError";class d extends B{constructor(e="invalid input"){super(e),Object.freeze(this),m()}get code(){return C}}class X{convert(e){return M(e,"code","message"),P(e,C),new d(T.decode(e.message))}}class k extends x{}class A extends g{encoder=new k;decoder=new X}const J=new A;b(C,J);class i{constructor(e,r,t){this.alpha3Code=e,this.code=r,this.significantDigits=t,this.alpha3Code=e,this.code=r,this.significantDigits=t,this.significantDigitsMultiplier=BigInt(10)**BigInt(this.significantDigits)}significantDigitsMultiplier;toJSON(){return f.encode(this)}}const I=new i("JPY",392,0),L=new i("GBP",826,2),y=new i("USD",840,2),U=new i("EUR",978,2),H=new i("XXX",999,2),E=new i("ETH",1001,18),w=new i("XBT",1002,8),v=new i("ESP",10001,18),R=[I,L,y,U,H,E,w,v],Y=new Map(R.map(n=>[n.alpha3Code,n]));class G{convert(e){if(typeof e!="string")throw new d("CurrencyCodeDecoder: expected string");if(e==="BTC")return w;const r=Y.get(e);if(r===void 0)throw new d(`CurrencyCodeDecoder: unknown currency: "${e}"`);return r}}class j{convert(e){return h(e,i),e.alpha3Code}}class z extends g{decoder=new G;encoder=new j}const f=new z;class c{constructor(e,r){this.currency=e,this.value=r,this.currency=e,this.value=r}static USD(e){return new c(y,BigInt(e))}static ETH(e){return new c(E,BigInt(e))}static ESP(e){return new c(v,BigInt(e))}static JPY(e){return new c(I,BigInt(e))}static BTC(e){return new c(w,BigInt(e))}toString(){return l.encode(this)}toISOString(){return this.toString()}toNumericLiteralString(){return D.convert(this)}toHexString(){return N.encode(this.value)}toJSON(){return l.encode(this)}}function K(n){return n==="."||n===","||n===" "}function W(n,e){let r=-1;const t=n.length;for(let s=0;s<t;s++)e(n[s])&&(r=s);return r}class q{parseCurrencyCode(e){return f.decode(e)}parseValue(e,r){let t=1n;r[0]==="-"&&(t=-1n,r=r.substring(1));const s=W(r,K);if(s===-1){const S=BigInt(r.replace(/\D/g,""))*e.significantDigitsMultiplier;return t*S}const o=r.substring(0,s).replace(/\D/g,""),a=r.substring(s+1).replace(/\D/g,""),u=BigInt(o)*e.significantDigitsMultiplier,p=BigInt(a)*10n**BigInt(e.significantDigits-a.length);return t*(u+p)}convert(e){if(typeof e!="string")throw new d("MonetaryValueDecoder: expected string");const r=e.indexOf(" ");if(r<=-1)throw new d("MonetaryValueDecoder: missing non-breaking space");const t=e.substring(0,r),s=e.substring(r+1);if(/^-?[\d .,]+$/.test(t)){const a=this.parseCurrencyCode(s);return new c(a,this.parseValue(a,t))}const o=this.parseCurrencyCode(t);return new c(o,this.parseValue(o,s))}}class F{convert(e){const r=e.value<0n?"-":"",t=e.value<0n?-e.value:e.value,s=t%e.currency.significantDigitsMultiplier,o=t/e.currency.significantDigitsMultiplier,a=String(o),u=String(s);return/^0+$/.test(u)?`${r}${a}`:`${r}${o}.${String(s).padStart(e.currency.significantDigits,"0")}`}}const D=new F;class Q{convert(e){h(e,c);const r=D.convert(e);return`${f.encode(e.currency)} ${r}`}}class Z extends g{decoder=new q;encoder=new Q}const l=new Z,ne=new O(new $(l),new V(l));export{v as E,d as I,c as M,f as c,ne as m};
