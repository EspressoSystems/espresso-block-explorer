import{R as c,j as u}from"./iframe-BYhJ0elB.js";import{b as i,a as r,A as f,P as I}from"./ProvideAsyncStates-DlCTiFcb.js";const y=o=>{const e=o.asyncIterable,l=o.next,[n,m]=c.useState({asyncIterable:e,inFlightPromise:null,state:i.waiting()}),t=n.state;return c.useEffect(()=>{let s=m;if(n.asyncIterable!==e){s({asyncIterable:e,inFlightPromise:null,state:i.waiting()});return}const h=e[Symbol.asyncIterator](),d=a=>{if(a.done){s({asyncIterable:e,inFlightPromise:null,state:i.withData(r.done,t.data)});return}s({asyncIterable:e,inFlightPromise:null,state:i.withData(r.active,a.value)})},p=a=>{s({asyncIterable:e,inFlightPromise:null,state:i.withError(r.done,a)})};if(n.inFlightPromise!==null){n.inFlightPromise.then(d,p);return}if(t.asyncState!==r.done){if(t.asyncState===r.waiting||t.asyncState===r.active){const a=h.next(l);s({asyncIterable:e,inFlightPromise:a,state:t})}return()=>{s=()=>{}}}},[e,t,t.asyncState,t.data,n.inFlightPromise,n.asyncIterable,l]),u.jsx(f.Provider,{value:t,children:u.jsx(I,{children:o.children})})};try{y.displayName="AsyncIterableResolver",y.__docgenInfo={description:`AsyncIterableResolver is a component that resolves an AsyncIterable into a series of AsyncSnapshots.
This component is useful for consuming an AsyncIterable in a React component.`,displayName:"AsyncIterableResolver",props:{asyncIterable:{defaultValue:null,description:"",name:"asyncIterable",required:!0,type:{name:"AsyncIterable<unknown>"}},next:{defaultValue:null,description:"",name:"next",required:!1,type:{name:"any"}}}}}catch{}export{y as A};
