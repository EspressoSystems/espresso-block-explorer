import{R as er,j as Wt}from"./iframe-DhalQE6g.js";import{U as f}from"./UnimplementedError-BEJrC_RV.js";import{h as B,u as Ro,b as G,s as Bo}from"./array_buffer-Dp0JAU74.js";import{n as Gt}from"./url-C1KMHJ_r.js";import{T as i,e as d,b as a,N as To,s as h,f as Ao,g as Do,A,l as D,m as P,C as b,h as zt,q as Mt,I as H,k as rr,t as v,v as Ht,w as S,x as k,d as Ee,B as O,r as I,c as _,a as xe,u as Po,y as Se,j as Lt}from"./string-B8Rshh3e.js";import{M as Jt}from"./MissingElementError-C0Z4QoIY.js";import{n as s,b as N,d as W}from"./base64-BLHA4cZM.js";import{I as z,m as Oo}from"./monetary_value-EEH_Vydd.js";import{t as l,T as x}from"./TaggedBase64-BTy5Cvep.js";import{m as Qt}from"./functional-CqKsH-G6.js";import{g as E}from"./generateFakeData-BI0Gp2aL.js";import{f as Ce,e as Z,g as Ut,h as we,t as fe,i as No,j as re,k as qo,r as Fo,l as U,n as jt,m as F,o as ee,p as Vt,q as ze,s as $t,v as vo,w as Me,x as He,y as Yt}from"./LoadingProvider-plSsL9kW.js";import"./FetchError-CEWPZz5z.js";import{N as Kt}from"./NotFoundError-BUbztAVW.js";class or{r;s;v;constructor(e,o,t){this.r=e,this.s=o,this.v=t}toJSON(){return tr.encode(this)}}class Xt{convert(e){return a(e,"r","s","v"),new or(B.decode(e.r),B.decode(e.s),s.decode(e.v))}}class Zt{convert(e){return d(e,or),{r:B.encode(e.r),s:B.encode(e.s),v:s.encode(e.v)}}}class es extends i{encoder=new Zt;decoder=new Xt}const tr=new es;class sr{account;amount;constructor(e,o){this.account=e,this.amount=o}toJSON(){return cr.encode(this)}}class rs{convert(e){return a(e,"account","amount"),new sr(B.decode(e.account),B.decode(e.amount))}}class os{convert(e){return d(e,sr),{account:B.encode(e.account),amount:B.encode(e.amount)}}}class ts extends i{encoder=new os;decoder=new rs}const cr=new ts;class nr{number;timestamp;hash;constructor(e,o,t){this.number=e,this.timestamp=o,this.hash=t}toJSON(){return Qe.encode(this)}}class ss{convert(e){return a(e,"number","timestamp","hash"),new nr(s.decode(e.number),h.decode(e.timestamp),h.decode(e.hash))}}class cs{convert(e){return d(e,nr),{number:s.encode(e.number),timestamp:h.encode(e.timestamp),hash:h.encode(e.hash)}}}class ns extends i{encoder=new cs;decoder=new ss}const Qe=new ns,Wo=new To(new Ao(Qe),new Do(Qe));class ar{bytes;constructor(e){this.bytes=e}toJSON(){return dr.encode(this)}}class as{convert(e){return a(e,"bytes"),new ar(Ro.decode(e.bytes))}}class ds{convert(e){return d(e,ar),{bytes:Ro.encode(e.bytes)}}}class is extends i{encoder=new ds;decoder=new as}const dr=new is;class ir{height;timestamp;l1_head;l1_finalized;payload_commitment;ns_table;block_merkle_root;fee_merkle_root;builder_signature;fee_info;constructor(e,o,t,n,c,u,p,w,C,g){this.height=e,this.timestamp=o,this.l1_head=t,this.l1_finalized=n,this.payload_commitment=c,this.ns_table=u,this.block_merkle_root=p,this.fee_merkle_root=w,this.builder_signature=C,this.fee_info=g}toJSON(){return q.encode(this)}}class ls{convert(e){return a(e,"height","timestamp","l1_head","l1_finalized","payload_commitment","ns_table","block_merkle_root","fee_merkle_root","builder_signature","fee_info"),new ir(s.decode(e.height),s.decode(e.timestamp),s.decode(e.l1_head),Wo.decode(e.l1_finalized),N.decode(e.payload_commitment),dr.decode(e.ns_table),l.decode(e.block_merkle_root),l.decode(e.fee_merkle_root),tr.decode(e.builder_signature),cr.decode(e.fee_info))}}class us{convert(e){return d(e,ir),{height:s.encode(e.height),timestamp:s.encode(e.timestamp),l1_head:s.encode(e.l1_head),l1_finalized:Wo.encode(e.l1_finalized),payload_commitment:N.encode(e.payload_commitment),ns_table:dr.encode(e.ns_table),block_merkle_root:l.encode(e.block_merkle_root),fee_merkle_root:l.encode(e.fee_merkle_root),builder_signature:tr.encode(e.builder_signature),fee_info:cr.encode(e.fee_info)}}}class hs extends i{encoder=new us;decoder=new ls}const q=new hs;class ce{vm;payload;constructor(e,o){this.vm=e,this.payload=o}toJSON(){return L.encode(this)}}class ps{convert(e){return a(e,"vm","payload"),new ce(s.decode(e.vm),N.decode(e.payload))}}class ms{convert(e){return d(e,ce),{vm:s.encode(e.vm),payload:N.encode(e.payload)}}}class ws extends i{encoder=new ms;decoder=new ps}const L=new ws,Go=new A(new D(L),new P(L));class lr{transaction_nmt;constructor(e){this.transaction_nmt=e}toJSON(){return ne.encode(this)}}class fs{convert(e){return a(e,"transaction_nmt"),new lr(Go.decode(e.transaction_nmt))}}class Cs{convert(e){return d(e,lr),{transaction_nmt:Go.encode(e.transaction_nmt)}}}class bs extends i{encoder=new Cs;decoder=new fs}const ne=new bs;class ur{header;payload;hash;size;numTransactions;constructor(e,o,t,n,c){this.header=e,this.payload=o,this.hash=t,this.size=n,this.numTransactions=c}toJSON(){return zo.encode(this)}}class gs{convert(e){return a(e,"header","payload","hash","size","num_transactions"),new ur(q.decode(e.header),ne.decode(e.payload),l.decode(e.hash),s.decode(e.size),s.decode(e.num_transactions))}}class ys{convert(e){return d(e,ur),{header:q.encode(e.header),payload:ne.encode(e.payload),hash:l.encode(e.hash),size:s.encode(e.size),num_transactions:s.encode(e.numTransactions)}}}class vs extends b{encoder=new ys;decoder=new gs}const zo=new vs;class hr{header;hash;size;num_transactions;proposer_id;constructor(e,o,t,n,c){this.header=e,this.hash=o,this.size=t,this.num_transactions=n,this.proposer_id=c}toJSON(){return Ue.encode(this)}}class Es{convert(e){return a(e,"header","hash","size","num_transactions","proposer_id"),new hr(q.decode(e.header),l.decode(e.hash),s.decode(e.size),s.decode(e.num_transactions),G.decode(e.proposer_id))}}class xs{convert(e){return d(e,hr),{header:q.encode(e.header),hash:l.encode(e.hash),size:s.encode(e.size),num_transactions:s.encode(e.num_transactions),proposer_id:G.encode(e.proposer_id)}}}class Ss extends i{encoder=new xs;decoder=new Es}const Ue=new Ss,ks=new A(new D(Ue),new P(Ue));class pr{hash;header;offset;transaction;constructor(e,o,t,n){this.hash=e,this.header=o,this.offset=t,this.transaction=n}toJSON(){return je.encode(this)}}class Is{convert(e){return a(e,"hash","header","offset","transaction"),new pr(l.decode(e.hash),q.decode(e.header),s.decode(e.offset),L.decode(e.transaction))}}class _s{convert(e){return d(e,pr),{hash:l.encode(e.hash),header:q.encode(e.header),offset:s.encode(e.offset),transaction:L.encode(e.transaction)}}}class Rs extends i{encoder=new _s;decoder=new Is}const je=new Rs,Eo=new A(new D(je),new P(je));class Bs{convert(e){if(!Mt(e))throw new H(typeof e,"boolean");return e}}class Ts{convert(e){return zt(e,"boolean"),e}}class As extends i{encoder=new Ts;decoder=new Bs}const ae=new As;class be{leaf_commit;constructor(e){this.leaf_commit=e}toJSON(){return mr.encode(this)}}class Ds{convert(e){return a(e,"leaf_commit"),new be(l.decode(e.leaf_commit))}}class Ps{convert(e){return d(e,be),{leaf_commit:l.encode(e.leaf_commit)}}}class Os extends i{encoder=new Ps;decoder=new Ds}const mr=new Os;class Ns{convert(e){if(!rr(e))throw new H(typeof e,"string");const o=new Date(e);if(Number.isNaN(o.valueOf()))throw new H("NaN","number");return o}}class qs{convert(e){return d(e,Date),e.toISOString()}}class Fs extends i{encoder=new qs;decoder=new Ns}const M=new Fs;class Mo{width;index;constructor(e,o){this.width=e,this.index=o}toJSON(){return wr.encode(this)}}class Ws{convert(e){return a(e,"width","index"),new Mo(s.decode(e.width),s.decode(e.index))}}class Gs{convert(e){return d(e,Mo),{width:s.encode(e.width),index:s.encode(e.index)}}}class zs extends i{encoder=new Gs;decoder=new Ws}const wr=new zs;class te{static get lsb0(){return Hs}static get msb0(){return Js}valueOf(){return this.toString()}toJSON(){return this.toString()}}const Ho="bitvec::order::Lsb0",Lo="bitvec::order::Msb0";class Ms extends te{toString(){return Ho}}const Hs=new Ms;class Ls extends te{toString(){return Lo}}const Js=new Ls;class Qs{convert(e){if(typeof e!="string")throw new H(typeof e,"string");switch(e){case Ho:return te.lsb0;case Lo:return te.msb0;default:throw new H(e,"CappuccinoAPIBitVecOrder")}}}class Us{convert(e){return e.toString()}}class js extends i{encoder=new Us;decoder=new Qs}const Jo=new js;class Qo{order;head;bits;data;constructor(e,o,t,n){this.order=e,this.head=o,this.bits=t,this.data=n}getBitVecIndexIterable(){return this.order===te.lsb0?new Zs(this.head.width,this.bits):new rc(this.head.width,this.bits)}[Symbol.iterator](){const e=this.getBitVecIndexIterable();return Qt(e,o=>Ks(this.data,o))[Symbol.iterator]()}toJSON(){return se.encode(this)}}class Vs{convert(e){return a(e,"order","head","bits","data"),new Qo(Jo.decode(e.order),wr.decode(e.head),s.decode(e.bits),N.decode(e.data))}}class $s{convert(e){return d(e,Qo),{order:Jo.encode(e.order),head:wr.encode(e.head),bits:s.encode(e.bits),data:N.encode(e.data)}}}class Ys extends i{encoder=new $s;decoder=new Vs}const se=new Ys,wi=new A(new D(se),new P(se));function Ks(r,e){return(r[e.bucket]>>e.bitOffset&1)===1}class Uo{bucket;bitOffset;constructor(e,o){this.bucket=e,this.bitOffset=o}}function jo(r){switch(v(r===8||r===16||r===32,"bit width should be a power of two that is supported"),r){case 8:return 3;case 16:return 4;case 32:return 5;default:throw new f}}class Xs{totalBits;bitWidthMask;bitWidthShift;offset=0;constructor(e,o){this.totalBits=o;const t=jo(e);this.bitWidthMask=e-1,this.bitWidthShift=t}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,o=this.offset&this.bitWidthMask;return this.offset+=1,{done:!1,value:new Uo(e,o)}}}class Zs{bitWidth;totalBits;constructor(e,o){this.bitWidth=e,this.totalBits=o}[Symbol.iterator](){return new Xs(this.bitWidth,this.totalBits)}}class ec{bitWidth;totalBits;bitWidthMask;bitWidthShift;offset=0;constructor(e,o){this.bitWidth=e,this.totalBits=o;const t=jo(e);this.bitWidthMask=e-1,this.bitWidthShift=t}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,o=this.bitWidth-1-(this.offset&this.bitWidthMask);return this.offset+=1,{done:!1,value:new Uo(e,o)}}}class rc{bitWidth;totalBits;constructor(e,o){this.bitWidth=e,this.totalBits=o}[Symbol.iterator](){return new ec(this.bitWidth,this.totalBits)}}class Vo{signature;bitvec;constructor(e,o){this.signature=e,this.bitvec=o}toJSON(){return Ve.encode(this)}}class oc{convert(e){if(!Ht(e)||e.length!==2)throw new H(typeof e,"Array");return new Vo(l.decode(e[0]),se.decode(e[1]))}}class tc{convert(e){return d(e,Vo),[l.encode(e.signature),se.encode(e.bitvec)]}}class sc extends i{encoder=new tc;decoder=new oc}const Ve=new sc,$o=new To(new Ao(Ve),new Do(Ve));class ge{data;vote_commitment;view_number;signatures;is_genesis;_pd;constructor(e,o,t,n,c,u){this.data=e,this.vote_commitment=o,this.view_number=t,this.signatures=n,this.is_genesis=c,this._pd=u}toJSON(){return de.encode(this)}}class cc{convert(e){return a(e,"data","vote_commitment","view_number","signatures","is_genesis","_pd"),new ge(mr.decode(e.data),l.decode(e.vote_commitment),s.decode(e.view_number),$o.decode(e.signatures),ae.decode(e.is_genesis),null)}}class nc{convert(e){return d(e,ge),{data:mr.encode(e.data),vote_commitment:l.encode(e.vote_commitment),view_number:s.encode(e.view_number),signatures:$o.encode(e.signatures),is_genesis:ae.encode(e.is_genesis),_pd:null}}}class ac extends i{encoder=new nc;decoder=new cc}const de=new ac;class fr{view_number;justify_qc;parent_commitment;block_header;block_payload;rejected;timestamp;proposer_id;constructor(e,o,t,n,c,u,p,w){this.view_number=e,this.justify_qc=o,this.parent_commitment=t,this.block_header=n,this.block_payload=c,this.rejected=u,this.timestamp=p,this.proposer_id=w}toJSON(){return Cr.encode(this)}}class dc{convert(e){return a(e,"view_number","justify_qc","parent_commitment","block_header","block_payload","rejected","timestamp","proposer_id"),new fr(s.decode(e.view_number),de.decode(e.justify_qc),l.decode(e.parent_commitment),q.decode(e.block_header),ne.decode(e.block_payload),N.decode(e.rejected),s.decode(e.timestamp),B.decode(e.proposer_id))}}class ic{convert(e){return d(e,fr),{view_number:s.encode(e.view_number),justify_qc:de.encode(e.justify_qc),parent_commitment:l.encode(e.parent_commitment),block_header:q.encode(e.block_header),block_payload:ne.encode(e.block_payload),rejected:N.encode(e.rejected),timestamp:s.encode(e.timestamp),proposer_id:B.encode(e.proposer_id)}}}class lc extends i{encoder=new ic;decoder=new dc}const Cr=new lc;class br{leaf;qc;constructor(e,o){this.leaf=e,this.qc=o}toJSON(){return Yo.encode(this)}}class uc{convert(e){return a(e,"leaf","qc"),new br(Cr.decode(e.leaf),de.decode(e.qc))}}class hc{convert(e){return d(e,br),{leaf:Cr.encode(e.leaf),qc:de.encode(e.qc)}}}class pc extends i{encoder=new hc;decoder=new uc}const Yo=new pc;class ie{}class gr extends ie{toJSON(){return yr.encode(this)}}class mc{convert(e){if(!rr(e)||e!=="Empty")throw new z;return new gr}}class wc{convert(e){return d(e,gr),"Empty"}}class fc extends i{encoder=new wc;decoder=new mc}const yr=new fc;class vr extends ie{value;pos;elem;constructor(e,o,t){super(),this.value=e,this.pos=o,this.elem=t}toJSON(){return Er.encode(this)}}class Cc{convert(e){a(e,"Leaf");const o=e.Leaf;return a(o,"value","pos","elem"),new vr(l.decode(o.value),l.decode(o.pos),l.decode(o.elem))}}class bc{convert(e){return d(e,vr),{Leaf:{value:l.encode(e.value),pos:l.encode(e.pos),elem:l.encode(e.elem)}}}}class gc extends b{encoder=new bc;decoder=new Cc}const Er=new gc;class xr extends ie{value;constructor(e){super(),this.value=e}toJSON(){return Sr.encode(this)}}class yc{convert(e){a(e,"ForgettenSubtree");const o=e.ForgettenSubtree;return a(o,"value"),new xr(l.decode(o.value))}}class vc{convert(e){return d(e,xr),{ForgettenSubtree:{value:l.encode(e.value)}}}}class Ec extends b{encoder=new vc;decoder=new yc}const Sr=new Ec;class ke extends ie{value;children;constructor(e,o){super(),this.value=e,this.children=o}toJSON(){return kr.encode(this)}}class xc{convert(e){a(e,"Branch");const o=e.Branch;return a(o,"value","children"),new ke(l.decode(o.value),Ie.decode(o.children))}}class Sc{convert(e){return d(e,ke),{Branch:{value:l.encode(e.value),children:Ie.encode(e.children)}}}}class kc extends i{encoder=new Sc;decoder=new xc}const kr=new kc;class Ic{convert(e){if(S(e,"Leaf",k))return Er.decoder.convert(e);if(S(e,"Branch",k))return kr.decoder.convert(e);if(S(e,"ForgettenSubtree",k))return Sr.decoder.convert(e);if(rr(e))return yr.decoder.convert(e);throw new z}}class _c{convert(e){if(d(e,ie),e instanceof vr)return Er.encode(e);if(e instanceof ke)return kr.encode(e);if(e instanceof xr)return Sr.encode(e);if(e instanceof gr)return yr.encode(e);throw new z}}class Rc extends i{encoder=new _c;decoder=new Ic}const xo=new Rc,Ie=new A(new D(xo),new P(xo));class Ir{pos;proof;constructor(e,o){this.pos=e,this.proof=o}toJSON(){return _r.encode(this)}}class Bc{convert(e){return a(e,"pos","proof"),new Ir(l.decode(e.pos),Ie.decode(e.proof))}}class Tc{convert(e){return d(e,Ir),{pos:l.encode(e.pos),proof:Ie.encode(e.proof)}}}class Ac extends i{encoder=new Tc;decoder=new Bc}const _r=new Ac;class Rr{transaction;block_hash;proof;height;hash;constructor(e,o,t,n,c){this.transaction=e,this.block_hash=o,this.proof=t,this.height=n,this.hash=c}toJSON(){return Ko.encode(this)}}class Dc{convert(e){return a(e,"transaction","block_hash","proof","height","hash"),new Rr(L.decoder.convert(e.transaction),l.decode(e.block_hash),_r.decoder.convert(e.proof),s.decode(e.height),l.decode(e.hash))}}class Pc{convert(e){return d(e,Rr),{transaction:L.encode(e.transaction),block_hash:l.encode(e.block_hash),proof:_r.encode(e.proof),height:s.encode(e.height),hash:l.encode(e.hash)}}}class Oc extends i{encoder=new Pc;decoder=new Dc}const Ko=new Oc;function _e(r){return new ir(r.height,r.time.valueOf()/1e3,0,new nr(0,"00","00"),[],new ar(new ArrayBuffer(0)),new x("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new x("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new or(new ArrayBuffer(0),new ArrayBuffer(0),0),new sr(new ArrayBuffer(0),new ArrayBuffer(0)))}async function Nc(r){return new ur(_e(r),new lr(await re(F(r.transactions,async e=>new ce(e.tree.namespace,Array.from(new Uint8Array(e.tree.data)))))),new x("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions)}function qc(r){return new hr(_e(r),new x("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions,r.proposer)}function Fc(r){const e=r.transactions,o=_e(r);return F(e,async t=>new pr(t.hash,o,t.index,new ce(t.tree.namespace,Array.from(new Uint8Array(t.tree.data)))))}async function*Wc(r){const e=_e(r),o=r.transactions;yield*F(o,async t=>new Rr(new ce(t.tree.namespace,Array.from(new Uint8Array(t.tree.data))),new x("BLOCK",new Uint8Array([0,0,0,0]).buffer),new Ir(new x("POS",new Uint8Array([0,0,0,0]).buffer),[new ke(new x("EMPTY",new Uint8Array([0,0,0,0]).buffer),[])]),e.height,new x("COMMIT",t.tree.data.slice(0,32))))}class Gc{async getLeafFromHeight(e){const o=await this.getBlockFromHeight(e);return new br(new fr(e,new ge(new be(new x("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new x("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null),new x("LEAF",new Uint8Array([0,0,0,0]).buffer),o.header,o.payload,[],o.header.timestamp,o.header.fee_info.account),new ge(new be(new x("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new x("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null))}async getTransactionFromHeightAndOffset(e,o){const t=await Ce(Z(E(),e)),n=Wc(t);return await Ut(we(n,o))}async getBlockSummaries(e,o){const t=Z(E(),e),n=fe(t,o-e),c=No(n,async u=>qc(u));return await re(c)}async getBlockFromHeight(e){const o=Z(E(),e),t=await Ce(o);return Nc(t)}async*streamTransactionSummaries(e){const o=qo(E(),c=>c.height<=e),t=Fo(o);yield*U(t,c=>ee(Fc(c)))}async getTransactionSummaryRange(e,o,t){const n=this.streamTransactionSummaries(e),c=Z(n,o),u=fe(c,t);return await re(u)}async getTransactionSummaryRangeForRollup(e,o,t,n){const c=this.streamTransactionSummaries(o),u=jt(c,C=>C.transaction.vm===e),p=Z(u,t),w=fe(p,n);return await re(w)}}class le extends O{response;status;constructor(e,o,t){super(t),this.status=e,this.response=o}toJSON(){return Xo.convert(this)}}class Re{convert(e){return d(e,le),{...Ee.convert(e),status:e.status}}}const Xo=new Re,Br="BadResponseClientError";class zc extends le{constructor(e,o,t="bad server response: client error"){super(e,o,t),Object.freeze(this)}get code(){return Br}toJSON(){return Zo.encode(this)}}class Mc{convert(e){return a(e,"code","message","status"),_(e,Br),new zc(Number(e.status),null,h.decode(e.message))}}class Hc extends Re{}class Lc extends i{encoder=new Hc;decoder=new Mc}const Zo=new Lc;I(Br,Zo);const Tr="BadResponseError";class Jc extends le{constructor(e,o,t="bad server response"){super(e,o,t),Object.freeze(this)}get code(){return Tr}toJSON(){return et.encode(this)}}class Qc{convert(e){return a(e,"code","message","status"),_(e,Tr),new Jc(Number(e.status),null,h.decode(e.message))}}class Uc extends Re{}class jc extends i{encoder=new Uc;decoder=new Qc}const et=new jc;I(Tr,et);class Vc extends le{constructor(e,o,t="bad server response: server error"){super(e,o,t),Object.freeze(this)}get code(){return Ar}}const Ar="BadResponseServerError";class $c{convert(e){return a(e,"code","message","status"),_(e,Ar),new Vc(Number(e.status),null,h.decode(e.message))}}class Yc extends Re{}class Kc extends i{encoder=new Yc;decoder=new $c}const Xc=new Kc;I(Ar,Xc);const Dr="ChannelClosedError";class Zc extends O{constructor(e="channel closed"){super(e),Object.freeze(this)}get code(){return Dr}}class en{convert(e){return a(e,"code","message"),_(e,Dr),new Zc(h.decode(e.message))}}class rn extends xe{}class on extends i{encoder=new rn;decoder=new en}const tn=new on;I(Dr,tn);class Pr extends O{constructor(e="completer has already been completed"){super(e),Object.freeze(this)}get code(){return rt}}const rt="CompleterAlreadyCompletedError";class sn{convert(e){return a(e,"code","message"),_(e,rt),new Pr(h.decode(e.message))}}class cn extends xe{}class nn extends i{encoder=new cn;decoder=new sn}const an=new nn;I(Pr.name,an);const Or="InvalidStringValueError";class ot extends O{have;want;constructor(e,o,t=`invalid string value: have "${e}", want "${o}"`){super(t),this.have=e,this.want=o,Object.freeze(this)}toJSON(){return tt.encode(this)}get code(){return Or}}class dn{convert(e){return a(e,"code","have","want","message"),_(e,Or),new ot(h.decode(e.have),h.decode(e.want),h.decode(e.message))}}class ln{convert(e){return d(e,ot),{...Ee.convert(e),have:h.encode(e.have),want:h.encode(e.want)}}}class un extends i{encoder=new ln;decoder=new dn}const tt=new un;I(Or,tt);const Nr="NoCompleterFoundForRequestID";class ye extends O{requestID;constructor(e,o=`no completer found for request id "${e}"`){super(o),this.requestID=e,Object.freeze(this)}toJSON(){return st.encode(this)}get code(){return Nr}}class hn{convert(e){return a(e,"code","requestID","message"),_(e,Nr),new ye(Po.decode(e.requestID),h.decode(e.message))}}class pn{convert(e){return d(e,ye),{...Ee.convert(e),requestID:Po.encode(e.requestID)}}}class mn extends i{encoder=new pn;decoder=new hn}const st=new mn;I(Nr,st);const qr="NoURLProvidedError";class wn extends O{constructor(e="no url provided"){super(e),Object.freeze(this)}get code(){return qr}}class fn{convert(e){return a(e,"code","message"),_(e,qr),new wn(h.decode(e.message))}}class Cn extends xe{}class bn extends i{encoder=new Cn;decoder=new fn}const gn=new bn;I(qr,gn);const Fr="QUERY_ERROR";class yn extends O{error;constructor(e,o="missing element"){super(o),this.error=e,Object.freeze(this)}get code(){return Fr}}class vn{convert(e){return a(e,"code","error","message"),_(e,Fr),new yn(dt.decode(e.error),h.decode(e.message))}}class En{convert(e){return{code:e.code,error:dt.encode(e.error),message:h.encode(e.message)}}}class xn extends i{encoder=new En;decoder=new vn}const Sn=new xn;class Wr{}const Gr="NotFound";class ct extends Wr{constructor(){super(),Object.freeze(this)}valueOf(){return Gr}toJSON(){return this.valueOf()}}const kn=new ct,zr="Missing";class nt extends Wr{constructor(){super(),Object.freeze(this)}valueOf(){return zr}toJSON(){return this.valueOf()}}const In=new nt;class at extends Wr{error;constructor(e){super(),this.error=e,Object.freeze(this)}toJSON(){return Hr.encode(this)}}class _n{message;constructor(e){this.message=e,Object.freeze(this)}toJSON(){return Mr.encode(this)}}class Rn{convert(e){return a(e,"message"),new _n(h.decode(e.message))}}class Bn{convert(e){return{message:h.encode(e.message)}}}class Tn extends i{encoder=new Bn;decoder=new Rn}const Mr=new Tn;class An{convert(e){return a(e,"Error"),new at(Mr.decode(e.Error))}}class Dn{convert(e){return{Error:Mr.encode(e.error)}}}class Pn extends i{encoder=new Dn;decoder=new An}const Hr=new Pn;class On{convert(e){return e===Gr?kn:e===zr?In:Hr.decode(e)}}class Nn{convert(e){if(e instanceof ct)return Gr;if(e instanceof nt)return zr;if(e instanceof at)return Hr.encode(e);throw new f}}class qn extends i{encoder=new Nn;decoder=new On}const dt=new qn;I(Fr,Sn);const it="ResponseContentTypeIsNotApplicationJSONError";class Be extends le{haveHeaderType;constructor(e,o,t,n="response content type is not application/json"){super(o,t,n),this.haveHeaderType=e,Object.freeze(this)}static fromResponse(e,o){return new Be(e.headers.get("content-type")??"undefined",e.status,e,o)}toJSON(){return lt.encode(this)}get code(){return it}}class Fn{convert(e){return a(e,"code","status","have","want","message"),_(e,it),new Be(h.decode(e.code),s.decode(e.status),null,h.decode(e.message))}}class Wn{convert(e){return{...Xo.convert(e),have:h.encode(e.haveHeaderType),want:h.encode("application/json")}}}class Gn extends i{encoder=new Wn;decoder=new Fn}const lt=new Gn;I(Be.name,lt);const Lr="WebWorkerErrorResponse";class ut extends O{error;constructor(e,o="error in web worker"){super(o),this.error=e,Object.freeze(this)}toJSON(){return ht.encode(this)}get code(){return Lr}}class zn{convert(e){return a(e,"code","error","message"),_(e,Lr),new ut(Se.decode(e.error),h.decode(e.message))}}class Mn{convert(e){return{...Ee.convert(e),error:Se.encode(e.error)}}}class Hn extends i{encoder=new Mn;decoder=new zn}const ht=new Hn;I(Lr,ht);var pt=(r=>(r[r.success=0]="success",r[r.full=1]="full",r[r.failed=2]="failed",r))(pt||{});class Ln{getFromEmpty(){}}class Jn{getFromEmpty(){throw new Jt}}const Qn={returnUndefined:new Ln,throwMissingElement:new Jn};class Un{maxSize;constructor(e){v(!Number.isNaN(e),"maxSize must not be NaN"),v(Number.isInteger(e),"maxSize must be an integer"),v(e>0,"maxSize must be greater than 0"),this.maxSize=e}nextIndex(e){return v(e>=0,"index must be greater than or equal to 0"),(e+1)%this.maxSize}}class jn{preComputedSizeMinus1;constructor(e){v(!Number.isNaN(e),"maxSize must not be NaN"),v(Number.isInteger(e),"maxSize must be an integer"),v(e>0,"maxSize must be greater than 0"),v(mt(e),"maxSize must be a power of two"),this.preComputedSizeMinus1=e-1}nextIndex(e){return v(e>=0,"index must be greater than or equal to 0"),e+1&this.preComputedSizeMinus1}}function mt(r){return(r&r-1)===0}const Jr="BufferFullError";class wt extends O{constructor(e="buffer full"){super(e),Object.freeze(this)}get code(){return Jr}}class Vn{convert(e){return a(e,"code","message"),_(e,Jr),new wt(h.decode(e.message))}}class $n extends xe{}class Yn extends i{encoder=new $n;decoder=new Vn}const Kn=new Yn;I(Jr,Kn);class Xn{putToFull(e,o){return e.get(),e.put(o)}}class Zn{putToFull(){throw new wt}}const ea={overwriteOldest:new Xn,throw:new Zn};function ra(r){return mt(r)?new jn(r):new Un(r)}class oa{readIndex=0;writeIndex=0;buffer;nextIndex;getOnEmpty;putOnFull;constructor(e,o,t){v(!Number.isNaN(e),"maxSize must not be NaN"),this.buffer=new Array(e),this.nextIndex=ra(e),this.getOnEmpty=o,this.putOnFull=t}get maxSize(){return this.buffer.length}get length(){return this.writeIndex<this.readIndex?this.writeIndex+this.maxSize-this.readIndex:this.writeIndex-this.readIndex}put(e){const o=this.nextIndex.nextIndex(this.writeIndex);return o===this.readIndex?this.putOnFull.putToFull(this,e):(this.buffer[this.writeIndex]=e,this.writeIndex=o,pt.success)}get(){if(this.readIndex===this.writeIndex)return this.getOnEmpty.getFromEmpty(this);const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),e}[Symbol.iterator](){return new ta(this)}immutableIterable(){return{[Symbol.iterator]:()=>this.immutableIterator()}}immutableIterator(){return new sa(this.readIndex,this.writeIndex,this.buffer,this.nextIndex)}}class ta{buffer;constructor(e){this.buffer=e}next(){const e=this.buffer.get();return e==null?{value:void 0,done:!0}:{value:e,done:!1}}}class sa{readIndex;writeIndex;buffer;nextIndex;constructor(e,o,t,n){this.readIndex=e,this.writeIndex=o,this.buffer=t,this.nextIndex=n}next(){if(this.readIndex===this.writeIndex)return{value:void 0,done:!0};const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),{value:e,done:!1}}}function T(r=32,e=Qn.returnUndefined,o=ea.overwriteOldest){return new oa(r,e,o)}class Qr{hash;height;time;numTransactions;proposerID;feeRecipient;size;blockReward;constructor(e,o,t,n,c,u,p,w){this.hash=e,this.height=o,this.time=t,this.numTransactions=n,this.proposerID=c,this.feeRecipient=u,this.size=p,this.blockReward=w}toJSON(){return J.encode(this)}}class ca{convert(e){return a(e,"hash","height","time","num_transactions","proposer_id","fee_recipient","size","block_reward"),new Qr(l.decode(e.hash),s.decode(e.height),M.decode(e.time),s.decode(e.num_transactions),G.decode(e.proposer_id),G.decode(e.fee_recipient),s.decode(e.size),Oo.decode(e.block_reward))}}class na{convert(e){return d(e,Qr),{hash:l.encode(e.hash),height:s.encode(e.height),time:M.encode(e.time),num_transactions:s.encode(e.numTransactions),proposer_id:G.encode(e.proposerID),fee_recipient:G.encode(e.feeRecipient),size:s.encode(e.size),block_reward:Oo.encode(e.blockReward)}}}class aa extends b{encoder=new na;decoder=new ca}const J=new aa,fi=new A(new D(J),new P(J));class Ur{hash;height;proposerID;numTransactions;size;time;constructor(e,o,t,n,c,u){this.hash=e,this.height=o,this.proposerID=t,this.numTransactions=n,this.size=c,this.time=u}toJSON(){return $e.encode(this)}}class da{convert(e){return a(e,"hash","height","proposer_id","num_transactions","size","time"),new Ur(l.decode(e.hash),s.decode(e.height),G.decode(e.proposer_id),s.decode(e.num_transactions),s.decode(e.size),M.decode(e.time))}}class ia{convert(e){return d(e,Ur),{hash:l.encode(e.hash),height:s.encode(e.height),proposer_id:G.encode(e.proposerID),num_transactions:s.encode(e.numTransactions),size:s.encode(e.size),time:M.encode(e.time)}}}class la extends b{encoder=new ia;decoder=new da}const $e=new la,V=new A(new D($e),new P($e)),j="latest";class jr{rollups;transactions;blocks;constructor(e,o,t){this.rollups=e,this.transactions=o,this.blocks=t}toJSON(){return Vr.encode(this)}}class ua{convert(e){return a(e,"rollups","transactions","blocks"),new jr(s.decode(e.rollups),s.decode(e.transactions),s.decode(e.blocks))}}class ha{convert(e){return d(e,jr),{rollups:s.encode(e.rollups),transactions:s.encode(e.transactions),blocks:s.encode(e.blocks)}}}class pa extends i{encoder=new ha;decoder=new ua}const Vr=new pa;function ma(r,e){return r.blockHeights-e.blockHeights}class $r{blockTime;blockSize;blockTransactions;blockHeights;constructor(e,o,t,n){const c=[],u=Math.min(e.length,o.length,t.length,n.length);for(let R=0;R<u;R++){const K=n[R];K!==null&&c.push({blockTime:e[R],blockSize:o[R],blockTransactions:t[R],blockHeights:K})}c.sort(ma);const p=c[0].blockHeights,w=c[c.length-1].blockHeights,C=[],g=[],m=[],y=[];for(let R=p,K=0;R<=w;R++){const X=c[K];if(X.blockHeights!==R){C.push(null),g.push(null),m.push(null),y.push(null);continue}C.push(X.blockTime),g.push(X.blockSize),m.push(X.blockTransactions),y.push(X.blockHeights),K++}const Q=Math.max(0,y.length-50);this.blockTime=C.slice(Q),this.blockSize=g.slice(Q),this.blockTransactions=m.slice(Q),this.blockHeights=y.slice(Q)}toJSON(){return Yr.encode(this)}}class wa{convert(e){return a(e,"block_time","block_size","block_transactions","block_heights"),new $r(W.decode(e.block_time),W.decode(e.block_size),W.decode(e.block_transactions),W.decode(e.block_heights))}}class fa{convert(e){return d(e,$r),{block_time:W.encode(e.blockTime),block_size:W.encode(e.blockSize),block_transactions:W.encode(e.blockTransactions),block_heights:W.encode(e.blockHeights)}}}class Ca extends i{encoder=new fa;decoder=new wa}const Yr=new Ca,ft=N;class Te{hash;rollups;height;time;offset;numTransactions;constructor(e,o,t,n,c,u){this.hash=e,this.rollups=o,this.height=t,this.time=n,this.offset=c,this.numTransactions=u}toJSON(){return Ye.encode(this)}}class ba{convert(e){return a(e,"hash","rollups","height","time","offset","num_transactions"),new Te(l.decode(e.hash),ft.decode(e.rollups),s.decode(e.height),M.decode(e.time),s.decode(e.offset),s.decode(e.num_transactions))}}class ga{convert(e){return d(e,Te),{hash:l.encode(e.hash),rollups:ft.encode(e.rollups),height:s.encode(e.height),time:M.encode(e.time),offset:s.encode(e.offset),num_transactions:s.encode(e.numTransactions)}}}class ya extends i{encoder=new ga;decoder=new ba}const Ye=new ya,$=new A(new D(Ye),new P(Ye));class Kr{latestBlock;genesisOverview;latestBlocks;latestTransactions;histograms;constructor(e,o,t,n,c){this.latestBlock=e,this.genesisOverview=o,this.latestBlocks=t,this.latestTransactions=n,this.histograms=c}toJSON(){return Xr.encode(this)}}class va{convert(e){return a(e,"latest_block","genesis_overview","latest_blocks","latest_transactions","histograms"),new Kr(J.decode(e.latest_block),Vr.decode(e.genesis_overview),V.decode(e.latest_blocks),$.decode(e.latest_transactions),Yr.decode(e.histograms))}}class Ea{convert(e){return d(e,Kr),{latest_block:J.encode(e.latestBlock),genesis_overview:Vr.encode(e.genesisOverview),latest_blocks:V.encode(e.latestBlocks),latest_transactions:$.encode(e.latestTransactions),histograms:Yr.encode(e.histograms)}}}class xa extends i{encoder=new Ea;decoder=new va}const Xr=new xa;class Zr{blockDetail;constructor(e){this.blockDetail=e}toJSON(){return Ct.encode(this)}}class Sa{convert(e){return a(e,"block_detail"),new Zr(J.decode(e.block_detail))}}class ka{convert(e){return d(e,Zr),{block_detail:J.encode(e.blockDetail)}}}class Ia extends b{encoder=new ka;decoder=new Sa}const Ct=new Ia;class eo{blockSummaries;constructor(e){this.blockSummaries=e}toJSON(){return bt.encode(this)}}class _a{convert(e){return a(e,"block_summaries"),new eo(V.decode(e.block_summaries))}}class Ra{convert(e){return d(e,eo),{block_summaries:V.encode(e.blockSummaries)}}}class Ba extends b{encoder=new Ra;decoder=new _a}const bt=new Ba;class ro{explorerSummary;constructor(e){this.explorerSummary=e}toJSON(){return gt.encode(this)}}class Ta{convert(e){return a(e,"explorer_summary"),new ro(Xr.decode(e.explorer_summary))}}class Aa{convert(e){return d(e,ro),{explorer_summary:Xr.encode(e.explorerSummary)}}}class Da extends i{encoder=new Aa;decoder=new Ta}const gt=new Da;class oo{blocks;transactions;constructor(e,o){this.blocks=e,this.transactions=o}toJSON(){return to.encode(this)}}class Pa{convert(e){return a(e,"blocks","transactions"),new oo(V.decode(e.blocks),$.decode(e.transactions))}}class Oa{convert(e){return d(e,oo),{blocks:V.encode(e.blocks),transactions:$.encode(e.transactions)}}}class Na extends b{encoder=new Oa;decoder=new Pa}const to=new Na;class so{searchResults;constructor(e){this.searchResults=e}toJSON(){return yt.encode(this)}}class qa{convert(e){return a(e,"search_results"),new so(to.decode(e.search_results))}}class Fa{convert(e){return d(e,so),{search_results:to.encode(e.searchResults)}}}class Wa extends b{encoder=new Fa;decoder=new qa}const yt=new Wa;class co{static heightAndOffset(e,o){return new Ae(e,o)}static hash(e){return new De(e)}toJSON(){return vt.encode(this)}}class Ga{convert(e){if(d(e,co),e instanceof Ae)return{height:s.encode(e.height),offset:s.encode(e.offset)};if(e instanceof De)return{hash:l.encode(e.hash)};throw new z}}class za{convert(e){if(S(e,"height",k)&&S(e,"offset",k))return new Ae(s.decode(e.height),s.decode(e.offset));if(S(e,"hash",k))return new De(l.decode(e.hash));throw new z}}class Ma extends i{encoder=new Ga;decoder=new za}const vt=new Ma;class Ae extends co{height;offset;constructor(e,o){super(),this.height=e,this.offset=o}}class De extends co{hash;constructor(e){super(),this.hash=e}}const Et=s;class no{namespace;payload;constructor(e,o){this.namespace=e,this.payload=o}toJSON(){return Ke.encode(this)}}class Ha{convert(e){return a(e,"namespace","payload"),new no(Et.decode(e.namespace),Bo.decode(e.payload))}}class La{convert(e){return d(e,no),{namespace:Et.encode(e.namespace),payload:Bo.encode(e.payload)}}}class Ja extends i{encoder=new La;decoder=new Ha}const Ke=new Ja,xt=new A(new D(Ke),new P(Ke));class ao{hash;height;blockConfirmed;offset;numTransactions;size;time;sequencingFees;feeDetails;constructor(e,o,t,n,c,u,p,w,C){this.hash=e,this.height=o,this.blockConfirmed=t,this.offset=n,this.numTransactions=c,this.size=u,this.time=p,this.sequencingFees=w,this.feeDetails=C}toJSON(){return io.encode(this)}}class Qa{convert(e){return a(e,"hash","height","block_confirmed","offset","num_transactions","size","time","sequencing_fees","fee_details"),new ao(l.decode(e.hash),s.decode(e.height),ae.decode(e.block_confirmed),s.decode(e.offset),s.decode(e.num_transactions),s.decode(e.size),M.decode(e.time),[],[])}}class Ua{convert(e){return d(e,ao),{hash:l.encode(e.hash),height:s.encode(e.height),block_confirmed:ae.encode(e.blockConfirmed),offset:s.encode(e.offset),num_transactions:s.encode(e.numTransactions),size:s.encode(e.size),time:M.encode(e.time),sequencing_fees:[],fee_details:[]}}}class ja extends i{encoder=new Ua;decoder=new Qa}const io=new ja;class lo{details;data;constructor(e,o){this.details=e,this.data=o}toJSON(){return uo.encode(this)}}class Va{convert(e){return a(e,"details","data"),new lo(io.decode(e.details),xt.decode(e.data))}}class $a{convert(e){return d(e,lo),{details:io.encode(e.details),data:xt.encode(e.data)}}}class Ya extends i{encoder=new $a;decoder=new Va}const uo=new Ya;class ve{transactionDetail;constructor(e){this.transactionDetail=e}toJSON(){return St.encode(this)}}class Ka{convert(e){return a(e,"transaction_detail"),new ve(uo.decode(e.transaction_detail))}}class Xa{convert(e){return d(e,ve),{transaction_detail:uo.encode(e.transactionDetail)}}}class Za extends b{encoder=new Xa;decoder=new Ka}const St=new Za;class Pe{constructor(){}static block(e){return new Oe(e)}static namespace(e){return new Ne(e)}static none(){return new po}toJSON(){return ho.encode(this)}}class ed{convert(e){return S(e,"block",k)?new Oe(s.decode(e.block)):S(e,"namespace",k)?new Ne(s.decode(e.namespace)):new po}}class rd{convert(e){if(d(e,Pe),e instanceof po)return{};if(e instanceof Oe)return{block:s.encode(e.block)};if(e instanceof Ne)return{namespace:s.encode(e.namespace)};throw new z}}class od extends b{encoder=new rd;decoder=new ed}const ho=new od;class po extends Pe{constructor(){super()}convertURL(e){return e}}class Oe extends Pe{block;constructor(e){super(),this.block=e}convertURL(e){return new URL(`${e.pathname}/block/${this.block}`,e)}}class Ne extends Pe{namespace;constructor(e){super(),this.namespace=e}convertURL(e){return new URL(`${e.pathname}/namespace/${this.namespace}`,e)}}class oe{transactionSummaries;constructor(e){this.transactionSummaries=e}toJSON(){return kt.encode(this)}}class td{convert(e){return a(e,"transaction_summaries"),new oe($.decode(e.transaction_summaries))}}class sd{convert(e){return d(e,oe),{transaction_summaries:$.encode(e.transactionSummaries)}}}class cd extends b{encoder=new sd;decoder=new td}const kt=new cd;class qe{limit;constructor(e){this.limit=e}static latest(e){return new Fe(e)}static heightAndOffset(e,o,t){return new We(e,o,t)}static hash(e,o){return new Ge(e,o)}toJSON(){return mo.encode(this)}}class nd{convert(e){return a(e,"limit"),S(e,"height",k)&&S(e,"offset",k)?new We(s.decode(e.height),s.decode(e.offset),s.decode(e.limit)):S(e,"hash",k)?new Ge(l.decode(e.hash),s.decode(e.limit)):new Fe(s.decode(e.limit))}}class ad{convert(e){if(d(e,qe),e instanceof Fe)return{limit:s.encode(e.limit)};if(e instanceof We)return{height:s.encode(e.height),offset:s.encode(e.offset),limit:s.encode(e.limit)};if(e instanceof Ge)return{hash:l.encode(e.hash),limit:s.encode(e.limit)};throw new z}}class dd extends b{encoder=new ad;decoder=new nd}const mo=new dd;class Fe extends qe{constructor(e){super(e)}convertURL(e){return new URL(`transactions/latest/${this.limit}`,e)}}class We extends qe{height;offset;constructor(e,o,t){super(t),this.height=e,this.offset=o}convertURL(e){return new URL(`transactions/from/${this.height}/${this.offset}/${this.limit}`,e)}}class Ge extends qe{hash;constructor(e,o){super(o),this.hash=e}convertURL(e){return new URL(`transactions/hash/${this.hash}/${this.limit}`,e)}}function So(r){return new Qr(r.hash,r.height,r.time,r.numTransactions,r.proposer,r.proposer,r.size,r.fees)}function Le(r){return new Ur(r.hash,r.height,r.proposer,r.numTransactions,r.size,r.time)}function ko(r,e){return new lo(new ao(e.hash,e.block,!0,e.index,r.numTransactions,e.size,e.time,[],[]),[new no(e.tree.namespace,e.tree.data)])}function ue(r,e){return new Te(e.hash,[e.tree.namespace],e.block,e.time,e.index,r.numTransactions)}class id{async getBlockDetail(e){const o=e.target,t=await(o===j?Vt(E()):Ce(we(E(),o)));return new Zr(So(t))}async getBlockSummaries(e){const o=qo(E(),p=>e.from===j||p.height<=e.from),t=Fo(o),n=fe(t,e.limit),c=No(n,async p=>Le(p)),u=await re(c);return new eo(u)}async getTransactionDetail(e){const o=E();if(e instanceof Ae){const t=ze(o,p=>p.height<=e.height),n=U(t,p=>F(p.transactions,async w=>ko(p,w))),c=we(ee(n),e.offset),u=await Ce(c);return new ve(u)}if(e instanceof De){const t=U(o,c=>F(c.transactions,async u=>ko(c,u))),n=await $t(t,c=>c.details.hash===e.hash);if(!n)throw new Kt(e.hash);return new ve(n)}throw new f}applyFilter(e,o){return o instanceof Oe?vo(e,t=>t.height==o.block):o instanceof Ne?vo(e,t=>t.rollups.indexOf(o.namespace)>=0):e}async getTransactionSummaries(e){const o=E(),{target:t,filter:n}=e;if(t instanceof Fe){const u=U(o,g=>F(g.transactions,async m=>ue(g,m))),p=ee(u),w=this.applyFilter(p,n),C=await Me(He(w,t.limit));return new oe(C)}if(t instanceof We){const c=ze(o,m=>m.height<=t.height),u=U(c,m=>F(m.transactions,async y=>ue(m,y))),p=ee(u),w=we(p,t.offset),C=this.applyFilter(w,n),g=await Me(He(C,t.limit));return new oe(g)}if(t instanceof Ge){const c=E(),u=U(c,m=>F(m.transactions,async y=>new Te(y.hash,[y.tree.namespace],y.block,y.time,y.index,m.numTransactions))),p=ze(u,m=>m.hash!==t.hash),w=ee(p),C=this.applyFilter(w,n),g=await Me(He(C,t.limit));return new oe(g)}throw new f}async getExplorerOverview(){let e;const o=T(11),t=T(51),n=T(51),c=T(51),u=T(51),p=T(11);let w=0,C=0;const g=new Map;for await(const m of E()){e=So(m),o.put(Le(m)),t.put(m.size),n.put(Math.round(m.genTime/1e3)),c.put(m.numTransactions),u.put(m.height),w++,C+=m.numTransactions;for await(const y of m.transactions){p.put(ue(m,y));const Q=g.get(y.tree.namespace)||0;g.set(y.tree.namespace,Q+1)}}return new ro(new Kr(e,new jr(Array.from(g.keys()).length,C,w),Array.from(o),Array.from(p),new $r(Array.from(n),Array.from(t),Array.from(c),Array.from(u))))}async getSearchResult(e){const o=T(101),t=T(10),n=T(10);for await(const c of E())o.put(c);for(const c of o){c.hash.toString().startsWith(e.query)&&t.put(Le(c));for await(const u of c.transactions)u.hash.toString().startsWith(e.query)&&n.put(ue(c,u))}return new so(new oo(Array.from(t),Array.from(n)))}}class ld{async getLatestRewardBalance(){return null}}class ud{async blockHeight(){return(await Yt(E())).height}}class hd{availability=new Gc;status=new ud;explorer=new id;rewardState=new ld;async setURL(){throw new f}}const Xe=er.createContext(null);try{Xe.displayName="BlockExplorerConfigContext",Xe.__docgenInfo={description:`BlockExplorerConfigContext provides the current Block Explorer
configuration for the entire application. It defaults to null, and should
be supplied in order for the interaction with the Block Explorer to work
effectively.`,displayName:"BlockExplorerConfigContext",props:{}}}catch{}class pd{async getLeafFromHeight(){throw new f}async getTransactionFromHeightAndOffset(){throw new f}async getBlockFromHeight(){throw new f}async getBlockSummaries(){throw new f}async getTransactionSummaryRange(){throw new f}async getTransactionSummaryRangeForRollup(){throw new f}}class md{async getBlockDetail(){throw new f}async getBlockSummaries(){throw new f}async getTransactionDetail(){throw new f}async getTransactionSummaries(){throw new f}async getExplorerOverview(){throw new f}async getSearchResult(){throw new f}}class wd{async getLatestRewardBalance(){throw new f}}class fd{async blockHeight(){throw new f}}class Cd{availability=new pd;status=new fd;explorer=new md;rewardState=new wd;setURL(){throw new f}}function he(){return v(!1,"completer is not ready, this should never be reached")}function pe(){throw new Pr}class bd{resolve=he;reject=he;completed=!1;promise;get isCompleted(){return this.completed}constructor(){this.promise=new Promise((e,o)=>{this.resolve=e,this.reject=o}),v(this.resolve!==he,"resolve should be set"),v(this.reject!==he,"resolve should be set")}complete(e){const o=this.resolve,t=this.reject;if(this.completed=!0,this.resolve=pe,this.reject=pe,e instanceof Promise){e.then(o,t);return}o(e)}completeError(e){this.reject(e),this.completed=!0,this.resolve=pe,this.reject=pe}}function gd(){return new bd}const Y=s;class wo{requestID;api;method;param;constructor(e,o,t,n){this.requestID=e,this.api=o,this.method=t,this.param=n}toJSON(){return{requestID:this.requestID,api:this.api,method:this.method,param:this.param}}}class yd{convert(e){return a(e,"requestID","api","method","param"),new wo(Y.decode(e.requestID),h.decode(e.api),h.decode(e.method),e.param)}}class vd{convert(e){return d(e,wo),{requestID:Y.encode(e.requestID),api:h.encode(e.api),method:h.encode(e.method),param:e.param}}}class Ed extends i{encoder=new vd;decoder=new yd}const xd=new Ed;class fo{requestID;constructor(e){this.requestID=e}}class Co extends fo{response;constructor(e,o){super(e),this.response=o}toJSON(){return It.encode(this)}}class Sd{convert(e){return a(e,"requestID","response"),new Co(Y.decode(e.requestID),e.response)}}class kd{convert(e){return d(e,Co),{requestID:Y.encode(e.requestID),response:e.response}}}class Id extends i{encoder=new kd;decoder=new Sd}const It=new Id;class bo extends fo{error;constructor(e,o){super(e),this.error=o}toJSON(){return _t.encode(this)}}class _d{convert(e){return a(e,"requestID","error"),new bo(Y.decode(e.requestID),Se.decode(e.error))}}class Rd{convert(e){return d(e,bo),{requestID:Y.encode(e.requestID),error:Se.encode(e.error)}}}class Bd extends i{encoder=new Rd;decoder=new _d}const _t=new Bd;class Td{convert(e){if(S(e,"response",k))return It.decode(e);if(S(e,"error",k))return _t.decode(e);throw new z}}class Ad{convert(e){return d(e,fo),e.toJSON()}}class Dd extends i{encoder=new Ad;decoder=new Td}const Io=new Dd;class go{target;constructor(e){this.target=e}static latest(){return new Bt}static height(e){return new Tt(e)}toJSON(){return Rt.encode(this)}}class Pd{convert(e){return d(e,go),typeof e.target=="number"?s.encode(e.target):h.encode(e.target)}}class Od{convert(e){return e===j?new Bt:new Tt(s.decode(e))}}class Nd extends b{encoder=new Pd;decoder=new Od}const Rt=new Nd;class Bt extends go{constructor(){super(j)}}class Tt extends go{constructor(e){super(e)}}class yo{limit;constructor(e){this.limit=e}static latest(e){return new Dt(e)}static from(e,o){return new Pt(e,o)}toJSON(){return At.encode(this)}}class qd{convert(e){return d(e,yo),Lt(e.from)?{from:s.encode(e.from),limit:s.encode(e.limit)}:{from:h.encode(e.from),limit:s.encode(e.limit)}}}class Fd{convert(e){return a(e,"from","limit"),e.from===j?new Dt(s.decode(e.limit)):new Pt(s.decode(e.from),s.decode(e.limit))}}class Wd extends b{encoder=new qd;decoder=new Fd}const At=new Wd;class Dt extends yo{constructor(e){super(e)}get from(){return j}}class Pt extends yo{from;constructor(e,o){super(o),this.from=e}}class Ot{query;constructor(e){this.query=e}toJSON(){return Nt.encode(this)}}class Gd{convert(e){return d(e,Ot),h.encode(e.query)}}class zd{convert(e){return new Ot(h.decode(e))}}class Md extends b{encoder=new Gd;decoder=new zd}const Nt=new Md;class qt{target;filter;constructor(e,o){this.target=e,this.filter=o}toJSON(){return Ft.encode(this)}}class Hd{convert(e){return a(e,"filter","target"),new qt(mo.decode(e.target),ho.decode(e.filter))}}class Ld{convert(e){return d(e,qt),{filter:ho.encode(e.filter),target:mo.encode(e.target)}}}class Jd extends b{encoder=new Ld;decoder=new Hd}const Ft=new Jd;function Qd(r){return new Worker(""+new URL("hotshot_query_service_web_worker_api.js-DY-n3BYL.js",import.meta.url).href,{name:r?.name})}class Ud{worker;nextRequestID=0;requestCompleters=new Map;constructor(e){this.worker=e,e.addEventListener("message",this.handleMessage.bind(this)),e.addEventListener("messageerror",this.handleMessageError.bind(this)),e.addEventListener("error",this.handleError.bind(this))}async submitRequest(e,o,t,n){const[c,u]=this.nextRequest();try{return this.worker.postMessage(xd.encode(new wo(c,o,t,n))),await u.promise.then(p=>{if(p instanceof bo)throw new ut(p.error);if(p instanceof Co){const{response:w}=p;return e.decode(w)}throw new H(typeof p,"WebWorkerResponse")})}finally{this.requestCompleters.delete(c)}}nextRequest(){const e=this.nextRequestID++,o=gd();return this.requestCompleters.set(e,o),[e,o]}handleMessage(e){const o=Io.decode(e.data),t=this.requestCompleters.get(o.requestID);if(t===void 0)throw new ye(o.requestID);t.complete(o)}handleMessageError(e){const o=Io.decode(e.data),t=this.requestCompleters.get(o.requestID);if(t===void 0)throw new ye(o.requestID);t.completeError(o)}handleError(e){debugger;console.error("encountered error setting up Web worker",e)}}class jd{helper;constructor(e){this.helper=e}async sendRequest(e,o,...t){return this.helper.submitRequest(e,"availability",o,t)}async getLeafFromHeight(e){return await this.sendRequest(Yo,"getLeafFromHeight",e)}async getTransactionFromHeightAndOffset(e,o){return await this.sendRequest(Ko,"getTransactionFromHeightAndOffset",e,o)}async getBlockSummaries(e,o){return await this.sendRequest(ks,"getBlockSummaries",e,o)}async getBlockFromHeight(e){return await this.sendRequest(zo,"getBlockFromHeight",e)}async getTransactionSummaryRange(e,o,t){return await this.sendRequest(Eo,"getTransactionSummaryRange",e,o,t)}async getTransactionSummaryRangeForRollup(e,o,t,n){return await this.sendRequest(Eo,"getTransactionSummaryRangeForRollup",e,o,t,n)}}class Vd{helper;constructor(e){this.helper=e}async sendRequest(e,o,...t){return this.helper.submitRequest(e,"status",o,t)}async blockHeight(){return await this.sendRequest(s,"blockHeight")}}class $d{helper;constructor(e){this.helper=e}async sendRequest(e,o,...t){return this.helper.submitRequest(e,"explorer",o,t)}async getBlockDetail(e){return await this.sendRequest(Ct,"getBlockDetail",Rt.encode(e))}async getBlockSummaries(e){return await this.sendRequest(bt,"getBlockSummaries",At.encode(e))}async getTransactionDetail(e){return await this.sendRequest(St,"getTransactionDetail",vt.encode(e))}async getTransactionSummaries(e){return await this.sendRequest(kt,"getTransactionSummaries",Ft.encode(e))}async getExplorerOverview(){return await this.sendRequest(gt,"getExplorerOverview",null)}async getSearchResult(e){return await this.sendRequest(yt,"getSearchResult",Nt.encode(e))}}class Yd{helper;constructor(e){this.helper=e}async sendRequest(e,o,...t){return this.helper.submitRequest(e,"reward-state",o,t)}async getLatestRewardBalance(e){return await this.sendRequest(Gt,"getLatestRewardBalance",h.encode(e))}}let Je=null;function Kd(){return Je||(Je=new Qd),Je}class Xd{availability;status;explorer;rewardState;helper;constructor(){const e=Kd(),o=new Ud(e);this.helper=o,this.availability=new jd(o),this.status=new Vd(o),this.explorer=new $d(o),this.rewardState=new Yd(o)}async sendRequest(e,o,...t){return this.helper.submitRequest(e,"proxy",o,t)}async setURL(e){return await this.sendRequest(ae,"set-url",h.encode(e))}}const Ze=er.createContext(new Cd);let me=null;function Zd(r){return me===null&&(me=new Xd),r&&me.setURL(r).then(e=>{e||console.warn("unable to set the url for the hotshot query service",r)},e=>{console.error("unable to set the url for the hotshot query service",r,e)}),me}function ei(r){return typeof window<"u"&&"Worker"in window||typeof self<"u"&&"Worker"in self?Zd(r):new hd}const _o=r=>{const o=er.useContext(Xe)?.hotshotQueryServiceURL;return Wt.jsx(Ze.Provider,{value:ei(o),children:r.children})};try{Ze.displayName="CappuccinoHotShotQueryServiceAPIContext",Ze.__docgenInfo={description:"",displayName:"CappuccinoHotShotQueryServiceAPIContext",props:{}}}catch{}try{_o.displayName="ProvideCappuccinoHotShotQueryServiceAPIContext",_o.__docgenInfo={description:`ProvideCappuccinoHotShotQueryServiceAPIContext is a component that provides a
Cappuccino HotShot Query Service API using a default implementation that is
dependent on the environment that the code is being run within.`,displayName:"ProvideCappuccinoHotShotQueryServiceAPIContext",props:{}}}catch{}export{Xe as B,Ze as C,hd as F,_o as P,ut as W,so as a,oo as b,Ur as c,Te as d,Ot as e,T as f,ea as g,Qn as h,gd as i,Zc as j,fi as k,Yr as l,J as m,se as n,wi as o,Qo as p,te as q,Mo as r,$r as s,Qr as t,qt as u,qe as v,Pe as w,go as x,co as y,yo as z};
