import{g as zt,j as x,R as I,r as Qt}from"./iframe-CAIcvJ70.js";import{a as Pt,E as j}from"./environment_banner-D9Zk323Z.js";import{E as ae}from"./espresso-CWTlAroc.js";import{B as Gt}from"./explorer-DuZ2rr2M.js";import{C as $t,A as Jt,D as Zt,U as Xt,F as Yt,s as Ae,G as lt,H as Be,I as Rt,J as en,K as tn,n as Ft,M as Ot,O as ve,Q as nn,S as an,V as sn,W as rn,X as on,Y as cn,Z as dn,_ as Ne,$ as un,a0 as ln,a1 as pn,a2 as yn,a3 as Te,a4 as Ut,a5 as se,a6 as hn,a7 as mn,a8 as fn,a9 as gn,aa as wn,ab as H,ac as Y,ad as Le,ae as xe,af as ke,ag as P,ah as bn,ai as Pe,aj as vn,ak as pt,al as Tn,am as Cn,an as xn,ao as Re,ap as Z,aq as kn,ar as In,as as En,at as Vt,au as Sn,av as F,aw as yt,ax as q,ay as Dt,az as _n,aA as ht,aB as Mn,aC as mt,aD as ft,aE as An,aF as gt,aG as wt,aH as Bn,aI as me,aJ as _,aK as fe,aL as Nn,aM as Se,aN as Pn,aO as Rn,aP as Fn,aQ as On,aR as Un,aS as Vn,aT as Dn,aU as qn,aV as jn,aW as Ln}from"./en_US-RFN65H63-DhfAuIH7.js";import{c as K,w as bt}from"./wallet_address-1_HiFw02.js";import{b as U}from"./url-Bph6d-ow.js";import{n as Kn}from"./base64-KHURY7_E.js";import{a as te,d as W}from"./assert-BI051aL8.js";import{h as O}from"./array_buffer-cBr8gIXV.js";import"./string-IJEBdhwx.js";import"./UnimplementedError-CdIPpzwU.js";import{k as ot,n as Hn,m as ce,c as vt,o as Wn,g as zn}from"./functional-Cgf59ne2.js";import"./blocks-BbRoLXeF.js";import{n as G}from"./nodes-BnjHQtbM.js";function Qn({chain:n,currentChainId:e}){if(!n)throw new $t;if(e!==n.id)throw new Jt({chain:n,currentChainId:e})}function Gn(n,{docsPath:e,...t}){const a=(()=>{const s=Zt(n,t);return s instanceof Xt?n:s})();return new Yt(a,{docsPath:e,...t})}function qt(n,{errorInstance:e=new Error("timed out"),timeout:t,signal:a}){return new Promise((s,r)=>{(async()=>{let u;try{const c=new AbortController;t>0&&(u=setTimeout(()=>{a?c.abort():r(e)},t)),s(await n({signal:c?.signal||null}))}catch(c){c?.name==="AbortError"&&r(e),r(c)}finally{clearTimeout(u)}})()})}function $n(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const Tt=$n();function jt(n,e={}){return{async request(t){const{body:a,fetchFn:s=e.fetchFn??fetch,onRequest:r=e.onRequest,onResponse:u=e.onResponse,timeout:c=e.timeout??1e4}=t,o={...e.fetchOptions??{},...t.fetchOptions??{}},{headers:i,method:d,signal:p}=o;try{const m=await qt(async({signal:f})=>{const y={...o,body:Array.isArray(a)?Ae(a.map(v=>({jsonrpc:"2.0",id:v.id??Tt.take(),...v}))):Ae({jsonrpc:"2.0",id:a.id??Tt.take(),...a}),headers:{"Content-Type":"application/json",...i},method:d||"POST",signal:p||(c>0?f:null)},h=new Request(n,y),C=await r?.(h,y)??{...y,url:n};return await s(C.url??n,C)},{errorInstance:new lt({body:a,url:n}),timeout:c,signal:!0});u&&await u(m);let b;if(m.headers.get("Content-Type")?.startsWith("application/json"))b=await m.json();else{b=await m.text();try{b=JSON.parse(b||"{}")}catch(f){if(m.ok)throw f;b={error:b}}}if(!m.ok)throw new Be({body:a,details:Ae(b.error)||m.statusText,headers:m.headers,status:m.status,url:n});return b}catch(m){throw m instanceof Be||m instanceof lt?m:new Be({body:a,cause:m,url:n})}}}}function Jn(n,{body:e,onError:t,onResponse:a}){return n.request({body:e,onError:t,onResponse:a}),n}async function Zn(n,{body:e,timeout:t=1e4}){return n.requestAsync({body:e,timeout:t})}const Fe={http(n,e){return jt(n).request(e)},webSocket:Jn,webSocketAsync:Zn},Oe=new rn(128);async function Xn(n,e){const{account:t=n.account,chain:a=n.chain,accessList:s,authorizationList:r,blobs:u,data:c,gas:o,gasPrice:i,maxFeePerBlobGas:d,maxFeePerGas:p,maxPriorityFeePerGas:m,nonce:b,type:f,value:y,...h}=e;if(typeof t>"u")throw new Rt({docsPath:"/docs/actions/wallet/sendTransaction"});const C=t?Ot(t):null;try{en(e);const T=await(async()=>{if(e.to)return e.to;if(e.to!==null&&r&&r.length>0)return await tn({authorization:r[0]}).catch(()=>{throw new Ft("`to` is required. Could not infer from `authorizationList`.")})})();if(C?.type==="json-rpc"||C===null){let v;a!==null&&(v=await ve(n,nn,"getChainId")({}),Qn({currentChainId:v,chain:a}));const S=n.chain?.formatters?.transactionRequest?.format,g=(S||an)({...sn(h,{format:S}),accessList:s,authorizationList:r,blobs:u,chainId:v,data:c,from:C?.address,gas:o,gasPrice:i,maxFeePerBlobGas:d,maxFeePerGas:p,maxPriorityFeePerGas:m,nonce:b,to:T,type:f,value:y},"sendTransaction"),w=Oe.get(n.uid),E=w?"wallet_sendTransaction":"eth_sendTransaction";try{return await n.request({method:E,params:[g]},{retryCount:0})}catch(k){if(w===!1)throw k;const M=k;if(M.name==="InvalidInputRpcError"||M.name==="InvalidParamsRpcError"||M.name==="MethodNotFoundRpcError"||M.name==="MethodNotSupportedRpcError")return await n.request({method:"wallet_sendTransaction",params:[g]},{retryCount:0}).then(A=>(Oe.set(n.uid,!0),A)).catch(A=>{const B=A;throw B.name==="MethodNotFoundRpcError"||B.name==="MethodNotSupportedRpcError"?(Oe.set(n.uid,!1),M):B});throw M}}if(C?.type==="local"){const v=await ve(n,on,"prepareTransactionRequest")({account:C,accessList:s,authorizationList:r,blobs:u,chain:a,data:c,gas:o,gasPrice:i,maxFeePerBlobGas:d,maxFeePerGas:p,maxPriorityFeePerGas:m,nonce:b,nonceManager:C.nonceManager,parameters:[...cn,"sidecars"],type:f,value:y,...h,to:T}),S=a?.serializers?.transaction,l=await C.signTransaction(v,{serializer:S});return await ve(n,dn,"sendRawTransaction")({serializedTransaction:l})}throw C?.type==="smart"?new Ne({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Ne({docsPath:"/docs/actions/wallet/sendTransaction",type:C?.type})}catch(T){throw T instanceof Ne?T:Gn(T,{...e,account:C,chain:e.chain||void 0})}}async function Yn(n,e){const{abi:t,account:a=n.account,address:s,args:r,dataSuffix:u,functionName:c,...o}=e;if(typeof a>"u")throw new Rt({docsPath:"/docs/contract/writeContract"});const i=a?Ot(a):null,d=un({abi:t,args:r,functionName:c});try{return await ve(n,Xn,"sendTransaction")({data:`${d}${u?u.replace("0x",""):""}`,to:s,account:i,...o})}catch(p){throw ln(p,{abi:t,address:s,args:r,docsPath:"/docs/contract/writeContract",functionName:c,sender:i?.address})}}class ea extends Ft{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function re(n,e={}){const{batch:t,fetchFn:a,fetchOptions:s,key:r="http",methods:u,name:c="HTTP JSON-RPC",onFetchRequest:o,onFetchResponse:i,retryDelay:d,raw:p}=e;return({chain:m,retryCount:b,timeout:f})=>{const{batchSize:y=1e3,wait:h=0}=typeof t=="object"?t:{},C=e.retryCount??b,T=f??e.timeout??1e4,v=m?.rpcUrls.default.http[0];if(!v)throw new ea;const S=jt(v,{fetchFn:a,fetchOptions:s,onRequest:o,onResponse:i,timeout:T});return pn({key:r,methods:u,name:c,async request({method:l,params:g}){const w={method:l,params:g},{schedule:E}=yn({id:v,wait:h,shouldSplitBatch(B){return B.length>y},fn:B=>S.request({body:B}),sort:(B,R)=>B.id-R.id}),k=async B=>t?E(B):[await S.request({body:B})],[{error:M,result:A}]=await k(w);if(p)return{error:M,result:A};if(M)throw new Te({body:w,error:M,url:v});return A},retryCount:C,retryDelay:d,timeout:T,type:"http"},{fetchOptions:s,url:v})}}async function ta(n,e){const{chainId:t,connector:a,...s}=e;let r;e.account?r=e.account:r=(await Ut(n,{account:e.account,assertChainId:!1,chainId:t,connector:a})).account;const u=n.getClient({chainId:t});return se(u,hn,"estimateGas")({...s,account:r})}async function na(n,e={}){const{chainId:t,...a}=e,s=n.getClient({chainId:t});return{...await se(s,mn,"getBlock")(a),chainId:s.chain.id}}function aa(n,e={}){const{chainId:t,...a}=e,s=n.getClient({chainId:t});return se(s,fn,"getBlockNumber")(a)}function sa(n,e){const{chainId:t,...a}=e,s=n.getClient({chainId:t});return se(s,gn,"getTransaction")(a)}async function ra(n,e){const{chainId:t,...a}=e,s=n.getClient({chainId:t});return se(s,wn,"getTransactionReceipt")(a)}async function D(n,e){const{account:t,chainId:a,connector:s,...r}=e;let u;return typeof t=="object"&&t?.type==="local"?u=n.getClient({chainId:a}):u=await Ut(n,{account:t??void 0,assertChainId:!1,chainId:a,connector:s}),await se(u,Yn,"writeContract")({...r,...t?{account:t}:{},chain:a?{id:a}:null})}ct.type="injected";function ct(n={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:t}=n;function a(){const o=n.target;if(typeof o=="function"){const i=o();if(i)return i}return typeof o=="object"?o:typeof o=="string"?{...ia[o]??{id:o,name:`${o[0].toUpperCase()}${o.slice(1)}`,provider:`is${o[0].toUpperCase()}${o.slice(1)}`}}:{id:"injected",name:"Injected",provider(i){return i?.ethereum}}}let s,r,u,c;return o=>({get icon(){return a().icon},get id(){return a().id},get name(){return a().name},get supportsSimulation(){return!0},type:ct.type,async setup(){const i=await this.getProvider();i?.on&&n.target&&(u||(u=this.onConnect.bind(this),i.on("connect",u)),s||(s=this.onAccountsChanged.bind(this),i.on("accountsChanged",s)))},async connect({chainId:i,isReconnecting:d,withCapabilities:p}={}){const m=await this.getProvider();if(!m)throw new Y;let b=[];if(d)b=await this.getAccounts().catch(()=>[]);else if(e)try{b=(await m.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0]?.caveats?.[0]?.value?.map(y=>H(y)),b.length>0&&(b=await this.getAccounts())}catch(f){const y=f;if(y.code===P.code)throw new P(y);if(y.code===Pe.code)throw y}try{!b?.length&&!d&&(b=(await m.request({method:"eth_requestAccounts"})).map(h=>H(h))),u&&(m.removeListener("connect",u),u=void 0),s||(s=this.onAccountsChanged.bind(this),m.on("accountsChanged",s)),r||(r=this.onChainChanged.bind(this),m.on("chainChanged",r)),c||(c=this.onDisconnect.bind(this),m.on("disconnect",c));let f=await this.getChainId();return i&&f!==i&&(f=(await this.switchChain({chainId:i}).catch(h=>{if(h.code===P.code)throw h;return{id:f}}))?.id??f),e&&await o.storage?.removeItem(`${this.id}.disconnected`),n.target||await o.storage?.setItem("injected.connected",!0),{accounts:p?b.map(y=>({address:y,capabilities:{}})):b,chainId:f}}catch(f){const y=f;throw y.code===P.code?new P(y):y.code===Pe.code?new Pe(y):y}},async disconnect(){const i=await this.getProvider();if(!i)throw new Y;r&&(i.removeListener("chainChanged",r),r=void 0),c&&(i.removeListener("disconnect",c),c=void 0),u||(u=this.onConnect.bind(this),i.on("connect",u));try{await qt(()=>i.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await o.storage?.setItem(`${this.id}.disconnected`,!0),n.target||await o.storage?.removeItem("injected.connected")},async getAccounts(){const i=await this.getProvider();if(!i)throw new Y;return(await i.request({method:"eth_accounts"})).map(p=>H(p))},async getChainId(){const i=await this.getProvider();if(!i)throw new Y;const d=await i.request({method:"eth_chainId"});return Number(d)},async getProvider(){if(typeof window>"u")return;let i;const d=a();return typeof d.provider=="function"?i=d.provider(window):typeof d.provider=="string"?i=Ce(window,d.provider):i=d.provider,i&&!i.removeListener&&("off"in i&&typeof i.off=="function"?i.removeListener=i.off:i.removeListener=()=>{}),i},async isAuthorized(){try{if(e&&await o.storage?.getItem(`${this.id}.disconnected`)||!n.target&&!await o.storage?.getItem("injected.connected"))return!1;if(!await this.getProvider()){if(t!==void 0&&t!==!1){const m=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",m),!!await this.getProvider()),b=typeof t=="number"?t:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(m()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(m()),b))]))return!0}throw new Y}return!!(await bn(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:i,chainId:d}){const p=await this.getProvider();if(!p)throw new Y;const m=o.chains.find(f=>f.id===d);if(!m)throw new Le(new xe);const b=new Promise(f=>{const y=(h=>{"chainId"in h&&h.chainId===d&&(o.emitter.off("change",y),f())});o.emitter.on("change",y)});try{return await Promise.all([p.request({method:"wallet_switchEthereumChain",params:[{chainId:ke(d)}]}).then(async()=>{await this.getChainId()===d&&o.emitter.emit("change",{chainId:d})}),b]),m}catch(f){const y=f;if(y.code===4902||y?.data?.originalError?.code===4902)try{const{default:h,...C}=m.blockExplorers??{};let T;i?.blockExplorerUrls?T=i.blockExplorerUrls:h&&(T=[h.url,...Object.values(C).map(l=>l.url)]);let v;i?.rpcUrls?.length?v=i.rpcUrls:v=[m.rpcUrls.default?.http[0]??""];const S={blockExplorerUrls:T,chainId:ke(d),chainName:i?.chainName??m.name,iconUrls:i?.iconUrls,nativeCurrency:i?.nativeCurrency??m.nativeCurrency,rpcUrls:v};return await Promise.all([p.request({method:"wallet_addEthereumChain",params:[S]}).then(async()=>{if(await this.getChainId()===d)o.emitter.emit("change",{chainId:d});else throw new P(new Error("User rejected switch after adding network."))}),b]),m}catch(h){throw new P(h)}throw y.code===P.code?new P(y):new Le(y)}},async onAccountsChanged(i){if(i.length===0)this.onDisconnect();else if(o.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await o.storage?.removeItem(`${this.id}.disconnected`)}else o.emitter.emit("change",{accounts:i.map(d=>H(d))})},onChainChanged(i){const d=Number(i);o.emitter.emit("change",{chainId:d})},async onConnect(i){const d=await this.getAccounts();if(d.length===0)return;const p=Number(i.chainId);o.emitter.emit("connect",{accounts:d,chainId:p});const m=await this.getProvider();m&&(u&&(m.removeListener("connect",u),u=void 0),s||(s=this.onAccountsChanged.bind(this),m.on("accountsChanged",s)),r||(r=this.onChainChanged.bind(this),m.on("chainChanged",r)),c||(c=this.onDisconnect.bind(this),m.on("disconnect",c)))},async onDisconnect(i){const d=await this.getProvider();i&&i.code===1013&&d&&(await this.getAccounts()).length||(o.emitter.emit("disconnect"),d&&(r&&(d.removeListener("chainChanged",r),r=void 0),c&&(d.removeListener("disconnect",c),c=void 0),u||(u=this.onConnect.bind(this),d.on("connect",u))))}})}const ia={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(n){return n?.coinbaseWalletExtension?n.coinbaseWalletExtension:Ce(n,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(n){return Ce(n,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const t=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const a of t)if(e[a])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(n){return n?.phantom?.ethereum?n.phantom?.ethereum:Ce(n,"isPhantom")}}};function Ce(n,e){function t(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const a=n.ethereum;if(a?.providers)return a.providers.find(s=>t(s));if(a&&t(a))return a}dt.type="mock";function dt(n){const e=new Map,t=n.features??{defaultConnected:!1};let a=t.defaultConnected,s;return r=>({id:"mock",name:"Mock Connector",type:dt.type,async setup(){s=r.chains[0].id},async connect({chainId:u,withCapabilities:c}={}){if(t.connectError)throw typeof t.connectError=="boolean"?new P(new Error("Failed to connect.")):t.connectError;const i=await(await this.getProvider()).request({method:"eth_requestAccounts"});let d=await this.getChainId();return u&&d!==u&&(d=(await this.switchChain({chainId:u})).id),a=!0,{accounts:c?i.map(p=>({address:H(p),capabilities:{foo:{bar:p}}})):i.map(p=>H(p)),chainId:d}},async disconnect(){a=!1},async getAccounts(){if(!a)throw new Tn;return(await(await this.getProvider()).request({method:"eth_accounts"})).map(o=>H(o))},async getChainId(){const c=await(await this.getProvider()).request({method:"eth_chainId"});return pt(c,"number")},async isAuthorized(){return!t.reconnect||!a?!1:!!(await this.getAccounts()).length},async switchChain({chainId:u}){const c=await this.getProvider(),o=r.chains.find(i=>i.id===u);if(!o)throw new Le(new xe);return await c.request({method:"wallet_switchEthereumChain",params:[{chainId:ke(u)}]}),o},onAccountsChanged(u){u.length===0?this.onDisconnect():r.emitter.emit("change",{accounts:u.map(c=>H(c))})},onChainChanged(u){const c=Number(u);r.emitter.emit("change",{chainId:c})},async onDisconnect(u){r.emitter.emit("disconnect"),a=!1},async getProvider({chainId:u}={}){const o=(r.chains.find(d=>d.id===u)??r.chains[0]).rpcUrls.default.http[0];return vn({request:async({method:d,params:p})=>{if(d==="eth_chainId")return ke(s);if(d==="eth_requestAccounts")return n.accounts;if(d==="eth_signTypedData_v4"&&t.signTypedDataError)throw typeof t.signTypedDataError=="boolean"?new P(new Error("Failed to sign typed data.")):t.signTypedDataError;if(d==="wallet_switchEthereumChain"){if(t.switchChainError)throw typeof t.switchChainError=="boolean"?new P(new Error("Failed to switch chain.")):t.switchChainError;s=pt(p[0].chainId,"number"),this.onChainChanged(s.toString());return}if(d==="wallet_watchAsset"){if(t.watchAssetError)throw typeof t.watchAssetError=="boolean"?new P(new Error("Failed to switch chain.")):t.watchAssetError;return a}if(d==="wallet_getCapabilities")return{"0x2105":{paymasterService:{supported:p[0]==="0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266"},sessionKeys:{supported:!0}},"0x14A34":{paymasterService:{supported:p[0]==="0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266"}}};if(d==="wallet_sendCalls"){const y=[],h=p[0].calls,C=p[0].from;for(const v of h){const{result:S,error:l}=await Fe.http(o,{body:{method:"eth_sendTransaction",params:[{...v,...typeof C<"u"?{from:C}:{}}]}});if(l)throw new Te({body:{method:d,params:p},error:l,url:o});y.push(S)}const T=Cn(xn(JSON.stringify(h)));return e.set(T,y),{id:T}}if(d==="wallet_getCallsStatus"){const y=e.get(p[0]);if(!y)return{atomic:!1,chainId:"0x1",id:p[0],status:100,receipts:[],version:"2.0.0"};const C=(await Promise.all(y.map(async T=>{const{result:v,error:S}=await Fe.http(o,{body:{method:"eth_getTransactionReceipt",params:[T],id:0}});if(S)throw new Te({body:{method:d,params:p},error:S,url:o});return v?{blockHash:v.blockHash,blockNumber:v.blockNumber,gasUsed:v.gasUsed,logs:v.logs,status:v.status,transactionHash:v.transactionHash}:null}))).filter(T=>T!==null);return C.length===0?{atomic:!1,chainId:"0x1",id:p[0],status:100,receipts:[],version:"2.0.0"}:{atomic:!1,chainId:"0x1",id:p[0],status:200,receipts:C,version:"2.0.0"}}if(d==="wallet_showCallsStatus")return;if(d==="personal_sign"){if(t.signMessageError)throw typeof t.signMessageError=="boolean"?new P(new Error("Failed to sign message.")):t.signMessageError;d="eth_sign",p=[p[1],p[0]]}const m={method:d,params:p},{error:b,result:f}=await Fe.http(o,{body:m});if(b)throw new Te({body:m,error:b,url:o});return f}})({retryCount:0})}})}function oa(n){if(typeof window>"u")return;const e=t=>n(t.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function ca(){const n=new Set;let e=[];const t=()=>oa(s=>{e.some(({info:r})=>r.uuid===s.info.uuid)||(e=[...e,s],n.forEach(r=>r(e,{added:[s]})))});let a=t();return{_listeners(){return n},clear(){n.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),n.clear(),a?.()},findProvider({rdns:s}){return e.find(r=>r.info.rdns===s)},getProviders(){return e},reset(){this.clear(),a?.(),a=t()},subscribe(s,{emitImmediately:r}={}){return n.add(s),r&&s(e,{added:e}),()=>n.delete(s)}}}const da=n=>(e,t,a)=>{const s=a.subscribe;return a.subscribe=(u,c,o)=>{let i=u;if(c){const d=o?.equalityFn||Object.is;let p=u(a.getState());i=m=>{const b=u(m);if(!d(p,b)){const f=p;c(p=b,f)}},o?.fireImmediately&&c(p,p)}return s(i)},n(e,t,a)},ua=da;function la(n,e){let t;try{t=n()}catch{return}return{getItem:s=>{var r;const u=o=>o===null?null:JSON.parse(o,void 0),c=(r=t.getItem(s))!=null?r:null;return c instanceof Promise?c.then(u):u(c)},setItem:(s,r)=>t.setItem(s,JSON.stringify(r,void 0)),removeItem:s=>t.removeItem(s)}}const Ke=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(a){return Ke(a)(t)},catch(a){return this}}}catch(t){return{then(a){return this},catch(a){return Ke(a)(t)}}}},pa=(n,e)=>(t,a,s)=>{let r={storage:la(()=>localStorage),partialize:y=>y,version:0,merge:(y,h)=>({...h,...y}),...e},u=!1;const c=new Set,o=new Set;let i=r.storage;if(!i)return n((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),t(...y)},a,s);const d=()=>{const y=r.partialize({...a()});return i.setItem(r.name,{state:y,version:r.version})},p=s.setState;s.setState=(y,h)=>{p(y,h),d()};const m=n((...y)=>{t(...y),d()},a,s);s.getInitialState=()=>m;let b;const f=()=>{var y,h;if(!i)return;u=!1,c.forEach(T=>{var v;return T((v=a())!=null?v:m)});const C=((h=r.onRehydrateStorage)==null?void 0:h.call(r,(y=a())!=null?y:m))||void 0;return Ke(i.getItem.bind(i))(r.name).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==r.version){if(r.migrate)return[!0,r.migrate(T.state,T.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,T.state];return[!1,void 0]}).then(T=>{var v;const[S,l]=T;if(b=r.merge(l,(v=a())!=null?v:m),t(b,!0),S)return d()}).then(()=>{C?.(b,void 0),b=a(),u=!0,o.forEach(T=>T(b))}).catch(T=>{C?.(void 0,T)})};return s.persist={setOptions:y=>{r={...r,...y},y.storage&&(i=y.storage)},clearStorage:()=>{i?.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>f(),hasHydrated:()=>u,onHydrate:y=>(c.add(y),()=>{c.delete(y)}),onFinishHydration:y=>(o.add(y),()=>{o.delete(y)})},r.skipHydration||f(),b||m},ya=pa,Ct=n=>{let e;const t=new Set,a=(i,d)=>{const p=typeof i=="function"?i(e):i;if(!Object.is(p,e)){const m=e;e=d??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(b=>b(e,m))}},s=()=>e,c={setState:a,getState:s,getInitialState:()=>o,subscribe:i=>(t.add(i),()=>t.delete(i))},o=e=n(a,s,c);return c},Ue=n=>n?Ct(n):Ct;var Ve={exports:{}},xt;function ha(){return xt||(xt=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(t=!1));function s(o,i,d){this.fn=o,this.context=i,this.once=d||!1}function r(o,i,d,p,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var b=new s(d,p||o,m),f=t?t+i:i;return o._events[f]?o._events[f].fn?o._events[f]=[o._events[f],b]:o._events[f].push(b):(o._events[f]=b,o._eventsCount++),o}function u(o,i){--o._eventsCount===0?o._events=new a:delete o._events[i]}function c(){this._events=new a,this._eventsCount=0}c.prototype.eventNames=function(){var i=[],d,p;if(this._eventsCount===0)return i;for(p in d=this._events)e.call(d,p)&&i.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(d)):i},c.prototype.listeners=function(i){var d=t?t+i:i,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var m=0,b=p.length,f=new Array(b);m<b;m++)f[m]=p[m].fn;return f},c.prototype.listenerCount=function(i){var d=t?t+i:i,p=this._events[d];return p?p.fn?1:p.length:0},c.prototype.emit=function(i,d,p,m,b,f){var y=t?t+i:i;if(!this._events[y])return!1;var h=this._events[y],C=arguments.length,T,v;if(h.fn){switch(h.once&&this.removeListener(i,h.fn,void 0,!0),C){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,d),!0;case 3:return h.fn.call(h.context,d,p),!0;case 4:return h.fn.call(h.context,d,p,m),!0;case 5:return h.fn.call(h.context,d,p,m,b),!0;case 6:return h.fn.call(h.context,d,p,m,b,f),!0}for(v=1,T=new Array(C-1);v<C;v++)T[v-1]=arguments[v];h.fn.apply(h.context,T)}else{var S=h.length,l;for(v=0;v<S;v++)switch(h[v].once&&this.removeListener(i,h[v].fn,void 0,!0),C){case 1:h[v].fn.call(h[v].context);break;case 2:h[v].fn.call(h[v].context,d);break;case 3:h[v].fn.call(h[v].context,d,p);break;case 4:h[v].fn.call(h[v].context,d,p,m);break;default:if(!T)for(l=1,T=new Array(C-1);l<C;l++)T[l-1]=arguments[l];h[v].fn.apply(h[v].context,T)}}return!0},c.prototype.on=function(i,d,p){return r(this,i,d,p,!1)},c.prototype.once=function(i,d,p){return r(this,i,d,p,!0)},c.prototype.removeListener=function(i,d,p,m){var b=t?t+i:i;if(!this._events[b])return this;if(!d)return u(this,b),this;var f=this._events[b];if(f.fn)f.fn===d&&(!m||f.once)&&(!p||f.context===p)&&u(this,b);else{for(var y=0,h=[],C=f.length;y<C;y++)(f[y].fn!==d||m&&!f[y].once||p&&f[y].context!==p)&&h.push(f[y]);h.length?this._events[b]=h.length===1?h[0]:h:u(this,b)}return this},c.prototype.removeAllListeners=function(i){var d;return i?(d=t?t+i:i,this._events[d]&&u(this,d)):(this._events=new a,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,n.exports=c})(Ve)),Ve.exports}var ma=ha();const fa=zt(ma);class ga{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new fa})}on(e,t){this._emitter.on(e,t)}once(e,t){this._emitter.once(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,...t){const a=t[0];this._emitter.emit(e,{uid:this.uid,...a})}listenerCount(e){return this._emitter.listenerCount(e)}}function wa(n){return new ga(n)}function ba(n,e){return JSON.parse(n,(t,a)=>{let s=a;return s?.__type==="bigint"&&(s=BigInt(s.value)),s?.__type==="Map"&&(s=new Map(s.value)),e?.(t,s)??s})}function kt(n,e){return n.slice(0,e).join(".")||"."}function It(n,e){const{length:t}=n;for(let a=0;a<t;++a)if(n[a]===e)return a+1;return 0}function va(n,e){const t=typeof n=="function",a=typeof e=="function",s=[],r=[];return function(c,o){if(typeof o=="object")if(s.length){const i=It(s,this);i===0?s[s.length]=this:(s.splice(i),r.splice(i)),r[r.length]=c;const d=It(s,o);if(d!==0)return a?e.call(this,c,o,kt(r,d)):`[ref=${kt(r,d)}]`}else s[0]=o,r[0]=c;return t?n.call(this,c,o):o}}function Ta(n,e,t,a){return JSON.stringify(n,va((s,r)=>{let u=r;return typeof u=="bigint"&&(u={__type:"bigint",value:r.toString()}),u instanceof Map&&(u={__type:"Map",value:Array.from(r.entries())}),e?.(s,u)??u},a),t??void 0)}function Ca(n){const{deserialize:e=ba,key:t="wagmi",serialize:a=Ta,storage:s=Lt}=n;function r(u){return u instanceof Promise?u.then(c=>c).catch(()=>null):u}return{...s,key:t,async getItem(u,c){const o=s.getItem(`${t}.${u}`),i=await r(o);return i?e(i)??null:c??null},async setItem(u,c){const o=`${t}.${u}`;c===null?await r(s.removeItem(o)):await r(s.setItem(o,a(c)))},async removeItem(u){await r(s.removeItem(`${t}.${u}`))}}}const Lt={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function xa(){const n=typeof window<"u"&&window.localStorage?window.localStorage:Lt;return{getItem(e){return n.getItem(e)},removeItem(e){n.removeItem(e)},setItem(e,t){try{n.setItem(e,t)}catch{}}}}const He=256;let ge=He,we;function ka(n=11){if(!we||ge+n>He*2){we="",ge=0;for(let e=0;e<He;e++)we+=(256+Math.random()*256|0).toString(16).substring(1)}return we.substring(ge,ge+++n)}function ie(n){const{multiInjectedProviderDiscovery:e=!0,storage:t=Ca({storage:xa()}),syncConnectedChain:a=!0,ssr:s=!1,...r}=n,u=typeof window<"u"&&e?ca():void 0,c=Ue(()=>r.chains),o=Ue(()=>{const l=[],g=new Set;for(const w of r.connectors??[]){const E=i(w);if(l.push(E),!s&&E.rdns){const k=typeof E.rdns=="string"?[E.rdns]:E.rdns;for(const M of k)g.add(M)}}if(!s&&u){const w=u.getProviders();for(const E of w)g.has(E.info.rdns)||l.push(i(d(E)))}return l});function i(l){const g=wa(ka()),w={...l({emitter:g,chains:c.getState(),storage:t,transports:r.transports}),emitter:g,uid:g.uid};return g.on("connect",v),w.setup?.(),w}function d(l){const{info:g}=l,w=l.provider;return ct({target:{...g,id:g.rdns,provider:w}})}const p=new Map;function m(l={}){const g=l.chainId??h.getState().chainId,w=c.getState().find(k=>k.id===g);if(l.chainId&&!w)throw new xe;{const k=p.get(h.getState().chainId);if(k&&!w)return k;if(!w)throw new xe}{const k=p.get(g);if(k)return k}let E;if(r.client)E=r.client({chain:w});else{const k=w.id,M=c.getState().map(R=>R.id),A={},B=Object.entries(r);for(const[R,X]of B)if(!(R==="chains"||R==="client"||R==="connectors"||R==="transports"))if(typeof X=="object")if(k in X)A[R]=X[k];else{if(M.some(Wt=>Wt in X))continue;A[R]=X}else A[R]=X;E=Z({...A,chain:w,batch:A.batch??{multicall:!0},transport:R=>r.transports[k]({...R,connectors:o})})}return p.set(g,E),E}function b(){return{chainId:c.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let f;const y="0.0.0-canary-";Re.startsWith(y)?f=Number.parseInt(Re.replace(y,""),10):f=Number.parseInt(Re.split(".")[0]??"0",10);const h=Ue(ua(t?ya(b,{migrate(l,g){if(g===f)return l;const w=b(),E=C(l,w.chainId);return{...w,chainId:E}},name:"store",partialize(l){return{connections:{__type:"Map",value:Array.from(l.connections.entries()).map(([g,w])=>{const{id:E,name:k,type:M,uid:A}=w.connector;return[g,{...w,connector:{id:E,name:k,type:M,uid:A}}]})},chainId:l.chainId,current:l.current}},merge(l,g){typeof l=="object"&&l&&"status"in l&&delete l.status;const w=C(l,g.chainId);return{...g,...l,chainId:w}},skipHydration:s,storage:t,version:f}):b));h.setState(b());function C(l,g){return l&&typeof l=="object"&&"chainId"in l&&typeof l.chainId=="number"&&c.getState().some(w=>w.id===l.chainId)?l.chainId:g}a&&h.subscribe(({connections:l,current:g})=>g?l.get(g)?.chainId:void 0,l=>{if(c.getState().some(w=>w.id===l))return h.setState(w=>({...w,chainId:l??w.chainId}))}),u?.subscribe(l=>{const g=new Set,w=new Set;for(const k of o.getState())if(g.add(k.id),k.rdns){const M=typeof k.rdns=="string"?[k.rdns]:k.rdns;for(const A of M)w.add(A)}const E=[];for(const k of l){if(w.has(k.info.rdns))continue;const M=i(d(k));g.has(M.id)||E.push(M)}t&&!h.persist.hasHydrated()||o.setState(k=>[...k,...E],!0)});function T(l){h.setState(g=>{const w=g.connections.get(l.uid);return w?{...g,connections:new Map(g.connections).set(l.uid,{accounts:l.accounts??w.accounts,chainId:l.chainId??w.chainId,connector:w.connector})}:g})}function v(l){h.getState().status==="connecting"||h.getState().status==="reconnecting"||h.setState(g=>{const w=o.getState().find(E=>E.uid===l.uid);return w?(w.emitter.listenerCount("connect")&&w.emitter.off("connect",T),w.emitter.listenerCount("change")||w.emitter.on("change",T),w.emitter.listenerCount("disconnect")||w.emitter.on("disconnect",S),{...g,connections:new Map(g.connections).set(l.uid,{accounts:l.accounts,chainId:l.chainId,connector:w}),current:l.uid,status:"connected"}):g})}function S(l){h.setState(g=>{const w=g.connections.get(l.uid);if(w){const k=w.connector;k.emitter.listenerCount("change")&&w.connector.emitter.off("change",T),k.emitter.listenerCount("disconnect")&&w.connector.emitter.off("disconnect",S),k.emitter.listenerCount("connect")||w.connector.emitter.on("connect",v)}if(g.connections.delete(l.uid),g.connections.size===0)return{...g,connections:new Map,current:null,status:"disconnected"};const E=g.connections.values().next().value;return{...g,connections:new Map(g.connections),current:E.connector.uid}})}return{get chains(){return c.getState()},get connectors(){return o.getState()},storage:t,getClient:m,get state(){return h.getState()},setState(l){let g;typeof l=="function"?g=l(h.getState()):g=l;const w=b();typeof g!="object"&&(g=w),Object.keys(w).some(k=>!(k in g))&&(g=w),h.setState(g,!0)},subscribe(l,g,w){return h.subscribe(l,g,w?{...w,fireImmediately:w.emitImmediately}:void 0)},_internal:{mipd:u,async revalidate(){const l=h.getState(),g=l.connections;let w=l.current;for(const[,E]of g){const k=E.connector;k.isAuthorized&&await k.isAuthorized()||(g.delete(k.uid),w===k.uid&&(w=null))}h.setState(E=>({...E,connections:g,current:w}))},store:h,ssr:!!s,syncConnectedChain:a,transports:r.transports,chains:{setState(l){const g=typeof l=="function"?l(c.getState()):l;if(g.length!==0)return c.setState(g,!0)},subscribe(l){return c.subscribe(l)}},connectors:{providerDetailToConnector:d,setup:i,setState(l){return o.setState(typeof l=="function"?l(o.getState()):l,!0)},subscribe(l){return o.subscribe(l)}},events:{change:T,connect:v,disconnect:S}}}}function Et(n){return{onFetch:(e,t)=>{const a=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,r=e.state.data?.pages||[],u=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},o=0;const i=async()=>{let d=!1;const p=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(e.signal.aborted?d=!0:e.signal.addEventListener("abort",()=>{d=!0}),e.signal)})},m=kn(e.options,e.fetchOptions),b=async(f,y,h)=>{if(d)return Promise.reject();if(y==null&&f.pages.length)return Promise.resolve(f);const T=(()=>{const g={client:e.client,queryKey:e.queryKey,pageParam:y,direction:h?"backward":"forward",meta:e.options.meta};return p(g),g})(),v=await m(T),{maxPages:S}=e.options,l=h?In:En;return{pages:l(f.pages,v,S),pageParams:l(f.pageParams,y,S)}};if(s&&r.length){const f=s==="backward",y=f?Ia:St,h={pages:r,pageParams:u},C=y(a,h);c=await b(h,C,f)}else{const f=n??r.length;do{const y=o===0?u[0]??a.initialPageParam:St(a,c);if(o>0&&y==null)break;c=await b(c,y),o++}while(o<f)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(i,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=i}}}function St(n,{pages:e,pageParams:t}){const a=e.length-1;return e.length>0?n.getNextPageParam(e[a],e,t[a],t):void 0}function Ia(n,{pages:e,pageParams:t}){return e.length>0?n.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var Ea=class extends Vt{constructor(n={}){super(),this.config=n,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(n,e,t){const a=new Sn({client:n,mutationCache:this,mutationId:++this.#n,options:n.defaultMutationOptions(e),state:t});return this.add(a),a}add(n){this.#e.add(n);const e=be(n);if(typeof e=="string"){const t=this.#t.get(e);t?t.push(n):this.#t.set(e,[n])}this.notify({type:"added",mutation:n})}remove(n){if(this.#e.delete(n)){const e=be(n);if(typeof e=="string"){const t=this.#t.get(e);if(t)if(t.length>1){const a=t.indexOf(n);a!==-1&&t.splice(a,1)}else t[0]===n&&this.#t.delete(e)}}this.notify({type:"removed",mutation:n})}canRun(n){const e=be(n);if(typeof e=="string"){const a=this.#t.get(e)?.find(s=>s.state.status==="pending");return!a||a===n}else return!0}runNext(n){const e=be(n);return typeof e=="string"?this.#t.get(e)?.find(a=>a!==n&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){F.batch(()=>{this.#e.forEach(n=>{this.notify({type:"removed",mutation:n})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(n){const e={exact:!0,...n};return this.getAll().find(t=>yt(e,t))}findAll(n={}){return this.getAll().filter(e=>yt(n,e))}notify(n){F.batch(()=>{this.listeners.forEach(e=>{e(n)})})}resumePausedMutations(){const n=this.getAll().filter(e=>e.state.isPaused);return F.batch(()=>Promise.all(n.map(e=>e.continue().catch(q))))}};function be(n){return n.options.scope?.id}var Sa=class extends Vt{constructor(n={}){super(),this.config=n,this.#e=new Map}#e;build(n,e,t){const a=e.queryKey,s=e.queryHash??Dt(a,e);let r=this.get(s);return r||(r=new _n({client:n,queryKey:a,queryHash:s,options:n.defaultQueryOptions(e),state:t,defaultOptions:n.getQueryDefaults(a)}),this.add(r)),r}add(n){this.#e.has(n.queryHash)||(this.#e.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const e=this.#e.get(n.queryHash);e&&(n.destroy(),e===n&&this.#e.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){F.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#e.get(n)}getAll(){return[...this.#e.values()]}find(n){const e={exact:!0,...n};return this.getAll().find(t=>ht(e,t))}findAll(n={}){const e=this.getAll();return Object.keys(n).length>0?e.filter(t=>ht(n,t)):e}notify(n){F.batch(()=>{this.listeners.forEach(e=>{e(n)})})}onFocus(){F.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){F.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},_a=class{#e;#t;#n;#s;#r;#a;#i;#o;constructor(n={}){this.#e=n.queryCache||new Sa,this.#t=n.mutationCache||new Ea,this.#n=n.defaultOptions||{},this.#s=new Map,this.#r=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#i=Mn.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=mt.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#i?.(),this.#i=void 0,this.#o?.(),this.#o=void 0)}isFetching(n){return this.#e.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#t.findAll({...n,status:"pending"}).length}getQueryData(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=this.#e.build(this,e),a=t.state.data;return a===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(ft(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(a))}getQueriesData(n){return this.#e.findAll(n).map(({queryKey:e,state:t})=>{const a=t.data;return[e,a]})}setQueryData(n,e,t){const a=this.defaultQueryOptions({queryKey:n}),r=this.#e.get(a.queryHash)?.state.data,u=An(e,r);if(u!==void 0)return this.#e.build(this,a).setData(u,{...t,manual:!0})}setQueriesData(n,e,t){return F.batch(()=>this.#e.findAll(n).map(({queryKey:a})=>[a,this.setQueryData(a,e,t)]))}getQueryState(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state}removeQueries(n){const e=this.#e;F.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=this.#e;return F.batch(()=>(t.findAll(n).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},a=F.batch(()=>this.#e.findAll(n).map(s=>s.cancel(t)));return Promise.all(a).then(q).catch(q)}invalidateQueries(n,e={}){return F.batch(()=>(this.#e.findAll(n).forEach(t=>{t.invalidate()}),n?.refetchType==="none"?Promise.resolve():this.refetchQueries({...n,type:n?.refetchType??n?.type??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},a=F.batch(()=>this.#e.findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let r=s.fetch(void 0,t);return t.throwOnError||(r=r.catch(q)),s.state.fetchStatus==="paused"?Promise.resolve():r}));return Promise.all(a).then(q)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=this.#e.build(this,e);return t.isStaleByTime(ft(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(q).catch(q)}fetchInfiniteQuery(n){return n.behavior=Et(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(q).catch(q)}ensureInfiniteQueryData(n){return n.behavior=Et(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return mt.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(n){this.#n=n}setQueryDefaults(n,e){this.#s.set(gt(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...this.#s.values()],t={};return e.forEach(a=>{wt(n,a.queryKey)&&Object.assign(t,a.defaultOptions)}),t}setMutationDefaults(n,e){this.#r.set(gt(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...this.#r.values()],t={};return e.forEach(a=>{wt(n,a.mutationKey)&&Object.assign(t,a.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...this.#n.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Dt(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Bn&&(e.enabled=!1),e}defaultMutationOptions(n){return n?._defaulted?n:{...this.#n.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}};const Ma=me({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:8928790}},testnet:!0}),V=[{type:"constructor",inputs:[],stateMutability:"nonpayable"},{type:"function",name:"UPGRADE_INTERFACE_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"allowance",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"spender",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"decimals",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"getVersion",inputs:[],outputs:[{name:"majorVersion",type:"uint8",internalType:"uint8"},{name:"minorVersion",type:"uint8",internalType:"uint8"},{name:"patchVersion",type:"uint8",internalType:"uint8"}],stateMutability:"pure"},{type:"function",name:"initialize",inputs:[{name:"_owner",type:"address",internalType:"address"},{name:"_initialGrantRecipient",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"name",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"proxiableUUID",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"symbol",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transfer",inputs:[{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferOwnership",inputs:[{name:"newOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"upgradeToAndCall",inputs:[{name:"newImplementation",type:"address",internalType:"address"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"event",name:"Approval",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"spender",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Initialized",inputs:[{name:"version",type:"uint64",indexed:!1,internalType:"uint64"}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Upgrade",inputs:[{name:"implementation",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"Upgraded",inputs:[{name:"implementation",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967InvalidImplementation",inputs:[{name:"implementation",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967NonPayable",inputs:[]},{type:"error",name:"ERC20InsufficientAllowance",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"allowance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ERC20InsufficientBalance",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"balance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ERC20InvalidApprover",inputs:[{name:"approver",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidReceiver",inputs:[{name:"receiver",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidSender",inputs:[{name:"sender",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidSpender",inputs:[{name:"spender",type:"address",internalType:"address"}]},{type:"error",name:"FailedInnerCall",inputs:[]},{type:"error",name:"InvalidInitialization",inputs:[]},{type:"error",name:"NotInitializing",inputs:[]},{type:"error",name:"OwnableInvalidOwner",inputs:[{name:"owner",type:"address",internalType:"address"}]},{type:"error",name:"OwnableUnauthorizedAccount",inputs:[{name:"account",type:"address",internalType:"address"}]},{type:"error",name:"UUPSUnauthorizedCallContext",inputs:[]},{type:"error",name:"UUPSUnsupportedProxiableUUID",inputs:[{name:"slot",type:"bytes32",internalType:"bytes32"}]}];class Aa{constructor(e,t,a){this.config=e,this.chainID=t,this.address=a}async getVersion(){return _(this.config,{abi:V,address:this.address,chainId:this.chainID,functionName:"getVersion"})}async name(){return _(this.config,{abi:V,address:this.address,chainId:this.chainID,functionName:"name"})}async symbol(){return _(this.config,{abi:V,address:this.address,chainId:this.chainID,functionName:"symbol"})}async decimals(){return _(this.config,{abi:V,address:this.address,chainId:this.chainID,functionName:"decimals"})}async totalSupply(){return _(this.config,{abi:V,address:this.address,chainId:this.chainID,functionName:"totalSupply"})}async balanceOf(e){return _(this.config,{abi:V,address:this.address,chainId:this.chainID,functionName:"balanceOf",args:[e]})}async allowance(e,t){return _(this.config,{abi:V,address:this.address,chainId:this.chainID,functionName:"allowance",args:[e,t]})}async transfer(e,t){return D(this.config,{abi:V,address:this.address,chainId:this.chainID,functionName:"transfer",args:[e,t]})}async approve(e,t){return D(this.config,{abi:V,address:this.address,chainId:this.chainID,functionName:"approve",args:[e,t]})}async transferFrom(e,t,a){return D(this.config,{abi:V,address:this.address,chainId:this.chainID,functionName:"transferFrom",args:[e,t,a]})}}const ne=I.createContext(null),We=({children:n})=>x.jsx(Ba,{children:n}),Ba=({children:n})=>{const e=fe(),t=I.useContext(ae),a=t?.espTokenContractAddress?new Aa(e,e.chains[0].id,t.espTokenContractAddress):null;return x.jsx(ne.Provider,{value:a,children:n})};try{ne.displayName="ESPTokenContractContext",ne.__docgenInfo={description:`ESPTokenContractContext provides a React Context
for the ESP token contract.`,displayName:"ESPTokenContractContext",props:{}}}catch{}try{We.displayName="ProvideESPTokenContract",We.__docgenInfo={description:`ProvideESPTokenContract is a React component that provides
the ESP token contract via ESPTokenContractContext.`,displayName:"ProvideESPTokenContract",props:{}}}catch{}class Na{constructor(e,t){this.config=e,this.chainID=t}async getBalance(e){return Nn(this.config,e)}async estimateGas(e){return ta(this.config,e)}async getTransactionReceipt(e){return ra(this.config,e)}async getTransaction(e){return sa(this.config,e)}async getBlock(e){return na(this.config,e)}async getBlockNumber(e){return aa(this.config,e)}}const z=I.createContext(null),ze=({children:n})=>x.jsx(Pa,{children:n}),Pa=({children:n})=>{const e=fe(),t=new Na(e,e.chains[0].id);return x.jsx(z.Provider,{value:t,children:n})};try{z.displayName="L1MethodsContext",z.__docgenInfo={description:"",displayName:"L1MethodsContext",props:{}}}catch{}try{ze.displayName="ProvideL1Methods",ze.__docgenInfo={description:"",displayName:"ProvideL1Methods",props:{}}}catch{}const De=[{type:"function",name:"claimRewards",inputs:[{name:"lifetimeRewards",type:"uint256",internalType:"uint256"},{name:"authData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"claimedRewards",inputs:[{name:"claimer",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getVersion",inputs:[],outputs:[{name:"majorVersion",type:"uint8",internalType:"uint8"},{name:"minorVersion",type:"uint8",internalType:"uint8"},{name:"patchVersion",type:"uint8",internalType:"uint8"}],stateMutability:"pure"},{type:"event",name:"RewardsClaimed",inputs:[{name:"user",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"error",name:"AlreadyClaimed",inputs:[]},{type:"error",name:"DailyLimitExceeded",inputs:[]},{type:"error",name:"InvalidAuthRoot",inputs:[]},{type:"error",name:"InvalidRewardAmount",inputs:[]}];class Ra{constructor(e,t,a){this.config=e,this.chainID=t,this.address=a}async claimedRewards(e){return _(this.config,{abi:De,address:this.address,chainId:this.chainID,functionName:"claimedRewards",args:[e]})}async getVersion(){return _(this.config,{abi:De,address:this.address,chainId:this.chainID,functionName:"getVersion"})}async claimRewards(e,t){return D(this.config,{abi:De,address:this.address,chainId:this.chainID,functionName:"claimRewards",args:[e,t]})}}const Ie=I.createContext(null),Qe=({children:n})=>x.jsx(Fa,{children:n}),Fa=({children:n})=>{const e=fe(),t=I.useContext(ae),a=t?.stakeTableContractAddress?new Ra(e,e.chains[0].id,t.stakeTableContractAddress):null;return x.jsx(Ie.Provider,{value:a,children:n})};try{Ie.displayName="RewardClaimContractContext",Ie.__docgenInfo={description:`RewardClaimContractContext is a React context that provides
the Reward Claim contract instance.`,displayName:"RewardClaimContractContext",props:{}}}catch{}try{Qe.displayName="ProvideRewardClaimContract",Qe.__docgenInfo={description:`ProvideRewardClaimContract is a React component that provides
the Reward Claim contract via RewardClaimContractContext.`,displayName:"ProvideRewardClaimContract",props:{}}}catch{}const N=[{type:"constructor",inputs:[],stateMutability:"nonpayable"},{type:"function",name:"UPGRADE_INTERFACE_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"_hashBlsKey",inputs:[{name:"blsVK",type:"tuple",internalType:"struct BN254.G2Point",components:[{name:"x0",type:"uint256",internalType:"BN254.BaseField"},{name:"x1",type:"uint256",internalType:"BN254.BaseField"},{name:"y0",type:"uint256",internalType:"BN254.BaseField"},{name:"y1",type:"uint256",internalType:"BN254.BaseField"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"pure"},{type:"function",name:"blsKeys",inputs:[{name:"blsKeyHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"used",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"claimValidatorExit",inputs:[{name:"validator",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"claimWithdrawal",inputs:[{name:"validator",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"delegate",inputs:[{name:"validator",type:"address",internalType:"address"},{name:"amount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"delegations",inputs:[{name:"validator",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"}],outputs:[{name:"amount",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"deregisterValidator",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"exitEscrowPeriod",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getVersion",inputs:[],outputs:[{name:"majorVersion",type:"uint8",internalType:"uint8"},{name:"minorVersion",type:"uint8",internalType:"uint8"},{name:"patchVersion",type:"uint8",internalType:"uint8"}],stateMutability:"pure"},{type:"function",name:"initialize",inputs:[{name:"_tokenAddress",type:"address",internalType:"address"},{name:"_lightClientAddress",type:"address",internalType:"address"},{name:"_exitEscrowPeriod",type:"uint256",internalType:"uint256"},{name:"_initialOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"initializedAtBlock",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"lightClient",inputs:[],outputs:[{name:"",type:"address",internalType:"contract LightClientV2"}],stateMutability:"view"},{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"proxiableUUID",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"registerValidator",inputs:[{name:"blsVK",type:"tuple",internalType:"struct BN254.G2Point",components:[{name:"x0",type:"uint256",internalType:"BN254.BaseField"},{name:"x1",type:"uint256",internalType:"BN254.BaseField"},{name:"y0",type:"uint256",internalType:"BN254.BaseField"},{name:"y1",type:"uint256",internalType:"BN254.BaseField"}]},{name:"schnorrVK",type:"tuple",internalType:"struct EdOnBN254.EdOnBN254Point",components:[{name:"x",type:"uint256",internalType:"uint256"},{name:"y",type:"uint256",internalType:"uint256"}]},{name:"blsSig",type:"tuple",internalType:"struct BN254.G1Point",components:[{name:"x",type:"uint256",internalType:"BN254.BaseField"},{name:"y",type:"uint256",internalType:"BN254.BaseField"}]},{name:"commission",type:"uint16",internalType:"uint16"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"token",inputs:[],outputs:[{name:"",type:"address",internalType:"contract ERC20"}],stateMutability:"view"},{type:"function",name:"transferOwnership",inputs:[{name:"newOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"undelegate",inputs:[{name:"validator",type:"address",internalType:"address"},{name:"amount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"undelegations",inputs:[{name:"validator",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"}],outputs:[{name:"amount",type:"uint256",internalType:"uint256"},{name:"unlocksAt",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"updateConsensusKeys",inputs:[{name:"newBlsVK",type:"tuple",internalType:"struct BN254.G2Point",components:[{name:"x0",type:"uint256",internalType:"BN254.BaseField"},{name:"x1",type:"uint256",internalType:"BN254.BaseField"},{name:"y0",type:"uint256",internalType:"BN254.BaseField"},{name:"y1",type:"uint256",internalType:"BN254.BaseField"}]},{name:"newSchnorrVK",type:"tuple",internalType:"struct EdOnBN254.EdOnBN254Point",components:[{name:"x",type:"uint256",internalType:"uint256"},{name:"y",type:"uint256",internalType:"uint256"}]},{name:"newBlsSig",type:"tuple",internalType:"struct BN254.G1Point",components:[{name:"x",type:"uint256",internalType:"BN254.BaseField"},{name:"y",type:"uint256",internalType:"BN254.BaseField"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"upgradeToAndCall",inputs:[{name:"newImplementation",type:"address",internalType:"address"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"validatorExits",inputs:[{name:"validator",type:"address",internalType:"address"}],outputs:[{name:"unlocksAt",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"validators",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"delegatedAmount",type:"uint256",internalType:"uint256"},{name:"status",type:"uint8",internalType:"enum StakeTable.ValidatorStatus"}],stateMutability:"view"},{type:"event",name:"ConsensusKeysUpdated",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"blsVK",type:"tuple",indexed:!1,internalType:"struct BN254.G2Point",components:[{name:"x0",type:"uint256",internalType:"BN254.BaseField"},{name:"x1",type:"uint256",internalType:"BN254.BaseField"},{name:"y0",type:"uint256",internalType:"BN254.BaseField"},{name:"y1",type:"uint256",internalType:"BN254.BaseField"}]},{name:"schnorrVK",type:"tuple",indexed:!1,internalType:"struct EdOnBN254.EdOnBN254Point",components:[{name:"x",type:"uint256",internalType:"uint256"},{name:"y",type:"uint256",internalType:"uint256"}]}],anonymous:!1},{type:"event",name:"Delegated",inputs:[{name:"delegator",type:"address",indexed:!0,internalType:"address"},{name:"validator",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Initialized",inputs:[{name:"version",type:"uint64",indexed:!1,internalType:"uint64"}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"Undelegated",inputs:[{name:"delegator",type:"address",indexed:!0,internalType:"address"},{name:"validator",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Upgrade",inputs:[{name:"implementation",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"Upgraded",inputs:[{name:"implementation",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"ValidatorExit",inputs:[{name:"validator",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"ValidatorRegistered",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"blsVk",type:"tuple",indexed:!1,internalType:"struct BN254.G2Point",components:[{name:"x0",type:"uint256",internalType:"BN254.BaseField"},{name:"x1",type:"uint256",internalType:"BN254.BaseField"},{name:"y0",type:"uint256",internalType:"BN254.BaseField"},{name:"y1",type:"uint256",internalType:"BN254.BaseField"}]},{name:"schnorrVk",type:"tuple",indexed:!1,internalType:"struct EdOnBN254.EdOnBN254Point",components:[{name:"x",type:"uint256",internalType:"uint256"},{name:"y",type:"uint256",internalType:"uint256"}]},{name:"commission",type:"uint16",indexed:!1,internalType:"uint16"}],anonymous:!1},{type:"event",name:"Withdrawal",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"BLSSigVerificationFailed",inputs:[]},{type:"error",name:"BlsKeyAlreadyUsed",inputs:[]},{type:"error",name:"ERC1967InvalidImplementation",inputs:[{name:"implementation",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967NonPayable",inputs:[]},{type:"error",name:"FailedInnerCall",inputs:[]},{type:"error",name:"InsufficientAllowance",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint256",internalType:"uint256"}]},{type:"error",name:"InsufficientBalance",inputs:[{name:"",type:"uint256",internalType:"uint256"}]},{type:"error",name:"InvalidCommission",inputs:[]},{type:"error",name:"InvalidInitialization",inputs:[]},{type:"error",name:"InvalidSchnorrVK",inputs:[]},{type:"error",name:"NotInitializing",inputs:[]},{type:"error",name:"NothingToWithdraw",inputs:[]},{type:"error",name:"OwnableInvalidOwner",inputs:[{name:"owner",type:"address",internalType:"address"}]},{type:"error",name:"OwnableUnauthorizedAccount",inputs:[{name:"account",type:"address",internalType:"address"}]},{type:"error",name:"PrematureWithdrawal",inputs:[]},{type:"error",name:"UUPSUnauthorizedCallContext",inputs:[]},{type:"error",name:"UUPSUnsupportedProxiableUUID",inputs:[{name:"slot",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"UndelegationAlreadyExists",inputs:[]},{type:"error",name:"ValidatorAlreadyExited",inputs:[]},{type:"error",name:"ValidatorAlreadyRegistered",inputs:[]},{type:"error",name:"ValidatorInactive",inputs:[]},{type:"error",name:"ValidatorNotExited",inputs:[]},{type:"error",name:"ZeroAddress",inputs:[]},{type:"error",name:"ZeroAmount",inputs:[]}];var $=(n=>(n[n.unknown=0]="unknown",n[n.active=1]="active",n[n.exited=2]="exited",n))($||{});class _e{constructor(e,t){this.stake=e,this.status=t,Object.freeze(this)}static fromRaw(e){return new _e(e[0],e[1])}toJSON(){return[U.encode(this.stake),Kn.encode(this.status)]}}class Me{constructor(e,t){this.amount=e,this.timestamp=t,Object.freeze(this)}static fromRaw(e){return new Me(e[0],e[1])}toJSON(){return[U.encode(this.amount),U.encode(this.timestamp)]}}class Kt{constructor(e,t,a){this.config=e,this.chainID=t,this.address=a}async lightClient(){return _(this.config,{abi:N,address:this.address,chainId:this.chainID,functionName:"lightClient"})}async token(){return _(this.config,{abi:N,address:this.address,chainId:this.chainID,functionName:"token"})}async validator(e){const t=await _(this.config,{abi:N,address:this.address,chainId:this.chainID,functionName:"validators",args:[e]});return _e.fromRaw(t)}async blsKey(e){return _(this.config,{abi:N,address:this.address,chainId:this.chainID,functionName:"blsKeys",args:[e]})}async validatorExit(e){return _(this.config,{abi:N,address:this.address,chainId:this.chainID,functionName:"validatorExits",args:[e]})}async delegation(e,t){return _(this.config,{abi:N,address:this.address,chainId:this.chainID,functionName:"delegations",args:[e,t]})}async undelegation(e,t){const a=await _(this.config,{abi:N,address:this.address,chainId:this.chainID,functionName:"undelegations",args:[e,t]});return Me.fromRaw(a)}async exitEscrowPeriod(){return _(this.config,{abi:N,address:this.address,chainId:this.chainID,functionName:"exitEscrowPeriod"})}async getVersion(){return _(this.config,{abi:N,address:this.address,chainId:this.chainID,functionName:"getVersion"})}async deregisterValidator(){return D(this.config,{abi:N,address:this.address,chainId:this.chainID,functionName:"deregisterValidator"})}async delegate(e,t){return D(this.config,{abi:N,address:this.address,chainId:this.chainID,functionName:"delegate",args:[e,t]})}async undelegate(e,t){return D(this.config,{abi:N,address:this.address,chainId:this.chainID,functionName:"undelegate",args:[e,t]})}async claimWithdrawal(e){return D(this.config,{abi:N,address:this.address,chainId:this.chainID,functionName:"claimWithdrawal",args:[e]})}async claimValidatorExit(e){return D(this.config,{abi:N,address:this.address,chainId:this.chainID,functionName:"claimValidatorExit",args:[e]})}}const ee=[{type:"constructor",inputs:[],stateMutability:"nonpayable"},{type:"function",name:"DEFAULT_ADMIN_ROLE",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"PAUSER_ROLE",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"UPGRADE_INTERFACE_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"_hashBlsKey",inputs:[{name:"blsVK",type:"tuple",internalType:"struct BN254.G2Point",components:[{name:"x0",type:"uint256",internalType:"BN254.BaseField"},{name:"x1",type:"uint256",internalType:"BN254.BaseField"},{name:"y0",type:"uint256",internalType:"BN254.BaseField"},{name:"y1",type:"uint256",internalType:"BN254.BaseField"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"pure"},{type:"function",name:"activeStake",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"blsKeys",inputs:[{name:"blsKeyHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"used",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"claimValidatorExit",inputs:[{name:"validator",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"claimWithdrawal",inputs:[{name:"validator",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"commissionTracking",inputs:[{name:"validator",type:"address",internalType:"address"}],outputs:[{name:"commission",type:"uint16",internalType:"uint16"},{name:"lastIncreaseTime",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"delegate",inputs:[{name:"validator",type:"address",internalType:"address"},{name:"amount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"delegations",inputs:[{name:"validator",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"}],outputs:[{name:"amount",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"deregisterValidator",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"exitEscrowPeriod",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getRoleAdmin",inputs:[{name:"role",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getVersion",inputs:[],outputs:[{name:"majorVersion",type:"uint8",internalType:"uint8"},{name:"minorVersion",type:"uint8",internalType:"uint8"},{name:"patchVersion",type:"uint8",internalType:"uint8"}],stateMutability:"pure"},{type:"function",name:"grantRole",inputs:[{name:"role",type:"bytes32",internalType:"bytes32"},{name:"account",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"hasRole",inputs:[{name:"role",type:"bytes32",internalType:"bytes32"},{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"initialize",inputs:[{name:"_tokenAddress",type:"address",internalType:"address"},{name:"_lightClientAddress",type:"address",internalType:"address"},{name:"_exitEscrowPeriod",type:"uint256",internalType:"uint256"},{name:"_timelock",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"initializeV2",inputs:[{name:"pauser",type:"address",internalType:"address"},{name:"admin",type:"address",internalType:"address"},{name:"initialActiveStake",type:"uint256",internalType:"uint256"},{name:"initialCommissions",type:"tuple[]",internalType:"struct StakeTableV2.InitialCommission[]",components:[{name:"validator",type:"address",internalType:"address"},{name:"commission",type:"uint16",internalType:"uint16"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"initializedAtBlock",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"lightClient",inputs:[],outputs:[{name:"",type:"address",internalType:"contract ILightClient"}],stateMutability:"view"},{type:"function",name:"maxCommissionIncrease",inputs:[],outputs:[{name:"",type:"uint16",internalType:"uint16"}],stateMutability:"view"},{type:"function",name:"minCommissionIncreaseInterval",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"pause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"paused",inputs:[],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"proxiableUUID",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"registerValidator",inputs:[{name:"",type:"tuple",internalType:"struct BN254.G2Point",components:[{name:"x0",type:"uint256",internalType:"BN254.BaseField"},{name:"x1",type:"uint256",internalType:"BN254.BaseField"},{name:"y0",type:"uint256",internalType:"BN254.BaseField"},{name:"y1",type:"uint256",internalType:"BN254.BaseField"}]},{name:"",type:"tuple",internalType:"struct EdOnBN254.EdOnBN254Point",components:[{name:"x",type:"uint256",internalType:"uint256"},{name:"y",type:"uint256",internalType:"uint256"}]},{name:"",type:"tuple",internalType:"struct BN254.G1Point",components:[{name:"x",type:"uint256",internalType:"BN254.BaseField"},{name:"y",type:"uint256",internalType:"BN254.BaseField"}]},{name:"",type:"uint16",internalType:"uint16"}],outputs:[],stateMutability:"pure"},{type:"function",name:"registerValidatorV2",inputs:[{name:"blsVK",type:"tuple",internalType:"struct BN254.G2Point",components:[{name:"x0",type:"uint256",internalType:"BN254.BaseField"},{name:"x1",type:"uint256",internalType:"BN254.BaseField"},{name:"y0",type:"uint256",internalType:"BN254.BaseField"},{name:"y1",type:"uint256",internalType:"BN254.BaseField"}]},{name:"schnorrVK",type:"tuple",internalType:"struct EdOnBN254.EdOnBN254Point",components:[{name:"x",type:"uint256",internalType:"uint256"},{name:"y",type:"uint256",internalType:"uint256"}]},{name:"blsSig",type:"tuple",internalType:"struct BN254.G1Point",components:[{name:"x",type:"uint256",internalType:"BN254.BaseField"},{name:"y",type:"uint256",internalType:"BN254.BaseField"}]},{name:"schnorrSig",type:"bytes",internalType:"bytes"},{name:"commission",type:"uint16",internalType:"uint16"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"renounceRole",inputs:[{name:"role",type:"bytes32",internalType:"bytes32"},{name:"callerConfirmation",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"revokeRole",inputs:[{name:"role",type:"bytes32",internalType:"bytes32"},{name:"account",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"schnorrKeys",inputs:[{name:"schnorrKey",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"used",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"setMaxCommissionIncrease",inputs:[{name:"newMaxIncrease",type:"uint16",internalType:"uint16"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setMinCommissionUpdateInterval",inputs:[{name:"newInterval",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsInterface",inputs:[{name:"interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"token",inputs:[],outputs:[{name:"",type:"address",internalType:"contract ERC20"}],stateMutability:"view"},{type:"function",name:"transferOwnership",inputs:[{name:"newOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"undelegate",inputs:[{name:"validator",type:"address",internalType:"address"},{name:"amount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"undelegations",inputs:[{name:"validator",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"}],outputs:[{name:"amount",type:"uint256",internalType:"uint256"},{name:"unlocksAt",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"unpause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"updateCommission",inputs:[{name:"newCommission",type:"uint16",internalType:"uint16"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"updateConsensusKeys",inputs:[{name:"",type:"tuple",internalType:"struct BN254.G2Point",components:[{name:"x0",type:"uint256",internalType:"BN254.BaseField"},{name:"x1",type:"uint256",internalType:"BN254.BaseField"},{name:"y0",type:"uint256",internalType:"BN254.BaseField"},{name:"y1",type:"uint256",internalType:"BN254.BaseField"}]},{name:"",type:"tuple",internalType:"struct EdOnBN254.EdOnBN254Point",components:[{name:"x",type:"uint256",internalType:"uint256"},{name:"y",type:"uint256",internalType:"uint256"}]},{name:"",type:"tuple",internalType:"struct BN254.G1Point",components:[{name:"x",type:"uint256",internalType:"BN254.BaseField"},{name:"y",type:"uint256",internalType:"BN254.BaseField"}]}],outputs:[],stateMutability:"pure"},{type:"function",name:"updateConsensusKeysV2",inputs:[{name:"blsVK",type:"tuple",internalType:"struct BN254.G2Point",components:[{name:"x0",type:"uint256",internalType:"BN254.BaseField"},{name:"x1",type:"uint256",internalType:"BN254.BaseField"},{name:"y0",type:"uint256",internalType:"BN254.BaseField"},{name:"y1",type:"uint256",internalType:"BN254.BaseField"}]},{name:"schnorrVK",type:"tuple",internalType:"struct EdOnBN254.EdOnBN254Point",components:[{name:"x",type:"uint256",internalType:"uint256"},{name:"y",type:"uint256",internalType:"uint256"}]},{name:"blsSig",type:"tuple",internalType:"struct BN254.G1Point",components:[{name:"x",type:"uint256",internalType:"BN254.BaseField"},{name:"y",type:"uint256",internalType:"BN254.BaseField"}]},{name:"schnorrSig",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"updateExitEscrowPeriod",inputs:[{name:"newExitEscrowPeriod",type:"uint64",internalType:"uint64"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"upgradeToAndCall",inputs:[{name:"newImplementation",type:"address",internalType:"address"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"validatorExits",inputs:[{name:"validator",type:"address",internalType:"address"}],outputs:[{name:"unlocksAt",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"validators",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"delegatedAmount",type:"uint256",internalType:"uint256"},{name:"status",type:"uint8",internalType:"enum StakeTable.ValidatorStatus"}],stateMutability:"view"},{type:"event",name:"CommissionUpdated",inputs:[{name:"validator",type:"address",indexed:!0,internalType:"address"},{name:"timestamp",type:"uint256",indexed:!1,internalType:"uint256"},{name:"oldCommission",type:"uint16",indexed:!1,internalType:"uint16"},{name:"newCommission",type:"uint16",indexed:!1,internalType:"uint16"}],anonymous:!1},{type:"event",name:"ConsensusKeysUpdated",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"blsVK",type:"tuple",indexed:!1,internalType:"struct BN254.G2Point",components:[{name:"x0",type:"uint256",internalType:"BN254.BaseField"},{name:"x1",type:"uint256",internalType:"BN254.BaseField"},{name:"y0",type:"uint256",internalType:"BN254.BaseField"},{name:"y1",type:"uint256",internalType:"BN254.BaseField"}]},{name:"schnorrVK",type:"tuple",indexed:!1,internalType:"struct EdOnBN254.EdOnBN254Point",components:[{name:"x",type:"uint256",internalType:"uint256"},{name:"y",type:"uint256",internalType:"uint256"}]}],anonymous:!1},{type:"event",name:"ConsensusKeysUpdatedV2",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"blsVK",type:"tuple",indexed:!1,internalType:"struct BN254.G2Point",components:[{name:"x0",type:"uint256",internalType:"BN254.BaseField"},{name:"x1",type:"uint256",internalType:"BN254.BaseField"},{name:"y0",type:"uint256",internalType:"BN254.BaseField"},{name:"y1",type:"uint256",internalType:"BN254.BaseField"}]},{name:"schnorrVK",type:"tuple",indexed:!1,internalType:"struct EdOnBN254.EdOnBN254Point",components:[{name:"x",type:"uint256",internalType:"uint256"},{name:"y",type:"uint256",internalType:"uint256"}]},{name:"blsSig",type:"tuple",indexed:!1,internalType:"struct BN254.G1Point",components:[{name:"x",type:"uint256",internalType:"BN254.BaseField"},{name:"y",type:"uint256",internalType:"BN254.BaseField"}]},{name:"schnorrSig",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"event",name:"Delegated",inputs:[{name:"delegator",type:"address",indexed:!0,internalType:"address"},{name:"validator",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"ExitEscrowPeriodUpdated",inputs:[{name:"newExitEscrowPeriod",type:"uint64",indexed:!1,internalType:"uint64"}],anonymous:!1},{type:"event",name:"Initialized",inputs:[{name:"version",type:"uint64",indexed:!1,internalType:"uint64"}],anonymous:!1},{type:"event",name:"MaxCommissionIncreaseUpdated",inputs:[{name:"newMaxIncrease",type:"uint16",indexed:!1,internalType:"uint16"}],anonymous:!1},{type:"event",name:"MinCommissionUpdateIntervalUpdated",inputs:[{name:"newInterval",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"Paused",inputs:[{name:"account",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"RoleAdminChanged",inputs:[{name:"role",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"previousAdminRole",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"newAdminRole",type:"bytes32",indexed:!0,internalType:"bytes32"}],anonymous:!1},{type:"event",name:"RoleGranted",inputs:[{name:"role",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"sender",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"RoleRevoked",inputs:[{name:"role",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"sender",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"Undelegated",inputs:[{name:"delegator",type:"address",indexed:!0,internalType:"address"},{name:"validator",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Unpaused",inputs:[{name:"account",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"Upgraded",inputs:[{name:"implementation",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"ValidatorExit",inputs:[{name:"validator",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"ValidatorRegistered",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"blsVk",type:"tuple",indexed:!1,internalType:"struct BN254.G2Point",components:[{name:"x0",type:"uint256",internalType:"BN254.BaseField"},{name:"x1",type:"uint256",internalType:"BN254.BaseField"},{name:"y0",type:"uint256",internalType:"BN254.BaseField"},{name:"y1",type:"uint256",internalType:"BN254.BaseField"}]},{name:"schnorrVk",type:"tuple",indexed:!1,internalType:"struct EdOnBN254.EdOnBN254Point",components:[{name:"x",type:"uint256",internalType:"uint256"},{name:"y",type:"uint256",internalType:"uint256"}]},{name:"commission",type:"uint16",indexed:!1,internalType:"uint16"}],anonymous:!1},{type:"event",name:"ValidatorRegisteredV2",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"blsVK",type:"tuple",indexed:!1,internalType:"struct BN254.G2Point",components:[{name:"x0",type:"uint256",internalType:"BN254.BaseField"},{name:"x1",type:"uint256",internalType:"BN254.BaseField"},{name:"y0",type:"uint256",internalType:"BN254.BaseField"},{name:"y1",type:"uint256",internalType:"BN254.BaseField"}]},{name:"schnorrVK",type:"tuple",indexed:!1,internalType:"struct EdOnBN254.EdOnBN254Point",components:[{name:"x",type:"uint256",internalType:"uint256"},{name:"y",type:"uint256",internalType:"uint256"}]},{name:"commission",type:"uint16",indexed:!1,internalType:"uint16"},{name:"blsSig",type:"tuple",indexed:!1,internalType:"struct BN254.G1Point",components:[{name:"x",type:"uint256",internalType:"BN254.BaseField"},{name:"y",type:"uint256",internalType:"BN254.BaseField"}]},{name:"schnorrSig",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"event",name:"Withdrawal",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"error",name:"AccessControlBadConfirmation",inputs:[]},{type:"error",name:"AccessControlUnauthorizedAccount",inputs:[{name:"account",type:"address",internalType:"address"},{name:"neededRole",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"BLSSigVerificationFailed",inputs:[]},{type:"error",name:"BN254PairingProdFailed",inputs:[]},{type:"error",name:"BlsKeyAlreadyUsed",inputs:[]},{type:"error",name:"CommissionAlreadyInitialized",inputs:[{name:"validator",type:"address",internalType:"address"}]},{type:"error",name:"CommissionIncreaseExceedsMax",inputs:[]},{type:"error",name:"CommissionUnchanged",inputs:[]},{type:"error",name:"CommissionUpdateTooSoon",inputs:[]},{type:"error",name:"DeprecatedFunction",inputs:[]},{type:"error",name:"ERC1967InvalidImplementation",inputs:[{name:"implementation",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967NonPayable",inputs:[]},{type:"error",name:"EnforcedPause",inputs:[]},{type:"error",name:"ExitEscrowPeriodInvalid",inputs:[]},{type:"error",name:"ExpectedPause",inputs:[]},{type:"error",name:"FailedInnerCall",inputs:[]},{type:"error",name:"InitialActiveStakeExceedsBalance",inputs:[]},{type:"error",name:"InsufficientAllowance",inputs:[{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint256",internalType:"uint256"}]},{type:"error",name:"InsufficientBalance",inputs:[{name:"",type:"uint256",internalType:"uint256"}]},{type:"error",name:"InvalidCommission",inputs:[]},{type:"error",name:"InvalidG1",inputs:[]},{type:"error",name:"InvalidInitialization",inputs:[]},{type:"error",name:"InvalidRateLimitParameters",inputs:[]},{type:"error",name:"InvalidSchnorrSig",inputs:[]},{type:"error",name:"InvalidSchnorrVK",inputs:[]},{type:"error",name:"NotInitializing",inputs:[]},{type:"error",name:"NothingToWithdraw",inputs:[]},{type:"error",name:"OwnableInvalidOwner",inputs:[{name:"owner",type:"address",internalType:"address"}]},{type:"error",name:"OwnableUnauthorizedAccount",inputs:[{name:"account",type:"address",internalType:"address"}]},{type:"error",name:"PowPrecompileFailed",inputs:[]},{type:"error",name:"PrematureWithdrawal",inputs:[]},{type:"error",name:"SchnorrKeyAlreadyUsed",inputs:[]},{type:"error",name:"UUPSUnauthorizedCallContext",inputs:[]},{type:"error",name:"UUPSUnsupportedProxiableUUID",inputs:[{name:"slot",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"UndelegationAlreadyExists",inputs:[]},{type:"error",name:"ValidatorAlreadyExited",inputs:[]},{type:"error",name:"ValidatorAlreadyRegistered",inputs:[]},{type:"error",name:"ValidatorInactive",inputs:[]},{type:"error",name:"ValidatorNotExited",inputs:[]},{type:"error",name:"ZeroAddress",inputs:[]},{type:"error",name:"ZeroAmount",inputs:[]}];class Oa extends Kt{constructor(e,t,a){super(e,t,a)}async PAUSER_ROLE(){return _(this.config,{abi:ee,address:this.address,chainId:this.chainID,functionName:"PAUSER_ROLE"})}async minCommissionIncreaseInterval(){return _(this.config,{abi:ee,address:this.address,chainId:this.chainID,functionName:"minCommissionIncreaseInterval"})}async maxCommissionIncrease(){return _(this.config,{abi:ee,address:this.address,chainId:this.chainID,functionName:"maxCommissionIncrease"})}async activeStake(){return _(this.config,{abi:ee,address:this.address,chainId:this.chainID,functionName:"activeStake"})}async commissionTracking(e){return _(this.config,{abi:ee,address:this.address,chainId:this.chainID,functionName:"commissionTracking",args:[e]})}async updateConsensusKeysV2(e,t,a,s){return D(this.config,{abi:ee,address:this.address,chainId:this.chainID,functionName:"updateConsensusKeysV2",args:[e,t,a,s]})}}const pe=I.createContext(null),_t=({children:n})=>x.jsx(Ua,{children:n}),Ua=({children:n})=>{const e=fe(),t=I.useContext(ae),a=t?.stakeTableContractAddress?new Kt(e,e.chains[0].id,t.stakeTableContractAddress):null;return x.jsx(pe.Provider,{value:a,children:n})};try{pe.displayName="StakeTableContractContext",pe.__docgenInfo={description:"",displayName:"StakeTableContractContext",props:{}}}catch{}try{_t.displayName="ProvideStakeTableContract",_t.__docgenInfo={description:`ProvideESPTokenContract is a React component that provides
the ESP token contract via ESPTokenContractContext.`,displayName:"ProvideStakeTableContract",props:{}}}catch{}const Ee=I.createContext(null),Ge=({children:n})=>x.jsx(Va,{children:n}),Va=({children:n})=>{const e=fe(),t=I.useContext(ae),a=t?.stakeTableContractAddress?new Oa(e,e.chains[0].id,t.stakeTableContractAddress):null;return x.jsx(pe.Provider,{value:a,children:x.jsx(Ee.Provider,{value:a,children:n})})};try{Ee.displayName="StakeTableV2ContractContext",Ee.__docgenInfo={description:"",displayName:"StakeTableV2ContractContext",props:{}}}catch{}try{Ge.displayName="ProvideStakeTableV2Contract",Ge.__docgenInfo={description:`ProvideStakeTableV2Contract is a React component that provides
the Stake Table V2 contract via StakeTableV2ContractContext.`,displayName:"ProvideStakeTableV2Contract",props:{}}}catch{}function Da(n,e,t){const a=K("keccak256"),s=new TextEncoder;a.update(s.encode("Transfer").buffer),a.update(s.encode(String(n)).buffer),a.update(s.encode(String(e)).buffer);for(const r of t)a.update(s.encode(r.hash).buffer);return O.encode(a.digest())}class Q{constructor(e,t=null){this.storage=e,this.accountAddress=t}replaceAccountAddress(e){return new Q(this.storage,e)}setAccountAddress(e){this.accountAddress=e}async getBalance(e){const t=e.address,a=this.storage.balances.get(t)??0n;return{decimals:18,formatted:String(a),symbol:"ESP",value:a}}async estimateGas(){return 1000000000n}receiptFromTransactionAndBlock(e,t){const a=t.transactions.reduce((s,r)=>s+r.gas,0n);return{chainId:31337,blockHash:t.hash,blockNumber:t.height,contractAddress:e.contractAddress,cumulativeGasUsed:a,effectiveGasPrice:1n,from:e.transaction.from,gasUsed:a,logs:[],logsBloom:"0x",status:"success",to:e.transaction.to,transactionHash:e.hash,transactionIndex:t.transactions.findIndex(s=>s.hash===e.hash),type:"legacy"}}async getTransactionReceipt(e){const t=e.hash,a=this.storage.transactions.get(t);if(!a)throw new Error("Transaction not found");const s=this.storage.transactionToBlockMap.get(t)??null;if(!s)throw new Error("Block height not found");const r=this.storage.blocks[Number(s)];if(!r)throw new Error("Block not found");return this.receiptFromTransactionAndBlock(a,r)}transactionFromTransactionAndBlock(e,t){return t?{chainId:31337,gasPrice:1n,blockNumber:e.blockHeight,blockHash:t.hash,transactionIndex:t.transactions.findIndex(a=>a.hash===e.hash),from:this.accountAddress??"0x00000000000000000000000000000000",to:e.contractAddress??"0x00000000000000000000000000000000",gas:e.gas,hash:e.hash,input:"0x",nonce:0,r:"0x",s:"0x",v:0n,type:"legacy",typeHex:"0x1",value:e.value}:{chainId:31337,gasPrice:1n,from:this.accountAddress??"0x00000000000000000000000000000000",to:e.contractAddress??"0x00000000000000000000000000000000",gas:e.gas,hash:e.hash,input:"0x",nonce:0,r:"0x",s:"0x",v:0n,type:"legacy",typeHex:"0x1",value:e.value}}async getTransaction(e){const t=e.hash;if(!t)throw new Error("Transaction hash is required");const a=this.storage.transactions.get(t);if(!a){const r=this.storage.pendingTransactions.find(u=>u.hash===t);if(!r)throw new Error("Transaction not found");return this.transactionFromTransactionAndBlock(r,null)}const s=this.storage.blocks[Number(a.blockHeight)];return this.transactionFromTransactionAndBlock(a,s)}blockHeightFromTag(e="latest"){switch(e){case"latest":return this.storage.pendingBlockHeight-1n;case"earliest":return 0n;case"pending":return this.storage.pendingBlockHeight;case"safe":return this.storage.pendingBlockHeight>30n?0n:this.storage.pendingBlockHeight-30n;case"finalized":return this.storage.pendingBlockHeight>60n?0n:this.storage.pendingBlockHeight-60n;default:throw new Error("Unsupported blockTag")}}blockHeightFromGetBlockParameters(e){const t=e?.blockNumber??null;return t!==null?t:this.blockHeightFromTag(e?.blockTag??"latest")}blockFromBlock(e,t=!1){const a=e.transactions.reduce((r,u)=>r+u.gas,0n),s=t?e.transactions.map(r=>this.transactionFromTransactionAndBlock(r,e)):e.transactions.map(r=>r.hash);return{chainId:31337,baseFeePerGas:1n,blobGasUsed:0n,excessBlobGas:0n,difficulty:0n,extraData:"0x",logsBloom:"0x",gasLimit:a,gasUsed:a,miner:"0x",mixHash:"0x",number:e.height,hash:e.hash,nonce:"0x",parentHash:"0x",receiptsRoot:"0x",sealFields:[],sha3Uncles:"0x",size:0n,stateRoot:"0x",timestamp:e.timestamp,totalDifficulty:null,transactions:s,transactionsRoot:"0x",uncles:[],withdrawals:[]}}async getBlock(e){const t=this.blockHeightFromGetBlockParameters(e),a=this.storage.blocks[Number(t)];if(!a)throw new Error("Block not found");return this.blockFromBlock(a,e?.includeTransactions)}async getBlockNumber(e){return this.blockHeightFromTag(e?.blockTag)}transactionCallBack=null;setTransactionCallback(e){this.transactionCallBack=e}mockWriteContractStorage(e,t){this.storage.contractStorage.set(e,t)}mockReadContractStorage(e){return this.storage.contractStorage.get(e)}mockWriteTransaction(e){const t=e.hash(),a={hash:t,blockHeight:this.storage.pendingBlockHeight,transaction:e,from:e.from,to:e.to,value:e.value,gas:e.gas};this.storage.transactions.set(t,a),this.storage.pendingTransactions.push(a)}mockAdvanceBlock(){const e=BigInt(Math.floor(Date.now()/1e3)),t=this.storage.pendingBlockHeight,a=Da(t,e,this.storage.pendingTransactions),s=this.storage.pendingTransactions;this.storage.pendingBlockHeight++,this.storage.pendingTransactions=[];const r={hash:a,height:t,timestamp:e,transactions:s};this.storage.blocks.push(r);for(const u of r.transactions)this.storage.transactionToBlockMap.set(u.hash,r.height),this.transactionCallBack&&this.transactionCallBack.l1Transaction(u.transaction)}}function qa(n={}){const[e]=I.useState({balances:n.balances??new Map,transactions:n.transactions??new Map,accountAddress:n.accountAddress??null,pendingBlockHeight:n.pendingBlockHeight??1n,pendingTransactions:n.pendingTransactions??[],transactionToBlockMap:n.transactionToBlockMap??new Map,blocks:n.blocks??[{hash:"0x0",height:0n,transactions:[],timestamp:0n}],contractStorage:n.contractStorage??new Map});return e}const ja=n=>{const e=n.interval??12e3,t=I.useContext(z);return I.useEffect(()=>{if(!(t instanceof Q))return;const a=setInterval(()=>{t.mockAdvanceBlock()},e);return()=>clearInterval(a)},[t,e]),null},$e=({children:n})=>{const e=qa(),[t]=I.useState(new Q(e)),a=I.useContext(Se);return I.useEffect(()=>(t.setAccountAddress(a),()=>{}),[t,a]),x.jsxs(z.Provider,{value:t,children:[x.jsx(ja,{}),n]})};try{$e.displayName="MockL1Methods",$e.__docgenInfo={description:`MockESPTokenContract is a React component that provides
a mock ESPTokenContract implementation via context for
testing and development purposes.

It will overwrite the ESPTokenContractContext with a mock
implementation that simulates the behavior of an actual
ESPTokenContract.`,displayName:"MockL1Methods",props:{}}}catch{}const ye="0xdeadc0dedeadc0dedeadc0dedeadc0dedeadc0de",La={address:ye,displayName:"mocked_account.eth",hasPendingTransactions:!1},Mt={id:31337,hasIcon:!1};function Ka(){const[n,e]=Qt.useState({account:null,chain:null});return{openAccountModal:()=>{e(t=>({...t,account:null,chain:null}))},openChainModal:()=>{e(t=>({...t,chain:Mt}))},openConnectModal:()=>{e(t=>({...t,account:La,chain:Mt}))},accountModalOpen:!1,chainModalOpen:!1,connectModalOpen:!1,account:n.account,chain:n.chain,authenticationStatus:n.account===null?"unauthenticated":"authenticated"}}const Je=({children:n})=>{const{openAccountModal:e,openChainModal:t,openConnectModal:a,accountModalOpen:s,chainModalOpen:r,connectModalOpen:u,account:c,chain:o,authenticationStatus:i}=Ka();return x.jsx(Pn.Provider,{value:!0,children:x.jsx(Rn.Provider,{value:{openAccountModal:e,openChainModal:t,openConnectModal:a,accountModalOpen:s,chainModalOpen:r,connectModalOpen:u},children:x.jsx(Fn,{value:c??null,children:x.jsx(On.Provider,{value:o??null,children:x.jsx(Un.Provider,{value:i??null,children:n})})})})})};try{ye.displayName="MockAddress",ye.__docgenInfo={description:`MockAddress is a predefined mock address used in the
MockRainbowKit component.`,displayName:"MockAddress",props:{}}}catch{}try{Je.displayName="MockRainbowKit",Je.__docgenInfo={description:`MockRainbowKit is a React component that provides
mock implementations of RainbowKit contexts for testing
and development purposes.

When it comes to testing UI / UX and layout of current designs, it is
helpful to have a mock implementation of RainbowKit components available
and ready to use in order to generate a predefined controllable state.

Such configurations allow for the accounting of various edge cases
and scenarios that may arise during actual usage of the application.`,displayName:"MockRainbowKit",props:{}}}catch{}function qe(n,e){const t=n.mockReadContractStorage(de)??null;W(t),n.mockWriteContractStorage(de,{...e.applyToState(t),lastUpdate:e.ts}),n.mockWriteTransaction(e)}class Ht{contractAddress;ts=new Date}class At extends Ht{constructor(e,t,a,s){super(),this.contractAddress=e,this.from=t,this.to=a,this.value=s,this.from=t,this.to=a,this.value=s}gas=21000n;hash(){const e=K("keccak256"),t=new TextEncoder;return e.update(t.encode("Transfer").buffer),e.update(t.encode(this.ts.toISOString()).buffer),e.update(t.encode(this.from).buffer),e.update(t.encode(this.to).buffer),e.update(t.encode(U.encoder.convert(this.value)).buffer),O.encode(e.digest())}applyToState(e){const t=new Map(e.balances),a=t.get(this.from)??0n,s=t.get(this.to)??0n;return t.set(this.from,a-this.value),t.set(this.to,s+this.value),{...e,balances:t}}}class Ha extends Ht{constructor(e,t,a,s){super(),this.contractAddress=e,this.owner=t,this.spender=a,this.value=s,this.owner=t,this.spender=a,this.value=s}gas=21000n;get from(){return this.owner}get to(){return this.spender}hash(){const e=K("keccak256"),t=new TextEncoder;return e.update(t.encode("Approve").buffer),e.update(t.encode(this.ts.toISOString()).buffer),e.update(t.encode(this.owner).buffer),e.update(t.encode(this.spender).buffer),e.update(t.encode(U.encoder.convert(this.value)).buffer),O.encode(e.digest())}applyToState(e){const t=new Map(e.allowances),a=new Map(t.get(this.owner)??new Map);return a.set(this.spender,this.value),t.set(this.owner,a),{...e,allowances:t}}}const de=Symbol("MockTokenContract");class L{constructor(e,t,a=null){this.l1Methods=e,this.accountAddress=a,this.l1Methods.mockReadContractStorage(de)||this.l1Methods.mockWriteContractStorage(de,{...t}),this.accountAddress=a}get state(){const e=this.l1Methods.mockReadContractStorage(de)??null;return W(e),e}replaceAccountAddress(e){return new L(this.l1Methods,this.state,e)}setAccountAddress(e){this.accountAddress=e}get lastUpdate(){return this.state.lastUpdate}get address(){return this.state.contractAddress}async getVersion(){return this.state.version}async name(){return this.state.name}async symbol(){return this.state.symbol}async decimals(){return this.state.decimals}async totalSupply(){return this.state.totalSupply}async balanceOf(e){return this.state.balances.get(e)??0n}async allowance(e,t){return this.state.allowances.get(e)?.get(t)??0n}async transfer(e,t){if(!this.accountAddress)throw new Error("No account address available for transfer.");const a=this.accountAddress;if(t<0n)throw new Error("Transfer value cannot be negative.");if(t>await this.balanceOf(a))throw new Error("Insufficient balance for transfer.");const s=new At(this.address,a,e,t);return qe(this.l1Methods,s),s.hash()}async approve(e,t){if(!this.accountAddress)throw new Error("No account address available for approve.");const a=new Ha(this.address,this.accountAddress,e,t);return qe(this.l1Methods,a),a.hash()}async transferFrom(e,t,a){if(a<0n)throw new Error("Transfer value cannot be negative.");if(await this.allowance(e,t)<a)throw new Error("Insufficient allowance for transfer.");if(a>await this.balanceOf(e))throw new Error("Insufficient balance for transfer.");const r=new At(this.address,e,t,a);return qe(this.l1Methods,r),r.hash()}}function Wa(n){const e="0x0000000000000000000000000000000000000001",[t]=I.useState({contractAddress:e,version:[1,0,0],name:"Espresso Token",symbol:"ESP",decimals:18,totalSupply:12345678900n*10n**18n,balances:new Map([[ye,5000000000000000000000n],["0x0000000000000000000000000000000000000002",ot((a,s)=>a+s.stake,0n,G)],["0x0000000000000000000000000000000000000003",1000000000000000000000000000n]]),allowances:new Map,lastUpdate:new Date});return t}const Ze=({children:n})=>{const e=I.useContext(z),t=Wa(),a=I.useContext(Se);te(e instanceof Q);const[s]=I.useState(new L(e,t));if(I.useEffect(()=>(s.setAccountAddress(a),()=>{}),[s,a]),!(e instanceof Q))throw new Error("MockESPTokenContract requires MockL1MethodsImpl");return x.jsx(ne.Provider,{value:s,children:n})};try{L.displayName="MockESPTokenContractImpl",L.__docgenInfo={description:`MockESPTokenContractImpl is a mock implementation of the ESPTokenContract
interface for testing and development purposes.

It simulates the behavior of an actual ESPTokenContract by maintaining
an internal state and providing methods to interact with that state.
This is done to simulate some consistency of the expected behavior of the
real contract without needing to connect to a live blockchain.`,displayName:"MockESPTokenContractImpl",props:{}}}catch{}try{Ze.displayName="MockESPTokenContract",Ze.__docgenInfo={description:`MockESPTokenContract is a React component that provides
a mock ESPTokenContract implementation via context for
testing and development purposes.

It will overwrite the ESPTokenContractContext with a mock
implementation that simulates the behavior of an actual
ESPTokenContract.`,displayName:"MockESPTokenContract",props:{}}}catch{}function za(n,e){const t=n.mockReadContractStorage(ue)??null;W(t),n.mockWriteContractStorage(ue,{...e.applyToState(t),lastUpdate:e.ts}),n.mockWriteTransaction(e)}const ue=Symbol("RewardClaimStorage");class Qa{contractAddress;ts=new Date}class Ga extends Qa{constructor(e,t,a,s){super(),this.contractAddress=e,this.delegator=t,this.lifetimeRewards=a,this.authData=s}gas=21000n;get from(){return this.contractAddress}get to(){return this.delegator}get value(){return this.lifetimeRewards}hash(){const e=K("keccak256"),t=new TextEncoder;return e.update(t.encode("ClaimReward").buffer),e.update(t.encode(this.ts.toISOString()).buffer),e.update(t.encode(this.delegator).buffer),e.update(t.encode(U.encoder.convert(this.lifetimeRewards)).buffer),O.encode(e.digest())}applyToState(e){const t=new Map(e.claimedRewards);return t.set(this.delegator,this.lifetimeRewards),{...e,claimedRewards:t}}}class ut{constructor(e,t,a,s=null){this.l1Methods=e,this.espToken=t,this.accountAddress=s,this.l1Methods.mockReadContractStorage(ue)||this.l1Methods.mockWriteContractStorage(ue,{...a}),this.accountAddress=s,this.espToken=t.replaceAccountAddress(a.contractAddress)}get state(){const e=this.l1Methods.mockReadContractStorage(ue)??null;return W(e),e}replaceAccountAddress(e){return new ut(this.l1Methods,this.espToken,this.state,e)}setAccountAddress(e){this.accountAddress=e}get lastUpdate(){return this.state.lastUpdate}get address(){return this.state.contractAddress}async claimedRewards(e){return this.state.claimedRewards.get(e)??0n}async getVersion(){return[1,0,0]}async claimRewards(e,t){if(!this.accountAddress)throw new Error("no active account detected");const a=await this.claimedRewards(this.accountAddress),s=e-a;if(s<0n)throw new Error("lifetimeRewards cannot be less than previously claimed rewards");this.espToken.transfer(this.accountAddress,s);const r=new Ga(this.address,this.accountAddress,e,t);return za(this.l1Methods,r),r.hash()}}function $a(n){const e="0x0000000000000000000000000000000000000003",[t]=I.useState({contractAddress:e,claimedRewards:new Map,lastUpdate:new Date});return t}const Xe=({children:n})=>{const e=I.useContext(z),t=I.useContext(ne),a=$a(),s=I.useContext(Se);te(e instanceof Q),te(t instanceof L);const[r]=I.useState(()=>new ut(e,t,a));return I.useEffect(()=>(r.setAccountAddress(s),()=>{}),[r,s]),x.jsx(Ie.Provider,{value:r,children:n})};try{Xe.displayName="MockRewardClaimContract",Xe.__docgenInfo={description:`MockRewardClaimContract is a React component that provides
a mock RewardClaimContract implementation via context for
testing and development purposes.

It will overwrite the RewardClaimContractContext with a mock
implementation that simulates the behavior of an actual
RewardClaimContract.`,displayName:"MockRewardClaimContract",props:{}}}catch{}class J{contractAddress;ts=new Date}function oe(n,e){const t=n.mockReadContractStorage(le)??null;W(t);const a={...e.applyToState(t),lastUpdate:e.ts};n.mockWriteContractStorage(le,a),n.mockWriteTransaction(e)}class Ye extends J{constructor(e,t,a,s){super(),this.contractAddress=e,this.validator=t,this.delegator=a,this.amount=s}gas=100000n;get from(){return this.delegator}get to(){return this.contractAddress}get value(){return this.amount}hash(){const e=K("keccak256"),t=new TextEncoder;return e.update(t.encode("Delegate").buffer),e.update(t.encode(this.ts.toISOString()).buffer),e.update(t.encode(this.validator).buffer),e.update(t.encode(this.delegator).buffer),e.update(t.encode(U.encoder.convert(this.amount)).buffer),O.encode(e.digest())}applyToState(e){const t=new Map(e.delegations),a=t.get(this.validator)??new Map,s=new Map(e.validators),r=s.get(this.validator)??[0n,0],u=a.get(this.delegator)??0n;return a.set(this.delegator,u+this.amount),t.set(this.validator,a),s.set(this.validator,[r[0]+this.amount,r[1]]),{...e,validators:s,delegations:t}}}class et extends J{constructor(e,t,a,s,r){super(),this.contractAddress=e,this.validator=t,this.delegator=a,this.amount=s,this.exitEscrowPeriod=r}gas=100000n;get from(){return this.delegator}get to(){return this.contractAddress}get value(){return this.amount}hash(){const e=K("keccak256"),t=new TextEncoder;return e.update(t.encode("Undelegate").buffer),e.update(t.encode(this.ts.toISOString()).buffer),e.update(t.encode(this.validator).buffer),e.update(t.encode(this.delegator).buffer),e.update(t.encode(U.encoder.convert(this.amount)).buffer),e.update(t.encode(U.encoder.convert(this.exitEscrowPeriod)).buffer),O.encode(e.digest())}applyToState(e){const t=new Map(e.delegations),a=t.get(this.validator)??new Map,s=a.get(this.delegator)??0n,r=new Map(e.validators);a.set(this.delegator,s-this.amount),t.set(this.validator,a);const u=r.get(this.validator)??[0n,0];r.set(this.validator,[u[0]-this.amount,u[1]]);const c=new Map(e.undelegations),o=c.get(this.validator)??new Map;return o.set(this.delegator,[this.amount,BigInt(this.ts.valueOf())+e.exitEscrowPeriod]),c.set(this.validator,o),{...e,validators:r,delegations:t,undelegations:c}}}class tt extends J{constructor(e,t,a,s){super(),this.contractAddress=e,this.validator=t,this.delegator=a,this.amount=s}gas=100000n;get from(){return this.delegator}get to(){return this.contractAddress}get value(){return this.amount}hash(){const e=K("keccak256"),t=new TextEncoder;return e.update(t.encode("ClaimWithdrawal").buffer),e.update(t.encode(this.ts.toISOString()).buffer),e.update(t.encode(this.validator).buffer),e.update(t.encode(this.delegator).buffer),e.update(t.encode(U.encoder.convert(this.amount)).buffer),O.encode(e.digest())}applyToState(e){const t=new Map(e.undelegations),a=t.get(this.validator)??new Map;return a.delete(this.delegator),t.set(this.validator,a),{...e,undelegations:t}}}class nt extends J{constructor(e,t,a,s){super(),this.contractAddress=e,this.validator=t,this.delegator=a,this.amount=s}gas=100000n;get from(){return this.delegator}get to(){return this.contractAddress}get value(){return this.amount}hash(){const e=K("keccak256"),t=new TextEncoder;return e.update(t.encode("ClaimValidatorExit").buffer),e.update(t.encode(this.ts.toISOString()).buffer),e.update(t.encode(this.validator).buffer),e.update(t.encode(this.delegator).buffer),e.update(t.encode(U.encoder.convert(this.amount)).buffer),O.encode(e.digest())}applyToState(e){const t=new Map(e.validatorExits);t.delete(this.validator);const a=new Map(e.delegations),s=a.get(this.validator)??new Map;return s.delete(this.delegator),a.set(this.validator,s),{...e,delegations:a,validatorExits:t}}}class at extends J{constructor(e,t,a){super(),this.contractAddress=e,this.validator=t,this.exitTime=a}gas=100000n;get from(){return this.validator}get to(){return this.contractAddress}value=0n;hash(){const e=K("keccak256"),t=new TextEncoder;return e.update(t.encode("ValidatorExit").buffer),e.update(t.encode(this.ts.toISOString()).buffer),e.update(t.encode(this.validator).buffer),e.update(t.encode(U.encoder.convert(this.exitTime)).buffer),O.encode(e.digest())}applyToState(e){const t=new Map(e.validatorExits);t.set(this.validator,this.exitTime);const a=new Map(e.validators),s=a.get(this.validator)??[0n,0];return a.set(this.validator,[s[0],$.exited]),{...e,validatorExits:t,validators:a}}}const le=Symbol("StakeTableStorage");class he{constructor(e,t,a,s){this.l1Methods=e,this.espToken=t,this.accountAddress=s,t instanceof L&&(this.espToken=t.replaceAccountAddress(a.contractAddress)),this.l1Methods.mockReadContractStorage(le)||this.l1Methods.mockWriteContractStorage(le,a),this.accountAddress=s}get state(){const e=this.l1Methods.mockReadContractStorage(le)??null;return W(e),e}replaceAccountAddress(e){return new he(this.l1Methods,this.espToken,this.state,e)}setAccountAddress(e){this.accountAddress=e}get lastUpdate(){return this.state.lastUpdate}get address(){return this.state.contractAddress}async PAUSER_ROLE(){return this.state.pauserRole}async minCommissionIncreaseInterval(){return this.state.minCommissionIncreaseInterval}async maxCommissionIncrease(){return this.state.maxCommissionIncrease}async activeStake(){return ot((e,t)=>e+t,0n,zn(this.state.delegations,([,e])=>ce(e,([,t])=>t)))}async commissionTracking(e){return this.state.commissionTracking.get(e)??[0,0n]}async lightClient(){return"0xLIGHT_CLIENT_ADDRESS"}async token(){return this.espToken.address}async validator(e){const t=this.state.validators.get(e)??[0n,0];return _e.fromRaw(t)}async blsKey(){throw new Error("Method not implemented.")}async validatorExit(e){return this.state.validatorExits.get(e)??0n}async delegation(e,t){return this.state.delegations.get(e)?.get(t)??0n}async undelegation(e,t){const a=this.state.undelegations.get(e)?.get(t)??[0n,0n];return Me.fromRaw(a)}async exitEscrowPeriod(){return this.state.exitEscrowPeriod}async getVersion(){return[2,0,0]}async updateConsensusKeysV2(){throw new Error("Method not implemented.")}async deregisterValidator(){if(!this.accountAddress)throw new Error("No account address available for deregistering validator.");const e=await this.validator(this.accountAddress);if(e.status===$.exited)throw new Error("Validator has already exited");if(e.status!==$.active)throw new Error("Validator is not active");const t=new at(this.address,this.accountAddress,BigInt(Date.now())+this.state.exitEscrowPeriod);return oe(this.l1Methods,t),t.hash()}async delegate(e,t){if(t<=0n)throw new Error("Amount must be greater than zero");if(!this.accountAddress)throw new Error("No account address available for delegation.");if((await this.validator(e)).status!==$.active)throw new Error("Validator is not active");if(await this.espToken.balanceOf(this.accountAddress)<t)throw new Error("Insufficient balance");await this.espToken.transferFrom(this.accountAddress,this.address,t);const s=new Ye(this.address,e,this.accountAddress,t);return oe(this.l1Methods,s),s.hash()}async undelegate(e,t){if(!this.accountAddress)throw new Error("No account address available for undelegation.");if(t<=0n)throw new Error("Amount must be greater than zero");if(await this.delegation(e,this.accountAddress)<t)throw new Error("Insufficient delegated amount");const s=this.state;if(s.validatorExits.has(e))throw new Error("Validator is exiting, cannot undelegate");if(s.undelegations.get(e)?.has(this.accountAddress))throw new Error("Existing undelegation in progress");const r=new et(this.address,e,this.accountAddress,t,this.state.exitEscrowPeriod);return oe(this.l1Methods,r),r.hash()}async claimWithdrawal(e){const t=BigInt(Date.now());if(!this.accountAddress)throw new Error("No account address available for claim withdrawal.");const a=await this.undelegation(e,this.accountAddress);if(!a.amount)throw new Error("No undelegation found for this delegator and validator.");if(t<a.timestamp)throw new Error("Undelegation period has not yet elapsed.");await this.espToken.transfer(this.accountAddress,a.amount);const s=new tt(this.address,e,this.accountAddress,a.amount);return oe(this.l1Methods,s),s.hash()}async claimValidatorExit(e){const t=BigInt(Date.now());if(!this.accountAddress)throw new Error("No account address available for claim validator exit.");const a=await this.validatorExit(e)??null;if(a===null)throw new Error("Validator is not exiting.");const s=await this.delegation(e,this.accountAddress);if(s<=0n)throw new Error("No stake found for this delegator and validator.");if(t<a)throw new Error("Validator exit period has not yet elapsed.");await this.espToken.transfer(this.accountAddress,s);const r=new nt(this.address,e,this.accountAddress,s);return oe(this.l1Methods,r),r.hash()}}function Ja(n,e){const t="0x0000000000000000000000000000000000000002";te(n instanceof L,"expected espTokenContract to be an instance of MockESPTokenContractImpl");const[a]=I.useState({contractAddress:e?.contractAddress??t,validators:e?.validators??new Map,blsKeys:e?.blsKeys??new Set,validatorExits:e?.validatorExits??new Map,delegations:e?.delegations??new Map,undelegations:e?.undelegations??new Map,exitEscrowPeriod:e?.exitEscrowPeriod??60000n,pauserRole:e?.pauserRole??"0xPAUSER_ROLE",minCommissionIncreaseInterval:e?.minCommissionIncreaseInterval??60000n,maxCommissionIncrease:e?.maxCommissionIncrease??1,commissionTracking:e?.commissionTracking??new Map,schnorrKeys:e?.schnorrKeys??new Set,lastUpdate:new Date});return a}const st=({children:n})=>{const e=I.useContext(z),t=I.useContext(Se),a=I.useContext(ne);W(e),W(a),te(e instanceof Q),te(a instanceof L);const s=new Map(Hn(ce(Wn(G,G.length-2),c=>{const o=O.encode(c.address);return[o,new Map([[o,c.stake]])]}),ce(vt(G,G.length-2),c=>{const o=O.encode(c.address);return[o,new Map([[o,c.stake*9n/10n],[ye,c.stake*1n/10n]])]}))),r=Ja(a,{validators:new Map(ce(s,([c,o])=>[c,[ot((i,d)=>i+d,0n,(s.get(c)??new Map).values()),o.size>1?$.exited:$.active]])),delegations:s,validatorExits:new Map(ce(vt(G,G.length-2),c=>[O.encode(c.address),0n]))}),[u]=I.useState(new he(e,a,r,t));return I.useEffect(()=>(u.setAccountAddress(t),()=>{}),[u,t]),x.jsx(Ee.Provider,{value:u,children:x.jsx(pe.Provider,{value:u,children:n})})};try{J.displayName="StakeTableStateActions",J.__docgenInfo={description:`StakeTableStateActions is an abstract base class
representing an action that modifies the state of the
MockStakeTableV2Contract.`,displayName:"StakeTableStateActions",props:{}}}catch{}try{Ye.displayName="Delegate",Ye.__docgenInfo={description:`Delegate represents a delegation action in the StakeTableState.
It records the validator, delegator, and amount delegated.`,displayName:"Delegate",props:{}}}catch{}try{et.displayName="Undelegate",et.__docgenInfo={description:`Undelegate represents an undelegation action in the StakeTableState.
It records the validator, delegator, and amount undelegated.`,displayName:"Undelegate",props:{}}}catch{}try{tt.displayName="ClaimWithdrawal",tt.__docgenInfo={description:`ClaimWithdrawal represents a claim withdrawal action
within the StakeTableState.`,displayName:"ClaimWithdrawal",props:{}}}catch{}try{nt.displayName="ClaimValidatorExit",nt.__docgenInfo={description:`ClaimWithdrawal represents a claim withdrawal action
within the StakeTableState.`,displayName:"ClaimValidatorExit",props:{}}}catch{}try{at.displayName="ValidatorExit",at.__docgenInfo={description:`ValidatorExit represents a validator exit action
within the MockStakeTableV2Contract.`,displayName:"ValidatorExit",props:{}}}catch{}try{he.displayName="MockStakeTableV2ContractImpl",he.__docgenInfo={description:`MockStakeTableV2ContractImpl is a mock implementation of the
StakeTableV2Contract interface for testing and development purposes.`,displayName:"MockStakeTableV2ContractImpl",props:{}}}catch{}try{st.displayName="MockStakeTableV2Contract",st.__docgenInfo={description:`MockStakeTableV2Contract is a React component that provides
a mock StakeTableV2Contract implementation via context for
testing and development purposes.

It will overwrite the StakeTableV2ContractContext with a mock
implementation that simulates the behavior of an actual
StakeTableV2Contract.

It **MUST** be given a valid ESPTokenContract via the
\`ESPTokenContractContext\` context.

It pre-populates the delegations mapping with initial stakes
derived from the \`nodeList\` fake data.`,displayName:"MockStakeTableV2Contract",props:{}}}catch{}const rt=({children:n})=>{const e=I.useContext(Pt),t=I.useContext(ae);return e!==j.fakeData||t?.espTokenContractAddress||t?.stakeTableContractAddress?x.jsx(x.Fragment,{children:n}):x.jsx(Je,{children:x.jsx(Za,{children:n})})},Za=({children:n})=>x.jsx($e,{children:x.jsx(Ze,{children:x.jsx(st,{children:x.jsx(Xe,{children:n})})})});try{rt.displayName="FakeDataMockOverrides",rt.__docgenInfo={description:`FakeDataMockOverrides is a React component that provides
mock overrides for various contexts when the environment
is set to FakeData and the relevant contracts are not
already provided in the Espresso configuration.`,displayName:"FakeDataMockOverrides",props:{}}}catch{}function Xa(n=null,e=null){return{espTokenContractAddress:n??null,stakeTableContractAddress:e??null}}const Ya=ie({chains:[Vn],client({chain:n}){return Z({chain:n,transport:re()})}}),es=ie({chains:[Ma],client({chain:n}){return Z({chain:n,transport:re()})}}),ts=ie({chains:[me({id:900,name:"GETH (water)",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://geth.water.devnet.espresso.network"],webSocket:["wss://wsgeth.water.devnet.espresso.network"]}},testnet:!0})],client({chain:n}){return Z({chain:n,transport:re()})}}),ns=ie({chains:[me({id:900,name:"GETH (milk)",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://geth.milk.devnet.espresso.network"],webSocket:["wss://wsgeth.milk.devnet.espresso.network"]}},testnet:!0})],client({chain:n}){return Z({chain:n,transport:re()})}}),as=ie({chains:[me({id:31337,name:"GETH (Local DevNet)",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["http://localhost:8545"],webSocket:["ws://localhost:8546"]}},testnet:!0})],client({chain:n}){return Z({chain:n,transport:re()})}}),ss=ie({chains:[me({id:31337,name:"GETH (Fake Data)",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{},testnet:!0,connectors:[dt({accounts:["0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","0x70997970c51812dc3a010c7d01b50e0d17dc79c8","0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC"]})]})],client({chain:n}){return Z({chain:n,transport:re()})}});function rs(n){switch(n){case j.mainnet:return Ya;case j.decaf:return es;case j.water:return ts;case j.milk:return ns;case j.fakeData:return ss;case j.localDevNet:return as;default:throw new Error(`Unsupported environment: ${n}`)}}const is=new _a;function je(n){if(n==null||n==="")return null;try{return new URL(n).toString()}catch(e){return console.error("Invalid URL provided:",n,e),null}}const it=({environment:n=j.fakeData,hotshotQueryServiceURL:e,nodeValidatorWebSocketURL:t,l1ValidatorServiceURL:a,children:s})=>{const r={hotshotQueryServiceURL:je(e??null),nodeValidatorServiceURL:je(t??null),l1ValidatorServiceURL:je(a??null)};return x.jsx(Pt.Provider,{value:n,children:x.jsx(Gt.Provider,{value:r,children:s})})};function Bt(n){if(n==null||n===""||!n.startsWith("0x"))return null;const e=bt.decode(n);return bt.encode(e)}const Nt=({environment:n=j.fakeData,hotshotQueryServiceURL:e,nodeValidatorWebSocketURL:t,espTokenContractAddress:a,stakeTableContractAddress:s,l1ValidatorServiceURL:r,children:u})=>{const c=rs(n),o=Xa(Bt(a),Bt(s));return x.jsx(it,{environment:n,hotshotQueryServiceURL:e,nodeValidatorWebSocketURL:t,l1ValidatorServiceURL:r,children:x.jsx(ae.Provider,{value:o,children:x.jsx(Dn,{config:c,children:x.jsx(qn,{client:is,children:x.jsx(jn,{children:x.jsx(Ln,{children:x.jsx(ze,{children:x.jsx(We,{children:x.jsx(Ge,{children:x.jsx(Qe,{children:x.jsx(rt,{children:u})})})})})})})})})})})};try{it.displayName="StoryBookSpecifyEnvironment",it.__docgenInfo={description:"",displayName:"StoryBookSpecifyEnvironment",props:{environment:{defaultValue:{value:"Environment.fakeData"},description:"",name:"environment",required:!1,type:{name:"enum",value:[{value:'"mainnet"'},{value:'"decaf"'},{value:'"milk"'},{value:'"water"'},{value:'"fakeData"'},{value:'"localDevNet"'}]}},hotshotQueryServiceURL:{defaultValue:null,description:"",name:"hotshotQueryServiceURL",required:!1,type:{name:"string"}},nodeValidatorWebSocketURL:{defaultValue:null,description:"",name:"nodeValidatorWebSocketURL",required:!1,type:{name:"string"}},l1ValidatorServiceURL:{defaultValue:null,description:"",name:"l1ValidatorServiceURL",required:!1,type:{name:"string"}}}}}catch{}try{Nt.displayName="StoryBookSpecifyEnvironmentAndContracts",Nt.__docgenInfo={description:"",displayName:"StoryBookSpecifyEnvironmentAndContracts",props:{espTokenContractAddress:{defaultValue:null,description:"",name:"espTokenContractAddress",required:!1,type:{name:"string"}},stakeTableContractAddress:{defaultValue:null,description:"",name:"stakeTableContractAddress",required:!1,type:{name:"string"}},environment:{defaultValue:{value:"Environment.fakeData"},description:"",name:"environment",required:!1,type:{name:"enum",value:[{value:'"mainnet"'},{value:'"decaf"'},{value:'"milk"'},{value:'"water"'},{value:'"fakeData"'},{value:'"localDevNet"'}]}},hotshotQueryServiceURL:{defaultValue:null,description:"",name:"hotshotQueryServiceURL",required:!1,type:{name:"string"}},nodeValidatorWebSocketURL:{defaultValue:null,description:"",name:"nodeValidatorWebSocketURL",required:!1,type:{name:"string"}},l1ValidatorServiceURL:{defaultValue:null,description:"",name:"l1ValidatorServiceURL",required:!1,type:{name:"string"}}}}}catch{}export{tt as C,Ye as D,ne as E,z as L,Q as M,Ie as R,it as S,et as U,at as V,Nt as a,V as b,pe as c,ye as d,J as e,Qa as f,nt as g,Ga as h};
