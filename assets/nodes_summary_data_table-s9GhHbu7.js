import{r as So,R as s,j as o}from"./iframe-DFfdKi-0.js";import{e as Tn,D as b,u as H,c as j,d as I,f as Co,m as Pn,s as Bn,E as Qe,L as se}from"./loading_provider-da-Stdik.js";import"./date_time_formatters_provider-D1KuHasK.js";import"./locale_provider-BSfkAuIP.js";import{O as In,P as Vn}from"./page_path_provider-BLpKX2CS.js";import"./now_provider-Bg99-F95.js";import"./number_formatters_provider-BFBcbrkA.js";import"./path_resolver_provider-DZ-5eptY.js";import{S as Ze,D as no,a as ao,b as bo,A as $e,c as R}from"./data_table-CacNGaVF.js";import{E as fo}from"./error_display-Bry9uVVI.js";import"./byte_size_text-D8sYOBly.js";import{P as ko}from"./transactions_per_second_text-CVlg39ir.js";import"./copy_hex-DAgaj9SU.js";import"./date_time_text-Cno5hICi.js";import"./full_hex_text-Cv2FWqgk.js";import"./hex_text-vhhXAAGO.js";import{M as jn}from"./money_text-BY6QHfpq.js";import{N as G}from"./number_text-BThEIcq7.js";import"./relative_time_since_date_text-Ch8VK2RY.js";import{T as Rn}from"./tagged_base64_text-V3FlBX9h.js";import{T as m}from"./text-CEhLEmI-.js";import"./time_text-Dd-TCUHg.js";import{C as Wn}from"./transaction_summary_data_table-CSB_kJkg.js";import{C as Dn,W as An}from"./deserializer-BGbXSyI7.js";import{m as k,z as Ln,j as bt,q as En,p as ft,i as wo}from"./functional-DLuq-Zgx.js";import{S as w}from"./skeleton_content-CLW3IdlQ.js";import{M as Mn}from"./monetary_value-CGCIrnLJ.js";import{W as go}from"./wallet_address-cs0DJHAB.js";import"./block_page-CVaTNZpy.js";import"./blocks_page-mf6guzOk.js";import{aZ as Hn,a_ as On,F as qn,n as Kn}from"./en_US-KAK2ZBDO-BuRYGNIH.js";import{f,g as Gn,h as Fn,i as de,j as ue,k as xo,l as No,m as vo,n as _o,o as To,p as zn,q as Un,r as Jn,s as ro,t as Qn}from"./cappuccino_hot_shot_query_service_api_context-fiECwoBL.js";import{B as Zn}from"./explorer-BgXiPEsy.js";import{T as i,I as S,b as h,o as Po,N as $n,p as g,q as T,h as Yn,j as Xn,A as ea,k as ta,l as oa,t as x}from"./string-DO2hqbbz.js";import{U as _}from"./unimplemented_error-BGJ4_cDZ.js";import{A as P}from"./async_iterable_resolver-Crht_Ltf.js";import"./provide_async_states-5TViS3yy.js";import{L as na,j as aa,k as ra,l as sa,m as ca,n as ia,o as la,C as da}from"./transaction_detail_content-uWORrYD7.js";import"./promise_resolver-BWOXh0fa.js";import{c as ua,L as pa,d as ma,B as ha,b as ya}from"./latest_block_summary-BL06ix0U.js";import{N as Sa,a as Ca,W as ba,P as fa,D as ka,b as wa}from"./world_map_dots_population_full_resolution-zPF5lAEg.js";import"./fetch_error-DuIs0boE.js";import"./base64-Dpbg5EzT.js";import"./array_buffer-DYdk84gS.js";import{t as Bo}from"./tagged_base64-DlPC3yRR.js";import"./missing_element_error-Bky0HlCJ.js";import"./not_found_error-bihNLxJz.js";import"./bigint-Rw5otYDY.js";import{n as pe}from"./url-BkzmLfUb.js";import{c as ga,g as xa,s as Na}from"./blocks-2SbdhCgZ.js";import{P as so,a as va,n as K}from"./nodes-BtP9A9m5.js";import{b as Ae,v as Io,c as Vo,V as _a,C as Ta,S as Pa,a as Ba}from"./validator-DiMZuNkp.js";import{w as jo,L as Ia,e as Va,k as co,f as ja}from"./constants-BzXKN_my.js";import"./environment_banner-fWQ1bwaY.js";import"./espresso-D6LTZWbo.js";import"./anchor_button-AceLLEI_.js";import"./button-DS3pZeE9.js";import"./icon_anchor_button-nolBzyIo.js";import"./icon_button-CChIVCf7.js";import"./labeled_anchor_button-1SaKviBT.js";import"./labeled_button-CJ_jLfpP.js";import{a as D,C as Ra}from"./card-B_DGO8IT.js";import"./heading1-BIClUtXy.js";import{H as Wa}from"./heading2-DNajMEUY.js";import"./label-C_7faWes.js";import"./summary_table_labeled_value-RZdjdxPa.js";import"./summary_value_labeled-CiUDoX9E.js";import"./table_labeled_value-DH7a_RCX.js";import"./nav_bar-Bx8MZAJh.js";import{E as Da}from"./link-DeuX5Kmo.js";import"./social_media_links-L8i-Emf7.js";import"./circular_progress_indicator-CvHG1nqf.js";import"./container_loading-W_k3-qfn.js";import"./loading_shimmer-BmQWJNQg.js";import"./transaction_detail_loader-Cjq3iKes.js";import{B as Aa,H as La}from"./block_size_histogram-Bzo1DuKO.js";import"./block_summary_data_table-CH56gb_T.js";import{F as Ea}from"./footer-DnpqE_iw.js";import{H as Ma}from"./header-CwPI-oI3.js";import"./hex_dump-CORC0h5h.js";import"./roll_up_simple-CWH2zN4V.js";import"./roll_ups_summary_data_table-CcBIu9VO.js";import"./typography-M3pkdhb1.js";import"./payments-C_ApBWgU.js";import"./twitter_icon-dtIT_YWu.js";import"./arrow_right-DOyvdlBB.js";import"./check_circle_filled-C8KuScJK.js";import"./chevron_up-CgozpFm6.js";import"./copy-Yrm6dGhz.js";import"./medium_icon-CN8YsG_6.js";import"./espresso_logo-BO65uRO3.js";import"./espresso_logo_and_title-BuL3lQzi.js";import"./menu-Cp7JE0A6.js";import"./search_glass-BffjJN08.js";import"./svg_icon_base-Bysx7lQ6.js";import"./x_icon-CEsFpIpS.js";import{W as Ha}from"./world_map_dots_full_resolution-BhWu3cdS.js";import"./explorer_page-b2Ga0ihE.js";import{a as Ro}from"./higher_order-CAFNA8md.js";import{a as Le,b as kt}from"./pie_chart-QR-rGfr-.js";import"./roll_up_page-BLagRITL.js";import"./roll_ups_page-Cz7kovM8.js";import"./transaction_page-BH398-dB.js";import"./transactions_for_block_page-C3OApeG7.js";import"./transactions_page-CD3jjw9Y.js";class Oa{publishQueue;pollBlocked;publishBlocked;capacity;closed=!1;constructor(e){this.publishQueue=f(Math.max(2,e),Fn.throwMissingElement,Gn.throw);const n=de();this.pollBlocked=n,this.publishBlocked=n,n.complete(),this.capacity=e-1}get isClosed(){return this.closed}close(){if(this.closed)throw new ue;this.closed=!0}async drain(){for(;this.publishQueue.length>0;)this.publishQueue.get()}async publish(e){if(this.closed)throw new ue;if(this.publishQueue.length>=this.capacity){if(this.publishBlocked.isCompleted){const n=de();this.publishBlocked=n,await n.promise}return await this.publishBlocked.promise,this.publish(e)}this.publishQueue.put(e),this.pollBlocked.isCompleted||this.pollBlocked.complete()}async poll(){if(this.publishQueue.length<=0){if(this.isClosed)throw new ue;if(this.pollBlocked.isCompleted){const n=de();this.pollBlocked=n}return await this.pollBlocked.promise,this.poll()}const e=this.publishQueue.get();return this.publishBlocked.isCompleted||this.publishBlocked.complete(),e}[Symbol.asyncIterator](){return new qa(this)}}class qa{channel;constructor(e){this.channel=e}async next(){try{return{done:!1,value:await this.channel.poll()}}catch(e){if(e instanceof ue)return{done:!0,value:void 0};throw e}}}function y(t){return new Oa(t)}class Ka{channel;constructor(e){this.channel=e}async send(e){await this.channel.publish(e)}}function io(t){return new Ka(t)}class Ga{constructor(e,n){this.sink=e,this.converter=n,this.sink=e,this.converter=n}async send(e){await this.sink.send(this.converter.convert(e))}}function me(t,e){return new Ga(t,e)}let wt=class{};const F="Closed";class W extends wt{valueOf(){return F}toJSON(){return gt.encode(this)}}class Fa{convert(e){if(typeof e!="string")throw new S(typeof e,"string");if(e!==F)throw new S(e,F);return new W}}class za{convert(){return F}}class Ua extends i{encoder=new za;decoder=new Fa}const gt=new Ua;class xt{}const z="Connecting";class ce extends wt{valueOf(){return z}toJSON(){return Nt.encode(this)}}class Ja{convert(e){if(typeof e!="string")throw new S(typeof e,"string");if(e!==z)throw new S(e,z);return new ce}}class Qa{convert(){return z}}class Za extends i{encoder=new Qa;decoder=new Ja}const Nt=new Za,U="Opened";class O extends wt{valueOf(){return U}toJSON(){return vt.encode(this)}}class $a{convert(e){if(typeof e!="string")throw new S(typeof e,"string");if(e!==U)throw new S(e,U);return new O}}class Ya{convert(){return U}}class Xa extends i{encoder=new Ya;decoder=new $a}const vt=new Xa;class er{convert(e){if(e===U)return vt.decode(e);if(e===F)return gt.decode(e);if(e===z)return Nt.decode(e);throw new _}}class tr{convert(e){if(e instanceof O)return vt.encode(e);if(e instanceof W)return gt.encode(e);if(e instanceof ce)return Nt.encode(e);throw new _}}class or extends i{encoder=new tr;decoder=new er}const Wo=new or;class L extends xt{status;get type(){return J}constructor(e){super(),this.status=e}toJSON(){return Do.encode(this)}}const J="WebSocket";class nr{convert(e){return{[J]:Wo.encode(e.status)}}}class ar{convert(e){return h(e,J),new L(Wo.decode(e[J]))}}class rr extends i{encoder=new nr;decoder=new ar}const Do=new rr,Q=So.createContext(new L(new W)),he=So.createContext(Tn()),Ye=t=>{const e=s.useContext(he);return o.jsx(P,{asyncIterable:e,children:o.jsx(sr,{children:t.children})})},sr=t=>{const e=s.useContext(b);return e===null?o.jsx(Q.Provider,{value:new L(new W),children:t.children}):o.jsx(Q.Provider,{value:e,children:t.children})};try{Q.displayName="WebSocketResponseContext",Q.__docgenInfo={description:`WebSocketResponseContext is a React Context that is used to store
and make available the current LifeCycleResponse.`,displayName:"WebSocketResponseContext",props:{}}}catch{}try{he.displayName="WebSocketResponseStreamContext",he.__docgenInfo={description:`WebSocketResponseStreamContext is a React Context that is able to provide
a stream of WebSocketResponses. These can be used to update the UI in order
to indicate the current state of the WebSocket connection.`,displayName:"WebSocketResponseStreamContext",props:{}}}catch{}try{Ye.displayName="WebSocketResponseStreamConsumer",Ye.__docgenInfo={description:`WebSocketResponseStreamConsumer is a component that is able to consume the
WebSocketResponseContext, and provide the WebSocketResponse to the
children of the component via the WebSocketResponseContext context.`,displayName:"WebSocketResponseStreamConsumer",props:{}}}catch{}const ye=s.createContext(H()),Xe=t=>{const e=s.useContext(ye);return o.jsx(j,{children:o.jsx(P,{asyncIterable:e,children:o.jsx(I,{children:t.children})})})};try{ye.displayName="CountriesPieChartStreamContext",ye.__docgenInfo={description:"",displayName:"CountriesPieChartStreamContext",props:{}}}catch{}try{Xe.displayName="CountriesPieChartStreamConsumer",Xe.__docgenInfo={description:"",displayName:"CountriesPieChartStreamConsumer",props:{}}}catch{}const Se=s.createContext(H()),et=t=>{const e=s.useContext(Se);return o.jsx(j,{children:o.jsx(P,{asyncIterable:e,children:o.jsx(I,{children:t.children})})})};try{Se.displayName="NetworkTypesPieChartStreamContext",Se.__docgenInfo={description:"",displayName:"NetworkTypesPieChartStreamContext",props:{}}}catch{}try{et.displayName="NetworkTypesPieChartStreamConsumer",et.__docgenInfo={description:"",displayName:"NetworkTypesPieChartStreamConsumer",props:{}}}catch{}const Ce=s.createContext(H()),tt=t=>{const e=s.useContext(Ce);return o.jsx(j,{children:o.jsx(P,{asyncIterable:e,children:o.jsx(I,{children:t.children})})})};try{Ce.displayName="NodeTypesPieChartStreamContext",Ce.__docgenInfo={description:"",displayName:"NodeTypesPieChartStreamContext",props:{}}}catch{}try{tt.displayName="NodeTypesPieChartStreamConsumer",tt.__docgenInfo={description:"",displayName:"NodeTypesPieChartStreamConsumer",props:{}}}catch{}var p=(t=>(t.publicKey="publicKey",t.name="name",t.address="address",t.companyName="companyName",t.companyWebSite="companyWebSite",t.location="location",t.stake="stake",t.uptime="uptime",t.voteParticipation="voteParticipation",t.commission="commission",t.actions="actions",t))(p||{});const be=s.createContext(H()),fe=s.createContext(H()),ke=s.createContext([]),ot=t=>{const e=s.useContext(b);return o.jsx(ke.Provider,{value:e??[],children:t.children})},nt=t=>{const e=s.useContext(fe);return o.jsx(j,{children:o.jsx(P,{asyncIterable:e,children:o.jsx(ot,{children:o.jsx(I,{children:t.children})})})})},at=t=>{const e=s.useContext(be);return o.jsx(j,{children:o.jsx(P,{asyncIterable:e,children:o.jsx(I,{children:t.children})})})};try{be.displayName="NodeSummaryStreamContext",be.__docgenInfo={description:"",displayName:"NodeSummaryStreamContext",props:{}}}catch{}try{fe.displayName="VoterParticipationStreamContext",fe.__docgenInfo={description:"",displayName:"VoterParticipationStreamContext",props:{}}}catch{}try{ke.displayName="VotersParticipationStatsContext",ke.__docgenInfo={description:"",displayName:"VotersParticipationStatsContext",props:{}}}catch{}try{ot.displayName="VotersParticipationStatesProvider",ot.__docgenInfo={description:"",displayName:"VotersParticipationStatesProvider",props:{}}}catch{}try{nt.displayName="VotersParticipationStatsConsumer",nt.__docgenInfo={description:"",displayName:"VotersParticipationStatsConsumer",props:{}}}catch{}try{at.displayName="NodeSummaryStreamConsumer",at.__docgenInfo={description:"",displayName:"NodeSummaryStreamConsumer",props:{}}}catch{}const we=s.createContext(H()),rt=t=>{const e=s.useContext(we);return o.jsx(j,{children:o.jsx(P,{asyncIterable:e,children:o.jsx(I,{children:t.children})})})};try{we.displayName="OperatingSystemPieChartStreamContext",we.__docgenInfo={description:"",displayName:"OperatingSystemPieChartStreamContext",props:{}}}catch{}try{rt.displayName="OperatingSystemPieChartStreamConsumer",rt.__docgenInfo={description:"",displayName:"OperatingSystemPieChartStreamConsumer",props:{}}}catch{}const Z="Error";class Ao extends xt{error;get type(){return Z}constructor(e){super(),this.error=e}toJSON(){return Lo.encode(this)}}class cr{convert(e){return{[Z]:Po.encode(e.error)}}}class ir{convert(e){return h(e,Z),new Ao(Po.decode(e[Z]))}}class lr extends i{encoder=new cr;decoder=new ir}const Lo=new lr;class _t{}const $="Close";class Ee extends _t{valueOf(){return $}}class dr{convert(){return $}}class ur{convert(e){if(typeof e!="string")throw new S(typeof e,"string");if(e!==$)throw new S(e,$);return new Ee}}class pr extends i{encoder=new dr;decoder=new ur}const Eo=new pr,Y="Connect";class ie extends _t{valueOf(){return Y}toJSON(){return Tt.encode(this)}}class mr{convert(){return Y}}class hr{convert(e){if(typeof e!="string")throw new S(typeof e,"string");if(e!==Y)throw new S(e,Y);return new ie}}class yr extends i{encoder=new mr;decoder=new hr}const Tt=new yr,X="Set-Url";class Pt extends _t{url;constructor(e){super(),this.url=e}valueOf(){return X}toJSON(){return Bt.encode(this)}}class Sr{convert(e){return{[X]:e.url}}}class Cr{convert(e){h(e,X);const n=e[X];if(typeof n!="string")throw new S(typeof n,"string");return new Pt(n)}}class br extends i{encoder=new Sr;decoder=new Cr}const Bt=new br;class Mo{}class fr{convert(e){if(e===Y)return Tt.decode(e);if(e===$)return Eo.decode(e);if(typeof e=="object"&&e!==null&&X in e)return Bt.decode(e);throw new _}}class kr{convert(e){if(e instanceof ie)return Tt.encode(e);if(e instanceof Ee)return Eo.encode(e);if(e instanceof Pt)return Bt.encode(e);throw new _}}class wr extends i{encoder=new kr;decoder=new fr}const Ho=new wr;class It extends Mo{command;get type(){return ee}constructor(e){super(),this.command=e}toJSON(){return Oo.encode(this)}}const ee="WebSocket";class gr{convert(e){return{[ee]:Ho.encode(e.command)}}}class xr{convert(e){return h(e,ee),new It(Ho.decode(e[ee]))}}class Nr extends i{encoder=new gr;decoder=new xr}const Oo=new Nr,V=new Map;V.set(ee,Oo);class vr{convert(e){const n=V.get(e.type);if(!n)throw new S(e.type,`one of ${Array.from(k(V.keys(),a=>`"${a}"`)).join(", ")}`);return{[e.type]:n.encode(e)}}}class _r{convert(e){if(typeof e!="object"||e===null)throw new S(typeof e,"object");const n=Object.keys(e);if(n.length!==1)throw new _("multiple values contained within the Request object, unexpected");const[a]=n,r=V.get(a);if(h(e,a),!r)throw new S(a,`one of ${Array.from(k(V.keys(),c=>`"${c}"`)).join(", ")}`);return r.decode(e[a])}}class Tr extends i{encoder=new vr;decoder=new _r}function Pr(t,e){V.has(t)||V.set(t,e)}const Br=new Tr;class Ir{convert(e){return new It(e)}}const Vr=new Ir;class N{}const qo="SubscribeNodeIdentity";class Vt extends N{valueOf(){return qo}}const Ko="SubscribeLatestBlock";class jt extends N{valueOf(){return Ko}}const Go="SubscribeVoters";class Rt extends N{valueOf(){return Go}}const Fo="SubscribeValidators";class zo extends N{valueOf(){return Fo}}const Uo="SubscribeStakeTables";class Jo extends N{valueOf(){return Uo}}const Qo="RequestNodeIdentitySnapshot";class Wt extends N{valueOf(){return Qo}}const Zo="RequestBlocksSnapshot";class Dt extends N{valueOf(){return Zo}}const $o="RequestHistogramSnapshot";class At extends N{valueOf(){return $o}}const Yo="RequestVotersSnapshot";class Lt extends N{valueOf(){return Yo}}const Xo="RequestValidatorsSnapshot";class Et extends N{valueOf(){return Xo}}const en="RequestStakeTableSnapshot";class Mt extends N{valueOf(){return en}}class jr{convert(e){return e.valueOf()}}class Rr{convert(e){if(typeof e!="string")throw new S(typeof e,"string");switch(e){case qo:return new Vt;case Ko:return new jt;case Go:return new Rt;case Qo:return new Wt;case Zo:return new Dt;case $o:return new At;case Yo:return new Lt;case Fo:return new zo;case Uo:return new Jo;case Xo:return new Et;case en:return new Mt;default:throw new S(e,"CappuccinoNodeValidatorRequest")}}}class Wr extends i{encoder=new jr;decoder=new Rr}const tn=new Wr,te="NodeValidatorRequest";class Ht extends Mo{request;get type(){return te}constructor(e){super(),this.request=e}toJSON(){return on.encode(this)}}class Dr{convert(e){return{[te]:tn.encode(e.request)}}}class Ar{convert(e){return h(e,te),new Ht(tn.decode(e[te]))}}class Lr extends i{encoder=new Dr;decoder=new Ar}const on=new Lr;class Er{convert(e){return new Ht(e)}}const Mr=new Er;class v{}const ge="BlocksSnapshot";class Me extends v{blocks;constructor(e){super(),this.blocks=e}toJSON(){return Ot.encode(this)}}class Hr{convert(e){h(e,ge);const n=e[ge];return new Me(xo.decode(n))}}class Or{convert(e){return{[ge]:xo.encode(e.blocks)}}}class qr extends i{encoder=new Or;decoder=new Hr}const Ot=new qr,xe="HistogramSnapshot";class oe extends v{histograms;constructor(e){super(),this.histograms=e}toJSON(){return qt.encode(this)}}class Kr{convert(e){return h(e,xe),new oe(No.decode(e[xe]))}}class Gr{convert(e){return{[xe]:No.encode(e.histograms)}}}class Fr extends i{encoder=new Gr;decoder=new Kr}const qt=new Fr,Ne="LatestBlock";class E extends v{latestBlock;constructor(e){super(),this.latestBlock=e}toJSON(){return Kt.encode(this)}}class zr{convert(e){return h(e,Ne),new E(vo.decode(e[Ne]))}}class Ur{convert(e){return{[Ne]:vo.encode(e.latestBlock)}}}class Jr extends i{encoder=new Ur;decoder=new zr}const Kt=new Jr;class nn{coords;country;constructor(e,n){this.coords=e,this.country=n}toJSON(){return st.encode(this)}}class Qr{convert(e){return{coords:jo.encode(e.coords),country:g.encode(e.country)}}}class Zr{convert(e){return h(e,"coords","country"),new nn(jo.decode(e.coords),T(g.decode(e.country)))}}class $r extends i{encoder=new Qr;decoder=new Zr}const st=new $r,an=new $n(new Yn(st),new Xn(st));class rn{publicKey;name;publicURL;company;companyWebsite;location;operatingSystem;nodeType;networkType;constructor(e,n,a,r,c,d,l,u,C){this.publicKey=e,this.name=n,this.publicURL=a,this.company=r,this.companyWebsite=c,this.location=d,this.operatingSystem=l,this.nodeType=u,this.networkType=C}toJSON(){return ne.encode(this)}}class Yr{convert(e){return{public_key:Bo.encode(e.publicKey),name:g.encode(e.name),public_url:pe.encode(e.publicURL),company:g.encode(e.company),company_website:pe.encode(e.companyWebsite),location:an.encode(e.location),operating_system:g.encode(e.operatingSystem),node_type:g.encode(e.nodeType),network_type:g.encode(e.networkType)}}}class Xr{convert(e){return h(e,"public_key","name","public_url","company","company_website","location","operating_system","node_type","network_type"),new rn(Bo.decode(e.public_key),T(g.decode(e.name)),pe.decode(e.public_url),T(g.decode(e.company)),pe.decode(e.company_website),an.decode(e.location),T(g.decode(e.operating_system)),T(g.decode(e.node_type)),T(g.decode(e.network_type)))}}class es extends i{encoder=new Yr;decoder=new Xr}const ne=new es,sn=new ea(new ta(ne),new oa(ne)),ve="LatestNodeIdentity";class Gt extends v{nodeIdentity;constructor(e){super(),this.nodeIdentity=e}toJSON(){return Ft.encode(this)}}class ts{convert(e){return h(e,ve),new Gt(ne.decode(e[ve]))}}class os{convert(e){return{[ve]:ne.encode(e.nodeIdentity)}}}class ns extends i{encoder=new os;decoder=new ts}const Ft=new ns,_e="LatestStakeTable";class He extends v{stakeTable;constructor(e){super(),this.stakeTable=e}toJSON(){return zt.encode(this)}}class as{convert(e){return h(e,_e),new He(Ae.decode(e[_e]))}}class rs{convert(e){return{[_e]:Ae.encode(e.stakeTable)}}}class ss extends i{encoder=new rs;decoder=new as}const zt=new ss,Te="LatestValidator";class Ut extends v{validator;constructor(e){super(),this.validator=e}toJSON(){return Jt.encode(this)}}class cs{convert(e){return h(e,Te),new Ut(Io.decode(e[Te]))}}class is{convert(e){return{[Te]:Io.encode(e.validator)}}}class ls extends i{encoder=new is;decoder=new cs}const Jt=new ls,Pe="LatestVoters";class Oe extends v{latestVoter;constructor(e){super(),this.latestVoter=e}toJSON(){return Qt.encode(this)}}class ds{convert(e){return h(e,Pe),new Oe(_o.decode(e[Pe]))}}class us{convert(e){return{[Pe]:_o.encode(e.latestVoter)}}}class ps extends i{encoder=new us;decoder=new ds}const Qt=new ps,Be="NodeIdentitySnapshot";class ae extends v{nodes;constructor(e){super(),this.nodes=e}toJSON(){return Zt.encode(this)}}class ms{convert(e){h(e,Be);const n=e[Be];return new ae(sn.decode(n))}}class hs{convert(e){return{[Be]:sn.encode(e.nodes)}}}class ys extends i{encoder=new hs;decoder=new ms}const Zt=new ys,Ie="StakeTableSnapshot";class $t extends v{stakeTable;constructor(e){super(),this.stakeTable=e}toJSON(){return Yt.encode(this)}}class Ss{convert(e){h(e,Ie);const n=e[Ie];return new $t(Ae.decode(n))}}class Cs{convert(e){return{[Ie]:Ae.encode(e.stakeTable)}}}class bs extends i{encoder=new Cs;decoder=new Ss}const Yt=new bs,Ve="ValidatorsSnapshot";class qe extends v{validators;constructor(e){super(),this.validators=e}toJSON(){return Xt.encode(this)}}class fs{convert(e){h(e,Ve);const n=e[Ve];return new qe(Vo.decode(n))}}class ks{convert(e){return{[Ve]:Vo.encode(e.validators)}}}class ws extends i{encoder=new ks;decoder=new fs}const Xt=new ws,je="VotersSnapshot";class Ke extends v{voters;constructor(e){super(),this.voters=e}toJSON(){return eo.encode(this)}}class gs{convert(e){h(e,je);const n=e[je];return new Ke(To.decode(n))}}class xs{convert(e){return{[je]:To.encode(e.voters)}}}class Ns extends i{encoder=new xs;decoder=new gs}const eo=new Ns;class vs{convert(e){if(x(e,ge))return Ot.decode(e);if(x(e,xe))return qt.decode(e);if(x(e,Ne))return Kt.decode(e);if(x(e,ve))return Ft.decode(e);if(x(e,Pe))return Qt.decode(e);if(x(e,Te))return Jt.decode(e);if(x(e,_e))return zt.decode(e);if(x(e,Be))return Zt.decode(e);if(x(e,je))return eo.decode(e);if(x(e,Ve))return Xt.decode(e);if(x(e,Ie))return Yt.decode(e);throw new _}}class _s{convert(e){if(e instanceof Me)return Ot.encode(e);if(e instanceof oe)return qt.encode(e);if(e instanceof E)return Kt.encode(e);if(e instanceof Gt)return Ft.encode(e);if(e instanceof Oe)return Qt.encode(e);if(e instanceof Ut)return Jt.encode(e);if(e instanceof He)return zt.encode(e);if(e instanceof ae)return Zt.encode(e);if(e instanceof Ke)return eo.encode(e);if(e instanceof qe)return Xt.encode(e);if(e instanceof $t)return Yt.encode(e);throw new _}}class Ts extends i{encoder=new _s;decoder=new vs}const cn=new Ts,re="NodeValidatorResponse";class to extends xt{response;get type(){return re}constructor(e){super(),this.response=e}toJSON(){return ln.encode(this)}}class Ps{convert(e){return{[re]:cn.encode(e.response)}}}class Bs{convert(e){h(e,re);const n=e[re];return new to(cn.decode(n))}}class Is extends i{encoder=new Ps;decoder=new Bs}const ln=new Is;class Vs{convert(e){return new to(e)}}const js=new Vs,B=new Map;B.set(Z,Lo);B.set(J,Do);class Rs{convert(e){const n=B.get(e.type);if(!n)throw new S(e.type,`one of ${Array.from(k(B.keys(),a=>`"${a}"`)).join(", ")}`);return{[e.type]:n.encode(e)}}}class Ws{convert(e){if(typeof e!="object"||e===null)throw new S(typeof e,"object");const n=Object.keys(e);if(n.length!==1)throw new _("multiple values contained within the response object, unexpected");const[a]=n,r=B.get(a);if(h(e,a),!r)throw new S(a,`one of ${Array.from(k(B.keys(),c=>`"${c}"`)).join(", ")}`);return r.decode(e[a])}}class Ds extends i{encoder=new Rs;decoder=new Ws}function As(t,e){B.has(t)||B.set(t,e)}const Ls=new Ds;class Es{convert(e){return new L(e)}}const Ms=new Es;function ze(t){return new Qn(t.hash,t.height,t.time,t.numTransactions,t.proposer,t.proposer,t.size,t.fees)}function lo(t){return new rn(t.pubkey,t.name,null,t.company.name,new URL(t.company.website),new nn(new Ia(new Va(new co(t.location.coords[0])),new ja(new co(t.location.coords[1]))),t.location.country),t.operatingSystem,t.nodeType,t.networkType)}class Hs{responseStream;requestStream;lifecycleResponseSink;nodeValidatorResponseSink;constructor(e,n){this.requestStream=e,this.responseStream=n,this.lifecycleResponseSink=me(io(n),Ms),this.nodeValidatorResponseSink=me(io(n),js)}get stream(){return this.responseStream}async send(e){await this.requestStream.publish(e)}prng=new so(va());latestBlock=ze(ga());latestBlocks=f(50);latestVoters=f(50);histogramBlockTimeData=f(50);histogramBlockSizeData=f(50);histogramBlockTransactionData=f(50);generateVotersFromBlockDetail(e){const n=new so(e.time.valueOf()),a=K.length,r=Math.ceil(a/16),c=new Uint16Array(n.fillBytes(r*2));return new zn(Un.lsb0,new Jn(16,0),a,Array.from(k(c,l=>BigInt(l))))}histogramBlockHeightData=f(50);async updateBlockDetails(e){const n=this.latestBlock,a=(e.time.valueOf()-n.time.valueOf())/1e3,r=this.generateVotersFromBlockDetail(e);this.latestBlock=e,this.latestBlocks.put(e),this.latestVoters.put(r),this.histogramBlockTimeData.put(a),this.histogramBlockSizeData.put(e.size),this.histogramBlockTransactionData.put(e.numTransactions),this.histogramBlockHeightData.put(e.height),this.isConnected&&(this.isSubscribedToLatestBlock&&await this.nodeValidatorResponseSink.send(new E(e)),this.isSubscribedToVoters&&this.nodeValidatorResponseSink.send(new Oe(r)))}async initializeState(){for await(const e of xa(this.prng))this.updateBlockDetails(ze(e));await this.nodeValidatorResponseSink.send(new E(this.latestBlock)),await this.nodeValidatorResponseSink.send(new oe(new ro(Array.from(this.histogramBlockTimeData.immutableIterable()),Array.from(this.histogramBlockSizeData.immutableIterable()),Array.from(this.histogramBlockTransactionData.immutableIterable()),Array.from(this.histogramBlockHeightData.immutableIterable())))),this.nodeValidatorResponseSink.send(new ae(K.map(lo)))}async startProcessing(){await this.initializeState(),this.handleRequests(),this.streamBlocks()}async handleRequests(){for await(const e of this.requestStream)await this.handleRequest(e)}async streamBlocks(){const e=this.latestBlock;for await(const n of Na(this.prng,e.time.valueOf(),e.height)){const a=ze(n);this.updateBlockDetails(a)}}async handleRequest(e){if(e instanceof It){try{await this.handleWebSocketCommand(e.command)}catch(n){console.error("failed to handle life cycle request",e,n)}return}if(e instanceof Ht){try{await this.handleNodeValidatorRequest(e.request)}catch(n){console.error("failed to handle node validator request",e,n)}return}console.error("unrecognized request type",e)}async handleWebSocketCommand(e){if(e instanceof ie){await this.handleConnect();return}if(e instanceof Ee){await this.handleClose();return}}async handleNodeValidatorRequest(e){if(e instanceof jt){await this.handleSubscribeLatestBlock();return}if(e instanceof Vt){await this.handleSubscribeNodeIdentity();return}if(e instanceof Rt){await this.handleSubscribeVoters();return}if(e instanceof Dt){await this.handleRequestBlocksSnapshot();return}if(e instanceof At){await this.handleRequestHistogramSnapshot();return}if(e instanceof Wt){await this.handleRequestNodeIdentitySnapshot();return}if(e instanceof Lt){await this.handleRequestVotersSnapshot();return}if(e instanceof Et){await this.handleRequestValidatorsSnapshot();return}if(e instanceof Mt){await this.handleRequestStakeTableSnapshot();return}}isConnected=!1;isSubscribedToLatestBlock=!1;isSubscribedToVoters=!1;async handleConnect(){if(this.isConnected)throw new Error("already connected to WebSocket");this.isConnected=!0,await this.lifecycleResponseSink.send(new ce),await this.lifecycleResponseSink.send(new O)}async handleClose(){if(!this.isConnected)throw new Error("not connected to WebSocket");this.isConnected=!1,this.isSubscribedToLatestBlock=!1,this.isSubscribedToVoters=!1,await this.lifecycleResponseSink.send(new W)}async assertIsConnected(){if(!this.isConnected)throw new Error("not connected to WebSocket")}async handleSubscribeLatestBlock(){await this.assertIsConnected(),this.isSubscribedToLatestBlock=!0}async handleSubscribeNodeIdentity(){await this.assertIsConnected()}async handleSubscribeVoters(){await this.assertIsConnected(),this.isSubscribedToVoters=!0}async handleRequestBlocksSnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new Me(Array.from(this.latestBlocks.immutableIterable())))}async handleRequestHistogramSnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new oe(new ro(Array.from(this.histogramBlockTimeData.immutableIterable()),Array.from(this.histogramBlockSizeData.immutableIterable()),Array.from(this.histogramBlockTransactionData.immutableIterable()),Array.from(this.histogramBlockHeightData.immutableIterable()))))}async handleRequestNodeIdentitySnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new ae(K.map(lo)))}async handleRequestVotersSnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new Ke(Array.from(this.latestVoters.immutableIterable())))}async handleRequestValidatorsSnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new qe(K.map(e=>{const n=new go(e.address);return new _a(n,e.pubkey,e.stateVerKey,e.stake,new Ta(e.commission),new Map([[n.toString(),e.stake]]))})))}async handleRequestStakeTableSnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new He(K.map(e=>new Pa(new Ba(e.pubkey,e.stake),e.stateVerKey))))}}function Os(t){return new Worker(""+new URL("node_validator_web_worker_api.js-BTlQyQDI.js",import.meta.url).href,{name:t?.name})}Pr(te,on);As(re,ln);let Ue=null;function qs(){return Ue||(Ue=new Os),Ue}class Ks{requestChannel;responseChannel;constructor(e=y(1024),n=y(1024)){const a=qs();this.requestChannel=e,this.responseChannel=n,a.addEventListener("message",this.handleMessage.bind(this)),a.addEventListener("messageerror",this.handleMessageError.bind(this)),a.addEventListener("error",this.handleError.bind(this)),Gs(a,e)}get stream(){return this.responseChannel}async send(e){this.requestChannel.publish(e)}handleMessage(e){const n=Ls.decode(e.data);this.responseChannel.publish(n)}handleMessageError(){}handleError(){}}async function Gs(t,e){for await(const n of e)t.postMessage(Br.encode(n))}class Fs{get stream(){throw new _}async send(){throw new _}}const Re=s.createContext(new Fs),uo=t=>o.jsx(Re.Provider,{value:Us(),children:t.children});let Je=null;function zs(){return Je===null&&(Je=new Ks),Je}function Us(){return typeof window<"u"&&"Worker"in window||typeof self<"u"&&"Worker"in self?zs():new Hs(y(1024),y(1024))}try{Re.displayName="CappuccinoNodeValidatorServiceAPIContext",Re.__docgenInfo={description:"",displayName:"CappuccinoNodeValidatorServiceAPIContext",props:{}}}catch{}try{uo.displayName="ProvideCappuccinoNodeValidatorServiceAPIContext",uo.__docgenInfo={description:`ProvideCappuccinoNodeValidatorServiceAPIContext is a component that provides
a Cappuccino Node Validator Service API using a default implementation that
is dependent on the environment that the code is being run within.`,displayName:"ProvideCappuccinoNodeValidatorServiceAPIContext",props:{}}}catch{}async function oo(t,e,n,a,r){await Promise.all([t.blockSizeHistogramStream.publish({blocks:Array.from(e.immutableIterable()),blockSize:Array.from(a.immutableIterable())}),t.blockTimeHistogramStream.publish({blockSize:Array.from(a.immutableIterable()),blocks:Array.from(e.immutableIterable()),blockTime:Array.from(n.immutableIterable())}),t.blockThroughputHistogramStream.publish({blocks:Array.from(e.immutableIterable()),blockThroughput:Array.from(r.immutableIterable())})])}function dn(t){return{publicKey:t.publicKey,name:T(t.name),companyDetails:{name:T(t.company),website:t.companyWebsite?.toString()??null},location:{coords:t.location?.coords?[t.location.coords.lat.valueOf(),t.location.coords.lng.valueOf()]:null,country:T(t.location?.country??null)}}}function Js(t,e){return t.value-e.value}function Ge(t,e){const n=new Map;for(const a of t){const r=e(a);r!==null&&n.set(r,(n.get(r)??0)+1)}return Array.from(n.entries()).map(([a,r])=>({label:a,value:r})).sort(Js)}function un(t){return Ge(t,e=>e.operatingSystem)}function pn(t){return Ge(t,e=>e.location?.country??null)}function mn(t){return Ge(t,e=>e.networkType)}function hn(t){return Ge(t,e=>e.nodeType)}function yn(t,e){const n=Array.from(k(e,r=>Array.from(k(r,Number))));return t.map((r,c)=>{const l=k(n,q=>q[c])[Symbol.iterator](),[u,C]=bt(([q,Fe],le)=>[q+1,Fe+le],[0,0],l);return{voteParticipation:C,totalVotes:u}})}function Sn(t){const e=t[Symbol.iterator](),n=bt((r,c)=>{const d=k(c.proposerID,l=>En(r.keys(),u=>ft(u,l)===0)??l);for(const l of d)r.set(l,(r.get(l)??0)+1);return r},new Map,e),a=Array.from(n.entries()).sort((r,c)=>c[1]-r[1]);return Array.from(k(a,([r,c])=>({proposer:r,count:c})))}const A=50;function Qs(){const t=f(A+1),e=f(A+1),n=f(A+1),a=f(A+1),r=f(A+1),c=f(A+1);return{lastBlock:null,latestBlocks:t,blockHeightHistograms:e,blockTimeHistograms:n,blockSizeHistograms:a,blockThroughputHistograms:r,votersBitVecs:c,nodes:[],validators:new Map,stakeTable:new Map}}async function Zs(t,e,n){const a=t.lastBlock;t.lastBlock=n,t.latestBlocks.put(n.latestBlock),e.latestBlockStream.publish({height:n.latestBlock.height,time:n.latestBlock.time,size:n.latestBlock.size,transactions:n.latestBlock.numTransactions,proposer:n.latestBlock.proposerID}),t.blockHeightHistograms.put(n.latestBlock.height),t.blockSizeHistograms.put(n.latestBlock.size);const r=(n.latestBlock.time.valueOf()-(a?.latestBlock.time.valueOf()??0))/1e3;t.blockTimeHistograms.put(r),t.blockThroughputHistograms.put(n.latestBlock.size/Math.max(1,r)),await oo(e,t.blockHeightHistograms,t.blockTimeHistograms,t.blockSizeHistograms,t.blockThroughputHistograms),e.latestBlockProducers.publish(Sn(t.latestBlocks.immutableIterable()))}async function $s(t,e,n){for(const r of n.blocks){const c=t.lastBlock?.latestBlock??null;t.lastBlock=new E(r),t.latestBlocks.put(r),t.blockHeightHistograms.put(r.height),t.blockSizeHistograms.put(r.size);const d=(r.time.valueOf()-(c?.time.valueOf()??0))/1e3;t.blockTimeHistograms.put(d),t.blockThroughputHistograms.put(r.size/Math.max(1,d))}await oo(e,t.blockHeightHistograms,t.blockTimeHistograms,t.blockSizeHistograms,t.blockThroughputHistograms);const a=t.lastBlock?.latestBlock??null;a!==null&&e.latestBlockStream.publish({height:a.height,time:a.time,size:a.size,transactions:a.numTransactions,proposer:a.proposerID}),e.latestBlockProducers.publish(Sn(t.latestBlocks.immutableIterable()))}async function Ys(t,e,n){for(const a of n.histograms.blockHeights)t.blockHeightHistograms.put(a);for(const a of n.histograms.blockTime)t.blockTimeHistograms.put(a);for(const a of n.histograms.blockSize)t.blockSizeHistograms.put(a);for(const a of Ln(t.blockTimeHistograms.immutableIterable(),t.blockSizeHistograms.immutableIterable(),(r,c)=>(c??0)/Math.max(1,r??1)))t.blockThroughputHistograms.put(a);await oo(e,t.blockHeightHistograms,t.blockTimeHistograms,t.blockSizeHistograms,t.blockThroughputHistograms)}async function Xs(t,e,n){t.nodes=n.nodes;const a=un(t.nodes),r=pn(t.nodes),c=mn(t.nodes),d=hn(t.nodes),l=t.nodes.map(dn);await Promise.all([e.nodesSummary.publish(l),e.nodeCoordinates.publish(l),e.pieChartCountries.publish(r),e.pieChartNetworkTypes.publish(c),e.pieChartNodeTypes.publish(d),e.pieChartOperatingSystems.publish(a)])}async function ec(t,e,n){const a=t.nodes.findIndex(C=>C.publicKey.toString()===n.nodeIdentity.publicKey.toString());a<0?t.nodes.push(n.nodeIdentity):t.nodes[a]=n.nodeIdentity;const r=un(t.nodes),c=pn(t.nodes),d=mn(t.nodes),l=hn(t.nodes),u=t.nodes.map(dn);await Promise.all([e.nodesSummary.publish(u),e.nodeCoordinates.publish(u),e.pieChartCountries.publish(c),e.pieChartNetworkTypes.publish(d),e.pieChartNodeTypes.publish(l),e.pieChartOperatingSystems.publish(r)])}async function tc(t,e,n){for(const r of n.voters)t.votersBitVecs.put(r);const a=yn(t.nodes,t.votersBitVecs.immutableIterable());await e.voters.publish(a)}async function oc(t,e,n){t.votersBitVecs.put(n.latestVoter);const a=yn(t.nodes,t.votersBitVecs.immutableIterable());await e.voters.publish(a)}async function nc(t,e,n){t.validators=new Map(k(n.validators,a=>[a.stakeTableKey.toString(),a])),await e.validatorsStreamer.publish(t.validators)}async function ac(t,e,n){t.validators.set(n.validator.stakeTableKey.toString(),n.validator),await e.validatorsStreamer.publish(t.validators)}async function rc(t,e,n){t.stakeTable=new Map(k(n.stakeTable,a=>[a.stakeTableEntry.stakeKey.toString(),a])),await e.stakeTableStreamer.publish(t.stakeTable)}async function sc(t,e,n){t.stakeTable=new Map(k(n.stakeTable,a=>[a.stakeTableEntry.stakeKey.toString(),a])),await e.stakeTableStreamer.publish(t.stakeTable)}async function cc(t,e,n){if(n instanceof E)return Zs(t,e,n);if(n instanceof Me)return $s(t,e,n);if(n instanceof oe)return Ys(t,e,n);if(n instanceof ae)return Xs(t,e,n);if(n instanceof Gt)return ec(t,e,n);if(n instanceof Ke)return tc(t,e,n);if(n instanceof Oe)return oc(t,e,n);if(n instanceof qe)return nc(t,e,n);if(n instanceof Ut)return ac(t,e,n);if(n instanceof $t)return rc(t,e,n);if(n instanceof He)return sc(t,e,n)}async function ic(t,e,n,a){const r=t.status;if(r instanceof O){e.reconnectAttempt=0,e.errors.publish(null),await a.send(new jt),await a.send(new Vt),await a.send(new Rt),await a.send(new Jo),await a.send(new zo),await a.send(new Wt),await a.send(new Dt),await a.send(new At),await a.send(new Lt),await a.send(new Mt),await a.send(new Et);return}if(!(r instanceof W)||!e.mounted)return;e.reconnectAttempt+=1;const c=Math.min(4**e.reconnectAttempt,4e3)*(Math.random()+1);console.info("disconnected from node validator web socket, attempting to reconnect","attempting reconnect, attempt",e.reconnectAttempt,"sleeping for",c),await Bn(c),n.send(new ie)}const Cn=1;async function lc(t,e,n,a,r){const c=Qs(),d=n.stream[Symbol.asyncIterator]();let l=d.next();for(let u=await Promise.race([e.promise,l]);u!==Cn&&!u.done;l=d.next(),u=await Promise.race([e.promise,l])){const C=u.value;if(C instanceof to){await cc(c,t,C.response),await t.errors.publish(null);continue}if(C instanceof L){await t.lifecycle.publish(C),ic(C,t,a,r);continue}if(C instanceof Ao){await t.errors.publish(C);continue}}for(let u=await l;!u.done;u=await d.next()){const C=u.value;if(C instanceof L&&C.status instanceof W)break}}async function dc(t,e=null){e!==null&&await t.send(new Pt(e)),await t.send(new ie)}function uc(){return{latestBlockStream:y(4),blockTimeHistogramStream:y(4),blockSizeHistogramStream:y(4),blockThroughputHistogramStream:y(4),nodesSummary:y(4),nodeCoordinates:y(4),pieChartCountries:y(4),pieChartNetworkTypes:y(4),pieChartNodeTypes:y(4),pieChartOperatingSystems:y(4),voters:y(4),latestBlockProducers:y(4),stakeTableStreamer:y(4),validatorsStreamer:y(4),errors:y(4),lifecycle:y(4),reconnectAttempt:0,mounted:!0}}const We=s.createContext(new Map),De=s.createContext(new Map),po=t=>o.jsx(j,{children:o.jsx(P,{asyncIterable:t.stream,children:t.children})}),pc=t=>{const e=s.useContext(b);return o.jsx(We.Provider,{value:e??new Map,children:o.jsx(I,{children:t.children})})},mc=t=>{const e=s.useContext(b);return o.jsx(De.Provider,{value:e??new Map,children:o.jsx(I,{children:t.children})})},mo=t=>{const e=s.useContext(Zn),n=s.useContext(Re),a=uc();return s.useEffect(()=>{const r=de(),c=me(n,Mr),d=me(n,Vr);return lc(a,r,n,d,c),dc(d,e?.nodeValidatorServiceURL),()=>{d.send(new Ee),a.mounted=!1,r.complete(Cn)}},[a,n,e?.nodeValidatorServiceURL]),o.jsx(Hn.Provider,{value:a.latestBlockStream,children:o.jsx(na.Provider,{value:a.latestBlockProducers,children:o.jsx(ua.Provider,{value:a.blockTimeHistogramStream,children:o.jsx(aa.Provider,{value:a.blockSizeHistogramStream,children:o.jsx(ra.Provider,{value:a.blockThroughputHistogramStream,children:o.jsx(be.Provider,{value:a.nodesSummary,children:o.jsx(we.Provider,{value:a.pieChartOperatingSystems,children:o.jsx(Se.Provider,{value:a.pieChartNetworkTypes,children:o.jsx(Ce.Provider,{value:a.pieChartNodeTypes,children:o.jsx(ye.Provider,{value:a.pieChartCountries,children:o.jsx(Sa.Provider,{value:a.nodeCoordinates,children:o.jsx(fe.Provider,{value:a.voters,children:o.jsx(he.Provider,{value:a.lifecycle,children:o.jsx(Co.Provider,{value:Pn(a.errors,async r=>r?.error??null),children:o.jsx(po,{stream:a.stakeTableStreamer,children:o.jsx(pc,{children:o.jsx(po,{stream:a.validatorsStreamer,children:o.jsx(mc,{children:t.children})})})})})})})})})})})})})})})})})})};try{We.displayName="CurrentStakeTableContext",We.__docgenInfo={description:"",displayName:"CurrentStakeTableContext",props:{}}}catch{}try{De.displayName="CurrentValidatorsContext",De.__docgenInfo={description:"",displayName:"CurrentValidatorsContext",props:{}}}catch{}try{mo.displayName="ProvideCappuccinoNodeValidatorStreams",mo.__docgenInfo={description:`ProvideCappuccinoNodeValidatorStream is a React Context Provider that will
setup the node validator state, and provide React Contexts to distribute
the underlying node validator data to the components on the Node Validator
Page.`,displayName:"ProvideCappuccinoNodeValidatorStreams",props:{}}}catch{}const ct=t=>{const e=s.useContext(Co);return o.jsx(P,{asyncIterable:e,children:o.jsx(hc,{children:t.children})})},hc=t=>{const e=s.useContext(b),n=s.useContext(Qe);return o.jsx(Qe.Provider,{value:n??e,children:t.children})};try{ct.displayName="ErrorStreamConsumer",ct.__docgenInfo={description:`ErrorStreamConsumer is a component that is used to consume errors off of
the ErrorStreamContext.  This component will resolve the error stream
and provide the resolved error to the children of this component.`,displayName:"ErrorStreamConsumer",props:{}}}catch{}const M=t=>o.jsx("div",{className:"pie-chart-section-title card--padding heading--margin",children:o.jsx(Wa,{children:t.children})});try{M.displayName="PieChartSectionTitle",M.__docgenInfo={description:`PieChartSectionTitle is a component that represents the title of a section
of a pie chart. This component is useful for labeling sections of a pie
chart.`,displayName:"PieChartSectionTitle",props:{}}}catch{}const yc={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Åland Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthélemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia, Plurinational State of",BQ:"Bonaire, Sint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"Congo, Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"Côte d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cabo Verde",CW:"Curaçao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czechia",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia, Federated States of",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom of Great Britain and Northern Ireland",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran, Islamic Republic of",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao People's Democratic Republic",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova, Republic of",ME:"Montenegro",MF:"Saint Martin (French part)",MG:"Madagascar",MH:"Marshall Islands",MK:"North Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands, Kingdom of the",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestine, State of",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Réunion",RO:"Romania",RS:"Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena, Ascension and Tristan da Cunha",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten (Dutch part)",SY:"Syrian Arab Republic",SZ:"Eswatini",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Türkiye",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan, Province of China",TZ:"Tanzania, United Republic of",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States of America",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See",VC:"Saint Vincent and the Grenadines",VE:"Venezuela, Bolivarian Republic of",VG:"Virgin Islands (British)",VI:"Virgin Islands (U.S.)",VN:"Viet Nam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function Sc(t){return yc[t]??t}function Cc(t){return{label:Sc(t.label),value:t.value}}const it=()=>{const t=s.useContext(se),e=s.useContext(b);return t?o.jsx(o.Fragment,{}):o.jsxs(o.Fragment,{children:[o.jsx(M,{children:o.jsx(m,{text:"Countries"})}),o.jsx("div",{className:"card--padding",children:o.jsx(Le,{values:e.map(Cc)})})]})};try{it.displayName="CountriesPieChart",it.__docgenInfo={description:"",displayName:"CountriesPieChart",props:{}}}catch{}const bc=t=>o.jsxs(o.Fragment,{children:[o.jsx(m,{text:t.label}),o.jsx(G,{number:t.value})]}),lt=()=>{const t=s.useContext(se),e=s.useContext(b);return t?o.jsx(o.Fragment,{}):o.jsxs(kt.Provider,{value:bc,children:[o.jsx(M,{children:o.jsx(m,{text:"Network Types"})}),o.jsx("div",{className:"card--padding",children:o.jsx(Le,{values:e})})]})};try{lt.displayName="NetworkTypesPieChart",lt.__docgenInfo={description:"",displayName:"NetworkTypesPieChart",props:{}}}catch{}const fc=t=>o.jsxs(o.Fragment,{children:[o.jsx(m,{text:t.label}),o.jsx(G,{number:t.value})]}),dt=()=>{const t=s.useContext(se),e=s.useContext(b);return t?o.jsx(o.Fragment,{}):o.jsxs(kt.Provider,{value:fc,children:[o.jsx(M,{children:o.jsx(m,{text:"Node Types"})}),o.jsx("div",{className:"card--padding",children:o.jsx(Le,{values:e})})]})};try{dt.displayName="NodeTypesPieChart",dt.__docgenInfo={description:"",displayName:"NodeTypesPieChart",props:{}}}catch{}const kc=t=>o.jsxs(o.Fragment,{children:[o.jsx(m,{text:t.label}),o.jsx(G,{number:t.value})]}),ut=()=>{const t=s.useContext(se),e=s.useContext(b);return t?o.jsx(o.Fragment,{}):o.jsxs(kt.Provider,{value:kc,children:[o.jsx(M,{children:o.jsx(m,{text:"Operating System"})}),o.jsx("div",{className:"card--padding",children:o.jsx(Le,{values:e})})]})};try{ut.displayName="OperatingSystemPieChart",ut.__docgenInfo={description:"",displayName:"OperatingSystemPieChart",props:{}}}catch{}const pt=t=>{const e=s.useContext(Q),n=gc(e),a=wc(e);return o.jsx("div",{className:Ro(t.className,`web-socket-status ${a}`),children:n})};function wc(t){return t?t.status instanceof O?"web-socket-status--connected":t.status instanceof ce?"web-socket-status--connecting":"web-socket-status--disconnected":"web-socket-status--disconnected"}function gc(t){return t?t.status instanceof O?o.jsx(m,{text:"WebSocket Connected"}):t.status instanceof ce?o.jsx(m,{text:"WebSocket Connecting..."}):o.jsx(m,{text:"WebSocket Disconnected"}):o.jsx(m,{text:"WebSocket Disconnected"})}try{pt.displayName="WebSocketStatus",pt.__docgenInfo={description:"WebSocketStatus is a component that renders the WebSocket status.",displayName:"WebSocketStatus",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const xc=t=>{const e=s.useContext(qn),a=!s.useContext(Kn)||!e?"node-validator-grid edge-margin":"node-validator-grid with-wallet edge-margin";return o.jsx("div",{...t,className:Ro(t.className,a),children:t.children})},Dl=t=>o.jsx(Ye,{children:o.jsx(ct,{children:o.jsxs(In,{page:Vn.nodes,children:[o.jsx(Ma,{}),o.jsx(pt,{className:"edge-margin"}),o.jsx(fo,{className:"edge-margin"}),o.jsxs(xc,{...t,children:[o.jsx(On,{children:o.jsx(pa,{className:"latest-block"})}),o.jsx(sa,{children:o.jsx(ca,{className:"latest-block-producers"})}),o.jsx(ma,{children:o.jsx(ha,{})}),o.jsx(ia,{children:o.jsx(Aa,{})}),o.jsx(la,{children:o.jsx(ya,{})}),o.jsx(D,{className:"cdn",children:o.jsx(da,{className:"card-padding"})}),o.jsxs(D,{className:"network-map",children:[o.jsxs(La,{className:"card--padding heading--margin",children:[o.jsx(m,{text:"Network Map"}),o.jsx("div",{})]}),o.jsx(Ca,{children:o.jsx(ba,{children:o.jsxs(fa,{children:[o.jsx(Ha,{}),o.jsx(ka,{children:o.jsx(wa,{})})]})})})]}),o.jsx(D,{className:"countries",children:o.jsx(Xe,{children:o.jsx(it,{})})}),o.jsx(D,{className:"network-types",children:o.jsx(et,{children:o.jsx(lt,{})})}),o.jsx(D,{className:"node-types",children:o.jsx(tt,{children:o.jsx(dt,{})})}),o.jsx(D,{className:"operating-systems",children:o.jsx(rt,{children:o.jsx(ut,{})})}),o.jsx(Ra,{className:"nodes",children:o.jsx(nt,{children:o.jsx(at,{children:o.jsx(Ct,{})})})})]}),o.jsx(Ea,{})]})})});try{nodespage.displayName="nodespage",nodespage.__docgenInfo={description:"NodesPage is a component that renders the Nodes page.",displayName:"nodespage",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const bn=()=>{const[t]=s.useContext(R);return t.name===null||t.name===""?o.jsx(m,{text:"-"}):o.jsx(m,{text:t.name})},fn=()=>{const[t]=s.useContext(R);return o.jsx(Wn,{value:t.publicKey,children:o.jsx(Rn,{value:t.publicKey})})},Nc=()=>{const[,,,t]=s.useContext(R),e=t?.account.address??null;if(e===null)return o.jsx(m,{text:"-"});const n=new go(e);return o.jsx(Dn,{value:n,children:o.jsx(An,{value:n})})},vc=()=>{const t=s.useContext(St),[,,,e]=s.useContext(R),n=e?.stake??null;if(t===null||n===null)return o.jsx(m,{text:"-"});const a=1e5,r=Number(n*BigInt(a)/t)/a;return o.jsxs(o.Fragment,{children:[o.jsx(jn,{money:Mn.ESP(n)})," (",o.jsx(ko,{percentage:r}),")"]})},kn=()=>{const[t]=s.useContext(R);return t.companyDetails===null||t.companyDetails.name===null||t.companyDetails.name===""?o.jsx(m,{text:"-"}):o.jsx(m,{text:t.companyDetails.name})},wn=()=>{const[t]=s.useContext(R);return t.companyDetails===null||t.companyDetails.website===null||t.companyDetails?.website===""?o.jsx(m,{text:"-"}):t.companyDetails.website?o.jsx(Da,{href:t.companyDetails.website,target:"_blank",children:o.jsx(m,{text:t.companyDetails.website})}):o.jsx(m,{text:"-"})},gn=()=>{const[,t]=s.useContext(R);return t===null?o.jsx(m,{text:"?"}):t.totalVotes===0?o.jsx(G,{number:t.voteParticipation}):o.jsxs(o.Fragment,{children:[o.jsx(G,{number:t.voteParticipation})," (",o.jsx(ko,{percentage:t.voteParticipation/t.totalVotes}),")"]})},xn=t=>o.jsx(bo,{columns:[{label:"Public Key",columnType:p.publicKey,buildCell:t.components[0]},{label:"Address",columnType:p.address,buildCell:t.components[1]},{label:"Name",columnType:p.name,buildCell:t.components[2]},{label:"Company",columnType:p.companyName,buildCell:t.components[3]},{label:"Website",columnType:p.companyWebSite,buildCell:t.components[4]},{label:"Stake",columnType:p.stake,buildCell:t.components[5],alignment:$e.end},{label:"Vote Participation",columnType:p.voteParticipation,buildCell:t.components[6],alignment:$e.end}]}),Nn=t=>o.jsx(bo,{columns:[{label:"Public Key",columnType:p.publicKey,buildCell:t.components[0]},{label:"Name",columnType:p.name,buildCell:t.components[1]},{label:"Company",columnType:p.companyName,buildCell:t.components[2]},{label:"Website",columnType:p.companyWebSite,buildCell:t.components[3]},{label:"Vote Participation",columnType:p.voteParticipation,buildCell:t.components[4],alignment:$e.end}]}),mt=t=>{const{numElements:e=20}=t;return o.jsx(b.Provider,{value:Array.from(wo(e)),children:o.jsx(xn,{components:[w,w,w,w,w,w,w]})})},ho=t=>{const{numElements:e=20}=t;return o.jsx(b.Provider,{value:Array.from(wo(e)),children:o.jsx(Nn,{components:[w,w,w,w,w]})})},ht=()=>o.jsx(xn,{components:[fn,Nc,bn,kn,wn,vc,gn]}),yt=()=>o.jsx(Nn,{components:[fn,bn,kn,wn,gn]});function yo(t,e){const[n]=t,[a]=e;return ft(n.publicKey.data,a.publicKey.data)}function _c(t,e){const[n]=t,[a]=e;return n.name===null&&a.name===null?0:n.name===null?1:a.name===null?-1:n.name.localeCompare(a.name)}function Tc(t,e){const[n]=t,[a]=e,r=n.companyDetails?.name??null,c=a.companyDetails?.name??null;return r===null&&c===null?0:r===null?1:c===null?-1:r.localeCompare(c)}function Pc(t,e){const[n]=t,[a]=e,r=n.companyDetails?.website??null,c=a.companyDetails?.website??null;return r===null&&c===null?0:r===null?1:c===null?-1:r.localeCompare(c)}function Bc(t,e){const[,n]=t,[,a]=e;return n.voteParticipation-a.voteParticipation}function Ic(t,e){const[,,,n]=t,[,,,a]=e,r=n?.account.address,c=a?.account.address;return!r&&!c?0:r?c?ft(r,c):-1:1}function Vc(t,e){const[,,n]=t,[,,a]=e,r=n?.stakeTableEntry.stakeAmount??0n,c=a?.stakeTableEntry.stakeAmount??0n;return Number(r-c)}function jc(t,e){const[,,,n]=t,[,,,a]=e,r=n?.commission.value??0,c=a?.commission.value??0;return Number(r-c)}function Rc(t,e,n,a){return t.map((r,c)=>[r,e[c]??{totalVotes:0,voteParticipation:0},n.get(r.publicKey.toString())??null,a.get(r.publicKey.toString())??null])}function Wc(t){switch(t){case p.publicKey:return yo;case p.name:return _c;case p.companyName:return Tc;case p.companyWebSite:return Pc;case p.voteParticipation:return Bc;case p.stake:return Vc;case p.address:return Ic;case p.commission:return jc;default:return yo}}function Dc(t,e){switch(e){case Ze.asc:return t;case Ze.desc:return(n,a)=>-t(n,a);default:return t}}function Ac(t,e,n){const a=Dc(Wc(e),n);return t.sort(a)}const St=s.createContext(0n),Ct=()=>{const[t,e]=s.useState({sortColumn:p.voteParticipation,sortDir:Ze.asc}),n=s.useContext(Qe),a=s.useContext(se),r=s.useContext(b),c=s.useContext(ke),d=s.useContext(We),l=s.useContext(De);if(n)return o.jsx(fo,{});if((!r||r instanceof Array&&r.length<=0)&&a)return o.jsx(mt,{});const u=bt((vn,_n)=>vn+_n.stake,0n,l.values()),C=Rc(r,c,d,l),{sortColumn:q,sortDir:Fe}=t,le=Ac(C,q,Fe);return u===0n?o.jsx(St.Provider,{value:u,children:o.jsx(no.Provider,{value:t,children:o.jsx(ao.Provider,{value:e,children:o.jsx(b.Provider,{value:le,children:o.jsx(yt,{})})})})}):o.jsx(St.Provider,{value:u,children:o.jsx(no.Provider,{value:t,children:o.jsx(ao.Provider,{value:e,children:o.jsx(b.Provider,{value:le,children:o.jsx(ht,{})})})})})};try{mt.displayName="NodesSummaryWithStakeDataTablePlaceholder",mt.__docgenInfo={description:`NodesSummaryDataTablePlaceholder is a component that renders a placeholder
version of the Node Summary Data Table.`,displayName:"NodesSummaryWithStakeDataTablePlaceholder",props:{numElements:{defaultValue:null,description:"",name:"numElements",required:!1,type:{name:"number"}}}}}catch{}try{ho.displayName="NodesSummaryDataTablePlaceholder",ho.__docgenInfo={description:"",displayName:"NodesSummaryDataTablePlaceholder",props:{numElements:{defaultValue:null,description:"",name:"numElements",required:!1,type:{name:"number"}}}}}catch{}try{ht.displayName="NodesSummaryWithStakeDataTablePopulated",ht.__docgenInfo={description:`NodesSummaryDataTablePopulated is a component that renders the populated
version of the Node Summary Data Table.`,displayName:"NodesSummaryWithStakeDataTablePopulated",props:{}}}catch{}try{yt.displayName="NodesSummaryDataTablePopulated",yt.__docgenInfo={description:"",displayName:"NodesSummaryDataTablePopulated",props:{}}}catch{}try{Ct.displayName="NodesSummaryDataTable",Ct.__docgenInfo={description:`NodeSummaryDataTable handles the display of the Node Summary Data Table.
Additionally, it handles the sorting of the data via the manipulation of the
headers of the table data.`,displayName:"NodesSummaryDataTable",props:{}}}catch{}export{We as C,Ct as N,uo as P,De as a,mo as b,Dl as c};
