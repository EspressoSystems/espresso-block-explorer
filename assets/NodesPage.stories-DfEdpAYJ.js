var Io=Object.defineProperty;var jo=(t,e,o)=>e in t?Io(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var s=(t,e,o)=>jo(t,typeof e!="symbol"?e+"":e,o);import{j as n}from"./jsx-runtime-BlAj40OV.js";import{P as Do}from"./NowProvider-D4xjbY-7.js";import{O as Lo}from"./PathResolverProvider-Xv58eOQd.js";import{y as C,G as Vo,H as Eo,j as xe,I as Q,J as jt,h as Dt,g as Lt,K as Vt,L as Et,M as Ho,O as Ao,P as Wo,z as kt,A as Mo}from"./CircularBuffer-BV9Jw316.js";import{U as x,C as qo,D as g,u as _,c as I,d as j,F as Ht,m as Oo,E as ve,L as O}from"./LoadingProvider-CzJMQTG6.js";import{T as l,I as w,a as h,N as Go,e as Fo,f as Ko,s as At,A as zo,h as Uo,j as Jo,x as S,y as f,p as Wt}from"./string-CeEx6zFN.js";import"./base64-B2mB5PCd.js";import{t as Mt}from"./TaggedBase64-2LmeqDVW.js";import"./array_buffer--l28O267.js";import{z as Zo,m as E,g as qt,h as Qo,j as Ot,i as Yo}from"./functional-B4fslo0b.js";import"./monetary_value-Cx3JDvUv.js";import"./FetchError-D54b6GBB.js";import{P as Nt,a as Xo,c as $o,n as ke,g as en,s as tn}from"./generateFakeData-B4ZSCHuN.js";import"./NotFoundError-DaVPhKpy.js";import{n as Gt}from"./url-BmrhwqgJ.js";import{w as Ft,L as on,e as nn,p as vt,f as rn}from"./constants-CTnWHyHs.js";import{r as Kt,R as c}from"./index-Cs7sjTYM.js";import{A as k}from"./AsyncIterableResolver-CgU8Wx5C.js";import"./ProvideAsyncStates-chorLWKv.js";import{L as sn,a as an,b as cn,C as ln}from"./LatestBlockProducers-DIK8TtIL.js";import"./PromiseResolver-B0AdYfP5.js";import{S as Be,D as dn,a as un,c as G,b as pn}from"./DataTable-DgSSW7oJ.js";import{j as mn,k as hn,l as yn,m as Cn,d as V,E as zt,C as fn,n as bn,o as Sn,p as gn,q as wn,F as xn,S as kn}from"./StoryBookPathResolver-vxNXYPsK.js";import"./DateTimeFormattersProvider-D6Gp1Kbv.js";import"./LocaleProvider-B0_30C1H.js";import{O as Nn,P as vn}from"./NavDrawerStateProvider-HpepdHmi.js";import"./NumberFormattersProvider-DANbX_lC.js";import{N as Bn,a as Tn,W as Pn,P as Rn,D as _n,b as In}from"./WorldMapDotsPopulationResolver-rJbXWJSo.js";import{W as jn}from"./WorldMapDotsFullResolution-BKIh9bj8.js";import"./AffineTransform-DiV9SxhF.js";import{a as Ut}from"./higher_order-DnPEgWEz.js";import{a as J,C as B}from"./Card-0izmXN96.js";import{B as Dn,c as Ln}from"./BlockSizeHistogram-Dm_9Fuli.js";import{L as Vn,B as En,a as Hn}from"./LatestBlockSummary-LFdrNnBf.js";import{a as he,b as Ue}from"./PieChart-DPNDqK-K.js";import{H as An}from"./Heading2-DdOe_FXR.js";import{T as u}from"./Text-BU7JBOLk.js";import{F as Wn}from"./Footer-DtxsyFUR.js";import{H as Mn}from"./Header-DV0ijJPt.js";import{N as H}from"./NumberText-C4Z_0tU7.js";import"./ByteSizeText-Dv1cMyzR.js";import{P as qn}from"./TransactionsPerSecondText-DhOVTE9v.js";import"./DateTimeText-H0_MZ3-7.js";import"./FullHexText-D7hvn_Cq.js";import"./HexText-B8ed61WB.js";import"./MoneyText-C0mhNXDV.js";import"./RelativeTimeText-DCz-EhHt.js";import{T as On}from"./TaggedBase64Text-CGXJT8bt.js";import"./TimeText-iZ8ovT8K.js";import{L as Gn}from"./Link-DkuKr0oH.js";import"./sleep-CW-vxfof.js";import"./data-CgOROfg9.js";import"./_commonjsHelpers-BosuxZz1.js";import"./CircularProgressIndicator-CmmjYXfy.js";import"./SummaryTabledLabeledValue-Cwjroine.js";import"./typography-BIj1kvXp.js";import"./ChevronUp-kyB5007e.js";import"./SVGIconBase-eCXHSPnQ.js";import"./CopyButton-EFpwbuCy.js";import"./CheckCircle-YNmVoImJ.js";import"./Copy-DeuPxRNR.js";/* empty css               */import"./SVGToolTip-VtYDiDwI.js";import"./SVGPathBuilder-XZx_HA2Y.js";import"./index-Dk74W0Oi.js";import"./LabeledAnchorButton-Ccf2RRuc.js";import"./AnchorButton-QgyBwLin.js";/* empty css                */import"./EspressoLogo-DwD84bVM.js";import"./ArrowRight-t3TwXnAd.js";import"./Button-Cc3XS5nv.js";import"./IconAnchorButton-CLyCnfGb.js";import"./IconButton-C8CRMxou.js";import"./LabeledButton-Bzsgrhnz.js";import"./SocialMediaLinks-Bm4ZO-q5.js";import"./TwitterIcon-DgUjAjdP.js";import"./EspressoLogoAndTitle-2fto-X4z.js";import"./NavBar-BFWD_4mN.js";import"./Menu-fK84igno.js";class Fn{constructor(e){s(this,"publishQueue");s(this,"pollBlocked");s(this,"publishBlocked");s(this,"capacity");s(this,"closed",!1);this.publishQueue=C(Math.max(2,e),Eo.throwMissingElement,Vo.throw);const o=xe();this.pollBlocked=o,this.publishBlocked=o,o.complete(),this.capacity=e-1}get isClosed(){return this.closed}close(){if(this.closed)throw new Q;this.closed=!0}async drain(){for(;this.publishQueue.length>0;)this.publishQueue.get()}async publish(e){if(this.closed)throw new Q;if(this.publishQueue.length>=this.capacity){if(this.publishBlocked.isCompleted){const o=xe();this.publishBlocked=o,await o.promise}return await this.publishBlocked.promise,this.publish(e)}this.publishQueue.put(e),this.pollBlocked.isCompleted||this.pollBlocked.complete()}async poll(){if(this.publishQueue.length<=0){if(this.isClosed)throw new Q;if(this.pollBlocked.isCompleted){const o=xe();this.pollBlocked=o}return await this.pollBlocked.promise,this.poll()}const e=this.publishQueue.get();return this.publishBlocked.isCompleted||this.publishBlocked.complete(),e}[Symbol.asyncIterator](){return new Kn(this)}}class Kn{constructor(e){s(this,"channel");this.channel=e}async next(){try{return{done:!1,value:await this.channel.poll()}}catch(e){if(e instanceof Q)return{done:!0,value:void 0};throw e}}}function m(t){return new Fn(t)}class zn{constructor(e,o){this.sink=e,this.converter=o,this.sink=e,this.converter=o}async send(e){await this.sink.send(this.converter.convert(e))}}function Y(t,e){return new zn(t,e)}class Je{}const X="ConnectionClosed";class F extends Je{toJSON(){return Ze.encode(this)}}class Un{convert(e){if(typeof e!="string")throw new w(typeof e,"string");if(e!==X)throw new w(e,X);return new F}}class Jn{convert(){return X}}class Zn extends l{constructor(){super(...arguments);s(this,"encoder",new Jn);s(this,"decoder",new Un)}}const Ze=new Zn;class N{}const $="BlocksSnapshot";class ye extends N{constructor(o){super();s(this,"blocks");this.blocks=o}toJSON(){return Qe.encode(this)}}class Qn{convert(e){h(e,$);const o=e[$];return new ye(jt.decode(o))}}class Yn{convert(e){return{[$]:jt.encode(e.blocks)}}}class Xn extends l{constructor(){super(...arguments);s(this,"encoder",new Yn);s(this,"decoder",new Qn)}}const Qe=new Xn,ee="HistogramSnapshot";class A extends N{constructor(o){super();s(this,"histograms");this.histograms=o}toJSON(){return Ye.encode(this)}}class $n{convert(e){return h(e,ee),new A(Dt.decode(e[ee]))}}class er{convert(e){return{[ee]:Dt.encode(e.histograms)}}}class tr extends l{constructor(){super(...arguments);s(this,"encoder",new er);s(this,"decoder",new $n)}}const Ye=new tr,te="LatestBlock";class P extends N{constructor(o){super();s(this,"latestBlock");this.latestBlock=o}toJSON(){return Xe.encode(this)}}class or{convert(e){return h(e,te),new P(Lt.decode(e[te]))}}class nr{convert(e){return{[te]:Lt.encode(e.latestBlock)}}}class rr extends l{constructor(){super(...arguments);s(this,"encoder",new nr);s(this,"decoder",new or)}}const Xe=new rr;class Jt{constructor(e,o){s(this,"coords");s(this,"country");this.coords=e,this.country=o}toJSON(){return Te.encode(this)}}class sr{convert(e){return{coords:Ft.encode(e.coords),country:At.encode(e.country)}}}class ar{convert(e){return h(e,"coords","country"),new Jt(Ft.decode(e.coords),At.decode(e.country))}}class cr extends l{constructor(){super(...arguments);s(this,"encoder",new sr);s(this,"decoder",new ar)}}const Te=new cr,Zt=new Go(new Fo(Te),new Ko(Te));class Qt{constructor(e,o,r,a,i,p,d,y){s(this,"publicKey");s(this,"name");s(this,"publicURL");s(this,"company");s(this,"location");s(this,"operatingSystem");s(this,"nodeType");s(this,"networkType");this.publicKey=e,this.name=o,this.publicURL=r,this.company=a,this.location=i,this.operatingSystem=p,this.nodeType=d,this.networkType=y}toJSON(){return W.encode(this)}}class ir{convert(e){return{public_key:Mt.encode(e.publicKey),name:S.encode(e.name),public_url:Gt.encode(e.publicURL),company:S.encode(e.company),location:Zt.encode(e.location),operating_system:S.encode(e.operatingSystem),node_type:S.encode(e.nodeType),network_type:S.encode(e.networkType)}}}class lr{convert(e){return h(e,"public_key","name","public_url","company","location","operating_system","node_type","network_type"),new Qt(Mt.decode(e.public_key),S.decode(e.name),Gt.decode(e.public_url),S.decode(e.company),Zt.decode(e.location),S.decode(e.operating_system),S.decode(e.node_type),S.decode(e.network_type))}}class dr extends l{constructor(){super(...arguments);s(this,"encoder",new ir);s(this,"decoder",new lr)}}const W=new dr,Yt=new zo(new Uo(W),new Jo(W)),oe="LatestNodeIdentity";class $e extends N{constructor(o){super();s(this,"nodeIdentity");this.nodeIdentity=o}toJSON(){return et.encode(this)}}class ur{convert(e){return h(e,oe),new $e(W.decode(e[oe]))}}class pr{convert(e){return{[oe]:W.encode(e.nodeIdentity)}}}class mr extends l{constructor(){super(...arguments);s(this,"encoder",new pr);s(this,"decoder",new ur)}}const et=new mr,ne="LatestVoters";class Ce extends N{constructor(o){super();s(this,"latestVoter");this.latestVoter=o}toJSON(){return tt.encode(this)}}class hr{convert(e){return h(e,ne),new Ce(Vt.decode(e[ne]))}}class yr{convert(e){return{[ne]:Vt.encode(e.latestVoter)}}}class Cr extends l{constructor(){super(...arguments);s(this,"encoder",new yr);s(this,"decoder",new hr)}}const tt=new Cr,re="NodeIdentitySnapshot";class M extends N{constructor(o){super();s(this,"nodes");this.nodes=o}toJSON(){return ot.encode(this)}}class fr{convert(e){h(e,re);const o=e[re];return new M(Yt.decode(o))}}class br{convert(e){return{[re]:Yt.encode(e.nodes)}}}class Sr extends l{constructor(){super(...arguments);s(this,"encoder",new br);s(this,"decoder",new fr)}}const ot=new Sr,se="VotersSnapshot";class fe extends N{constructor(o){super();s(this,"voters");this.voters=o}toJSON(){return nt.encode(this)}}class gr{convert(e){h(e,se);const o=e[se];return new fe(Et.decode(o))}}class wr{convert(e){return{[se]:Et.encode(e.voters)}}}class xr extends l{constructor(){super(...arguments);s(this,"encoder",new wr);s(this,"decoder",new gr)}}const nt=new xr;class kr{convert(e){if(f(e,$))return Qe.decode(e);if(f(e,ee))return Ye.decode(e);if(f(e,te))return Xe.decode(e);if(f(e,oe))return et.decode(e);if(f(e,ne))return tt.decode(e);if(f(e,re))return ot.decode(e);if(f(e,se))return nt.decode(e);throw new x}}class Nr{convert(e){if(e instanceof ye)return Qe.encode(e);if(e instanceof A)return Ye.encode(e);if(e instanceof P)return Xe.encode(e);if(e instanceof $e)return et.encode(e);if(e instanceof Ce)return tt.encode(e);if(e instanceof M)return ot.encode(e);if(e instanceof fe)return nt.encode(e);throw new x}}class vr extends l{constructor(){super(...arguments);s(this,"encoder",new Nr);s(this,"decoder",new kr)}}const Xt=new vr,ae="ConnectionConnecting";class K extends Je{toJSON(){return rt.encode(this)}}class Br{convert(e){if(typeof e!="string")throw new w(typeof e,"string");if(e!==ae)throw new w(e,ae);return new K}}class Tr{convert(){return ae}}class Pr extends l{constructor(){super(...arguments);s(this,"encoder",new Tr);s(this,"decoder",new Br)}}const rt=new Pr,ce="ConnectionOpened";class z extends Je{toJSON(){return st.encode(this)}}class Rr{convert(e){if(typeof e!="string")throw new w(typeof e,"string");if(e!==ce)throw new w(e,ce);return new z}}class _r{convert(){return ce}}class Ir extends l{constructor(){super(...arguments);s(this,"encoder",new _r);s(this,"decoder",new Rr)}}const st=new Ir;class jr{convert(e){if(e===ce)return st.decode(e);if(e===X)return Ze.decode(e);if(e===ae)return rt.decode(e);throw new x}}class Dr{convert(e){if(e instanceof z)return st.encode(e);if(e instanceof F)return Ze.encode(e);if(e instanceof K)return rt.encode(e);throw new x}}class Lr extends l{constructor(){super(...arguments);s(this,"encoder",new Dr);s(this,"decoder",new jr)}}const at=new Lr;class ct{}const ie="NodeValidatorResponse";class be extends ct{constructor(o){super();s(this,"response");this.response=o}toJson(){return it.encode(this)}}class Vr{convert(e){return{[ie]:Xt.encode(e.response)}}}class Er{convert(e){h(e,ie);const o=e[ie];return new be(Xt.decode(o))}}class Hr extends l{constructor(){super(...arguments);s(this,"encoder",new Vr);s(this,"decoder",new Er)}}const it=new Hr;class D extends ct{constructor(o){super();s(this,"response");this.response=o}toJson(){return at.encode(this)}}const le="LifeCycleResponse";class Ar{convert(e){return{[le]:at.encode(e.response)}}}class Wr{convert(e){return h(e,le),new D(at.decode(e[le]))}}class Mr extends l{constructor(){super(...arguments);s(this,"encoder",new Ar);s(this,"decoder",new Wr)}}const $t=new Mr,de="ErrorResponse";class lt extends ct{constructor(o){super();s(this,"error");this.error=o}toJson(){return dt.encode(this)}}class qr{convert(e){return{[de]:Wt.encode(e.error)}}}class Or{convert(e){return h(e,de),new lt(Wt.decode(e[de]))}}class Gr extends l{constructor(){super(...arguments);s(this,"encoder",new qr);s(this,"decoder",new Or)}}const dt=new Gr;class Fr{convert(e){return new be(e)}}const Kr=new Fr;class zr{convert(e){return new D(e)}}const Ur=new zr,q=Kt.createContext(new D(new F)),ue=Kt.createContext(qo()),Pe=t=>{const e=c.useContext(ue);return n.jsx(k,{asyncIterable:e,children:n.jsx(Jr,{children:t.children})})},Jr=t=>{const e=c.useContext(g);return e===null?n.jsx(q.Provider,{value:new D(new F),children:t.children}):n.jsx(q.Provider,{value:e,children:t.children})};try{q.displayName="LifeCycleResponseContext",q.__docgenInfo={description:`LifeCycleResponseContext is a React Context that is used to store and make
available the current LifeCycleResponse.`,displayName:"LifeCycleResponseContext",props:{}}}catch{}try{ue.displayName="LifeCycleResponseStreamContext",ue.__docgenInfo={description:`LifeCycleResponseStreamContext is a React Context that is able to provide
a stream of LifeCycleResponses. These can be used to update the UI in order
to indicate the current state of the WebSocket connection.`,displayName:"LifeCycleResponseStreamContext",props:{}}}catch{}try{Pe.displayName="LifeCycleResponseStreamConsumer",Pe.__docgenInfo={description:`LifeCycleResponseStreamConsumer is a component that is able to consume the
LifeCycleResponseStreamContext, and provide the LifeCycleResponse to the
children of the component via the LifeCycleResponseContext context.`,displayName:"LifeCycleResponseStreamConsumer",props:{}}}catch{}const eo=c.createContext(_()),Re=t=>{const e=c.useContext(eo);return n.jsx(I,{children:n.jsx(k,{asyncIterable:e,children:n.jsx(j,{children:t.children})})})};try{Re.displayName="CountriesPieChartStreamConsumer",Re.__docgenInfo={description:"",displayName:"CountriesPieChartStreamConsumer",props:{}}}catch{}const to=c.createContext(_()),_e=t=>{const e=c.useContext(to);return n.jsx(I,{children:n.jsx(k,{asyncIterable:e,children:n.jsx(j,{children:t.children})})})};try{_e.displayName="NetworkTypesPieChartStreamConsumer",_e.__docgenInfo={description:"",displayName:"NetworkTypesPieChartStreamConsumer",props:{}}}catch{}const oo=c.createContext(_()),Ie=t=>{const e=c.useContext(oo);return n.jsx(I,{children:n.jsx(k,{asyncIterable:e,children:n.jsx(j,{children:t.children})})})};try{Ie.displayName="NodeTypesPieChartStreamConsumer",Ie.__docgenInfo={description:"",displayName:"NodeTypesPieChartStreamConsumer",props:{}}}catch{}var b=(t=>(t.publicKey="publicKey",t.name="name",t.address="address",t.companyName="companyName",t.companyWebSite="companyWebSite",t.location="location",t.stake="stake",t.uptime="uptime",t.voteParticipation="voteParticipation",t))(b||{});const no=c.createContext(_()),ro=c.createContext(_()),so=c.createContext([]),je=t=>{const e=c.useContext(g);return n.jsx(so.Provider,{value:e??[],children:t.children})},De=t=>{const e=c.useContext(ro);return n.jsx(I,{children:n.jsx(k,{asyncIterable:e,children:n.jsx(je,{children:n.jsx(j,{children:t.children})})})})},Le=t=>{const e=c.useContext(no);return n.jsx(I,{children:n.jsx(k,{asyncIterable:e,children:n.jsx(j,{children:t.children})})})};try{je.displayName="VotersParticipationStatesProvider",je.__docgenInfo={description:"",displayName:"VotersParticipationStatesProvider",props:{}}}catch{}try{De.displayName="VotersParticipationStatsConsumer",De.__docgenInfo={description:"",displayName:"VotersParticipationStatsConsumer",props:{}}}catch{}try{Le.displayName="NodeSummaryStreamConsumer",Le.__docgenInfo={description:"",displayName:"NodeSummaryStreamConsumer",props:{}}}catch{}const ao=c.createContext(_()),Ve=t=>{const e=c.useContext(ao);return n.jsx(I,{children:n.jsx(k,{asyncIterable:e,children:n.jsx(j,{children:t.children})})})};try{Ve.displayName="OperatingSystemPieChartStreamConsumer",Ve.__docgenInfo={description:"",displayName:"OperatingSystemPieChartStreamConsumer",props:{}}}catch{}class v{}const co="SubscribeNodeIdentity";class ut extends v{valueOf(){return co}}const io="SubscribeLatestBlock";class pt extends v{valueOf(){return io}}const lo="SubscribeVoters";class mt extends v{valueOf(){return lo}}const uo="RequestNodeIdentitySnapshot";class ht extends v{valueOf(){return uo}}const po="RequestBlocksSnapshot";class yt extends v{valueOf(){return po}}const mo="RequestHistogramSnapshot";class Ct extends v{valueOf(){return mo}}const ho="RequestVotersSnapshot";class ft extends v{valueOf(){return ho}}class yo{}const Co="Connect";class bt extends yo{valueOf(){return Co}}const fo="Close";class St extends yo{valueOf(){return fo}}class Zr{convert(e){return e.valueOf()}}class Qr{convert(e){if(typeof e!="string")throw new w(typeof e,"string");switch(e){case co:return new ut;case io:return new pt;case lo:return new mt;case uo:return new ht;case po:return new yt;case mo:return new Ct;case ho:return new ft;default:throw new w(e,"CappuccinoNodeValidatorRequest")}}}class Yr extends l{constructor(){super(...arguments);s(this,"encoder",new Zr);s(this,"decoder",new Qr)}}const bo=new Yr;class Xr{convert(e){return e.valueOf()}}class $r{convert(e){if(typeof e!="string")throw new w(typeof e,"string");switch(e){case Co:return new bt;case fo:return new St;default:throw new w(e,"CappuccinoNodeValidatorRequest")}}}class es extends l{constructor(){super(...arguments);s(this,"encoder",new Xr);s(this,"decoder",new $r)}}const So=new es;class go{}const pe="LifeCycleRequest";class U extends go{constructor(o){super();s(this,"request");this.request=o}toJson(){return gt.encode(this)}}class ts{convert(e){return{[pe]:So.encode(e.request)}}}class os{convert(e){return h(e,pe),new U(So.decode(e[pe]))}}class ns extends l{constructor(){super(...arguments);s(this,"encoder",new ts);s(this,"decoder",new os)}}const gt=new ns,me="NodeValidatorRequest";class Se extends go{constructor(o){super();s(this,"request");this.request=o}toJson(){return wt.encode(this)}}class rs{convert(e){return{[me]:bo.encode(e.request)}}}class ss{convert(e){return h(e,me),new Se(bo.decode(e[me]))}}class as extends l{constructor(){super(...arguments);s(this,"encoder",new rs);s(this,"decoder",new ss)}}const wt=new as;class cs{convert(e){return new U(e)}}const is=new cs;class ls{convert(e){return new Se(e)}}const ds=new ls;class us{constructor(e){s(this,"channel");this.channel=e}async send(e){await this.channel.publish(e)}}function Bt(t){return new us(t)}function Ne(t){return new Mo(t.hash,t.height,t.time,t.numTransactions,t.proposer,t.proposer,t.size,t.fees)}function Tt(t){return new Qt(t.pubkey,t.name,null,t.company.name,new Jt(new on(new nn(new vt(t.location.coords[0])),new rn(new vt(t.location.coords[1]))),t.location.country),t.operatingSystem,t.nodeType,t.networkType)}class ps{constructor(e,o){s(this,"responseStream");s(this,"requestStream");s(this,"lifecycleResponseSink");s(this,"nodeValidatorResponseSink");s(this,"prng",new Nt(Xo()));s(this,"latestBlock",Ne($o()));s(this,"latestBlocks",C(50));s(this,"latestVoters",C(50));s(this,"histogramBlockTimeData",C(50));s(this,"histogramBlockSizeData",C(50));s(this,"histogramBlockTransactionData",C(50));s(this,"histogramBlockHeightData",C(50));s(this,"isConnected",!1);s(this,"isSubscribedToLatestBlock",!1);s(this,"isSubscribedToVoters",!1);this.requestStream=e,this.responseStream=o,this.lifecycleResponseSink=Y(Bt(o),Ur),this.nodeValidatorResponseSink=Y(Bt(o),Kr)}get stream(){return this.responseStream}async send(e){await this.requestStream.publish(e)}generateVotersFromBlockDetail(e){const o=new Nt(e.time.valueOf()),r=ke.length,a=Math.ceil(r/16),i=new Uint16Array(o.fillBytes(a*2));return new Ho(Ao.lsb0,new Wo(16,0),r,Array.from(i))}async updateBlockDetails(e){const o=this.latestBlock,r=(e.time.valueOf()-o.time.valueOf())/1e3,a=this.generateVotersFromBlockDetail(e);this.latestBlock=e,this.latestBlocks.put(e),this.latestVoters.put(a),this.histogramBlockTimeData.put(r),this.histogramBlockSizeData.put(e.size),this.histogramBlockTransactionData.put(e.numTransactions),this.histogramBlockHeightData.put(e.height),this.isConnected&&(this.isSubscribedToLatestBlock&&await this.nodeValidatorResponseSink.send(new P(e)),this.isSubscribedToVoters&&this.nodeValidatorResponseSink.send(new Ce(a)))}async initializeState(){for await(const e of en(this.prng))this.updateBlockDetails(Ne(e));await this.nodeValidatorResponseSink.send(new P(this.latestBlock)),await this.nodeValidatorResponseSink.send(new A(new kt(Array.from(this.histogramBlockTimeData.immutableIterable()),Array.from(this.histogramBlockSizeData.immutableIterable()),Array.from(this.histogramBlockTransactionData.immutableIterable()),Array.from(this.histogramBlockHeightData.immutableIterable())))),this.nodeValidatorResponseSink.send(new M(ke.map(Tt)))}async startProcessing(){await this.initializeState(),this.handleRequests(),this.streamBlocks()}async handleRequests(){for await(const e of this.requestStream)await this.handleRequest(e)}async streamBlocks(){const e=this.latestBlock;for await(const o of tn(this.prng,e.time.valueOf(),e.height)){const r=Ne(o);this.updateBlockDetails(r)}}async handleRequest(e){if(e instanceof U){try{await this.handleLifeCycleRequest(e.request)}catch(o){console.error("failed to handle life cycle request",e,o)}return}if(e instanceof Se){try{await this.handleNodeValidatorRequest(e.request)}catch(o){console.error("failed to handle node validator request",e,o)}return}console.error("unrecognized request type",e)}async handleLifeCycleRequest(e){if(e instanceof bt){await this.handleConnect();return}if(e instanceof St){await this.handleClose();return}}async handleNodeValidatorRequest(e){if(e instanceof pt){await this.handleSubscribeLatestBlock();return}if(e instanceof ut){await this.handleSubscribeNodeIdentity();return}if(e instanceof mt){await this.handleSubscribeVoters();return}if(e instanceof yt){await this.handleRequestBlocksSnapshot();return}if(e instanceof Ct){await this.handleRequestHistogramSnapshot();return}if(e instanceof ht){await this.handleRequestNodeIdentitySnapshot();return}if(e instanceof ft){await this.handleRequestVotersSnapshot();return}}async handleConnect(){if(this.isConnected)throw new Error("already connected to WebSocket");this.isConnected=!0,await this.lifecycleResponseSink.send(new K),await this.lifecycleResponseSink.send(new z)}async handleClose(){if(!this.isConnected)throw new Error("not connected to WebSocket");this.isConnected=!1,this.isSubscribedToLatestBlock=!1,this.isSubscribedToVoters=!1,await this.lifecycleResponseSink.send(new F)}async assertIsConnected(){if(!this.isConnected)throw new Error("not connected to WebSocket")}async handleSubscribeLatestBlock(){await this.assertIsConnected(),this.isSubscribedToLatestBlock=!0}async handleSubscribeNodeIdentity(){await this.assertIsConnected()}async handleSubscribeVoters(){await this.assertIsConnected(),this.isSubscribedToVoters=!0}async handleRequestBlocksSnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new ye(Array.from(this.latestBlocks.immutableIterable())))}async handleRequestHistogramSnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new A(new kt(Array.from(this.histogramBlockTimeData.immutableIterable()),Array.from(this.histogramBlockSizeData.immutableIterable()),Array.from(this.histogramBlockTransactionData.immutableIterable()),Array.from(this.histogramBlockHeightData.immutableIterable()))))}async handleRequestNodeIdentitySnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new M(ke.map(Tt)))}async handleRequestVotersSnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new fe(Array.from(this.latestVoters.immutableIterable())))}}function ms(t){return new Worker(""+new URL("node_validator_web_worker_api.js-B2GppWjK.js",import.meta.url).href,{name:t==null?void 0:t.name})}class hs{convert(e){if(e instanceof Se)return wt.encode(e);if(e instanceof U)return gt.encode(e);throw new x}}class ys{convert(e){if(f(e,me))return wt.decode(e);if(f(e,pe))return gt.decode(e);throw new x}}class Cs extends l{constructor(){super(...arguments);s(this,"encoder",new hs);s(this,"decoder",new ys)}}const fs=new Cs;class bs{convert(e){if(e instanceof be)return it.encode(e);if(e instanceof D)return $t.encode(e);if(e instanceof lt)return dt.encode(e);throw new x}}class Ss{convert(e){if(f(e,ie))return it.decode(e);if(f(e,le))return $t.decode(e);if(f(e,de))return dt.decode(e);throw new x}}class gs extends l{constructor(){super(...arguments);s(this,"encoder",new bs);s(this,"decoder",new Ss)}}const ws=new gs;class xs{constructor(e=m(1024),o=m(1024)){s(this,"requestChannel");s(this,"responseChannel");const r=new ms;this.requestChannel=e,this.responseChannel=o,r.addEventListener("message",this.handleMessage.bind(this)),r.addEventListener("messageerror",this.handleMessageError.bind(this)),r.addEventListener("error",this.handleError.bind(this)),ks(r,e)}get stream(){return this.responseChannel}async send(e){this.requestChannel.publish(e)}handleMessage(e){const o=ws.decode(e.data);this.responseChannel.publish(o)}handleMessageError(){}handleError(){}}async function ks(t,e){for await(const o of e)t.postMessage(fs.encode(o))}const Ns=c.createContext(vs());function vs(){return typeof window<"u"&&"Worker"in window||typeof self<"u"&&"Worker"in self?new xs:new ps(m(1024),m(1024))}async function xt(t,e,o,r,a){await Promise.all([t.blockSizeHistogramStream.publish({blocks:Array.from(e.immutableIterable()),blockSize:Array.from(r.immutableIterable())}),t.blockTimeHistogramStream.publish({blocks:Array.from(e.immutableIterable()),blockTime:Array.from(o.immutableIterable())}),t.blockThroughputHistogramStream.publish({blocks:Array.from(e.immutableIterable()),blockThroughput:Array.from(a.immutableIterable())})])}function wo(t){var e,o;return{publicKey:t.publicKey,name:t.name,companyDetails:{name:t.company,website:null},location:{coords:(e=t.location)!=null&&e.coords?[t.location.coords.lat.valueOf(),t.location.coords.lng.valueOf()]:null,country:((o=t.location)==null?void 0:o.country)??null}}}function Bs(t,e){return t.value-e.value}function ge(t,e){const o=new Map;for(const r of t){const a=e(r);a!==null&&o.set(a,(o.get(a)??0)+1)}return Array.from(o.entries()).map(([r,a])=>({label:r,value:a})).sort(Bs)}function xo(t){return ge(t,e=>e.operatingSystem)}function ko(t){return ge(t,e=>{var o;return((o=e.location)==null?void 0:o.country)??null})}function No(t){return ge(t,e=>e.networkType)}function vo(t){return ge(t,e=>e.nodeType)}function Bo(t,e){const o=Array.from(E(e,a=>Array.from(E(a,Number))));return t.map((a,i)=>{const d=E(o,we=>we[i])[Symbol.iterator](),[y,L]=qt(([we,Ro],_o)=>[we+1,Ro+_o],[0,0],d);return{voteParticipation:L,totalVotes:y}})}function To(t){const e=t[Symbol.iterator](),o=qt((a,i)=>{const p=E(i.proposerID,d=>Qo(a.keys(),y=>Ot(y,d)===0)??d);for(const d of p)a.set(d,(a.get(d)??0)+1);return a},new Map,e),r=Array.from(o.entries()).sort((a,i)=>i[1]-a[1]);return Array.from(E(r,([a,i])=>({proposer:a,count:i})))}const T=50;function Ts(){const t=C(T+1),e=C(T+1),o=C(T+1),r=C(T+1),a=C(T+1),i=C(T+1);return{lastBlock:null,latestBlocks:t,blockHeightHistograms:e,blockTimeHistograms:o,blockSizeHistograms:r,blockThroughputHistograms:a,votersBitVecs:i,nodes:[]}}async function Ps(t,e,o){const r=t.lastBlock;t.lastBlock=o,t.latestBlocks.put(o.latestBlock),e.latestBlockStream.publish({height:o.latestBlock.height,time:o.latestBlock.time,size:o.latestBlock.size,transactions:o.latestBlock.numTransactions,proposer:o.latestBlock.proposerID}),t.blockHeightHistograms.put(o.latestBlock.height),t.blockSizeHistograms.put(o.latestBlock.size);const a=(o.latestBlock.time.valueOf()-((r==null?void 0:r.latestBlock.time.valueOf())??0))/1e3;t.blockTimeHistograms.put(a),t.blockThroughputHistograms.put(o.latestBlock.size/Math.max(1,a)),await xt(e,t.blockHeightHistograms,t.blockTimeHistograms,t.blockSizeHistograms,t.blockThroughputHistograms),e.latestBlockProducers.publish(To(t.latestBlocks.immutableIterable()))}async function Rs(t,e,o){var a,i;for(const p of o.blocks){const d=((a=t.lastBlock)==null?void 0:a.latestBlock)??null;t.lastBlock=new P(p),t.latestBlocks.put(p),t.blockHeightHistograms.put(p.height),t.blockSizeHistograms.put(p.size);const y=(p.time.valueOf()-((d==null?void 0:d.time.valueOf())??0))/1e3;t.blockTimeHistograms.put(y),t.blockThroughputHistograms.put(p.size/Math.max(1,y))}await xt(e,t.blockHeightHistograms,t.blockTimeHistograms,t.blockSizeHistograms,t.blockThroughputHistograms);const r=((i=t.lastBlock)==null?void 0:i.latestBlock)??null;r!==null&&e.latestBlockStream.publish({height:r.height,time:r.time,size:r.size,transactions:r.numTransactions,proposer:r.proposerID}),e.latestBlockProducers.publish(To(t.latestBlocks.immutableIterable()))}async function _s(t,e,o){for(const r of o.histograms.blockHeights)t.blockHeightHistograms.put(r);for(const r of o.histograms.blockTime)t.blockTimeHistograms.put(r);for(const r of o.histograms.blockSize)t.blockSizeHistograms.put(r);for(const r of Zo(t.blockTimeHistograms.immutableIterable(),t.blockSizeHistograms.immutableIterable(),(a,i)=>(i??0)/Math.max(1,a??1)))t.blockThroughputHistograms.put(r);await xt(e,t.blockHeightHistograms,t.blockTimeHistograms,t.blockSizeHistograms,t.blockThroughputHistograms)}async function Is(t,e,o){t.nodes=o.nodes;const r=xo(t.nodes),a=ko(t.nodes),i=No(t.nodes),p=vo(t.nodes),d=t.nodes.map(wo);await Promise.all([e.nodesSummary.publish(d),e.nodeCoordinates.publish(d),e.pieChartCountries.publish(a),e.pieChartNetworkTypes.publish(i),e.pieChartNodeTypes.publish(p),e.pieChartOperatingSystems.publish(r)])}async function js(t,e,o){const r=t.nodes.findIndex(L=>L.publicKey.toString()===o.nodeIdentity.publicKey.toString());r<0?t.nodes.push(o.nodeIdentity):t.nodes[r]=o.nodeIdentity;const a=xo(t.nodes),i=ko(t.nodes),p=No(t.nodes),d=vo(t.nodes),y=t.nodes.map(wo);await Promise.all([e.nodesSummary.publish(y),e.nodeCoordinates.publish(y),e.pieChartCountries.publish(i),e.pieChartNetworkTypes.publish(p),e.pieChartNodeTypes.publish(d),e.pieChartOperatingSystems.publish(a)])}async function Ds(t,e,o){for(const a of o.voters)t.votersBitVecs.put(a);const r=Bo(t.nodes,t.votersBitVecs.immutableIterable());await e.voters.publish(r)}async function Ls(t,e,o){t.votersBitVecs.put(o.latestVoter);const r=Bo(t.nodes,t.votersBitVecs.immutableIterable());await e.voters.publish(r)}async function Vs(t,e,o){if(o instanceof P)return Ps(t,e,o);if(o instanceof ye)return Rs(t,e,o);if(o instanceof A)return _s(t,e,o);if(o instanceof M)return Is(t,e,o);if(o instanceof $e)return js(t,e,o);if(o instanceof fe)return Ds(t,e,o);if(o instanceof Ce)return Ls(t,e,o)}async function Es(t,e){const o=Ts();for await(const r of e.stream)r instanceof be&&(await Vs(o,t,r.response),await t.errors.publish(null)),r instanceof D&&await t.lifecycle.publish(r),r instanceof lt&&await t.errors.publish(r)}async function Hs(t,e){await t.send(new bt),await e.send(new pt),await e.send(new ut),await e.send(new mt),await e.send(new ht),await e.send(new yt),await e.send(new Ct),await e.send(new ft)}function As(){return{latestBlockStream:m(4),blockTimeHistogramStream:m(4),blockSizeHistogramStream:m(4),blockThroughputHistogramStream:m(4),nodesSummary:m(4),nodeCoordinates:m(4),pieChartCountries:m(4),pieChartNetworkTypes:m(4),pieChartNodeTypes:m(4),pieChartOperatingSystems:m(4),voters:m(4),latestBlockProducers:m(4),errors:m(4),lifecycle:m(4)}}const Ee=t=>{const e=c.useContext(Ns),o=As();return c.useEffect(()=>{const r=Y(e,ds),a=Y(e,is);return Es(o,e),Hs(a,r),()=>{e.send(new U(new St))}}),n.jsx(mn.Provider,{value:o.latestBlockStream,children:n.jsx(sn.Provider,{value:o.latestBlockProducers,children:n.jsx(hn.Provider,{value:o.blockTimeHistogramStream,children:n.jsx(yn.Provider,{value:o.blockSizeHistogramStream,children:n.jsx(Cn.Provider,{value:o.blockThroughputHistogramStream,children:n.jsx(no.Provider,{value:o.nodesSummary,children:n.jsx(ao.Provider,{value:o.pieChartOperatingSystems,children:n.jsx(to.Provider,{value:o.pieChartNetworkTypes,children:n.jsx(oo.Provider,{value:o.pieChartNodeTypes,children:n.jsx(eo.Provider,{value:o.pieChartCountries,children:n.jsx(Bn.Provider,{value:o.nodeCoordinates,children:n.jsx(ro.Provider,{value:o.voters,children:n.jsx(ue.Provider,{value:o.lifecycle,children:n.jsx(Ht.Provider,{value:Oo(o.errors,async r=>(r==null?void 0:r.error)??null),children:t.children})})})})})})})})})})})})})})};try{Ee.displayName="ProvideCappuccinoNodeValidatorStreams",Ee.__docgenInfo={description:"",displayName:"ProvideCappuccinoNodeValidatorStreams",props:{}}}catch{}const He=t=>{const e=c.useContext(Ht);return n.jsx(k,{asyncIterable:e,children:n.jsx(Ws,{children:t.children})})},Ws=t=>{const e=c.useContext(g),o=c.useContext(ve);return n.jsx(ve.Provider,{value:o??e,children:t.children})};try{He.displayName="ErrorStreamConsumer",He.__docgenInfo={description:`ErrorStreamConsumer is a component that is used to consume errors off of
the ErrorStreamContext.  This component will resolve the error stream
and provide the resolved error to the children of this component.`,displayName:"ErrorStreamConsumer",props:{}}}catch{}const R=t=>n.jsx("div",{className:"pie-chart-section-title",children:n.jsx(An,{children:t.children})});try{R.displayName="PieChartSectionTitle",R.__docgenInfo={description:`PieChartSectionTitle is a component that represents the title of a section
of a pie chart. This component is useful for labeling sections of a pie
chart.`,displayName:"PieChartSectionTitle",props:{}}}catch{}const Ms={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Åland Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthélemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia, Plurinational State of",BQ:"Bonaire, Sint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"Congo, Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"Côte d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cabo Verde",CW:"Curaçao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czechia",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia, Federated States of",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom of Great Britain and Northern Ireland",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran, Islamic Republic of",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao People's Democratic Republic",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova, Republic of",ME:"Montenegro",MF:"Saint Martin (French part)",MG:"Madagascar",MH:"Marshall Islands",MK:"North Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands, Kingdom of the",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestine, State of",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Réunion",RO:"Romania",RS:"Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena, Ascension and Tristan da Cunha",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten (Dutch part)",SY:"Syrian Arab Republic",SZ:"Eswatini",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Türkiye",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan, Province of China",TZ:"Tanzania, United Republic of",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States of America",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See",VC:"Saint Vincent and the Grenadines",VE:"Venezuela, Bolivarian Republic of",VG:"Virgin Islands (British)",VI:"Virgin Islands (U.S.)",VN:"Viet Nam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function qs(t){return Ms[t]??t}function Os(t){return{label:qs(t.label),value:t.value}}const Ae=()=>{const t=c.useContext(O),e=c.useContext(g);return t?n.jsx(n.Fragment,{}):n.jsxs(n.Fragment,{children:[n.jsx(R,{children:n.jsx(u,{text:"Countries"})}),n.jsx(he,{values:e.map(Os)})]})};try{Ae.displayName="CountriesPieChart",Ae.__docgenInfo={description:"",displayName:"CountriesPieChart",props:{}}}catch{}const Gs=t=>n.jsxs(n.Fragment,{children:[n.jsx(u,{text:t.label}),n.jsx(H,{number:t.value})]}),We=()=>{const t=c.useContext(O),e=c.useContext(g);return t?n.jsx(n.Fragment,{}):n.jsxs(Ue.Provider,{value:Gs,children:[n.jsx(R,{children:n.jsx(u,{text:"Network Types"})}),n.jsx(he,{values:e})]})};try{We.displayName="NetworkTypesPieChart",We.__docgenInfo={description:"",displayName:"NetworkTypesPieChart",props:{}}}catch{}const Fs=t=>n.jsxs(n.Fragment,{children:[n.jsx(u,{text:t.label}),n.jsx(H,{number:t.value})]}),Me=()=>{const t=c.useContext(O),e=c.useContext(g);return t?n.jsx(n.Fragment,{}):n.jsxs(Ue.Provider,{value:Fs,children:[n.jsx(R,{children:n.jsx(u,{text:"Node Types"})}),n.jsx(he,{values:e})]})};try{Me.displayName="NodeTypesPieChart",Me.__docgenInfo={description:"",displayName:"NodeTypesPieChart",props:{}}}catch{}const Ks=()=>{const[t]=c.useContext(G);return t.name===null||t.name===""?n.jsx(u,{text:"-"}):n.jsx(u,{text:t.name})},zs=()=>{const[t]=c.useContext(G);return n.jsx(fn,{value:t.publicKey,children:n.jsx(On,{value:t.publicKey})})},Us=()=>{const[t]=c.useContext(G);return t.companyDetails===null||t.companyDetails.name===null||t.companyDetails.name===""?n.jsx(u,{text:"-"}):n.jsx(u,{text:t.companyDetails.name})},Js=()=>{var e;const[t]=c.useContext(G);return t.companyDetails===null||t.companyDetails.website===null||((e=t.companyDetails)==null?void 0:e.website)===""?n.jsx(u,{text:"-"}):t.companyDetails.website?n.jsx(Gn,{href:t.companyDetails.website,target:"_blank",children:n.jsx(u,{text:t.companyDetails.website})}):n.jsx(u,{text:"-"})},Zs=()=>{const[,t]=c.useContext(G);return t===null?n.jsx(u,{text:"?"}):t.totalVotes===0?n.jsx(H,{number:t.voteParticipation}):n.jsxs(n.Fragment,{children:[n.jsx(H,{number:t.voteParticipation})," (",n.jsx(qn,{percentage:t.voteParticipation/t.totalVotes}),")"]})},Po=t=>n.jsx(pn,{columns:[{label:"Public Key",columnType:b.publicKey,buildCell:t.components[0]},{label:"Name",columnType:b.name,buildCell:t.components[1]},{label:"Company",columnType:b.companyName,buildCell:t.components[2]},{label:"Website",columnType:b.companyWebSite,buildCell:t.components[3]},{label:"Vote Participation",columnType:b.voteParticipation,buildCell:t.components[4]}]}),qe=t=>{const{numElements:e=20}=t;return n.jsx(g.Provider,{value:Array.from(Yo(e)),children:n.jsx(Po,{components:[V,V,V,V,V]})})},Oe=()=>n.jsx(Po,{components:[zs,Ks,Us,Js,Zs]});function Pt(t,e){const[o]=t,[r]=e;return Ot(o.publicKey.data,r.publicKey.data)}function Qs(t,e){const[o]=t,[r]=e;return o.name===null&&r.name===null?0:o.name===null?1:r.name===null?-1:o.name.localeCompare(r.name)}function Ys(t,e){const[o]=t,[r]=e;return o.companyDetails===null&&r.companyDetails===null?0:o.companyDetails===null?1:r.companyDetails===null?-1:o.companyDetails.name===null&&r.companyDetails.name===null?0:o.companyDetails.name===null?1:r.companyDetails.name===null?-1:o.companyDetails.name.localeCompare(r.companyDetails.name)}function Xs(t,e){const[o]=t,[r]=e;return o.companyDetails===null&&r.companyDetails===null?0:o.companyDetails===null?1:r.companyDetails===null?-1:o.companyDetails.website===null&&r.companyDetails.website===null?0:o.companyDetails.website===null?1:r.companyDetails.website===null?-1:o.companyDetails.website.localeCompare(r.companyDetails.website)}function $s(t,e){const[,o]=t,[,r]=e;return o.voteParticipation-r.voteParticipation}function ea(t,e){return t.map((o,r)=>[o,e[r]??{totalVotes:0,voteParticipation:0}])}function ta(t){switch(t){case b.publicKey:return Pt;case b.name:return Qs;case b.companyName:return Ys;case b.companyWebSite:return Xs;case b.voteParticipation:return $s;default:return Pt}}function oa(t,e){switch(e){case Be.asc:return t;case Be.desc:return(o,r)=>-t(o,r);default:return t}}function na(t,e,o){const r=oa(ta(e),o);return t.sort(r)}const Ge=()=>{const[t,e]=c.useState({sortColumn:b.publicKey,sortDir:Be.asc}),o=c.useContext(ve),r=c.useContext(O),a=c.useContext(g),i=c.useContext(so);if(o)return n.jsx(zt,{});if((!a||a instanceof Array&&a.length<=0)&&r)return n.jsx(qe,{});const p=ea(a,i),{sortColumn:d,sortDir:y}=t,L=na(p,d,y);return n.jsx(dn.Provider,{value:t,children:n.jsx(un.Provider,{value:e,children:n.jsx(g.Provider,{value:L,children:n.jsx(Oe,{})})})})};try{qe.displayName="NodesSummaryDataTablePlaceholder",qe.__docgenInfo={description:`NodesSummaryDataTablePlaceholder is a component that renders a placeholder
version of the Node Summary Data Table.`,displayName:"NodesSummaryDataTablePlaceholder",props:{numElements:{defaultValue:null,description:"",name:"numElements",required:!1,type:{name:"number"}}}}}catch{}try{Oe.displayName="NodesSummaryDataTablePopulated",Oe.__docgenInfo={description:`NodesSummaryDataTablePopulated is a component that renders the populated
version of the Node Summary Data Table.`,displayName:"NodesSummaryDataTablePopulated",props:{}}}catch{}try{Ge.displayName="NodesSummaryDataTable",Ge.__docgenInfo={description:`NodeSummaryDataTable handles the display of the Node Summary Data Table.
Additionally, it handles the sorting of the data via the manipulation of the
headers of the table data.`,displayName:"NodesSummaryDataTable",props:{}}}catch{}const ra=t=>n.jsxs(n.Fragment,{children:[n.jsx(u,{text:t.label}),n.jsx(H,{number:t.value})]}),Fe=()=>{const t=c.useContext(O),e=c.useContext(g);return t?n.jsx(n.Fragment,{}):n.jsxs(Ue.Provider,{value:ra,children:[n.jsx(R,{children:n.jsx(u,{text:"Operating System"})}),n.jsx(he,{values:e})]})};try{Fe.displayName="OperatingSystemPieChart",Fe.__docgenInfo={description:"",displayName:"OperatingSystemPieChart",props:{}}}catch{}const Ke=t=>{const e=c.useContext(q),o=aa(e),r=sa(e);return n.jsx("div",{className:Ut(t.className,`web-socket-status ${r}`),children:o})};function sa(t){return t?t.response instanceof z?"web-socket-status--connected":t.response instanceof K?"web-socket-status--connecting":"web-socket-status--disconnected":"web-socket-status--disconnected"}function aa(t){return t?t.response instanceof z?n.jsx(u,{text:"WebSocket Connected"}):t.response instanceof K?n.jsx(u,{text:"WebSocket Connecting..."}):n.jsx(u,{text:"WebSocket Disconnected"}):n.jsx(u,{text:"WebSocket Disconnected"})}try{Ke.displayName="LifeCycleEventStatus",Ke.__docgenInfo={description:"LifeCycleEventStatus is a component that renders the LifeCycleEventStatus.",displayName:"LifeCycleEventStatus",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const ze=t=>n.jsx(Pe,{children:n.jsx(He,{children:n.jsxs(Nn,{page:vn.nodes,children:[n.jsx(Mn,{}),n.jsx(Ke,{className:"edge-margin"}),n.jsx(zt,{className:"edge-margin"}),n.jsxs("div",{...t,className:Ut(t.className,"node-validator-grid edge-margin"),children:[n.jsx(bn,{children:n.jsx(Vn,{className:"latest-block"})}),n.jsx(an,{children:n.jsx(cn,{className:"latest-block-producers"})}),n.jsx(J,{className:"block-time-histogram",children:n.jsx(Sn,{children:n.jsx(En,{})})}),n.jsx(J,{className:"block-size-histogram",children:n.jsx(gn,{children:n.jsx(Dn,{})})}),n.jsx(J,{className:"throughput-histogram",children:n.jsx(wn,{children:n.jsx(Hn,{})})}),n.jsx(B,{className:"cdn",children:n.jsx(ln,{className:"card-padding"})}),n.jsxs(B,{className:"network-map",children:[n.jsxs(Ln,{children:[n.jsx(u,{text:"Network Map"}),n.jsx("div",{})]}),n.jsx(Tn,{children:n.jsx(Pn,{children:n.jsxs(Rn,{children:[n.jsx(jn,{}),n.jsx(_n,{children:n.jsx(In,{})})]})})})]}),n.jsx(B,{className:"countries",children:n.jsx(Re,{children:n.jsx(Ae,{})})}),n.jsx(B,{className:"network-types",children:n.jsx(_e,{children:n.jsx(We,{})})}),n.jsx(B,{className:"node-types",children:n.jsx(Ie,{children:n.jsx(Me,{})})}),n.jsx(B,{className:"operating-systems",children:n.jsx(Ve,{children:n.jsx(Fe,{})})}),n.jsx(J,{className:"nodes",children:n.jsx(De,{children:n.jsx(Le,{children:n.jsx(Ge,{})})})})]}),n.jsx(Wn,{})]})})});try{ze.displayName="NodesPage",ze.__docgenInfo={description:"NodesPage is a component that renders the Nodes page.",displayName:"NodesPage",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const ca=t=>n.jsxs(n.Fragment,{children:[n.jsx(xn,{}),n.jsx(Do,{children:n.jsx(Lo,{pathResolver:new kn,children:n.jsx(Ee,{children:n.jsx(ze,{...t})})})})]}),Lc={title:"Pages/Nodes",component:ca,parameters:{layout:"fullscreen"}},Z={argTypes:{}};var Rt,_t,It;Z.parameters={...Z.parameters,docs:{...(Rt=Z.parameters)==null?void 0:Rt.docs,source:{originalSource:`{
  argTypes: {}
}`,...(It=(_t=Z.parameters)==null?void 0:_t.docs)==null?void 0:It.source}}};const Vc=["Nodes"];export{Z as Nodes,Vc as __namedExportsOrder,Lc as default};
