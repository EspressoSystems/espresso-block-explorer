var Tl=Object.defineProperty;var Rl=(Z,J,ee)=>J in Z?Tl(Z,J,{enumerable:!0,configurable:!0,writable:!0,value:ee}):Z[J]=ee;var o=(Z,J,ee)=>(Rl(Z,typeof J!="symbol"?J+"":J,ee),ee);(function(){"use strict";class Z{assert(){}}function J(){return new Z}const ee=J();function R(r,e){ee.assert(r,e)}function hr(r,e){R(typeof r===e,`type assertion failed: expected "${e}", received "${typeof r}"`)}function an(r){R(r!==null,"expected a non-null value, received null")}function h(r,e){R(r instanceof e,`given value is not an instance of "${e.name}", specific type is "${typeof r=="object"&&r!==null?r.constructor.name:typeof r}"`)}class mr extends Error{constructor(t,n,c=`expected object with key: "${n}", instead found ${t}`){super(c);o(this,"key");o(this,"haveType");this.haveType=t,this.key=n,Object.freeze(this)}toJSON(){return{code:mr.name,message:this.message,have:this.haveType,key:this.key}}}class E{encode(e){return this.encoder.convert(e)}decode(e){return this.decoder.convert(e)}}class l extends E{}function dn(r){return typeof r=="boolean"}function Wt(r){return typeof r=="number"}function ue(r){return typeof r=="string"}function ln(r){return typeof r=="object"&&r!==null}function A(r){return r!==void 0}function un(r,e){return Array.isArray(r)&&r.every(e)}function hn(r){return e=>un(e,r)}function _(r,e,t){return ln(r)&&e in r&&t(r[e])}function d(r,...e){if(typeof r!="object")throw new Error("expected object");if(r===null)throw new Error("received null");for(const t of e)if(!(t in r))throw new mr("object",t)}function C(r,e){if(!ue(r.code))throw new Error("code must be a string");if(r.code!==e)throw new Error(`expected code to be ${e}, got ${r.code}`)}const $t=hn(A);class mn{convert(e){return e}}const jt=new mn;class wn extends E{constructor(){super(...arguments);o(this,"encoder",jt);o(this,"decoder",jt)}}const Te=new wn;class N{constructor(e){o(this,"itemCodec");this.itemCodec=e}convert(e){if(!$t(e)){const t=typeof e=="object"&&e!==null?e.constructor.name:typeof e,n="array";throw new Error(`invalid array value: have "${t}", want "${n}"`)}return e.map(t=>this.itemCodec.decode(t))}}class U{constructor(e){o(this,"itemCodec");this.itemCodec=e}convert(e){return h(e,Array),e.map(t=>this.itemCodec.encode(t))}}class L extends l{constructor(t,n){super();o(this,"encoder");o(this,"decoder");this.encoder=n,this.decoder=t}}class pn{convert(e){if(!ue(e))throw new B(typeof e,"string");return e}}class fn{convert(e){return hr(e,"string"),e}}class gn extends l{constructor(){super(...arguments);o(this,"encoder",new fn);o(this,"decoder",new pn)}}const m=new gn;new L(new N(m),new U(m));class b extends Error{constructor(e){super(e)}get code(){return this.constructor.name}toJSON(){return M.convert(this)}}class F{convert(e){return h(e,b),{code:e.code,message:e.message}}}const M=new F;class Re extends Error{constructor(t,n=`no codec found for: "${t}"`){super(n);o(this,"codec");this.codec=t,Object.freeze(this);debugger}toJSON(){return{code:m.encode(Re.name),message:m.encode(this.message),codec:m.encode(this.codec)}}}const wr=new Map;class yn{convert(e){d(e,"code");const t=m.decode(e.code),n=wr.get(t);if(!n)throw new Re(t);return n.decode(e)}}class Cn{convert(e){const t=wr.get(e.code);if(!t)throw new Re(e.code);return t.encode(e)}}class vn extends E{constructor(){super(...arguments);o(this,"encoder",new Cn);o(this,"decoder",new yn)}}const Be=new vn;function v(r,e){wr.set(r,e)}class B extends b{constructor(t,n,c=`invalid type: have "${t}", want "${n}"`){super(c);o(this,"have");o(this,"want");this.have=t,this.want=n,Object.freeze(this)}toJSON(){return Vt.encode(this)}}class xn{convert(e){return d(e,"code","have","want","message"),C(e,B.name),new B(m.decode(e.have),m.decode(e.want),m.decode(e.message))}}class En{convert(e){return h(e,B),{...M.convert(e),have:m.encode(e.have),want:m.encode(e.want)}}}class bn extends l{constructor(){super(...arguments);o(this,"encoder",new En);o(this,"decoder",new xn)}}const Vt=new bn;v(B.name,Vt);class Sn{convert(e){if(!Wt(e))throw new B(typeof e,"number");return e}}class kn{convert(e){return hr(e,"number"),e}}class In extends l{constructor(){super(...arguments);o(this,"encoder",new kn);o(this,"decoder",new Sn)}}const s=new In,k=new L(new N(s),new U(s));class q extends b{constructor(e="unimplemented"){super(e),Object.freeze(this);debugger}}class Tn{convert(e){return d(e,"code","message"),C(e,q.name),new q(m.decode(e.message))}}class Rn extends F{}class Bn extends l{constructor(){super(...arguments);o(this,"encoder",new Rn);o(this,"decoder",new Tn)}}const Dn=new Bn;v(q.name,Dn);class T extends b{constructor(e="invalid input"){super(e),Object.freeze(this)}}class An{convert(e){return d(e,"code","message"),C(e,T.name),new T(m.decode(e.message))}}class _n extends F{}class Pn extends l{constructor(){super(...arguments);o(this,"encoder",new _n);o(this,"decoder",new An)}}const On=new Pn;v(T.name,On);const oe=s;class Qt{constructor(e,t,n,c){o(this,"requestID");o(this,"api");o(this,"method");o(this,"param");this.requestID=e,this.api=t,this.method=n,this.param=c}toJSON(){return{requestID:this.requestID,api:this.api,method:this.method,param:this.param}}}class Nn{convert(e){return d(e,"requestID","api","method","param"),new Qt(oe.decode(e.requestID),m.decode(e.api),m.decode(e.method),e.param)}}class Un{convert(e){return h(e,Qt),{requestID:oe.encode(e.requestID),api:m.encode(e.api),method:m.encode(e.method),param:e.param}}}class Ln extends l{constructor(){super(...arguments);o(this,"encoder",new Un);o(this,"decoder",new Nn)}}const Fn=new Ln;class Kt{constructor(e){o(this,"requestID");this.requestID=e}}class pr extends Kt{constructor(t,n){super(t);o(this,"response");this.response=n}toJSON(){return Yt.encode(this)}}class Mn{convert(e){return d(e,"requestID","response"),new pr(oe.decode(e.requestID),e.response)}}class zn{convert(e){return h(e,pr),{requestID:oe.encode(e.requestID),response:e.response}}}class Hn extends l{constructor(){super(...arguments);o(this,"encoder",new zn);o(this,"decoder",new Mn)}}const Yt=new Hn;class fr extends Kt{constructor(t,n){super(t);o(this,"error");this.error=n}toJSON(){return Xt.encode(this)}}class Gn{convert(e){return d(e,"requestID","error"),new fr(oe.decode(e.requestID),Be.decode(e.error))}}class Jn{convert(e){return h(e,fr),{requestID:oe.encode(e.requestID),error:Be.encode(e.error)}}}class qn extends l{constructor(){super(...arguments);o(this,"encoder",new Jn);o(this,"decoder",new Gn)}}const Xt=new qn;class z extends b{constructor(t,n=`corrupt input error at ${t}`){super(n);o(this,"offset");this.offset=t,Object.freeze(this)}toJSON(){return Zt.encode(this)}}class Wn{convert(e){return d(e,"code","offset","message"),C(e,z.name),new z(s.decode(e.offset),m.decode(e.message))}}class $n{convert(e){return h(e,z),{...M.convert(e),offset:s.encode(e.offset),message:m.encode(e.message)}}}class jn extends l{constructor(){super(...arguments);o(this,"encoder",new $n);o(this,"decoder",new Wn)}}const Zt=new jn;v(z.name,Zt);class De extends b{constructor(e="incorrect padding"){super(e),Object.freeze(this)}}class Vn{convert(e){return d(e,"code","message"),C(e,De.name),new De(m.decode(e.message))}}class Qn extends F{}class Kn extends l{constructor(){super(...arguments);o(this,"encoder",new Qn);o(this,"decoder",new Vn)}}const Yn=new Kn;v(De.name,Yn);class he extends b{constructor(t,n=`alphabet needs to be 64 characters, received ${t}`){super(n);o(this,"length");this.length=t,Object.freeze(this)}toJSON(){return eo.encode(this)}}class Xn{convert(e){return d(e,"code","length","message"),C(e,he.name),new he(s.decode(e.length),m.decode(e.message))}}class Zn{convert(e){return h(e,he),{...M.convert(e),length:s.encode(e.length)}}}class ec extends l{constructor(){super(...arguments);o(this,"encoder",new Zn);o(this,"decoder",new Xn)}}const eo=new ec;v(he.name,eo);const rc=new TextEncoder;function ro(r){return rc.encode(r)}const tc=new TextDecoder;function oc(r){return tc.decode(r)}function*to(r){yield*ro(r)}function*nc(){for(let r=0;r<256;r++)yield 255}const me=-1,cc=61;class we{constructor(e,t,n=cc,c=!1){o(this,"encodeMap");o(this,"decodeMap");o(this,"padChar");o(this,"strict");this.encodeMap=e,this.decodeMap=t,this.padChar=n,this.strict=c}static withAlphabet(e){const t=e.length;if(t!==64)throw new he(t);const n=Array.from(to(e)),c=Array.from(nc());for(let a=0;a<t;a++)c[n[a]]=a;return new we(n,c)}withPadding(e){return new we(this.encodeMap,this.decodeMap,e,this.strict)}encode(e){if(e.byteLength===0)return new ArrayBuffer(0);let t=0,n=0;const c=Math.floor(e.byteLength/3)*3,a=Math.ceil(e.byteLength/3)*4,i=new ArrayBuffer(a),u=new DataView(e),f=new DataView(i);for(;n<c;){const g=u.getUint8(n+0)<<16|u.getUint8(n+1)<<8|u.getUint8(n+2);f.setUint8(t+0,this.encodeMap[g>>18&63]),f.setUint8(t+1,this.encodeMap[g>>12&63]),f.setUint8(t+2,this.encodeMap[g>>6&63]),f.setUint8(t+3,this.encodeMap[g&63]),n+=3,t+=4}const p=e.byteLength-n;if(p===0)return i;let y=u.getUint8(n+0)<<16;switch(p===2&&(y|=u.getUint8(n+1)<<8),f.setUint8(t+0,this.encodeMap[y>>18&63]),f.setUint8(t+1,this.encodeMap[y>>12&63]),p){case 2:return f.setUint8(t+2,this.encodeMap[y>>6&63]),this.padChar!==me?(f.setUint8(t+3,this.padChar),i.slice(0,t+4)):i.slice(0,t+3);case 1:if(this.padChar!==me)return f.setUint8(t+2,this.padChar),f.setUint8(t+3,this.padChar),i.slice(0,t+4);break}return i.slice(0,t+2)}decode(e){const t=e.byteLength;if(t===0)return new ArrayBuffer(0);const n=new DataView(e),c=new ArrayBuffer(Math.floor(t/4*3)),a=new DataView(c),i=new ArrayBuffer(4),u=new DataView(i);let f=0,p=0,y=0,g=!1;for(;p<t&&!g;){let I=3,le=4;for(let O=0;O<4;O++){if(p===t){if(O===0)return c;if(O===1||this.padChar!==me)throw new z(p-O);I=O-1,le=O,g=!0;break}const ur=n.getUint8(p);p++;const sn=this.decodeMap[ur];if(sn!==255){u.setUint8(O,sn);continue}if(ur===10||ur===13){O--;continue}if(ur===this.padChar){switch(O){case 0:case 1:throw new De;case 2:for(;p<t&&(n.getUint8(p)===10||n.getUint8(p)===13);)p++;if(p===t)throw new z(t);p++}for(;p<t&&(n.getUint8(p)===10||n.getUint8(p)===13);)p++;if(p<t)throw new z(p);I=3,le=O,g=!0;break}throw new z(p-1)}const qt=u.getUint8(0)<<18|u.getUint8(1)<<12|u.getUint8(2)<<6|u.getUint8(3);switch(u.setUint8(2,qt>>0&255),u.setUint8(1,qt>>8&255),u.setUint8(0,qt>>16&255),le){case 4:a.setUint8(y+2,u.getUint8(2)),u.setUint8(2,0);case 3:if(a.setUint8(y+1,u.getUint8(1)),this.strict&&u.getUint8(2)!==0)throw new z(p-1);case 2:if(a.setUint8(y+0,u.getUint8(0)),this.strict&&(u.getUint8(1)!==0||u.getUint8(2)!==0))throw new z(p-2)}y+=I,f+=le-1}return c.slice(0,f)}decodeString(e){return this.decode(ro(e).buffer)}encodeToString(e){return oc(this.encode(e))}}const oo=we.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),sc=oo.withPadding(me),no=we.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),gr=no.withPadding(me);class Ae extends b{constructor(e="invalid tagged base64 encoding"){super(e),Object.freeze(this)}toJSON(){return co.encode(this)}}class ac{convert(e){return d(e,"code","message"),C(e,Ae.name),new Ae(m.decode(e.message))}}class ic extends F{}class dc extends l{constructor(){super(...arguments);o(this,"encoder",new ic);o(this,"decoder",new ac)}}const co=new dc;v(Ae.name,co);class x{constructor(e,t){o(this,"tag");o(this,"data");this.tag=e,this.data=t}static fromString(e){const t=e.indexOf("~");if(t<0)throw new Ae;const n=e.substring(0,t),c=gr.decodeString(e.substring(t+1));return new x(n,c)}static inflate(e){return w.decode(e)}toString(){return`${this.tag}~${gr.encodeToString(this.data)}`}valueOf(){return this.toString()}toJSON(){return this.toString()}}class lc{convert(e){if(typeof e!="string")throw new B(typeof e,"string");return x.fromString(e)}}class uc{convert(e){return h(e,x),e.toString()}}class hc extends l{constructor(){super(...arguments);o(this,"encoder",new uc);o(this,"decoder",new lc)}}const w=new hc;class pe extends b{constructor(e="invalid hex string"){super(e),Object.freeze(this)}}class mc{convert(e){return d(e,"code","message"),C(e,pe.name),new pe(m.decode(e.message))}}class wc extends F{}class pc extends l{constructor(){super(...arguments);o(this,"encoder",new wc);o(this,"decoder",new mc)}}const fc=new pc;v(pe.name,fc);class _e extends b{constructor(t,n=`invalid hex value "${t}"`){super(n);o(this,"value");this.value=t,Object.freeze(this)}toJSON(){return so.encode(this)}}class gc{convert(e){return d(e,"code","value","message"),C(e,_e.name),new _e(s.decode(e.value),m.decode(e.message))}}class yc{convert(e){return{...M.convert(e),value:s.encode(e.value)}}}class Cc extends l{constructor(){super(...arguments);o(this,"encoder",new yc);o(this,"decoder",new gc)}}const so=new Cc;v(_e.name,so);class vc{constructor(e,t){o(this,"value");o(this,"next");this.value=e,this.next=t}[Symbol.iterator](){return ao(this)}}function xc(r,e){return new vc(e,r)}function*ao(r){if(r!==null)for(let e=r;e!==null;e=e.next)yield e.value}class ne extends b{constructor(e="missing element"){super(e),Object.freeze(this)}}class Ec{convert(e){return d(e,"code","message"),C(e,ne.name),new ne(m.decode(e.message))}}class bc extends F{}class Sc extends l{constructor(){super(...arguments);o(this,"encoder",new bc);o(this,"decoder",new Ec)}}const kc=new Sc;v(ne.name,kc);function*Ic(r,e){for(let t=r.next();!t.done;t=r.next())yield e(t.value)}function*Tc(r,e){for(let t=0,n=r.next();t<e&&!n.done;t++,n=r.next())yield n.value}function Rc(r,e){return Tc(r[Symbol.iterator](),e)}function*Bc(){let r=0;for(;;)yield r++}function Dc(r){return Rc(Bc(),Math.ceil(r))}function io(r){if(r.startsWith("0x"))return io(r.substring(2));if(r.length&1)throw new pe;const e=new ArrayBuffer(r.length/2);return Ac(to(r),e),e}function Ac(r,e){const t=new DataView(e);let n=0;for(;n<e.byteLength;){const c=r.next(),a=r.next();if(c.done||a.done)throw new pe;const i=lo(c.value),u=lo(a.value),f=i<<4|u;t.setUint8(n,f),n++}}function lo(r){if(r>=48&&r<=57)return r-48;if(r>=97&&r<=102)return r-97+10;if(r>=65&&r<=70)return r-65+10;throw new _e(r)}function _c(r){return r.toString(16).padStart(2,"0")}function*Pc(r){yield*Ic(r,_c)}function Oc(r){return Pc(r[Symbol.iterator]())}class Nc{convert(e){if(typeof e!="string")throw new B(typeof e,"string");return io(e)}}class Uc{convert(e){return h(e,ArrayBuffer),["0x",...Oc(new Uint8Array(e))].join("")}}class Lc extends l{constructor(){super(...arguments);o(this,"encoder",new Uc);o(this,"decoder",new Nc)}}const S=new Lc;class Fc{constructor(e){o(this,"encoding");this.encoding=e}convert(e){if(typeof e!="string")throw new B(typeof e,"string");return this.encoding.decodeString(e)}}class Mc{constructor(e){o(this,"encoding");this.encoding=e}convert(e){return this.encoding.encodeToString(e)}}class Pe extends l{constructor(t){super();o(this,"encoder");o(this,"decoder");this.encoder=new Mc(t),this.decoder=new Fc(t)}}new Pe(gr),new Pe(sc);const uo=new Pe(no),ho=new Pe(oo);class yr{constructor(e,t,n){o(this,"r");o(this,"s");o(this,"v");this.r=e,this.s=t,this.v=n}toJSON(){return Cr.encode(this)}}class zc{convert(e){return d(e,"r","s","v"),new yr(S.decode(e.r),S.decode(e.s),s.decode(e.v))}}class Hc{convert(e){return h(e,yr),{r:S.encode(e.r),s:S.encode(e.s),v:s.encode(e.v)}}}class Gc extends l{constructor(){super(...arguments);o(this,"encoder",new Hc);o(this,"decoder",new zc)}}const Cr=new Gc;class vr{constructor(e,t){o(this,"account");o(this,"amount");this.account=e,this.amount=t}toJSON(){return xr.encode(this)}}class Jc{convert(e){return d(e,"account","amount"),new vr(S.decode(e.account),S.decode(e.amount))}}class qc{convert(e){return h(e,vr),{account:S.encode(e.account),amount:S.encode(e.amount)}}}class Wc extends l{constructor(){super(...arguments);o(this,"encoder",new qc);o(this,"decoder",new Jc)}}const xr=new Wc;class mo{constructor(e){o(this,"itemCodec");this.itemCodec=e}convert(e){return e===null?null:this.itemCodec.decode(e)}}class wo{constructor(e){o(this,"itemCodec");this.itemCodec=e}convert(e){return e===null?null:(an(e),this.itemCodec.encode(e))}}class po extends l{constructor(t,n){super();o(this,"encoder");o(this,"decoder");this.encoder=n,this.decoder=t}}class Er{constructor(e,t,n){o(this,"number");o(this,"timestamp");o(this,"hash");this.number=e,this.timestamp=t,this.hash=n}toJSON(){return br.encode(this)}}class $c{convert(e){return d(e,"number","timestamp","hash"),new Er(s.decode(e.number),m.decode(e.timestamp),m.decode(e.hash))}}class jc{convert(e){return h(e,Er),{number:s.encode(e.number),timestamp:m.encode(e.timestamp),hash:m.encode(e.hash)}}}class Vc extends l{constructor(){super(...arguments);o(this,"encoder",new jc);o(this,"decoder",new $c)}}const br=new Vc,fo=new po(new mo(br),new wo(br));class Sr{constructor(e){o(this,"bytes");this.bytes=e}toJSON(){return kr.encode(this)}}class Qc{convert(e){return d(e,"bytes"),new Sr(uo.decode(e.bytes))}}class Kc{convert(e){return h(e,Sr),{bytes:uo.encode(e.bytes)}}}class Yc extends l{constructor(){super(...arguments);o(this,"encoder",new Kc);o(this,"decoder",new Qc)}}const kr=new Yc;class Ir{constructor(e,t,n,c,a,i,u,f,p,y){o(this,"height");o(this,"timestamp");o(this,"l1_head");o(this,"l1_finalized");o(this,"payload_commitment");o(this,"ns_table");o(this,"block_merkle_root");o(this,"fee_merkle_root");o(this,"builder_signature");o(this,"fee_info");this.height=e,this.timestamp=t,this.l1_head=n,this.l1_finalized=c,this.payload_commitment=a,this.ns_table=i,this.block_merkle_root=u,this.fee_merkle_root=f,this.builder_signature=p,this.fee_info=y}toJSON(){return W.encode(this)}}class Xc{convert(e){return d(e,"height","timestamp","l1_head","l1_finalized","payload_commitment","ns_table","block_merkle_root","fee_merkle_root","builder_signature","fee_info"),new Ir(s.decode(e.height),s.decode(e.timestamp),s.decode(e.l1_head),fo.decode(e.l1_finalized),k.decode(e.payload_commitment),kr.decode(e.ns_table),w.decode(e.block_merkle_root),w.decode(e.fee_merkle_root),Cr.decode(e.builder_signature),xr.decode(e.fee_info))}}class Zc{convert(e){return h(e,Ir),{height:s.encode(e.height),timestamp:s.encode(e.timestamp),l1_head:s.encode(e.l1_head),l1_finalized:fo.encode(e.l1_finalized),payload_commitment:k.encode(e.payload_commitment),ns_table:kr.encode(e.ns_table),block_merkle_root:w.encode(e.block_merkle_root),fee_merkle_root:w.encode(e.fee_merkle_root),builder_signature:Cr.encode(e.builder_signature),fee_info:xr.encode(e.fee_info)}}}class es extends l{constructor(){super(...arguments);o(this,"encoder",new Zc);o(this,"decoder",new Xc)}}const W=new es;class fe{constructor(e,t){o(this,"vm");o(this,"payload");this.vm=e,this.payload=t}toJSON(){return re.encode(this)}}class rs{convert(e){return d(e,"vm","payload"),new fe(s.decode(e.vm),k.decode(e.payload))}}class ts{convert(e){return h(e,fe),{vm:s.encode(e.vm),payload:k.encode(e.payload)}}}class os extends l{constructor(){super(...arguments);o(this,"encoder",new ts);o(this,"decoder",new rs)}}const re=new os,go=new L(new N(re),new U(re));class Tr{constructor(e){o(this,"transaction_nmt");this.transaction_nmt=e}toJSON(){return ge.encode(this)}}class ns{convert(e){return d(e,"transaction_nmt"),new Tr(go.decode(e.transaction_nmt))}}class cs{convert(e){return h(e,Tr),{transaction_nmt:go.encode(e.transaction_nmt)}}}class ss extends l{constructor(){super(...arguments);o(this,"encoder",new cs);o(this,"decoder",new ns)}}const ge=new ss;class Rr{constructor(e,t,n,c,a){o(this,"header");o(this,"payload");o(this,"hash");o(this,"size");o(this,"numTransactions");this.header=e,this.payload=t,this.hash=n,this.size=c,this.numTransactions=a}toJSON(){return Br.encode(this)}}class as{convert(e){return d(e,"header","payload","hash","size","num_transactions"),new Rr(W.decode(e.header),ge.decode(e.payload),w.decode(e.hash),s.decode(e.size),s.decode(e.num_transactions))}}class is{convert(e){return h(e,Rr),{header:W.encode(e.header),payload:ge.encode(e.payload),hash:w.encode(e.hash),size:s.encode(e.size),num_transactions:s.encode(e.numTransactions)}}}class ds extends E{constructor(){super(...arguments);o(this,"encoder",new is);o(this,"decoder",new as)}}const Br=new ds;class Oe{constructor(e,t,n,c,a){o(this,"header");o(this,"hash");o(this,"size");o(this,"num_transactions");o(this,"proposer_id");this.header=e,this.hash=t,this.size=n,this.num_transactions=c,this.proposer_id=a}toJSON(){return Dr.encode(this)}}class ls{convert(e){return d(e,"header","hash","size","num_transactions","proposer_id"),new Oe(W.decode(e.header),w.decode(e.hash),s.decode(e.size),s.decode(e.num_transactions),S.decode(e.proposer_id))}}class us{convert(e){return h(e,Oe),{header:W.encode(e.header),hash:w.encode(e.hash),size:s.encode(e.size),num_transactions:s.encode(e.num_transactions),proposer_id:S.encode(e.proposer_id)}}}class hs extends l{constructor(){super(...arguments);o(this,"encoder",new us);o(this,"decoder",new ls)}}const Dr=new hs,ms=new L(new N(Dr),new U(Dr));class Ne{constructor(e,t,n,c){o(this,"hash");o(this,"header");o(this,"offset");o(this,"transaction");this.hash=e,this.header=t,this.offset=n,this.transaction=c}toJSON(){return Ar.encode(this)}}class ws{convert(e){return d(e,"hash","header","offset","transaction"),new Ne(w.decode(e.hash),W.decode(e.header),s.decode(e.offset),re.decode(e.transaction))}}class ps{convert(e){return h(e,Ne),{hash:w.encode(e.hash),header:W.encode(e.header),offset:s.encode(e.offset),transaction:re.encode(e.transaction)}}}class fs extends l{constructor(){super(...arguments);o(this,"encoder",new ps);o(this,"decoder",new ws)}}const Ar=new fs,yo=new L(new N(Ar),new U(Ar));class gs{convert(e){if(!dn(e))throw new B(typeof e,"boolean");return e}}class ys{convert(e){return hr(e,"boolean"),e}}class Cs extends l{constructor(){super(...arguments);o(this,"encoder",new ys);o(this,"decoder",new gs)}}const Ue=new Cs;class Le{constructor(e){o(this,"leaf_commit");this.leaf_commit=e}toJSON(){return _r.encode(this)}}class vs{convert(e){return d(e,"leaf_commit"),new Le(w.decode(e.leaf_commit))}}class xs{convert(e){return h(e,Le),{leaf_commit:w.encode(e.leaf_commit)}}}class Es extends l{constructor(){super(...arguments);o(this,"encoder",new xs);o(this,"decoder",new vs)}}const _r=new Es;class Co{constructor(e,t){o(this,"width");o(this,"index");this.width=e,this.index=t}toJSON(){return Pr.encode(this)}}class bs{convert(e){return d(e,"width","index"),new Co(s.decode(e.width),s.decode(e.index))}}class Ss{convert(e){return h(e,Co),{width:s.encode(e.width),index:s.encode(e.index)}}}class ks extends l{constructor(){super(...arguments);o(this,"encoder",new Ss);o(this,"decoder",new bs)}}const Pr=new ks;class vo{constructor(e,t,n,c){o(this,"order");o(this,"head");o(this,"bits");o(this,"data");this.order=e,this.head=t,this.bits=n,this.data=c}toJSON(){return Or.encode(this)}}class Is{convert(e){return d(e,"order","head","bits","data"),new vo(m.decode(e.order),Pr.decode(e.head),s.decode(e.bits),k.decode(e.data))}}class Ts{convert(e){return h(e,vo),{order:m.encode(e.order),head:Pr.encode(e.head),bits:s.encode(e.bits),data:k.encode(e.data)}}}class Rs extends l{constructor(){super(...arguments);o(this,"encoder",new Ts);o(this,"decoder",new Is)}}const Or=new Rs;class xo{constructor(e,t){o(this,"signature");o(this,"bitvec");this.signature=e,this.bitvec=t}toJSON(){return Nr.encode(this)}}class Bs{convert(e){if(!$t(e)||e.length!==2)throw new B(typeof e,"Array");return new xo(w.decode(e[0]),Or.decode(e[1]))}}class Ds{convert(e){return h(e,xo),[w.encode(e.signature),Or.encode(e.bitvec)]}}class As extends l{constructor(){super(...arguments);o(this,"encoder",new Ds);o(this,"decoder",new Bs)}}const Nr=new As,Eo=new po(new mo(Nr),new wo(Nr));class Fe{constructor(e,t,n,c,a,i){o(this,"data");o(this,"vote_commitment");o(this,"view_number");o(this,"signatures");o(this,"is_genesis");o(this,"_pd");this.data=e,this.vote_commitment=t,this.view_number=n,this.signatures=c,this.is_genesis=a,this._pd=i}toJSON(){return ye.encode(this)}}class _s{convert(e){return d(e,"data","vote_commitment","view_number","signatures","is_genesis","_pd"),new Fe(_r.decode(e.data),w.decode(e.vote_commitment),s.decode(e.view_number),Eo.decode(e.signatures),Ue.decode(e.is_genesis),null)}}class Ps{convert(e){return h(e,Fe),{data:_r.encode(e.data),vote_commitment:w.encode(e.vote_commitment),view_number:s.encode(e.view_number),signatures:Eo.encode(e.signatures),is_genesis:Ue.encode(e.is_genesis),_pd:null}}}class Os extends l{constructor(){super(...arguments);o(this,"encoder",new Ps);o(this,"decoder",new _s)}}const ye=new Os;class Ur{constructor(e,t,n,c,a,i,u,f){o(this,"view_number");o(this,"justify_qc");o(this,"parent_commitment");o(this,"block_header");o(this,"block_payload");o(this,"rejected");o(this,"timestamp");o(this,"proposer_id");this.view_number=e,this.justify_qc=t,this.parent_commitment=n,this.block_header=c,this.block_payload=a,this.rejected=i,this.timestamp=u,this.proposer_id=f}toJSON(){return Lr.encode(this)}}class Ns{convert(e){return d(e,"view_number","justify_qc","parent_commitment","block_header","block_payload","rejected","timestamp","proposer_id"),new Ur(s.decode(e.view_number),ye.decode(e.justify_qc),w.decode(e.parent_commitment),W.decode(e.block_header),ge.decode(e.block_payload),k.decode(e.rejected),s.decode(e.timestamp),S.decode(e.proposer_id))}}class Us{convert(e){return h(e,Ur),{view_number:s.encode(e.view_number),justify_qc:ye.encode(e.justify_qc),parent_commitment:w.encode(e.parent_commitment),block_header:W.encode(e.block_header),block_payload:ge.encode(e.block_payload),rejected:k.encode(e.rejected),timestamp:s.encode(e.timestamp),proposer_id:S.encode(e.proposer_id)}}}class Ls extends l{constructor(){super(...arguments);o(this,"encoder",new Us);o(this,"decoder",new Ns)}}const Lr=new Ls;class Fr{constructor(e,t){o(this,"leaf");o(this,"qc");this.leaf=e,this.qc=t}toJSON(){return Mr.encode(this)}}class Fs{convert(e){return d(e,"leaf","qc"),new Fr(Lr.decode(e.leaf),ye.decode(e.qc))}}class Ms{convert(e){return h(e,Fr),{leaf:Lr.encode(e.leaf),qc:ye.encode(e.qc)}}}class zs extends l{constructor(){super(...arguments);o(this,"encoder",new Ms);o(this,"decoder",new Fs)}}const Mr=new zs;class Ce{}class zr extends Ce{toJSON(){return Hr.encode(this)}}class Hs{convert(e){if(!ue(e)||e!=="Empty")throw new T;return new zr}}class Gs{convert(e){return h(e,zr),"Empty"}}class Js extends l{constructor(){super(...arguments);o(this,"encoder",new Gs);o(this,"decoder",new Hs)}}const Hr=new Js;class Gr extends Ce{constructor(t,n,c){super();o(this,"value");o(this,"pos");o(this,"elem");this.value=t,this.pos=n,this.elem=c}toJSON(){return Jr.encode(this)}}class qs{convert(e){d(e,"Leaf");const t=e.Leaf;return d(t,"value","pos","elem"),new Gr(w.decode(t.value),w.decode(t.pos),w.decode(t.elem))}}class Ws{convert(e){return h(e,Gr),{Leaf:{value:w.encode(e.value),pos:w.encode(e.pos),elem:w.encode(e.elem)}}}}class $s extends E{constructor(){super(...arguments);o(this,"encoder",new Ws);o(this,"decoder",new qs)}}const Jr=new $s;class qr extends Ce{constructor(t){super();o(this,"value");this.value=t}toJSON(){return Wr.encode(this)}}class js{convert(e){d(e,"ForgettenSubtree");const t=e.ForgettenSubtree;return d(t,"value"),new qr(w.decode(t.value))}}class Vs{convert(e){return h(e,qr),{ForgettenSubtree:{value:w.encode(e.value)}}}}class Qs extends E{constructor(){super(...arguments);o(this,"encoder",new Vs);o(this,"decoder",new js)}}const Wr=new Qs;class Me extends Ce{constructor(t,n){super();o(this,"value");o(this,"children");this.value=t,this.children=n}toJSON(){return $r.encode(this)}}class Ks{convert(e){d(e,"Branch");const t=e.Branch;return d(t,"value","children"),new Me(w.decode(t.value),ze.decode(t.children))}}class Ys{convert(e){return h(e,Me),{Branch:{value:w.encode(e.value),children:ze.encode(e.children)}}}}class Xs extends l{constructor(){super(...arguments);o(this,"encoder",new Ys);o(this,"decoder",new Ks)}}const $r=new Xs;class Zs{convert(e){if(_(e,"Leaf",A))return Jr.decoder.convert(e);if(_(e,"Branch",A))return $r.decoder.convert(e);if(_(e,"ForgettenSubtree",A))return Wr.decoder.convert(e);if(ue(e))return Hr.decoder.convert(e);throw new T}}class ea{convert(e){if(h(e,Ce),e instanceof Gr)return Jr.encode(e);if(e instanceof Me)return $r.encode(e);if(e instanceof qr)return Wr.encode(e);if(e instanceof zr)return Hr.encode(e);throw new T}}class ra extends l{constructor(){super(...arguments);o(this,"encoder",new ea);o(this,"decoder",new Zs)}}const bo=new ra,ze=new L(new N(bo),new U(bo));class jr{constructor(e,t){o(this,"pos");o(this,"proof");this.pos=e,this.proof=t}toJSON(){return Vr.encode(this)}}class ta{convert(e){return d(e,"pos","proof"),new jr(w.decode(e.pos),ze.decode(e.proof))}}class oa{convert(e){return h(e,jr),{pos:w.encode(e.pos),proof:ze.encode(e.proof)}}}class na extends l{constructor(){super(...arguments);o(this,"encoder",new oa);o(this,"decoder",new ta)}}const Vr=new na;class Qr{constructor(e,t,n,c,a){o(this,"transaction");o(this,"block_hash");o(this,"proof");o(this,"height");o(this,"hash");this.transaction=e,this.block_hash=t,this.proof=n,this.height=c,this.hash=a}toJSON(){return Kr.encode(this)}}class ca{convert(e){return d(e,"transaction","block_hash","proof","height","hash"),new Qr(re.decoder.convert(e.transaction),w.decode(e.block_hash),Vr.decoder.convert(e.proof),s.decode(e.height),w.decode(e.hash))}}class sa{convert(e){return h(e,Qr),{transaction:re.encode(e.transaction),block_hash:w.encode(e.block_hash),proof:Vr.encode(e.proof),height:s.encode(e.height),hash:w.encode(e.hash)}}}class aa extends l{constructor(){super(...arguments);o(this,"encoder",new sa);o(this,"decoder",new ca)}}const Kr=new aa,ce="latest";class Yr{constructor(e){o(this,"target");this.target=e}static latest(){return new ko}static height(e){return new Io(e)}toJSON(){return So.encode(this)}}class ia{convert(e){return h(e,Yr),typeof e.target=="number"?s.encode(e.target):m.encode(e.target)}}class da{convert(e){return e===ce?new ko:new Io(s.decode(e))}}class la extends E{constructor(){super(...arguments);o(this,"encoder",new ia);o(this,"decoder",new da)}}const So=new la;class ko extends Yr{constructor(){super(ce)}}class Io extends Yr{constructor(e){super(e)}}class ua{convert(e){if(!ue(e))throw new B(typeof e,"string");const t=new Date(e);if(Number.isNaN(t.valueOf()))throw new B("NaN","number");return t}}class ha{convert(e){return h(e,Date),e.toISOString()}}class ma extends l{constructor(){super(...arguments);o(this,"encoder",new ha);o(this,"decoder",new ua)}}const K=new ma;class ${constructor(e,t,n){o(this,"significantDigitsMultiplier");this.alpha3Code=e,this.code=t,this.significantDigits=n,this.alpha3Code=e,this.code=t,this.significantDigits=n,this.significantDigitsMultiplier=BigInt(10)**BigInt(this.significantDigits)}toJSON(){return He.encode(this)}}const To=new $("JPY",392,0),wa=new $("GBP",826,2),Ro=new $("USD",840,2),pa=new $("EUR",978,2),fa=new $("XXX",999,2),Bo=new $("ETH",1001,18),Xr=new $("XBT",1002,8),Do=new $("ESP",10001,18),ga=[To,wa,Ro,pa,fa,Bo,Xr,Do],ya=new Map(ga.map(r=>[r.alpha3Code,r]));class Ca{convert(e){if(typeof e!="string")throw new T("CurrencyCodeDecoder: expected string");if(e==="BTC")return Xr;const t=ya.get(e);if(t===void 0)throw new T(`CurrencyCodeDecoder: unknown currency: "${e}"`);return t}}class va{convert(e){return h(e,$),e.alpha3Code}}class xa extends l{constructor(){super(...arguments);o(this,"decoder",new Ca);o(this,"encoder",new va)}}const He=new xa;class H{constructor(e,t){this.currency=e,this.value=t,this.currency=e,this.value=t}static USD(e){return new H(Ro,BigInt(e))}static ETH(e){return new H(Bo,BigInt(e))}static ESP(e){return new H(Do,BigInt(e))}static JPY(e){return new H(To,BigInt(e))}static BTC(e){return new H(Xr,BigInt(e))}toString(){return Ge.encode(this)}toJSON(){return Ge.encode(this)}}function Ea(r){return r==="."||r===","||r===" "}function ba(r,e){let t=-1;const n=r.length;for(let c=0;c<n;c++)e(r[c])&&(t=c);return t}class Sa{parseCurrencyCode(e){return He.decode(e)}parseValue(e,t){let n=1n;t[0]==="-"&&(n=-1n,t=t.substring(1));const c=ba(t,Ea);if(c===-1){const p=BigInt(t.replace(/\D/g,""))*e.significantDigitsMultiplier;return n*p}const a=t.substring(0,c).replace(/\D/g,""),i=t.substring(c+1).replace(/\D/g,""),u=BigInt(a)*e.significantDigitsMultiplier,f=BigInt(i)*10n**BigInt(e.significantDigits-i.length);return n*(u+f)}convert(e){if(typeof e!="string")throw new T("MonetaryValueDecoder: expected string");const t=e.indexOf(" ");if(t<=-1)throw new T("MonetaryValueDecoder: missing non-breaking space");const n=e.substring(0,t),c=e.substring(t+1);if(/^-?[\d .,]+$/.test(n)){const i=this.parseCurrencyCode(c);return new H(i,this.parseValue(i,n))}const a=this.parseCurrencyCode(n);return new H(a,this.parseValue(a,c))}}class ka{convert(e){h(e,H);const t=e.value<0n?"-":"",n=e.value<0n?-e.value:e.value,c=n%e.currency.significantDigitsMultiplier,a=n/e.currency.significantDigitsMultiplier,i=String(a),u=String(c);return/^0+$/.test(u)?`${He.encode(e.currency)} ${t}${i}`:`${He.encode(e.currency)} ${t}${a}.${String(c).padStart(e.currency.significantDigits,"0")}`}}class Ia extends l{constructor(){super(...arguments);o(this,"decoder",new Sa);o(this,"encoder",new ka)}}const Ge=new Ia,Ao=new L(new N(Ge),new U(Ge));class Zr{constructor(e,t,n,c,a,i,u,f){o(this,"hash");o(this,"height");o(this,"time");o(this,"numTransactions");o(this,"proposerID");o(this,"feeRecipient");o(this,"size");o(this,"blockReward");this.hash=e,this.height=t,this.time=n,this.numTransactions=c,this.proposerID=a,this.feeRecipient=i,this.size=u,this.blockReward=f}toJSON(){return ve.encode(this)}}class Ta{convert(e){return d(e,"hash","height","time","num_transactions","proposer_id","fee_recipient","size","block_reward"),new Zr(w.decode(e.hash),s.decode(e.height),K.decode(e.time),s.decode(e.num_transactions),S.decode(e.proposer_id),S.decode(e.fee_recipient),s.decode(e.size),Ao.decode(e.block_reward))}}class Ra{convert(e){return h(e,Zr),{hash:w.encode(e.hash),height:s.encode(e.height),time:K.encode(e.time),num_transactions:s.encode(e.numTransactions),proposer_id:S.encode(e.proposerID),fee_recipient:S.encode(e.feeRecipient),size:s.encode(e.size),block_reward:Ao.encode(e.blockReward)}}}class Ba extends E{constructor(){super(...arguments);o(this,"encoder",new Ra);o(this,"decoder",new Ta)}}const ve=new Ba;class et{constructor(e){o(this,"blockDetail");this.blockDetail=e}toJSON(){return rt.encode(this)}}class Da{convert(e){return d(e,"block_detail"),new et(ve.decode(e.block_detail))}}class Aa{convert(e){return h(e,et),{block_detail:ve.encode(e.blockDetail)}}}class _a extends E{constructor(){super(...arguments);o(this,"encoder",new Aa);o(this,"decoder",new Da)}}const rt=new _a;class tt{constructor(e){o(this,"limit");this.limit=e}static latest(e){return new Po(e)}static from(e,t){return new Oo(e,t)}toJSON(){return _o.encode(this)}}class Pa{convert(e){return h(e,tt),Wt(e.from)?{from:s.encode(e.from),limit:s.encode(e.limit)}:{from:m.encode(e.from),limit:s.encode(e.limit)}}}class Oa{convert(e){return d(e,"from","limit"),e.from===ce?new Po(s.decode(e.limit)):new Oo(s.decode(e.from),s.decode(e.limit))}}class Na extends E{constructor(){super(...arguments);o(this,"encoder",new Pa);o(this,"decoder",new Oa)}}const _o=new Na;class Po extends tt{constructor(e){super(e)}get from(){return ce}}class Oo extends tt{constructor(t,n){super(n);o(this,"from");this.from=t}}class ot{constructor(e,t,n,c,a,i){o(this,"hash");o(this,"height");o(this,"proposerID");o(this,"numTransactions");o(this,"size");o(this,"time");this.hash=e,this.height=t,this.proposerID=n,this.numTransactions=c,this.size=a,this.time=i}toJSON(){return nt.encode(this)}}class Ua{convert(e){return d(e,"hash","height","proposer_id","num_transactions","size","time"),new ot(w.decode(e.hash),s.decode(e.height),S.decode(e.proposer_id),s.decode(e.num_transactions),s.decode(e.size),K.decode(e.time))}}class La{convert(e){return h(e,ot),{hash:w.encode(e.hash),height:s.encode(e.height),proposer_id:S.encode(e.proposerID),num_transactions:s.encode(e.numTransactions),size:s.encode(e.size),time:K.encode(e.time)}}}class Fa extends E{constructor(){super(...arguments);o(this,"encoder",new La);o(this,"decoder",new Ua)}}const nt=new Fa,se=new L(new N(nt),new U(nt));class ct{constructor(e){o(this,"blockSummaries");this.blockSummaries=e}toJSON(){return st.encode(this)}}class Ma{convert(e){return d(e,"block_summaries"),new ct(se.decode(e.block_summaries))}}class za{convert(e){return h(e,ct),{block_summaries:se.encode(e.blockSummaries)}}}class Ha extends E{constructor(){super(...arguments);o(this,"encoder",new za);o(this,"decoder",new Ma)}}const st=new Ha;class at{constructor(e,t,n){o(this,"rollups");o(this,"transactions");o(this,"blocks");this.rollups=e,this.transactions=t,this.blocks=n}toJSON(){return it.encode(this)}}class Ga{convert(e){return d(e,"rollups","transactions","blocks"),new at(s.decode(e.rollups),s.decode(e.transactions),s.decode(e.blocks))}}class Ja{convert(e){return h(e,at),{rollups:s.encode(e.rollups),transactions:s.encode(e.transactions),blocks:s.encode(e.blocks)}}}class qa extends l{constructor(){super(...arguments);o(this,"encoder",new Ja);o(this,"decoder",new Ga)}}const it=new qa;class dt{constructor(e,t,n,c){o(this,"blockTime");o(this,"blockSize");o(this,"blockTransactions");o(this,"blockHeights");this.blockTime=e,this.blockSize=t,this.blockTransactions=n,this.blockHeights=c}toJSON(){return lt.encode(this)}}class Wa{convert(e){return d(e,"block_time","block_size","block_transactions","block_heights"),new dt(k.decode(e.block_time),k.decode(e.block_size),k.decode(e.block_transactions),k.decode(e.block_heights))}}class $a{convert(e){return h(e,dt),{block_time:k.encode(e.blockTime),block_size:k.encode(e.blockSize),block_transactions:k.encode(e.blockTransactions),block_heights:k.encode(e.blockHeights)}}}class ja extends l{constructor(){super(...arguments);o(this,"encoder",new $a);o(this,"decoder",new Wa)}}const lt=new ja,No=k;class Je{constructor(e,t,n,c,a,i){o(this,"hash");o(this,"rollups");o(this,"height");o(this,"time");o(this,"offset");o(this,"numTransactions");this.hash=e,this.rollups=t,this.height=n,this.time=c,this.offset=a,this.numTransactions=i}toJSON(){return ut.encode(this)}}class Va{convert(e){return d(e,"hash","rollups","height","time","offset","num_transactions"),new Je(w.decode(e.hash),No.decode(e.rollups),s.decode(e.height),K.decode(e.time),s.decode(e.offset),s.decode(e.num_transactions))}}class Qa{convert(e){return h(e,Je),{hash:w.encode(e.hash),rollups:No.encode(e.rollups),height:s.encode(e.height),time:K.encode(e.time),offset:s.encode(e.offset),num_transactions:s.encode(e.numTransactions)}}}class Ka extends l{constructor(){super(...arguments);o(this,"encoder",new Qa);o(this,"decoder",new Va)}}const ut=new Ka,ae=new L(new N(ut),new U(ut));class ht{constructor(e,t,n,c,a){o(this,"latestBlock");o(this,"genesisOverview");o(this,"latestBlocks");o(this,"latestTransactions");o(this,"histograms");this.latestBlock=e,this.genesisOverview=t,this.latestBlocks=n,this.latestTransactions=c,this.histograms=a}toJSON(){return mt.encode(this)}}class Ya{convert(e){return d(e,"latest_block","genesis_overview","latest_blocks","latest_transactions","histograms"),new ht(ve.decode(e.latest_block),it.decode(e.genesis_overview),se.decode(e.latest_blocks),ae.decode(e.latest_transactions),lt.decode(e.histograms))}}class Xa{convert(e){return h(e,ht),{latest_block:ve.encode(e.latestBlock),genesis_overview:it.encode(e.genesisOverview),latest_blocks:se.encode(e.latestBlocks),latest_transactions:ae.encode(e.latestTransactions),histograms:lt.encode(e.histograms)}}}class Za extends l{constructor(){super(...arguments);o(this,"encoder",new Xa);o(this,"decoder",new Ya)}}const mt=new Za;class wt{constructor(e){o(this,"explorerSummary");this.explorerSummary=e}toJSON(){return pt.encode(this)}}class ei{convert(e){return d(e,"explorer_summary"),new wt(mt.decode(e.explorer_summary))}}class ri{convert(e){return h(e,wt),{explorer_summary:mt.encode(e.explorerSummary)}}}class ti extends l{constructor(){super(...arguments);o(this,"encoder",new ri);o(this,"decoder",new ei)}}const pt=new ti;class Uo{constructor(e){o(this,"query");this.query=e}toJSON(){return Lo.encode(this)}}class oi{convert(e){return h(e,Uo),m.encode(e.query)}}class ni{convert(e){return new Uo(m.decode(e))}}class ci extends E{constructor(){super(...arguments);o(this,"encoder",new oi);o(this,"decoder",new ni)}}const Lo=new ci;class ft{constructor(e,t){o(this,"blocks");o(this,"transactions");this.blocks=e,this.transactions=t}toJSON(){return gt.encode(this)}}class si{convert(e){return d(e,"blocks","transactions"),new ft(se.decode(e.blocks),ae.decode(e.transactions))}}class ai{convert(e){return h(e,ft),{blocks:se.encode(e.blocks),transactions:ae.encode(e.transactions)}}}class ii extends E{constructor(){super(...arguments);o(this,"encoder",new ai);o(this,"decoder",new si)}}const gt=new ii;class yt{constructor(e){o(this,"searchResults");this.searchResults=e}toJSON(){return Ct.encode(this)}}class di{convert(e){return d(e,"search_results"),new yt(gt.decode(e.search_results))}}class li{convert(e){return h(e,yt),{search_results:gt.encode(e.searchResults)}}}class ui extends E{constructor(){super(...arguments);o(this,"encoder",new li);o(this,"decoder",new di)}}const Ct=new ui;class vt{static heightAndOffset(e,t){return new xe(e,t)}static hash(e){return new Ee(e)}toJSON(){return Fo.encode(this)}}class hi{convert(e){if(h(e,vt),e instanceof xe)return{height:s.encode(e.height),offset:s.encode(e.offset)};if(e instanceof Ee)return{hash:w.encode(e.hash)};throw new T}}class mi{convert(e){if(_(e,"height",A)&&_(e,"offset",A))return new xe(s.decode(e.height),s.decode(e.offset));if(_(e,"hash",A))return new Ee(w.decode(e.hash));throw new T}}class wi extends l{constructor(){super(...arguments);o(this,"encoder",new hi);o(this,"decoder",new mi)}}const Fo=new wi;class xe extends vt{constructor(t,n){super();o(this,"height");o(this,"offset");this.height=t,this.offset=n}}class Ee extends vt{constructor(t){super();o(this,"hash");this.hash=t}}const Mo=s;class xt{constructor(e,t){o(this,"namespace");o(this,"payload");this.namespace=e,this.payload=t}toJSON(){return Et.encode(this)}}class pi{convert(e){return d(e,"namespace","payload"),new xt(Mo.decode(e.namespace),ho.decode(e.payload))}}class fi{convert(e){return h(e,xt),{namespace:Mo.encode(e.namespace),payload:ho.encode(e.payload)}}}class gi extends l{constructor(){super(...arguments);o(this,"encoder",new fi);o(this,"decoder",new pi)}}const Et=new gi,zo=new L(new N(Et),new U(Et));class bt{constructor(e,t,n,c,a,i,u,f,p){o(this,"hash");o(this,"height");o(this,"blockConfirmed");o(this,"offset");o(this,"numTransactions");o(this,"size");o(this,"time");o(this,"sequencingFees");o(this,"feeDetails");this.hash=e,this.height=t,this.blockConfirmed=n,this.offset=c,this.numTransactions=a,this.size=i,this.time=u,this.sequencingFees=f,this.feeDetails=p}toJSON(){return St.encode(this)}}class yi{convert(e){return d(e,"hash","height","block_confirmed","offset","num_transactions","size","time","sequencing_fees","fee_details"),new bt(w.decode(e.hash),s.decode(e.height),Ue.decode(e.block_confirmed),s.decode(e.offset),s.decode(e.num_transactions),s.decode(e.size),K.decode(e.time),[],[])}}class Ci{convert(e){return h(e,bt),{hash:w.encode(e.hash),height:s.encode(e.height),block_confirmed:Ue.encode(e.blockConfirmed),offset:s.encode(e.offset),num_transactions:s.encode(e.numTransactions),size:s.encode(e.size),time:K.encode(e.time),sequencing_fees:[],fee_details:[]}}}class vi extends l{constructor(){super(...arguments);o(this,"encoder",new Ci);o(this,"decoder",new yi)}}const St=new vi;class kt{constructor(e,t){o(this,"details");o(this,"data");this.details=e,this.data=t}toJSON(){return It.encode(this)}}class xi{convert(e){return d(e,"details","data"),new kt(St.decode(e.details),zo.decode(e.data))}}class Ei{convert(e){return h(e,kt),{details:St.encode(e.details),data:zo.encode(e.data)}}}class bi extends l{constructor(){super(...arguments);o(this,"encoder",new Ei);o(this,"decoder",new xi)}}const It=new bi;class qe{constructor(e){o(this,"transactionDetail");this.transactionDetail=e}toJSON(){return Tt.encode(this)}}class Si{convert(e){return d(e,"transaction_detail"),new qe(It.decode(e.transaction_detail))}}class ki{convert(e){return h(e,qe),{transaction_detail:It.encode(e.transactionDetail)}}}class Ii extends E{constructor(){super(...arguments);o(this,"encoder",new ki);o(this,"decoder",new Si)}}const Tt=new Ii;class We{constructor(){}static block(e){return new $e(e)}static namespace(e){return new je(e)}static none(){return new Bt}toJSON(){return Rt.encode(this)}}class Ti{convert(e){return _(e,"block",A)?new $e(s.decode(e.block)):_(e,"namespace",A)?new je(s.decode(e.namespace)):new Bt}}class Ri{convert(e){if(h(e,We),e instanceof Bt)return{};if(e instanceof $e)return{block:s.encode(e.block)};if(e instanceof je)return{namespace:s.encode(e.namespace)};throw new T}}class Bi extends E{constructor(){super(...arguments);o(this,"encoder",new Ri);o(this,"decoder",new Ti)}}const Rt=new Bi;class Bt extends We{constructor(){super()}convertURL(e){return e}}class $e extends We{constructor(t){super();o(this,"block");this.block=t}convertURL(t){return new URL(`${t.pathname}/block/${this.block}`,t)}}class je extends We{constructor(t){super();o(this,"namespace");this.namespace=t}convertURL(t){return new URL(`${t.pathname}/namespace/${this.namespace}`,t)}}class Ve{constructor(e){o(this,"limit");this.limit=e}static latest(e){return new Qe(e)}static heightAndOffset(e,t,n){return new Ke(e,t,n)}static hash(e,t){return new Ye(e,t)}toJSON(){return Dt.encode(this)}}class Di{convert(e){return d(e,"limit"),_(e,"height",A)&&_(e,"offset",A)?new Ke(s.decode(e.height),s.decode(e.offset),s.decode(e.limit)):_(e,"hash",A)?new Ye(w.decode(e.hash),s.decode(e.limit)):new Qe(s.decode(e.limit))}}class Ai{convert(e){if(h(e,Ve),e instanceof Qe)return{limit:s.encode(e.limit)};if(e instanceof Ke)return{height:s.encode(e.height),offset:s.encode(e.offset),limit:s.encode(e.limit)};if(e instanceof Ye)return{hash:w.encode(e.hash),limit:s.encode(e.limit)};throw new T}}class _i extends E{constructor(){super(...arguments);o(this,"encoder",new Ai);o(this,"decoder",new Di)}}const Dt=new _i;class Qe extends Ve{constructor(e){super(e)}convertURL(e){return new URL(`transactions/latest/${this.limit}`,e)}}class Ke extends Ve{constructor(t,n,c){super(c);o(this,"height");o(this,"offset");this.height=t,this.offset=n}convertURL(t){return new URL(`transactions/from/${this.height}/${this.offset}/${this.limit}`,t)}}class Ye extends Ve{constructor(t,n){super(n);o(this,"hash");this.hash=t}convertURL(t){return new URL(`transactions/hash/${this.hash}/${this.limit}`,t)}}class Ho{constructor(e,t){o(this,"target");o(this,"filter");this.target=e,this.filter=t}toJSON(){return Go.encode(this)}}class Pi{convert(e){return d(e,"filter","target"),new Ho(Dt.decode(e.target),Rt.decode(e.filter))}}class Oi{convert(e){return h(e,Ho),{filter:Rt.encode(e.filter),target:Dt.encode(e.target)}}}class Ni extends E{constructor(){super(...arguments);o(this,"encoder",new Oi);o(this,"decoder",new Pi)}}const Go=new Ni;class be{constructor(e){o(this,"transactionSummaries");this.transactionSummaries=e}toJSON(){return At.encode(this)}}class Ui{convert(e){return d(e,"transaction_summaries"),new be(ae.decode(e.transaction_summaries))}}class Li{convert(e){return h(e,be),{transaction_summaries:ae.encode(e.transactionSummaries)}}}class Fi extends E{constructor(){super(...arguments);o(this,"encoder",new Li);o(this,"decoder",new Ui)}}const At=new Fi;class P{constructor(e,t,n,c){o(this,"namespace");o(this,"name");o(this,"site");o(this,"blockExplorer");this.namespace=e,this.name=t,this.site=n,this.blockExplorer=c}}const Mi=new P(202374881,"Vienna",new URL("https://vienna.caldera.dev/"),new URL("https://vienna.calderaexplorer.xyz/")),zi=new P(202374882,"OP Stack",new URL("https://stack.optimism.io/"),new URL("https://www.blockscout.com/")),Hi=new P(33914988448,"Arbitrum",new URL("https://arbitrum.io/"),new URL("https://arbiscan.io/")),Gi=new P(33914988449,"Eigen Layer",new URL("https://www.eigenlayer.xyz/"),new URL("https://www.blockscout.com/")),Ji=new P(33914988450,"Spire",new URL("https://www.spire.dev/"),new URL("https://www.blockscout.com/")),qi=new P(33914988451,"Alt Layer",new URL("https://altlayer.io/"),new URL("https://www.blockscout.com/")),Wi=new P(33914988452,"Caldera",new URL("https://www.caldera.xyz/"),new URL("https://www.blockscout.com/")),$i=new P(33914988453,"Vistara Labs",new URL("https://vistara.dev/"),new URL("https://www.blockscout.com/")),ji=new P(33914988454,"Polygon",new URL("https://polygon.technology/"),new URL("https://www.blockscout.com/")),Vi=new P(263,"Milan",new URL("https://milan.caldera.dev/"),new URL("https://milan-devnet.explorer.caldera.xyz/")),Qi=new P(41234687,"Kyoto",new URL("https://example.com/"),new URL("https://kyoto-explorer.altlayer.io/")),Ki=new Map([Mi,zi,Hi,ji,Gi,Ji,qi,Wi,$i,Vi,Qi].map(r=>[r.namespace,r])),Xe=2147483648,Yi=1103515245,Xi=12345;class _t{constructor(e){o(this,"state");this.state=e!==void 0?e:Math.floor(Math.random()*(Xe-1))}nextInt(){return this.state=(Yi*this.state+Xi)%Xe,this.state}nextFloat(){return this.nextInt()/(Xe-1)}nextRange(e,t){const n=t-e,c=this.nextInt()/Xe;return e+Math.floor(c*n)}fillBytes(e){const t=new ArrayBuffer(e),n=new DataView(t);let c=0;for(;c<e-4;c+=4)n.setUint32(c,this.nextRange(0,4294967295));for(let a=c;a<e;a++)n.setUint8(a,this.nextRange(0,256));return t}}async function*Zi(){}async function*D(){const r=new Date,e=new Date(r.getFullYear(),r.getMonth(),r.getDate()).valueOf(),t=new _t(e),n=new Uint8Array(new Array(20).map(()=>0)).buffer;yield{hash:new x("BLOCK",n),height:0,time:new Date(0),genTime:0,transactions:Zi(),numTransactions:0,proposer:n,size:0,fees:[]};let c=1,a=e;for(;a<r.valueOf();){const i=Math.floor(t.nextFloat()*14*1e3);yield ed(new _t(c+i),c,a,a+i),a+=i,c++}}function ed(r,e,t,n){const c=Math.floor(r.nextRange(0,5));return{hash:new x("BLOCK",r.fillBytes(32)),height:e,genTime:n-t,time:new Date(n),numTransactions:c,transactions:td(new _t(e+t),e,t,n,c),proposer:r.fillBytes(30),size:Math.floor(r.nextFloat()*1024*c)+8,fees:[H.ESP(BigInt(r.nextRange(0,1e9)*1e3))]}}const Jo=Array.from(Ki.keys());function rd(r){return r.nextFloat()>.98?1:Jo[r.nextRange(0,Jo.length)]}async function*td(r,e,t,n,c){const a=(n-t)/c;for(let i=0,u=t;u<n;u+=a,i++){const f=rd(r),p=Math.floor(1024*r.nextFloat());yield{block:e,index:i,size:p,hash:new x("COMMIT",r.fillBytes(32)),time:new Date(u),sender:new x("PUBKEY",r.fillBytes(32)),tree:{namespace:f,data:r.fillBytes(p)}}}}async function*od(r){for(let e=r.next();!e.done;e=r.next())yield e.value}function nd(r){return od(r[Symbol.iterator]())}async function*cd(r){for(let e=await r.next();!e.done;e=await r.next())yield e.value}async function*Pt(r,e){for(let t=await r.next();!t.done;t=await r.next())e(t.value)&&(yield t.value)}function qo(r,e){return Pt(r[Symbol.asyncIterator](),e)}async function*te(r,e){for(let t=await r.next();!t.done;t=await r.next())yield await e(t.value)}function j(r,e){return te(r[Symbol.asyncIterator](),e)}async function*Y(r,e){for(let t=0;t<e;t++){const n=await r.next();if(n.done)return;yield n.value}}function Ot(r,e){return Y(r[Symbol.asyncIterator](),e)}async function*Nt(r,e){for(let t=await r.next();!t.done&&e(t.value);t=await r.next())yield t.value}function Ut(r,e){return Nt(r[Symbol.asyncIterator](),e)}async function*X(r,e){for(let t=0;t<e;t++)if((await r.next()).done)return;yield*cd(r)}function Ze(r,e){return X(r[Symbol.asyncIterator](),e)}async function Se(r){const e=await r.next();if(e.done)throw new ne;return e.value}async function sd(r){return Se(r[Symbol.asyncIterator]())}async function ad(r,e){for(let t=await r.next();!t.done;t=await r.next())if(e(t.value))return t.value}async function id(r,e){return ad(r[Symbol.asyncIterator](),e)}async function Wo(r){let e;for(let t=await r.next();!t.done;t=await r.next())e=t.value;if(e===void 0)throw new ne;return e}async function dd(r){return Wo(r[Symbol.asyncIterator]())}async function*$o(r,e){for(let t=await r.next();!t.done;t=await r.next())yield*e(t.value)}function ie(r,e){return $o(r[Symbol.asyncIterator](),e)}async function*Lt(r){yield*Dc(r)}async function ld(r,e,t){const n=t;let c=e;for(let a=await n.next();!a.done;a=await n.next())c=r(await c,a.value);return c}async function*er(r){let e=null;for(let t=await r.next();!t.done;t=await r.next())e=xc(e,t.value);yield*ao(e)}function ke(r){return er(r[Symbol.asyncIterator]())}function V(r){return ld(async(e,t)=>(e.push(t),e),Promise.resolve([]),r)}async function Ft(r){return V(r[Symbol.asyncIterator]())}function rr(r){return new Ir(r.height,r.time.valueOf()/1e3,0,new Er(0,"00","00"),[],new Sr(new ArrayBuffer(0)),new x("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new x("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new yr(new ArrayBuffer(0),new ArrayBuffer(0),0),new vr(new ArrayBuffer(0),new ArrayBuffer(0)))}async function ud(r){return new Rr(rr(r),new Tr(await V(j(r.transactions,async e=>new fe(e.tree.namespace,Array.from(new Uint8Array(e.tree.data)))))),new x("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions)}function hd(r){return new Oe(rr(r),new x("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions,r.proposer)}function md(r){const e=r.transactions,t=rr(r);return j(e,async n=>new Ne(n.hash,t,n.index,new fe(n.tree.namespace,Array.from(new Uint8Array(n.tree.data)))))}async function*wd(r){const e=rr(r),t=r.transactions;yield*j(t,async n=>new Qr(new fe(n.tree.namespace,Array.from(new Uint8Array(n.tree.data))),new x("BLOCK",new Uint8Array([0,0,0,0]).buffer),new jr(new x("POS",new Uint8Array([0,0,0,0]).buffer),[new Me(new x("EMPTY",new Uint8Array([0,0,0,0]).buffer),[])]),e.height,new x("COMMIT",n.tree.data.slice(0,32))))}class pd{async getLeafFromHeight(e){const t=await this.getBlockFromHeight(e);return new Fr(new Ur(e,new Fe(new Le(new x("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new x("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null),new x("LEAF",new Uint8Array([0,0,0,0]).buffer),t.header,t.payload,[],t.header.timestamp,t.header.fee_info.account),new Fe(new Le(new x("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new x("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null))}async getTransactionFromHeightAndOffset(e,t){const n=await Se(X(D(),e)),c=wd(n);return await sd(Ze(c,t))}async getBlockSummaries(e,t){const n=X(D(),e),c=Y(n,t-e),a=te(c,async i=>hd(i));return await V(a)}async getBlockFromHeight(e){const t=X(D(),e),n=await Se(t);return ud(n)}async*streamTransactionSummaries(e){const t=Nt(D(),a=>a.height<=e),n=er(t);yield*ie(n,a=>ke(md(a)))}async getTransactionSummaryRange(e,t,n){const c=this.streamTransactionSummaries(e),a=X(c,t),i=Y(a,n);return await V(i)}async getTransactionSummaryRangeForRollup(e,t,n,c){const a=this.streamTransactionSummaries(t),i=Pt(a,p=>p.transaction.vm===e),u=X(i,n),f=Y(u,c);return await V(f)}}class Ie extends b{constructor(t,n,c){super(c);o(this,"response");o(this,"status");this.status=t,this.response=n}toJSON(){return jo.convert(this)}}class tr{convert(e){return h(e,Ie),{...M.convert(e),status:e.status}}}const jo=new tr;class or extends Ie{constructor(e,t,n="bad server response: client error"){super(e,t,n),Object.freeze(this)}toJSON(){return Vo.encode(this)}}class fd{convert(e){return d(e,"code","message","status"),C(e,or.name),new or(Number(e.status),null,m.decode(e.message))}}class gd extends tr{}class yd extends l{constructor(){super(...arguments);o(this,"encoder",new gd);o(this,"decoder",new fd)}}const Vo=new yd;v(or.name,Vo);class nr extends Ie{constructor(e,t,n="bad server response"){super(e,t,n),Object.freeze(this)}toJSON(){return Qo.encode(this)}}class Cd{convert(e){return d(e,"code","message","status"),C(e,nr.name),new nr(Number(e.status),null,m.decode(e.message))}}class vd extends tr{}class xd extends l{constructor(){super(...arguments);o(this,"encoder",new vd);o(this,"decoder",new Cd)}}const Qo=new xd;v(nr.name,Qo);class cr extends Ie{constructor(e,t,n="bad server response: server error"){super(e,t,n),Object.freeze(this)}}class Ed{convert(e){return d(e,"code","message","status"),C(e,cr.name),new cr(Number(e.status),null,m.decode(e.message))}}class bd extends tr{}class Sd extends l{constructor(){super(...arguments);o(this,"encoder",new bd);o(this,"decoder",new Ed)}}const kd=new Sd;v(cr.name,kd);class Mt extends b{constructor(e="completer has already been completed"){super(e),Object.freeze(this)}}class Id{convert(e){return d(e,"code","message"),C(e,Mt.name),new Mt(m.decode(e.message))}}class Td extends F{}class Rd extends l{constructor(){super(...arguments);o(this,"encoder",new Td);o(this,"decoder",new Id)}}const Bd=new Rd;v(Mt.name,Bd);class sr extends b{constructor(t,n,c=`invalid string value: have "${t}", want "${n}"`){super(c);o(this,"have");o(this,"want");this.have=t,this.want=n,Object.freeze(this)}toJSON(){return Ko.encode(this)}}class Dd{convert(e){return d(e,"code","have","want","message"),C(e,sr.name),new sr(m.decode(e.have),m.decode(e.want),m.decode(e.message))}}class Ad{convert(e){return h(e,sr),{...M.convert(e),have:m.encode(e.have),want:m.encode(e.want)}}}class _d extends l{constructor(){super(...arguments);o(this,"encoder",new Ad);o(this,"decoder",new Dd)}}const Ko=new _d;v(sr.name,Ko);class ar extends b{constructor(t,n=`no completer found for request id "${t}"`){super(n);o(this,"requestID");this.requestID=t,Object.freeze(this)}toJSON(){return Yo.encode(this)}}class Pd{convert(e){return d(e,"code","requestID","message"),C(e,ar.name),new ar(Te.decode(e.requestID),m.decode(e.message))}}class Od{convert(e){return h(e,ar),{...M.convert(e),requestID:Te.encode(e.requestID)}}}class Nd extends l{constructor(){super(...arguments);o(this,"encoder",new Od);o(this,"decoder",new Pd)}}const Yo=new Nd;v(ar.name,Yo);class zt extends b{constructor(e="no url provided"){super(e),Object.freeze(this)}}class Ud{convert(e){return d(e,"code","message"),C(e,zt.name),new zt(m.decode(e.message))}}class Ld extends F{}class Fd extends l{constructor(){super(...arguments);o(this,"encoder",new Ld);o(this,"decoder",new Ud)}}const Md=new Fd;v(zt.name,Md);class ir extends b{constructor(t,n=`Not Found: ${t}`){super(n);o(this,"key");this.key=t,Object.freeze(this)}}class Xo{constructor(e){o(this,"codec");this.codec=e}convert(e){return d(e,"code","key"),C(e,ir.name),new ir(this.codec.decode(e.key))}}class Zo{constructor(e){o(this,"codec");this.codec=e}convert(e){return{...M.convert(e),key:this.codec.encode(e.key)}}}class en extends l{constructor(t,n){super();o(this,"encoder");o(this,"decoder");this.encoder=t,this.decoder=n}}new en(new Zo(m),new Xo(m));const zd=new en(new Zo(Te),new Xo(Te));v(ir.name,zd);class de extends Ie{constructor(t,n,c,a="response content type is not application/json"){super(n,c,a);o(this,"haveHeaderType");this.haveHeaderType=t,Object.freeze(this)}static fromResponse(t,n){return new de(t.headers.get("content-type")??"undefined",t.status,t,n)}toJSON(){return rn.encode(this)}}class Hd{convert(e){return d(e,"code","status","have","want","message"),C(e,de.name),new de(m.decode(e.code),s.decode(e.status),null,m.decode(e.message))}}class Gd{convert(e){return{...jo.convert(e),have:m.encode(e.haveHeaderType),want:m.encode("application/json")}}}class Jd extends l{constructor(){super(...arguments);o(this,"encoder",new Gd);o(this,"decoder",new Hd)}}const rn=new Jd;v(de.name,rn);class Ht extends b{constructor(t,n="error in web worker"){super(n);o(this,"error");this.error=t,Object.freeze(this)}toJSON(){return tn.encode(this)}}class qd{convert(e){return d(e,"code","error","message"),C(e,Ht.name),new Ht(Be.decode(e.error),m.decode(e.message))}}class Wd{convert(e){return{...M.convert(e),error:Be.encode(e.error)}}}class $d extends l{constructor(){super(...arguments);o(this,"encoder",new Wd);o(this,"decoder",new qd)}}const tn=new $d;v(Ht.name,tn);var Gt=(r=>(r[r.success=0]="success",r[r.full=1]="full",r[r.failed=2]="failed",r))(Gt||{});class jd{getFromEmpty(){}}class Vd{getFromEmpty(){return null}}class Qd{getFromEmpty(){throw new ne}}const Kd={returnNull:new Vd,returnUndefined:new jd,throwMissingElement:new Qd};class Yd{constructor(e){o(this,"maxSize");R(!Number.isNaN(e),"maxSize must not be NaN"),R(Number.isInteger(e),"maxSize must be an integer"),R(e>0,"maxSize must be greater than 0"),this.maxSize=e}nextIndex(e){return R(e>=0,"index must be greater than or equal to 0"),(e+1)%this.maxSize}}class Xd{constructor(e){o(this,"preComputedSizeMinus1");R(!Number.isNaN(e),"maxSize must not be NaN"),R(Number.isInteger(e),"maxSize must be an integer"),R(e>0,"maxSize must be greater than 0"),R(on(e),"maxSize must be a power of two"),this.preComputedSizeMinus1=e-1}nextIndex(e){return R(e>=0,"index must be greater than or equal to 0"),e+1&this.preComputedSizeMinus1}}function on(r){return(r&r-1)===0}class dr extends b{constructor(e="buffer full"){super(e),Object.freeze(this)}}class Zd{convert(e){return d(e,"code","message"),C(e,dr.name),new dr(m.decode(e.message))}}class el extends F{}class rl extends l{constructor(){super(...arguments);o(this,"encoder",new el);o(this,"decoder",new Zd)}}const tl=new rl;v(dr.name,tl);class ol{putToFull(e,t){return e.get(),e.put(t)}}class nl{putToFull(){return Gt.full}}class cl{putToFull(){throw new dr}}const sl={overwriteOldest:new ol,returnFull:new nl,throw:new cl};function al(r){return on(r)?new Xd(r):new Yd(r)}class il{constructor(e,t,n){o(this,"readIndex",0);o(this,"writeIndex",0);o(this,"buffer");o(this,"nextIndex");o(this,"getOnEmpty");o(this,"putOnFull");R(!Number.isNaN(e),"maxSize must not be NaN"),this.buffer=new Array(e),this.nextIndex=al(e),this.getOnEmpty=t,this.putOnFull=n}get maxSize(){return this.buffer.length}get length(){return this.writeIndex<this.readIndex?this.writeIndex+this.maxSize-this.readIndex:this.writeIndex-this.readIndex}put(e){const t=this.nextIndex.nextIndex(this.writeIndex);return t===this.readIndex?this.putOnFull.putToFull(this,e):(this.buffer[this.writeIndex]=e,this.writeIndex=t,Gt.success)}get(){if(this.readIndex===this.writeIndex)return this.getOnEmpty.getFromEmpty(this);const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),e}[Symbol.iterator](){return{next:()=>{const e=this.get();return e==null?{value:void 0,done:!0}:{value:e,done:!1}}}}}function Q(r=32,e=Kd.returnUndefined,t=sl.overwriteOldest){return new il(r,e,t)}function nn(r){return new Zr(r.hash,r.height,r.time,r.numTransactions,r.proposer,r.proposer,r.size,r.fees)}function Jt(r){return new ot(r.hash,r.height,r.proposer,r.numTransactions,r.size,r.time)}function cn(r,e){return new kt(new bt(e.hash,e.block,!0,e.index,r.numTransactions,e.size,e.time,[],[]),[new xt(e.tree.namespace,e.tree.data)])}function lr(r,e){return new Je(e.hash,[e.tree.namespace],e.block,e.time,e.index,r.numTransactions)}class dl{async getBlockDetail(e){const t=e.target,n=await(t===ce?dd(D()):Se(Ze(D(),t)));return new et(nn(n))}async getBlockSummaries(e){const t=Nt(D(),u=>e.from===ce||u.height<=e.from),n=er(t),c=Y(n,e.limit),a=te(c,async u=>Jt(u)),i=await V(a);return new ct(i)}async getTransactionDetail(e){const t=D();if(e instanceof xe){const n=Ut(t,u=>u.height<=e.height),c=ie(n,u=>j(u.transactions,async f=>cn(u,f))),a=Ze(ke(c),e.offset),i=await Se(a);return new qe(i)}if(e instanceof Ee){const n=ie(t,a=>j(a.transactions,async i=>cn(a,i))),c=await id(n,a=>a.details.hash===e.hash);if(!c)throw new ir(e.hash);return new qe(c)}throw new q}applyFilter(e,t){return t instanceof $e?qo(e,n=>n.height==t.block):t instanceof je?qo(e,n=>n.rollups.indexOf(t.namespace)>=0):e}async getTransactionSummaries(e){const t=D(),{target:n,filter:c}=e;if(n instanceof Qe){const i=ie(t,y=>j(y.transactions,async g=>lr(y,g))),u=ke(i),f=this.applyFilter(u,c),p=await Ft(Ot(f,n.limit));return new be(p)}if(n instanceof Ke){const a=Ut(t,g=>g.height<=n.height),i=ie(a,g=>j(g.transactions,async I=>lr(g,I))),u=ke(i),f=Ze(u,n.offset),p=this.applyFilter(f,c),y=await Ft(Ot(p,n.limit));return new be(y)}if(n instanceof Ye){const a=D(),i=ie(a,g=>j(g.transactions,async I=>new Je(I.hash,[I.tree.namespace],I.block,I.time,I.index,g.numTransactions))),u=Ut(i,g=>g.hash!==n.hash),f=ke(u),p=this.applyFilter(f,c),y=await Ft(Ot(p,n.limit));return new be(y)}throw new q}async getExplorerOverview(){let e;const t=Q(11),n=Q(51),c=Q(51),a=Q(51),i=Q(51),u=Q(11);let f=0,p=0;const y=new Map;for await(const g of D()){e=nn(g),t.put(Jt(g)),n.put(g.size),c.put(Math.round(g.genTime/1e3)),a.put(g.numTransactions),i.put(g.height),f++,p+=g.numTransactions;for await(const I of g.transactions){u.put(lr(g,I));const le=y.get(I.tree.namespace)||0;y.set(I.tree.namespace,le+1)}}return new wt(new ht(e,new at(Array.from(y.keys()).length,p,f),Array.from(t),Array.from(u),new dt(Array.from(c),Array.from(n),Array.from(a),Array.from(i))))}async getSearchResult(e){const t=Q(101),n=Q(10),c=Q(10);for await(const a of D())t.put(a);for(const a of t){a.hash.toString().startsWith(e.query)&&n.put(Jt(a));for await(const i of a.transactions)i.hash.toString().startsWith(e.query)&&c.put(lr(a,i))}return new yt(new ft(Array.from(n),Array.from(c)))}}class ll{async blockHeight(){return(await Wo(D())).height}}class ul{constructor(){o(this,"availability",new pd);o(this,"status",new ll);o(this,"explorer",new dl)}}function G(r){return async e=>(hl(e),ml(e),r.convert(await e.json()))}function hl(r){if(!r.ok)throw r.status>=500&&r.status<600?new cr(r.status,r):r.status>=400&&r.status<500?new or(r.status,r):new nr(r.status,r)}function ml(r){const e=r.headers.get("content-type");if(!e||!e.startsWith("application/json"))throw de.fromResponse(r,e||"undefined")}async function wl(r,e){return new Oe(r.header,r.hash,r.size,r.payload.transaction_nmt.length,e.leaf.proposer_id)}async function*pl(r,e){const t=e[Symbol.asyncIterator]();yield*j(nd(r.leaf.block_payload.transaction_nmt),async n=>{const c=r.leaf.block_payload.transaction_nmt.indexOf(n),a=await t.next();if(a.done)throw new Error("Not enough transactions");return new Ne(a.value.hash,r.leaf.block_header,c,n)})}class fl{constructor(e,t){o(this,"fetcher");o(this,"baseURL");this.fetcher=e,this.baseURL=t}getLeafFromHeight(e){const t=new URL(`leaf/${e}`,this.baseURL);return this.fetcher(t.toString()).then(G(Mr.decoder))}getTransactionFromHeightAndOffset(e,t){const n=new URL(`transaction/${e}/${t}`,this.baseURL);return this.fetcher(n.toString()).then(G(Kr.decoder))}async getBlockSummaries(e,t){const n=Lt(t-e),c=te(n,i=>Promise.all([this.getBlockFromHeight(e+i),this.getLeafFromHeight(e+i)])),a=te(c,([i,u])=>wl(i,u));return await V(a)}getBlockFromHeight(e){const t=new URL(`block/${e}`,this.baseURL);return this.fetcher(t.toString()).then(G(Br.decoder))}async*streamBlocksFromHeightRange(e,t){const n=Lt(e),c=te(n,i=>this.getLeafFromHeight(e-i)),a=$o(c,i=>er(pl(i,te(Lt(i.leaf.block_payload.transaction_nmt.length),u=>this.getTransactionFromHeightAndOffset(i.leaf.block_header.height,u)))));if(t===void 0){yield*a;return}yield*Y(a,t)}async getTransactionSummaryRange(e,t,n){const c=this.streamBlocksFromHeightRange(e,50),a=X(c,t),i=Y(a,n);return await V(i)}async getTransactionSummaryRangeForRollup(e,t,n,c){const a=this.streamBlocksFromHeightRange(t,50),i=Pt(a,p=>p.transaction.vm===e),u=X(i,n),f=Y(u,c);return await V(f)}}class gl{constructor(e,t){o(this,"fetcher");o(this,"baseURL");this.fetcher=e,this.baseURL=t}async getBlockDetail(e){const t=new URL(`block/${e.target}`,this.baseURL);return this.fetcher(t.toString()).then(G(rt.decoder))}async getBlockSummaries(e){const t=new URL(`blocks/${e.from}/${e.limit}`,this.baseURL);return this.fetcher(t.toString()).then(G(st.decoder))}async getTransactionDetail(e){let t=null;if(e instanceof Ee?t=new URL(`transaction/hash/${e.hash}`,this.baseURL):e instanceof xe&&(t=new URL(`transaction/${e.height}/${e.offset}`,this.baseURL)),!t)throw new q;return this.fetcher(t.toString()).then(G(Tt.decoder))}async getTransactionSummaries(e){const{target:t,filter:n}=e;let c=t.convertURL(this.baseURL);return c=n.convertURL(c),this.fetcher(c.toString()).then(G(At.decoder))}async getExplorerOverview(){const e=new URL("explorer-summary",this.baseURL);return this.fetcher(e.toString()).then(G(pt.decoder))}async getSearchResult(e){const t=new URL(`search/${encodeURIComponent(e.query)}`,this.baseURL);return this.fetcher(t.toString()).then(G(Ct.decoder))}}class yl{constructor(e,t){o(this,"fetcher");o(this,"baseURL");o(this,"blockHeightURL");o(this,"blockHeightResponseValidator",G(s.decoder));this.fetcher=e,this.baseURL=t,this.blockHeightURL=new URL("block-height",this.baseURL)}blockHeight(){return this.fetcher(this.blockHeightURL).then(this.blockHeightResponseValidator)}}class Cl{constructor(e,t){o(this,"availability");o(this,"status");o(this,"explorer");this.availability=new fl(e,new URL("availability/",t)),this.status=new yl(e,new URL("status/",t)),this.explorer=new gl(e,new URL("explorer/",t))}}class vl{constructor(e){o(this,"service");this.service=e}blockHeight(){return this.service.blockHeight()}async handleRequest(e){switch(e.method){case"blockHeight":return this.blockHeight();default:throw new q}}}class xl{constructor(e){o(this,"service");this.service=e}async getLeafFromHeight(e){return Mr.encode(await this.service.getLeafFromHeight(e))}async getTransactionFromHeightAndOffset(e,t){return Kr.encode(await this.service.getTransactionFromHeightAndOffset(e,t))}async getBlockFromHeight(e){return Br.encode(await this.service.getBlockFromHeight(e))}async getBlockSummaries(e,t){return ms.encode(await this.service.getBlockSummaries(e,t))}async getTransactionSummaryRange(e,t,n){return yo.encode(await this.service.getTransactionSummaryRange(e,t,n))}async getTransactionSummaryRangeForRollup(e,t,n,c){return yo.encode(await this.service.getTransactionSummaryRangeForRollup(e,t,n,c))}async handleRequest(e){switch(e.method){case"getLeafFromHeight":return await this.getLeafFromHeight(s.decode(e.param[0]));case"getTransactionFromHeightAndOffset":return await this.getTransactionFromHeightAndOffset(s.decode(e.param[0]),s.decode(e.param[1]));case"getBlockFromHeight":return await this.getBlockFromHeight(s.decode(e.param[0]));case"getBlockSummaries":return await this.getBlockSummaries(s.decode(e.param[0]),s.decode(e.param[1]));case"getTransactionSummaryRange":return await this.getTransactionSummaryRange(s.decode(e.param[0]),s.decode(e.param[1]),s.decode(e.param[2]));case"getTransactionSummaryRangeForRollup":return await this.getTransactionSummaryRangeForRollup(s.decode(e.param[0]),s.decode(e.param[1]),s.decode(e.param[2]),s.decode(e.param[3]));default:throw new q}}}class El{constructor(e){o(this,"service");this.service=e}async getBlockDetail(e){return rt.encode(await this.service.getBlockDetail(e))}async getBlockSummaries(e){return st.encode(await this.service.getBlockSummaries(e))}async getTransactionDetail(e){return Tt.encode(await this.service.getTransactionDetail(e))}async getTransactionSummaries(e){return At.encode(await this.service.getTransactionSummaries(e))}async getExplorerOverview(){return pt.encode(await this.service.getExplorerOverview())}async getSearchResult(e){return Ct.encode(await this.service.getSearchResult(e))}async handleRequest(e){switch(e.method){case"getBlockDetail":return await this.getBlockDetail(So.decode(e.param[0]));case"getBlockSummaries":return await this.getBlockSummaries(_o.decode(e.param[0]));case"getTransactionDetail":return this.getTransactionDetail(Fo.decode(e.param[0]));case"getTransactionSummaries":return this.getTransactionSummaries(Go.decode(e.param[0]));case"getExplorerOverview":return this.getExplorerOverview();case"getSearchResult":return this.getSearchResult(Lo.decode(e.param[0]))}}}class bl{constructor(e){o(this,"availability");o(this,"status");o(this,"explorer");this.availability=new xl(e.availability),this.status=new vl(e.status),this.explorer=new El(e.explorer)}async handleRequest(e){switch(e.api){case"availability":return this.availability.handleRequest(e);case"status":return this.status.handleRequest(e);case"explorer":return this.explorer.handleRequest(e);default:throw new q}}}async function Sl(){try{const e=await(await fetch("/config.json")).json();if(e.hotshot_query_service_url){const t=new URL(e.hotshot_query_service_url);return new Cl(fetch.bind(self),t)}}catch{}return new ul}async function kl(){return new bl(await Sl())}class Il{constructor(e){o(this,"service");o(this,"postMessage");this.postMessage=e,this.service=kl()}async handleEvent(e){const t=Fn.decode(e.data);try{const c=await(await this.service).handleRequest(t);this.postMessage(Yt.encode(new pr(t.requestID,c)))}catch(n){this.postMessage(Xt.encode(new fr(t.requestID,n)))}}}self.addEventListener("message",new Il(self.postMessage.bind(self)))})();
