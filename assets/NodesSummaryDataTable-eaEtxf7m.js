import{r as Co,R as s,j as o}from"./iframe-CPO7J-5p.js";import{e as Pn,D as b,u as H,c as j,d as V,f as bo,m as Bn,E as Ze,L as se}from"./LoadingProvider-BqsRdxCF.js";import"./DateTimeFormattersProvider-Br7i94ug.js";import"./LocaleProvider-Bld4Cmnt.js";import{O as Vn,P as In}from"./PagePathProvider-CVfe-phe.js";import"./NowProvider-DR2Q-jZs.js";import"./NumberFormattersProvider-BNSL7wtz.js";import"./PathResolverProvider-Yb-kM41j.js";import{S as Qe,D as no,a as ao,b as fo,A as $e,c as R}from"./DataTable-CPdkIla6.js";import{E as ko}from"./ErrorDisplay-ChGqwp1N.js";import"./ByteSizeText-CA0nUUkg.js";import{P as wo}from"./VariableByteSizeText-CBvmxC4F.js";import"./CopyHex-CivD2dEu.js";import"./DateTimeText-BSKNW-oJ.js";import"./FullHexText-3tleIpiG.js";import"./HexText-C2pkHct6.js";import{M as jn}from"./MoneyText-21ruN-4T.js";import{N as G}from"./NumberText-DiIXgfZY.js";import"./RelativeTimeSinceDateText-CbkPWfWT.js";import{T as Rn}from"./TaggedBase64Text-DAyR8Ad1.js";import{T as m}from"./Text-BU7JBOLk.js";import"./TimeText-os-BJfUl.js";import{C as Wn}from"./TransactionSummaryDataTable-Cqoc4Uq4.js";import{C as Dn}from"./deserializer-BzKyFe0g.js";import{W as An}from"./WalletAddressText-BDPq49Mk.js";import{m as g,z as Ln,h as bt,p as En,q as ft,i as go}from"./functional-Cgf59ne2.js";import{S as k}from"./SkeletonContent-GAQeMj3L.js";import{M as Mn}from"./monetary_value-B0ntaWrJ.js";import{W as xo}from"./wallet_address-1_HiFw02.js";import"./BlockPage-CSJighWq.js";import"./BlocksPage-DtOrrOhX.js";import{p as Hn,q as On}from"./CappuccinoHotShotQueryServiceAdapters-1xWeVqw9.js";import{l as f,m as qn,n as Kn,o as de,p as ue,q as No,r as vo,s as _o,t as To,u as Po,v as Gn,w as Fn,x as zn,y as ro,z as Un}from"./CappuccinoHotShotQueryServiceAPIContext-CIuE8MlZ.js";import{s as Jn}from"./sleep-CW-vxfof.js";import{B as Zn}from"./explorer-BQqkbed6.js";import{T as i,I as S,b as h,n as Bo,N as Qn,o as w,p as T,e as $n,f as Yn,A as Xn,j as ea,k as ta,q as x}from"./string-IJEBdhwx.js";import{U as _}from"./UnimplementedError-CdIPpzwU.js";import{A as P}from"./AsyncIterableResolver-B1XKYdbb.js";import"./ProvideAsyncStates-BmIJj6li.js";import"./PromiseBuilder-zNx0Q1pl.js";import"./PromiseResolver-CXb6p9df.js";import{L as oa,j as na,k as aa,l as ra,m as sa,n as ca,o as ia,C as la}from"./TransactionDetailContent-DNmYmxBQ.js";import{c as da,L as ua,d as pa,B as ma,b as ha}from"./LatestBlockSummary-d90GTB-8.js";import{N as ya,a as Sa,W as Ca,P as ba,D as fa,b as ka}from"./WorldMapDotsPopulationFullResolution-D-f9uDzm.js";import"./FetchError-DX6me_FL.js";import"./base64-KHURY7_E.js";import"./array_buffer-cBr8gIXV.js";import{t as Vo}from"./TaggedBase64-S1MhFE0d.js";import"./MissingElementError-CbV3pOXz.js";import"./NotFoundError-DPKbBn2w.js";import{n as pe}from"./url-Bph6d-ow.js";import{c as wa,g as ga,s as xa}from"./blocks-BbRoLXeF.js";import{w as Io,L as Na,e as va,k as so,f as _a}from"./constants-BlhOgobG.js";import{b as Ae,v as jo,c as Ro,V as Ta,C as Pa,S as Ba,a as Va}from"./validator-BovotZF2.js";import"./environment_banner-C8Whbd3N.js";import"./espresso-BHlMMOHO.js";import"./AnchorButton-NR9XkegX.js";import"./Button-BvfqHt4X.js";import"./IconAnchorButton-DAJXX1I_.js";import"./IconButton-apP_MpVj.js";import"./LabeledAnchorButton-Dld7K4vO.js";import"./LabeledButton-CitXn-2v.js";import{a as D,C as Ia}from"./Card-Ck2NNHX8.js";import"./Heading1-BrtpIXWk.js";import{H as ja}from"./Heading2-DNRPSs5x.js";import"./label-DB_BV3KO.js";import"./SummaryTableLabeledValue-BzDGHU9o.js";import"./SummaryValueLabeled-CsT5lXWN.js";import"./TableLabeledValue-0o6sRISY.js";import"./NavBar-BhDnJPSO.js";import{E as Ra}from"./Link-D93Tauvt.js";import"./SocialMediaLinks-CBAcSMfD.js";import"./CircularProgressIndicator-Cw6QluKB.js";import"./ContainerLoading-4kBBH6gc.js";import"./LoadingShimmer-skYfPSjU.js";import"./TransactionDetailLoader-Brbpg100.js";import{B as Wa,H as Da}from"./BlockSizeHistogram-BGCH2ni9.js";import"./BlockSummaryDataTable-C5SCYd3s.js";import{F as Aa}from"./Footer-C0G_rS1B.js";import{H as La}from"./Header-CP1p0ccu.js";import"./HexDump-BtLBeAcq.js";import"./RollUpSimple-hFWQoXO7.js";import"./RollUpsSummaryDataTable-ClTYheHR.js";import{ar as Ea,aq as Ma}from"./en_US-RFN65H63-Bhy5Hp0z.js";import"./typography-DYIw_45M.js";import"./Payments-DPL7EKgO.js";import"./TwitterIcon-Dul1GJJZ.js";import"./ArrowRight-CzLQOgJz.js";import"./CheckCircleFilled-DFjBzG3O.js";import"./ChevronUp-Bnp9fN0M.js";import"./Close-B_dKNFHZ.js";import"./Copy-ZeHugg_G.js";import"./MediumIcon-oFKoJmOG.js";import"./EspressoLogo-DKYN6oXw.js";import"./EspressoLogoAndTitle-CQFDawcb.js";import"./Menu-DvFyVqos.js";import"./SearchGlass-BRiFJj4j.js";import"./SVGIconBase-C4fKu3m4.js";import"./XIcon-G3sIz8-S.js";import{P as co,g as Ha,n as K}from"./nodes-BnjHQtbM.js";import{W as Oa}from"./WorldMapDotsFullResolution-BqslJ42F.js";import"./ExplorerPage-qFDhChZY.js";import{a as Wo}from"./higher_order-DNzVPoVw.js";import{a as Le,b as kt}from"./PieChart-qi5X47l1.js";import"./RollUpPage-Dg17BvT-.js";import"./RollUpsPage-DUDd_UTU.js";import"./TransactionPage-pYMQ1JAy.js";import"./TransactionsForBlockPage-DehhQD7O.js";import"./TransactionsPage-BeOHxoiq.js";class qa{publishQueue;pollBlocked;publishBlocked;capacity;closed=!1;constructor(e){this.publishQueue=f(Math.max(2,e),Kn.throwMissingElement,qn.throw);const n=de();this.pollBlocked=n,this.publishBlocked=n,n.complete(),this.capacity=e-1}get isClosed(){return this.closed}close(){if(this.closed)throw new ue;this.closed=!0}async drain(){for(;this.publishQueue.length>0;)this.publishQueue.get()}async publish(e){if(this.closed)throw new ue;if(this.publishQueue.length>=this.capacity){if(this.publishBlocked.isCompleted){const n=de();this.publishBlocked=n,await n.promise}return await this.publishBlocked.promise,this.publish(e)}this.publishQueue.put(e),this.pollBlocked.isCompleted||this.pollBlocked.complete()}async poll(){if(this.publishQueue.length<=0){if(this.isClosed)throw new ue;if(this.pollBlocked.isCompleted){const n=de();this.pollBlocked=n}return await this.pollBlocked.promise,this.poll()}const e=this.publishQueue.get();return this.publishBlocked.isCompleted||this.publishBlocked.complete(),e}[Symbol.asyncIterator](){return new Ka(this)}}class Ka{channel;constructor(e){this.channel=e}async next(){try{return{done:!1,value:await this.channel.poll()}}catch(e){if(e instanceof ue)return{done:!0,value:void 0};throw e}}}function y(t){return new qa(t)}class Ga{channel;constructor(e){this.channel=e}async send(e){await this.channel.publish(e)}}function io(t){return new Ga(t)}class Fa{constructor(e,n){this.sink=e,this.converter=n,this.sink=e,this.converter=n}async send(e){await this.sink.send(this.converter.convert(e))}}function me(t,e){return new Fa(t,e)}let wt=class{};const F="Closed";class W extends wt{valueOf(){return F}toJSON(){return gt.encode(this)}}class za{convert(e){if(typeof e!="string")throw new S(typeof e,"string");if(e!==F)throw new S(e,F);return new W}}class Ua{convert(){return F}}class Ja extends i{encoder=new Ua;decoder=new za}const gt=new Ja;class xt{}const z="Connecting";class ce extends wt{valueOf(){return z}toJSON(){return Nt.encode(this)}}class Za{convert(e){if(typeof e!="string")throw new S(typeof e,"string");if(e!==z)throw new S(e,z);return new ce}}class Qa{convert(){return z}}class $a extends i{encoder=new Qa;decoder=new Za}const Nt=new $a,U="Opened";class O extends wt{valueOf(){return U}toJSON(){return vt.encode(this)}}class Ya{convert(e){if(typeof e!="string")throw new S(typeof e,"string");if(e!==U)throw new S(e,U);return new O}}class Xa{convert(){return U}}class er extends i{encoder=new Xa;decoder=new Ya}const vt=new er;class tr{convert(e){if(e===U)return vt.decode(e);if(e===F)return gt.decode(e);if(e===z)return Nt.decode(e);throw new _}}class or{convert(e){if(e instanceof O)return vt.encode(e);if(e instanceof W)return gt.encode(e);if(e instanceof ce)return Nt.encode(e);throw new _}}class nr extends i{encoder=new or;decoder=new tr}const Do=new nr;class L extends xt{status;get type(){return J}constructor(e){super(),this.status=e}toJSON(){return Ao.encode(this)}}const J="WebSocket";class ar{convert(e){return{[J]:Do.encode(e.status)}}}class rr{convert(e){return h(e,J),new L(Do.decode(e[J]))}}class sr extends i{encoder=new ar;decoder=new rr}const Ao=new sr,Z=Co.createContext(new L(new W)),he=Co.createContext(Pn()),Ye=t=>{const e=s.useContext(he);return o.jsx(P,{asyncIterable:e,children:o.jsx(cr,{children:t.children})})},cr=t=>{const e=s.useContext(b);return e===null?o.jsx(Z.Provider,{value:new L(new W),children:t.children}):o.jsx(Z.Provider,{value:e,children:t.children})};try{Z.displayName="WebSocketResponseContext",Z.__docgenInfo={description:`WebSocketResponseContext is a React Context that is used to store
and make available the current LifeCycleResponse.`,displayName:"WebSocketResponseContext",props:{}}}catch{}try{he.displayName="WebSocketResponseStreamContext",he.__docgenInfo={description:`WebSocketResponseStreamContext is a React Context that is able to provide
a stream of WebSocketResponses. These can be used to update the UI in order
to indicate the current state of the WebSocket connection.`,displayName:"WebSocketResponseStreamContext",props:{}}}catch{}try{Ye.displayName="WebSocketResponseStreamConsumer",Ye.__docgenInfo={description:`WebSocketResponseStreamConsumer is a component that is able to consume the
WebSocketResponseContext, and provide the WebSocketResponse to the
children of the component via the WebSocketResponseContext context.`,displayName:"WebSocketResponseStreamConsumer",props:{}}}catch{}const ye=s.createContext(H()),Xe=t=>{const e=s.useContext(ye);return o.jsx(j,{children:o.jsx(P,{asyncIterable:e,children:o.jsx(V,{children:t.children})})})};try{ye.displayName="CountriesPieChartStreamContext",ye.__docgenInfo={description:"",displayName:"CountriesPieChartStreamContext",props:{}}}catch{}try{Xe.displayName="CountriesPieChartStreamConsumer",Xe.__docgenInfo={description:"",displayName:"CountriesPieChartStreamConsumer",props:{}}}catch{}const Se=s.createContext(H()),et=t=>{const e=s.useContext(Se);return o.jsx(j,{children:o.jsx(P,{asyncIterable:e,children:o.jsx(V,{children:t.children})})})};try{Se.displayName="NetworkTypesPieChartStreamContext",Se.__docgenInfo={description:"",displayName:"NetworkTypesPieChartStreamContext",props:{}}}catch{}try{et.displayName="NetworkTypesPieChartStreamConsumer",et.__docgenInfo={description:"",displayName:"NetworkTypesPieChartStreamConsumer",props:{}}}catch{}const Ce=s.createContext(H()),tt=t=>{const e=s.useContext(Ce);return o.jsx(j,{children:o.jsx(P,{asyncIterable:e,children:o.jsx(V,{children:t.children})})})};try{Ce.displayName="NodeTypesPieChartStreamContext",Ce.__docgenInfo={description:"",displayName:"NodeTypesPieChartStreamContext",props:{}}}catch{}try{tt.displayName="NodeTypesPieChartStreamConsumer",tt.__docgenInfo={description:"",displayName:"NodeTypesPieChartStreamConsumer",props:{}}}catch{}var p=(t=>(t.publicKey="publicKey",t.name="name",t.address="address",t.companyName="companyName",t.companyWebSite="companyWebSite",t.location="location",t.stake="stake",t.uptime="uptime",t.voteParticipation="voteParticipation",t.commission="commission",t.actions="actions",t))(p||{});const be=s.createContext(H()),fe=s.createContext(H()),ke=s.createContext([]),ot=t=>{const e=s.useContext(b);return o.jsx(ke.Provider,{value:e??[],children:t.children})},nt=t=>{const e=s.useContext(fe);return o.jsx(j,{children:o.jsx(P,{asyncIterable:e,children:o.jsx(ot,{children:o.jsx(V,{children:t.children})})})})},at=t=>{const e=s.useContext(be);return o.jsx(j,{children:o.jsx(P,{asyncIterable:e,children:o.jsx(V,{children:t.children})})})};try{be.displayName="NodeSummaryStreamContext",be.__docgenInfo={description:"",displayName:"NodeSummaryStreamContext",props:{}}}catch{}try{fe.displayName="VoterParticipationStreamContext",fe.__docgenInfo={description:"",displayName:"VoterParticipationStreamContext",props:{}}}catch{}try{ke.displayName="VotersParticipationStatsContext",ke.__docgenInfo={description:"",displayName:"VotersParticipationStatsContext",props:{}}}catch{}try{ot.displayName="VotersParticipationStatesProvider",ot.__docgenInfo={description:"",displayName:"VotersParticipationStatesProvider",props:{}}}catch{}try{nt.displayName="VotersParticipationStatsConsumer",nt.__docgenInfo={description:"",displayName:"VotersParticipationStatsConsumer",props:{}}}catch{}try{at.displayName="NodeSummaryStreamConsumer",at.__docgenInfo={description:"",displayName:"NodeSummaryStreamConsumer",props:{}}}catch{}const we=s.createContext(H()),rt=t=>{const e=s.useContext(we);return o.jsx(j,{children:o.jsx(P,{asyncIterable:e,children:o.jsx(V,{children:t.children})})})};try{we.displayName="OperatingSystemPieChartStreamContext",we.__docgenInfo={description:"",displayName:"OperatingSystemPieChartStreamContext",props:{}}}catch{}try{rt.displayName="OperatingSystemPieChartStreamConsumer",rt.__docgenInfo={description:"",displayName:"OperatingSystemPieChartStreamConsumer",props:{}}}catch{}const Q="Error";class Lo extends xt{error;get type(){return Q}constructor(e){super(),this.error=e}toJSON(){return Eo.encode(this)}}class ir{convert(e){return{[Q]:Bo.encode(e.error)}}}class lr{convert(e){return h(e,Q),new Lo(Bo.decode(e[Q]))}}class dr extends i{encoder=new ir;decoder=new lr}const Eo=new dr;class _t{}const $="Close";class Ee extends _t{valueOf(){return $}}class ur{convert(){return $}}class pr{convert(e){if(typeof e!="string")throw new S(typeof e,"string");if(e!==$)throw new S(e,$);return new Ee}}class mr extends i{encoder=new ur;decoder=new pr}const Mo=new mr,Y="Connect";class ie extends _t{valueOf(){return Y}toJSON(){return Tt.encode(this)}}class hr{convert(){return Y}}class yr{convert(e){if(typeof e!="string")throw new S(typeof e,"string");if(e!==Y)throw new S(e,Y);return new ie}}class Sr extends i{encoder=new hr;decoder=new yr}const Tt=new Sr,X="Set-Url";class Pt extends _t{url;constructor(e){super(),this.url=e}valueOf(){return X}toJSON(){return Bt.encode(this)}}class Cr{convert(e){return{[X]:e.url}}}class br{convert(e){h(e,X);const n=e[X];if(typeof n!="string")throw new S(typeof n,"string");return new Pt(n)}}class fr extends i{encoder=new Cr;decoder=new br}const Bt=new fr;class Ho{}class kr{convert(e){if(e===Y)return Tt.decode(e);if(e===$)return Mo.decode(e);if(typeof e=="object"&&e!==null&&X in e)return Bt.decode(e);throw new _}}class wr{convert(e){if(e instanceof ie)return Tt.encode(e);if(e instanceof Ee)return Mo.encode(e);if(e instanceof Pt)return Bt.encode(e);throw new _}}class gr extends i{encoder=new wr;decoder=new kr}const Oo=new gr;class Vt extends Ho{command;get type(){return ee}constructor(e){super(),this.command=e}toJSON(){return qo.encode(this)}}const ee="WebSocket";class xr{convert(e){return{[ee]:Oo.encode(e.command)}}}class Nr{convert(e){return h(e,ee),new Vt(Oo.decode(e[ee]))}}class vr extends i{encoder=new xr;decoder=new Nr}const qo=new vr,I=new Map;I.set(ee,qo);class _r{convert(e){const n=I.get(e.type);if(!n)throw new S(e.type,`one of ${Array.from(g(I.keys(),a=>`"${a}"`)).join(", ")}`);return{[e.type]:n.encode(e)}}}class Tr{convert(e){if(typeof e!="object"||e===null)throw new S(typeof e,"object");const n=Object.keys(e);if(n.length!==1)throw new _("multiple values contained within the Request object, unexpected");const[a]=n,r=I.get(a);if(h(e,a),!r)throw new S(a,`one of ${Array.from(g(I.keys(),c=>`"${c}"`)).join(", ")}`);return r.decode(e[a])}}class Pr extends i{encoder=new _r;decoder=new Tr}function Br(t,e){I.has(t)||I.set(t,e)}const Vr=new Pr;class Ir{convert(e){return new Vt(e)}}const jr=new Ir;class N{}const Ko="SubscribeNodeIdentity";class It extends N{valueOf(){return Ko}}const Go="SubscribeLatestBlock";class jt extends N{valueOf(){return Go}}const Fo="SubscribeVoters";class Rt extends N{valueOf(){return Fo}}const zo="SubscribeValidators";class Uo extends N{valueOf(){return zo}}const Jo="SubscribeStakeTables";class Zo extends N{valueOf(){return Jo}}const Qo="RequestNodeIdentitySnapshot";class Wt extends N{valueOf(){return Qo}}const $o="RequestBlocksSnapshot";class Dt extends N{valueOf(){return $o}}const Yo="RequestHistogramSnapshot";class At extends N{valueOf(){return Yo}}const Xo="RequestVotersSnapshot";class Lt extends N{valueOf(){return Xo}}const en="RequestValidatorsSnapshot";class Et extends N{valueOf(){return en}}const tn="RequestStakeTableSnapshot";class Mt extends N{valueOf(){return tn}}class Rr{convert(e){return e.valueOf()}}class Wr{convert(e){if(typeof e!="string")throw new S(typeof e,"string");switch(e){case Ko:return new It;case Go:return new jt;case Fo:return new Rt;case Qo:return new Wt;case $o:return new Dt;case Yo:return new At;case Xo:return new Lt;case zo:return new Uo;case Jo:return new Zo;case en:return new Et;case tn:return new Mt;default:throw new S(e,"CappuccinoNodeValidatorRequest")}}}class Dr extends i{encoder=new Rr;decoder=new Wr}const on=new Dr,te="NodeValidatorRequest";class Ht extends Ho{request;get type(){return te}constructor(e){super(),this.request=e}toJSON(){return nn.encode(this)}}class Ar{convert(e){return{[te]:on.encode(e.request)}}}class Lr{convert(e){return h(e,te),new Ht(on.decode(e[te]))}}class Er extends i{encoder=new Ar;decoder=new Lr}const nn=new Er;class Mr{convert(e){return new Ht(e)}}const Hr=new Mr;class v{}const ge="BlocksSnapshot";class Me extends v{blocks;constructor(e){super(),this.blocks=e}toJSON(){return Ot.encode(this)}}class Or{convert(e){h(e,ge);const n=e[ge];return new Me(No.decode(n))}}class qr{convert(e){return{[ge]:No.encode(e.blocks)}}}class Kr extends i{encoder=new qr;decoder=new Or}const Ot=new Kr,xe="HistogramSnapshot";class oe extends v{histograms;constructor(e){super(),this.histograms=e}toJSON(){return qt.encode(this)}}class Gr{convert(e){return h(e,xe),new oe(vo.decode(e[xe]))}}class Fr{convert(e){return{[xe]:vo.encode(e.histograms)}}}class zr extends i{encoder=new Fr;decoder=new Gr}const qt=new zr,Ne="LatestBlock";class E extends v{latestBlock;constructor(e){super(),this.latestBlock=e}toJSON(){return Kt.encode(this)}}class Ur{convert(e){return h(e,Ne),new E(_o.decode(e[Ne]))}}class Jr{convert(e){return{[Ne]:_o.encode(e.latestBlock)}}}class Zr extends i{encoder=new Jr;decoder=new Ur}const Kt=new Zr;class an{coords;country;constructor(e,n){this.coords=e,this.country=n}toJSON(){return st.encode(this)}}class Qr{convert(e){return{coords:Io.encode(e.coords),country:w.encode(e.country)}}}class $r{convert(e){return h(e,"coords","country"),new an(Io.decode(e.coords),T(w.decode(e.country)))}}class Yr extends i{encoder=new Qr;decoder=new $r}const st=new Yr,rn=new Qn(new $n(st),new Yn(st));class sn{publicKey;name;publicURL;company;companyWebsite;location;operatingSystem;nodeType;networkType;constructor(e,n,a,r,c,l,d,u,C){this.publicKey=e,this.name=n,this.publicURL=a,this.company=r,this.companyWebsite=c,this.location=l,this.operatingSystem=d,this.nodeType=u,this.networkType=C}toJSON(){return ne.encode(this)}}class Xr{convert(e){return{public_key:Vo.encode(e.publicKey),name:w.encode(e.name),public_url:pe.encode(e.publicURL),company:w.encode(e.company),company_website:pe.encode(e.companyWebsite),location:rn.encode(e.location),operating_system:w.encode(e.operatingSystem),node_type:w.encode(e.nodeType),network_type:w.encode(e.networkType)}}}class es{convert(e){return h(e,"public_key","name","public_url","company","company_website","location","operating_system","node_type","network_type"),new sn(Vo.decode(e.public_key),T(w.decode(e.name)),pe.decode(e.public_url),T(w.decode(e.company)),pe.decode(e.company_website),rn.decode(e.location),T(w.decode(e.operating_system)),T(w.decode(e.node_type)),T(w.decode(e.network_type)))}}class ts extends i{encoder=new Xr;decoder=new es}const ne=new ts,cn=new Xn(new ea(ne),new ta(ne)),ve="LatestNodeIdentity";class Gt extends v{nodeIdentity;constructor(e){super(),this.nodeIdentity=e}toJSON(){return Ft.encode(this)}}class os{convert(e){return h(e,ve),new Gt(ne.decode(e[ve]))}}class ns{convert(e){return{[ve]:ne.encode(e.nodeIdentity)}}}class as extends i{encoder=new ns;decoder=new os}const Ft=new as,_e="LatestStakeTable";class He extends v{stakeTable;constructor(e){super(),this.stakeTable=e}toJSON(){return zt.encode(this)}}class rs{convert(e){return h(e,_e),new He(Ae.decode(e[_e]))}}class ss{convert(e){return{[_e]:Ae.encode(e.stakeTable)}}}class cs extends i{encoder=new ss;decoder=new rs}const zt=new cs,Te="LatestValidator";class Ut extends v{validator;constructor(e){super(),this.validator=e}toJSON(){return Jt.encode(this)}}class is{convert(e){return h(e,Te),new Ut(jo.decode(e[Te]))}}class ls{convert(e){return{[Te]:jo.encode(e.validator)}}}class ds extends i{encoder=new ls;decoder=new is}const Jt=new ds,Pe="LatestVoters";class Oe extends v{latestVoter;constructor(e){super(),this.latestVoter=e}toJSON(){return Zt.encode(this)}}class us{convert(e){return h(e,Pe),new Oe(To.decode(e[Pe]))}}class ps{convert(e){return{[Pe]:To.encode(e.latestVoter)}}}class ms extends i{encoder=new ps;decoder=new us}const Zt=new ms,Be="NodeIdentitySnapshot";class ae extends v{nodes;constructor(e){super(),this.nodes=e}toJSON(){return Qt.encode(this)}}class hs{convert(e){h(e,Be);const n=e[Be];return new ae(cn.decode(n))}}class ys{convert(e){return{[Be]:cn.encode(e.nodes)}}}class Ss extends i{encoder=new ys;decoder=new hs}const Qt=new Ss,Ve="StakeTableSnapshot";class $t extends v{stakeTable;constructor(e){super(),this.stakeTable=e}toJSON(){return Yt.encode(this)}}class Cs{convert(e){h(e,Ve);const n=e[Ve];return new $t(Ae.decode(n))}}class bs{convert(e){return{[Ve]:Ae.encode(e.stakeTable)}}}class fs extends i{encoder=new bs;decoder=new Cs}const Yt=new fs,Ie="ValidatorsSnapshot";class qe extends v{validators;constructor(e){super(),this.validators=e}toJSON(){return Xt.encode(this)}}class ks{convert(e){h(e,Ie);const n=e[Ie];return new qe(Ro.decode(n))}}class ws{convert(e){return{[Ie]:Ro.encode(e.validators)}}}class gs extends i{encoder=new ws;decoder=new ks}const Xt=new gs,je="VotersSnapshot";class Ke extends v{voters;constructor(e){super(),this.voters=e}toJSON(){return eo.encode(this)}}class xs{convert(e){h(e,je);const n=e[je];return new Ke(Po.decode(n))}}class Ns{convert(e){return{[je]:Po.encode(e.voters)}}}class vs extends i{encoder=new Ns;decoder=new xs}const eo=new vs;class _s{convert(e){if(x(e,ge))return Ot.decode(e);if(x(e,xe))return qt.decode(e);if(x(e,Ne))return Kt.decode(e);if(x(e,ve))return Ft.decode(e);if(x(e,Pe))return Zt.decode(e);if(x(e,Te))return Jt.decode(e);if(x(e,_e))return zt.decode(e);if(x(e,Be))return Qt.decode(e);if(x(e,je))return eo.decode(e);if(x(e,Ie))return Xt.decode(e);if(x(e,Ve))return Yt.decode(e);throw new _}}class Ts{convert(e){if(e instanceof Me)return Ot.encode(e);if(e instanceof oe)return qt.encode(e);if(e instanceof E)return Kt.encode(e);if(e instanceof Gt)return Ft.encode(e);if(e instanceof Oe)return Zt.encode(e);if(e instanceof Ut)return Jt.encode(e);if(e instanceof He)return zt.encode(e);if(e instanceof ae)return Qt.encode(e);if(e instanceof Ke)return eo.encode(e);if(e instanceof qe)return Xt.encode(e);if(e instanceof $t)return Yt.encode(e);throw new _}}class Ps extends i{encoder=new Ts;decoder=new _s}const ln=new Ps,re="NodeValidatorResponse";class to extends xt{response;get type(){return re}constructor(e){super(),this.response=e}toJSON(){return dn.encode(this)}}class Bs{convert(e){return{[re]:ln.encode(e.response)}}}class Vs{convert(e){h(e,re);const n=e[re];return new to(ln.decode(n))}}class Is extends i{encoder=new Bs;decoder=new Vs}const dn=new Is;class js{convert(e){return new to(e)}}const Rs=new js,B=new Map;B.set(Q,Eo);B.set(J,Ao);class Ws{convert(e){const n=B.get(e.type);if(!n)throw new S(e.type,`one of ${Array.from(g(B.keys(),a=>`"${a}"`)).join(", ")}`);return{[e.type]:n.encode(e)}}}class Ds{convert(e){if(typeof e!="object"||e===null)throw new S(typeof e,"object");const n=Object.keys(e);if(n.length!==1)throw new _("multiple values contained within the response object, unexpected");const[a]=n,r=B.get(a);if(h(e,a),!r)throw new S(a,`one of ${Array.from(g(B.keys(),c=>`"${c}"`)).join(", ")}`);return r.decode(e[a])}}class As extends i{encoder=new Ws;decoder=new Ds}function Ls(t,e){B.has(t)||B.set(t,e)}const Es=new As;class Ms{convert(e){return new L(e)}}const Hs=new Ms;function ze(t){return new Un(t.hash,t.height,t.time,t.numTransactions,t.proposer,t.proposer,t.size,t.fees)}function lo(t){return new sn(t.pubkey,t.name,null,t.company.name,new URL(t.company.website),new an(new Na(new va(new so(t.location.coords[0])),new _a(new so(t.location.coords[1]))),t.location.country),t.operatingSystem,t.nodeType,t.networkType)}class Os{responseStream;requestStream;lifecycleResponseSink;nodeValidatorResponseSink;constructor(e,n){this.requestStream=e,this.responseStream=n,this.lifecycleResponseSink=me(io(n),Hs),this.nodeValidatorResponseSink=me(io(n),Rs)}get stream(){return this.responseStream}async send(e){await this.requestStream.publish(e)}prng=new co(Ha());latestBlock=ze(wa());latestBlocks=f(50);latestVoters=f(50);histogramBlockTimeData=f(50);histogramBlockSizeData=f(50);histogramBlockTransactionData=f(50);generateVotersFromBlockDetail(e){const n=new co(e.time.valueOf()),a=K.length,r=Math.ceil(a/16),c=new Uint16Array(n.fillBytes(r*2));return new Gn(Fn.lsb0,new zn(16,0),a,Array.from(c))}histogramBlockHeightData=f(50);async updateBlockDetails(e){const n=this.latestBlock,a=(e.time.valueOf()-n.time.valueOf())/1e3,r=this.generateVotersFromBlockDetail(e);this.latestBlock=e,this.latestBlocks.put(e),this.latestVoters.put(r),this.histogramBlockTimeData.put(a),this.histogramBlockSizeData.put(e.size),this.histogramBlockTransactionData.put(e.numTransactions),this.histogramBlockHeightData.put(e.height),this.isConnected&&(this.isSubscribedToLatestBlock&&await this.nodeValidatorResponseSink.send(new E(e)),this.isSubscribedToVoters&&this.nodeValidatorResponseSink.send(new Oe(r)))}async initializeState(){for await(const e of ga(this.prng))this.updateBlockDetails(ze(e));await this.nodeValidatorResponseSink.send(new E(this.latestBlock)),await this.nodeValidatorResponseSink.send(new oe(new ro(Array.from(this.histogramBlockTimeData.immutableIterable()),Array.from(this.histogramBlockSizeData.immutableIterable()),Array.from(this.histogramBlockTransactionData.immutableIterable()),Array.from(this.histogramBlockHeightData.immutableIterable())))),this.nodeValidatorResponseSink.send(new ae(K.map(lo)))}async startProcessing(){await this.initializeState(),this.handleRequests(),this.streamBlocks()}async handleRequests(){for await(const e of this.requestStream)await this.handleRequest(e)}async streamBlocks(){const e=this.latestBlock;for await(const n of xa(this.prng,e.time.valueOf(),e.height)){const a=ze(n);this.updateBlockDetails(a)}}async handleRequest(e){if(e instanceof Vt){try{await this.handleWebSocketCommand(e.command)}catch(n){console.error("failed to handle life cycle request",e,n)}return}if(e instanceof Ht){try{await this.handleNodeValidatorRequest(e.request)}catch(n){console.error("failed to handle node validator request",e,n)}return}console.error("unrecognized request type",e)}async handleWebSocketCommand(e){if(e instanceof ie){await this.handleConnect();return}if(e instanceof Ee){await this.handleClose();return}}async handleNodeValidatorRequest(e){if(e instanceof jt){await this.handleSubscribeLatestBlock();return}if(e instanceof It){await this.handleSubscribeNodeIdentity();return}if(e instanceof Rt){await this.handleSubscribeVoters();return}if(e instanceof Dt){await this.handleRequestBlocksSnapshot();return}if(e instanceof At){await this.handleRequestHistogramSnapshot();return}if(e instanceof Wt){await this.handleRequestNodeIdentitySnapshot();return}if(e instanceof Lt){await this.handleRequestVotersSnapshot();return}if(e instanceof Et){await this.handleRequestValidatorsSnapshot();return}if(e instanceof Mt){await this.handleRequestStakeTableSnapshot();return}}isConnected=!1;isSubscribedToLatestBlock=!1;isSubscribedToVoters=!1;async handleConnect(){if(this.isConnected)throw new Error("already connected to WebSocket");this.isConnected=!0,await this.lifecycleResponseSink.send(new ce),await this.lifecycleResponseSink.send(new O)}async handleClose(){if(!this.isConnected)throw new Error("not connected to WebSocket");this.isConnected=!1,this.isSubscribedToLatestBlock=!1,this.isSubscribedToVoters=!1,await this.lifecycleResponseSink.send(new W)}async assertIsConnected(){if(!this.isConnected)throw new Error("not connected to WebSocket")}async handleSubscribeLatestBlock(){await this.assertIsConnected(),this.isSubscribedToLatestBlock=!0}async handleSubscribeNodeIdentity(){await this.assertIsConnected()}async handleSubscribeVoters(){await this.assertIsConnected(),this.isSubscribedToVoters=!0}async handleRequestBlocksSnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new Me(Array.from(this.latestBlocks.immutableIterable())))}async handleRequestHistogramSnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new oe(new ro(Array.from(this.histogramBlockTimeData.immutableIterable()),Array.from(this.histogramBlockSizeData.immutableIterable()),Array.from(this.histogramBlockTransactionData.immutableIterable()),Array.from(this.histogramBlockHeightData.immutableIterable()))))}async handleRequestNodeIdentitySnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new ae(K.map(lo)))}async handleRequestVotersSnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new Ke(Array.from(this.latestVoters.immutableIterable())))}async handleRequestValidatorsSnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new qe(K.map(e=>{const n=new xo(e.address);return new Ta(n,e.pubkey,e.stateVerKey,e.stake,new Pa(e.commission),new Map([[n.toString(),e.stake]]))})))}async handleRequestStakeTableSnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new He(K.map(e=>new Ba(new Va(e.pubkey,e.stake),e.stateVerKey))))}}function qs(t){return new Worker(""+new URL("node_validator_web_worker_api.js-yTmZvuBe.js",import.meta.url).href,{name:t?.name})}Br(te,nn);Ls(re,dn);let Ue=null;function Ks(){return Ue||(Ue=new qs),Ue}class Gs{requestChannel;responseChannel;constructor(e=y(1024),n=y(1024)){const a=Ks();this.requestChannel=e,this.responseChannel=n,a.addEventListener("message",this.handleMessage.bind(this)),a.addEventListener("messageerror",this.handleMessageError.bind(this)),a.addEventListener("error",this.handleError.bind(this)),Fs(a,e)}get stream(){return this.responseChannel}async send(e){this.requestChannel.publish(e)}handleMessage(e){const n=Es.decode(e.data);this.responseChannel.publish(n)}handleMessageError(){}handleError(){}}async function Fs(t,e){for await(const n of e)t.postMessage(Vr.encode(n))}class zs{get stream(){throw new _}async send(){throw new _}}const Re=s.createContext(new zs),uo=t=>o.jsx(Re.Provider,{value:Js(),children:t.children});let Je=null;function Us(){return Je===null&&(Je=new Gs),Je}function Js(){return typeof window<"u"&&"Worker"in window||typeof self<"u"&&"Worker"in self?Us():new Os(y(1024),y(1024))}try{Re.displayName="CappuccinoNodeValidatorServiceAPIContext",Re.__docgenInfo={description:"",displayName:"CappuccinoNodeValidatorServiceAPIContext",props:{}}}catch{}try{uo.displayName="ProvideCappuccinoNodeValidatorServiceAPIContext",uo.__docgenInfo={description:`ProvideCappuccinoNodeValidatorServiceAPIContext is a component that provides
a Cappuccino Node Validator Service API using a default implementation that
is dependent on the environment that the code is being run within.`,displayName:"ProvideCappuccinoNodeValidatorServiceAPIContext",props:{}}}catch{}async function oo(t,e,n,a,r){await Promise.all([t.blockSizeHistogramStream.publish({blocks:Array.from(e.immutableIterable()),blockSize:Array.from(a.immutableIterable())}),t.blockTimeHistogramStream.publish({blockSize:Array.from(a.immutableIterable()),blocks:Array.from(e.immutableIterable()),blockTime:Array.from(n.immutableIterable())}),t.blockThroughputHistogramStream.publish({blocks:Array.from(e.immutableIterable()),blockThroughput:Array.from(r.immutableIterable())})])}function un(t){return{publicKey:t.publicKey,name:T(t.name),companyDetails:{name:T(t.company),website:t.companyWebsite?.toString()??null},location:{coords:t.location?.coords?[t.location.coords.lat.valueOf(),t.location.coords.lng.valueOf()]:null,country:T(t.location?.country??null)}}}function Zs(t,e){return t.value-e.value}function Ge(t,e){const n=new Map;for(const a of t){const r=e(a);r!==null&&n.set(r,(n.get(r)??0)+1)}return Array.from(n.entries()).map(([a,r])=>({label:a,value:r})).sort(Zs)}function pn(t){return Ge(t,e=>e.operatingSystem)}function mn(t){return Ge(t,e=>e.location?.country??null)}function hn(t){return Ge(t,e=>e.networkType)}function yn(t){return Ge(t,e=>e.nodeType)}function Sn(t,e){const n=Array.from(g(e,r=>Array.from(g(r,Number))));return t.map((r,c)=>{const d=g(n,q=>q[c])[Symbol.iterator](),[u,C]=bt(([q,Fe],le)=>[q+1,Fe+le],[0,0],d);return{voteParticipation:C,totalVotes:u}})}function Cn(t){const e=t[Symbol.iterator](),n=bt((r,c)=>{const l=g(c.proposerID,d=>En(r.keys(),u=>ft(u,d)===0)??d);for(const d of l)r.set(d,(r.get(d)??0)+1);return r},new Map,e),a=Array.from(n.entries()).sort((r,c)=>c[1]-r[1]);return Array.from(g(a,([r,c])=>({proposer:r,count:c})))}const A=50;function Qs(){const t=f(A+1),e=f(A+1),n=f(A+1),a=f(A+1),r=f(A+1),c=f(A+1);return{lastBlock:null,latestBlocks:t,blockHeightHistograms:e,blockTimeHistograms:n,blockSizeHistograms:a,blockThroughputHistograms:r,votersBitVecs:c,nodes:[],validators:new Map,stakeTable:new Map}}async function $s(t,e,n){const a=t.lastBlock;t.lastBlock=n,t.latestBlocks.put(n.latestBlock),e.latestBlockStream.publish({height:n.latestBlock.height,time:n.latestBlock.time,size:n.latestBlock.size,transactions:n.latestBlock.numTransactions,proposer:n.latestBlock.proposerID}),t.blockHeightHistograms.put(n.latestBlock.height),t.blockSizeHistograms.put(n.latestBlock.size);const r=(n.latestBlock.time.valueOf()-(a?.latestBlock.time.valueOf()??0))/1e3;t.blockTimeHistograms.put(r),t.blockThroughputHistograms.put(n.latestBlock.size/Math.max(1,r)),await oo(e,t.blockHeightHistograms,t.blockTimeHistograms,t.blockSizeHistograms,t.blockThroughputHistograms),e.latestBlockProducers.publish(Cn(t.latestBlocks.immutableIterable()))}async function Ys(t,e,n){for(const r of n.blocks){const c=t.lastBlock?.latestBlock??null;t.lastBlock=new E(r),t.latestBlocks.put(r),t.blockHeightHistograms.put(r.height),t.blockSizeHistograms.put(r.size);const l=(r.time.valueOf()-(c?.time.valueOf()??0))/1e3;t.blockTimeHistograms.put(l),t.blockThroughputHistograms.put(r.size/Math.max(1,l))}await oo(e,t.blockHeightHistograms,t.blockTimeHistograms,t.blockSizeHistograms,t.blockThroughputHistograms);const a=t.lastBlock?.latestBlock??null;a!==null&&e.latestBlockStream.publish({height:a.height,time:a.time,size:a.size,transactions:a.numTransactions,proposer:a.proposerID}),e.latestBlockProducers.publish(Cn(t.latestBlocks.immutableIterable()))}async function Xs(t,e,n){for(const a of n.histograms.blockHeights)t.blockHeightHistograms.put(a);for(const a of n.histograms.blockTime)t.blockTimeHistograms.put(a);for(const a of n.histograms.blockSize)t.blockSizeHistograms.put(a);for(const a of Ln(t.blockTimeHistograms.immutableIterable(),t.blockSizeHistograms.immutableIterable(),(r,c)=>(c??0)/Math.max(1,r??1)))t.blockThroughputHistograms.put(a);await oo(e,t.blockHeightHistograms,t.blockTimeHistograms,t.blockSizeHistograms,t.blockThroughputHistograms)}async function ec(t,e,n){t.nodes=n.nodes;const a=pn(t.nodes),r=mn(t.nodes),c=hn(t.nodes),l=yn(t.nodes),d=t.nodes.map(un);await Promise.all([e.nodesSummary.publish(d),e.nodeCoordinates.publish(d),e.pieChartCountries.publish(r),e.pieChartNetworkTypes.publish(c),e.pieChartNodeTypes.publish(l),e.pieChartOperatingSystems.publish(a)])}async function tc(t,e,n){const a=t.nodes.findIndex(C=>C.publicKey.toString()===n.nodeIdentity.publicKey.toString());a<0?t.nodes.push(n.nodeIdentity):t.nodes[a]=n.nodeIdentity;const r=pn(t.nodes),c=mn(t.nodes),l=hn(t.nodes),d=yn(t.nodes),u=t.nodes.map(un);await Promise.all([e.nodesSummary.publish(u),e.nodeCoordinates.publish(u),e.pieChartCountries.publish(c),e.pieChartNetworkTypes.publish(l),e.pieChartNodeTypes.publish(d),e.pieChartOperatingSystems.publish(r)])}async function oc(t,e,n){for(const r of n.voters)t.votersBitVecs.put(r);const a=Sn(t.nodes,t.votersBitVecs.immutableIterable());await e.voters.publish(a)}async function nc(t,e,n){t.votersBitVecs.put(n.latestVoter);const a=Sn(t.nodes,t.votersBitVecs.immutableIterable());await e.voters.publish(a)}async function ac(t,e,n){t.validators=new Map(g(n.validators,a=>[a.stakeTableKey.toString(),a])),await e.validatorsStreamer.publish(t.validators)}async function rc(t,e,n){t.validators.set(n.validator.stakeTableKey.toString(),n.validator),await e.validatorsStreamer.publish(t.validators)}async function sc(t,e,n){t.stakeTable=new Map(g(n.stakeTable,a=>[a.stakeTableEntry.stakeKey.toString(),a])),await e.stakeTableStreamer.publish(t.stakeTable)}async function cc(t,e,n){t.stakeTable=new Map(g(n.stakeTable,a=>[a.stakeTableEntry.stakeKey.toString(),a])),await e.stakeTableStreamer.publish(t.stakeTable)}async function ic(t,e,n){if(n instanceof E)return $s(t,e,n);if(n instanceof Me)return Ys(t,e,n);if(n instanceof oe)return Xs(t,e,n);if(n instanceof ae)return ec(t,e,n);if(n instanceof Gt)return tc(t,e,n);if(n instanceof Ke)return oc(t,e,n);if(n instanceof Oe)return nc(t,e,n);if(n instanceof qe)return ac(t,e,n);if(n instanceof Ut)return rc(t,e,n);if(n instanceof $t)return sc(t,e,n);if(n instanceof He)return cc(t,e,n)}async function lc(t,e,n,a){const r=t.status;if(r instanceof O){e.reconnectAttempt=0,e.errors.publish(null),await a.send(new jt),await a.send(new It),await a.send(new Rt),await a.send(new Zo),await a.send(new Uo),await a.send(new Wt),await a.send(new Dt),await a.send(new At),await a.send(new Lt),await a.send(new Mt),await a.send(new Et);return}if(!(r instanceof W)||!e.mounted)return;e.reconnectAttempt+=1;const c=Math.min(4**e.reconnectAttempt,4e3)*(Math.random()+1);console.info("disconnected from node validator web socket, attempting to reconnect","attempting reconnect, attempt",e.reconnectAttempt,"sleeping for",c),await Jn(c),n.send(new ie)}const bn=1;async function dc(t,e,n,a,r){const c=Qs(),l=n.stream[Symbol.asyncIterator]();let d=l.next();for(let u=await Promise.race([e.promise,d]);u!==bn&&!u.done;d=l.next(),u=await Promise.race([e.promise,d])){const C=u.value;if(C instanceof to){await ic(c,t,C.response),await t.errors.publish(null);continue}if(C instanceof L){await t.lifecycle.publish(C),lc(C,t,a,r);continue}if(C instanceof Lo){await t.errors.publish(C);continue}}for(let u=await d;!u.done;u=await l.next()){const C=u.value;if(C instanceof L&&C.status instanceof W)break}}async function uc(t,e=null){e!==null&&await t.send(new Pt(e)),await t.send(new ie)}function pc(){return{latestBlockStream:y(4),blockTimeHistogramStream:y(4),blockSizeHistogramStream:y(4),blockThroughputHistogramStream:y(4),nodesSummary:y(4),nodeCoordinates:y(4),pieChartCountries:y(4),pieChartNetworkTypes:y(4),pieChartNodeTypes:y(4),pieChartOperatingSystems:y(4),voters:y(4),latestBlockProducers:y(4),stakeTableStreamer:y(4),validatorsStreamer:y(4),errors:y(4),lifecycle:y(4),reconnectAttempt:0,mounted:!0}}const We=s.createContext(new Map),De=s.createContext(new Map),po=t=>o.jsx(j,{children:o.jsx(P,{asyncIterable:t.stream,children:t.children})}),mc=t=>{const e=s.useContext(b);return o.jsx(We.Provider,{value:e??new Map,children:o.jsx(V,{children:t.children})})},hc=t=>{const e=s.useContext(b);return o.jsx(De.Provider,{value:e??new Map,children:o.jsx(V,{children:t.children})})},mo=t=>{const e=s.useContext(Zn),n=s.useContext(Re),a=pc();return s.useEffect(()=>{const r=de(),c=me(n,Hr),l=me(n,jr);return dc(a,r,n,l,c),uc(l,e?.nodeValidatorServiceURL),()=>{l.send(new Ee),a.mounted=!1,r.complete(bn)}},[a,n,e?.nodeValidatorServiceURL]),o.jsx(Hn.Provider,{value:a.latestBlockStream,children:o.jsx(oa.Provider,{value:a.latestBlockProducers,children:o.jsx(da.Provider,{value:a.blockTimeHistogramStream,children:o.jsx(na.Provider,{value:a.blockSizeHistogramStream,children:o.jsx(aa.Provider,{value:a.blockThroughputHistogramStream,children:o.jsx(be.Provider,{value:a.nodesSummary,children:o.jsx(we.Provider,{value:a.pieChartOperatingSystems,children:o.jsx(Se.Provider,{value:a.pieChartNetworkTypes,children:o.jsx(Ce.Provider,{value:a.pieChartNodeTypes,children:o.jsx(ye.Provider,{value:a.pieChartCountries,children:o.jsx(ya.Provider,{value:a.nodeCoordinates,children:o.jsx(fe.Provider,{value:a.voters,children:o.jsx(he.Provider,{value:a.lifecycle,children:o.jsx(bo.Provider,{value:Bn(a.errors,async r=>r?.error??null),children:o.jsx(po,{stream:a.stakeTableStreamer,children:o.jsx(mc,{children:o.jsx(po,{stream:a.validatorsStreamer,children:o.jsx(hc,{children:t.children})})})})})})})})})})})})})})})})})})};try{We.displayName="CurrentStakeTableContext",We.__docgenInfo={description:"",displayName:"CurrentStakeTableContext",props:{}}}catch{}try{De.displayName="CurrentValidatorsContext",De.__docgenInfo={description:"",displayName:"CurrentValidatorsContext",props:{}}}catch{}try{mo.displayName="ProvideCappuccinoNodeValidatorStreams",mo.__docgenInfo={description:`ProvideCappuccinoNodeValidatorStream is a React Context Provider that will
setup the node validator state, and provide React Contexts to distribute
the underlying node validator data to the components on the Node Validator
Page.`,displayName:"ProvideCappuccinoNodeValidatorStreams",props:{}}}catch{}const ct=t=>{const e=s.useContext(bo);return o.jsx(P,{asyncIterable:e,children:o.jsx(yc,{children:t.children})})},yc=t=>{const e=s.useContext(b),n=s.useContext(Ze);return o.jsx(Ze.Provider,{value:n??e,children:t.children})};try{ct.displayName="ErrorStreamConsumer",ct.__docgenInfo={description:`ErrorStreamConsumer is a component that is used to consume errors off of
the ErrorStreamContext.  This component will resolve the error stream
and provide the resolved error to the children of this component.`,displayName:"ErrorStreamConsumer",props:{}}}catch{}const M=t=>o.jsx("div",{className:"pie-chart-section-title card--padding heading--margin",children:o.jsx(ja,{children:t.children})});try{M.displayName="PieChartSectionTitle",M.__docgenInfo={description:`PieChartSectionTitle is a component that represents the title of a section
of a pie chart. This component is useful for labeling sections of a pie
chart.`,displayName:"PieChartSectionTitle",props:{}}}catch{}const Sc={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Åland Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthélemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia, Plurinational State of",BQ:"Bonaire, Sint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"Congo, Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"Côte d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cabo Verde",CW:"Curaçao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czechia",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia, Federated States of",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom of Great Britain and Northern Ireland",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran, Islamic Republic of",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao People's Democratic Republic",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova, Republic of",ME:"Montenegro",MF:"Saint Martin (French part)",MG:"Madagascar",MH:"Marshall Islands",MK:"North Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands, Kingdom of the",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestine, State of",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Réunion",RO:"Romania",RS:"Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena, Ascension and Tristan da Cunha",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten (Dutch part)",SY:"Syrian Arab Republic",SZ:"Eswatini",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Türkiye",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan, Province of China",TZ:"Tanzania, United Republic of",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States of America",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See",VC:"Saint Vincent and the Grenadines",VE:"Venezuela, Bolivarian Republic of",VG:"Virgin Islands (British)",VI:"Virgin Islands (U.S.)",VN:"Viet Nam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function Cc(t){return Sc[t]??t}function bc(t){return{label:Cc(t.label),value:t.value}}const it=()=>{const t=s.useContext(se),e=s.useContext(b);return t?o.jsx(o.Fragment,{}):o.jsxs(o.Fragment,{children:[o.jsx(M,{children:o.jsx(m,{text:"Countries"})}),o.jsx("div",{className:"card--padding",children:o.jsx(Le,{values:e.map(bc)})})]})};try{it.displayName="CountriesPieChart",it.__docgenInfo={description:"",displayName:"CountriesPieChart",props:{}}}catch{}const fc=t=>o.jsxs(o.Fragment,{children:[o.jsx(m,{text:t.label}),o.jsx(G,{number:t.value})]}),lt=()=>{const t=s.useContext(se),e=s.useContext(b);return t?o.jsx(o.Fragment,{}):o.jsxs(kt.Provider,{value:fc,children:[o.jsx(M,{children:o.jsx(m,{text:"Network Types"})}),o.jsx("div",{className:"card--padding",children:o.jsx(Le,{values:e})})]})};try{lt.displayName="NetworkTypesPieChart",lt.__docgenInfo={description:"",displayName:"NetworkTypesPieChart",props:{}}}catch{}const kc=t=>o.jsxs(o.Fragment,{children:[o.jsx(m,{text:t.label}),o.jsx(G,{number:t.value})]}),dt=()=>{const t=s.useContext(se),e=s.useContext(b);return t?o.jsx(o.Fragment,{}):o.jsxs(kt.Provider,{value:kc,children:[o.jsx(M,{children:o.jsx(m,{text:"Node Types"})}),o.jsx("div",{className:"card--padding",children:o.jsx(Le,{values:e})})]})};try{dt.displayName="NodeTypesPieChart",dt.__docgenInfo={description:"",displayName:"NodeTypesPieChart",props:{}}}catch{}const wc=t=>o.jsxs(o.Fragment,{children:[o.jsx(m,{text:t.label}),o.jsx(G,{number:t.value})]}),ut=()=>{const t=s.useContext(se),e=s.useContext(b);return t?o.jsx(o.Fragment,{}):o.jsxs(kt.Provider,{value:wc,children:[o.jsx(M,{children:o.jsx(m,{text:"Operating System"})}),o.jsx("div",{className:"card--padding",children:o.jsx(Le,{values:e})})]})};try{ut.displayName="OperatingSystemPieChart",ut.__docgenInfo={description:"",displayName:"OperatingSystemPieChart",props:{}}}catch{}const pt=t=>{const e=s.useContext(Z),n=xc(e),a=gc(e);return o.jsx("div",{className:Wo(t.className,`web-socket-status ${a}`),children:n})};function gc(t){return t?t.status instanceof O?"web-socket-status--connected":t.status instanceof ce?"web-socket-status--connecting":"web-socket-status--disconnected":"web-socket-status--disconnected"}function xc(t){return t?t.status instanceof O?o.jsx(m,{text:"WebSocket Connected"}):t.status instanceof ce?o.jsx(m,{text:"WebSocket Connecting..."}):o.jsx(m,{text:"WebSocket Disconnected"}):o.jsx(m,{text:"WebSocket Disconnected"})}try{pt.displayName="WebSocketStatus",pt.__docgenInfo={description:"WebSocketStatus is a component that renders the WebSocket status.",displayName:"WebSocketStatus",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Nc=t=>{const e=s.useContext(Ea),a=!s.useContext(Ma)||!e?"node-validator-grid edge-margin":"node-validator-grid with-wallet edge-margin";return o.jsx("div",{...t,className:Wo(t.className,a),children:t.children})},ho=t=>o.jsx(Ye,{children:o.jsx(ct,{children:o.jsxs(Vn,{page:In.nodes,children:[o.jsx(La,{}),o.jsx(pt,{className:"edge-margin"}),o.jsx(ko,{className:"edge-margin"}),o.jsxs(Nc,{...t,children:[o.jsx(On,{children:o.jsx(ua,{className:"latest-block"})}),o.jsx(ra,{children:o.jsx(sa,{className:"latest-block-producers"})}),o.jsx(pa,{children:o.jsx(ma,{})}),o.jsx(ca,{children:o.jsx(Wa,{})}),o.jsx(ia,{children:o.jsx(ha,{})}),o.jsx(D,{className:"cdn",children:o.jsx(la,{className:"card-padding"})}),o.jsxs(D,{className:"network-map",children:[o.jsxs(Da,{className:"card--padding heading--margin",children:[o.jsx(m,{text:"Network Map"}),o.jsx("div",{})]}),o.jsx(Sa,{children:o.jsx(Ca,{children:o.jsxs(ba,{children:[o.jsx(Oa,{}),o.jsx(fa,{children:o.jsx(ka,{})})]})})})]}),o.jsx(D,{className:"countries",children:o.jsx(Xe,{children:o.jsx(it,{})})}),o.jsx(D,{className:"network-types",children:o.jsx(et,{children:o.jsx(lt,{})})}),o.jsx(D,{className:"node-types",children:o.jsx(tt,{children:o.jsx(dt,{})})}),o.jsx(D,{className:"operating-systems",children:o.jsx(rt,{children:o.jsx(ut,{})})}),o.jsx(Ia,{className:"nodes",children:o.jsx(nt,{children:o.jsx(at,{children:o.jsx(Ct,{})})})})]}),o.jsx(Aa,{})]})})});try{ho.displayName="NodesPage",ho.__docgenInfo={description:"NodesPage is a component that renders the Nodes page.",displayName:"NodesPage",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const fn=()=>{const[t]=s.useContext(R);return t.name===null||t.name===""?o.jsx(m,{text:"-"}):o.jsx(m,{text:t.name})},kn=()=>{const[t]=s.useContext(R);return o.jsx(Wn,{value:t.publicKey,children:o.jsx(Rn,{value:t.publicKey})})},vc=()=>{const[,,,t]=s.useContext(R),e=t?.account.address??null;if(e===null)return o.jsx(m,{text:"-"});const n=new xo(e);return o.jsx(Dn,{value:n,children:o.jsx(An,{value:n})})},_c=()=>{const t=s.useContext(St),[,,,e]=s.useContext(R),n=e?.stake??null;if(t===null||n===null)return o.jsx(m,{text:"-"});const a=1e5,r=Number(n*BigInt(a)/t)/a;return o.jsxs(o.Fragment,{children:[o.jsx(jn,{money:Mn.ESP(n)})," (",o.jsx(wo,{percentage:r}),")"]})},wn=()=>{const[t]=s.useContext(R);return t.companyDetails===null||t.companyDetails.name===null||t.companyDetails.name===""?o.jsx(m,{text:"-"}):o.jsx(m,{text:t.companyDetails.name})},gn=()=>{const[t]=s.useContext(R);return t.companyDetails===null||t.companyDetails.website===null||t.companyDetails?.website===""?o.jsx(m,{text:"-"}):t.companyDetails.website?o.jsx(Ra,{href:t.companyDetails.website,target:"_blank",children:o.jsx(m,{text:t.companyDetails.website})}):o.jsx(m,{text:"-"})},xn=()=>{const[,t]=s.useContext(R);return t===null?o.jsx(m,{text:"?"}):t.totalVotes===0?o.jsx(G,{number:t.voteParticipation}):o.jsxs(o.Fragment,{children:[o.jsx(G,{number:t.voteParticipation})," (",o.jsx(wo,{percentage:t.voteParticipation/t.totalVotes}),")"]})},Nn=t=>o.jsx(fo,{columns:[{label:"Public Key",columnType:p.publicKey,buildCell:t.components[0]},{label:"Address",columnType:p.address,buildCell:t.components[1]},{label:"Name",columnType:p.name,buildCell:t.components[2]},{label:"Company",columnType:p.companyName,buildCell:t.components[3]},{label:"Website",columnType:p.companyWebSite,buildCell:t.components[4]},{label:"Stake",columnType:p.stake,buildCell:t.components[5],alignment:$e.end},{label:"Vote Participation",columnType:p.voteParticipation,buildCell:t.components[6],alignment:$e.end}]}),vn=t=>o.jsx(fo,{columns:[{label:"Public Key",columnType:p.publicKey,buildCell:t.components[0]},{label:"Name",columnType:p.name,buildCell:t.components[1]},{label:"Company",columnType:p.companyName,buildCell:t.components[2]},{label:"Website",columnType:p.companyWebSite,buildCell:t.components[3]},{label:"Vote Participation",columnType:p.voteParticipation,buildCell:t.components[4],alignment:$e.end}]}),mt=t=>{const{numElements:e=20}=t;return o.jsx(b.Provider,{value:Array.from(go(e)),children:o.jsx(Nn,{components:[k,k,k,k,k,k,k]})})},yo=t=>{const{numElements:e=20}=t;return o.jsx(b.Provider,{value:Array.from(go(e)),children:o.jsx(vn,{components:[k,k,k,k,k]})})},ht=()=>o.jsx(Nn,{components:[kn,vc,fn,wn,gn,_c,xn]}),yt=()=>o.jsx(vn,{components:[kn,fn,wn,gn,xn]});function So(t,e){const[n]=t,[a]=e;return ft(n.publicKey.data,a.publicKey.data)}function Tc(t,e){const[n]=t,[a]=e;return n.name===null&&a.name===null?0:n.name===null?1:a.name===null?-1:n.name.localeCompare(a.name)}function Pc(t,e){const[n]=t,[a]=e,r=n.companyDetails?.name??null,c=a.companyDetails?.name??null;return r===null&&c===null?0:r===null?1:c===null?-1:r.localeCompare(c)}function Bc(t,e){const[n]=t,[a]=e,r=n.companyDetails?.website??null,c=a.companyDetails?.website??null;return r===null&&c===null?0:r===null?1:c===null?-1:r.localeCompare(c)}function Vc(t,e){const[,n]=t,[,a]=e;return n.voteParticipation-a.voteParticipation}function Ic(t,e){const[,,,n]=t,[,,,a]=e,r=n?.account.address,c=a?.account.address;return!r&&!c?0:r?c?ft(r,c):-1:1}function jc(t,e){const[,,n]=t,[,,a]=e,r=n?.stakeTableEntry.stakeAmount??0n,c=a?.stakeTableEntry.stakeAmount??0n;return Number(r-c)}function Rc(t,e){const[,,,n]=t,[,,,a]=e,r=n?.commission.value??0,c=a?.commission.value??0;return Number(r-c)}function Wc(t,e,n,a){return t.map((r,c)=>[r,e[c]??{totalVotes:0,voteParticipation:0},n.get(r.publicKey.toString())??null,a.get(r.publicKey.toString())??null])}function Dc(t){switch(t){case p.publicKey:return So;case p.name:return Tc;case p.companyName:return Pc;case p.companyWebSite:return Bc;case p.voteParticipation:return Vc;case p.stake:return jc;case p.address:return Ic;case p.commission:return Rc;default:return So}}function Ac(t,e){switch(e){case Qe.asc:return t;case Qe.desc:return(n,a)=>-t(n,a);default:return t}}function Lc(t,e,n){const a=Ac(Dc(e),n);return t.sort(a)}const St=s.createContext(0n),Ct=()=>{const[t,e]=s.useState({sortColumn:p.voteParticipation,sortDir:Qe.asc}),n=s.useContext(Ze),a=s.useContext(se),r=s.useContext(b),c=s.useContext(ke),l=s.useContext(We),d=s.useContext(De);if(n)return o.jsx(ko,{});if((!r||r instanceof Array&&r.length<=0)&&a)return o.jsx(mt,{});const u=bt((_n,Tn)=>_n+Tn.stake,0n,d.values()),C=Wc(r,c,l,d),{sortColumn:q,sortDir:Fe}=t,le=Lc(C,q,Fe);return u===0n?o.jsx(St.Provider,{value:u,children:o.jsx(no.Provider,{value:t,children:o.jsx(ao.Provider,{value:e,children:o.jsx(b.Provider,{value:le,children:o.jsx(yt,{})})})})}):o.jsx(St.Provider,{value:u,children:o.jsx(no.Provider,{value:t,children:o.jsx(ao.Provider,{value:e,children:o.jsx(b.Provider,{value:le,children:o.jsx(ht,{})})})})})};try{mt.displayName="NodesSummaryWithStakeDataTablePlaceholder",mt.__docgenInfo={description:`NodesSummaryDataTablePlaceholder is a component that renders a placeholder
version of the Node Summary Data Table.`,displayName:"NodesSummaryWithStakeDataTablePlaceholder",props:{numElements:{defaultValue:null,description:"",name:"numElements",required:!1,type:{name:"number"}}}}}catch{}try{yo.displayName="NodesSummaryDataTablePlaceholder",yo.__docgenInfo={description:"",displayName:"NodesSummaryDataTablePlaceholder",props:{numElements:{defaultValue:null,description:"",name:"numElements",required:!1,type:{name:"number"}}}}}catch{}try{ht.displayName="NodesSummaryWithStakeDataTablePopulated",ht.__docgenInfo={description:`NodesSummaryDataTablePopulated is a component that renders the populated
version of the Node Summary Data Table.`,displayName:"NodesSummaryWithStakeDataTablePopulated",props:{}}}catch{}try{yt.displayName="NodesSummaryDataTablePopulated",yt.__docgenInfo={description:"",displayName:"NodesSummaryDataTablePopulated",props:{}}}catch{}try{Ct.displayName="NodesSummaryDataTable",Ct.__docgenInfo={description:`NodeSummaryDataTable handles the display of the Node Summary Data Table.
Additionally, it handles the sorting of the data via the manipulation of the
headers of the table data.`,displayName:"NodesSummaryDataTable",props:{}}}catch{}export{We as C,Ct as N,uo as P,De as a,mo as b,ho as c};
