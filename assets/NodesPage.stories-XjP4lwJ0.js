var ko=Object.defineProperty;var xo=(t,e,o)=>e in t?ko(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var s=(t,e,o)=>xo(t,typeof e!="symbol"?e+"":e,o);import{j as r}from"./jsx-runtime-BlAj40OV.js";import{P as No}from"./NowProvider-D4xjbY-7.js";import{O as Bo}from"./PathResolverProvider-Xv58eOQd.js";import{y as C,G as To,H as vo,j as he,I as O,J as vt,h as Pt,g as Rt,K as It,L as Dt,M as Po,O as Ro,P as Io,z as ft,A as Do}from"./CircularBuffer-Ck9XSvBT.js";import{C as _o,D as Vo,G as jo,H as Lo,S as B,I as Ao,J as Ho,K as Eo,M as Wo,F as Mo,k as qo}from"./StoryBookPathResolver-C3yv22_X.js";import{A as I}from"./AsyncIterableResolver-CCfvgvmz.js";import{u as D,U as k,P as bt,A as Oo,B as Go,n as ye,g as Ko,C as Fo}from"./functional_async-mClN8vtW.js";import{R as c}from"./index-Cs7sjTYM.js";import{L as zo,d as Uo,e as Jo}from"./RollUpDetailDataTable-DZ8P2DZ-.js";import{D as w,L as E}from"./LoadingProvider-Cf52ybPZ.js";import"./DateTimeFormattersProvider-D6Gp1Kbv.js";import"./LocaleProvider-B0_30C1H.js";import{O as Zo,P as Qo}from"./NavDrawerStateProvider-HpepdHmi.js";import"./NumberFormattersProvider-C_HUJLoM.js";import{N as Yo,a as Xo,W as $o,P as er,D as tr,b as or}from"./WorldMapDotsPopulationResolver-Dea-CUPh.js";import{T as l,I as g,a as h,N as rr,d as sr,e as nr,s as Le,A as ar,h as cr,j as ir,x as S,y as f,p as _t,r as lr,b as dr,f as ur,B as pr}from"./string-BRHtp8nH.js";import"./base64-B9OJSIzr.js";import{t as Vt}from"./TaggedBase64-kwVVsu1o.js";import{n as jt}from"./array_buffer-CXlRbd7o.js";import{z as mr,m as G,g as Lt,h as hr,j as Ae,i as yr}from"./functional-CfXZTWhy.js";import"./monetary_value-BoyvFl18.js";import"./FetchError-nmVtBWex.js";import"./NotFoundError-CI-iUI-y.js";import{n as At}from"./url-YgTINc9c.js";import{w as Ht,L as Cr,e as fr,p as St,f as br}from"./constants-BINQQZyf.js";import{W as Sr}from"./WorldMapDotsFullResolution-ki2WQQ9y.js";import"./AffineTransform-DiV9SxhF.js";import{a as gr}from"./higher_order-DnPEgWEz.js";import{a as M,C as T}from"./Card-0izmXN96.js";import{a as ae,b as He}from"./PieChart-jaVzY5uC.js";import{H as wr}from"./Heading2-DdOe_FXR.js";import{T as u}from"./Text-BU7JBOLk.js";import{F as kr}from"./Footer-DtxsyFUR.js";import{H as xr}from"./Header-DV0ijJPt.js";import{N as j}from"./NumberText-C9hw7QuG.js";import{S as fe,D as Nr,a as Br,c as _,b as Tr}from"./DataTable-DzNo7UA-.js";import"./ByteSizeText-CA_8gXuD.js";import{P as vr}from"./TransactionsPerSecondText-CTisXtUd.js";import"./CopyHex-Dqhihci1.js";import"./DateTimeText-H0_MZ3-7.js";import{F as Pr}from"./FullHexText-Cw4-htJY.js";import"./FullTaggedBase64Text-DfQ9QmRF.js";import"./HexText-CrTnOQnq.js";import"./MoneyText-DPYc23fJ.js";import"./RelativeTimeText-DCz-EhHt.js";import{T as Rr}from"./TaggedBase64Text-CGXJT8bt.js";import"./TimeText-iZ8ovT8K.js";import{C as Ir}from"./CopyTaggedBase64-CYfLAWz6.js";import{L as Dr}from"./Link-DkuKr0oH.js";import{B as _r,c as gt}from"./BlockSizeHistogram-Bw7NibGq.js";import"./ProvideAsyncStates-DyGIG4hw.js";import"./PromiseResolver-CXCa4yLm.js";import"./AnchorButton-QgyBwLin.js";import"./Button-Cc3XS5nv.js";import"./IconAnchorButton-CLyCnfGb.js";import"./IconButton-C8CRMxou.js";import"./LabeledAnchorButton-Ccf2RRuc.js";import"./LabeledButton-Bzsgrhnz.js";import"./Heading1-DEalHnHf.js";import"./SummaryTabledLabeledValue-Cwjroine.js";import{L as Vr,c as jr,d as Lr}from"./RollUpsSummaryDataTable-Dn2wRyqR.js";import"./TabledLabeledValue-6LvxwEmX.js";import"./CircularProgressIndicator-CmmjYXfy.js";import"./ContainerLoading-bH1zzl06.js";import"./NavBar-BFWD_4mN.js";import"./SocialMediaLinks-Bm4ZO-q5.js";import"./BlockDetailContent-0MPju6LG.js";import"./HexDump-DDjXVakO.js";import"./RollUpSimple-CaQPDQJU.js";import"./TransactionDetailContent-BnzSZS9Q.js";import"./TransactionSummaryDataTable-LD6s3dNN.js";import"./typography-BIj1kvXp.js";import"./ArrowLeft-DLfXyVlM.js";import"./ArrowRight-t3TwXnAd.js";import"./CheckCircle-YNmVoImJ.js";import"./InfoCircle-DczreSu1.js";import"./ChevronUp-kyB5007e.js";import"./TwitterIcon-DgUjAjdP.js";import"./EspressoLogo-DwD84bVM.js";import"./EspressoLogoAndTitle-2fto-X4z.js";import"./Menu-fK84igno.js";import"./SVGIconBase-eCXHSPnQ.js";import"./SearchGlass-REp8lC9G.js";import"./sleep-CW-vxfof.js";import"./data-CgOROfg9.js";import"./_commonjsHelpers-BosuxZz1.js";import"./SVGToolTip-VtYDiDwI.js";import"./SVGPathBuilder-XZx_HA2Y.js";/* empty css                */import"./CopyButton-EFpwbuCy.js";import"./Copy-DeuPxRNR.js";/* empty css               */import"./index-Dk74W0Oi.js";class Ar{constructor(e){s(this,"publishQueue");s(this,"pollBlocked");s(this,"publishBlocked");s(this,"capacity");s(this,"closed",!1);this.publishQueue=C(Math.max(2,e),vo.throwMissingElement,To.throw);const o=he();this.pollBlocked=o,this.publishBlocked=o,o.complete(),this.capacity=e-1}get isClosed(){return this.closed}close(){if(this.closed)throw new O;this.closed=!0}async drain(){for(;this.publishQueue.length>0;)this.publishQueue.get()}async publish(e){if(this.closed)throw new O;if(this.publishQueue.length>=this.capacity){if(this.publishBlocked.isCompleted){const o=he();this.publishBlocked=o,await o.promise}return await this.publishBlocked.promise,this.publish(e)}this.publishQueue.put(e),this.pollBlocked.isCompleted||this.pollBlocked.complete()}async poll(){if(this.publishQueue.length<=0){if(this.isClosed)throw new O;if(this.pollBlocked.isCompleted){const o=he();this.pollBlocked=o}return await this.pollBlocked.promise,this.poll()}const e=this.publishQueue.get();return this.publishBlocked.isCompleted||this.publishBlocked.complete(),e}[Symbol.asyncIterator](){return new Hr(this)}}class Hr{constructor(e){s(this,"channel");this.channel=e}async next(){try{return{done:!1,value:await this.channel.poll()}}catch(e){if(e instanceof O)return{done:!0,value:void 0};throw e}}}function m(t){return new Ar(t)}class Er{constructor(e,o){this.sink=e,this.converter=o,this.sink=e,this.converter=o}async send(e){await this.sink.send(this.converter.convert(e))}}function K(t,e){return new Er(t,e)}const Et=c.createContext(D()),be=t=>{const e=c.useContext(Et);return r.jsx(I,{asyncIterable:e,children:t.children})};try{be.displayName="CountriesPieChartStreamConsumer",be.__docgenInfo={description:"",displayName:"CountriesPieChartStreamConsumer",props:{}}}catch{}const Wt=c.createContext(D()),Se=t=>{const e=c.useContext(Wt);return r.jsx(I,{asyncIterable:e,children:t.children})};try{Se.displayName="NetworkTypesPieChartStreamConsumer",Se.__docgenInfo={description:"",displayName:"NetworkTypesPieChartStreamConsumer",props:{}}}catch{}const Mt=c.createContext(D()),ge=t=>{const e=c.useContext(Mt);return r.jsx(I,{asyncIterable:e,children:t.children})};try{ge.displayName="NodeTypesPieChartStreamConsumer",ge.__docgenInfo={description:"",displayName:"NodeTypesPieChartStreamConsumer",props:{}}}catch{}var y=(t=>(t.publicKey="publicKey",t.name="name",t.address="address",t.companyName="companyName",t.companyWebSite="companyWebSite",t.location="location",t.stake="stake",t.uptime="uptime",t.voteParticipation="voteParticipation",t))(y||{});const qt=c.createContext(D()),Ot=c.createContext(D()),Gt=c.createContext([]),we=t=>{const e=c.useContext(w);return r.jsx(Gt.Provider,{value:e??[],children:t.children})},ke=t=>{const e=c.useContext(Ot);return r.jsx(I,{asyncIterable:e,children:r.jsx(we,{children:t.children})})},xe=t=>{const e=c.useContext(qt);return r.jsx(I,{asyncIterable:e,children:t.children})};try{we.displayName="VotersParticipationStatesProvider",we.__docgenInfo={description:"",displayName:"VotersParticipationStatesProvider",props:{}}}catch{}try{ke.displayName="VotersParticipationStatsConsumer",ke.__docgenInfo={description:"",displayName:"VotersParticipationStatsConsumer",props:{}}}catch{}try{xe.displayName="NodeSummaryStreamConsumer",xe.__docgenInfo={description:"",displayName:"NodeSummaryStreamConsumer",props:{}}}catch{}const Kt=c.createContext(D()),Ne=t=>{const e=c.useContext(Kt);return r.jsx(I,{asyncIterable:e,children:t.children})};try{Ne.displayName="OperatingSystemPieChartStreamConsumer",Ne.__docgenInfo={description:"",displayName:"OperatingSystemPieChartStreamConsumer",props:{}}}catch{}class x{}const Ft="SubscribeNodeIdentity";class Ee extends x{valueOf(){return Ft}}const zt="SubscribeLatestBlock";class We extends x{valueOf(){return zt}}const Ut="SubscribeVoters";class Me extends x{valueOf(){return Ut}}const Jt="RequestNodeIdentitySnapshot";class qe extends x{valueOf(){return Jt}}const Zt="RequestBlocksSnapshot";class Oe extends x{valueOf(){return Zt}}const Qt="RequestHistogramSnapshot";class Ge extends x{valueOf(){return Qt}}const Yt="RequestVotersSnapshot";class Ke extends x{valueOf(){return Yt}}class Xt{}const $t="Connect";class Fe extends Xt{valueOf(){return $t}}const eo="Close";class ze extends Xt{valueOf(){return eo}}class Wr{convert(e){return e.valueOf()}}class Mr{convert(e){if(typeof e!="string")throw new g(typeof e,"string");switch(e){case Ft:return new Ee;case zt:return new We;case Ut:return new Me;case Jt:return new qe;case Zt:return new Oe;case Qt:return new Ge;case Yt:return new Ke;default:throw new g(e,"CappuccinoNodeValidatorRequest")}}}class qr extends l{constructor(){super(...arguments);s(this,"encoder",new Wr);s(this,"decoder",new Mr)}}const to=new qr;class Or{convert(e){return e.valueOf()}}class Gr{convert(e){if(typeof e!="string")throw new g(typeof e,"string");switch(e){case $t:return new Fe;case eo:return new ze;default:throw new g(e,"CappuccinoNodeValidatorRequest")}}}class Kr extends l{constructor(){super(...arguments);s(this,"encoder",new Or);s(this,"decoder",new Gr)}}const oo=new Kr;class ro{}const F="LifeCycleRequest";class W extends ro{constructor(o){super();s(this,"request");this.request=o}toJson(){return Ue.encode(this)}}class Fr{convert(e){return{[F]:oo.encode(e.request)}}}class zr{convert(e){return h(e,F),new W(oo.decode(e[F]))}}class Ur extends l{constructor(){super(...arguments);s(this,"encoder",new Fr);s(this,"decoder",new zr)}}const Ue=new Ur,z="NodeValidatorRequest";class ce extends ro{constructor(o){super();s(this,"request");this.request=o}toJson(){return Je.encode(this)}}class Jr{convert(e){return{[z]:to.encode(e.request)}}}class Zr{convert(e){return h(e,z),new ce(to.decode(e[z]))}}class Qr extends l{constructor(){super(...arguments);s(this,"encoder",new Jr);s(this,"decoder",new Zr)}}const Je=new Qr;class Yr{convert(e){return new W(e)}}const Xr=new Yr;class $r{convert(e){return new ce(e)}}const es=new $r;class N{}const U="BlocksSnapshot";class ie extends N{constructor(o){super();s(this,"blocks");this.blocks=o}toJSON(){return Ze.encode(this)}}class ts{convert(e){h(e,U);const o=e[U];return new ie(vt.decode(o))}}class os{convert(e){return{[U]:vt.encode(e.blocks)}}}class rs extends l{constructor(){super(...arguments);s(this,"encoder",new os);s(this,"decoder",new ts)}}const Ze=new rs,J="HistogramSnapshot";class L extends N{constructor(o){super();s(this,"histograms");this.histograms=o}toJSON(){return Qe.encode(this)}}class ss{convert(e){return h(e,J),new L(Pt.decode(e[J]))}}class ns{convert(e){return{[J]:Pt.encode(e.histograms)}}}class as extends l{constructor(){super(...arguments);s(this,"encoder",new ns);s(this,"decoder",new ss)}}const Qe=new as,Z="LatestBlock";class P extends N{constructor(o){super();s(this,"latestBlock");this.latestBlock=o}toJSON(){return Ye.encode(this)}}class cs{convert(e){return h(e,Z),new P(Rt.decode(e[Z]))}}class is{convert(e){return{[Z]:Rt.encode(e.latestBlock)}}}class ls extends l{constructor(){super(...arguments);s(this,"encoder",new is);s(this,"decoder",new cs)}}const Ye=new ls;class so{constructor(e,o){s(this,"coords");s(this,"country");this.coords=e,this.country=o}toJSON(){return Be.encode(this)}}class ds{convert(e){return{coords:Ht.encode(e.coords),country:Le.encode(e.country)}}}class us{convert(e){return h(e,"coords","country"),new so(Ht.decode(e.coords),Le.decode(e.country))}}class ps extends l{constructor(){super(...arguments);s(this,"encoder",new ds);s(this,"decoder",new us)}}const Be=new ps,no=new rr(new sr(Be),new nr(Be));class ao{constructor(e,o,n,a,i,d,p,b,V){s(this,"publicKey");s(this,"name");s(this,"walletAddress");s(this,"publicURL");s(this,"company");s(this,"location");s(this,"operatingSystem");s(this,"nodeType");s(this,"networkType");this.publicKey=e,this.name=o,this.walletAddress=n,this.publicURL=a,this.company=i,this.location=d,this.operatingSystem=p,this.nodeType=b,this.networkType=V}toJSON(){return A.encode(this)}}class ms{convert(e){return{public_key:Vt.encode(e.publicKey),name:S.encode(e.name),wallet_address:jt.encode(e.walletAddress),public_url:At.encode(e.publicURL),company:S.encode(e.company),location:no.encode(e.location),operating_system:S.encode(e.operatingSystem),node_type:S.encode(e.nodeType),network_type:S.encode(e.networkType)}}}class hs{convert(e){return h(e,"public_key","name","wallet_address","public_url","company","location","operating_system","node_type","network_type"),new ao(Vt.decode(e.public_key),S.decode(e.name),jt.decode(e.wallet_address),At.decode(e.public_url),S.decode(e.company),no.decode(e.location),S.decode(e.operating_system),S.decode(e.node_type),S.decode(e.network_type))}}class ys extends l{constructor(){super(...arguments);s(this,"encoder",new ms);s(this,"decoder",new hs)}}const A=new ys,co=new ar(new cr(A),new ir(A)),Q="LatestNodeIdentity";class Xe extends N{constructor(o){super();s(this,"nodeIdentity");this.nodeIdentity=o}toJSON(){return $e.encode(this)}}class Cs{convert(e){return h(e,Q),new Xe(A.decode(e[Q]))}}class fs{convert(e){return{[Q]:A.encode(e.nodeIdentity)}}}class bs extends l{constructor(){super(...arguments);s(this,"encoder",new fs);s(this,"decoder",new Cs)}}const $e=new bs,Y="LatestVoters";class le extends N{constructor(o){super();s(this,"latestVoter");this.latestVoter=o}toJSON(){return et.encode(this)}}class Ss{convert(e){return h(e,Y),new le(It.decode(e[Y]))}}class gs{convert(e){return{[Y]:It.encode(e.latestVoter)}}}class ws extends l{constructor(){super(...arguments);s(this,"encoder",new gs);s(this,"decoder",new Ss)}}const et=new ws,X="NodeIdentitySnapshot";class H extends N{constructor(o){super();s(this,"nodes");this.nodes=o}toJSON(){return tt.encode(this)}}class ks{convert(e){h(e,X);const o=e[X];return new H(co.decode(o))}}class xs{convert(e){return{[X]:co.encode(e.nodes)}}}class Ns extends l{constructor(){super(...arguments);s(this,"encoder",new xs);s(this,"decoder",new ks)}}const tt=new Ns,$="VotersSnapshot";class de extends N{constructor(o){super();s(this,"voters");this.voters=o}toJSON(){return ot.encode(this)}}class Bs{convert(e){h(e,$);const o=e[$];return new de(Dt.decode(o))}}class Ts{convert(e){return{[$]:Dt.encode(e.voters)}}}class vs extends l{constructor(){super(...arguments);s(this,"encoder",new Ts);s(this,"decoder",new Bs)}}const ot=new vs;class Ps{convert(e){if(f(e,U))return Ze.decode(e);if(f(e,J))return Qe.decode(e);if(f(e,Z))return Ye.decode(e);if(f(e,Q))return $e.decode(e);if(f(e,Y))return et.decode(e);if(f(e,X))return tt.decode(e);if(f(e,$))return ot.decode(e);throw new k}}class Rs{convert(e){if(e instanceof ie)return Ze.encode(e);if(e instanceof L)return Qe.encode(e);if(e instanceof P)return Ye.encode(e);if(e instanceof Xe)return $e.encode(e);if(e instanceof le)return et.encode(e);if(e instanceof H)return tt.encode(e);if(e instanceof de)return ot.encode(e);throw new k}}class Is extends l{constructor(){super(...arguments);s(this,"encoder",new Rs);s(this,"decoder",new Ps)}}const io=new Is;class rt{}const ee="ConnectionClosed";class st extends rt{toJSON(){return nt.encode(this)}}class Ds{convert(e){if(typeof e!="string")throw new g(typeof e,"string");if(e!==ee)throw new g(e,ee);return new st}}class _s{convert(){return ee}}class Vs extends l{constructor(){super(...arguments);s(this,"encoder",new _s);s(this,"decoder",new Ds)}}const nt=new Vs,te="ConnectionConnecting";class at extends rt{toJSON(){return ct.encode(this)}}class js{convert(e){if(typeof e!="string")throw new g(typeof e,"string");if(e!==te)throw new g(e,te);return new at}}class Ls{convert(){return te}}class As extends l{constructor(){super(...arguments);s(this,"encoder",new Ls);s(this,"decoder",new js)}}const ct=new As,oe="ConnectionOpened";class it extends rt{toJSON(){return lt.encode(this)}}class Hs{convert(e){if(typeof e!="string")throw new g(typeof e,"string");if(e!==oe)throw new g(e,oe);return new it}}class Es{convert(){return oe}}class Ws extends l{constructor(){super(...arguments);s(this,"encoder",new Es);s(this,"decoder",new Hs)}}const lt=new Ws;class Ms{convert(e){if(e===oe)return lt.decode(e);if(e===ee)return nt.decode(e);if(e===te)return ct.decode(e);throw new k}}class qs{convert(e){if(e instanceof it)return lt.encode(e);if(e instanceof st)return nt.encode(e);if(e instanceof at)return ct.encode(e);throw new k}}class Os extends l{constructor(){super(...arguments);s(this,"encoder",new qs);s(this,"decoder",new Ms)}}const dt=new Os;class ut{}const re="NodeValidatorResponse";class ue extends ut{constructor(o){super();s(this,"response");this.response=o}toJson(){return pt.encode(this)}}class Gs{convert(e){return{[re]:io.encode(e.response)}}}class Ks{convert(e){h(e,re);const o=e[re];return new ue(io.decode(o))}}class Fs extends l{constructor(){super(...arguments);s(this,"encoder",new Gs);s(this,"decoder",new Ks)}}const pt=new Fs;class mt extends ut{constructor(o){super();s(this,"response");this.response=o}toJson(){return dt.encode(this)}}const se="LifeCycleResponse";class zs{convert(e){return{[se]:dt.encode(e.response)}}}class Us{convert(e){return h(e,se),new mt(dt.decode(e[se]))}}class Js extends l{constructor(){super(...arguments);s(this,"encoder",new zs);s(this,"decoder",new Us)}}const lo=new Js,ne="ErrorResponse";class uo extends ut{constructor(o){super();s(this,"error");this.error=o}toJson(){return ht.encode(this)}}class Zs{convert(e){return{[ne]:_t.encode(e.error)}}}class Qs{convert(e){return h(e,ne),new uo(_t.decode(e[ne]))}}class Ys extends l{constructor(){super(...arguments);s(this,"encoder",new Zs);s(this,"decoder",new Qs)}}const ht=new Ys;class Xs{convert(e){return new ue(e)}}const $s=new Xs;class en{convert(e){return new mt(e)}}const tn=new en;class on{constructor(e){s(this,"channel");this.channel=e}async send(e){await this.channel.publish(e)}}function wt(t){return new on(t)}function Ce(t){return new Do(t.hash,t.height,t.time,t.numTransactions,t.proposer,t.proposer,t.size,t.fees)}function kt(t){return new ao(t.pubkey,t.name,t.address,null,t.company.name,new so(new Cr(new fr(new St(t.location.coords[0])),new br(new St(t.location.coords[1]))),t.location.country),t.operatingSystem,t.nodeType,t.networkType)}class rn{constructor(e,o){s(this,"responseStream");s(this,"requestStream");s(this,"lifecycleResponseSink");s(this,"nodeValidatorResponseSink");s(this,"prng",new bt(Oo()));s(this,"latestBlock",Ce(Go()));s(this,"latestBlocks",C(50));s(this,"latestVoters",C(50));s(this,"histogramBlockTimeData",C(50));s(this,"histogramBlockSizeData",C(50));s(this,"histogramBlockTransactionData",C(50));s(this,"histogramBlockHeightData",C(50));s(this,"isConnected",!1);s(this,"isSubscribedToLatestBlock",!1);s(this,"isSubscribedToVoters",!1);this.requestStream=e,this.responseStream=o,this.lifecycleResponseSink=K(wt(o),tn),this.nodeValidatorResponseSink=K(wt(o),$s)}get stream(){return this.responseStream}async send(e){await this.requestStream.publish(e)}generateVotersFromBlockDetail(e){const o=new bt(e.time.valueOf()),n=ye.length,a=Math.ceil(n/16),i=new Uint16Array(o.fillBytes(a*2));return new Po(Ro.lsb0,new Io(16,0),n,Array.from(i))}async updateBlockDetails(e){const o=this.latestBlock,n=(e.time.valueOf()-o.time.valueOf())/1e3,a=this.generateVotersFromBlockDetail(e);this.latestBlock=e,this.latestBlocks.put(e),this.latestVoters.put(a),this.histogramBlockTimeData.put(n),this.histogramBlockSizeData.put(e.size),this.histogramBlockTransactionData.put(e.numTransactions),this.histogramBlockHeightData.put(e.height),this.isConnected&&(this.isSubscribedToLatestBlock&&await this.nodeValidatorResponseSink.send(new P(e)),this.isSubscribedToVoters&&this.nodeValidatorResponseSink.send(new le(a)))}async initializeState(){for await(const e of Ko(this.prng))this.updateBlockDetails(Ce(e));await this.nodeValidatorResponseSink.send(new P(this.latestBlock)),await this.nodeValidatorResponseSink.send(new L(new ft(Array.from(this.histogramBlockTimeData.immutableIterable()),Array.from(this.histogramBlockSizeData.immutableIterable()),Array.from(this.histogramBlockTransactionData.immutableIterable()),Array.from(this.histogramBlockHeightData.immutableIterable())))),this.nodeValidatorResponseSink.send(new H(ye.map(kt)))}async startProcessing(){await this.initializeState(),this.handleRequests(),this.streamBlocks()}async handleRequests(){for await(const e of this.requestStream)await this.handleRequest(e)}async streamBlocks(){const e=this.latestBlock;for await(const o of Fo(this.prng,e.time.valueOf(),e.height)){const n=Ce(o);this.updateBlockDetails(n)}}async handleRequest(e){if(e instanceof W){try{await this.handleLifeCycleRequest(e.request)}catch(o){console.error("failed to handle life cycle request",e,o)}return}if(e instanceof ce){try{await this.handleNodeValidatorRequest(e.request)}catch(o){console.error("failed to handle node validator request",e,o)}return}console.error("unrecognized request type",e)}async handleLifeCycleRequest(e){if(e instanceof Fe){await this.handleConnect();return}if(e instanceof ze){await this.handleClose();return}}async handleNodeValidatorRequest(e){if(e instanceof We){await this.handleSubscribeLatestBlock();return}if(e instanceof Ee){await this.handleSubscribeNodeIdentity();return}if(e instanceof Me){await this.handleSubscribeVoters();return}if(e instanceof Oe){await this.handleRequestBlocksSnapshot();return}if(e instanceof Ge){await this.handleRequestHistogramSnapshot();return}if(e instanceof qe){await this.handleRequestNodeIdentitySnapshot();return}if(e instanceof Ke){await this.handleRequestVotersSnapshot();return}}async handleConnect(){if(this.isConnected)throw new Error("already connected to WebSocket");this.isConnected=!0,await this.lifecycleResponseSink.send(new at),await this.lifecycleResponseSink.send(new it)}async handleClose(){if(!this.isConnected)throw new Error("not connected to WebSocket");this.isConnected=!1,this.isSubscribedToLatestBlock=!1,this.isSubscribedToVoters=!1,await this.lifecycleResponseSink.send(new st)}async assertIsConnected(){if(!this.isConnected)throw new Error("not connected to WebSocket")}async handleSubscribeLatestBlock(){await this.assertIsConnected(),this.isSubscribedToLatestBlock=!0}async handleSubscribeNodeIdentity(){await this.assertIsConnected()}async handleSubscribeVoters(){await this.assertIsConnected(),this.isSubscribedToVoters=!0}async handleRequestBlocksSnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new ie(Array.from(this.latestBlocks.immutableIterable())))}async handleRequestHistogramSnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new L(new ft(Array.from(this.histogramBlockTimeData.immutableIterable()),Array.from(this.histogramBlockSizeData.immutableIterable()),Array.from(this.histogramBlockTransactionData.immutableIterable()),Array.from(this.histogramBlockHeightData.immutableIterable()))))}async handleRequestNodeIdentitySnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new H(ye.map(kt)))}async handleRequestVotersSnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new de(Array.from(this.latestVoters.immutableIterable())))}}const yt="WebSocketError";class sn extends pr{constructor(o,n=`websocket error: ${String(o)}`){super(n);s(this,"cause");this.cause=o,Object.freeze(this)}get code(){return yt}}class nn{convert(e){return h(e,"code","message"),dr(e,yt),new sn({},Le.decode(e.message))}}class an extends ur{}class cn extends l{constructor(){super(...arguments);s(this,"encoder",new an);s(this,"decoder",new nn)}}const ln=new cn;lr(yt,ln);function dn(t){return new Worker(""+new URL("node_validator_web_worker_api.js-CtxLn5eZ.js",import.meta.url).href,{name:t==null?void 0:t.name})}class un{convert(e){if(e instanceof ce)return Je.encode(e);if(e instanceof W)return Ue.encode(e);throw new k}}class pn{convert(e){if(f(e,z))return Je.decode(e);if(f(e,F))return Ue.decode(e);throw new k}}class mn extends l{constructor(){super(...arguments);s(this,"encoder",new un);s(this,"decoder",new pn)}}const hn=new mn;class yn{convert(e){if(e instanceof ue)return pt.encode(e);if(e instanceof mt)return lo.encode(e);if(e instanceof uo)return ht.encode(e);throw new k}}class Cn{convert(e){if(f(e,re))return pt.decode(e);if(f(e,se))return lo.decode(e);if(f(e,ne))return ht.decode(e);throw new k}}class fn extends l{constructor(){super(...arguments);s(this,"encoder",new yn);s(this,"decoder",new Cn)}}const bn=new fn;class Sn{constructor(e=m(1024),o=m(1024)){s(this,"requestChannel");s(this,"responseChannel");const n=new dn;this.requestChannel=e,this.responseChannel=o,n.addEventListener("message",this.handleMessage.bind(this)),n.addEventListener("messageerror",this.handleMessageError.bind(this)),n.addEventListener("error",this.handleError.bind(this)),gn(n,e)}get stream(){return this.responseChannel}async send(e){this.requestChannel.publish(e)}handleMessage(e){const o=bn.decode(e.data);this.responseChannel.publish(o)}handleMessageError(){}handleError(){}}async function gn(t,e){for await(const o of e)t.postMessage(hn.encode(o))}const wn=c.createContext(kn());function kn(){return typeof window<"u"&&"Worker"in window||typeof self<"u"&&"Worker"in self?new Sn:new rn(m(1024),m(1024))}async function Ct(t,e,o,n,a){await Promise.all([t.blockSizeHistogramStream.publish({blocks:Array.from(e.immutableIterable()),blockSize:Array.from(n.immutableIterable())}),t.blockTimeHistogramStream.publish({blocks:Array.from(e.immutableIterable()),blockTime:Array.from(o.immutableIterable())}),t.blockThroughputHistogramStream.publish({blocks:Array.from(e.immutableIterable()),blockThroughput:Array.from(a.immutableIterable())})])}function po(t){var e,o;return{publicKey:t.publicKey,name:t.name,address:t.walletAddress,companyDetails:{name:t.company,website:null},location:{coords:(e=t.location)!=null&&e.coords?[t.location.coords.lat.valueOf(),t.location.coords.lng.valueOf()]:null,country:((o=t.location)==null?void 0:o.country)??null}}}function xn(t,e){return t.value-e.value}function pe(t,e){const o=new Map;for(const n of t){const a=e(n);a!==null&&o.set(a,(o.get(a)??0)+1)}return Array.from(o.entries()).map(([n,a])=>({label:n,value:a})).sort(xn)}function mo(t){return pe(t,e=>e.operatingSystem)}function ho(t){return pe(t,e=>{var o;return((o=e.location)==null?void 0:o.country)??null})}function yo(t){return pe(t,e=>e.networkType)}function Co(t){return pe(t,e=>e.nodeType)}function fo(t,e){const o=Array.from(G(e,a=>Array.from(G(a,Number))));return t.map((a,i)=>{const p=G(o,me=>me[i])[Symbol.iterator](),[b,V]=Lt(([me,go],wo)=>[me+1,go+wo],[0,0],p);return{voteParticipation:V,totalVotes:b}})}function bo(t){const e=t[Symbol.iterator](),o=Lt((a,i)=>{const d=hr(a.keys(),p=>Ae(p,i.proposerID)===0)??i.proposerID;return a.set(d,(a.get(d)??0)+1),a},new Map,e),n=Array.from(o.entries()).sort((a,i)=>i[1]-a[1]);return Array.from(G(n,([a,i])=>({proposer:a,count:i})))}const v=50;function Nn(){const t=C(v+1),e=C(v+1),o=C(v+1),n=C(v+1),a=C(v+1),i=C(v+1);return{lastBlock:null,latestBlocks:t,blockHeightHistograms:e,blockTimeHistograms:o,blockSizeHistograms:n,blockThroughputHistograms:a,votersBitVecs:i,nodes:[]}}async function Bn(t,e,o){const n=t.lastBlock;t.lastBlock=o,t.latestBlocks.put(o.latestBlock),e.latestBlockStream.publish({height:o.latestBlock.height,time:o.latestBlock.time,size:o.latestBlock.size,transactions:o.latestBlock.numTransactions,proposer:o.latestBlock.proposerID}),t.blockHeightHistograms.put(o.latestBlock.height),t.blockSizeHistograms.put(o.latestBlock.size);const a=(o.latestBlock.time.valueOf()-((n==null?void 0:n.latestBlock.time.valueOf())??0))/1e3;t.blockTimeHistograms.put(a),t.blockThroughputHistograms.put(o.latestBlock.size/Math.max(1,a)),await Ct(e,t.blockHeightHistograms,t.blockTimeHistograms,t.blockSizeHistograms,t.blockThroughputHistograms),e.latestBlockProducers.publish(bo(t.latestBlocks.immutableIterable()))}async function Tn(t,e,o){var a,i;for(const d of o.blocks){const p=((a=t.lastBlock)==null?void 0:a.latestBlock)??null;t.lastBlock=new P(d),t.latestBlocks.put(d),t.blockHeightHistograms.put(d.height),t.blockSizeHistograms.put(d.size);const b=(d.time.valueOf()-((p==null?void 0:p.time.valueOf())??0))/1e3;t.blockTimeHistograms.put(b),t.blockThroughputHistograms.put(d.size/Math.max(1,b))}await Ct(e,t.blockHeightHistograms,t.blockTimeHistograms,t.blockSizeHistograms,t.blockThroughputHistograms);const n=((i=t.lastBlock)==null?void 0:i.latestBlock)??null;n!==null&&e.latestBlockStream.publish({height:n.height,time:n.time,size:n.size,transactions:n.numTransactions,proposer:n.proposerID}),e.latestBlockProducers.publish(bo(t.latestBlocks.immutableIterable()))}async function vn(t,e,o){for(const n of o.histograms.blockHeights)t.blockHeightHistograms.put(n);for(const n of o.histograms.blockTime)t.blockTimeHistograms.put(n);for(const n of o.histograms.blockSize)t.blockSizeHistograms.put(n);for(const n of mr(t.blockTimeHistograms.immutableIterable(),t.blockSizeHistograms.immutableIterable(),(a,i)=>(i??0)/Math.max(1,a??1)))t.blockThroughputHistograms.put(n);await Ct(e,t.blockHeightHistograms,t.blockTimeHistograms,t.blockSizeHistograms,t.blockThroughputHistograms)}async function Pn(t,e,o){t.nodes=o.nodes;const n=mo(t.nodes),a=ho(t.nodes),i=yo(t.nodes),d=Co(t.nodes),p=t.nodes.map(po);await Promise.all([e.nodesSummary.publish(p),e.nodeCoordinates.publish(p),e.pieChartCountries.publish(a),e.pieChartNetworkTypes.publish(i),e.pieChartNodeTypes.publish(d),e.pieChartOperatingSystems.publish(n)])}async function Rn(t,e,o){const n=t.nodes.findIndex(V=>V.publicKey.toString()===o.nodeIdentity.publicKey.toString());n<0?t.nodes.push(o.nodeIdentity):t.nodes[n]=o.nodeIdentity;const a=mo(t.nodes),i=ho(t.nodes),d=yo(t.nodes),p=Co(t.nodes),b=t.nodes.map(po);await Promise.all([e.nodesSummary.publish(b),e.nodeCoordinates.publish(b),e.pieChartCountries.publish(i),e.pieChartNetworkTypes.publish(d),e.pieChartNodeTypes.publish(p),e.pieChartOperatingSystems.publish(a)])}async function In(t,e,o){for(const a of o.voters)t.votersBitVecs.put(a);const n=fo(t.nodes,t.votersBitVecs.immutableIterable());await e.voters.publish(n)}async function Dn(t,e,o){t.votersBitVecs.put(o.latestVoter);const n=fo(t.nodes,t.votersBitVecs.immutableIterable());await e.voters.publish(n)}async function _n(t,e,o){if(o instanceof P)return Bn(t,e,o);if(o instanceof ie)return Tn(t,e,o);if(o instanceof L)return vn(t,e,o);if(o instanceof H)return Pn(t,e,o);if(o instanceof Xe)return Rn(t,e,o);if(o instanceof de)return In(t,e,o);if(o instanceof le)return Dn(t,e,o)}async function Vn(t,e){const o=Nn();for await(const n of e.stream)n instanceof ue&&await _n(o,t,n.response)}async function jn(t,e){await t.send(new Fe),await e.send(new We),await e.send(new Ee),await e.send(new Me),await e.send(new qe),await e.send(new Oe),await e.send(new Ge),await e.send(new Ke)}function Ln(){return{latestBlockStream:m(4),blockTimeHistogramStream:m(4),blockSizeHistogramStream:m(4),blockThroughputHistogramStream:m(4),nodesSummary:m(4),nodeCoordinates:m(4),pieChartCountries:m(4),pieChartNetworkTypes:m(4),pieChartNodeTypes:m(4),pieChartOperatingSystems:m(4),voters:m(4),latestBlockProducers:m(4)}}const Te=t=>{const e=c.useContext(wn),o=Ln();return c.useEffect(()=>{const n=K(e,es),a=K(e,Xr);return Vn(o,e),jn(a,n),()=>{e.send(new W(new ze))}}),r.jsx(_o.Provider,{value:o.latestBlockStream,children:r.jsx(zo.Provider,{value:o.latestBlockProducers,children:r.jsx(Vo.Provider,{value:o.blockTimeHistogramStream,children:r.jsx(jo.Provider,{value:o.blockSizeHistogramStream,children:r.jsx(Lo.Provider,{value:o.blockThroughputHistogramStream,children:r.jsx(qt.Provider,{value:o.nodesSummary,children:r.jsx(Kt.Provider,{value:o.pieChartOperatingSystems,children:r.jsx(Wt.Provider,{value:o.pieChartNetworkTypes,children:r.jsx(Mt.Provider,{value:o.pieChartNodeTypes,children:r.jsx(Et.Provider,{value:o.pieChartCountries,children:r.jsx(Yo.Provider,{value:o.nodeCoordinates,children:r.jsx(Ot.Provider,{value:o.voters,children:t.children})})})})})})})})})})})})};try{Te.displayName="ProvideCappuccinoNodeValidatorStreams",Te.__docgenInfo={description:"",displayName:"ProvideCappuccinoNodeValidatorStreams",props:{}}}catch{}const R=t=>r.jsx("div",{className:"pie-chart-section-title",children:r.jsx(wr,{children:t.children})});try{R.displayName="PieChartSectionTitle",R.__docgenInfo={description:`PieChartSectionTitle is a component that represents the title of a section
of a pie chart. This component is useful for labeling sections of a pie
chart.`,displayName:"PieChartSectionTitle",props:{}}}catch{}const An={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Åland Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthélemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia, Plurinational State of",BQ:"Bonaire, Sint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"Congo, Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"Côte d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cabo Verde",CW:"Curaçao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czechia",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia, Federated States of",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom of Great Britain and Northern Ireland",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran, Islamic Republic of",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao People's Democratic Republic",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova, Republic of",ME:"Montenegro",MF:"Saint Martin (French part)",MG:"Madagascar",MH:"Marshall Islands",MK:"North Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands, Kingdom of the",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestine, State of",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Réunion",RO:"Romania",RS:"Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena, Ascension and Tristan da Cunha",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten (Dutch part)",SY:"Syrian Arab Republic",SZ:"Eswatini",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Türkiye",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan, Province of China",TZ:"Tanzania, United Republic of",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States of America",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See",VC:"Saint Vincent and the Grenadines",VE:"Venezuela, Bolivarian Republic of",VG:"Virgin Islands (British)",VI:"Virgin Islands (U.S.)",VN:"Viet Nam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function Hn(t){return An[t]??t}function En(t){return{label:Hn(t.label),value:t.value}}const ve=()=>{const t=c.useContext(E),e=c.useContext(w);return t?r.jsx(r.Fragment,{}):r.jsxs(r.Fragment,{children:[r.jsx(R,{children:r.jsx(u,{text:"Countries"})}),r.jsx(ae,{values:e.map(En)})]})};try{ve.displayName="CountriesPieChart",ve.__docgenInfo={description:"",displayName:"CountriesPieChart",props:{}}}catch{}const Wn=t=>r.jsxs(r.Fragment,{children:[r.jsx(u,{text:t.label}),r.jsx(j,{number:t.value})]}),Pe=()=>{const t=c.useContext(E),e=c.useContext(w);return t?r.jsx(r.Fragment,{}):r.jsxs(He.Provider,{value:Wn,children:[r.jsx(R,{children:r.jsx(u,{text:"Network Types"})}),r.jsx(ae,{values:e})]})};try{Pe.displayName="NetworkTypesPieChart",Pe.__docgenInfo={description:"",displayName:"NetworkTypesPieChart",props:{}}}catch{}const Mn=t=>r.jsxs(r.Fragment,{children:[r.jsx(u,{text:t.label}),r.jsx(j,{number:t.value})]}),Re=()=>{const t=c.useContext(E),e=c.useContext(w);return t?r.jsx(r.Fragment,{}):r.jsxs(He.Provider,{value:Mn,children:[r.jsx(R,{children:r.jsx(u,{text:"Node Types"})}),r.jsx(ae,{values:e})]})};try{Re.displayName="NodeTypesPieChart",Re.__docgenInfo={description:"",displayName:"NodeTypesPieChart",props:{}}}catch{}const qn=()=>{const[t]=c.useContext(_);return t.name===null||t.name===""?r.jsx(u,{text:"-"}):r.jsx(u,{text:t.name})},On=()=>{const[t]=c.useContext(_);return r.jsx(Ir,{value:t.publicKey,children:r.jsx(Rr,{value:t.publicKey})})},Gn=()=>{const[t]=c.useContext(_);return t.address===null?r.jsx(u,{text:"-"}):r.jsx(Pr,{value:t.address})},Kn=()=>{const[t]=c.useContext(_);return t.companyDetails===null||t.companyDetails.name===null||t.companyDetails.name===""?r.jsx(u,{text:"-"}):r.jsx(u,{text:t.companyDetails.name})},Fn=()=>{var e;const[t]=c.useContext(_);return t.companyDetails===null||t.companyDetails.website===null||((e=t.companyDetails)==null?void 0:e.website)===""?r.jsx(u,{text:"-"}):t.companyDetails.website?r.jsx(Dr,{href:t.companyDetails.website,target:"_blank",children:r.jsx(u,{text:t.companyDetails.website})}):r.jsx(u,{text:"-"})},zn=()=>{const[,t]=c.useContext(_);return t===null?r.jsx(u,{text:"?"}):t.totalVotes===0?r.jsx(j,{number:t.voteParticipation}):r.jsxs(r.Fragment,{children:[r.jsx(j,{number:t.voteParticipation})," (",r.jsx(vr,{percentage:t.voteParticipation/t.totalVotes}),")"]})},So=t=>r.jsx(Tr,{columns:[{label:"Public Key",columnType:y.publicKey,buildCell:t.components[0]},{label:"Name",columnType:y.name,buildCell:t.components[1]},{label:"Address",columnType:y.address,buildCell:t.components[2]},{label:"Company",columnType:y.companyName,buildCell:t.components[3]},{label:"Website",columnType:y.companyWebSite,buildCell:t.components[4]},{label:"Vote Participation",columnType:y.voteParticipation,buildCell:t.components[5]}]}),Ie=t=>{const{numElements:e=20}=t;return r.jsx(w.Provider,{value:Array.from(yr(e)),children:r.jsx(So,{components:[B,B,B,B,B,B]})})},De=()=>r.jsx(So,{components:[On,qn,Gn,Kn,Fn,zn]});function xt(t,e){const[o]=t,[n]=e;return Ae(o.publicKey.data,n.publicKey.data)}function Un(t,e){const[o]=t,[n]=e;return o.name===null&&n.name===null?0:o.name===null?1:n.name===null?-1:o.name.localeCompare(n.name)}function Jn(t,e){const[o]=t,[n]=e;return o.address===null&&n.address===null?0:o.address===null?1:n.address===null?-1:Ae(o.address,n.address)}function Zn(t,e){const[o]=t,[n]=e;return o.companyDetails===null&&n.companyDetails===null?0:o.companyDetails===null?1:n.companyDetails===null?-1:o.companyDetails.name===null&&n.companyDetails.name===null?0:o.companyDetails.name===null?1:n.companyDetails.name===null?-1:o.companyDetails.name.localeCompare(n.companyDetails.name)}function Qn(t,e){const[o]=t,[n]=e;return o.companyDetails===null&&n.companyDetails===null?0:o.companyDetails===null?1:n.companyDetails===null?-1:o.companyDetails.website===null&&n.companyDetails.website===null?0:o.companyDetails.website===null?1:n.companyDetails.website===null?-1:o.companyDetails.website.localeCompare(n.companyDetails.website)}function Yn(t,e){const[,o]=t,[,n]=e;return o.voteParticipation-n.voteParticipation}function Xn(t,e){return t.map((o,n)=>[o,e[n]??{totalVotes:0,voteParticipation:0}])}function $n(t){switch(t){case y.publicKey:return xt;case y.name:return Un;case y.address:return Jn;case y.companyName:return Zn;case y.companyWebSite:return Qn;case y.voteParticipation:return Yn;default:return xt}}function ea(t,e){switch(e){case fe.asc:return t;case fe.desc:return(o,n)=>-t(o,n);default:return t}}function ta(t,e,o){const n=ea($n(e),o);return t.sort(n)}const _e=()=>{const[t,e]=c.useState({sortColumn:y.publicKey,sortDir:fe.asc}),o=c.useContext(E),n=c.useContext(w),a=c.useContext(Gt);if((!n||n instanceof Array&&n.length<=0)&&o)return r.jsx(Ie,{});const i=Xn(n,a),{sortColumn:d,sortDir:p}=t,b=ta(i,d,p);return r.jsx(Nr.Provider,{value:t,children:r.jsx(Br.Provider,{value:e,children:r.jsx(w.Provider,{value:b,children:r.jsx(De,{})})})})};try{Ie.displayName="NodesSummaryDataTablePlaceholder",Ie.__docgenInfo={description:`NodesSummaryDataTablePlaceholder is a component that renders a placeholder
version of the Node Summary Data Table.`,displayName:"NodesSummaryDataTablePlaceholder",props:{numElements:{defaultValue:null,description:"",name:"numElements",required:!1,type:{name:"number"}}}}}catch{}try{De.displayName="NodesSummaryDataTablePopulated",De.__docgenInfo={description:`NodesSummaryDataTablePopulated is a component that renders the populated
version of the Node Summary Data Table.`,displayName:"NodesSummaryDataTablePopulated",props:{}}}catch{}try{_e.displayName="NodesSummaryDataTable",_e.__docgenInfo={description:`NodeSummaryDataTable handles the display of the Node Summary Data Table.
Additionally, it handles the sorting of the data via the manipulation of the
headers of the table data.`,displayName:"NodesSummaryDataTable",props:{}}}catch{}const oa=t=>r.jsxs(r.Fragment,{children:[r.jsx(u,{text:t.label}),r.jsx(j,{number:t.value})]}),Ve=()=>{const t=c.useContext(E),e=c.useContext(w);return t?r.jsx(r.Fragment,{}):r.jsxs(He.Provider,{value:oa,children:[r.jsx(R,{children:r.jsx(u,{text:"Operating System"})}),r.jsx(ae,{values:e})]})};try{Ve.displayName="OperatingSystemPieChart",Ve.__docgenInfo={description:"",displayName:"OperatingSystemPieChart",props:{}}}catch{}const je=t=>r.jsxs(Zo,{page:Qo.nodes,children:[r.jsx(xr,{}),r.jsxs("div",{...t,className:gr(t.className,"node-validator-grid edge-margin"),children:[r.jsx(Ao,{children:r.jsx(Vr,{className:"latest-block"})}),r.jsx(Uo,{children:r.jsx(Jo,{className:"latest-block-producers"})}),r.jsx(M,{className:"block-time-histogram",children:r.jsx(Ho,{children:r.jsx(jr,{})})}),r.jsx(M,{className:"block-size-histogram",children:r.jsx(Eo,{children:r.jsx(_r,{})})}),r.jsx(M,{className:"throughput-histogram",children:r.jsx(Wo,{children:r.jsx(Lr,{})})}),r.jsx(T,{className:"cdn",children:r.jsxs(gt,{children:[r.jsxs("div",{children:[r.jsx("div",{children:r.jsx(u,{text:"CDN Status"})}),r.jsx("div",{children:r.jsx(u,{text:"Online"})})]}),r.jsx("div",{})]})}),r.jsxs(T,{className:"network-map",children:[r.jsxs(gt,{children:[r.jsx(u,{text:"Network Map"}),r.jsx("div",{})]}),r.jsx(Xo,{children:r.jsx($o,{children:r.jsxs(er,{children:[r.jsx(Sr,{}),r.jsx(tr,{children:r.jsx(or,{})})]})})})]}),r.jsx(T,{className:"countries",children:r.jsx(be,{children:r.jsx(ve,{})})}),r.jsx(T,{className:"network-types",children:r.jsx(Se,{children:r.jsx(Pe,{})})}),r.jsx(T,{className:"node-types",children:r.jsx(ge,{children:r.jsx(Re,{})})}),r.jsx(T,{className:"operating-systems",children:r.jsx(Ne,{children:r.jsx(Ve,{})})}),r.jsx(M,{className:"nodes",children:r.jsx(ke,{children:r.jsx(xe,{children:r.jsx(_e,{})})})})]}),r.jsx(kr,{})]});try{je.displayName="NodesPage",je.__docgenInfo={description:"NodesPage is a component that renders the Nodes page.",displayName:"NodesPage",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const ra=t=>r.jsxs(r.Fragment,{children:[r.jsx(Mo,{}),r.jsx(No,{children:r.jsx(Bo,{pathResolver:new qo,children:r.jsx(Te,{children:r.jsx(je,{...t})})})})]}),Kc={title:"Pages/Nodes",component:ra,parameters:{layout:"fullscreen"}},q={argTypes:{}};var Nt,Bt,Tt;q.parameters={...q.parameters,docs:{...(Nt=q.parameters)==null?void 0:Nt.docs,source:{originalSource:`{
  argTypes: {}
}`,...(Tt=(Bt=q.parameters)==null?void 0:Bt.docs)==null?void 0:Tt.source}}};const Fc=["Nodes"];export{q as Nodes,Fc as __namedExportsOrder,Kc as default};
