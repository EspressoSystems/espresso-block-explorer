var p=Object.defineProperty;var x=(r,e,n)=>e in r?p(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var o=(r,e,n)=>(x(r,typeof e!="symbol"?e+"":e,n),n);import{r as b,B as P,T as C,a as S,b as M,s as $,d as m,e as h,A as T,f as O,g as X}from"./string-X3Gg19gt.js";class l extends P{constructor(e="invalid input"){super(e),Object.freeze(this)}}class V{convert(e){return S(e,"code","message"),M(e,l.name),new l($.decode(e.message))}}class A extends m{}class J extends C{constructor(){super(...arguments);o(this,"encoder",new A);o(this,"decoder",new V)}}const U=new J;b(l.name,U);class i{constructor(e,n,t){o(this,"significantDigitsMultiplier");this.alpha3Code=e,this.code=n,this.significantDigits=t,this.alpha3Code=e,this.code=n,this.significantDigits=t,this.significantDigitsMultiplier=BigInt(10)**BigInt(this.significantDigits)}toJSON(){return g.encode(this)}}const y=new i("JPY",392,0),N=new i("GBP",826,2),D=new i("USD",840,2),k=new i("EUR",978,2),H=new i("XXX",999,2),I=new i("ETH",1001,18),f=new i("XBT",1002,8),E=new i("ESP",10001,18),R=[y,N,D,k,H,I,f,E],Y=new Map(R.map(r=>[r.alpha3Code,r]));class G{convert(e){if(typeof e!="string")throw new l("CurrencyCodeDecoder: expected string");if(e==="BTC")return f;const n=Y.get(e);if(n===void 0)throw new l(`CurrencyCodeDecoder: unknown currency: "${e}"`);return n}}class j{convert(e){return h(e,i),e.alpha3Code}}class z extends C{constructor(){super(...arguments);o(this,"decoder",new G);o(this,"encoder",new j)}}const g=new z;class c{constructor(e,n){this.currency=e,this.value=n,this.currency=e,this.value=n}static USD(e){return new c(D,BigInt(e))}static ETH(e){return new c(I,BigInt(e))}static ESP(e){return new c(E,BigInt(e))}static JPY(e){return new c(y,BigInt(e))}static BTC(e){return new c(f,BigInt(e))}toString(){return u.encode(this)}toJSON(){return u.encode(this)}}function K(r){return r==="."||r===","||r===" "}function W(r,e){let n=-1;const t=r.length;for(let s=0;s<t;s++)e(r[s])&&(n=s);return n}class q{parseCurrencyCode(e){return g.decode(e)}parseValue(e,n){let t=1n;n[0]==="-"&&(t=-1n,n=n.substring(1));const s=W(n,K);if(s===-1){const v=BigInt(n.replace(/\D/g,""))*e.significantDigitsMultiplier;return t*v}const a=n.substring(0,s).replace(/\D/g,""),d=n.substring(s+1).replace(/\D/g,""),w=BigInt(a)*e.significantDigitsMultiplier,B=BigInt(d)*10n**BigInt(e.significantDigits-d.length);return t*(w+B)}convert(e){if(typeof e!="string")throw new l("MonetaryValueDecoder: expected string");const n=e.indexOf(" ");if(n<=-1)throw new l("MonetaryValueDecoder: missing non-breaking space");const t=e.substring(0,n),s=e.substring(n+1);if(/^-?[\d .,]+$/.test(t)){const d=this.parseCurrencyCode(s);return new c(d,this.parseValue(d,t))}const a=this.parseCurrencyCode(t);return new c(a,this.parseValue(a,s))}}class F{convert(e){h(e,c);const n=e.value<0n?"-":"",t=e.value<0n?-e.value:e.value,s=t%e.currency.significantDigitsMultiplier,a=t/e.currency.significantDigitsMultiplier,d=String(a),w=String(s);return/^0+$/.test(w)?`${g.encode(e.currency)} ${n}${d}`:`${g.encode(e.currency)} ${n}${a}.${String(s).padStart(e.currency.significantDigits,"0")}`}}class L extends C{constructor(){super(...arguments);o(this,"decoder",new q);o(this,"encoder",new F)}}const u=new L,_=new T(new O(u),new X(u));export{l as I,c as M,g as c,_ as m};
