var C=Object.defineProperty;var b=(r,e,o)=>e in r?C(r,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[e]=o;var s=(r,e,o)=>(b(r,typeof e!="symbol"?e+"":e,o),o);class i extends Error{constructor(o,n,a=`expected object with key: "${n}", instead found ${o}`){super(a);s(this,"key");s(this,"haveType");this.haveType=o,this.key=n,Object.freeze(this)}toJSON(){return{code:i.name,message:this.message,have:this.haveType,key:this.key}}}class w{encode(e){return this.encoder.convert(e)}decode(e){return this.decoder.convert(e)}}class f extends w{}function X(r){return typeof r=="boolean"}function Y(r){return typeof r=="number"}function h(r){return typeof r=="string"}function x(r){return typeof r=="object"&&r!==null}function $(r){return r!==void 0}function j(r,e){return Array.isArray(r)&&r.every(e)}function k(r){return e=>j(e,r)}function Z(r,e,o){return x(r)&&e in r&&o(r[e])}function g(r,...e){if(typeof r!="object")throw new Error("expected object");if(r===null)throw new Error("received null");for(const o of e)if(!(o in r))throw new i("object",o)}function A(r,e){if(!h(r.code))throw new Error("code must be a string");if(r.code!==e)throw new Error(`expected code to be ${e}, got ${r.code}`)}function _(r,e){if(!h(r.type))throw new Error("type must be a string");if(r.type!==e)throw new Error(`expected type to be ${e}, got ${r.type}`)}class O{assert(){}}function T(){return new O}const N=T();function u(r,e){N.assert(r,e)}function S(r,e){u(typeof r===e,`type assertion failed: expected "${e}", received "${typeof r}"`)}function ee(r){u(r!==null,"expected a non-null value, received null")}function y(r,e){u(r instanceof e,`given value is not an instance of "${e.name}", specific type is "${typeof r=="object"&&r!==null?r.constructor.name:typeof r}"`)}class m extends Error{constructor(e){super(e)}get code(){return this.constructor.name}toJSON(){return v.convert(this)}}class I{convert(e){return y(e,m),{code:e.code,message:e.message}}}const v=new I;class d extends Error{constructor(o,n=`no codec found for: "${o}"`){super(n);s(this,"codec");this.codec=o,Object.freeze(this);debugger}toJSON(){return{code:t.encode(d.name),message:t.encode(this.message),codec:t.encode(this.codec)}}}const l=new Map;class B{convert(e){g(e,"code");const o=t.decode(e.code),n=l.get(o);if(!n)throw new d(o);return n.decode(e)}}class D{convert(e){const o=l.get(e.code);if(!o)throw new d(e.code);return o.encode(e)}}class J extends w{constructor(){super(...arguments);s(this,"encoder",new D);s(this,"decoder",new B)}}const re=new J;function R(r,e){l.set(r,e)}class c extends m{constructor(o,n,a=`invalid type: have "${o}", want "${n}"`){super(a);s(this,"have");s(this,"want");this.have=o,this.want=n,Object.freeze(this)}toJSON(){return p.encode(this)}}class U{convert(e){return g(e,"code","have","want","message"),A(e,c.name),new c(t.decode(e.have),t.decode(e.want),t.decode(e.message))}}class z{convert(e){return y(e,c),{...v.convert(e),have:t.encode(e.have),want:t.encode(e.want)}}}class M extends f{constructor(){super(...arguments);s(this,"encoder",new z);s(this,"decoder",new U)}}const p=new M;R(c.name,p);const q=k($);class F{convert(e){return e}}const E=new F;class K extends w{constructor(){super(...arguments);s(this,"encoder",E);s(this,"decoder",E)}}const oe=new K;class W{constructor(e){s(this,"itemCodec");this.itemCodec=e}convert(e){if(!q(e)){const o=typeof e=="object"&&e!==null?e.constructor.name:typeof e,n="array";throw new Error(`invalid array value: have "${o}", want "${n}"`)}return e.map(o=>this.itemCodec.decode(o))}}class G{constructor(e){s(this,"itemCodec");this.itemCodec=e}convert(e){return y(e,Array),e.map(o=>this.itemCodec.encode(o))}}class H extends f{constructor(o,n){super();s(this,"encoder");s(this,"decoder");this.encoder=n,this.decoder=o}}class L{convert(e){if(!h(e))throw new c(typeof e,"string");return e}}class P{convert(e){return S(e,"string"),e}}class Q extends f{constructor(){super(...arguments);s(this,"encoder",new P);s(this,"decoder",new L)}}const t=new Q;new H(new W(t),new G(t));export{H as A,m as B,w as C,c as I,d as N,f as T,g as a,A as b,v as c,I as d,y as e,W as f,G as g,_ as h,Y as i,S as j,h as k,u as l,re as m,ee as n,q as o,Z as p,$ as q,R as r,t as s,X as t,oe as u};
