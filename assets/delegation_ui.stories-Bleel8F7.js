import{R as a,j as t,r as Wo}from"./iframe-DemEOwrW.js";import{P as qo}from"./NowProvider-BKkkit-4.js";import{E as Ho,b as Uo}from"./environment_banner-DtOFLN9z.js";import{j as Ko,i as zo,k as $o,l as Qo,m as Go,n as Yo,o as Xo}from"./controls-Bcs-CX0P.js";import{E as ze,b as Gr,c as $e,L as Yr,a as Zo}from"./storybook-D3nkp23t.js";import{t as Xr,W as ea,o as ta,N as Wr,A as ra,P as oa}from"./CappuccinoHotShotQueryServiceAPIContext-B_HZl5Cb.js";import{B as aa}from"./explorer-jahf_NdK.js";import{U as S}from"./UnimplementedError-CdIPpzwU.js";import{g as sa}from"./blocks-dMo2Qi7E.js";import{c as na,n as Zr,P as ca}from"./nodes-DZb7HhK8.js";import{T as d,b as h,A as pe,j as ue,k as me,I as D,q as be,s as ee,w as qr,x as Hr,n as eo}from"./string-IJEBdhwx.js";import{s as u,h as I}from"./array_buffer-zIqOMhaQ.js";import{b as C}from"./url-B2hYd5U-.js";import"./MissingElementError-CbV3pOXz.js";import{n as M}from"./base64-KHURY7_E.js";import{m as te,z as ia,h as la,o as to}from"./functional-g5wG3Azh.js";import{v as da,D as J,C as ro}from"./LoadingProvider-BejkcYK5.js";import"./validator-B_MSyhUJ.js";import{t as oo,T as ao}from"./TaggedBase64-S1MhFE0d.js";import{b as Qe,d as pa}from"./assert-BI051aL8.js";import{I as ua,M as P}from"./monetary_value-B0ntaWrJ.js";import{A as so}from"./AsyncIterableResolver-664U4L-W.js";import{a as f,A as V,b as N,P as at}from"./ProvideAsyncStates-Db1R7BgE.js";import"./PromiseBuilder-BYgAa1hS.js";import{P as F}from"./PromiseResolver-C47IqB4y.js";import"./DataTable-CkNXTYzH.js";import{E as no}from"./espresso-Ds2kFF4i.js";import{an as ma,aB as ha,ao as xa,aC as _a,aD as ya,aE as fa,aq as T,as as Ir}from"./en_US-RFN65H63-DQBwGFjF.js";import{C as Ca}from"./DateTimeFormattersProvider-DNsYUpWM.js";import"./LocaleProvider-DbdD2VEs.js";import"./PagePathProvider-D4ag8Oi_.js";import"./NumberFormattersProvider-Cv2n8TIj.js";import"./PathResolverProvider-ZydTQwVi.js";import{E as ga}from"./EspressoLogoAndTitle-xFtXPUCr.js";import{T as c}from"./Text-BU7JBOLk.js";import{W as Ge}from"./WalletAddressText-Du9DNunY.js";import{a as g}from"./higher_order-B41vOjYd.js";import{S as Ye}from"./SVGIconBase-By2Dy568.js";import{W as Xe}from"./wallet_address-CV4WvpIi.js";import{M as W}from"./MoneyText-HSj2Dilp.js";import{P as E}from"./PercentageText-4ikhPh6V.js";import{N as co}from"./NumberText-O_tSvdK5.js";import{s as io}from"./sleep-CW-vxfof.js";import{M as va}from"./Close-CacwCBpC.js";import{E as Na}from"./esp_input-CZBfP86e.js";import"./preload-helper-PPVm8Dsz.js";import"./typography-D_5Kic_p.js";import"./FetchError-DX6me_FL.js";import"./NotFoundError-DPKbBn2w.js";import"./data-Cpeha0UW.js";import"./CircularProgressIndicator-BXO1v5EL.js";import"./ErrorDisplay-BLPNm21d.js";import"./ChevronUp-MZDMs01O.js";import"./index-CKhALns6.js";import"./index-D4mXpXRf.js";/* empty css               */import"./text-BgSz6ojX.js";function Sa(e,r={}){return{async queryFn({queryKey:o}){const s=r.abi;if(!s)throw new Error("abi is required");const{functionName:n,scopeKey:l,...i}=o[1],p=(()=>{const x=o[1];if(x.address)return{address:x.address};if(x.code)return{code:x.code};throw new Error("address or code is required")})();if(!n)throw new Error("functionName is required");return ma(e,{abi:s,functionName:n,args:i.args,...p,...i})},queryKey:ja(r)}}function ja(e={}){const{abi:r,...o}=e;return["readContract",ha(o)]}function ka(e={}){const{abi:r,address:o,functionName:s,query:n={}}=e,l=e.code,i=xa(e),p=_a({config:i}),x=Sa(i,{...e,chainId:e.chainId??p}),k=!!((o||l)&&r&&s&&(n.enabled??!0));return ya({...n,...x,enabled:k,structuralSharing:n.structuralSharing??fa})}class lo{number;hash;parent;constructor(r,o,s){this.number=r,this.hash=o,this.parent=s}toJSON(){return nt.encode(this)}}class wa{convert(r){return h(r,"number","hash","parent"),new lo(C.decode(r.number),u.decode(r.hash),u.decode(r.parent))}}class ba{convert(r){return{number:C.encode(r.number),hash:u.encode(r.hash),parent:u.encode(r.parent)}}}class Aa extends d{encoder=new ba;decoder=new wa}const nt=new Aa,Ia=1000000000n,Pa=12n;class Da{async getBlockForHeight(r){const o=new ArrayBuffer(32);new DataView(o).setBigUint64(24,BigInt(r),!1);const n=new ArrayBuffer(32);return new DataView(n).setBigUint64(24,r-1n,!1),new lo(BigInt(r),o,n)}async getLatestBlock(){const r=BigInt(Math.floor(na()/1e3)),s=(BigInt(Math.floor(Date.now()/1e3))-r)/Pa,n=Ia+s;return this.getBlockForHeight(n)}}class H{ratio;constructor(r){this.ratio=r,Object.freeze(this)}valueOf(){return this.ratio}toString(){return this.ratio.toString()}toJSON(){return w.encode(this)}}class Ra{convert(r){return M.encode(r.ratio)}}class Ba{convert(r){return new H(M.decode(r))}}class Ta extends d{encoder=new Ra;decoder=new Ba}const w=new Ta;class po{address;voterParticipation;leaderParticipation;constructor(r,o,s){this.address=r,this.voterParticipation=o,this.leaderParticipation=s}toJSON(){return ct.encode(this)}}class Ea{convert(r){return h(r,"address","voter_participation","leader_participation"),new po(u.decode(r.address),w.decode(r.voter_participation),w.decode(r.leader_participation))}}class Va{convert(r){return{address:u.encode(r.address),voter_participation:w.encode(r.voterParticipation),leader_participation:w.encode(r.leaderParticipation)}}}class Oa extends d{encoder=new Va;decoder=new Ea}const ct=new Oa,Ze=new pe(new ue(ct),new me(ct));class uo{epoch;block;timestamp;constructor(r,o,s){this.epoch=r,this.block=o,this.timestamp=s}toJSON(){return he.encode(this)}}class La{convert(r){return h(r,"epoch","block","timestamp"),new uo(C.decode(r.epoch),C.decode(r.block),new Date(M.decode(r.timestamp)))}}class Ma{convert(r){return{epoch:C.encode(r.epoch),block:C.encode(r.block),timestamp:M.encode(r.timestamp.getTime())}}}class Ja extends d{encoder=new Ma;decoder=new La}const he=new Ja;class mo{espressoBlock;nodes;constructor(r,o){this.espressoBlock=r,this.nodes=o}toJSON(){return ho.encode(this)}}class Fa{convert(r){return h(r,"espresso_block","nodes"),new mo(he.decode(r.espresso_block),Ze.decode(r.nodes))}}class Wa{convert(r){return{espresso_block:he.encode(r.espressoBlock),nodes:Ze.encode(r.nodes)}}}class qa extends d{encoder=new Wa;decoder=new Fa}const ho=new qa;class Ha{async active(){const r=await da(sa()),o=Zr.slice().sort((n,l)=>Number(l.stake-n.stake)).slice(0,100),s=new ca(r.genTime);return new mo(new uo(BigInt(Math.floor(r.height/100)),BigInt(r.height),new Date(r.time)),Array.from(te(o,n=>new po(n.address,new H(s.nextFloat()),new H(s.nextFloat())))))}async updatesSince(){throw new S}}class xo{number;hash;timestamp;constructor(r,o,s){this.number=r,this.hash=o,this.timestamp=s}toJSON(){return xe.encode(this)}}class Ua{convert(r){return h(r,"number","hash","timestamp"),new xo(C.decode(r.number),u.decode(r.hash),new Date(M.decode(r.timestamp)))}}class Ka{convert(r){return{number:C.encode(r.number),hash:u.encode(r.hash),timestamp:M.encode(r.timestamp.valueOf())}}}class za extends d{encoder=new Ka;decoder=new Ua}const xe=new za;class et{address;stakingKey;stake;commission;constructor(r,o,s,n){this.address=r,this.stakingKey=o,this.stake=s,this.commission=n}toJSON(){return re.encode(this)}}class $a{convert(r){return h(r,"address","staking_key","stake","commission"),new et(u.decode(r.address),oo.decode(r.staking_key),C.decode(r.stake),w.decode(r.commission))}}class Qa{convert(r){return{address:u.encode(r.address),staking_key:oo.encode(r.stakingKey),stake:C.encode(r.stake),commission:w.encode(r.commission)}}}class Ga extends d{encoder=new Qa;decoder=new $a}const re=new Ga,_o=new pe(new ue(re),new me(re));class Pr{l1Block;nodes;constructor(r,o=[]){this.l1Block=r,this.nodes=o}toJSON(){return yo.encode(this)}}class Ya{convert(r){return h(r,"l1_block","nodes"),new Pr(xe.decode(r.l1_block),_o.decode(r.nodes))}}class Xa{convert(r){return{l1_block:xe.encode(r.l1Block),nodes:_o.encode(r.nodes)}}}class Za extends d{encoder=new Xa;decoder=new Ya}const yo=new Za;class es{async snapshot(){return new Pr(new xo(BigInt(1),new ArrayBuffer(32),new Date),Array.from(te(Zr,r=>new et(r.address,r.stateVerKey,r.stake,new H(r.commission/1e4)))))}async updatesSince(){throw new S}}class ts{l1Block=new Da;validatorsAll=new es;validatorsActive=new Ha;async setURL(){throw new S}}class rs{async getBlockForHeight(){throw new S}}class os{async active(){throw new S}async updatesSince(){throw new S}}class as{async snapshot(){throw new S}async updatesSince(){throw new S}}class ss{l1Block=new rs;validatorsAll=new as;validatorsActive=new os;async setURL(){throw new S}}class ns{helper;constructor(r){this.helper=r}async sendRequest(r,o,...s){return this.helper.submitRequest(r,"l1Block",o,s)}async getBlockForHeight(r){return await this.sendRequest(nt,"getBlockForHeight",C.encode(r))}async getLatestBlock(){return await this.sendRequest(nt,"getLatestBlock")}}function cs(e){return new Worker(""+new URL("l1_validator_service_web_worker_api.js-Vjtn8aMJ.js",import.meta.url).href,{name:e?.name})}class is{address;ratio;constructor(r,o){this.address=r,this.ratio=o}toJSON(){return it.encode(this)}}class ls{convert(r){return h(r,"address","percentage"),new is(u.decode(r.address),w.decode(r.percentage))}}class ds{convert(r){return{address:u.encode(r.address),percentage:w.encode(r.ratio)}}}class ps extends d{encoder=new ds;decoder=new ls}const it=new ps,fo=new pe(new ue(it),new me(it));class Co{}class go extends Co{leaders;voters;constructor(r,o){super(),this.leaders=r,this.voters=o}toJSON(){return Dr.encode(this)}}class us{convert(r){return h(r,"leaders","voters"),new go(fo.decode(r.leaders),Xr.decode(r.voters))}}class ms{convert(r){return{leaders:fo.encode(r.leaders),voters:Xr.encode(r.voters)}}}class hs extends d{encoder=new ms;decoder=new us}const ke="NewBlock",Dr=new hs;class vo extends Co{entries;constructor(r){super(),this.entries=r}toJSON(){return Rr.encode(this)}}class xs{convert(r){return new vo(Ze.decode(r))}}class _s{convert(r){return Ze.encode(r.entries)}}class ys extends d{encoder=new _s;decoder=new xs}const we="NewEpoch",Rr=new ys;class fs{convert(r){if(h(r),be(r,we))return Rr.decode(r[we]);if(be(r,ke))return Dr.decode(r[ke]);const o=Object.keys(r);if(o.length<=0)throw new D("Empty EspressoMessage object","object");const[s]=o;throw new D(s,`${we} | ${ke}`)}}class Cs{convert(r){if(r instanceof vo)return{[we]:Rr.encode(r)};if(r instanceof go)return{[ke]:Dr.encode(r)};throw new D("Unrecognized EspressoMessage type","Valid EspressoMessage Type")}}class gs extends d{encoder=new Cs;decoder=new fs}const Ur=new gs,No=new pe(new ue(Ur),new me(Ur));class vs{espressoBlock;diff;constructor(r,o){this.espressoBlock=r,this.diff=o}toJSON(){return So.encode(this)}}class Ns{convert(r){return h(r,"espresso_block","diff"),new vs(he.decode(r.espresso_block),No.decode(r.diff))}}class Ss{convert(r){return{espresso_block:he.encode(r.espressoBlock),diff:No.encode(r.diff)}}}class js extends d{encoder=new Ss;decoder=new Ns}const So=new js;class ks{helper;constructor(r){this.helper=r}async sendRequest(r,o,...s){return this.helper.submitRequest(r,"validatorsActive",o,s)}async active(){return await this.sendRequest(ho,"active")}async updatesSince(r){return await this.sendRequest(So,"updatesSince",C.encode(r))}}class ws{address;exitTime;constructor(r,o){this.address=r,this.exitTime=o}toJSON(){return Br.encode(this)}}class bs{convert(r){return h(r,"address","exit_time"),new ws(u.decode(r.address),new Date(r.exit_time))}}class As{convert(r){return{address:u.encode(r.address),exit_time:r.exitTime.toISOString()}}}class Is extends d{encoder=new As;decoder=new bs}const Br=new Is;class jo{}class ko extends jo{validatorExit;constructor(r){super(),this.validatorExit=r}toJSON(){return Tr.encode(this)}}class Ps{convert(r){return h(r,"validator_exit"),new ko(Br.decode(r.validator_exit))}}class Ds{convert(r){return{validator_exit:Br.encode(r.validatorExit)}}}class Rs extends d{encoder=new Ds;decoder=new Ps}const lt="NodeExit",Tr=new Rs;class wo extends jo{validatorInformation;constructor(r){super(),this.validatorInformation=r}toJSON(){return Er.encode(this)}}class Bs{convert(r){return new wo(re.decode(r))}}class Ts{convert(r){return re.encode(r.validatorInformation)}}class Es extends d{encoder=new Ts;decoder=new Bs}const dt="NodeUpdate",Er=new Es;class Vs{convert(r){if(h(r),be(r,dt))return Er.decode(r[dt]);if(be(r,lt))return Tr.decode(r[lt]);throw Object.keys(r).length<=0?new D("Empty L1Message object","object"):new D("Unrecognized L1Message type","Valid L1 Type")}}class Os{convert(r){if(r instanceof wo)return{[dt]:Er.encode(r)};if(r instanceof ko)return{[lt]:Tr.encode(r)};throw new D("Unrecognized L1Message type","Valid L1 Type")}}class Ls extends d{encoder=new Os;decoder=new Vs}const Kr=new Ls,bo=new pe(new ue(Kr),new me(Kr));class Ms{l1Block;diff;constructor(r,o=[]){this.l1Block=r,this.diff=o}toJSON(){return Ao.encode(this)}}class Js{convert(r){return h(r,"l1_block","diff"),new Ms(xe.decode(r.l1_block),bo.decode(r.diff))}}class Fs{convert(r){return{l1_block:xe.encode(r.l1Block),diff:bo.encode(r.diff)}}}class Ws extends d{encoder=new Fs;decoder=new Js}const Ao=new Ws;class qs{helper;constructor(r){this.helper=r}async sendRequest(r,o,...s){return this.helper.submitRequest(r,"validatorsAll",o,s)}async snapshot(r){const o=I.encode(r);return await this.sendRequest(yo,"snapshot",o)}async updatesSince(r){return await this.sendRequest(Ao,"updatesSince",u.encode(r))}}const Z=M;class Vr{requestID;api;method;param;constructor(r,o,s,n){this.requestID=r,this.api=o,this.method=s,this.param=n}toJSON(){return{requestID:this.requestID,api:this.api,method:this.method,param:this.param}}}class Hs{convert(r){return h(r,"requestID","api","method","param"),new Vr(Z.decode(r.requestID),ee.decode(r.api),ee.decode(r.method),r.param)}}class Us{convert(r){return Qe(r,Vr),{requestID:Z.encode(r.requestID),api:ee.encode(r.api),method:ee.encode(r.method),param:r.param}}}class Ks extends d{encoder=new Us;decoder=new Hs}const zs=new Ks;class Or{requestID;constructor(r){this.requestID=r}}class Lr extends Or{response;constructor(r,o){super(r),this.response=o}toJSON(){return Io.encode(this)}}class $s{convert(r){return h(r,"requestID","response"),new Lr(Z.decode(r.requestID),r.response)}}class Qs{convert(r){return Qe(r,Lr),{requestID:Z.encode(r.requestID),response:r.response}}}class Gs extends d{encoder=new Qs;decoder=new $s}const Io=new Gs;class Mr extends Or{error;constructor(r,o){super(r),this.error=o}toJSON(){return Po.encode(this)}}class Ys{convert(r){return h(r,"requestID","error"),new Mr(Z.decode(r.requestID),eo.decode(r.error))}}class Xs{convert(r){return Qe(r,Mr),{requestID:Z.encode(r.requestID),error:eo.encode(r.error)}}}class Zs extends d{encoder=new Xs;decoder=new Ys}const Po=new Zs;class en{convert(r){if(qr(r,"response",Hr))return Io.decode(r);if(qr(r,"error",Hr))return Po.decode(r);throw new ua}}class tn{convert(r){return Qe(r,Or),r.toJSON()}}class rn extends d{encoder=new tn;decoder=new en}const zr=new rn;class on{worker;nextRequestID=0;requestCompleters=new Map;constructor(r){this.worker=r,r.addEventListener("message",this.handleMessage.bind(this)),r.addEventListener("messageerror",this.handleMessageError.bind(this)),r.addEventListener("error",this.handleError.bind(this))}async submitRequest(r,o,s,n){const[l,i]=this.nextRequest();try{return this.worker.postMessage(zs.encode(new Vr(l,o,s,n))),await i.promise.then(p=>{if(p instanceof Mr)throw new ea(p.error);if(p instanceof Lr){const{response:x}=p;return r.decode(x)}throw new D(typeof p,"WebWorkerResponse")})}finally{this.requestCompleters.delete(l)}}nextRequest(){const r=this.nextRequestID++,o=ta();return this.requestCompleters.set(r,o),[r,o]}handleMessage(r){const o=zr.decode(r.data),s=this.requestCompleters.get(o.requestID);if(s===void 0)throw new Wr(o.requestID);s.complete(o)}handleMessageError(r){const o=zr.decode(r.data),s=this.requestCompleters.get(o.requestID);if(s===void 0)throw new Wr(o.requestID);s.completeError(o)}handleError(r){debugger;console.error("encountered error setting up Web worker",r)}}let st=null;function an(){return st||(st=new cs),st}class sn{l1Block;validatorsAll;validatorsActive;helper;constructor(){const r=an(),o=new on(r);this.helper=o,this.l1Block=new ns(o),this.validatorsAll=new qs(o),this.validatorsActive=new ks(o)}async sendRequest(r,o,...s){return this.helper.submitRequest(r,"proxy",o,s)}async setURL(r){return await this.sendRequest(ra,"set-url",ee.encode(r))}}const U=a.createContext(new ss);let ye=null;function nn(e){return ye===null&&(ye=new sn),e&&ye.setURL(e).then(r=>{r||console.warn("unable to set the url for the hotshot query service",e)},r=>{console.error("unable to set the url for the hotshot query service",e,r)}),ye}function cn(e){return typeof window<"u"&&"Worker"in window||typeof self<"u"&&"Worker"in self?nn(e):new ts}const pt=e=>{const o=a.useContext(aa)?.l1ValidatorServiceURL;return t.jsx(U.Provider,{value:cn(o),children:e.children})};try{U.displayName="L1ValidatorServiceContext",U.__docgenInfo={description:`L1ValidatorServiceContext provides a React Context
for the L1ValidatorService API.`,displayName:"L1ValidatorServiceContext",props:{}}}catch{}try{pt.displayName="ProvideL1ValidatorServiceAPIContext",pt.__docgenInfo={description:`ProvideL1ValidatorServiceAPIContext is a React Component that provides
the L1ValidatorService API context to its children.`,displayName:"ProvideL1ValidatorServiceAPIContext",props:{}}}catch{}const oe=a.createContext(null),ut=({children:e})=>{const o=a.useContext(U).validatorsActive.active();return t.jsx(F,{promise:o,children:t.jsx(ln,{children:e})})},ln=({children:e})=>{const r=a.useContext(J);return t.jsx(oe.Provider,{value:r,children:e})};try{oe.displayName="ActiveValidatorsContext",oe.__docgenInfo={description:`ActiveValidatorsContext provides a React Context
for the current active validator set snapshot.`,displayName:"ActiveValidatorsContext",props:{}}}catch{}try{ut.displayName="RetrieveActiveValidators",ut.__docgenInfo={description:`RetrieveActiveValidators is a React Component that retrieves
the current active validator set and provides it
via the ActiveValidatorsContext to its children.`,displayName:"RetrieveActiveValidators",props:{}}}catch{}const Ae=a.createContext(null),mt=({children:e})=>{const o=a.useContext(U).l1Block.getLatestBlock();return t.jsx(F,{promise:o,children:t.jsx(dn,{children:e})})},dn=({children:e})=>{const r=a.useContext(J);return t.jsx(Ae.Provider,{value:r,children:e})};try{Ae.displayName="L1BlockIDContext",Ae.__docgenInfo={description:"L1BlockIDContext defines a React Context for the current L1 Block ID.",displayName:"L1BlockIDContext",props:{}}}catch{}try{mt.displayName="RetrieveLatestL1BlockID",mt.__docgenInfo={description:`RetrieveLatestL1BlockID is a React Component that retrieves
the latest L1 Block ID and provides it via the L1BlockIDContext
to its children.`,displayName:"RetrieveLatestL1BlockID",props:{}}}catch{}const b=a.createContext(null),ht=({children:e})=>{const r=a.useContext(U),o=a.useContext(Ae),s=o?r.validatorsAll.snapshot(o.hash):new Promise(()=>{});return t.jsx(F,{promise:s,children:t.jsx(pn,{children:e})})},pn=({children:e})=>{const r=a.useContext(J);return t.jsx(b.Provider,{value:r,children:e})};try{b.displayName="AllValidatorsContext",b.__docgenInfo={description:`AllValidatorsContext provides a React Context
for the current full validator set snapshot.`,displayName:"AllValidatorsContext",props:{}}}catch{}try{ht.displayName="RetrieveAllValidators",ht.__docgenInfo={description:`RetrieveAllValidators is a React Component that retrieves
the current full validator set and provides it
via the AllValidatorsContext to its children.`,displayName:"RetrieveAllValidators",props:{}}}catch{}const A=a.createContext(new Map),xt=({children:e})=>{const r=a.useContext(oe),o=new Map(te(r?.nodes??[],s=>[I.encode(s.address),s]));return t.jsx(A.Provider,{value:o,children:e})};try{A.displayName="ConsensusMapContext",A.__docgenInfo={description:`ConsensusMapContext provides a React Context
for the current set of active validator addresses in base64 format.`,displayName:"ConsensusMapContext",props:{}}}catch{}try{xt.displayName="DeriveConsensusSet",xt.__docgenInfo={description:`DeriveConsensusSet is a React Component that
derives the current consensus set from the active validators
and provides it via the ConsensusSetContext to its children.`,displayName:"DeriveConsensusSet",props:{}}}catch{}function Ie(e){const{children:r,...o}=e,s=ka(o),n=s.isLoading?f.waiting:f.done;return s.isError?t.jsx(V.Provider,{value:N.withError(n,s.error),children:t.jsx(at,{children:r})}):typeof s.data>"u"||s.data===null?t.jsx(V.Provider,{value:N.withError(n,N.withError(n,new D(typeof s.data,"string | bigint | number | boolean"))),children:t.jsx(at,{children:r})}):t.jsx(V.Provider,{value:N.withData(n,s.data),children:t.jsx(at,{children:r})})}try{Ie.displayName="ReadContractToAsyncSnapshot",Ie.__docgenInfo={description:`ReadContractToAsyncSnapshot is a React component that
reads data from a smart contract using the wagmi useReadContract hook
and provides the result as an AsyncSnapshot via AsyncSnapshotContext.

It will automatically attempt to fetch the reactContract values based on
the provided abi, functionName, args, and config generic parameters, and
make that data available in the children via AsyncSnapshotContext, and the
derived Context states just like PromiseResolver.`,displayName:"ReadContractToAsyncSnapshot",props:{account:{defaultValue:null,description:"Account attached to the call (msg.sender).",name:"account",required:!1,type:{name:"`0x${string}` | Account"}},authorizationList:{defaultValue:null,description:"",name:"authorizationList",required:!1,type:{name:"AuthorizationList<number, boolean>"}},blockNumber:{defaultValue:null,description:"The balance of the account at a block number.",name:"blockNumber",required:!1,type:{name:"bigint"}},blockOverrides:{defaultValue:null,description:"Block overrides for the call.",name:"blockOverrides",required:!1,type:{name:"BlockOverrides<bigint, number>"}},blockTag:{defaultValue:{value:"'latest'"},description:"The balance of the account at a block tag.",name:"blockTag",required:!1,type:{name:"enum",value:[{value:'"latest"'},{value:'"earliest"'},{value:'"pending"'},{value:'"safe"'},{value:'"finalized"'}]}},factory:{defaultValue:null,description:"Contract deployment factory address (ie. Create2 factory, Smart Account factory, etc).",name:"factory",required:!1,type:{name:"`0x${string}`"}},factoryData:{defaultValue:null,description:"Calldata to execute on the factory to deploy the contract.",name:"factoryData",required:!1,type:{name:"`0x${string}`"}},stateOverride:{defaultValue:null,description:"State overrides for the call.",name:"stateOverride",required:!1,type:{name:"StateOverride"}},abi:{defaultValue:null,description:"",name:"abi",required:!1,type:{name:"Abi | readonly unknown[]"}},functionName:{defaultValue:null,description:"",name:"functionName",required:!1,type:{name:"string"}},args:{defaultValue:null,description:"",name:"args",required:!1,type:{name:"unknown"}},address:{defaultValue:null,description:"",name:"address",required:!1,type:{name:"`0x${string}`"}},chainId:{defaultValue:null,description:"",name:"chainId",required:!1,type:{name:"number"}},scopeKey:{defaultValue:null,description:"",name:"scopeKey",required:!1,type:{name:"string"}},config:{defaultValue:null,description:"",name:"config",required:!1,type:{name:"Config"}},query:{defaultValue:null,description:"",name:"query",required:!1,type:{name:'StrictOmit<{ meta?: Record<string, unknown>; select?: ((data: ContractFunctionReturnType<abi, "view" | "pure", functionName, args>) => selectData); ... 28 more ...; initialData?: ContractFunctionReturnType<...> | ... 1 more ... | undefined; }, "queryKey" | ... 3 more ... | "queryKeyHashFn"> |...'}},code:{defaultValue:null,description:"",name:"code",required:!1,type:{name:"`0x${string}`"}}}}}catch{}const O=a.createContext(new Date),ae=a.createContext(()=>{}),_t=({children:e})=>{const[r,o]=a.useState(new Date);return t.jsx(O.Provider,{value:r,children:t.jsx(ae.Provider,{value:o,children:e})})};try{O.displayName="L1RefreshTimestampContext",O.__docgenInfo={description:`L1RefreshTimestampContext defines a React Context for the current
L1 refresh timestamp.

This context governs when data retrieved from the L1 and Smart Contracts
should be refreshed.`,displayName:"L1RefreshTimestampContext",props:{}}}catch{}try{ae.displayName="SetL1RefreshTimestampContext",ae.__docgenInfo={description:`SetL1RefreshTimestampContext defines a React Context for updating
the current L1 refresh timestamp.`,displayName:"SetL1RefreshTimestampContext",props:{}}}catch{}try{_t.displayName="ProvideL1RefreshTimestampContext",_t.__docgenInfo={description:`ProvideL1RefreshTimestampContext is a React Component that provides
the L1RefreshTimestampContext and SetL1RefreshTimestampContext to its
children.`,displayName:"ProvideL1RefreshTimestampContext",props:{}}}catch{}const j=a.createContext(0n),yt=a.createContext(N.nothing()),ft=({children:e})=>t.jsx(Ct,{children:e}),Ct=({children:e})=>{a.useContext(O);const r=a.useContext(ze),o=a.useContext(T),s=!o||!r?new Promise(()=>{}):r.balanceOf(o);return t.jsx(F,{promise:s,children:t.jsx(Do,{children:e})})},$r=({children:e})=>{const r=a.useContext(T);pa(r);const o=a.useContext(no),s=Gr,n=o?.espTokenContractAddress??void 0;return t.jsx(Ie,{abi:s,address:n,functionName:"balanceOf",args:[r],children:t.jsx(un,{children:t.jsx(Do,{children:e})})})},un=({children:e})=>{const r=a.useContext(V);return t.jsx(yt.Provider,{value:r,children:e})},Do=({children:e})=>{const r=a.useContext(J);return t.jsx(j.Provider,{value:r??0n,children:e})};try{j.displayName="ESPBalanceContext",j.__docgenInfo={description:"",displayName:"ESPBalanceContext",props:{}}}catch{}try{yt.displayName="ESPBalanceAsyncSnapshotContext",yt.__docgenInfo={description:"",displayName:"ESPBalanceAsyncSnapshotContext",props:{}}}catch{}try{ft.displayName="ProvideESPBalance",ft.__docgenInfo={description:`ProvideTotalSupply is a React component that fetches
the total supply of the ESP token from the blockchain
and provides it via TotalSupplyContext.`,displayName:"ProvideESPBalance",props:{}}}catch{}try{Ct.displayName="ProvideTotalSupplyFromContractCall",Ct.__docgenInfo={description:`ProvideTotalSupplyFromAPICall is a React component that fetches
the total supply of the ESP token from the local ESPTokenContract
and provides it via TotalSupplyContext.`,displayName:"ProvideTotalSupplyFromContractCall",props:{}}}catch{}try{$r.displayName="ProvideESPBalanceFromContractRead",$r.__docgenInfo={description:`ProvideTotalSupplyFromContractRead is a React component that fetches
the total supply of the ESP token from the blockchain
and provides it via TotalSupplyContext.`,displayName:"ProvideESPBalanceFromContractRead",props:{}}}catch{}const K=a.createContext(new Map);function mn(e,r){return Number(e.stake)*(1-e.commission.valueOf())*(r?.leaderParticipation?.valueOf()??.5)*(r?.voterParticipation?.valueOf()??.5)}const gt=({children:e})=>{const r=a.useContext(b),o=a.useContext(A);if(!r)return t.jsx(K.Provider,{value:new Map,children:e});const s=Array.from(ia(te(r.nodes,l=>u.encode(l.address)),te(r.nodes,l=>mn(l,o.get(u.encode(l.address)))),(l,i)=>[l,i])).sort((l,i)=>i[1]-l[1]),n=new Map(s.map((l,i)=>[l[0],i+1]));return t.jsx(K.Provider,{value:n,children:e})};try{K.displayName="RankMapContext",K.__docgenInfo={description:`RankMapContext provides a React Context
for the current mapping of validator addresses to their ranks.`,displayName:"RankMapContext",props:{}}}catch{}try{gt.displayName="DeriveRank",gt.__docgenInfo={description:`DeriveRank is a React Component that
derives the current rank mapping from the all validators
and provides it via the RankMapContext to its children.`,displayName:"DeriveRank",props:{}}}catch{}const se=a.createContext(0n),vt=({children:e})=>t.jsx(hn,{children:e}),hn=({children:e})=>{const r=a.useContext(b);if(!r)return t.jsx(t.Fragment,{children:e});const o=la((s,n)=>s+n.stake,0n,r.nodes[Symbol.iterator]());return t.jsx(se.Provider,{value:o,children:e})};try{se.displayName="TotalStakeContext",se.__docgenInfo={description:`TotalStakeContext provides a React Context
for the total stake of all validators.`,displayName:"TotalStakeContext",props:{}}}catch{}try{vt.displayName="DeriveTotalStake",vt.__docgenInfo={description:`DeriveTotalStake is a component that Provides the TotalStakeContext
by calculating the total stake from the AllValidatorsContext.`,displayName:"DeriveTotalStake",props:{}}}catch{}const Pe=a.createContext(null),Nt=a.createContext(N.nothing()),St=({children:e})=>t.jsx(jt,{children:e}),jt=({children:e})=>{a.useContext(O);const r=a.useContext(ze);return r?t.jsx(F,{promise:r.totalSupply(),children:t.jsx(Ro,{children:e})}):t.jsx(t.Fragment,{children:e})},Qr=({children:e})=>{const r=a.useContext(no),o=Gr,s=r?.espTokenContractAddress??void 0;return t.jsx(Ie,{abi:o,address:s,functionName:"totalSupply",children:t.jsx(xn,{children:t.jsx(Ro,{children:e})})})},xn=({children:e})=>{const r=a.useContext(V);return t.jsx(Nt.Provider,{value:r,children:e})},Ro=({children:e})=>{const r=a.useContext(J);return t.jsx(Pe.Provider,{value:r,children:e})};try{Pe.displayName="TotalSupplyContext",Pe.__docgenInfo={description:`TotalSupplyContext provides a React Context
for the total supply of the ESP token.`,displayName:"TotalSupplyContext",props:{}}}catch{}try{Nt.displayName="TotalSupplyAsyncSnapshotContext",Nt.__docgenInfo={description:"",displayName:"TotalSupplyAsyncSnapshotContext",props:{}}}catch{}try{St.displayName="ProvideTotalSupply",St.__docgenInfo={description:`ProvideTotalSupply is a React component that fetches
the total supply of the ESP token from the blockchain
and provides it via TotalSupplyContext.`,displayName:"ProvideTotalSupply",props:{}}}catch{}try{jt.displayName="ProvideTotalSupplyFromContractCall",jt.__docgenInfo={description:`ProvideTotalSupplyFromAPICall is a React component that fetches
the total supply of the ESP token from the local ESPTokenContract
and provides it via TotalSupplyContext.`,displayName:"ProvideTotalSupplyFromContractCall",props:{}}}catch{}try{Qr.displayName="ProvideTotalSupplyFromContractRead",Qr.__docgenInfo={description:`ProvideTotalSupplyFromContractRead is a React component that fetches
the total supply of the ESP token from the blockchain
and provides it via TotalSupplyContext.`,displayName:"ProvideTotalSupplyFromContractRead",props:{}}}catch{}class Bo{}class _e extends Bo{constructor(){super(),Object.freeze(this)}}class To extends Bo{constructor(r){super(),this.validatorAddress=r,Object.freeze(this)}}const De=a.createContext(new _e),L=a.createContext(()=>{}),kt=({children:e})=>{const[r,o]=a.useState(new _e);return t.jsx(De.Provider,{value:r,children:t.jsx(L.Provider,{value:o,children:e})})};try{De.displayName="ValidatorSelectionContext",De.__docgenInfo={description:"",displayName:"ValidatorSelectionContext",props:{}}}catch{}try{L.displayName="SetValidatorSelectionContext",L.__docgenInfo={description:"",displayName:"SetValidatorSelectionContext",props:{}}}catch{}try{kt.displayName="ProvideValidatorSelection",kt.__docgenInfo={description:"",displayName:"ProvideValidatorSelection",props:{}}}catch{}const _n=e=>a.createElement(Ye,{...e,className:g(e.className,"stroked")},t.jsxs(t.Fragment,{children:[t.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),t.jsx("polyline",{points:"16 17 21 12 16 7"}),t.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}));try{logout.displayName="logout",logout.__docgenInfo={description:"LogOut represents a logout icon.",displayName:"logout",props:{}}}catch{}const wt=e=>a.createElement(Ye,{...e,className:g(e.className,"stroked")},t.jsxs("g",{strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-plus",children:[t.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}));try{plus.displayName="plus",plus.__docgenInfo={description:"Plus represents a plus sign.",displayName:"plus",props:{}}}catch{}const Eo=e=>t.jsx("button",{...e,className:g(e.className,"bbtn")});try{buttonbase.displayName="buttonbase",buttonbase.__docgenInfo={description:`ButtonBase is a simple wrapper around a normal button element that adds the
class 'btn' to the button in order to change it's styling.`,displayName:"buttonbase",props:{}}}catch{}const m=({className:e,...r})=>t.jsx(Eo,{className:g(e,"btn-large"),...r});try{buttonlarge.displayName="buttonlarge",buttonlarge.__docgenInfo={description:`ButtonLarge is a wrapper around ButtonBase that adds the 'btn-large' class
to the button in order to change its styling to a larger button.`,displayName:"buttonlarge",props:{}}}catch{}const bt=()=>{const e=a.useContext(Ir),r=a.useContext(T);return r?t.jsxs("span",{children:[t.jsx("span",{className:"wallet-address-preview",children:t.jsx(Ge,{value:new Xe(I.decode(r))})})," ",t.jsxs(m,{className:"connect-wallet connected-wallet",onClick:e.openAccountModal,children:[t.jsx(c,{text:"Connect Wallet"}),t.jsx(_n,{})]})]}):t.jsxs(m,{className:"connect-wallet",onClick:e.openConnectModal,children:[t.jsx(wt,{}),t.jsx(c,{text:"Connect Wallet"})]})};try{bt.displayName="ConnectWalletButton",bt.__docgenInfo={description:`ConnectWalletButton is a button that will open the RainbowKit Wallet Connect
Modal when pressed.`,displayName:"ConnectWalletButton",props:{}}}catch{}const At=e=>t.jsxs("header",{className:"delegation",...e,children:[t.jsx(ga,{}),t.jsx(bt,{})]});try{At.displayName="DelegationHeader",At.__docgenInfo={description:"DelegationHeader is the header component for the Delegation UI page.",displayName:"DelegationHeader",props:{}}}catch{}const R=a.createContext({ref:null,open:()=>{},close:()=>{},setOpenState:()=>{},isOpen:!1});function yn(){const e=a.useRef(null),[r,o]=a.useState(!1);return{ref:e,open:()=>{e.current&&!r&&(e.current.showModal(),o(!0))},close:()=>{e.current&&r&&(e.current.close(),o(!1))},setOpenState:i=>{o(i)},isOpen:r}}const It=({children:e})=>{const r=yn();return t.jsx(R.Provider,{value:r,children:e})},Pt=({children:e,...r})=>{const o=a.useContext(R);return t.jsx("dialog",{ref:o.ref,...r,onClose:()=>{o.setOpenState(!1)},children:e})};try{R.displayName="ModalContext",R.__docgenInfo={description:"",displayName:"ModalContext",props:{}}}catch{}try{It.displayName="ProvideDialogModalControls",It.__docgenInfo={description:"",displayName:"ProvideDialogModalControls",props:{}}}catch{}try{Pt.displayName="DialogModal",Pt.__docgenInfo={description:"",displayName:"DialogModal",props:{closedby:{defaultValue:null,description:"",name:"closedby",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"any"'},{value:'"closerequest"'}]}}}}}catch{}function fn(e){const[r,o]=a.useState(e);return[r,o]}const Vo=a.createContext(null),Oo=a.createContext(()=>{}),Lo=a.createContext(null);function Dt(e){const[r,o]=fn(e.selected);return t.jsx(Lo.Provider,{value:r,children:t.jsx(Oo.Provider,{value:s=>{o(s),e.onSelectionChange(s)},children:t.jsx("div",{className:g(e.className,"btn-segmented"),children:e.segments.map((s,n)=>t.jsx(Vo.Provider,{value:s,children:t.jsx(Cn,{})},n))})})})}const Cn=()=>{const e=a.useContext(Vo),r=a.useContext(Lo),o=a.useContext(Oo);return e?t.jsx(m,{className:"btn-segment","data-selected":e.value===r,onClick:()=>{o(e.value)},children:e.label}):null};try{Dt.displayName="SegmentedButton",Dt.__docgenInfo={description:"",displayName:"SegmentedButton",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"T"}},onSelectionChange:{defaultValue:null,description:"",name:"onSelectionChange",required:!0,type:{name:"(value: T) => void"}},segments:{defaultValue:null,description:"",name:"segments",required:!0,type:{name:"ButtonSegment<T>[]"}}}}}catch{}const z=e=>t.jsx("div",{className:"value",children:e.children});try{z.displayName="CardContentValue",z.__docgenInfo={description:"CardContentValue is a container for the main value displayed in a card.",displayName:"CardContentValue",props:{}}}catch{}const Rt=e=>t.jsx("div",{className:g(e.className,"bcard"),children:e.children});try{Rt.displayName="Card",Rt.__docgenInfo={description:"Card component for displaying content in a card layout.",displayName:"Card",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const $=e=>t.jsx(Rt,{className:g(e.className,"card-value"),children:e.children});try{$.displayName="CardValue",$.__docgenInfo={description:"",displayName:"CardValue",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Bt=()=>{const e=a.useContext(j);return t.jsxs($,{className:"estimated-apr-card",children:[t.jsx("h2",{children:t.jsx(c,{text:"Available Balance"})}),t.jsx(z,{children:t.jsx(W,{money:P.ESP(e)})})]})};try{Bt.displayName="AvailableBalanceCard",Bt.__docgenInfo={description:`AvailableBalanceCard is a component that displays the Available Balance of
the active Wallet.`,displayName:"AvailableBalanceCard",props:{}}}catch{}const Tt=()=>t.jsxs($,{className:"estimated-apr-card",children:[t.jsx("h2",{children:t.jsx(c,{text:"Claimable Rewards"})}),t.jsx(m,{className:"action",onClick:()=>{},children:t.jsx(c,{text:"Claim All"})}),t.jsx(z,{children:t.jsx(W,{money:P.ESP(0n)})})]});try{Tt.displayName="ClaimableRewardsCard",Tt.__docgenInfo={description:`ClaimableRewardsCard is a component that displays the Claimable Rewards
amount.

This is meant to represent the total amount of ESP that can be claimed as
rewards by the active wallet.`,displayName:"ClaimableRewardsCard",props:{}}}catch{}const Et=()=>{const e=a.useContext(j);return t.jsxs($,{className:"estimated-apr-card",children:[t.jsx("h2",{children:t.jsx(c,{text:"Total Balance"})}),t.jsx(z,{children:t.jsx(W,{money:P.ESP(e)})})]})};try{Et.displayName="TotalBalanceCard",Et.__docgenInfo={description:`TotalBalanceCard is a component that displays the Total Balance of the
active Wallet.

Total Balance is defined as the sum of the Available Balance and the
Staked Balance.

TODO: Should this include the pending Rewards as well?`,displayName:"TotalBalanceCard",props:{}}}catch{}const Vt=()=>t.jsxs($,{className:"estimated-apr-card",children:[t.jsx("h2",{children:t.jsx(c,{text:"Total Staked"})}),t.jsx(z,{children:t.jsx(W,{money:P.ESP(0n)})})]});try{Vt.displayName="TotalStakedCard",Vt.__docgenInfo={description:`TotalStakedCard is a component that displays the Total Staked amount.

This is meant to represent the total amount of ESP that has been staked by
the active wallet.`,displayName:"TotalStakedCard",props:{}}}catch{}const Ot=()=>a.useContext(T)?t.jsxs("section",{className:"my-balance",children:[t.jsx("h2",{children:t.jsx(c,{text:"My Balance"})}),t.jsxs("div",{className:"my-balance-stats",children:[t.jsx(Et,{}),t.jsx(Bt,{}),t.jsx(Vt,{}),t.jsx(Tt,{})]})]}):null;try{Ot.displayName="MyBalance",Ot.__docgenInfo={description:"",displayName:"MyBalance",props:{}}}catch{}const Q=({children:e})=>t.jsx("div",{className:"network-stat-value",children:e});try{Q.displayName="NetworkStatValue",Q.__docgenInfo={description:"",displayName:"NetworkStatValue",props:{}}}catch{}const Lt=()=>{const e=a.useContext(se),r=a.useContext(Pe);return t.jsxs(Q,{children:[t.jsx("h2",{children:t.jsx(c,{text:"Currently Staked"})}),t.jsx(E,{percentage:Number(e)/Number(r)})]})};try{Lt.displayName="CurrentlyStaked",Lt.__docgenInfo={description:"",displayName:"CurrentlyStaked",props:{}}}catch{}function gn(e){return e!=null}function vn(e){const r=e<0?-1:1,o=Math.floor(e/1e3),s=Math.floor(o/60);return[Math.floor(s/60),s%60,o%60].map(l=>l*r)}const Mt=e=>{const r=Wo.useContext(Ca),[o,s,n]=vn(e.durationInMilliseconds),l=[r.hours.format(o),r.minutes.format(s),r.seconds.format(n)].filter(gn);return t.jsx(c,{text:l.join(" ")})};try{Mt.displayName="TimeLeftText",Mt.__docgenInfo={description:`TimeLeftText displays the duration specified in terms of the total number
of hours, minutes, and seconds that comprise the total milliseconds provided.`,displayName:"TimeLeftText",props:{durationInMilliseconds:{defaultValue:null,description:"",name:"durationInMilliseconds",required:!0,type:{name:"number"}}}}}catch{}const Jt=()=>{const e=a.useContext(oe);if(e==null)return t.jsxs(Q,{children:[t.jsxs("h2",{children:[t.jsx(c,{text:"Epoch"})," ",t.jsx("span",{className:"accent",children:t.jsx(c,{text:"-"})})," ",t.jsx(c,{text:"ends in"})]}),t.jsx(c,{text:"-"})]});const r=e.espressoBlock.epoch,o=e.espressoBlock.block,s=o/r,n=o%s,l=s-n,i=Number(l)*6*1e3;return t.jsxs(Q,{children:[t.jsxs("h2",{children:[t.jsx(c,{text:"Epoch"})," ",t.jsx("span",{className:"accent",children:t.jsx(co,{number:e?.espressoBlock.epoch??0n})})," ",t.jsx(c,{text:"ends in"})]}),t.jsx(Mt,{durationInMilliseconds:i})]})};try{Jt.displayName="EpochEndsIn",Jt.__docgenInfo={description:"",displayName:"EpochEndsIn",props:{}}}catch{}const Ft=()=>t.jsxs(Q,{children:[t.jsx("h2",{children:t.jsx(c,{text:"Estimated APR"})}),t.jsx(E,{percentage:.035})]});try{Ft.displayName="EstimatedAPR",Ft.__docgenInfo={description:`EstimatedAPRCard displays the estimated annual percentage rate (APR).
The APR is currently hardcoded to 3.5%.`,displayName:"EstimatedAPR",props:{}}}catch{}const Wt=()=>t.jsxs("div",{className:"network-stats",children:[t.jsx("h1",{children:t.jsx(c,{text:"ESP Delegation"})}),t.jsxs("div",{className:"network-stats-grid",children:[t.jsx(Lt,{}),t.jsx(Ft,{}),t.jsx(Jt,{})]})]});try{Wt.displayName="NetworkStats",Wt.__docgenInfo={description:"NetworkStats component displays key statistics about the chain.",displayName:"NetworkStats",props:{}}}catch{}const G=a.createContext(new ArrayBuffer(0));try{G.displayName="ConfirmedValidatorContext",G.__docgenInfo={description:"",displayName:"ConfirmedValidatorContext",props:{}}}catch{}const y=a.createContext(new et(new ArrayBuffer(0),new ao("",new ArrayBuffer(0)),0n,new H(0)));try{y.displayName="ValidatorNodeContext",y.__docgenInfo={description:`ValidatorNodeContext provides a React Context
for a single validator node entry.`,displayName:"ValidatorNodeContext",props:{}}}catch{}const Y=a.createContext(null),qt=({children:e})=>{a.useContext(O);const r=a.useContext(ze),o=a.useContext($e),s=a.useContext(T),n=!r||!o||!s?new Promise(()=>{}):r.allowance(s,o.address);return t.jsx(F,{promise:n,children:t.jsx(Nn,{children:e})})},Nn=({children:e})=>{const r=a.useContext(J);return t.jsx(Y.Provider,{value:r,children:e})};try{Y.displayName="CurrentAllowanceToStakeTableContext",Y.__docgenInfo={description:"",displayName:"CurrentAllowanceToStakeTableContext",props:{}}}catch{}try{qt.displayName="ProvideCurrentAllowanceToStakeTable",qt.__docgenInfo={description:"",displayName:"ProvideCurrentAllowanceToStakeTable",props:{}}}catch{}const ne=a.createContext(null),Ht=({children:e})=>{a.useContext(O);const r=a.useContext($e),o=a.useContext(T),s=a.useContext(G),n=!r||!o||!s?new Promise(()=>{}):r.delegation(I.encode(s),o.toLowerCase());return t.jsx(F,{promise:n,children:t.jsx(Sn,{children:e})})},Sn=({children:e})=>{const r=a.useContext(J);return t.jsx(ne.Provider,{value:r,children:e})};try{ne.displayName="CurrentStakeToValidatorContext",ne.__docgenInfo={description:"",displayName:"CurrentStakeToValidatorContext",props:{}}}catch{}try{Ht.displayName="ProvideCurrentStakeToValidator",Ht.__docgenInfo={description:"",displayName:"ProvideCurrentStakeToValidator",props:{}}}catch{}const ce=a.createContext(null),Re=a.createContext(()=>{}),ie=a.createContext(N.nothing()),Ut=({children:e})=>{const[r,o]=a.useState(null);return t.jsx(ce.Provider,{value:r,children:t.jsx(Re.Provider,{value:o,children:t.jsx(jn,{children:e})})})},jn=({children:e})=>{const r=a.useContext(ce)??ro();return t.jsx(so,{asyncIterable:r,children:t.jsx(kn,{children:e})})},kn=({children:e})=>{const r=a.useContext(V),o=a.useContext(ce);return t.jsx(ie.Provider,{value:o===null?N.nothing():r,children:e})};class tt{}class wn extends tt{constructor(){super()}}class bn extends tt{constructor(r){super(),this.transactionHash=r}}class An extends tt{constructor(r){super(),this.transactionHash=r}}class Be extends tt{constructor(r,o){super(),this.transactionHash=r,this.receipt=o}}async function*In(e,r,o,s){yield new wn;const n=await r.approve(o.address,0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffn);yield new bn(n),yield new An(n);try{for(let l=0;l<24;l++)try{const i=await e.getTransactionReceipt({hash:n});yield new Be(n,i);return}catch(i){if(l===23)throw console.error("<<<< HERE performApprove failed to retrieve receipt:",i),i;await io(1e3)}}finally{s(new Date)}throw new Error("no receipt received")}try{ce.displayName="ApproveAsyncIterableContext",ce.__docgenInfo={description:"",displayName:"ApproveAsyncIterableContext",props:{}}}catch{}try{Re.displayName="SetApproveAsyncIterableContext",Re.__docgenInfo={description:"",displayName:"SetApproveAsyncIterableContext",props:{}}}catch{}try{ie.displayName="ApproveAsyncSnapshotContext",ie.__docgenInfo={description:"",displayName:"ApproveAsyncSnapshotContext",props:{}}}catch{}try{Ut.displayName="ProvideApprovePromiseContext",Ut.__docgenInfo={description:"",displayName:"ProvideApprovePromiseContext",props:{}}}catch{}const le=a.createContext(null),Te=a.createContext(()=>{}),X=a.createContext(N.nothing()),Kt=({children:e})=>{const[r,o]=a.useState(null);return t.jsx(le.Provider,{value:r,children:t.jsx(Te.Provider,{value:o,children:t.jsx(Pn,{children:e})})})},Pn=({children:e})=>{const r=a.useContext(le)??ro();return t.jsx(so,{asyncIterable:r,children:t.jsx(Dn,{children:e})})},Dn=({children:e})=>{const r=a.useContext(V),o=a.useContext(le);return t.jsx(X.Provider,{value:o===null?N.nothing():r,children:e})};class rt{}class Rn extends rt{constructor(){super()}}class Bn extends rt{constructor(r){super(),this.transactionHash=r}}class Tn extends rt{constructor(r){super(),this.transactionHash=r}}class de extends rt{constructor(r,o){super(),this.transactionHash=r,this.receipt=o}}async function*En(e,r,o,s,n){yield new Rn;const l=await r.delegate(o,s);yield new Bn(l),yield new Tn(l);try{for(let i=0;i<24;i++)try{const p=await e.getTransactionReceipt({hash:l});yield new de(l,p);return}catch(p){if(i===23)throw console.error("<<<< HERE performDelegation failed to retrieve receipt:",p),p;await io(1e3)}}finally{n(new Date)}throw new Error("no receipt received")}try{le.displayName="DelegateAsyncIterableContext",le.__docgenInfo={description:"",displayName:"DelegateAsyncIterableContext",props:{}}}catch{}try{Te.displayName="SetDelegationAsyncIterableContext",Te.__docgenInfo={description:"",displayName:"SetDelegationAsyncIterableContext",props:{}}}catch{}try{X.displayName="DelegateAsyncSnapshotContext",X.__docgenInfo={description:"",displayName:"DelegateAsyncSnapshotContext",props:{}}}catch{}try{Kt.displayName="ProvideDelegatePromiseContext",Kt.__docgenInfo={description:"",displayName:"ProvideDelegatePromiseContext",props:{}}}catch{}const B=a.createContext(P.ESP(0n)),Ee=a.createContext(()=>{});function Vn(e=P.ESP(0n)){return a.useState(e)}const zt=({children:e})=>{const[r,o]=Vn();return t.jsx(B.Provider,{value:r,children:t.jsx(Ee.Provider,{value:o,children:e})})};try{B.displayName="StakingAmountContext",B.__docgenInfo={description:"",displayName:"StakingAmountContext",props:{}}}catch{}try{Ee.displayName="SetStakingAmountContext",Ee.__docgenInfo={description:"",displayName:"SetStakingAmountContext",props:{}}}catch{}try{zt.displayName="ProvideStakingAmountContexts",zt.__docgenInfo={description:"",displayName:"ProvideStakingAmountContexts",props:{}}}catch{}const $t=()=>{const e=a.useContext(ae),r=a.useContext(Yr),o=a.useContext(B),s=a.useContext(ze),n=a.useContext($e),l=a.useContext(Y),i=a.useContext(ie),p=a.useContext(Re);if(!(o.value>(l??0n))||i.asyncState===f.done&&!i.hasError)return t.jsx(m,{className:"btn-approve approved",disabled:!0,children:t.jsx(c,{text:"Approved"})});if(!r||!s||!n||o.value===0n)return t.jsx(m,{className:"btn-approve",disabled:!0,children:t.jsx(c,{text:"Approve"})});const k=()=>{!s||!n||p(In(r,s,n,e))};return i.asyncState===f.done&&i.hasError?t.jsx(m,{className:"btn-approve retry",onClick:k,children:t.jsx(c,{text:"Retry"})}):i.asyncState===f.waiting||i.data&&!(i.data instanceof Be)?t.jsx(m,{className:"btn-approve approving",disabled:!0,children:t.jsx(c,{text:"Approve"})}):t.jsx(m,{className:"btn-approve",onClick:k,children:t.jsx(c,{text:"Approve"})})};try{$t.displayName="ApproveButton",$t.__docgenInfo={description:"",displayName:"ApproveButton",props:{}}}catch{}const Mo=({className:e,...r})=>t.jsx(Eo,{className:g(e,"btn--flat"),...r});try{buttonflat.displayName="buttonflat",buttonflat.__docgenInfo={description:`ButtonFlat is a wrapper around ButtonBase that adds the 'btn-flat' class
to the button in order to change its styling to a flat button.`,displayName:"buttonflat",props:{}}}catch{}const Qt=()=>{const e=a.useContext(L);return t.jsx(Mo,{className:"back-modal-button",onClick:()=>e(new _e),children:t.jsx(c,{text:"Back"})})};try{Qt.displayName="BackButton",Qt.__docgenInfo={description:"",displayName:"BackButton",props:{}}}catch{}const Ve=()=>{const e=a.useContext(L),r=a.useContext(R);return t.jsx(Mo,{className:"close-modal-button",onClick:()=>{e(new _e),r.close()},children:t.jsx(va,{})})};try{Ve.displayName="CloseStakingModalButton",Ve.__docgenInfo={description:"",displayName:"CloseStakingModalButton",props:{}}}catch{}const Gt=()=>{const e=a.useContext(R),r=a.useContext(L),o=a.useContext(X);return o.asyncState!==f.done||!(o.data instanceof de)?null:t.jsx("div",{className:"staking-modal-completion-area",children:t.jsx(m,{onClick:()=>{r(new _e),e.close()},children:t.jsx(c,{text:"Close"})})})};try{Gt.displayName="CompletionArea",Gt.__docgenInfo={description:"",displayName:"CompletionArea",props:{}}}catch{}const Yt=()=>{const e=a.useContext(ae),r=a.useContext(Yr),o=a.useContext(B),s=a.useContext(j),n=a.useContext($e),l=a.useContext(Y)??0n,i=a.useContext(X),p=a.useContext(Te),x=a.useContext(G);if(r===null||n===null||o.value<=0n||o.value>s||o.value>l||i.asyncState===f.waiting||i.data&&!(i.data instanceof de))return t.jsx(m,{className:"btn-delegate",disabled:!0,children:t.jsx(c,{text:"Delegate"})});const k=I.encode(x),Fr=()=>{p(En(r,n,k,o.value,e))};return i.asyncState===f.done&&i.hasError?t.jsx(m,{className:"btn-delegate retry",onClick:Fr,children:t.jsx(c,{text:"Retry"})}):i.asyncState===f.done&&!i.hasError?t.jsx(m,{className:"btn-delegate approved",disabled:!0,children:t.jsx(c,{text:"Delegated"})}):t.jsx(m,{className:"btn-delegate",onClick:Fr,children:t.jsx(c,{text:"Delegate"})})};try{Yt.displayName="DelegateButton",Yt.__docgenInfo={description:"",displayName:"DelegateButton",props:{}}}catch{}const Oe=({className:e,children:r})=>t.jsx("span",{className:g(e,"bchip"),children:r});try{Oe.displayName="Chip",Oe.__docgenInfo={description:"",displayName:"Chip",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Le=({className:e,children:r})=>t.jsx(Oe,{className:g(e,"consensus-chip"),children:r});try{Le.displayName="ConsensusChip",Le.__docgenInfo={description:"",displayName:"ConsensusChip",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Me=()=>t.jsx(Le,{className:"consensus-chip active",children:t.jsx(c,{text:"Active"})});try{Me.displayName="ActiveConsensusChip",Me.__docgenInfo={description:"",displayName:"ActiveConsensusChip",props:{}}}catch{}const Xt=({children:e})=>t.jsx(Oe,{className:"apy",children:e});try{Xt.displayName="APYChip",Xt.__docgenInfo={description:"",displayName:"APYChip",props:{}}}catch{}const Je=()=>t.jsx(Le,{className:"consensus-chip inactive",children:t.jsx(c,{text:"Inactive"})});try{Je.displayName="InactiveConsensusChip",Je.__docgenInfo={description:"",displayName:"InactiveConsensusChip",props:{}}}catch{}const Zt=()=>t.jsxs("div",{className:"staking-modal-initial-summary-and-interaction",children:[t.jsx(On,{}),t.jsx(Ln,{}),t.jsx(Mn,{})]}),On=()=>{const e=a.useContext(y),r=a.useContext(A),o=I.encode(e.address),n=r.has(o)?t.jsx(Me,{}):t.jsx(Je,{});return t.jsxs("div",{className:"staking-modal-validator-display-area",children:[t.jsx(Ge,{value:new Xe(e.address)}),t.jsx("br",{}),t.jsxs(Xt,{children:[t.jsx(E,{percentage:.035})," ",t.jsx(c,{text:"APY"})]})," ",n]})},Ln=()=>t.jsx("div",{className:"staking-modal-notice-area",children:t.jsx("p",{children:t.jsx(c,{text:"Only top 100 validators are eligible to receive rewards, and will be sent upon next epoch start."})})}),Mn=()=>{const e=a.useContext(B),r=a.useContext(Ee),n=a.useContext(j)>=e.value?void 0:"insufficient";return t.jsxs("div",{className:"staking-modal-esp-input-area",children:[t.jsx("label",{htmlFor:"staking-modal-esp-input",children:t.jsx(c,{text:"Amount to Stake"})}),t.jsx(Na,{id:"staking-modal-esp-input",className:g(n,"staking-modal-esp-focus-display"),value:e,onChange:(l,i)=>r(i)}),t.jsx(Jn,{})]})},Jn=()=>t.jsxs("div",{className:"staking-modal-input-info-area",children:[t.jsx(Fn,{}),t.jsx(Wn,{})]}),Fn=()=>{const e=a.useContext(B);return a.useContext(j)>=e.value?null:t.jsx("div",{className:"staking-modal-insufficient-balance-warning",children:t.jsx(c,{text:"Insufficient Balance"})})},Wn=()=>{const e=a.useContext(j);return t.jsxs("div",{className:"staking-modal-current-balance-area",children:[t.jsx("span",{className:"staking-modal-current-balance-label",children:t.jsx(c,{text:"Balance"})}),t.jsx("span",{className:"staking-modal-current-balance-value",children:t.jsx(W,{money:P.ESP(e)})})]})};try{Zt.displayName="InitialSummaryAndInteraction",Zt.__docgenInfo={description:"",displayName:"InitialSummaryAndInteraction",props:{}}}catch{}const qn=e=>a.createElement(Ye,{...e,width:0,height:0,viewBox:"0 0 182 20"},t.jsxs("mask",{id:"dots-mask",children:[t.jsx("rect",{width:"182",height:"20",fill:"#000"}),t.jsx("circle",{cx:"2.85714",cy:"2.85714",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"14.571",cy:"2.85714",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"26.2859",cy:"2.85714",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"37.9997",cy:"2.85714",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"49.7146",cy:"2.85714",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"61.4284",cy:"2.85714",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"73.1433",cy:"2.85714",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"84.8571",cy:"2.85714",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"96.571",cy:"2.85714",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"108.286",cy:"2.85714",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"120",cy:"2.85714",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"131.715",cy:"2.85714",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"143.428",cy:"2.85714",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"155.143",cy:"2.85714",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"166.857",cy:"2.85714",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"178.571",cy:"2.85714",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"2.85714",cy:"16.5715",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"14.571",cy:"16.5715",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"26.2859",cy:"16.5715",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"37.9997",cy:"16.5715",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"49.7146",cy:"16.5715",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"61.4284",cy:"16.5715",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"73.1433",cy:"16.5715",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"84.8571",cy:"16.5715",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"96.571",cy:"16.5715",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"108.286",cy:"16.5715",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"120",cy:"16.5715",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"131.715",cy:"16.5715",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"143.428",cy:"16.5715",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"155.143",cy:"16.5715",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"166.857",cy:"16.5715",r:"2.85714",fill:"#fff"}),t.jsx("circle",{cx:"178.571",cy:"16.5715",r:"2.85714",fill:"#fff"})]}));try{decorationdotsmask.displayName="decorationdotsmask",decorationdotsmask.__docgenInfo={description:"DecorationDots represents a series of decorative dots.",displayName:"decorationdotsmask",props:{}}}catch{}const _=()=>t.jsxs(t.Fragment,{children:[t.jsx(qn,{}),t.jsx("div",{className:"staking-modal-progress-indicator-area"})]});try{_.displayName="ProgressIndicatorArea",_.__docgenInfo={description:"",displayName:"ProgressIndicatorArea",props:{}}}catch{}const er=()=>{const e=a.useContext(B),r=a.useContext(j),o=a.useContext(Y)??0n,s=a.useContext(X),n=a.useContext(ie);if(e.value<=0n)return t.jsxs("div",{className:"staking-modal-instructions-and-progress",children:[t.jsx("span",{children:" "}),t.jsx(_,{})]});if(e.value>o){if(n.asyncState===f.none)return t.jsxs("div",{className:"staking-modal-instructions-and-progress",children:[t.jsx("span",{children:t.jsx(c,{text:"Approve transaction first"})}),t.jsx(_,{})]});if(n.hasError)return t.jsxs("div",{className:"staking-modal-instructions-and-progress error",children:[t.jsx("span",{children:t.jsx(c,{text:"Approval Failed"})}),t.jsx(_,{})]});const i=n.data;return n.asyncState===f.waiting||i===null||!(i instanceof Be)?t.jsxs("div",{className:"staking-modal-instructions-and-progress waiting",children:[t.jsx("span",{children:t.jsx(c,{text:"Approving..."})}),t.jsx(_,{})]}):i instanceof Be?t.jsxs("div",{className:"staking-modal-instructions-and-progress approved succeeded",children:[t.jsx("span",{children:t.jsx(c,{text:"Approval successful"})}),t.jsx(_,{})]}):t.jsxs("div",{className:"staking-modal-instructions-and-progress approved",children:[t.jsx("span",{children:" "}),t.jsx(_,{})]})}if(e.value>r)return t.jsxs("div",{className:"staking-modal-instructions-and-progress approved",children:[t.jsx("span",{children:" "}),t.jsx(_,{})]});if(s.asyncState===f.none)return t.jsxs("div",{className:"staking-modal-instructions-and-progress approved",children:[t.jsx("span",{children:t.jsx(c,{text:"Confirm Delegation"})}),t.jsx(_,{})]});if(s.hasError)return t.jsxs("div",{className:"staking-modal-instructions-and-progress approved delegated error",children:[t.jsx("span",{children:t.jsx(c,{text:"Delegation Unsuccessful"})}),t.jsx(_,{})]});const l=s.data;return s.asyncState===f.waiting||l===null||!(l instanceof de)?t.jsxs("div",{className:"staking-modal-instructions-and-progress approved delegated waiting",children:[t.jsx("span",{children:t.jsx(c,{text:"Delegating..."})}),t.jsx(_,{})]}):l instanceof de?t.jsxs("div",{className:"staking-modal-instructions-and-progress approved delegated succeeded",children:[t.jsx("span",{children:t.jsx(c,{text:"Delegation successful"})}),t.jsx(_,{})]}):t.jsxs("div",{className:"staking-modal-instructions-and-progress approved delegated",children:[t.jsx("span",{children:" "}),t.jsx(_,{})]})};try{er.displayName="NewStakeInstructionsAndProgress",er.__docgenInfo={description:"",displayName:"NewStakeInstructionsAndProgress",props:{}}}catch{}const Fe=({children:e})=>t.jsx("div",{className:"staking-modal-content",children:e});try{Fe.displayName="StakingContent",Fe.__docgenInfo={description:"",displayName:"StakingContent",props:{}}}catch{}const We=({children:e})=>t.jsx("div",{className:"staking-modal-header",children:e});try{We.displayName="StakingHeader",We.__docgenInfo={description:"",displayName:"StakingHeader",props:{}}}catch{}const qe=({children:e})=>t.jsx("h2",{className:"staking-modal-title",children:e});try{qe.displayName="StakingModalTitle",qe.__docgenInfo={description:"",displayName:"StakingModalTitle",props:{}}}catch{}const tr=()=>t.jsxs("div",{className:"staking-modal-staking-overview-area",children:[t.jsx(Hn,{}),t.jsx(Un,{}),t.jsx(Kn,{}),t.jsx(zn,{})]}),ot=({children:e})=>t.jsxs("div",{className:"staking-modal-label-value-split",children:[t.jsx("span",{className:"staking-modal-label",children:e[0]}),t.jsx("span",{className:"staking-modal-value",children:e[1]})]}),Hn=()=>t.jsxs(ot,{children:[t.jsx("span",{children:t.jsx(c,{text:"Current Epoch Stake"})}),t.jsx("span",{children:t.jsx(c,{text:"-"})})]}),Un=()=>{const e=a.useContext(ne),r=e?t.jsx(W,{money:P.ESP(e)}):t.jsx(c,{text:"-"});return t.jsxs(ot,{children:[t.jsx("span",{children:t.jsx(c,{text:"Current Stake"})}),t.jsx("span",{children:r})]})},Kn=()=>t.jsxs(ot,{children:[t.jsx("span",{children:t.jsx(c,{text:"Tx Fee"})}),t.jsx("span",{children:t.jsx(c,{text:"-"})})]}),zn=()=>{const e=a.useContext(y);return t.jsxs(ot,{children:[t.jsx("span",{children:t.jsx(c,{text:"Commission"})}),t.jsx("span",{children:t.jsx(E,{percentage:e.commission.ratio})})]})};try{tr.displayName="StakingOverviewArea",tr.__docgenInfo={description:"",displayName:"StakingOverviewArea",props:{}}}catch{}const He=()=>{const e=a.useContext(G);return t.jsxs(t.Fragment,{children:[t.jsxs(We,{children:[t.jsx(Qt,{}),t.jsxs(qe,{children:[t.jsx(c,{text:"Delegate"}),t.jsx(c,{text:" / "}),t.jsx(Ge,{value:new Xe(e)})]}),t.jsx(Ve,{})]}),t.jsxs(Fe,{children:[t.jsx(Zt,{}),t.jsx(tr,{}),t.jsx($n,{}),t.jsx(Gt,{})]})]})},$n=()=>t.jsxs("div",{className:"staking-modal-staking-actions-area",children:[t.jsx($t,{}),t.jsx(er,{}),t.jsx(Yt,{})]});try{He.displayName="NewDelegationContent",He.__docgenInfo={description:"",displayName:"NewDelegationContent",props:{}}}catch{}const rr=()=>t.jsxs(t.Fragment,{children:[t.jsxs(We,{children:[t.jsx(qe,{children:t.jsx(c,{text:"Select a Validator"})}),t.jsx(Ve,{})]}),t.jsx(Fe,{})]});try{rr.displayName="ValidatorSelectionNeededContent",rr.__docgenInfo={description:"",displayName:"ValidatorSelectionNeededContent",props:{}}}catch{}const or=()=>t.jsx(Pt,{className:"staking-modal",closedby:"none",children:t.jsx(Qn,{})}),Qn=()=>{const e=a.useContext(b),r=a.useContext(De);if(r instanceof To){const o=e?.nodes.find(s=>to(s.address,r.validatorAddress)===0)??new et(r.validatorAddress,new ao("",new ArrayBuffer(0)),0n,new H(0));return t.jsx(y.Provider,{value:o,children:t.jsx(G.Provider,{value:r.validatorAddress,children:t.jsx(zt,{children:t.jsx(Gn,{children:t.jsx(Yn,{})})})})})}return t.jsx(rr,{})},Gn=({children:e})=>t.jsx(Ht,{children:t.jsx(qt,{children:t.jsx(Ut,{children:t.jsx(Kt,{children:e})})})}),Yn=()=>{const e=a.useContext(ne);return e===null?t.jsx(t.Fragment,{}):e<=0n?t.jsx(He,{}):t.jsx(He,{})};try{or.displayName="StakingModal",or.__docgenInfo={description:"",displayName:"StakingModal",props:{}}}catch{}var v=(e=>(e[e.rank=0]="rank",e[e.validator=1]="validator",e[e.totalStake=2]="totalStake",e[e.fee=3]="fee",e[e.missedSlots=4]="missedSlots",e[e.participationRate=5]="participationRate",e[e.hotShotConsensus=6]="hotShotConsensus",e))(v||{}),ar=(e=>(e[e.asc=0]="asc",e[e.desc=1]="desc",e))(ar||{});const Ue=a.createContext({sortBy:()=>{}}),sr=a.createContext({sortBy:2,sortDirection:1}),nr=()=>{const[e,r]=a.useState({sortBy:2,sortDirection:1});return{tableState:e,tableControls:{sortBy:s=>{r(n=>{if(n.sortBy!==s)return{...n,sortBy:s};switch(n.sortDirection){case 0:return{...n,sortDirection:1};case 1:return{...n,sortDirection:0}}})}}}};function Xn(e,r){return e[1]-r[1]}function Zn(e,r){return to(e[0].address,r[0].address)}function ec(e,r){return Number(e[0].commission.valueOf()-r[0].commission.valueOf())}function tc(e,r){const o=e[2]?.leaderParticipation.ratio??-1,s=r[2]?.leaderParticipation.ratio??-1;return o-s}function rc(e,r){const o=e[2]?.voterParticipation.ratio??-1,s=r[2]?.voterParticipation.ratio??-1;return o-s}function oc(e,r){return Number(Number(e[2])-Number(r[2]))}function ac(e,r){return Number(e[0].stake-r[0].stake)}function sc(e){switch(e){case 0:return Xn;case 1:return Zn;case 2:return ac;case 3:return ec;case 4:return tc;case 5:return rc;case 6:return oc;default:throw new S}}function nc(e){switch(e){case 0:return r=>r;case 1:return r=>(o,s)=>-r(o,s)}}function cc(e,r,o,s){if(!e)return e;const{sortBy:n,sortDirection:l}=r,p=nc(l)(sc(n));return new Pr(e.l1Block,e.nodes.map(x=>{const k=u.encode(x.address);return[x,o.get(k)??Number.MAX_SAFE_INTEGER,s.get(k)??null]}).sort(p).map(x=>x[0]))}const cr=e=>{const{tableState:r,tableControls:o}=nr(),s=a.useContext(b),n=a.useContext(K),l=a.useContext(A),i=cc(s,r,n,l);return t.jsx(b.Provider,{value:i,children:t.jsx(sr.Provider,{value:r,children:t.jsx(Ue.Provider,{value:o,children:e.children})})})};try{v.displayName="CellType",v.__docgenInfo={description:`CellType enumerates the different types of columns that can be
sorted in the validator table.`,displayName:"CellType",props:{}}}catch{}try{ar.displayName="SortDirection",ar.__docgenInfo={description:"SortDirection enumerates the possible directions for sorting the table.",displayName:"SortDirection",props:{}}}catch{}try{Ue.displayName="TableSortControlsContext",Ue.__docgenInfo={description:"",displayName:"TableSortControlsContext",props:{}}}catch{}try{sr.displayName="TableSortStateContext",sr.__docgenInfo={description:"",displayName:"TableSortStateContext",props:{}}}catch{}try{nr.displayName="useValidatorTableSortState",nr.__docgenInfo={description:`useValidatorTableSortState is a custom hook that manages the sorting state
for the validator table, providing the current state and controls to modify
it.`,displayName:"useValidatorTableSortState",props:{}}}catch{}try{cr.displayName="ValidatorTableSortStateProvider",cr.__docgenInfo={description:`ValidatorTableSortStateProvider is a context provider that manages
the sorting state for the validator table and provides sorted validator
data to its children.`,displayName:"ValidatorTableSortStateProvider",props:{}}}catch{}const ir=()=>t.jsx(t.Fragment,{});try{ir.displayName="ActionsHeadCell",ir.__docgenInfo={description:`ActionsHeadCell is the header cell for the actions to take in the
validator table.`,displayName:"ActionsHeadCell",props:{}}}catch{}const lr=()=>t.jsx(t.Fragment,{children:t.jsx(c,{text:"Claim In"})});try{lr.displayName="ClaimInHeadCell",lr.__docgenInfo={description:`ClaimInHeadCell is the header cell for the Claim In column in the
validator table.`,displayName:"ClaimInHeadCell",props:{}}}catch{}const q=e=>a.createElement(Ye,{...e,viewBox:"0 0 12 12",className:g(e.className,"stroked")},t.jsxs(t.Fragment,{children:[t.jsx("path",{d:"M9.25 7.75049L6 11.0005L2.75 7.75049",strokeWidth:"1.5"}),t.jsx("path",{d:"M9.25 4.25049L6 1.00049L2.75 4.25049",strokeWidth:"1.5"})]}));try{verticalscroll.displayName="verticalscroll",verticalscroll.__docgenInfo={description:"VerticalScroll represents a vertical scroll icon.",displayName:"verticalscroll",props:{}}}catch{}const dr=()=>t.jsxs(t.Fragment,{children:[t.jsx(c,{text:"Commission Rate"})," ",t.jsx(q,{})]});try{dr.displayName="FeeHeadCell",dr.__docgenInfo={description:"FeeHeadCell is the header cell for the Fee column in the validator table.",displayName:"FeeHeadCell",props:{}}}catch{}const pr=()=>t.jsxs(t.Fragment,{children:[t.jsx(c,{text:"Consensus"})," ",t.jsx(q,{})]});try{pr.displayName="HotShotConsensusHeadCell",pr.__docgenInfo={description:`HotShotConsensusHeadCell is the header cell for the HotShot Consensus
column in the validator table.`,displayName:"HotShotConsensusHeadCell",props:{}}}catch{}const ur=()=>t.jsxs(t.Fragment,{children:[t.jsx(c,{text:"Missed Slots"})," ",t.jsx(q,{})]});try{ur.displayName="MissedSlotsHeadCell",ur.__docgenInfo={description:`MissedSlotsHeadCell is the header cell for the Missed Slots column in the
validator table.`,displayName:"MissedSlotsHeadCell",props:{}}}catch{}const mr=()=>t.jsxs(t.Fragment,{children:[t.jsx(c,{text:"Participation"})," ",t.jsx(q,{})]});try{mr.displayName="ParticipationRateHeadCell",mr.__docgenInfo={description:`ParticipationRateHeadCell is the header cell for the Participation Rate
column in the validator table.`,displayName:"ParticipationRateHeadCell",props:{}}}catch{}const hr=()=>t.jsxs(t.Fragment,{children:[t.jsx(c,{text:"Rank"})," ",t.jsx(q,{})]});try{hr.displayName="RankHeadCell",hr.__docgenInfo={description:"RankHeadCell is the header cell for the Rank column in the validator table.",displayName:"RankHeadCell",props:{}}}catch{}const xr=()=>t.jsxs(t.Fragment,{children:[t.jsx(c,{text:"Total Stake"})," ",t.jsx(q,{})]});try{xr.displayName="TotalStakeHeadCell",xr.__docgenInfo={description:`TotalStakeHeadCell is the header cell for the Total Stake column in the
validator table.`,displayName:"TotalStakeHeadCell",props:{}}}catch{}const _r=()=>t.jsxs(t.Fragment,{children:[t.jsx(c,{text:"Validator"})," ",t.jsx(q,{})]});try{_r.displayName="ValidatorHeadCell",_r.__docgenInfo={description:`ValidatorHeadCell is the header cell for the Validator column in the
validator table.`,displayName:"ValidatorHeadCell",props:{}}}catch{}const Ke=()=>{const{sortBy:e}=a.useContext(Ue);return t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:"sortable",onClick:()=>e(v.rank),children:t.jsx(hr,{})}),t.jsx("th",{className:"sortable",onClick:()=>e(v.validator),children:t.jsx(_r,{})}),t.jsx("th",{className:"sortable",onClick:()=>e(v.totalStake),children:t.jsx(xr,{})}),t.jsx("th",{className:"sortable",onClick:()=>e(v.fee),children:t.jsx(dr,{})}),t.jsx("th",{className:"sortable",onClick:()=>e(v.missedSlots),children:t.jsx(ur,{})}),t.jsx("th",{className:"sortable",onClick:()=>e(v.participationRate),children:t.jsx(mr,{})}),t.jsx("th",{className:"sortable",onClick:()=>e(v.hotShotConsensus),children:t.jsx(pr,{})}),t.jsx("th",{children:t.jsx(lr,{})}),t.jsx("th",{children:t.jsx(ir,{})})]})})};try{Ke.displayName="DelegationTableHeader",Ke.__docgenInfo={description:`DelegationTableHeader is a component that renders
the header row of the delegation table with sortable columns.`,displayName:"DelegationTableHeader",props:{}}}catch{}const yr=()=>{const e=a.useContext(y),r=a.useContext(T),o=a.useContext(Ir),s=a.useContext(R),n=a.useContext(L);return!r||o.connectModalOpen?t.jsx(t.Fragment,{children:t.jsx(m,{className:"action",onClick:o.openConnectModal,children:t.jsx(c,{text:"Delegate"})})}):t.jsx(t.Fragment,{children:t.jsx(m,{className:"action",onClick:()=>{n(new To(e.address)),s.open()},children:t.jsx(c,{text:"Delegate"})})})};try{yr.displayName="ActionsCell",yr.__docgenInfo={description:"",displayName:"ActionsCell",props:{}}}catch{}const fr=()=>t.jsx(t.Fragment,{children:t.jsx(c,{text:"-"})});try{fr.displayName="ClaimInCell",fr.__docgenInfo={description:`ClaimInCell displays information related to being able to withdraw claims
from a validator node.`,displayName:"ClaimInCell",props:{}}}catch{}const Cr=()=>{const e=a.useContext(y);return t.jsx(E,{percentage:e.commission.valueOf()})};try{Cr.displayName="FeeCell",Cr.__docgenInfo={description:"FeeCell displays the commission fee of a validator as a percentage.",displayName:"FeeCell",props:{}}}catch{}const gr=()=>{const e=a.useContext(y),r=a.useContext(A),o=I.encode(e.address);return r.has(o)?t.jsx(Me,{}):t.jsx(Je,{})};try{gr.displayName="HotShotConsensusCell",gr.__docgenInfo={description:`HotShotConsensusCell displays whether a validator is part of the
HotShot consensus set using active/inactive consensus chips.`,displayName:"HotShotConsensusCell",props:{}}}catch{}const vr=()=>{const e=a.useContext(y),o=a.useContext(A).get(I.encode(e.address));return o?t.jsx(E,{percentage:1-o.leaderParticipation.ratio}):t.jsx(c,{text:"-"})};try{vr.displayName="MissedSlotsCell",vr.__docgenInfo={description:"MissedSlotsCell displays the percentage of missed slots for a validator.",displayName:"MissedSlotsCell",props:{}}}catch{}const Nr=()=>{const e=a.useContext(y);return t.jsx(Ge,{value:new Xe(e.address)})};try{Nr.displayName="NodeNameCell",Nr.__docgenInfo={description:`NameNodeCell displays the wallet address of a validator node. It is
actually intended to show the name, and an icon for the validator,
but it's currently unclear how we would source this information.`,displayName:"NodeNameCell",props:{}}}catch{}const Sr=()=>{const e=a.useContext(y),o=a.useContext(A).get(I.encode(e.address));return o?t.jsx(E,{percentage:o.voterParticipation.ratio}):t.jsx(c,{text:"-"})};try{Sr.displayName="ParticipationRateCell",Sr.__docgenInfo={description:"ParticipationRateCell displays the voter participation rate for a validator.",displayName:"ParticipationRateCell",props:{}}}catch{}const jr=()=>{const e=a.useContext(y),r=a.useContext(K),o=u.encode(e.address),s=r.get(o);return t.jsx(co,{number:s??-1})};try{jr.displayName="RankCell",jr.__docgenInfo={description:`RankCell is a component that displays
the rank of the current validator node.`,displayName:"RankCell",props:{}}}catch{}const kr=()=>{const e=a.useContext(se),r=a.useContext(y),o=Number(r.stake)/Number(e);return t.jsxs(t.Fragment,{children:[t.jsx(W,{money:P.ESP(r.stake)})," ",t.jsxs("span",{className:"percentage-text",children:["(",t.jsx(E,{percentage:o}),")"]})]})};try{kr.displayName="TotalStakeCell",kr.__docgenInfo={description:`TotalStakeCell displays the stake amount for a validator node, along with its
percentage of the total stake.`,displayName:"TotalStakeCell",props:{}}}catch{}const wr=()=>t.jsxs("tr",{children:[t.jsx("td",{children:t.jsx(jr,{})}),t.jsx("td",{children:t.jsx(Nr,{})}),t.jsx("td",{children:t.jsx(kr,{})}),t.jsx("td",{children:t.jsx(Cr,{})}),t.jsx("td",{children:t.jsx(vr,{})}),t.jsx("td",{children:t.jsx(Sr,{})}),t.jsx("td",{children:t.jsx(gr,{})}),t.jsx("td",{children:t.jsx(fr,{})}),t.jsx("td",{children:t.jsx(yr,{})})]});try{wr.displayName="NodeValidatorTableRow",wr.__docgenInfo={description:`NodeValidatorTableRow is a component that represents a single row
in the validator nodes table, displaying various details about the validator.`,displayName:"NodeValidatorTableRow",props:{}}}catch{}const br=()=>{const e=a.useContext(b);return e?t.jsxs("table",{className:"all-validators-table",children:[t.jsx(Ke,{}),t.jsx("tbody",{children:e.nodes.map((r,o)=>t.jsx(y.Provider,{value:r,children:t.jsx(wr,{})},o))})]}):t.jsx(t.Fragment,{})};try{br.displayName="DelegationTable",br.__docgenInfo={description:`DelegationTable is a component that renders
the table of validator nodes in the delegation UI.`,displayName:"DelegationTable",props:{}}}catch{}const Jr=a.createContext(0),Jo=a.createContext(()=>{}),ic=()=>t.jsxs("table",{className:"all-validators-table",children:[t.jsx(Ke,{}),t.jsx("tbody",{children:t.jsx("tr",{children:t.jsxs("td",{className:"no-data",colSpan:8,children:[t.jsx(c,{text:"Nothing brewing yet..."}),t.jsx("br",{}),t.jsx("br",{}),t.jsx(Fo,{})]})})})]}),lc=()=>{switch(a.useContext(Jr)){case 0:return t.jsx(br,{});case 1:return t.jsx(ic,{})}},Ar=()=>t.jsx(pc,{children:t.jsxs(It,{children:[t.jsx(or,{}),t.jsxs("section",{className:"delegation-ui-content edge-margin",children:[t.jsx(Wt,{}),t.jsx(Ot,{}),t.jsx(dc,{}),t.jsx(cr,{children:t.jsx(lc,{})}),t.jsx("br",{}),t.jsx("br",{})]})]})}),dc=()=>{const e=a.useContext(Jr),r=a.useContext(Jo);return t.jsxs("div",{className:"delegation-ui-table-controls",children:[t.jsx(Dt,{selected:e,onSelectionChange:o=>{r(o)},segments:[{value:0,label:t.jsx(c,{text:"All"})},{value:1,label:t.jsx(c,{text:"My Stakes"})}]}),t.jsx(Fo,{})]})},pc=({children:e})=>{const[r,o]=a.useState(0);return t.jsx(Jr.Provider,{value:r,children:t.jsx(Jo.Provider,{value:o,children:e})})},Fo=()=>{const e=a.useContext(T),r=a.useContext(Ir),o=a.useContext(R);return!e||r.connectModalOpen?t.jsxs(m,{onClick:r.openConnectModal,children:[t.jsx(wt,{}),t.jsx(c,{text:"Delegate"})]}):t.jsxs(m,{onClick:o.open,children:[t.jsx(wt,{}),t.jsx(c,{text:"Delegate"})]})};try{Ar.displayName="DelegationUIContent",Ar.__docgenInfo={description:`DelegationUIContent is the main content area for the Delegation UI page.

It defines the layout and structure of the content that is displayed within
the Delegation UI.

All of the content is displayed within a dedicated element to define the
area for styling purposes, and for content display.`,displayName:"DelegationUIContent",props:{}}}catch{}const uc=()=>t.jsx(mc,{children:t.jsxs("main",{className:"delegation-ui",children:[t.jsx(At,{}),t.jsx(Ar,{})]})}),mc=({children:e})=>t.jsx(_t,{children:t.jsx(St,{children:t.jsx(ft,{children:t.jsx(mt,{children:t.jsx(ht,{children:t.jsx(ut,{children:t.jsx(vt,{children:t.jsx(xt,{children:t.jsx(gt,{children:t.jsx(kt,{children:e})})})})})})})})})});try{delegationui.displayName="delegationui",delegationui.__docgenInfo={description:`DelegationUI is a component that represents the entire Delegation UI
self contained page.`,displayName:"delegationui",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const hc=({environment:e,stakeTableContractAddress:r,espTokenContractAddress:o,hotshotQueryServiceURL:s,nodeValidatorWebSocketURL:n,l1ValidatorServiceURL:l,...i})=>t.jsx(t.Fragment,{children:t.jsxs(Zo,{environment:e,stakeTableContractAddress:r,espTokenContractAddress:o,hotshotQueryServiceURL:s,nodeValidatorWebSocketURL:n,l1ValidatorServiceURL:l,children:[t.jsx(Uo,{}),t.jsx(qo,{children:t.jsx(oa,{children:t.jsx(pt,{children:t.jsx(uc,{...i})})})})]})}),fi={title:"Sites/Delegation UI/Page",component:hc,parameters:{layout:"fullscreen"},args:{environment:Ho.fakeData,stakeTableContractAddress:void 0,espTokenContractAddress:void 0,hotshotQueryServiceURL:void 0,nodeValidatorWebSocketURL:void 0,l1ValidatorServiceURL:void 0},argTypes:{...Ko,l1ValidatorServiceURL:{control:"text"}},globals:{background:"light",parameters:{backgrounds:{default:"light",options:{light:{name:"Light",value:"#f8fafcff"}}}}}},fe={},Ce={args:zo},ge={args:$o},ve={args:Qo},Ne={args:Go},Se={args:Yo},je={args:Xo};fe.parameters={...fe.parameters,docs:{...fe.parameters?.docs,source:{originalSource:"{}",...fe.parameters?.docs?.source}}};Ce.parameters={...Ce.parameters,docs:{...Ce.parameters?.docs,source:{originalSource:`{
  args: environmentArgsMilkWithContracts
}`,...Ce.parameters?.docs?.source}}};ge.parameters={...ge.parameters,docs:{...ge.parameters?.docs,source:{originalSource:`{
  args: environmentArgsWaterWithContracts
}`,...ge.parameters?.docs?.source}}};ve.parameters={...ve.parameters,docs:{...ve.parameters?.docs,source:{originalSource:`{
  args: environmentArgsDecafWithContracts
}`,...ve.parameters?.docs?.source}}};Ne.parameters={...Ne.parameters,docs:{...Ne.parameters?.docs,source:{originalSource:`{
  args: environmentArgsMainnetWithContracts
}`,...Ne.parameters?.docs?.source}}};Se.parameters={...Se.parameters,docs:{...Se.parameters?.docs,source:{originalSource:`{
  args: environmentArgsFakeDataWithContracts
}`,...Se.parameters?.docs?.source}}};je.parameters={...je.parameters,docs:{...je.parameters?.docs,source:{originalSource:`{
  args: environmentArgsLocalDevNetWithContracts
}`,...je.parameters?.docs?.source}}};const Ci=["Default","Milk","Water","Decaf","Mainnet","FakeData","LocalDevNet"];export{ve as Decaf,fe as Default,Se as FakeData,je as LocalDevNet,Ne as Mainnet,Ce as Milk,ge as Water,Ci as __namedExportsOrder,fi as default};
