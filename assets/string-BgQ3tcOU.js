var b=Object.defineProperty;var x=(r,e,o)=>e in r?b(r,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[e]=o;var s=(r,e,o)=>(x(r,typeof e!="symbol"?e+"":e,o),o);class i extends Error{constructor(o,n,a=`expected object with key: "${n}", instead found ${o}`){super(a);s(this,"key");s(this,"haveType");this.haveType=o,this.key=n,Object.freeze(this)}toJSON(){return{code:i.name,message:this.message,have:this.haveType,key:this.key}}}class f{encode(e){return this.encoder.convert(e)}decode(e){return this.decoder.convert(e)}}class w extends f{}function X(r){return typeof r=="boolean"}function Y(r){return typeof r=="number"}function E(r){return typeof r=="string"}function p(r){return typeof r=="object"&&r!==null}function $(r){return r!==void 0}function j(r,e){return Array.isArray(r)&&r.every(e)}function k(r){return e=>j(e,r)}function Z(r,e,o){return p(r)&&e in r&&o(r[e])}function v(r,...e){if(typeof r!="object")throw new Error("expected object");if(r===null)throw new Error("received null");for(const o of e)if(!(o in r))throw new i("object",o)}function A(r,e){if(!E(r.code))throw new Error("code must be a string");if(r.code!==e)throw new Error(`expected code to be ${e}, got ${r.code}`)}class O{assert(){}}function S(){return new O}const T=S();function h(r,e){T.assert(r,e)}function N(r,e){h(typeof r===e,`type assertion failed: expected "${e}", received "${typeof r}"`)}function _(r){h(r!==null,"expected a non-null value, received null")}function u(r,e){h(r instanceof e,`given value is not an instance of "${e.name}", specific type is "${typeof r=="object"&&r!==null?r.constructor.name:typeof r}"`)}class m extends Error{constructor(e){super(e)}get code(){return this.constructor.name}toJSON(){return g.convert(this)}}class I{convert(e){return u(e,m),{code:e.code,message:e.message}}}const g=new I;class d extends Error{constructor(o,n=`no codec found for: "${o}"`){super(n);s(this,"codec");this.codec=o,Object.freeze(this);debugger}toJSON(){return{code:c.encode(d.name),message:c.encode(this.message),codec:c.encode(this.codec)}}}const l=new Map;class B{convert(e){v(e,"code");const o=c.decode(e.code),n=l.get(o);if(!n)throw new d(o);return n.decode(e)}}class D{convert(e){const o=l.get(e.code);if(!o)throw new d(e.code);return o.encode(e)}}class J extends f{constructor(){super(...arguments);s(this,"encoder",new D);s(this,"decoder",new B)}}const ee=new J;function R(r,e){l.set(r,e)}class t extends m{constructor(o,n,a=`invalid type: have "${o}", want "${n}"`){super(a);s(this,"have");s(this,"want");this.have=o,this.want=n,Object.freeze(this)}toJSON(){return C.encode(this)}}class U{convert(e){return v(e,"code","have","want","message"),A(e,t.name),new t(c.decode(e.have),c.decode(e.want),c.decode(e.message))}}class z{convert(e){return u(e,t),{...g.convert(e),have:c.encode(e.have),want:c.encode(e.want)}}}class M extends w{constructor(){super(...arguments);s(this,"encoder",new z);s(this,"decoder",new U)}}const C=new M;R(t.name,C);const q=k($);class F{convert(e){return e}}const y=new F;class K extends f{constructor(){super(...arguments);s(this,"encoder",y);s(this,"decoder",y)}}const re=new K;class W{constructor(e){s(this,"itemCodec");this.itemCodec=e}convert(e){if(!q(e)){const o=typeof e=="object"&&e!==null?e.constructor.name:typeof e,n="array";throw new Error(`invalid array value: have "${o}", want "${n}"`)}return e.map(o=>this.itemCodec.decode(o))}}class G{constructor(e){s(this,"itemCodec");this.itemCodec=e}convert(e){return u(e,Array),e.map(o=>this.itemCodec.encode(o))}}class H extends w{constructor(o,n){super();s(this,"encoder");s(this,"decoder");this.encoder=n,this.decoder=o}}class L{convert(e){if(!E(e))throw new t(typeof e,"string");return e}}class P{convert(e){return N(e,"string"),e}}class Q extends w{constructor(){super(...arguments);s(this,"encoder",new P);s(this,"decoder",new L)}}const c=new Q;new H(new W(c),new G(c));export{H as A,m as B,f as C,t as I,w as T,v as a,A as b,g as c,I as d,u as e,W as f,G as g,N as h,Y as i,E as j,_ as k,X as l,q as m,Z as n,$ as o,ee as p,h as q,R as r,c as s,re as u};
