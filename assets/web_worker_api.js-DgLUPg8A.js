var Bl=Object.defineProperty;var Dl=(te,$,oe)=>$ in te?Bl(te,$,{enumerable:!0,configurable:!0,writable:!0,value:oe}):te[$]=oe;var o=(te,$,oe)=>(Dl(te,typeof $!="symbol"?$+"":$,oe),oe);(function(){"use strict";class te{assert(){}}function $(){return new te}const oe=$();function D(r,e){oe.assert(r,e)}function pr(r,e){D(typeof r===e,`type assertion failed: expected "${e}", received "${typeof r}"`)}function dn(r){D(r!==null,"expected a non-null value, received null")}function h(r,e){D(r instanceof e,`given value is not an instance of "${e.name}", specific type is "${typeof r=="object"&&r!==null?r.constructor.name:typeof r}"`)}class wr extends Error{constructor(t,n,c=`expected object with key: "${n}", instead found ${t}`){super(c);o(this,"key");o(this,"haveType");this.haveType=t,this.key=n,Object.freeze(this)}toJSON(){return{code:wr.name,message:this.message,have:this.haveType,key:this.key}}}class b{encode(e){return this.encoder.convert(e)}decode(e){return this.decoder.convert(e)}}class u extends b{}function ln(r){return typeof r=="boolean"}function $t(r){return typeof r=="number"}function me(r){return typeof r=="string"}function un(r){return typeof r=="object"&&r!==null}function P(r){return r!==void 0}function hn(r,e){return Array.isArray(r)&&r.every(e)}function mn(r){return e=>hn(e,r)}function O(r,e,t){return un(r)&&e in r&&t(r[e])}function d(r,...e){if(typeof r!="object")throw new Error("expected object");if(r===null)throw new Error("received null");for(const t of e)if(!(t in r))throw new wr("object",t)}function C(r,e){if(!me(r.code))throw new Error("code must be a string");if(r.code!==e)throw new Error(`expected code to be ${e}, got ${r.code}`)}const jt=mn(P);class pn{convert(e){return e}}const Vt=new pn;class wn extends b{constructor(){super(...arguments);o(this,"encoder",Vt);o(this,"decoder",Vt)}}const Be=new wn;class L{constructor(e){o(this,"itemCodec");this.itemCodec=e}convert(e){if(!jt(e)){const t=typeof e=="object"&&e!==null?e.constructor.name:typeof e,n="array";throw new Error(`invalid array value: have "${t}", want "${n}"`)}return e.map(t=>this.itemCodec.decode(t))}}class F{constructor(e){o(this,"itemCodec");this.itemCodec=e}convert(e){return h(e,Array),e.map(t=>this.itemCodec.encode(t))}}class M extends u{constructor(t,n){super();o(this,"encoder");o(this,"decoder");this.encoder=n,this.decoder=t}}class fn{convert(e){if(!me(e))throw new A(typeof e,"string");return e}}class gn{convert(e){return pr(e,"string"),e}}class yn extends u{constructor(){super(...arguments);o(this,"encoder",new gn);o(this,"decoder",new fn)}}const m=new yn;new M(new L(m),new F(m));class S extends Error{constructor(e){super(e)}get code(){return this.constructor.name}toJSON(){return z.convert(this)}}class H{convert(e){return h(e,S),{code:e.code,message:e.message}}}const z=new H;class De extends Error{constructor(t,n=`no codec found for: "${t}"`){super(n);o(this,"codec");this.codec=t,Object.freeze(this);debugger}toJSON(){return{code:m.encode(De.name),message:m.encode(this.message),codec:m.encode(this.codec)}}}const fr=new Map;class Cn{convert(e){d(e,"code");const t=m.decode(e.code),n=fr.get(t);if(!n)throw new De(t);return n.decode(e)}}class vn{convert(e){const t=fr.get(e.code);if(!t)throw new De(e.code);return t.encode(e)}}class xn extends b{constructor(){super(...arguments);o(this,"encoder",new vn);o(this,"decoder",new Cn)}}const Ae=new xn;function v(r,e){fr.set(r,e)}class A extends S{constructor(t,n,c=`invalid type: have "${t}", want "${n}"`){super(c);o(this,"have");o(this,"want");this.have=t,this.want=n,Object.freeze(this)}toJSON(){return Qt.encode(this)}}class bn{convert(e){return d(e,"code","have","want","message"),C(e,A.name),new A(m.decode(e.have),m.decode(e.want),m.decode(e.message))}}class En{convert(e){return h(e,A),{...z.convert(e),have:m.encode(e.have),want:m.encode(e.want)}}}class Sn extends u{constructor(){super(...arguments);o(this,"encoder",new En);o(this,"decoder",new bn)}}const Qt=new Sn;v(A.name,Qt);class kn{convert(e){if(!$t(e))throw new A(typeof e,"number");return e}}class In{convert(e){return pr(e,"number"),e}}class Tn extends u{constructor(){super(...arguments);o(this,"encoder",new In);o(this,"decoder",new kn)}}const s=new Tn,I=new M(new L(s),new F(s));class j extends S{constructor(e="unimplemented"){super(e),Object.freeze(this);debugger}}class Rn{convert(e){return d(e,"code","message"),C(e,j.name),new j(m.decode(e.message))}}class Bn extends H{}class Dn extends u{constructor(){super(...arguments);o(this,"encoder",new Bn);o(this,"decoder",new Rn)}}const An=new Dn;v(j.name,An);class T extends S{constructor(e="invalid input"){super(e),Object.freeze(this)}}class _n{convert(e){return d(e,"code","message"),C(e,T.name),new T(m.decode(e.message))}}class Pn extends H{}class On extends u{constructor(){super(...arguments);o(this,"encoder",new Pn);o(this,"decoder",new _n)}}const Nn=new On;v(T.name,Nn);const se=s;class Kt{constructor(e,t,n,c){o(this,"requestID");o(this,"api");o(this,"method");o(this,"param");this.requestID=e,this.api=t,this.method=n,this.param=c}toJSON(){return{requestID:this.requestID,api:this.api,method:this.method,param:this.param}}}class Un{convert(e){return d(e,"requestID","api","method","param"),new Kt(se.decode(e.requestID),m.decode(e.api),m.decode(e.method),e.param)}}class Ln{convert(e){return h(e,Kt),{requestID:se.encode(e.requestID),api:m.encode(e.api),method:m.encode(e.method),param:e.param}}}class Fn extends u{constructor(){super(...arguments);o(this,"encoder",new Ln);o(this,"decoder",new Un)}}const Mn=new Fn;class Yt{constructor(e){o(this,"requestID");this.requestID=e}}class gr extends Yt{constructor(t,n){super(t);o(this,"response");this.response=n}toJSON(){return Xt.encode(this)}}class Hn{convert(e){return d(e,"requestID","response"),new gr(se.decode(e.requestID),e.response)}}class zn{convert(e){return h(e,gr),{requestID:se.encode(e.requestID),response:e.response}}}class Gn extends u{constructor(){super(...arguments);o(this,"encoder",new zn);o(this,"decoder",new Hn)}}const Xt=new Gn;class yr extends Yt{constructor(t,n){super(t);o(this,"error");this.error=n}toJSON(){return Zt.encode(this)}}class Jn{convert(e){return d(e,"requestID","error"),new yr(se.decode(e.requestID),Ae.decode(e.error))}}class qn{convert(e){return h(e,yr),{requestID:se.encode(e.requestID),error:Ae.encode(e.error)}}}class Wn extends u{constructor(){super(...arguments);o(this,"encoder",new qn);o(this,"decoder",new Jn)}}const Zt=new Wn;class G extends S{constructor(t,n=`corrupt input error at ${t}`){super(n);o(this,"offset");this.offset=t,Object.freeze(this)}toJSON(){return eo.encode(this)}}class $n{convert(e){return d(e,"code","offset","message"),C(e,G.name),new G(s.decode(e.offset),m.decode(e.message))}}class jn{convert(e){return h(e,G),{...z.convert(e),offset:s.encode(e.offset),message:m.encode(e.message)}}}class Vn extends u{constructor(){super(...arguments);o(this,"encoder",new jn);o(this,"decoder",new $n)}}const eo=new Vn;v(G.name,eo);class _e extends S{constructor(e="incorrect padding"){super(e),Object.freeze(this)}}class Qn{convert(e){return d(e,"code","message"),C(e,_e.name),new _e(m.decode(e.message))}}class Kn extends H{}class Yn extends u{constructor(){super(...arguments);o(this,"encoder",new Kn);o(this,"decoder",new Qn)}}const Xn=new Yn;v(_e.name,Xn);class pe extends S{constructor(t,n=`alphabet needs to be 64 characters, received ${t}`){super(n);o(this,"length");this.length=t,Object.freeze(this)}toJSON(){return ro.encode(this)}}class Zn{convert(e){return d(e,"code","length","message"),C(e,pe.name),new pe(s.decode(e.length),m.decode(e.message))}}class ec{convert(e){return h(e,pe),{...z.convert(e),length:s.encode(e.length)}}}class rc extends u{constructor(){super(...arguments);o(this,"encoder",new ec);o(this,"decoder",new Zn)}}const ro=new rc;v(pe.name,ro);const tc=new TextEncoder;function to(r){return tc.encode(r)}const oc=new TextDecoder;function nc(r){return oc.decode(r)}function*oo(r){yield*to(r)}function*cc(){for(let r=0;r<256;r++)yield 255}const we=-1,sc=61;class fe{constructor(e,t,n=sc,c=!1){o(this,"encodeMap");o(this,"decodeMap");o(this,"padChar");o(this,"strict");this.encodeMap=e,this.decodeMap=t,this.padChar=n,this.strict=c}static withAlphabet(e){const t=e.length;if(t!==64)throw new pe(t);const n=Array.from(oo(e)),c=Array.from(cc());for(let a=0;a<t;a++)c[n[a]]=a;return new fe(n,c)}withPadding(e){return new fe(this.encodeMap,this.decodeMap,e,this.strict)}encode(e){if(e.byteLength===0)return new ArrayBuffer(0);let t=0,n=0;const c=Math.floor(e.byteLength/3)*3,a=Math.ceil(e.byteLength/3)*4,i=new ArrayBuffer(a),l=new DataView(e),f=new DataView(i);for(;n<c;){const g=l.getUint8(n+0)<<16|l.getUint8(n+1)<<8|l.getUint8(n+2);f.setUint8(t+0,this.encodeMap[g>>18&63]),f.setUint8(t+1,this.encodeMap[g>>12&63]),f.setUint8(t+2,this.encodeMap[g>>6&63]),f.setUint8(t+3,this.encodeMap[g&63]),n+=3,t+=4}const p=e.byteLength-n;if(p===0)return i;let y=l.getUint8(n+0)<<16;switch(p===2&&(y|=l.getUint8(n+1)<<8),f.setUint8(t+0,this.encodeMap[y>>18&63]),f.setUint8(t+1,this.encodeMap[y>>12&63]),p){case 2:return f.setUint8(t+2,this.encodeMap[y>>6&63]),this.padChar!==we?(f.setUint8(t+3,this.padChar),i.slice(0,t+4)):i.slice(0,t+3);case 1:if(this.padChar!==we)return f.setUint8(t+2,this.padChar),f.setUint8(t+3,this.padChar),i.slice(0,t+4);break}return i.slice(0,t+2)}decode(e){const t=e.byteLength;if(t===0)return new ArrayBuffer(0);const n=new DataView(e),c=new ArrayBuffer(Math.floor(t/4*3)),a=new DataView(c),i=new ArrayBuffer(4),l=new DataView(i);let f=0,p=0,y=0,g=!1;for(;p<t&&!g;){let E=3,U=4;for(let B=0;B<4;B++){if(p===t){if(B===0)return c;if(B===1||this.padChar!==we)throw new G(p-B);E=B-1,U=B,g=!0;break}const W=n.getUint8(p);p++;const an=this.decodeMap[W];if(an!==255){l.setUint8(B,an);continue}if(W===10||W===13){B--;continue}if(W===this.padChar){switch(B){case 0:case 1:throw new _e;case 2:for(;p<t&&(n.getUint8(p)===10||n.getUint8(p)===13);)p++;if(p===t)throw new G(t);p++}for(;p<t&&(n.getUint8(p)===10||n.getUint8(p)===13);)p++;if(p<t)throw new G(p);E=3,U=B,g=!0;break}throw new G(p-1)}const R=l.getUint8(0)<<18|l.getUint8(1)<<12|l.getUint8(2)<<6|l.getUint8(3);switch(l.setUint8(2,R>>0&255),l.setUint8(1,R>>8&255),l.setUint8(0,R>>16&255),U){case 4:a.setUint8(y+2,l.getUint8(2)),l.setUint8(2,0);case 3:if(a.setUint8(y+1,l.getUint8(1)),this.strict&&l.getUint8(2)!==0)throw new G(p-1);case 2:if(a.setUint8(y+0,l.getUint8(0)),this.strict&&(l.getUint8(1)!==0||l.getUint8(2)!==0))throw new G(p-2)}y+=E,f+=U-1}return c.slice(0,f)}decodeString(e){return this.decode(to(e).buffer)}encodeToString(e){return nc(this.encode(e))}}const no=fe.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),ac=no.withPadding(we),co=fe.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Cr=co.withPadding(we);class Pe extends S{constructor(e="invalid tagged base64 encoding"){super(e),Object.freeze(this)}toJSON(){return so.encode(this)}}class ic{convert(e){return d(e,"code","message"),C(e,Pe.name),new Pe(m.decode(e.message))}}class dc extends H{}class lc extends u{constructor(){super(...arguments);o(this,"encoder",new dc);o(this,"decoder",new ic)}}const so=new lc;v(Pe.name,so);class x{constructor(e,t){o(this,"tag");o(this,"data");this.tag=e,this.data=t}static fromString(e){const t=e.indexOf("~");if(t<0)throw new Pe;const n=e.substring(0,t),c=Cr.decodeString(e.substring(t+1));return new x(n,c)}static inflate(e){return w.decode(e)}toString(){return`${this.tag}~${Cr.encodeToString(this.data)}`}valueOf(){return this.toString()}toJSON(){return this.toString()}}class uc{convert(e){if(typeof e!="string")throw new A(typeof e,"string");return x.fromString(e)}}class hc{convert(e){return h(e,x),e.toString()}}class mc extends u{constructor(){super(...arguments);o(this,"encoder",new hc);o(this,"decoder",new uc)}}const w=new mc;class ge extends S{constructor(e="invalid hex string"){super(e),Object.freeze(this)}}class pc{convert(e){return d(e,"code","message"),C(e,ge.name),new ge(m.decode(e.message))}}class wc extends H{}class fc extends u{constructor(){super(...arguments);o(this,"encoder",new wc);o(this,"decoder",new pc)}}const gc=new fc;v(ge.name,gc);class Oe extends S{constructor(t,n=`invalid hex value "${t}"`){super(n);o(this,"value");this.value=t,Object.freeze(this)}toJSON(){return ao.encode(this)}}class yc{convert(e){return d(e,"code","value","message"),C(e,Oe.name),new Oe(s.decode(e.value),m.decode(e.message))}}class Cc{convert(e){return{...z.convert(e),value:s.encode(e.value)}}}class vc extends u{constructor(){super(...arguments);o(this,"encoder",new Cc);o(this,"decoder",new yc)}}const ao=new vc;v(Oe.name,ao);class xc{constructor(e,t){o(this,"value");o(this,"next");this.value=e,this.next=t}[Symbol.iterator](){return io(this)}}function bc(r,e){return new xc(e,r)}function*io(r){if(r!==null)for(let e=r;e!==null;e=e.next)yield e.value}class ae extends S{constructor(e="missing element"){super(e),Object.freeze(this)}}class Ec{convert(e){return d(e,"code","message"),C(e,ae.name),new ae(m.decode(e.message))}}class Sc extends H{}class kc extends u{constructor(){super(...arguments);o(this,"encoder",new Sc);o(this,"decoder",new Ec)}}const Ic=new kc;v(ae.name,Ic);function*Tc(r,e){for(let t=r.next();!t.done;t=r.next())yield e(t.value)}function*Rc(r,e){for(let t=0,n=r.next();t<e&&!n.done;t++,n=r.next())yield n.value}function Bc(r,e){return Rc(r[Symbol.iterator](),e)}function*Dc(){let r=0;for(;;)yield r++}function Ac(r){return Bc(Dc(),Math.ceil(r))}function lo(r){if(r.startsWith("0x"))return lo(r.substring(2));if(r.length&1)throw new ge;const e=new ArrayBuffer(r.length/2);return _c(oo(r),e),e}function _c(r,e){const t=new DataView(e);let n=0;for(;n<e.byteLength;){const c=r.next(),a=r.next();if(c.done||a.done)throw new ge;const i=uo(c.value),l=uo(a.value),f=i<<4|l;t.setUint8(n,f),n++}}function uo(r){if(r>=48&&r<=57)return r-48;if(r>=97&&r<=102)return r-97+10;if(r>=65&&r<=70)return r-65+10;throw new Oe(r)}function Pc(r){return r.toString(16).padStart(2,"0")}function*Oc(r){yield*Tc(r,Pc)}function Nc(r){return Oc(r[Symbol.iterator]())}class Uc{convert(e){if(typeof e!="string")throw new A(typeof e,"string");return lo(e)}}class Lc{convert(e){return h(e,ArrayBuffer),["0x",...Nc(new Uint8Array(e))].join("")}}class Fc extends u{constructor(){super(...arguments);o(this,"encoder",new Lc);o(this,"decoder",new Uc)}}const k=new Fc;class Mc{constructor(e){o(this,"encoding");this.encoding=e}convert(e){if(typeof e!="string")throw new A(typeof e,"string");return this.encoding.decodeString(e)}}class Hc{constructor(e){o(this,"encoding");this.encoding=e}convert(e){return this.encoding.encodeToString(e)}}class Ne extends u{constructor(t){super();o(this,"encoder");o(this,"decoder");this.encoder=new Hc(t),this.decoder=new Mc(t)}}new Ne(Cr),new Ne(ac);const ho=new Ne(co),mo=new Ne(no);class vr{constructor(e,t,n){o(this,"r");o(this,"s");o(this,"v");this.r=e,this.s=t,this.v=n}toJSON(){return xr.encode(this)}}class zc{convert(e){return d(e,"r","s","v"),new vr(k.decode(e.r),k.decode(e.s),s.decode(e.v))}}class Gc{convert(e){return h(e,vr),{r:k.encode(e.r),s:k.encode(e.s),v:s.encode(e.v)}}}class Jc extends u{constructor(){super(...arguments);o(this,"encoder",new Gc);o(this,"decoder",new zc)}}const xr=new Jc;class br{constructor(e,t){o(this,"account");o(this,"amount");this.account=e,this.amount=t}toJSON(){return Er.encode(this)}}class qc{convert(e){return d(e,"account","amount"),new br(k.decode(e.account),k.decode(e.amount))}}class Wc{convert(e){return h(e,br),{account:k.encode(e.account),amount:k.encode(e.amount)}}}class $c extends u{constructor(){super(...arguments);o(this,"encoder",new Wc);o(this,"decoder",new qc)}}const Er=new $c;class po{constructor(e){o(this,"itemCodec");this.itemCodec=e}convert(e){return e===null?null:this.itemCodec.decode(e)}}class wo{constructor(e){o(this,"itemCodec");this.itemCodec=e}convert(e){return e===null?null:(dn(e),this.itemCodec.encode(e))}}class fo extends u{constructor(t,n){super();o(this,"encoder");o(this,"decoder");this.encoder=n,this.decoder=t}}class Sr{constructor(e,t,n){o(this,"number");o(this,"timestamp");o(this,"hash");this.number=e,this.timestamp=t,this.hash=n}toJSON(){return kr.encode(this)}}class jc{convert(e){return d(e,"number","timestamp","hash"),new Sr(s.decode(e.number),m.decode(e.timestamp),m.decode(e.hash))}}class Vc{convert(e){return h(e,Sr),{number:s.encode(e.number),timestamp:m.encode(e.timestamp),hash:m.encode(e.hash)}}}class Qc extends u{constructor(){super(...arguments);o(this,"encoder",new Vc);o(this,"decoder",new jc)}}const kr=new Qc,go=new fo(new po(kr),new wo(kr));class Ir{constructor(e){o(this,"bytes");this.bytes=e}toJSON(){return Tr.encode(this)}}class Kc{convert(e){return d(e,"bytes"),new Ir(ho.decode(e.bytes))}}class Yc{convert(e){return h(e,Ir),{bytes:ho.encode(e.bytes)}}}class Xc extends u{constructor(){super(...arguments);o(this,"encoder",new Yc);o(this,"decoder",new Kc)}}const Tr=new Xc;class Rr{constructor(e,t,n,c,a,i,l,f,p,y){o(this,"height");o(this,"timestamp");o(this,"l1_head");o(this,"l1_finalized");o(this,"payload_commitment");o(this,"ns_table");o(this,"block_merkle_root");o(this,"fee_merkle_root");o(this,"builder_signature");o(this,"fee_info");this.height=e,this.timestamp=t,this.l1_head=n,this.l1_finalized=c,this.payload_commitment=a,this.ns_table=i,this.block_merkle_root=l,this.fee_merkle_root=f,this.builder_signature=p,this.fee_info=y}toJSON(){return V.encode(this)}}class Zc{convert(e){return d(e,"height","timestamp","l1_head","l1_finalized","payload_commitment","ns_table","block_merkle_root","fee_merkle_root","builder_signature","fee_info"),new Rr(s.decode(e.height),s.decode(e.timestamp),s.decode(e.l1_head),go.decode(e.l1_finalized),I.decode(e.payload_commitment),Tr.decode(e.ns_table),w.decode(e.block_merkle_root),w.decode(e.fee_merkle_root),xr.decode(e.builder_signature),Er.decode(e.fee_info))}}class es{convert(e){return h(e,Rr),{height:s.encode(e.height),timestamp:s.encode(e.timestamp),l1_head:s.encode(e.l1_head),l1_finalized:go.encode(e.l1_finalized),payload_commitment:I.encode(e.payload_commitment),ns_table:Tr.encode(e.ns_table),block_merkle_root:w.encode(e.block_merkle_root),fee_merkle_root:w.encode(e.fee_merkle_root),builder_signature:xr.encode(e.builder_signature),fee_info:Er.encode(e.fee_info)}}}class rs extends u{constructor(){super(...arguments);o(this,"encoder",new es);o(this,"decoder",new Zc)}}const V=new rs;class ye{constructor(e,t){o(this,"vm");o(this,"payload");this.vm=e,this.payload=t}toJSON(){return ne.encode(this)}}class ts{convert(e){return d(e,"vm","payload"),new ye(s.decode(e.vm),I.decode(e.payload))}}class os{convert(e){return h(e,ye),{vm:s.encode(e.vm),payload:I.encode(e.payload)}}}class ns extends u{constructor(){super(...arguments);o(this,"encoder",new os);o(this,"decoder",new ts)}}const ne=new ns,yo=new M(new L(ne),new F(ne));class Br{constructor(e){o(this,"transaction_nmt");this.transaction_nmt=e}toJSON(){return Ce.encode(this)}}class cs{convert(e){return d(e,"transaction_nmt"),new Br(yo.decode(e.transaction_nmt))}}class ss{convert(e){return h(e,Br),{transaction_nmt:yo.encode(e.transaction_nmt)}}}class as extends u{constructor(){super(...arguments);o(this,"encoder",new ss);o(this,"decoder",new cs)}}const Ce=new as;class Dr{constructor(e,t,n,c,a){o(this,"header");o(this,"payload");o(this,"hash");o(this,"size");o(this,"numTransactions");this.header=e,this.payload=t,this.hash=n,this.size=c,this.numTransactions=a}toJSON(){return Ar.encode(this)}}class is{convert(e){return d(e,"header","payload","hash","size","num_transactions"),new Dr(V.decode(e.header),Ce.decode(e.payload),w.decode(e.hash),s.decode(e.size),s.decode(e.num_transactions))}}class ds{convert(e){return h(e,Dr),{header:V.encode(e.header),payload:Ce.encode(e.payload),hash:w.encode(e.hash),size:s.encode(e.size),num_transactions:s.encode(e.numTransactions)}}}class ls extends b{constructor(){super(...arguments);o(this,"encoder",new ds);o(this,"decoder",new is)}}const Ar=new ls;class Ue{constructor(e,t,n,c,a){o(this,"header");o(this,"hash");o(this,"size");o(this,"num_transactions");o(this,"proposer_id");this.header=e,this.hash=t,this.size=n,this.num_transactions=c,this.proposer_id=a}toJSON(){return _r.encode(this)}}class us{convert(e){return d(e,"header","hash","size","num_transactions","proposer_id"),new Ue(V.decode(e.header),w.decode(e.hash),s.decode(e.size),s.decode(e.num_transactions),k.decode(e.proposer_id))}}class hs{convert(e){return h(e,Ue),{header:V.encode(e.header),hash:w.encode(e.hash),size:s.encode(e.size),num_transactions:s.encode(e.num_transactions),proposer_id:k.encode(e.proposer_id)}}}class ms extends u{constructor(){super(...arguments);o(this,"encoder",new hs);o(this,"decoder",new us)}}const _r=new ms,ps=new M(new L(_r),new F(_r));class Le{constructor(e,t,n,c){o(this,"hash");o(this,"header");o(this,"offset");o(this,"transaction");this.hash=e,this.header=t,this.offset=n,this.transaction=c}toJSON(){return Pr.encode(this)}}class ws{convert(e){return d(e,"hash","header","offset","transaction"),new Le(w.decode(e.hash),V.decode(e.header),s.decode(e.offset),ne.decode(e.transaction))}}class fs{convert(e){return h(e,Le),{hash:w.encode(e.hash),header:V.encode(e.header),offset:s.encode(e.offset),transaction:ne.encode(e.transaction)}}}class gs extends u{constructor(){super(...arguments);o(this,"encoder",new fs);o(this,"decoder",new ws)}}const Pr=new gs,Co=new M(new L(Pr),new F(Pr));class ys{convert(e){if(!ln(e))throw new A(typeof e,"boolean");return e}}class Cs{convert(e){return pr(e,"boolean"),e}}class vs extends u{constructor(){super(...arguments);o(this,"encoder",new Cs);o(this,"decoder",new ys)}}const Fe=new vs;class Me{constructor(e){o(this,"leaf_commit");this.leaf_commit=e}toJSON(){return Or.encode(this)}}class xs{convert(e){return d(e,"leaf_commit"),new Me(w.decode(e.leaf_commit))}}class bs{convert(e){return h(e,Me),{leaf_commit:w.encode(e.leaf_commit)}}}class Es extends u{constructor(){super(...arguments);o(this,"encoder",new bs);o(this,"decoder",new xs)}}const Or=new Es;class vo{constructor(e,t){o(this,"width");o(this,"index");this.width=e,this.index=t}toJSON(){return Nr.encode(this)}}class Ss{convert(e){return d(e,"width","index"),new vo(s.decode(e.width),s.decode(e.index))}}class ks{convert(e){return h(e,vo),{width:s.encode(e.width),index:s.encode(e.index)}}}class Is extends u{constructor(){super(...arguments);o(this,"encoder",new ks);o(this,"decoder",new Ss)}}const Nr=new Is;class xo{constructor(e,t,n,c){o(this,"order");o(this,"head");o(this,"bits");o(this,"data");this.order=e,this.head=t,this.bits=n,this.data=c}toJSON(){return Ur.encode(this)}}class Ts{convert(e){return d(e,"order","head","bits","data"),new xo(m.decode(e.order),Nr.decode(e.head),s.decode(e.bits),I.decode(e.data))}}class Rs{convert(e){return h(e,xo),{order:m.encode(e.order),head:Nr.encode(e.head),bits:s.encode(e.bits),data:I.encode(e.data)}}}class Bs extends u{constructor(){super(...arguments);o(this,"encoder",new Rs);o(this,"decoder",new Ts)}}const Ur=new Bs;class bo{constructor(e,t){o(this,"signature");o(this,"bitvec");this.signature=e,this.bitvec=t}toJSON(){return Lr.encode(this)}}class Ds{convert(e){if(!jt(e)||e.length!==2)throw new A(typeof e,"Array");return new bo(w.decode(e[0]),Ur.decode(e[1]))}}class As{convert(e){return h(e,bo),[w.encode(e.signature),Ur.encode(e.bitvec)]}}class _s extends u{constructor(){super(...arguments);o(this,"encoder",new As);o(this,"decoder",new Ds)}}const Lr=new _s,Eo=new fo(new po(Lr),new wo(Lr));class He{constructor(e,t,n,c,a,i){o(this,"data");o(this,"vote_commitment");o(this,"view_number");o(this,"signatures");o(this,"is_genesis");o(this,"_pd");this.data=e,this.vote_commitment=t,this.view_number=n,this.signatures=c,this.is_genesis=a,this._pd=i}toJSON(){return ve.encode(this)}}class Ps{convert(e){return d(e,"data","vote_commitment","view_number","signatures","is_genesis","_pd"),new He(Or.decode(e.data),w.decode(e.vote_commitment),s.decode(e.view_number),Eo.decode(e.signatures),Fe.decode(e.is_genesis),null)}}class Os{convert(e){return h(e,He),{data:Or.encode(e.data),vote_commitment:w.encode(e.vote_commitment),view_number:s.encode(e.view_number),signatures:Eo.encode(e.signatures),is_genesis:Fe.encode(e.is_genesis),_pd:null}}}class Ns extends u{constructor(){super(...arguments);o(this,"encoder",new Os);o(this,"decoder",new Ps)}}const ve=new Ns;class Fr{constructor(e,t,n,c,a,i,l,f){o(this,"view_number");o(this,"justify_qc");o(this,"parent_commitment");o(this,"block_header");o(this,"block_payload");o(this,"rejected");o(this,"timestamp");o(this,"proposer_id");this.view_number=e,this.justify_qc=t,this.parent_commitment=n,this.block_header=c,this.block_payload=a,this.rejected=i,this.timestamp=l,this.proposer_id=f}toJSON(){return Mr.encode(this)}}class Us{convert(e){return d(e,"view_number","justify_qc","parent_commitment","block_header","block_payload","rejected","timestamp","proposer_id"),new Fr(s.decode(e.view_number),ve.decode(e.justify_qc),w.decode(e.parent_commitment),V.decode(e.block_header),Ce.decode(e.block_payload),I.decode(e.rejected),s.decode(e.timestamp),k.decode(e.proposer_id))}}class Ls{convert(e){return h(e,Fr),{view_number:s.encode(e.view_number),justify_qc:ve.encode(e.justify_qc),parent_commitment:w.encode(e.parent_commitment),block_header:V.encode(e.block_header),block_payload:Ce.encode(e.block_payload),rejected:I.encode(e.rejected),timestamp:s.encode(e.timestamp),proposer_id:k.encode(e.proposer_id)}}}class Fs extends u{constructor(){super(...arguments);o(this,"encoder",new Ls);o(this,"decoder",new Us)}}const Mr=new Fs;class Hr{constructor(e,t){o(this,"leaf");o(this,"qc");this.leaf=e,this.qc=t}toJSON(){return zr.encode(this)}}class Ms{convert(e){return d(e,"leaf","qc"),new Hr(Mr.decode(e.leaf),ve.decode(e.qc))}}class Hs{convert(e){return h(e,Hr),{leaf:Mr.encode(e.leaf),qc:ve.encode(e.qc)}}}class zs extends u{constructor(){super(...arguments);o(this,"encoder",new Hs);o(this,"decoder",new Ms)}}const zr=new zs;class xe{}class Gr extends xe{toJSON(){return Jr.encode(this)}}class Gs{convert(e){if(!me(e)||e!=="Empty")throw new T;return new Gr}}class Js{convert(e){return h(e,Gr),"Empty"}}class qs extends u{constructor(){super(...arguments);o(this,"encoder",new Js);o(this,"decoder",new Gs)}}const Jr=new qs;class qr extends xe{constructor(t,n,c){super();o(this,"value");o(this,"pos");o(this,"elem");this.value=t,this.pos=n,this.elem=c}toJSON(){return Wr.encode(this)}}class Ws{convert(e){d(e,"Leaf");const t=e.Leaf;return d(t,"value","pos","elem"),new qr(w.decode(t.value),w.decode(t.pos),w.decode(t.elem))}}class $s{convert(e){return h(e,qr),{Leaf:{value:w.encode(e.value),pos:w.encode(e.pos),elem:w.encode(e.elem)}}}}class js extends b{constructor(){super(...arguments);o(this,"encoder",new $s);o(this,"decoder",new Ws)}}const Wr=new js;class $r extends xe{constructor(t){super();o(this,"value");this.value=t}toJSON(){return jr.encode(this)}}class Vs{convert(e){d(e,"ForgettenSubtree");const t=e.ForgettenSubtree;return d(t,"value"),new $r(w.decode(t.value))}}class Qs{convert(e){return h(e,$r),{ForgettenSubtree:{value:w.encode(e.value)}}}}class Ks extends b{constructor(){super(...arguments);o(this,"encoder",new Qs);o(this,"decoder",new Vs)}}const jr=new Ks;class ze extends xe{constructor(t,n){super();o(this,"value");o(this,"children");this.value=t,this.children=n}toJSON(){return Vr.encode(this)}}class Ys{convert(e){d(e,"Branch");const t=e.Branch;return d(t,"value","children"),new ze(w.decode(t.value),Ge.decode(t.children))}}class Xs{convert(e){return h(e,ze),{Branch:{value:w.encode(e.value),children:Ge.encode(e.children)}}}}class Zs extends u{constructor(){super(...arguments);o(this,"encoder",new Xs);o(this,"decoder",new Ys)}}const Vr=new Zs;class ea{convert(e){if(O(e,"Leaf",P))return Wr.decoder.convert(e);if(O(e,"Branch",P))return Vr.decoder.convert(e);if(O(e,"ForgettenSubtree",P))return jr.decoder.convert(e);if(me(e))return Jr.decoder.convert(e);throw new T}}class ra{convert(e){if(h(e,xe),e instanceof qr)return Wr.encode(e);if(e instanceof ze)return Vr.encode(e);if(e instanceof $r)return jr.encode(e);if(e instanceof Gr)return Jr.encode(e);throw new T}}class ta extends u{constructor(){super(...arguments);o(this,"encoder",new ra);o(this,"decoder",new ea)}}const So=new ta,Ge=new M(new L(So),new F(So));class Qr{constructor(e,t){o(this,"pos");o(this,"proof");this.pos=e,this.proof=t}toJSON(){return Kr.encode(this)}}class oa{convert(e){return d(e,"pos","proof"),new Qr(w.decode(e.pos),Ge.decode(e.proof))}}class na{convert(e){return h(e,Qr),{pos:w.encode(e.pos),proof:Ge.encode(e.proof)}}}class ca extends u{constructor(){super(...arguments);o(this,"encoder",new na);o(this,"decoder",new oa)}}const Kr=new ca;class Yr{constructor(e,t,n,c,a){o(this,"transaction");o(this,"block_hash");o(this,"proof");o(this,"height");o(this,"hash");this.transaction=e,this.block_hash=t,this.proof=n,this.height=c,this.hash=a}toJSON(){return Xr.encode(this)}}class sa{convert(e){return d(e,"transaction","block_hash","proof","height","hash"),new Yr(ne.decoder.convert(e.transaction),w.decode(e.block_hash),Kr.decoder.convert(e.proof),s.decode(e.height),w.decode(e.hash))}}class aa{convert(e){return h(e,Yr),{transaction:ne.encode(e.transaction),block_hash:w.encode(e.block_hash),proof:Kr.encode(e.proof),height:s.encode(e.height),hash:w.encode(e.hash)}}}class ia extends u{constructor(){super(...arguments);o(this,"encoder",new aa);o(this,"decoder",new sa)}}const Xr=new ia,ie="latest";class Zr{constructor(e){o(this,"target");this.target=e}static latest(){return new Io}static height(e){return new To(e)}toJSON(){return ko.encode(this)}}class da{convert(e){return h(e,Zr),typeof e.target=="number"?s.encode(e.target):m.encode(e.target)}}class la{convert(e){return e===ie?new Io:new To(s.decode(e))}}class ua extends b{constructor(){super(...arguments);o(this,"encoder",new da);o(this,"decoder",new la)}}const ko=new ua;class Io extends Zr{constructor(){super(ie)}}class To extends Zr{constructor(e){super(e)}}class ha{convert(e){if(!me(e))throw new A(typeof e,"string");const t=new Date(e);if(Number.isNaN(t.valueOf()))throw new A("NaN","number");return t}}class ma{convert(e){return h(e,Date),e.toISOString()}}class pa extends u{constructor(){super(...arguments);o(this,"encoder",new ma);o(this,"decoder",new ha)}}const Z=new pa;class Q{constructor(e,t,n){o(this,"significantDigitsMultiplier");this.alpha3Code=e,this.code=t,this.significantDigits=n,this.alpha3Code=e,this.code=t,this.significantDigits=n,this.significantDigitsMultiplier=BigInt(10)**BigInt(this.significantDigits)}toJSON(){return Je.encode(this)}}const Ro=new Q("JPY",392,0),wa=new Q("GBP",826,2),Bo=new Q("USD",840,2),fa=new Q("EUR",978,2),ga=new Q("XXX",999,2),Do=new Q("ETH",1001,18),et=new Q("XBT",1002,8),Ao=new Q("ESP",10001,18),ya=[Ro,wa,Bo,fa,ga,Do,et,Ao],Ca=new Map(ya.map(r=>[r.alpha3Code,r]));class va{convert(e){if(typeof e!="string")throw new T("CurrencyCodeDecoder: expected string");if(e==="BTC")return et;const t=Ca.get(e);if(t===void 0)throw new T(`CurrencyCodeDecoder: unknown currency: "${e}"`);return t}}class xa{convert(e){return h(e,Q),e.alpha3Code}}class ba extends u{constructor(){super(...arguments);o(this,"decoder",new va);o(this,"encoder",new xa)}}const Je=new ba;class J{constructor(e,t){this.currency=e,this.value=t,this.currency=e,this.value=t}static USD(e){return new J(Bo,BigInt(e))}static ETH(e){return new J(Do,BigInt(e))}static ESP(e){return new J(Ao,BigInt(e))}static JPY(e){return new J(Ro,BigInt(e))}static BTC(e){return new J(et,BigInt(e))}toString(){return qe.encode(this)}toJSON(){return qe.encode(this)}}function Ea(r){return r==="."||r===","||r===" "}function Sa(r,e){let t=-1;const n=r.length;for(let c=0;c<n;c++)e(r[c])&&(t=c);return t}class ka{parseCurrencyCode(e){return Je.decode(e)}parseValue(e,t){let n=1n;t[0]==="-"&&(n=-1n,t=t.substring(1));const c=Sa(t,Ea);if(c===-1){const p=BigInt(t.replace(/\D/g,""))*e.significantDigitsMultiplier;return n*p}const a=t.substring(0,c).replace(/\D/g,""),i=t.substring(c+1).replace(/\D/g,""),l=BigInt(a)*e.significantDigitsMultiplier,f=BigInt(i)*10n**BigInt(e.significantDigits-i.length);return n*(l+f)}convert(e){if(typeof e!="string")throw new T("MonetaryValueDecoder: expected string");const t=e.indexOf(" ");if(t<=-1)throw new T("MonetaryValueDecoder: missing non-breaking space");const n=e.substring(0,t),c=e.substring(t+1);if(/^-?[\d .,]+$/.test(n)){const i=this.parseCurrencyCode(c);return new J(i,this.parseValue(i,n))}const a=this.parseCurrencyCode(n);return new J(a,this.parseValue(a,c))}}class Ia{convert(e){h(e,J);const t=e.value<0n?"-":"",n=e.value<0n?-e.value:e.value,c=n%e.currency.significantDigitsMultiplier,a=n/e.currency.significantDigitsMultiplier,i=String(a),l=String(c);return/^0+$/.test(l)?`${Je.encode(e.currency)} ${t}${i}`:`${Je.encode(e.currency)} ${t}${a}.${String(c).padStart(e.currency.significantDigits,"0")}`}}class Ta extends u{constructor(){super(...arguments);o(this,"decoder",new ka);o(this,"encoder",new Ia)}}const qe=new Ta,_o=new M(new L(qe),new F(qe));class rt{constructor(e,t,n,c,a,i,l,f){o(this,"hash");o(this,"height");o(this,"time");o(this,"numTransactions");o(this,"proposerID");o(this,"feeRecipient");o(this,"size");o(this,"blockReward");this.hash=e,this.height=t,this.time=n,this.numTransactions=c,this.proposerID=a,this.feeRecipient=i,this.size=l,this.blockReward=f}toJSON(){return be.encode(this)}}class Ra{convert(e){return d(e,"hash","height","time","num_transactions","proposer_id","fee_recipient","size","block_reward"),new rt(w.decode(e.hash),s.decode(e.height),Z.decode(e.time),s.decode(e.num_transactions),k.decode(e.proposer_id),k.decode(e.fee_recipient),s.decode(e.size),_o.decode(e.block_reward))}}class Ba{convert(e){return h(e,rt),{hash:w.encode(e.hash),height:s.encode(e.height),time:Z.encode(e.time),num_transactions:s.encode(e.numTransactions),proposer_id:k.encode(e.proposerID),fee_recipient:k.encode(e.feeRecipient),size:s.encode(e.size),block_reward:_o.encode(e.blockReward)}}}class Da extends b{constructor(){super(...arguments);o(this,"encoder",new Ba);o(this,"decoder",new Ra)}}const be=new Da;class tt{constructor(e){o(this,"blockDetail");this.blockDetail=e}toJSON(){return ot.encode(this)}}class Aa{convert(e){return d(e,"block_detail"),new tt(be.decode(e.block_detail))}}class _a{convert(e){return h(e,tt),{block_detail:be.encode(e.blockDetail)}}}class Pa extends b{constructor(){super(...arguments);o(this,"encoder",new _a);o(this,"decoder",new Aa)}}const ot=new Pa;class nt{constructor(e){o(this,"limit");this.limit=e}static latest(e){return new Oo(e)}static from(e,t){return new No(e,t)}toJSON(){return Po.encode(this)}}class Oa{convert(e){return h(e,nt),$t(e.from)?{from:s.encode(e.from),limit:s.encode(e.limit)}:{from:m.encode(e.from),limit:s.encode(e.limit)}}}class Na{convert(e){return d(e,"from","limit"),e.from===ie?new Oo(s.decode(e.limit)):new No(s.decode(e.from),s.decode(e.limit))}}class Ua extends b{constructor(){super(...arguments);o(this,"encoder",new Oa);o(this,"decoder",new Na)}}const Po=new Ua;class Oo extends nt{constructor(e){super(e)}get from(){return ie}}class No extends nt{constructor(t,n){super(n);o(this,"from");this.from=t}}class ct{constructor(e,t,n,c,a,i){o(this,"hash");o(this,"height");o(this,"proposerID");o(this,"numTransactions");o(this,"size");o(this,"time");this.hash=e,this.height=t,this.proposerID=n,this.numTransactions=c,this.size=a,this.time=i}toJSON(){return st.encode(this)}}class La{convert(e){return d(e,"hash","height","proposer_id","num_transactions","size","time"),new ct(w.decode(e.hash),s.decode(e.height),k.decode(e.proposer_id),s.decode(e.num_transactions),s.decode(e.size),Z.decode(e.time))}}class Fa{convert(e){return h(e,ct),{hash:w.encode(e.hash),height:s.encode(e.height),proposer_id:k.encode(e.proposerID),num_transactions:s.encode(e.numTransactions),size:s.encode(e.size),time:Z.encode(e.time)}}}class Ma extends b{constructor(){super(...arguments);o(this,"encoder",new Fa);o(this,"decoder",new La)}}const st=new Ma,de=new M(new L(st),new F(st));class at{constructor(e){o(this,"blockSummaries");this.blockSummaries=e}toJSON(){return it.encode(this)}}class Ha{convert(e){return d(e,"block_summaries"),new at(de.decode(e.block_summaries))}}class za{convert(e){return h(e,at),{block_summaries:de.encode(e.blockSummaries)}}}class Ga extends b{constructor(){super(...arguments);o(this,"encoder",new za);o(this,"decoder",new Ha)}}const it=new Ga;class dt{constructor(e,t,n){o(this,"rollups");o(this,"transactions");o(this,"blocks");this.rollups=e,this.transactions=t,this.blocks=n}toJSON(){return lt.encode(this)}}class Ja{convert(e){return d(e,"rollups","transactions","blocks"),new dt(s.decode(e.rollups),s.decode(e.transactions),s.decode(e.blocks))}}class qa{convert(e){return h(e,dt),{rollups:s.encode(e.rollups),transactions:s.encode(e.transactions),blocks:s.encode(e.blocks)}}}class Wa extends u{constructor(){super(...arguments);o(this,"encoder",new qa);o(this,"decoder",new Ja)}}const lt=new Wa;function We(r){return r!==null}function $a(r,e){return r.blockHeights-e.blockHeights}class ut{constructor(e,t,n,c){o(this,"blockTime");o(this,"blockSize");o(this,"blockTransactions");o(this,"blockHeights");const a=[],i=c.length;for(let R=0;R<i;R++)a.push({blockTime:e[R],blockSize:t[R],blockTransactions:n[R],blockHeights:c[R]});a.sort($a);const l=a[0].blockHeights,f=a[i-1].blockHeights,p=[],y=[],g=[],E=[];for(let R=l,B=0;R<=f;R++){const W=a[B];if(W.blockHeights!==R){p.push(null),y.push(null),g.push(null),E.push(null);continue}p.push(W.blockTime),y.push(W.blockSize),g.push(W.blockTransactions),E.push(W.blockHeights),B++}const U=Math.max(0,E.length-50);this.blockTime=p.slice(U),this.blockSize=y.slice(U),this.blockTransactions=g.slice(U),this.blockHeights=E.slice(U)}toJSON(){return ht.encode(this)}}class ja{convert(e){return d(e,"block_time","block_size","block_transactions","block_heights"),new ut(I.decode(e.block_time),I.decode(e.block_size),I.decode(e.block_transactions),I.decode(e.block_heights))}}class Va{convert(e){return h(e,ut),{block_time:I.encode(e.blockTime.filter(We)),block_size:I.encode(e.blockSize.filter(We)),block_transactions:I.encode(e.blockTransactions.filter(We)),block_heights:I.encode(e.blockHeights.filter(We))}}}class Qa extends u{constructor(){super(...arguments);o(this,"encoder",new Va);o(this,"decoder",new ja)}}const ht=new Qa,Uo=I;class $e{constructor(e,t,n,c,a,i){o(this,"hash");o(this,"rollups");o(this,"height");o(this,"time");o(this,"offset");o(this,"numTransactions");this.hash=e,this.rollups=t,this.height=n,this.time=c,this.offset=a,this.numTransactions=i}toJSON(){return mt.encode(this)}}class Ka{convert(e){return d(e,"hash","rollups","height","time","offset","num_transactions"),new $e(w.decode(e.hash),Uo.decode(e.rollups),s.decode(e.height),Z.decode(e.time),s.decode(e.offset),s.decode(e.num_transactions))}}class Ya{convert(e){return h(e,$e),{hash:w.encode(e.hash),rollups:Uo.encode(e.rollups),height:s.encode(e.height),time:Z.encode(e.time),offset:s.encode(e.offset),num_transactions:s.encode(e.numTransactions)}}}class Xa extends u{constructor(){super(...arguments);o(this,"encoder",new Ya);o(this,"decoder",new Ka)}}const mt=new Xa,le=new M(new L(mt),new F(mt));class pt{constructor(e,t,n,c,a){o(this,"latestBlock");o(this,"genesisOverview");o(this,"latestBlocks");o(this,"latestTransactions");o(this,"histograms");this.latestBlock=e,this.genesisOverview=t,this.latestBlocks=n,this.latestTransactions=c,this.histograms=a}toJSON(){return wt.encode(this)}}class Za{convert(e){return d(e,"latest_block","genesis_overview","latest_blocks","latest_transactions","histograms"),new pt(be.decode(e.latest_block),lt.decode(e.genesis_overview),de.decode(e.latest_blocks),le.decode(e.latest_transactions),ht.decode(e.histograms))}}class ei{convert(e){return h(e,pt),{latest_block:be.encode(e.latestBlock),genesis_overview:lt.encode(e.genesisOverview),latest_blocks:de.encode(e.latestBlocks),latest_transactions:le.encode(e.latestTransactions),histograms:ht.encode(e.histograms)}}}class ri extends u{constructor(){super(...arguments);o(this,"encoder",new ei);o(this,"decoder",new Za)}}const wt=new ri;class ft{constructor(e){o(this,"explorerSummary");this.explorerSummary=e}toJSON(){return gt.encode(this)}}class ti{convert(e){return d(e,"explorer_summary"),new ft(wt.decode(e.explorer_summary))}}class oi{convert(e){return h(e,ft),{explorer_summary:wt.encode(e.explorerSummary)}}}class ni extends u{constructor(){super(...arguments);o(this,"encoder",new oi);o(this,"decoder",new ti)}}const gt=new ni;class Lo{constructor(e){o(this,"query");this.query=e}toJSON(){return Fo.encode(this)}}class ci{convert(e){return h(e,Lo),m.encode(e.query)}}class si{convert(e){return new Lo(m.decode(e))}}class ai extends b{constructor(){super(...arguments);o(this,"encoder",new ci);o(this,"decoder",new si)}}const Fo=new ai;class yt{constructor(e,t){o(this,"blocks");o(this,"transactions");this.blocks=e,this.transactions=t}toJSON(){return Ct.encode(this)}}class ii{convert(e){return d(e,"blocks","transactions"),new yt(de.decode(e.blocks),le.decode(e.transactions))}}class di{convert(e){return h(e,yt),{blocks:de.encode(e.blocks),transactions:le.encode(e.transactions)}}}class li extends b{constructor(){super(...arguments);o(this,"encoder",new di);o(this,"decoder",new ii)}}const Ct=new li;class vt{constructor(e){o(this,"searchResults");this.searchResults=e}toJSON(){return xt.encode(this)}}class ui{convert(e){return d(e,"search_results"),new vt(Ct.decode(e.search_results))}}class hi{convert(e){return h(e,vt),{search_results:Ct.encode(e.searchResults)}}}class mi extends b{constructor(){super(...arguments);o(this,"encoder",new hi);o(this,"decoder",new ui)}}const xt=new mi;class bt{static heightAndOffset(e,t){return new Ee(e,t)}static hash(e){return new Se(e)}toJSON(){return Mo.encode(this)}}class pi{convert(e){if(h(e,bt),e instanceof Ee)return{height:s.encode(e.height),offset:s.encode(e.offset)};if(e instanceof Se)return{hash:w.encode(e.hash)};throw new T}}class wi{convert(e){if(O(e,"height",P)&&O(e,"offset",P))return new Ee(s.decode(e.height),s.decode(e.offset));if(O(e,"hash",P))return new Se(w.decode(e.hash));throw new T}}class fi extends u{constructor(){super(...arguments);o(this,"encoder",new pi);o(this,"decoder",new wi)}}const Mo=new fi;class Ee extends bt{constructor(t,n){super();o(this,"height");o(this,"offset");this.height=t,this.offset=n}}class Se extends bt{constructor(t){super();o(this,"hash");this.hash=t}}const Ho=s;class Et{constructor(e,t){o(this,"namespace");o(this,"payload");this.namespace=e,this.payload=t}toJSON(){return St.encode(this)}}class gi{convert(e){return d(e,"namespace","payload"),new Et(Ho.decode(e.namespace),mo.decode(e.payload))}}class yi{convert(e){return h(e,Et),{namespace:Ho.encode(e.namespace),payload:mo.encode(e.payload)}}}class Ci extends u{constructor(){super(...arguments);o(this,"encoder",new yi);o(this,"decoder",new gi)}}const St=new Ci,zo=new M(new L(St),new F(St));class kt{constructor(e,t,n,c,a,i,l,f,p){o(this,"hash");o(this,"height");o(this,"blockConfirmed");o(this,"offset");o(this,"numTransactions");o(this,"size");o(this,"time");o(this,"sequencingFees");o(this,"feeDetails");this.hash=e,this.height=t,this.blockConfirmed=n,this.offset=c,this.numTransactions=a,this.size=i,this.time=l,this.sequencingFees=f,this.feeDetails=p}toJSON(){return It.encode(this)}}class vi{convert(e){return d(e,"hash","height","block_confirmed","offset","num_transactions","size","time","sequencing_fees","fee_details"),new kt(w.decode(e.hash),s.decode(e.height),Fe.decode(e.block_confirmed),s.decode(e.offset),s.decode(e.num_transactions),s.decode(e.size),Z.decode(e.time),[],[])}}class xi{convert(e){return h(e,kt),{hash:w.encode(e.hash),height:s.encode(e.height),block_confirmed:Fe.encode(e.blockConfirmed),offset:s.encode(e.offset),num_transactions:s.encode(e.numTransactions),size:s.encode(e.size),time:Z.encode(e.time),sequencing_fees:[],fee_details:[]}}}class bi extends u{constructor(){super(...arguments);o(this,"encoder",new xi);o(this,"decoder",new vi)}}const It=new bi;class Tt{constructor(e,t){o(this,"details");o(this,"data");this.details=e,this.data=t}toJSON(){return Rt.encode(this)}}class Ei{convert(e){return d(e,"details","data"),new Tt(It.decode(e.details),zo.decode(e.data))}}class Si{convert(e){return h(e,Tt),{details:It.encode(e.details),data:zo.encode(e.data)}}}class ki extends u{constructor(){super(...arguments);o(this,"encoder",new Si);o(this,"decoder",new Ei)}}const Rt=new ki;class je{constructor(e){o(this,"transactionDetail");this.transactionDetail=e}toJSON(){return Bt.encode(this)}}class Ii{convert(e){return d(e,"transaction_detail"),new je(Rt.decode(e.transaction_detail))}}class Ti{convert(e){return h(e,je),{transaction_detail:Rt.encode(e.transactionDetail)}}}class Ri extends b{constructor(){super(...arguments);o(this,"encoder",new Ti);o(this,"decoder",new Ii)}}const Bt=new Ri;class Ve{constructor(){}static block(e){return new Qe(e)}static namespace(e){return new Ke(e)}static none(){return new At}toJSON(){return Dt.encode(this)}}class Bi{convert(e){return O(e,"block",P)?new Qe(s.decode(e.block)):O(e,"namespace",P)?new Ke(s.decode(e.namespace)):new At}}class Di{convert(e){if(h(e,Ve),e instanceof At)return{};if(e instanceof Qe)return{block:s.encode(e.block)};if(e instanceof Ke)return{namespace:s.encode(e.namespace)};throw new T}}class Ai extends b{constructor(){super(...arguments);o(this,"encoder",new Di);o(this,"decoder",new Bi)}}const Dt=new Ai;class At extends Ve{constructor(){super()}convertURL(e){return e}}class Qe extends Ve{constructor(t){super();o(this,"block");this.block=t}convertURL(t){return new URL(`${t.pathname}/block/${this.block}`,t)}}class Ke extends Ve{constructor(t){super();o(this,"namespace");this.namespace=t}convertURL(t){return new URL(`${t.pathname}/namespace/${this.namespace}`,t)}}class Ye{constructor(e){o(this,"limit");this.limit=e}static latest(e){return new Xe(e)}static heightAndOffset(e,t,n){return new Ze(e,t,n)}static hash(e,t){return new er(e,t)}toJSON(){return _t.encode(this)}}class _i{convert(e){return d(e,"limit"),O(e,"height",P)&&O(e,"offset",P)?new Ze(s.decode(e.height),s.decode(e.offset),s.decode(e.limit)):O(e,"hash",P)?new er(w.decode(e.hash),s.decode(e.limit)):new Xe(s.decode(e.limit))}}class Pi{convert(e){if(h(e,Ye),e instanceof Xe)return{limit:s.encode(e.limit)};if(e instanceof Ze)return{height:s.encode(e.height),offset:s.encode(e.offset),limit:s.encode(e.limit)};if(e instanceof er)return{hash:w.encode(e.hash),limit:s.encode(e.limit)};throw new T}}class Oi extends b{constructor(){super(...arguments);o(this,"encoder",new Pi);o(this,"decoder",new _i)}}const _t=new Oi;class Xe extends Ye{constructor(e){super(e)}convertURL(e){return new URL(`transactions/latest/${this.limit}`,e)}}class Ze extends Ye{constructor(t,n,c){super(c);o(this,"height");o(this,"offset");this.height=t,this.offset=n}convertURL(t){return new URL(`transactions/from/${this.height}/${this.offset}/${this.limit}`,t)}}class er extends Ye{constructor(t,n){super(n);o(this,"hash");this.hash=t}convertURL(t){return new URL(`transactions/hash/${this.hash}/${this.limit}`,t)}}class Go{constructor(e,t){o(this,"target");o(this,"filter");this.target=e,this.filter=t}toJSON(){return Jo.encode(this)}}class Ni{convert(e){return d(e,"filter","target"),new Go(_t.decode(e.target),Dt.decode(e.filter))}}class Ui{convert(e){return h(e,Go),{filter:Dt.encode(e.filter),target:_t.encode(e.target)}}}class Li extends b{constructor(){super(...arguments);o(this,"encoder",new Ui);o(this,"decoder",new Ni)}}const Jo=new Li;class ke{constructor(e){o(this,"transactionSummaries");this.transactionSummaries=e}toJSON(){return Pt.encode(this)}}class Fi{convert(e){return d(e,"transaction_summaries"),new ke(le.decode(e.transaction_summaries))}}class Mi{convert(e){return h(e,ke),{transaction_summaries:le.encode(e.transactionSummaries)}}}class Hi extends b{constructor(){super(...arguments);o(this,"encoder",new Mi);o(this,"decoder",new Fi)}}const Pt=new Hi;class N{constructor(e,t,n,c){o(this,"namespace");o(this,"name");o(this,"site");o(this,"blockExplorer");this.namespace=e,this.name=t,this.site=n,this.blockExplorer=c}}const zi=new N(202374881,"Vienna",new URL("https://vienna.caldera.dev/"),new URL("https://vienna.calderaexplorer.xyz/")),Gi=new N(202374882,"OP Stack",new URL("https://stack.optimism.io/"),new URL("https://www.blockscout.com/")),Ji=new N(33914988448,"Arbitrum",new URL("https://arbitrum.io/"),new URL("https://arbiscan.io/")),qi=new N(33914988449,"Eigen Layer",new URL("https://www.eigenlayer.xyz/"),new URL("https://www.blockscout.com/")),Wi=new N(33914988450,"Spire",new URL("https://www.spire.dev/"),new URL("https://www.blockscout.com/")),$i=new N(33914988451,"Alt Layer",new URL("https://altlayer.io/"),new URL("https://www.blockscout.com/")),ji=new N(33914988452,"Caldera",new URL("https://www.caldera.xyz/"),new URL("https://www.blockscout.com/")),Vi=new N(33914988453,"Vistara Labs",new URL("https://vistara.dev/"),new URL("https://www.blockscout.com/")),Qi=new N(33914988454,"Polygon",new URL("https://polygon.technology/"),new URL("https://www.blockscout.com/")),Ki=new N(263,"Milan",new URL("https://milan.caldera.dev/"),new URL("https://milan-devnet.explorer.caldera.xyz/")),Yi=new N(41234687,"Kyoto",new URL("https://example.com/"),new URL("https://kyoto-explorer.altlayer.io/")),Xi=new Map([zi,Gi,Ji,Qi,qi,Wi,$i,ji,Vi,Ki,Yi].map(r=>[r.namespace,r])),rr=2147483648,Zi=1103515245,ed=12345;class Ot{constructor(e){o(this,"state");this.state=e!==void 0?e:Math.floor(Math.random()*(rr-1))}nextInt(){return this.state=(Zi*this.state+ed)%rr,this.state}nextFloat(){return this.nextInt()/(rr-1)}nextRange(e,t){const n=t-e,c=this.nextInt()/rr;return e+Math.floor(c*n)}fillBytes(e){const t=new ArrayBuffer(e),n=new DataView(t);let c=0;for(;c<e-4;c+=4)n.setUint32(c,this.nextRange(0,4294967295));for(let a=c;a<e;a++)n.setUint8(a,this.nextRange(0,256));return t}}async function*rd(){}async function*_(){const r=new Date,e=new Date(r.getFullYear(),r.getMonth(),r.getDate()).valueOf(),t=new Ot(e),n=new Uint8Array(new Array(20).map(()=>0)).buffer;yield{hash:new x("BLOCK",n),height:0,time:new Date(0),genTime:0,transactions:rd(),numTransactions:0,proposer:n,size:0,fees:[]};let c=1,a=e;for(;a<r.valueOf();){const i=Math.floor(t.nextFloat()*14*1e3);yield td(new Ot(c+i),c,a,a+i),a+=i,c++}}function td(r,e,t,n){const c=Math.floor(r.nextRange(0,5));return{hash:new x("BLOCK",r.fillBytes(32)),height:e,genTime:n-t,time:new Date(n),numTransactions:c,transactions:nd(new Ot(e+t),e,t,n,c),proposer:r.fillBytes(30),size:Math.floor(r.nextFloat()*1024*c)+8,fees:[J.ESP(BigInt(r.nextRange(0,1e9)*1e3))]}}const qo=Array.from(Xi.keys());function od(r){return r.nextFloat()>.98?1:qo[r.nextRange(0,qo.length)]}async function*nd(r,e,t,n,c){const a=(n-t)/c;for(let i=0,l=t;l<n;l+=a,i++){const f=od(r),p=Math.floor(1024*r.nextFloat());yield{block:e,index:i,size:p,hash:new x("COMMIT",r.fillBytes(32)),time:new Date(l),sender:new x("PUBKEY",r.fillBytes(32)),tree:{namespace:f,data:r.fillBytes(p)}}}}async function*cd(r){for(let e=r.next();!e.done;e=r.next())yield e.value}function sd(r){return cd(r[Symbol.iterator]())}async function*ad(r){for(let e=await r.next();!e.done;e=await r.next())yield e.value}async function*Nt(r,e){for(let t=await r.next();!t.done;t=await r.next())e(t.value)&&(yield t.value)}function Wo(r,e){return Nt(r[Symbol.asyncIterator](),e)}async function*ce(r,e){for(let t=await r.next();!t.done;t=await r.next())yield await e(t.value)}function K(r,e){return ce(r[Symbol.asyncIterator](),e)}async function*ee(r,e){for(let t=0;t<e;t++){const n=await r.next();if(n.done)return;yield n.value}}function Ut(r,e){return ee(r[Symbol.asyncIterator](),e)}async function*Lt(r,e){for(let t=await r.next();!t.done&&e(t.value);t=await r.next())yield t.value}function Ft(r,e){return Lt(r[Symbol.asyncIterator](),e)}async function*re(r,e){for(let t=0;t<e;t++)if((await r.next()).done)return;yield*ad(r)}function tr(r,e){return re(r[Symbol.asyncIterator](),e)}async function Ie(r){const e=await r.next();if(e.done)throw new ae;return e.value}async function id(r){return Ie(r[Symbol.asyncIterator]())}async function dd(r,e){for(let t=await r.next();!t.done;t=await r.next())if(e(t.value))return t.value}async function ld(r,e){return dd(r[Symbol.asyncIterator](),e)}async function $o(r){let e;for(let t=await r.next();!t.done;t=await r.next())e=t.value;if(e===void 0)throw new ae;return e}async function ud(r){return $o(r[Symbol.asyncIterator]())}async function*jo(r,e){for(let t=await r.next();!t.done;t=await r.next())yield*e(t.value)}function ue(r,e){return jo(r[Symbol.asyncIterator](),e)}async function*Mt(r){yield*Ac(r)}async function hd(r,e,t){const n=t;let c=e;for(let a=await n.next();!a.done;a=await n.next())c=r(await c,a.value);return c}async function*or(r){let e=null;for(let t=await r.next();!t.done;t=await r.next())e=bc(e,t.value);yield*io(e)}function Te(r){return or(r[Symbol.asyncIterator]())}function Y(r){return hd(async(e,t)=>(e.push(t),e),Promise.resolve([]),r)}async function Ht(r){return Y(r[Symbol.asyncIterator]())}function nr(r){return new Rr(r.height,r.time.valueOf()/1e3,0,new Sr(0,"00","00"),[],new Ir(new ArrayBuffer(0)),new x("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new x("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new vr(new ArrayBuffer(0),new ArrayBuffer(0),0),new br(new ArrayBuffer(0),new ArrayBuffer(0)))}async function md(r){return new Dr(nr(r),new Br(await Y(K(r.transactions,async e=>new ye(e.tree.namespace,Array.from(new Uint8Array(e.tree.data)))))),new x("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions)}function pd(r){return new Ue(nr(r),new x("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions,r.proposer)}function wd(r){const e=r.transactions,t=nr(r);return K(e,async n=>new Le(n.hash,t,n.index,new ye(n.tree.namespace,Array.from(new Uint8Array(n.tree.data)))))}async function*fd(r){const e=nr(r),t=r.transactions;yield*K(t,async n=>new Yr(new ye(n.tree.namespace,Array.from(new Uint8Array(n.tree.data))),new x("BLOCK",new Uint8Array([0,0,0,0]).buffer),new Qr(new x("POS",new Uint8Array([0,0,0,0]).buffer),[new ze(new x("EMPTY",new Uint8Array([0,0,0,0]).buffer),[])]),e.height,new x("COMMIT",n.tree.data.slice(0,32))))}class gd{async getLeafFromHeight(e){const t=await this.getBlockFromHeight(e);return new Hr(new Fr(e,new He(new Me(new x("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new x("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null),new x("LEAF",new Uint8Array([0,0,0,0]).buffer),t.header,t.payload,[],t.header.timestamp,t.header.fee_info.account),new He(new Me(new x("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new x("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null))}async getTransactionFromHeightAndOffset(e,t){const n=await Ie(re(_(),e)),c=fd(n);return await id(tr(c,t))}async getBlockSummaries(e,t){const n=re(_(),e),c=ee(n,t-e),a=ce(c,async i=>pd(i));return await Y(a)}async getBlockFromHeight(e){const t=re(_(),e),n=await Ie(t);return md(n)}async*streamTransactionSummaries(e){const t=Lt(_(),a=>a.height<=e),n=or(t);yield*ue(n,a=>Te(wd(a)))}async getTransactionSummaryRange(e,t,n){const c=this.streamTransactionSummaries(e),a=re(c,t),i=ee(a,n);return await Y(i)}async getTransactionSummaryRangeForRollup(e,t,n,c){const a=this.streamTransactionSummaries(t),i=Nt(a,p=>p.transaction.vm===e),l=re(i,n),f=ee(l,c);return await Y(f)}}class Re extends S{constructor(t,n,c){super(c);o(this,"response");o(this,"status");this.status=t,this.response=n}toJSON(){return Vo.convert(this)}}class cr{convert(e){return h(e,Re),{...z.convert(e),status:e.status}}}const Vo=new cr;class sr extends Re{constructor(e,t,n="bad server response: client error"){super(e,t,n),Object.freeze(this)}toJSON(){return Qo.encode(this)}}class yd{convert(e){return d(e,"code","message","status"),C(e,sr.name),new sr(Number(e.status),null,m.decode(e.message))}}class Cd extends cr{}class vd extends u{constructor(){super(...arguments);o(this,"encoder",new Cd);o(this,"decoder",new yd)}}const Qo=new vd;v(sr.name,Qo);class ar extends Re{constructor(e,t,n="bad server response"){super(e,t,n),Object.freeze(this)}toJSON(){return Ko.encode(this)}}class xd{convert(e){return d(e,"code","message","status"),C(e,ar.name),new ar(Number(e.status),null,m.decode(e.message))}}class bd extends cr{}class Ed extends u{constructor(){super(...arguments);o(this,"encoder",new bd);o(this,"decoder",new xd)}}const Ko=new Ed;v(ar.name,Ko);class ir extends Re{constructor(e,t,n="bad server response: server error"){super(e,t,n),Object.freeze(this)}}class Sd{convert(e){return d(e,"code","message","status"),C(e,ir.name),new ir(Number(e.status),null,m.decode(e.message))}}class kd extends cr{}class Id extends u{constructor(){super(...arguments);o(this,"encoder",new kd);o(this,"decoder",new Sd)}}const Td=new Id;v(ir.name,Td);class zt extends S{constructor(e="completer has already been completed"){super(e),Object.freeze(this)}}class Rd{convert(e){return d(e,"code","message"),C(e,zt.name),new zt(m.decode(e.message))}}class Bd extends H{}class Dd extends u{constructor(){super(...arguments);o(this,"encoder",new Bd);o(this,"decoder",new Rd)}}const Ad=new Dd;v(zt.name,Ad);class dr extends S{constructor(t,n,c=`invalid string value: have "${t}", want "${n}"`){super(c);o(this,"have");o(this,"want");this.have=t,this.want=n,Object.freeze(this)}toJSON(){return Yo.encode(this)}}class _d{convert(e){return d(e,"code","have","want","message"),C(e,dr.name),new dr(m.decode(e.have),m.decode(e.want),m.decode(e.message))}}class Pd{convert(e){return h(e,dr),{...z.convert(e),have:m.encode(e.have),want:m.encode(e.want)}}}class Od extends u{constructor(){super(...arguments);o(this,"encoder",new Pd);o(this,"decoder",new _d)}}const Yo=new Od;v(dr.name,Yo);class lr extends S{constructor(t,n=`no completer found for request id "${t}"`){super(n);o(this,"requestID");this.requestID=t,Object.freeze(this)}toJSON(){return Xo.encode(this)}}class Nd{convert(e){return d(e,"code","requestID","message"),C(e,lr.name),new lr(Be.decode(e.requestID),m.decode(e.message))}}class Ud{convert(e){return h(e,lr),{...z.convert(e),requestID:Be.encode(e.requestID)}}}class Ld extends u{constructor(){super(...arguments);o(this,"encoder",new Ud);o(this,"decoder",new Nd)}}const Xo=new Ld;v(lr.name,Xo);class Gt extends S{constructor(e="no url provided"){super(e),Object.freeze(this)}}class Fd{convert(e){return d(e,"code","message"),C(e,Gt.name),new Gt(m.decode(e.message))}}class Md extends H{}class Hd extends u{constructor(){super(...arguments);o(this,"encoder",new Md);o(this,"decoder",new Fd)}}const zd=new Hd;v(Gt.name,zd);class ur extends S{constructor(t,n=`Not Found: ${t}`){super(n);o(this,"key");this.key=t,Object.freeze(this)}}class Zo{constructor(e){o(this,"codec");this.codec=e}convert(e){return d(e,"code","key"),C(e,ur.name),new ur(this.codec.decode(e.key))}}class en{constructor(e){o(this,"codec");this.codec=e}convert(e){return{...z.convert(e),key:this.codec.encode(e.key)}}}class rn extends u{constructor(t,n){super();o(this,"encoder");o(this,"decoder");this.encoder=t,this.decoder=n}}new rn(new en(m),new Zo(m));const Gd=new rn(new en(Be),new Zo(Be));v(ur.name,Gd);class he extends Re{constructor(t,n,c,a="response content type is not application/json"){super(n,c,a);o(this,"haveHeaderType");this.haveHeaderType=t,Object.freeze(this)}static fromResponse(t,n){return new he(t.headers.get("content-type")??"undefined",t.status,t,n)}toJSON(){return tn.encode(this)}}class Jd{convert(e){return d(e,"code","status","have","want","message"),C(e,he.name),new he(m.decode(e.code),s.decode(e.status),null,m.decode(e.message))}}class qd{convert(e){return{...Vo.convert(e),have:m.encode(e.haveHeaderType),want:m.encode("application/json")}}}class Wd extends u{constructor(){super(...arguments);o(this,"encoder",new qd);o(this,"decoder",new Jd)}}const tn=new Wd;v(he.name,tn);class Jt extends S{constructor(t,n="error in web worker"){super(n);o(this,"error");this.error=t,Object.freeze(this)}toJSON(){return on.encode(this)}}class $d{convert(e){return d(e,"code","error","message"),C(e,Jt.name),new Jt(Ae.decode(e.error),m.decode(e.message))}}class jd{convert(e){return{...z.convert(e),error:Ae.encode(e.error)}}}class Vd extends u{constructor(){super(...arguments);o(this,"encoder",new jd);o(this,"decoder",new $d)}}const on=new Vd;v(Jt.name,on);var qt=(r=>(r[r.success=0]="success",r[r.full=1]="full",r[r.failed=2]="failed",r))(qt||{});class Qd{getFromEmpty(){}}class Kd{getFromEmpty(){return null}}class Yd{getFromEmpty(){throw new ae}}const Xd={returnNull:new Kd,returnUndefined:new Qd,throwMissingElement:new Yd};class Zd{constructor(e){o(this,"maxSize");D(!Number.isNaN(e),"maxSize must not be NaN"),D(Number.isInteger(e),"maxSize must be an integer"),D(e>0,"maxSize must be greater than 0"),this.maxSize=e}nextIndex(e){return D(e>=0,"index must be greater than or equal to 0"),(e+1)%this.maxSize}}class el{constructor(e){o(this,"preComputedSizeMinus1");D(!Number.isNaN(e),"maxSize must not be NaN"),D(Number.isInteger(e),"maxSize must be an integer"),D(e>0,"maxSize must be greater than 0"),D(nn(e),"maxSize must be a power of two"),this.preComputedSizeMinus1=e-1}nextIndex(e){return D(e>=0,"index must be greater than or equal to 0"),e+1&this.preComputedSizeMinus1}}function nn(r){return(r&r-1)===0}class hr extends S{constructor(e="buffer full"){super(e),Object.freeze(this)}}class rl{convert(e){return d(e,"code","message"),C(e,hr.name),new hr(m.decode(e.message))}}class tl extends H{}class ol extends u{constructor(){super(...arguments);o(this,"encoder",new tl);o(this,"decoder",new rl)}}const nl=new ol;v(hr.name,nl);class cl{putToFull(e,t){return e.get(),e.put(t)}}class sl{putToFull(){return qt.full}}class al{putToFull(){throw new hr}}const il={overwriteOldest:new cl,returnFull:new sl,throw:new al};function dl(r){return nn(r)?new el(r):new Zd(r)}class ll{constructor(e,t,n){o(this,"readIndex",0);o(this,"writeIndex",0);o(this,"buffer");o(this,"nextIndex");o(this,"getOnEmpty");o(this,"putOnFull");D(!Number.isNaN(e),"maxSize must not be NaN"),this.buffer=new Array(e),this.nextIndex=dl(e),this.getOnEmpty=t,this.putOnFull=n}get maxSize(){return this.buffer.length}get length(){return this.writeIndex<this.readIndex?this.writeIndex+this.maxSize-this.readIndex:this.writeIndex-this.readIndex}put(e){const t=this.nextIndex.nextIndex(this.writeIndex);return t===this.readIndex?this.putOnFull.putToFull(this,e):(this.buffer[this.writeIndex]=e,this.writeIndex=t,qt.success)}get(){if(this.readIndex===this.writeIndex)return this.getOnEmpty.getFromEmpty(this);const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),e}[Symbol.iterator](){return{next:()=>{const e=this.get();return e==null?{value:void 0,done:!0}:{value:e,done:!1}}}}}function X(r=32,e=Xd.returnUndefined,t=il.overwriteOldest){return new ll(r,e,t)}function cn(r){return new rt(r.hash,r.height,r.time,r.numTransactions,r.proposer,r.proposer,r.size,r.fees)}function Wt(r){return new ct(r.hash,r.height,r.proposer,r.numTransactions,r.size,r.time)}function sn(r,e){return new Tt(new kt(e.hash,e.block,!0,e.index,r.numTransactions,e.size,e.time,[],[]),[new Et(e.tree.namespace,e.tree.data)])}function mr(r,e){return new $e(e.hash,[e.tree.namespace],e.block,e.time,e.index,r.numTransactions)}class ul{async getBlockDetail(e){const t=e.target,n=await(t===ie?ud(_()):Ie(tr(_(),t)));return new tt(cn(n))}async getBlockSummaries(e){const t=Lt(_(),l=>e.from===ie||l.height<=e.from),n=or(t),c=ee(n,e.limit),a=ce(c,async l=>Wt(l)),i=await Y(a);return new at(i)}async getTransactionDetail(e){const t=_();if(e instanceof Ee){const n=Ft(t,l=>l.height<=e.height),c=ue(n,l=>K(l.transactions,async f=>sn(l,f))),a=tr(Te(c),e.offset),i=await Ie(a);return new je(i)}if(e instanceof Se){const n=ue(t,a=>K(a.transactions,async i=>sn(a,i))),c=await ld(n,a=>a.details.hash===e.hash);if(!c)throw new ur(e.hash);return new je(c)}throw new j}applyFilter(e,t){return t instanceof Qe?Wo(e,n=>n.height==t.block):t instanceof Ke?Wo(e,n=>n.rollups.indexOf(t.namespace)>=0):e}async getTransactionSummaries(e){const t=_(),{target:n,filter:c}=e;if(n instanceof Xe){const i=ue(t,y=>K(y.transactions,async g=>mr(y,g))),l=Te(i),f=this.applyFilter(l,c),p=await Ht(Ut(f,n.limit));return new ke(p)}if(n instanceof Ze){const a=Ft(t,g=>g.height<=n.height),i=ue(a,g=>K(g.transactions,async E=>mr(g,E))),l=Te(i),f=tr(l,n.offset),p=this.applyFilter(f,c),y=await Ht(Ut(p,n.limit));return new ke(y)}if(n instanceof er){const a=_(),i=ue(a,g=>K(g.transactions,async E=>new $e(E.hash,[E.tree.namespace],E.block,E.time,E.index,g.numTransactions))),l=Ft(i,g=>g.hash!==n.hash),f=Te(l),p=this.applyFilter(f,c),y=await Ht(Ut(p,n.limit));return new ke(y)}throw new j}async getExplorerOverview(){let e;const t=X(11),n=X(51),c=X(51),a=X(51),i=X(51),l=X(11);let f=0,p=0;const y=new Map;for await(const g of _()){e=cn(g),t.put(Wt(g)),n.put(g.size),c.put(Math.round(g.genTime/1e3)),a.put(g.numTransactions),i.put(g.height),f++,p+=g.numTransactions;for await(const E of g.transactions){l.put(mr(g,E));const U=y.get(E.tree.namespace)||0;y.set(E.tree.namespace,U+1)}}return new ft(new pt(e,new dt(Array.from(y.keys()).length,p,f),Array.from(t),Array.from(l),new ut(Array.from(c),Array.from(n),Array.from(a),Array.from(i))))}async getSearchResult(e){const t=X(101),n=X(10),c=X(10);for await(const a of _())t.put(a);for(const a of t){a.hash.toString().startsWith(e.query)&&n.put(Wt(a));for await(const i of a.transactions)i.hash.toString().startsWith(e.query)&&c.put(mr(a,i))}return new vt(new yt(Array.from(n),Array.from(c)))}}class hl{async blockHeight(){return(await $o(_())).height}}class ml{constructor(){o(this,"availability",new gd);o(this,"status",new hl);o(this,"explorer",new ul)}}function q(r){return async e=>(pl(e),wl(e),r.convert(await e.json()))}function pl(r){if(!r.ok)throw r.status>=500&&r.status<600?new ir(r.status,r):r.status>=400&&r.status<500?new sr(r.status,r):new ar(r.status,r)}function wl(r){const e=r.headers.get("content-type");if(!e||!e.startsWith("application/json"))throw he.fromResponse(r,e||"undefined")}async function fl(r,e){return new Ue(r.header,r.hash,r.size,r.payload.transaction_nmt.length,e.leaf.proposer_id)}async function*gl(r,e){const t=e[Symbol.asyncIterator]();yield*K(sd(r.leaf.block_payload.transaction_nmt),async n=>{const c=r.leaf.block_payload.transaction_nmt.indexOf(n),a=await t.next();if(a.done)throw new Error("Not enough transactions");return new Le(a.value.hash,r.leaf.block_header,c,n)})}class yl{constructor(e,t){o(this,"fetcher");o(this,"baseURL");this.fetcher=e,this.baseURL=t}getLeafFromHeight(e){const t=new URL(`leaf/${e}`,this.baseURL);return this.fetcher(t.toString()).then(q(zr.decoder))}getTransactionFromHeightAndOffset(e,t){const n=new URL(`transaction/${e}/${t}`,this.baseURL);return this.fetcher(n.toString()).then(q(Xr.decoder))}async getBlockSummaries(e,t){const n=Mt(t-e),c=ce(n,i=>Promise.all([this.getBlockFromHeight(e+i),this.getLeafFromHeight(e+i)])),a=ce(c,([i,l])=>fl(i,l));return await Y(a)}getBlockFromHeight(e){const t=new URL(`block/${e}`,this.baseURL);return this.fetcher(t.toString()).then(q(Ar.decoder))}async*streamBlocksFromHeightRange(e,t){const n=Mt(e),c=ce(n,i=>this.getLeafFromHeight(e-i)),a=jo(c,i=>or(gl(i,ce(Mt(i.leaf.block_payload.transaction_nmt.length),l=>this.getTransactionFromHeightAndOffset(i.leaf.block_header.height,l)))));if(t===void 0){yield*a;return}yield*ee(a,t)}async getTransactionSummaryRange(e,t,n){const c=this.streamBlocksFromHeightRange(e,50),a=re(c,t),i=ee(a,n);return await Y(i)}async getTransactionSummaryRangeForRollup(e,t,n,c){const a=this.streamBlocksFromHeightRange(t,50),i=Nt(a,p=>p.transaction.vm===e),l=re(i,n),f=ee(l,c);return await Y(f)}}class Cl{constructor(e,t){o(this,"fetcher");o(this,"baseURL");this.fetcher=e,this.baseURL=t}async getBlockDetail(e){const t=new URL(`block/${e.target}`,this.baseURL);return this.fetcher(t.toString()).then(q(ot.decoder))}async getBlockSummaries(e){const t=new URL(`blocks/${e.from}/${e.limit}`,this.baseURL);return this.fetcher(t.toString()).then(q(it.decoder))}async getTransactionDetail(e){let t=null;if(e instanceof Se?t=new URL(`transaction/hash/${e.hash}`,this.baseURL):e instanceof Ee&&(t=new URL(`transaction/${e.height}/${e.offset}`,this.baseURL)),!t)throw new j;return this.fetcher(t.toString()).then(q(Bt.decoder))}async getTransactionSummaries(e){const{target:t,filter:n}=e;let c=t.convertURL(this.baseURL);return c=n.convertURL(c),this.fetcher(c.toString()).then(q(Pt.decoder))}async getExplorerOverview(){const e=new URL("explorer-summary",this.baseURL);return this.fetcher(e.toString()).then(q(gt.decoder))}async getSearchResult(e){const t=new URL(`search/${encodeURIComponent(e.query)}`,this.baseURL);return this.fetcher(t.toString()).then(q(xt.decoder))}}class vl{constructor(e,t){o(this,"fetcher");o(this,"baseURL");o(this,"blockHeightURL");o(this,"blockHeightResponseValidator",q(s.decoder));this.fetcher=e,this.baseURL=t,this.blockHeightURL=new URL("block-height",this.baseURL)}blockHeight(){return this.fetcher(this.blockHeightURL).then(this.blockHeightResponseValidator)}}class xl{constructor(e,t){o(this,"availability");o(this,"status");o(this,"explorer");this.availability=new yl(e,new URL("availability/",t)),this.status=new vl(e,new URL("status/",t)),this.explorer=new Cl(e,new URL("explorer/",t))}}class bl{constructor(e){o(this,"service");this.service=e}blockHeight(){return this.service.blockHeight()}async handleRequest(e){switch(e.method){case"blockHeight":return this.blockHeight();default:throw new j}}}class El{constructor(e){o(this,"service");this.service=e}async getLeafFromHeight(e){return zr.encode(await this.service.getLeafFromHeight(e))}async getTransactionFromHeightAndOffset(e,t){return Xr.encode(await this.service.getTransactionFromHeightAndOffset(e,t))}async getBlockFromHeight(e){return Ar.encode(await this.service.getBlockFromHeight(e))}async getBlockSummaries(e,t){return ps.encode(await this.service.getBlockSummaries(e,t))}async getTransactionSummaryRange(e,t,n){return Co.encode(await this.service.getTransactionSummaryRange(e,t,n))}async getTransactionSummaryRangeForRollup(e,t,n,c){return Co.encode(await this.service.getTransactionSummaryRangeForRollup(e,t,n,c))}async handleRequest(e){switch(e.method){case"getLeafFromHeight":return await this.getLeafFromHeight(s.decode(e.param[0]));case"getTransactionFromHeightAndOffset":return await this.getTransactionFromHeightAndOffset(s.decode(e.param[0]),s.decode(e.param[1]));case"getBlockFromHeight":return await this.getBlockFromHeight(s.decode(e.param[0]));case"getBlockSummaries":return await this.getBlockSummaries(s.decode(e.param[0]),s.decode(e.param[1]));case"getTransactionSummaryRange":return await this.getTransactionSummaryRange(s.decode(e.param[0]),s.decode(e.param[1]),s.decode(e.param[2]));case"getTransactionSummaryRangeForRollup":return await this.getTransactionSummaryRangeForRollup(s.decode(e.param[0]),s.decode(e.param[1]),s.decode(e.param[2]),s.decode(e.param[3]));default:throw new j}}}class Sl{constructor(e){o(this,"service");this.service=e}async getBlockDetail(e){return ot.encode(await this.service.getBlockDetail(e))}async getBlockSummaries(e){return it.encode(await this.service.getBlockSummaries(e))}async getTransactionDetail(e){return Bt.encode(await this.service.getTransactionDetail(e))}async getTransactionSummaries(e){return Pt.encode(await this.service.getTransactionSummaries(e))}async getExplorerOverview(){return gt.encode(await this.service.getExplorerOverview())}async getSearchResult(e){return xt.encode(await this.service.getSearchResult(e))}async handleRequest(e){switch(e.method){case"getBlockDetail":return await this.getBlockDetail(ko.decode(e.param[0]));case"getBlockSummaries":return await this.getBlockSummaries(Po.decode(e.param[0]));case"getTransactionDetail":return this.getTransactionDetail(Mo.decode(e.param[0]));case"getTransactionSummaries":return this.getTransactionSummaries(Jo.decode(e.param[0]));case"getExplorerOverview":return this.getExplorerOverview();case"getSearchResult":return this.getSearchResult(Fo.decode(e.param[0]))}}}class kl{constructor(e){o(this,"availability");o(this,"status");o(this,"explorer");this.availability=new El(e.availability),this.status=new bl(e.status),this.explorer=new Sl(e.explorer)}async handleRequest(e){switch(e.api){case"availability":return this.availability.handleRequest(e);case"status":return this.status.handleRequest(e);case"explorer":return this.explorer.handleRequest(e);default:throw new j}}}async function Il(){try{const e=await(await fetch("/config.json")).json();if(e.hotshot_query_service_url){const t=new URL(e.hotshot_query_service_url);return new xl(fetch.bind(self),t)}}catch{}return new ml}async function Tl(){return new kl(await Il())}class Rl{constructor(e){o(this,"service");o(this,"postMessage");this.postMessage=e,this.service=Tl()}async handleEvent(e){const t=Mn.decode(e.data);try{const c=await(await this.service).handleRequest(t);this.postMessage(Xt.encode(new gr(t.requestID,c)))}catch(n){this.postMessage(Zt.encode(new yr(t.requestID,n)))}}}self.addEventListener("message",new Rl(self.postMessage.bind(self)))})();
