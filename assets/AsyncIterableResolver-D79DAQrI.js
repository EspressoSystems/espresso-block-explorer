import{j as c}from"./jsx-runtime-C8OW3RLV.js";import{R as l}from"./index-BwDkhjyp.js";import{b as i,a as r,A as d,P as I}from"./ProvideAsyncStates-cPWIR7SO.js";const y=o=>{const e=o.asyncIterable,[n,u]=l.useState({asyncIterable:e,inFlightPromise:null,state:i.waiting()}),t=n.state;return l.useEffect(()=>{let s=u;if(n.asyncIterable!==e){s({asyncIterable:e,inFlightPromise:null,state:i.waiting()});return}const m=e[Symbol.asyncIterator](),h=a=>{if(a.done){s({asyncIterable:e,inFlightPromise:null,state:i.withData(r.done,t.data)});return}s({asyncIterable:e,inFlightPromise:null,state:i.withData(r.active,a.value)})},p=a=>{s({asyncIterable:e,inFlightPromise:null,state:i.withError(r.done,a)})};if(n.inFlightPromise!==null){n.inFlightPromise.then(h,p);return}if(t.asyncState!==r.done){if(t.asyncState===r.waiting||t.asyncState===r.active){const a=m.next();s({asyncIterable:e,inFlightPromise:a,state:t})}return()=>{s=()=>{}}}},[e,t,t.asyncState,t.data,n.inFlightPromise,n.asyncIterable]),c(d.Provider,{value:t,children:c(I,{children:o.children})})};try{y.displayName="AsyncIterableResolver",y.__docgenInfo={description:`AsyncIterableResolver is a component that resolves an AsyncIterable into a series of AsyncSnapshots.
This component is useful for consuming an AsyncIterable in a React component.`,displayName:"AsyncIterableResolver",props:{asyncIterable:{defaultValue:null,description:"",name:"asyncIterable",required:!0,type:{name:"AsyncIterable<unknown>"}}}}}catch{}export{y as A};
