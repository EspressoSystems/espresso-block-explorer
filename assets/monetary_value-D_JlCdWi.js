import{b as h}from"./assert-BI051aL8.js";import{B,r as b,T as C,a as x,b as P,c as S,s as M,A as $,k as m,l as T}from"./string-DurhFPzJ.js";const w="InvalidInputError";class d extends B{constructor(e="invalid input"){super(e),Object.freeze(this)}get code(){return w}}class O{convert(e){return P(e,"code","message"),S(e,w),new d(M.decode(e.message))}}class X extends x{}class V extends C{encoder=new X;decoder=new O}const k=new V;b(w,k);class i{constructor(e,r,t){this.alpha3Code=e,this.code=r,this.significantDigits=t,this.alpha3Code=e,this.code=r,this.significantDigits=t,this.significantDigitsMultiplier=BigInt(10)**BigInt(this.significantDigits)}significantDigitsMultiplier;toJSON(){return l.encode(this)}}const y=new i("JPY",392,0),A=new i("GBP",826,2),I=new i("USD",840,2),J=new i("EUR",978,2),U=new i("XXX",999,2),D=new i("ETH",1001,18),f=new i("XBT",1002,8),E=new i("ESP",10001,18),N=[y,A,I,J,U,D,f,E],H=new Map(N.map(n=>[n.alpha3Code,n]));class R{convert(e){if(typeof e!="string")throw new d("CurrencyCodeDecoder: expected string");if(e==="BTC")return f;const r=H.get(e);if(r===void 0)throw new d(`CurrencyCodeDecoder: unknown currency: "${e}"`);return r}}class Y{convert(e){return h(e,i),e.alpha3Code}}class G extends C{decoder=new R;encoder=new Y}const l=new G;class c{constructor(e,r){this.currency=e,this.value=r,this.currency=e,this.value=r}static USD(e){return new c(I,BigInt(e))}static ETH(e){return new c(D,BigInt(e))}static ESP(e){return new c(E,BigInt(e))}static JPY(e){return new c(y,BigInt(e))}static BTC(e){return new c(f,BigInt(e))}toString(){return u.encode(this)}toJSON(){return u.encode(this)}}function j(n){return n==="."||n===","||n===" "}function z(n,e){let r=-1;const t=n.length;for(let s=0;s<t;s++)e(n[s])&&(r=s);return r}class K{parseCurrencyCode(e){return l.decode(e)}parseValue(e,r){let t=1n;r[0]==="-"&&(t=-1n,r=r.substring(1));const s=z(r,j);if(s===-1){const v=BigInt(r.replace(/\D/g,""))*e.significantDigitsMultiplier;return t*v}const o=r.substring(0,s).replace(/\D/g,""),a=r.substring(s+1).replace(/\D/g,""),g=BigInt(o)*e.significantDigitsMultiplier,p=BigInt(a)*10n**BigInt(e.significantDigits-a.length);return t*(g+p)}convert(e){if(typeof e!="string")throw new d("MonetaryValueDecoder: expected string");const r=e.indexOf(" ");if(r<=-1)throw new d("MonetaryValueDecoder: missing non-breaking space");const t=e.substring(0,r),s=e.substring(r+1);if(/^-?[\d .,]+$/.test(t)){const a=this.parseCurrencyCode(s);return new c(a,this.parseValue(a,t))}const o=this.parseCurrencyCode(t);return new c(o,this.parseValue(o,s))}}class W{convert(e){h(e,c);const r=e.value<0n?"-":"",t=e.value<0n?-e.value:e.value,s=t%e.currency.significantDigitsMultiplier,o=t/e.currency.significantDigitsMultiplier,a=String(o),g=String(s);return/^0+$/.test(g)?`${l.encode(e.currency)} ${r}${a}`:`${l.encode(e.currency)} ${r}${o}.${String(s).padStart(e.currency.significantDigits,"0")}`}}class q extends C{decoder=new K;encoder=new W}const u=new q,Q=new $(new m(u),new T(u));export{E,d as I,c as M,l as c,Q as m};
