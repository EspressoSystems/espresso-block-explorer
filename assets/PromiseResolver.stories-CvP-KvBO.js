var f=Object.defineProperty;var P=(e,t,n)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var i=(e,t,n)=>(P(e,typeof t!="symbol"?t+"":t,n),n);import{j as r}from"./jsx-runtime-evMRDBC5.js";import{R as d,r as _}from"./index-4g5l5LRQ.js";import{T as S}from"./Text-qj7igP2-.js";import"./_commonjsHelpers-4gQjN7DL.js";var s=(e=>(e[e.none=0]="none",e[e.waiting=1]="waiting",e[e.active=2]="active",e[e.done=3]="done",e))(s||{});class a{get asyncState(){return 0}get data(){}get error(){}get hasData(){return!1}get hasError(){return!1}static nothing(){return new D}static waiting(){return new E}static withData(t,n){return new N(t,n)}static withError(t,n){return new A(t,n)}}class D extends a{}class E extends a{get asyncState(){return 1}}class A extends a{constructor(n,o){super();i(this,"_connectionState");i(this,"_error");this._connectionState=n,this._error=o}get asyncState(){return this._connectionState}get error(){return this._error}get hasError(){return!0}}class N extends a{constructor(n,o){super();i(this,"_connectionState");i(this,"_data");this._connectionState=n,this._data=o}get asyncState(){return this._connectionState}get data(){return this._data}get hasData(){return!0}}const y=d.createContext(a.nothing()),R=_.createContext(null),p=e=>r(R.Provider,{value:e.data,children:e.children});try{p.displayName="SetData",p.__docgenInfo={description:`SetData is a Components whose sole purpose is to populate a DataContext
with the provided data.  At such a level we are unable to make any
type assertion about the data being provided.`,displayName:"SetData",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"unknown"}}}}}catch{}const L=_.createContext(null),u=e=>r(L.Provider,{value:e.error,children:e.children});try{u.displayName="SetError",u.__docgenInfo={description:"",displayName:"SetError",props:{error:{defaultValue:null,description:"",name:"error",required:!0,type:{name:"unknown"}}}}}catch{}const I=_.createContext(!1),h=e=>r(I.Provider,{value:e.loading,children:e.children});try{h.displayName="SetLoading",h.__docgenInfo={description:"",displayName:"SetLoading",props:{loading:{defaultValue:null,description:"",name:"loading",required:!0,type:{name:"boolean"}}}}}catch{}const m=e=>{const t=d.useContext(y);return r(h,{loading:t.asyncState===s.waiting,children:r(u,{error:t.error,children:r(p,{data:t.data,children:e.children})})})};try{m.displayName="ProvideAsyncStates",m.__docgenInfo={description:`ProvideAsyncStates consumes an ancestor AsyncSnapshotContext and will
provide a LoadingContext, ErrorContext, and DataContext for consumption
by ancestor components.`,displayName:"ProvideAsyncStates",props:{}}}catch{}const g=e=>{const t=e.promise,[n,o]=d.useState({promise:t,state:a.waiting()}),v=n.state;return v.asyncState==s.waiting&&t.then(l=>o({promise:t,state:a.withData(s.done,l)}),l=>o({promise:t,state:a.withError(s.done,l)})),n.promise!==t&&o({promise:t,state:a.waiting()}),r(y.Provider,{value:v,children:r(m,{children:e.children})})};try{g.displayName="PromiseResolver",g.__docgenInfo={description:`PromiseResolver converts the given promise into distinct AsyncSnapshot
states and passes it to the given children components via the
AsyncSnapshotContext React Context.  It also automatically expands the
data in the AsyncSnapshot to the Data, Loading, and Error contexts using
the ProvideAsyncStates component.  As such, any descendant component will
have access to what is needed via the AsyncSnapshotContext, LoadingContext,
DataContext, or ErrorContext contexts.`,displayName:"PromiseResolver",props:{promise:{defaultValue:null,description:"",name:"promise",required:!0,type:{name:"Promise<unknown>"}}}}}catch{}async function b(e){return new Promise(t=>{const n=setTimeout(()=>{clearTimeout(n),t()},e)})}const k=()=>{const e=d.useContext(y);if(e.asyncState===s.waiting)return r(S,{text:"Loading..."});const t=e.data;return r(S,{text:String(t)})},q=e=>r(g,{promise:b(e.milliseconds).then(()=>e.value),children:r(k,{})}),$={title:"Components/Async/Promise Resolver",component:q},c={args:{value:"Done!",milliseconds:2e3}};var x,w,C;c.parameters={...c.parameters,docs:{...(x=c.parameters)==null?void 0:x.docs,source:{originalSource:`{
  args: {
    value: 'Done!',
    milliseconds: 2000
  }
}`,...(C=(w=c.parameters)==null?void 0:w.docs)==null?void 0:C.source}}};const z=["PromiseResolver"];export{c as PromiseResolver,z as __namedExportsOrder,$ as default};
