var Yr=Object.defineProperty;var Vr=(r,e,o)=>e in r?Yr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[e]=o;var t=(r,e,o)=>Vr(r,typeof e!="symbol"?e+"":e,o);import{j as Xr}from"./jsx-runtime-BlAj40OV.js";import{F as Zr}from"./FetchError-D54b6GBB.js";import{n as a,b as fr}from"./base64-B2mB5PCd.js";import{c as P,b as L,d as Cr,e as X,n as yr,l as gr,f as Rr,g as Z,h as Er,r as vr,i as kr,W as eo,j as ro,N as ir,k as oo,m as dr,o as Ce,p as to,q as so,s as co,t as no,u as ao,v as io,w as Sr,x as xr,y as x,z as lo,A as po,C as uo,a as br,B as ho,D as mo,E as wo,F as fo,R as Co}from"./CircularBuffer-BV9Jw316.js";import{C as g,g as l,s as A,a as p,T as h,p as O,t as k,v as S,w as yo,I as Tr,m as go,l as Ro,B as lr}from"./string-CeEx6zFN.js";import{I as H}from"./monetary_value-Cx3JDvUv.js";import{t as w,T as y}from"./TaggedBase64-2LmeqDVW.js";import{h as Ar}from"./array_buffer--l28O267.js";import{g as C}from"./generateFakeData-B4ZSCHuN.js";import{f as $,e as _,g as Eo,h as z,t as D,i as q,j as T,k as _r,r as ye,l as I,n as Dr,m as b,o as U,p as vo,q as de,s as ko,U as we,v as pr,w as le,x as pe,y as So,z as xo,A as ue,B as bo}from"./LoadingProvider-CzJMQTG6.js";import{N as To}from"./NotFoundError-DaVPhKpy.js";import"./functional-B4fslo0b.js";import{R as Ao}from"./index-Cs7sjTYM.js";class Br{constructor(e){t(this,"query");this.query=e}toJSON(){return Ir.encode(this)}}class _o{convert(e){return l(e,Br),A.encode(e.query)}}class Do{convert(e){return new Br(A.decode(e))}}class Bo extends g{constructor(){super(...arguments);t(this,"encoder",new _o);t(this,"decoder",new Do)}}const Ir=new Bo;class ge{constructor(e,o){t(this,"blocks");t(this,"transactions");this.blocks=e,this.transactions=o}toJSON(){return Re.encode(this)}}class Io{convert(e){return p(e,"blocks","transactions"),new ge(P.decode(e.blocks),L.decode(e.transactions))}}class qo{convert(e){return l(e,ge),{blocks:P.encode(e.blocks),transactions:L.encode(e.transactions)}}}class Go extends g{constructor(){super(...arguments);t(this,"encoder",new qo);t(this,"decoder",new Io)}}const Re=new Go;class Ee{constructor(e){t(this,"searchResults");this.searchResults=e}toJSON(){return ve.encode(this)}}class Po{convert(e){return p(e,"search_results"),new Ee(Re.decode(e.search_results))}}class Lo{convert(e){return l(e,Ee),{search_results:Re.encode(e.searchResults)}}}class Oo extends g{constructor(){super(...arguments);t(this,"encoder",new Lo);t(this,"decoder",new Po)}}const ve=new Oo,W=a;class ke{constructor(e,o,s,n){t(this,"requestID");t(this,"api");t(this,"method");t(this,"param");this.requestID=e,this.api=o,this.method=s,this.param=n}toJSON(){return{requestID:this.requestID,api:this.api,method:this.method,param:this.param}}}class Wo{convert(e){return p(e,"requestID","api","method","param"),new ke(W.decode(e.requestID),A.decode(e.api),A.decode(e.method),e.param)}}class Uo{convert(e){return l(e,ke),{requestID:W.encode(e.requestID),api:A.encode(e.api),method:A.encode(e.method),param:e.param}}}class Fo extends h{constructor(){super(...arguments);t(this,"encoder",new Uo);t(this,"decoder",new Wo)}}const Ho=new Fo;class Se{constructor(e){t(this,"requestID");this.requestID=e}}class xe extends Se{constructor(o,s){super(o);t(this,"response");this.response=s}toJSON(){return qr.encode(this)}}class No{convert(e){return p(e,"requestID","response"),new xe(W.decode(e.requestID),e.response)}}class Jo{convert(e){return l(e,xe),{requestID:W.encode(e.requestID),response:e.response}}}class Mo extends h{constructor(){super(...arguments);t(this,"encoder",new Jo);t(this,"decoder",new No)}}const qr=new Mo;class be extends Se{constructor(o,s){super(o);t(this,"error");this.error=s}toJSON(){return Gr.encode(this)}}class Qo{convert(e){return p(e,"requestID","error"),new be(W.decode(e.requestID),O.decode(e.error))}}class jo{convert(e){return l(e,be),{requestID:W.encode(e.requestID),error:O.encode(e.error)}}}class zo extends h{constructor(){super(...arguments);t(this,"encoder",new jo);t(this,"decoder",new Qo)}}const Gr=new zo;class $o{convert(e){if(k(e,"response",S))return qr.decode(e);if(k(e,"error",S))return Gr.decode(e);throw new H}}class Ko{convert(e){return l(e,Se),e.toJSON()}}class Yo extends h{constructor(){super(...arguments);t(this,"encoder",new Ko);t(this,"decoder",new $o)}}const ur=new Yo;class Te{constructor(e){t(this,"transaction_nmt");this.transaction_nmt=e}toJSON(){return N.encode(this)}}class Vo{convert(e){return p(e,"transaction_nmt"),new Te(Cr.decode(e.transaction_nmt))}}class Xo{convert(e){return l(e,Te),{transaction_nmt:Cr.encode(e.transaction_nmt)}}}class Zo extends h{constructor(){super(...arguments);t(this,"encoder",new Xo);t(this,"decoder",new Vo)}}const N=new Zo;class Ae{constructor(e,o,s,n,c){t(this,"header");t(this,"payload");t(this,"hash");t(this,"size");t(this,"numTransactions");this.header=e,this.payload=o,this.hash=s,this.size=n,this.numTransactions=c}toJSON(){return _e.encode(this)}}class et{convert(e){return p(e,"header","payload","hash","size","num_transactions"),new Ae(X.decode(e.header),N.decode(e.payload),w.decode(e.hash),a.decode(e.size),a.decode(e.num_transactions))}}class rt{convert(e){return l(e,Ae),{header:X.encode(e.header),payload:N.encode(e.payload),hash:w.encode(e.hash),size:a.encode(e.size),num_transactions:a.encode(e.numTransactions)}}}class ot extends g{constructor(){super(...arguments);t(this,"encoder",new rt);t(this,"decoder",new et)}}const _e=new ot;class tt{convert(e){if(!yo(e))throw new Tr(typeof e,"boolean");return e}}class st{convert(e){return go(e,"boolean"),e}}class ct extends h{constructor(){super(...arguments);t(this,"encoder",new st);t(this,"decoder",new tt)}}const ee=new ct;class K{constructor(e){t(this,"leaf_commit");this.leaf_commit=e}toJSON(){return De.encode(this)}}class nt{convert(e){return p(e,"leaf_commit"),new K(w.decode(e.leaf_commit))}}class at{convert(e){return l(e,K),{leaf_commit:w.encode(e.leaf_commit)}}}class it extends h{constructor(){super(...arguments);t(this,"encoder",new at);t(this,"decoder",new nt)}}const De=new it;class Y{constructor(e,o,s,n,c,i){t(this,"data");t(this,"vote_commitment");t(this,"view_number");t(this,"signatures");t(this,"is_genesis");t(this,"_pd");this.data=e,this.vote_commitment=o,this.view_number=s,this.signatures=n,this.is_genesis=c,this._pd=i}toJSON(){return J.encode(this)}}class dt{convert(e){return p(e,"data","vote_commitment","view_number","signatures","is_genesis","_pd"),new Y(De.decode(e.data),w.decode(e.vote_commitment),a.decode(e.view_number),yr.decode(e.signatures),ee.decode(e.is_genesis),null)}}class lt{convert(e){return l(e,Y),{data:De.encode(e.data),vote_commitment:w.encode(e.vote_commitment),view_number:a.encode(e.view_number),signatures:yr.encode(e.signatures),is_genesis:ee.encode(e.is_genesis),_pd:null}}}class pt extends h{constructor(){super(...arguments);t(this,"encoder",new lt);t(this,"decoder",new dt)}}const J=new pt;class Be{constructor(e,o,s,n,c,i,d,m){t(this,"view_number");t(this,"justify_qc");t(this,"parent_commitment");t(this,"block_header");t(this,"block_payload");t(this,"rejected");t(this,"timestamp");t(this,"proposer_id");this.view_number=e,this.justify_qc=o,this.parent_commitment=s,this.block_header=n,this.block_payload=c,this.rejected=i,this.timestamp=d,this.proposer_id=m}toJSON(){return Ie.encode(this)}}class ut{convert(e){return p(e,"view_number","justify_qc","parent_commitment","block_header","block_payload","rejected","timestamp","proposer_id"),new Be(a.decode(e.view_number),J.decode(e.justify_qc),w.decode(e.parent_commitment),X.decode(e.block_header),N.decode(e.block_payload),fr.decode(e.rejected),a.decode(e.timestamp),Ar.decode(e.proposer_id))}}class ht{convert(e){return l(e,Be),{view_number:a.encode(e.view_number),justify_qc:J.encode(e.justify_qc),parent_commitment:w.encode(e.parent_commitment),block_header:X.encode(e.block_header),block_payload:N.encode(e.block_payload),rejected:fr.encode(e.rejected),timestamp:a.encode(e.timestamp),proposer_id:Ar.encode(e.proposer_id)}}}class mt extends h{constructor(){super(...arguments);t(this,"encoder",new ht);t(this,"decoder",new ut)}}const Ie=new mt;class qe{constructor(e,o){t(this,"leaf");t(this,"qc");this.leaf=e,this.qc=o}toJSON(){return Ge.encode(this)}}class wt{convert(e){return p(e,"leaf","qc"),new qe(Ie.decode(e.leaf),J.decode(e.qc))}}class ft{convert(e){return l(e,qe),{leaf:Ie.encode(e.leaf),qc:J.encode(e.qc)}}}class Ct extends h{constructor(){super(...arguments);t(this,"encoder",new ft);t(this,"decoder",new wt)}}const Ge=new Ct;class Pe{constructor(e,o){t(this,"pos");t(this,"proof");this.pos=e,this.proof=o}toJSON(){return Le.encode(this)}}class yt{convert(e){return p(e,"pos","proof"),new Pe(w.decode(e.pos),gr.decode(e.proof))}}class gt{convert(e){return l(e,Pe),{pos:w.encode(e.pos),proof:gr.encode(e.proof)}}}class Rt extends h{constructor(){super(...arguments);t(this,"encoder",new gt);t(this,"decoder",new yt)}}const Le=new Rt;class Oe{constructor(e,o,s,n,c){t(this,"transaction");t(this,"block_hash");t(this,"proof");t(this,"height");t(this,"hash");this.transaction=e,this.block_hash=o,this.proof=s,this.height=n,this.hash=c}toJSON(){return We.encode(this)}}class Et{convert(e){return p(e,"transaction","block_hash","proof","height","hash"),new Oe(Rr.decoder.convert(e.transaction),w.decode(e.block_hash),Le.decoder.convert(e.proof),a.decode(e.height),w.decode(e.hash))}}class vt{convert(e){return l(e,Oe),{transaction:Rr.encode(e.transaction),block_hash:w.encode(e.block_hash),proof:Le.encode(e.proof),height:a.encode(e.height),hash:w.encode(e.hash)}}}class kt extends h{constructor(){super(...arguments);t(this,"encoder",new vt);t(this,"decoder",new Et)}}const We=new kt,G="latest";class Ue{constructor(e){t(this,"target");this.target=e}static latest(){return new Lr}static height(e){return new Or(e)}toJSON(){return Pr.encode(this)}}class St{convert(e){return l(e,Ue),typeof e.target=="number"?a.encode(e.target):A.encode(e.target)}}class xt{convert(e){return e===G?new Lr:new Or(a.decode(e))}}class bt extends g{constructor(){super(...arguments);t(this,"encoder",new St);t(this,"decoder",new xt)}}const Pr=new bt;class Lr extends Ue{constructor(){super(G)}}class Or extends Ue{constructor(e){super(e)}}class Fe{constructor(e){t(this,"blockDetail");this.blockDetail=e}toJSON(){return He.encode(this)}}class Tt{convert(e){return p(e,"block_detail"),new Fe(Z.decode(e.block_detail))}}class At{convert(e){return l(e,Fe),{block_detail:Z.encode(e.blockDetail)}}}class _t extends g{constructor(){super(...arguments);t(this,"encoder",new At);t(this,"decoder",new Tt)}}const He=new _t;class Ne{constructor(e){t(this,"limit");this.limit=e}static latest(e){return new Ur(e)}static from(e,o){return new Fr(e,o)}toJSON(){return Wr.encode(this)}}class Dt{convert(e){return l(e,Ne),Ro(e.from)?{from:a.encode(e.from),limit:a.encode(e.limit)}:{from:A.encode(e.from),limit:a.encode(e.limit)}}}class Bt{convert(e){return p(e,"from","limit"),e.from===G?new Ur(a.decode(e.limit)):new Fr(a.decode(e.from),a.decode(e.limit))}}class It extends g{constructor(){super(...arguments);t(this,"encoder",new Dt);t(this,"decoder",new Bt)}}const Wr=new It;class Ur extends Ne{constructor(e){super(e)}get from(){return G}}class Fr extends Ne{constructor(o,s){super(s);t(this,"from");this.from=o}}class Je{constructor(e){t(this,"blockSummaries");this.blockSummaries=e}toJSON(){return Me.encode(this)}}class qt{convert(e){return p(e,"block_summaries"),new Je(P.decode(e.block_summaries))}}class Gt{convert(e){return l(e,Je),{block_summaries:P.encode(e.blockSummaries)}}}class Pt extends g{constructor(){super(...arguments);t(this,"encoder",new Gt);t(this,"decoder",new qt)}}const Me=new Pt;class Qe{constructor(e,o,s){t(this,"rollups");t(this,"transactions");t(this,"blocks");this.rollups=e,this.transactions=o,this.blocks=s}toJSON(){return je.encode(this)}}class Lt{convert(e){return p(e,"rollups","transactions","blocks"),new Qe(a.decode(e.rollups),a.decode(e.transactions),a.decode(e.blocks))}}class Ot{convert(e){return l(e,Qe),{rollups:a.encode(e.rollups),transactions:a.encode(e.transactions),blocks:a.encode(e.blocks)}}}class Wt extends h{constructor(){super(...arguments);t(this,"encoder",new Ot);t(this,"decoder",new Lt)}}const je=new Wt;class ze{constructor(e,o,s,n,c){t(this,"latestBlock");t(this,"genesisOverview");t(this,"latestBlocks");t(this,"latestTransactions");t(this,"histograms");this.latestBlock=e,this.genesisOverview=o,this.latestBlocks=s,this.latestTransactions=n,this.histograms=c}toJSON(){return $e.encode(this)}}class Ut{convert(e){return p(e,"latest_block","genesis_overview","latest_blocks","latest_transactions","histograms"),new ze(Z.decode(e.latest_block),je.decode(e.genesis_overview),P.decode(e.latest_blocks),L.decode(e.latest_transactions),Er.decode(e.histograms))}}class Ft{convert(e){return l(e,ze),{latest_block:Z.encode(e.latestBlock),genesis_overview:je.encode(e.genesisOverview),latest_blocks:P.encode(e.latestBlocks),latest_transactions:L.encode(e.latestTransactions),histograms:Er.encode(e.histograms)}}}class Ht extends h{constructor(){super(...arguments);t(this,"encoder",new Ft);t(this,"decoder",new Ut)}}const $e=new Ht;class Ke{constructor(e){t(this,"explorerSummary");this.explorerSummary=e}toJSON(){return Ye.encode(this)}}class Nt{convert(e){return p(e,"explorer_summary"),new Ke($e.decode(e.explorer_summary))}}class Jt{convert(e){return l(e,Ke),{explorer_summary:$e.encode(e.explorerSummary)}}}class Mt extends h{constructor(){super(...arguments);t(this,"encoder",new Jt);t(this,"decoder",new Nt)}}const Ye=new Mt;class Ve{static heightAndOffset(e,o){return new M(e,o)}static hash(e){return new Q(e)}toJSON(){return Hr.encode(this)}}class Qt{convert(e){if(l(e,Ve),e instanceof M)return{height:a.encode(e.height),offset:a.encode(e.offset)};if(e instanceof Q)return{hash:w.encode(e.hash)};throw new H}}class jt{convert(e){if(k(e,"height",S)&&k(e,"offset",S))return new M(a.decode(e.height),a.decode(e.offset));if(k(e,"hash",S))return new Q(w.decode(e.hash));throw new H}}class zt extends h{constructor(){super(...arguments);t(this,"encoder",new Qt);t(this,"decoder",new jt)}}const Hr=new zt;class M extends Ve{constructor(o,s){super();t(this,"height");t(this,"offset");this.height=o,this.offset=s}}class Q extends Ve{constructor(o){super();t(this,"hash");this.hash=o}}class Xe{constructor(e,o,s,n,c,i,d,m,f){t(this,"hash");t(this,"height");t(this,"blockConfirmed");t(this,"offset");t(this,"numTransactions");t(this,"size");t(this,"time");t(this,"sequencingFees");t(this,"feeDetails");this.hash=e,this.height=o,this.blockConfirmed=s,this.offset=n,this.numTransactions=c,this.size=i,this.time=d,this.sequencingFees=m,this.feeDetails=f}toJSON(){return Ze.encode(this)}}class $t{convert(e){return p(e,"hash","height","block_confirmed","offset","num_transactions","size","time","sequencing_fees","fee_details"),new Xe(w.decode(e.hash),a.decode(e.height),ee.decode(e.block_confirmed),a.decode(e.offset),a.decode(e.num_transactions),a.decode(e.size),vr.decode(e.time),[],[])}}class Kt{convert(e){return l(e,Xe),{hash:w.encode(e.hash),height:a.encode(e.height),block_confirmed:ee.encode(e.blockConfirmed),offset:a.encode(e.offset),num_transactions:a.encode(e.numTransactions),size:a.encode(e.size),time:vr.encode(e.time),sequencing_fees:[],fee_details:[]}}}class Yt extends h{constructor(){super(...arguments);t(this,"encoder",new Kt);t(this,"decoder",new $t)}}const Ze=new Yt;class er{constructor(e,o){t(this,"details");t(this,"data");this.details=e,this.data=o}toJSON(){return rr.encode(this)}}class Vt{convert(e){return p(e,"details","data"),new er(Ze.decode(e.details),kr.decode(e.data))}}class Xt{convert(e){return l(e,er),{details:Ze.encode(e.details),data:kr.encode(e.data)}}}class Zt extends h{constructor(){super(...arguments);t(this,"encoder",new Xt);t(this,"decoder",new Vt)}}const rr=new Zt;class V{constructor(e){t(this,"transactionDetail");this.transactionDetail=e}toJSON(){return or.encode(this)}}class es{convert(e){return p(e,"transaction_detail"),new V(rr.decode(e.transaction_detail))}}class rs{convert(e){return l(e,V),{transaction_detail:rr.encode(e.transactionDetail)}}}class os extends g{constructor(){super(...arguments);t(this,"encoder",new rs);t(this,"decoder",new es)}}const or=new os;class re{constructor(){}static block(e){return new oe(e)}static namespace(e){return new te(e)}static none(){return new sr}toJSON(){return tr.encode(this)}}class ts{convert(e){return k(e,"block",S)?new oe(a.decode(e.block)):k(e,"namespace",S)?new te(a.decode(e.namespace)):new sr}}class ss{convert(e){if(l(e,re),e instanceof sr)return{};if(e instanceof oe)return{block:a.encode(e.block)};if(e instanceof te)return{namespace:a.encode(e.namespace)};throw new H}}class cs extends g{constructor(){super(...arguments);t(this,"encoder",new ss);t(this,"decoder",new ts)}}const tr=new cs;class sr extends re{constructor(){super()}convertURL(e){return e}}class oe extends re{constructor(o){super();t(this,"block");this.block=o}convertURL(o){return new URL(`${o.pathname}/block/${this.block}`,o)}}class te extends re{constructor(o){super();t(this,"namespace");this.namespace=o}convertURL(o){return new URL(`${o.pathname}/namespace/${this.namespace}`,o)}}class se{constructor(e){t(this,"limit");this.limit=e}static latest(e){return new ce(e)}static heightAndOffset(e,o,s){return new ne(e,o,s)}static hash(e,o){return new ae(e,o)}toJSON(){return cr.encode(this)}}class ns{convert(e){return p(e,"limit"),k(e,"height",S)&&k(e,"offset",S)?new ne(a.decode(e.height),a.decode(e.offset),a.decode(e.limit)):k(e,"hash",S)?new ae(w.decode(e.hash),a.decode(e.limit)):new ce(a.decode(e.limit))}}class as{convert(e){if(l(e,se),e instanceof ce)return{limit:a.encode(e.limit)};if(e instanceof ne)return{height:a.encode(e.height),offset:a.encode(e.offset),limit:a.encode(e.limit)};if(e instanceof ae)return{hash:w.encode(e.hash),limit:a.encode(e.limit)};throw new H}}class is extends g{constructor(){super(...arguments);t(this,"encoder",new as);t(this,"decoder",new ns)}}const cr=new is;class ce extends se{constructor(e){super(e)}convertURL(e){return new URL(`transactions/latest/${this.limit}`,e)}}class ne extends se{constructor(o,s,n){super(n);t(this,"height");t(this,"offset");this.height=o,this.offset=s}convertURL(o){return new URL(`transactions/from/${this.height}/${this.offset}/${this.limit}`,o)}}class ae extends se{constructor(o,s){super(s);t(this,"hash");this.hash=o}convertURL(o){return new URL(`transactions/hash/${this.hash}/${this.limit}`,o)}}class Nr{constructor(e,o){t(this,"target");t(this,"filter");this.target=e,this.filter=o}toJSON(){return Jr.encode(this)}}class ds{convert(e){return p(e,"filter","target"),new Nr(cr.decode(e.target),tr.decode(e.filter))}}class ls{convert(e){return l(e,Nr),{filter:tr.encode(e.filter),target:cr.encode(e.target)}}}class ps extends g{constructor(){super(...arguments);t(this,"encoder",new ls);t(this,"decoder",new ds)}}const Jr=new ps;class F{constructor(e){t(this,"transactionSummaries");this.transactionSummaries=e}toJSON(){return nr.encode(this)}}class us{convert(e){return p(e,"transaction_summaries"),new F(L.decode(e.transaction_summaries))}}class hs{convert(e){return l(e,F),{transaction_summaries:L.encode(e.transactionSummaries)}}}class ms extends g{constructor(){super(...arguments);t(this,"encoder",new hs);t(this,"decoder",new us)}}const nr=new ms;function ws(r){return new Worker(""+new URL("hotshot_query_service_web_worker_api.js-Cc5XmQ74.js",import.meta.url).href,{name:r==null?void 0:r.name})}class fs{constructor(e){t(this,"worker");t(this,"nextRequestID",0);t(this,"requestCompleters",new Map);this.worker=e,e.onmessageerror,e.addEventListener("message",this.handleMessage.bind(this)),e.addEventListener("messageerror",this.handleMessageError.bind(this)),e.addEventListener("error",this.handleError.bind(this))}async submitRequest(e,o,s,n){const[c,i]=this.nextRequest();try{return this.worker.postMessage(Ho.encode(new ke(c,o,s,n))),await i.promise.then(d=>{if(d instanceof be)throw new eo(d.error);if(d instanceof xe){const{response:m}=d;return e.decode(m)}throw new Tr(typeof d,"WebWorkerResponse")})}finally{this.requestCompleters.delete(c)}}nextRequest(){const e=this.nextRequestID++,o=ro();return this.requestCompleters.set(e,o),[e,o]}handleMessage(e){const o=ur.decode(e.data),s=this.requestCompleters.get(o.requestID);if(s===void 0)throw new ir(o.requestID);s.complete(o)}handleMessageError(e){const o=ur.decode(e.data),s=this.requestCompleters.get(o.requestID);if(s===void 0)throw new ir(o.requestID);s.completeError(o)}handleError(e){debugger;console.error("encountered error setting up Web worker",e)}}class Cs{constructor(e){t(this,"helper");this.helper=e}async sendRequest(e,o,...s){return this.helper.submitRequest(e,"availability",o,s)}async getLeafFromHeight(e){return await this.sendRequest(Ge,"getLeafFromHeight",e)}async getTransactionFromHeightAndOffset(e,o){return await this.sendRequest(We,"getTransactionFromHeightAndOffset",e,o)}async getBlockSummaries(e,o){return await this.sendRequest(oo,"getBlockSummaries",e,o)}async getBlockFromHeight(e){return await this.sendRequest(_e,"getBlockFromHeight",e)}async getTransactionSummaryRange(e,o,s){return await this.sendRequest(dr,"getTransactionSummaryRange",e,o,s)}async getTransactionSummaryRangeForRollup(e,o,s,n){return await this.sendRequest(dr,"getTransactionSummaryRangeForRollup",e,o,s,n)}}class ys{constructor(e){t(this,"helper");this.helper=e}async sendRequest(e,o,...s){return this.helper.submitRequest(e,"status",o,s)}async blockHeight(){return await this.sendRequest(a,"blockHeight")}}class gs{constructor(e){t(this,"helper");this.helper=e}async sendRequest(e,o,...s){return this.helper.submitRequest(e,"explorer",o,s)}async getBlockDetail(e){return await this.sendRequest(He,"getBlockDetail",Pr.encode(e))}async getBlockSummaries(e){return await this.sendRequest(Me,"getBlockSummaries",Wr.encode(e))}async getTransactionDetail(e){return await this.sendRequest(or,"getTransactionDetail",Hr.encode(e))}async getTransactionSummaries(e){return await this.sendRequest(nr,"getTransactionSummaries",Jr.encode(e))}async getExplorerOverview(){return await this.sendRequest(Ye,"getExplorerOverview",null)}async getSearchResult(e){return await this.sendRequest(ve,"getSearchResult",Ir.encode(e))}}class Rs{constructor(){t(this,"availability");t(this,"status");t(this,"explorer");const e=new ws,o=new fs(e);this.availability=new Cs(o),this.status=new ys(o),this.explorer=new gs(o)}}function ie(r){return new so(r.height,r.time.valueOf()/1e3,0,new co(0,"00","00"),[],new no(new ArrayBuffer(0)),new y("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new y("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new ao(new ArrayBuffer(0),new ArrayBuffer(0),0),new io(new ArrayBuffer(0),new ArrayBuffer(0)))}async function Es(r){return new Ae(ie(r),new Te(await T(b(r.transactions,async e=>new Ce(e.tree.namespace,Array.from(new Uint8Array(e.tree.data)))))),new y("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions)}function vs(r){return new Sr(ie(r),new y("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions,r.proposer)}function ks(r){const e=r.transactions,o=ie(r);return b(e,async s=>new xr(s.hash,o,s.index,new Ce(s.tree.namespace,Array.from(new Uint8Array(s.tree.data)))))}async function*Ss(r){const e=ie(r),o=r.transactions;yield*b(o,async s=>new Oe(new Ce(s.tree.namespace,Array.from(new Uint8Array(s.tree.data))),new y("BLOCK",new Uint8Array([0,0,0,0]).buffer),new Pe(new y("POS",new Uint8Array([0,0,0,0]).buffer),[new to(new y("EMPTY",new Uint8Array([0,0,0,0]).buffer),[])]),e.height,new y("COMMIT",s.tree.data.slice(0,32))))}class xs{async getLeafFromHeight(e){const o=await this.getBlockFromHeight(e);return new qe(new Be(e,new Y(new K(new y("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new y("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null),new y("LEAF",new Uint8Array([0,0,0,0]).buffer),o.header,o.payload,[],o.header.timestamp,o.header.fee_info.account),new Y(new K(new y("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new y("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null))}async getTransactionFromHeightAndOffset(e,o){const s=await $(_(C(),e)),n=Ss(s);return await Eo(z(n,o))}async getBlockSummaries(e,o){const s=_(C(),e),n=D(s,o-e),c=q(n,async i=>vs(i));return await T(c)}async getBlockFromHeight(e){const o=_(C(),e),s=await $(o);return Es(s)}async*streamTransactionSummaries(e){const o=_r(C(),c=>c.height<=e),s=ye(o);yield*I(s,c=>U(ks(c)))}async getTransactionSummaryRange(e,o,s){const n=this.streamTransactionSummaries(e),c=_(n,o),i=D(c,s);return await T(i)}async getTransactionSummaryRangeForRollup(e,o,s,n){const c=this.streamTransactionSummaries(o),i=Dr(c,f=>f.transaction.vm===e),d=_(i,s),m=D(d,n);return await T(m)}}function hr(r){return new po(r.hash,r.height,r.time,r.numTransactions,r.proposer,r.proposer,r.size,r.fees)}function he(r){return new uo(r.hash,r.height,r.proposer,r.numTransactions,r.size,r.time)}function mr(r,e){return new er(new Xe(e.hash,e.block,!0,e.index,r.numTransactions,e.size,e.time,[],[]),[new ho(e.tree.namespace,e.tree.data)])}function j(r,e){return new br(e.hash,[e.tree.namespace],e.block,e.time,e.index,r.numTransactions)}class bs{async getBlockDetail(e){const o=e.target,s=await(o===G?vo(C()):$(z(C(),o)));return new Fe(hr(s))}async getBlockSummaries(e){const o=_r(C(),d=>e.from===G||d.height<=e.from),s=ye(o),n=D(s,e.limit),c=q(n,async d=>he(d)),i=await T(c);return new Je(i)}async getTransactionDetail(e){const o=C();if(e instanceof M){const s=de(o,d=>d.height<=e.height),n=I(s,d=>b(d.transactions,async m=>mr(d,m))),c=z(U(n),e.offset),i=await $(c);return new V(i)}if(e instanceof Q){const s=I(o,c=>b(c.transactions,async i=>mr(c,i))),n=await ko(s,c=>c.details.hash===e.hash);if(!n)throw new To(e.hash);return new V(n)}throw new we}applyFilter(e,o){return o instanceof oe?pr(e,s=>s.height==o.block):o instanceof te?pr(e,s=>s.rollups.indexOf(o.namespace)>=0):e}async getTransactionSummaries(e){const o=C(),{target:s,filter:n}=e;if(s instanceof ce){const i=I(o,E=>b(E.transactions,async u=>j(E,u))),d=U(i),m=this.applyFilter(d,n),f=await le(pe(m,s.limit));return new F(f)}if(s instanceof ne){const c=de(o,u=>u.height<=s.height),i=I(c,u=>b(u.transactions,async R=>j(u,R))),d=U(i),m=z(d,s.offset),f=this.applyFilter(m,n),E=await le(pe(f,s.limit));return new F(E)}if(s instanceof ae){const c=C(),i=I(c,u=>b(u.transactions,async R=>new br(R.hash,[R.tree.namespace],R.block,R.time,R.index,u.numTransactions))),d=de(i,u=>u.hash!==s.hash),m=U(d),f=this.applyFilter(m,n),E=await le(pe(f,s.limit));return new F(E)}throw new we}async getExplorerOverview(){let e;const o=x(11),s=x(51),n=x(51),c=x(51),i=x(51),d=x(11);let m=0,f=0;const E=new Map;for await(const u of C()){e=hr(u),o.put(he(u)),s.put(u.size),n.put(Math.round(u.genTime/1e3)),c.put(u.numTransactions),i.put(u.height),m++,f+=u.numTransactions;for await(const R of u.transactions){d.put(j(u,R));const Kr=E.get(R.tree.namespace)||0;E.set(R.tree.namespace,Kr+1)}}return new Ke(new ze(e,new Qe(Array.from(E.keys()).length,f,m),Array.from(o),Array.from(d),new lo(Array.from(n),Array.from(s),Array.from(c),Array.from(i))))}async getSearchResult(e){const o=x(101),s=x(10),n=x(10);for await(const c of C())o.put(c);for(const c of o){c.hash.toString().startsWith(e.query)&&s.put(he(c));for await(const i of c.transactions)i.hash.toString().startsWith(e.query)&&n.put(j(c,i))}return new Ee(new ge(Array.from(s),Array.from(n)))}}class Ts{async blockHeight(){return(await So(C())).height}}class As{constructor(){t(this,"availability",new xs);t(this,"status",new Ts);t(this,"explorer",new bs)}}function v(r,e){return async o=>(await _s(o,e),fe(o),r.convert(await o.json()))}async function _s(r,e){if(!r.ok){if(r.status>=500&&r.status<600){try{if(fe(r),e!==void 0){const o=await r.json();throw e.convert(o)}}catch(o){if(o instanceof lr)throw o;console.error("encountered an error attempting to decode a server error from the server",o)}throw new mo(r.status,r)}if(r.status>=400&&r.status<500){try{if(fe(r),e!==void 0){const o=await r.json();throw e.convert(o)}}catch(o){if(o instanceof lr)throw o;console.error("encountered an error attempting to decode a client error from the server",o)}throw new wo(r.status,r)}throw new fo(r.status,r)}}function fe(r){const e=r.headers.get("content-type");if(!e||!e.startsWith("application/json"))throw Co.fromResponse(r,e||"undefined")}class Mr{constructor(e){t(this,"availability");this.availability=e}toJSON(){return Qr.encode(this)}}class Ds{convert(e){return p(e,"Availability"),new Mr(O.decode(e.Availability))}}class Bs{convert(e){return l(e,Mr),{Availability:O.encode(e.availability)}}}class Is extends h{constructor(){super(...arguments);t(this,"encoder",new Bs);t(this,"decoder",new Ds)}}const Qr=new Is;class qs{convert(e){return Qr.decode(e).availability}}const me=new qs;async function Gs(r,e){return new Sr(r.header,r.hash,r.size,r.payload.transaction_nmt.length,[e.leaf.proposer_id])}async function*Ps(r,e){const o=e[Symbol.asyncIterator]();yield*b(xo(r.leaf.block_payload.transaction_nmt),async s=>{const n=r.leaf.block_payload.transaction_nmt.indexOf(s),c=await o.next();if(c.done)throw new Error("Not enough transactions");return new xr(c.value.hash,r.leaf.block_header,n,s)})}class Ls{constructor(e,o){t(this,"fetcher");t(this,"baseURL");this.fetcher=e,this.baseURL=o}getLeafFromHeight(e){const o=new URL(`leaf/${e}`,this.baseURL);return this.fetcher(o.toString()).then(v(Ge.decoder,me))}getTransactionFromHeightAndOffset(e,o){const s=new URL(`transaction/${e}/${o}`,this.baseURL);return this.fetcher(s.toString()).then(v(We.decoder,me))}async getBlockSummaries(e,o){const s=ue(o-e),n=q(s,i=>Promise.all([this.getBlockFromHeight(e+i),this.getLeafFromHeight(e+i)])),c=q(n,([i,d])=>Gs(i,d));return await T(c)}getBlockFromHeight(e){const o=new URL(`block/${e}`,this.baseURL);return this.fetcher(o.toString()).then(v(_e.decoder,me))}async*streamBlocksFromHeightRange(e,o){const s=ue(e),n=q(s,i=>this.getLeafFromHeight(e-i)),c=bo(n,i=>ye(Ps(i,q(ue(i.leaf.block_payload.transaction_nmt.length),d=>this.getTransactionFromHeightAndOffset(i.leaf.block_header.height,d)))));if(o===void 0){yield*c;return}yield*D(c,o)}async getTransactionSummaryRange(e,o,s){const n=this.streamBlocksFromHeightRange(e,50),c=_(n,o),i=D(c,s);return await T(i)}async getTransactionSummaryRangeForRollup(e,o,s,n){const c=this.streamBlocksFromHeightRange(o,50),i=Dr(c,f=>f.transaction.vm===e),d=_(i,s),m=D(d,n);return await T(m)}}class jr{constructor(e){t(this,"explorer");this.explorer=e}toJSON(){return $r.encode(this)}}class Os{convert(e){return p(e,"Explorer"),new jr(ar.decode(e.Explorer))}}class Ws{convert(e){return l(e,jr),{Explorer:ar.encode(e.explorer)}}}class Us extends h{constructor(){super(...arguments);t(this,"encoder",new Ws);t(this,"decoder",new Os)}}class zr{constructor(e){t(this,"error");this.error=e}toJSON(){return ar.encode(this)}}class Fs{convert(e){return p(e,"error"),new zr(O.decode(e.error))}}class Hs{convert(e){return l(e,zr),{Explorer:O.encode(e.error)}}}class Ns extends h{constructor(){super(...arguments);t(this,"encoder",new Hs);t(this,"decoder",new Fs)}}const ar=new Ns,$r=new Us;class Js{convert(e){return $r.decode(e).explorer.error}}const B=new Js;class Ms{constructor(e,o){t(this,"fetcher");t(this,"baseURL");this.fetcher=e,this.baseURL=o}async getBlockDetail(e){const o=new URL(`block/${e.target}`,this.baseURL);return this.fetcher(o.toString()).then(v(He.decoder,B))}async getBlockSummaries(e){const o=new URL(`blocks/${e.from}/${e.limit}`,this.baseURL);return this.fetcher(o.toString()).then(v(Me.decoder,B))}async getTransactionDetail(e){let o=null;if(e instanceof Q?o=new URL(`transaction/hash/${e.hash}`,this.baseURL):e instanceof M&&(o=new URL(`transaction/${e.height}/${e.offset}`,this.baseURL)),!o)throw new we;return this.fetcher(o.toString()).then(v(or.decoder,B))}async getTransactionSummaries(e){const{target:o,filter:s}=e;let n=o.convertURL(this.baseURL);return n=s.convertURL(n),this.fetcher(n.toString()).then(v(nr.decoder,B))}async getExplorerOverview(){const e=new URL("explorer-summary",this.baseURL);return this.fetcher(e.toString()).then(v(Ye.decoder,B))}async getSearchResult(e){const o=new URL(`search/${encodeURIComponent(e.query)}`,this.baseURL);return this.fetcher(o.toString()).then(v(ve.decoder,B))}}class Qs{constructor(e,o){t(this,"fetcher");t(this,"baseURL");t(this,"blockHeightURL");t(this,"blockHeightResponseValidator",v(a.decoder));this.fetcher=e,this.baseURL=o,this.blockHeightURL=new URL("block-height",this.baseURL)}blockHeight(){return this.fetcher(this.blockHeightURL).then(this.blockHeightResponseValidator)}}class js{constructor(e,o){t(this,"availability");t(this,"status");t(this,"explorer");this.availability=new Ls(e,new URL("availability/",o)),this.status=new Qs(e,new URL("status/",o)),this.explorer=new Ms(e,new URL("explorer/",o))}}const zs=Ao.createContext($s());function $s(){return typeof window<"u"&&"Worker"in window||typeof self<"u"&&"Worker"in self?new Rs:new As}const Ks=async(r,e)=>{try{return await fetch(r,e)}catch(o){throw new Zr(o)}},wr=({url:r,children:e})=>Xr.jsx(zs.Provider,{value:new js(Ks,r),children:e});try{wr.displayName="ProvideCappuccinoLiveService",wr.__docgenInfo={description:`ProvideCappuccinoLiveService is a component that provides a Cappuccino
HotShot Query Service API targeting the given URL.`,displayName:"ProvideCappuccinoLiveService",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"URL"}}}}}catch{}export{Ee as C,ge as a,zs as b,Ue as c,Ne as d,Nr as e,se as f,re as g,Ve as h,Br as i};
