var Xr=Object.defineProperty;var Zr=(r,e,o)=>e in r?Xr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[e]=o;var t=(r,e,o)=>Zr(r,typeof e!="symbol"?e+"":e,o);import{j as Cr}from"./jsx-runtime-BlAj40OV.js";import{F as eo}from"./FetchError-C1VXamgN.js";import{U as f,g as K,h as D,i as ro,j as $,t as B,k as P,l as A,n as yr,r as Ce,o as q,p as gr,m as T,q as W,s as oo,v as de,w as to,x as ir,y as pe,z as ue,A as so,B as co,C as he,F as no}from"./LoadingProvider-DpAvs9pm.js";import{n as a,b as Rr}from"./base64-pX9cPfQ1.js";import{r as L,s as O,t as vr,u as Z,v as Er,w as Sr,x as xr,j as ee,i as kr,y as br,z as Tr,W as ao,f as io,N as lr,A as lo,D as dr,E as ye,F as Ar,G as po,H as uo,I as ho,J as mo,K as wo,L as fo,M as _r,c as b,p as Co,q as yo,C as go,a as Dr,O as Ro,B as vo,b as Eo,P as So,R as xo}from"./CircularBuffer-DTeJHj1X.js";import{C as R,j as d,s as _,a as p,T as w,t as U,y as x,z as k,n as ko,I as bo,B as pr}from"./string-CcoL8872.js";import{I as N}from"./monetary_value-B2EGCn_o.js";import{t as m,T as g}from"./TaggedBase64-D45f0-Ll.js";import{h as Br}from"./array_buffer-DEYyeAm6.js";import{b as re}from"./boolean-G714bpgs.js";import{a as y}from"./generateFakeData-QgWdnlRT.js";import{N as To}from"./NotFoundError-C6Rvypd-.js";import"./functional-BRpe52oq.js";import{R as Ao}from"./index-Cs7sjTYM.js";class Ir{constructor(e){t(this,"query");this.query=e}toJSON(){return qr.encode(this)}}class _o{convert(e){return d(e,Ir),_.encode(e.query)}}class Do{convert(e){return new Ir(_.decode(e))}}class Bo extends R{constructor(){super(...arguments);t(this,"encoder",new _o);t(this,"decoder",new Do)}}const qr=new Bo;class ge{constructor(e,o){t(this,"blocks");t(this,"transactions");this.blocks=e,this.transactions=o}toJSON(){return Re.encode(this)}}class Io{convert(e){return p(e,"blocks","transactions"),new ge(L.decode(e.blocks),O.decode(e.transactions))}}class qo{convert(e){return d(e,ge),{blocks:L.encode(e.blocks),transactions:O.encode(e.transactions)}}}class Po extends R{constructor(){super(...arguments);t(this,"encoder",new qo);t(this,"decoder",new Io)}}const Re=new Po;class ve{constructor(e){t(this,"searchResults");this.searchResults=e}toJSON(){return Ee.encode(this)}}class Go{convert(e){return p(e,"search_results"),new ve(Re.decode(e.search_results))}}class Lo{convert(e){return d(e,ve),{search_results:Re.encode(e.searchResults)}}}class Oo extends R{constructor(){super(...arguments);t(this,"encoder",new Lo);t(this,"decoder",new Go)}}const Ee=new Oo;class Uo{async getLeafFromHeight(){throw new f}async getTransactionFromHeightAndOffset(){throw new f}async getBlockFromHeight(){throw new f}async getBlockSummaries(){throw new f}async getTransactionSummaryRange(){throw new f}async getTransactionSummaryRangeForRollup(){throw new f}}class Fo{async getBlockDetail(){throw new f}async getBlockSummaries(){throw new f}async getTransactionDetail(){throw new f}async getTransactionSummaries(){throw new f}async getExplorerOverview(){throw new f}async getSearchResult(){throw new f}}class Wo{async blockHeight(){throw new f}}class Ho{constructor(){t(this,"availability",new Uo);t(this,"status",new Wo);t(this,"explorer",new Fo)}}const F=a;class Se{constructor(e,o,s,n){t(this,"requestID");t(this,"api");t(this,"method");t(this,"param");this.requestID=e,this.api=o,this.method=s,this.param=n}toJSON(){return{requestID:this.requestID,api:this.api,method:this.method,param:this.param}}}class No{convert(e){return p(e,"requestID","api","method","param"),new Se(F.decode(e.requestID),_.decode(e.api),_.decode(e.method),e.param)}}class Jo{convert(e){return d(e,Se),{requestID:F.encode(e.requestID),api:_.encode(e.api),method:_.encode(e.method),param:e.param}}}class Qo extends w{constructor(){super(...arguments);t(this,"encoder",new Jo);t(this,"decoder",new No)}}const Mo=new Qo;class xe{constructor(e){t(this,"requestID");this.requestID=e}}class ke extends xe{constructor(o,s){super(o);t(this,"response");this.response=s}toJSON(){return Pr.encode(this)}}class jo{convert(e){return p(e,"requestID","response"),new ke(F.decode(e.requestID),e.response)}}class zo{convert(e){return d(e,ke),{requestID:F.encode(e.requestID),response:e.response}}}class $o extends w{constructor(){super(...arguments);t(this,"encoder",new zo);t(this,"decoder",new jo)}}const Pr=new $o;class be extends xe{constructor(o,s){super(o);t(this,"error");this.error=s}toJSON(){return Gr.encode(this)}}class Ko{convert(e){return p(e,"requestID","error"),new be(F.decode(e.requestID),U.decode(e.error))}}class Yo{convert(e){return d(e,be),{requestID:F.encode(e.requestID),error:U.encode(e.error)}}}class Vo extends w{constructor(){super(...arguments);t(this,"encoder",new Yo);t(this,"decoder",new Ko)}}const Gr=new Vo;class Xo{convert(e){if(x(e,"response",k))return Pr.decode(e);if(x(e,"error",k))return Gr.decode(e);throw new N}}class Zo{convert(e){return d(e,xe),e.toJSON()}}class et extends w{constructor(){super(...arguments);t(this,"encoder",new Zo);t(this,"decoder",new Xo)}}const ur=new et;class Te{constructor(e){t(this,"transaction_nmt");this.transaction_nmt=e}toJSON(){return J.encode(this)}}class rt{convert(e){return p(e,"transaction_nmt"),new Te(vr.decode(e.transaction_nmt))}}class ot{convert(e){return d(e,Te),{transaction_nmt:vr.encode(e.transaction_nmt)}}}class tt extends w{constructor(){super(...arguments);t(this,"encoder",new ot);t(this,"decoder",new rt)}}const J=new tt;class Ae{constructor(e,o,s,n,c){t(this,"header");t(this,"payload");t(this,"hash");t(this,"size");t(this,"numTransactions");this.header=e,this.payload=o,this.hash=s,this.size=n,this.numTransactions=c}toJSON(){return _e.encode(this)}}class st{convert(e){return p(e,"header","payload","hash","size","num_transactions"),new Ae(Z.decode(e.header),J.decode(e.payload),m.decode(e.hash),a.decode(e.size),a.decode(e.num_transactions))}}class ct{convert(e){return d(e,Ae),{header:Z.encode(e.header),payload:J.encode(e.payload),hash:m.encode(e.hash),size:a.encode(e.size),num_transactions:a.encode(e.numTransactions)}}}class nt extends R{constructor(){super(...arguments);t(this,"encoder",new ct);t(this,"decoder",new st)}}const _e=new nt;class Y{constructor(e){t(this,"leaf_commit");this.leaf_commit=e}toJSON(){return De.encode(this)}}class at{convert(e){return p(e,"leaf_commit"),new Y(m.decode(e.leaf_commit))}}class it{convert(e){return d(e,Y),{leaf_commit:m.encode(e.leaf_commit)}}}class lt extends w{constructor(){super(...arguments);t(this,"encoder",new it);t(this,"decoder",new at)}}const De=new lt;class V{constructor(e,o,s,n,c,i){t(this,"data");t(this,"vote_commitment");t(this,"view_number");t(this,"signatures");t(this,"is_genesis");t(this,"_pd");this.data=e,this.vote_commitment=o,this.view_number=s,this.signatures=n,this.is_genesis=c,this._pd=i}toJSON(){return Q.encode(this)}}class dt{convert(e){return p(e,"data","vote_commitment","view_number","signatures","is_genesis","_pd"),new V(De.decode(e.data),m.decode(e.vote_commitment),a.decode(e.view_number),Er.decode(e.signatures),re.decode(e.is_genesis),null)}}class pt{convert(e){return d(e,V),{data:De.encode(e.data),vote_commitment:m.encode(e.vote_commitment),view_number:a.encode(e.view_number),signatures:Er.encode(e.signatures),is_genesis:re.encode(e.is_genesis),_pd:null}}}class ut extends w{constructor(){super(...arguments);t(this,"encoder",new pt);t(this,"decoder",new dt)}}const Q=new ut;class Be{constructor(e,o,s,n,c,i,l,h){t(this,"view_number");t(this,"justify_qc");t(this,"parent_commitment");t(this,"block_header");t(this,"block_payload");t(this,"rejected");t(this,"timestamp");t(this,"proposer_id");this.view_number=e,this.justify_qc=o,this.parent_commitment=s,this.block_header=n,this.block_payload=c,this.rejected=i,this.timestamp=l,this.proposer_id=h}toJSON(){return Ie.encode(this)}}class ht{convert(e){return p(e,"view_number","justify_qc","parent_commitment","block_header","block_payload","rejected","timestamp","proposer_id"),new Be(a.decode(e.view_number),Q.decode(e.justify_qc),m.decode(e.parent_commitment),Z.decode(e.block_header),J.decode(e.block_payload),Rr.decode(e.rejected),a.decode(e.timestamp),Br.decode(e.proposer_id))}}class mt{convert(e){return d(e,Be),{view_number:a.encode(e.view_number),justify_qc:Q.encode(e.justify_qc),parent_commitment:m.encode(e.parent_commitment),block_header:Z.encode(e.block_header),block_payload:J.encode(e.block_payload),rejected:Rr.encode(e.rejected),timestamp:a.encode(e.timestamp),proposer_id:Br.encode(e.proposer_id)}}}class wt extends w{constructor(){super(...arguments);t(this,"encoder",new mt);t(this,"decoder",new ht)}}const Ie=new wt;class qe{constructor(e,o){t(this,"leaf");t(this,"qc");this.leaf=e,this.qc=o}toJSON(){return Pe.encode(this)}}class ft{convert(e){return p(e,"leaf","qc"),new qe(Ie.decode(e.leaf),Q.decode(e.qc))}}class Ct{convert(e){return d(e,qe),{leaf:Ie.encode(e.leaf),qc:Q.encode(e.qc)}}}class yt extends w{constructor(){super(...arguments);t(this,"encoder",new Ct);t(this,"decoder",new ft)}}const Pe=new yt;class Ge{constructor(e,o){t(this,"pos");t(this,"proof");this.pos=e,this.proof=o}toJSON(){return Le.encode(this)}}class gt{convert(e){return p(e,"pos","proof"),new Ge(m.decode(e.pos),Sr.decode(e.proof))}}class Rt{convert(e){return d(e,Ge),{pos:m.encode(e.pos),proof:Sr.encode(e.proof)}}}class vt extends w{constructor(){super(...arguments);t(this,"encoder",new Rt);t(this,"decoder",new gt)}}const Le=new vt;class Oe{constructor(e,o,s,n,c){t(this,"transaction");t(this,"block_hash");t(this,"proof");t(this,"height");t(this,"hash");this.transaction=e,this.block_hash=o,this.proof=s,this.height=n,this.hash=c}toJSON(){return Ue.encode(this)}}class Et{convert(e){return p(e,"transaction","block_hash","proof","height","hash"),new Oe(xr.decoder.convert(e.transaction),m.decode(e.block_hash),Le.decoder.convert(e.proof),a.decode(e.height),m.decode(e.hash))}}class St{convert(e){return d(e,Oe),{transaction:xr.encode(e.transaction),block_hash:m.encode(e.block_hash),proof:Le.encode(e.proof),height:a.encode(e.height),hash:m.encode(e.hash)}}}class xt extends w{constructor(){super(...arguments);t(this,"encoder",new St);t(this,"decoder",new Et)}}const Ue=new xt,G="latest";class Fe{constructor(e){t(this,"target");this.target=e}static latest(){return new Or}static height(e){return new Ur(e)}toJSON(){return Lr.encode(this)}}class kt{convert(e){return d(e,Fe),typeof e.target=="number"?a.encode(e.target):_.encode(e.target)}}class bt{convert(e){return e===G?new Or:new Ur(a.decode(e))}}class Tt extends R{constructor(){super(...arguments);t(this,"encoder",new kt);t(this,"decoder",new bt)}}const Lr=new Tt;class Or extends Fe{constructor(){super(G)}}class Ur extends Fe{constructor(e){super(e)}}class We{constructor(e){t(this,"blockDetail");this.blockDetail=e}toJSON(){return He.encode(this)}}class At{convert(e){return p(e,"block_detail"),new We(ee.decode(e.block_detail))}}class _t{convert(e){return d(e,We),{block_detail:ee.encode(e.blockDetail)}}}class Dt extends R{constructor(){super(...arguments);t(this,"encoder",new _t);t(this,"decoder",new At)}}const He=new Dt;class Ne{constructor(e){t(this,"limit");this.limit=e}static latest(e){return new Wr(e)}static from(e,o){return new Hr(e,o)}toJSON(){return Fr.encode(this)}}class Bt{convert(e){return d(e,Ne),ko(e.from)?{from:a.encode(e.from),limit:a.encode(e.limit)}:{from:_.encode(e.from),limit:a.encode(e.limit)}}}class It{convert(e){return p(e,"from","limit"),e.from===G?new Wr(a.decode(e.limit)):new Hr(a.decode(e.from),a.decode(e.limit))}}class qt extends R{constructor(){super(...arguments);t(this,"encoder",new Bt);t(this,"decoder",new It)}}const Fr=new qt;class Wr extends Ne{constructor(e){super(e)}get from(){return G}}class Hr extends Ne{constructor(o,s){super(s);t(this,"from");this.from=o}}class Je{constructor(e){t(this,"blockSummaries");this.blockSummaries=e}toJSON(){return Qe.encode(this)}}class Pt{convert(e){return p(e,"block_summaries"),new Je(L.decode(e.block_summaries))}}class Gt{convert(e){return d(e,Je),{block_summaries:L.encode(e.blockSummaries)}}}class Lt extends R{constructor(){super(...arguments);t(this,"encoder",new Gt);t(this,"decoder",new Pt)}}const Qe=new Lt;class Me{constructor(e,o,s){t(this,"rollups");t(this,"transactions");t(this,"blocks");this.rollups=e,this.transactions=o,this.blocks=s}toJSON(){return je.encode(this)}}class Ot{convert(e){return p(e,"rollups","transactions","blocks"),new Me(a.decode(e.rollups),a.decode(e.transactions),a.decode(e.blocks))}}class Ut{convert(e){return d(e,Me),{rollups:a.encode(e.rollups),transactions:a.encode(e.transactions),blocks:a.encode(e.blocks)}}}class Ft extends w{constructor(){super(...arguments);t(this,"encoder",new Ut);t(this,"decoder",new Ot)}}const je=new Ft;class ze{constructor(e,o,s,n,c){t(this,"latestBlock");t(this,"genesisOverview");t(this,"latestBlocks");t(this,"latestTransactions");t(this,"histograms");this.latestBlock=e,this.genesisOverview=o,this.latestBlocks=s,this.latestTransactions=n,this.histograms=c}toJSON(){return $e.encode(this)}}class Wt{convert(e){return p(e,"latest_block","genesis_overview","latest_blocks","latest_transactions","histograms"),new ze(ee.decode(e.latest_block),je.decode(e.genesis_overview),L.decode(e.latest_blocks),O.decode(e.latest_transactions),kr.decode(e.histograms))}}class Ht{convert(e){return d(e,ze),{latest_block:ee.encode(e.latestBlock),genesis_overview:je.encode(e.genesisOverview),latest_blocks:L.encode(e.latestBlocks),latest_transactions:O.encode(e.latestTransactions),histograms:kr.encode(e.histograms)}}}class Nt extends w{constructor(){super(...arguments);t(this,"encoder",new Ht);t(this,"decoder",new Wt)}}const $e=new Nt;class Ke{constructor(e){t(this,"explorerSummary");this.explorerSummary=e}toJSON(){return Ye.encode(this)}}class Jt{convert(e){return p(e,"explorer_summary"),new Ke($e.decode(e.explorer_summary))}}class Qt{convert(e){return d(e,Ke),{explorer_summary:$e.encode(e.explorerSummary)}}}class Mt extends w{constructor(){super(...arguments);t(this,"encoder",new Qt);t(this,"decoder",new Jt)}}const Ye=new Mt;class Ve{static heightAndOffset(e,o){return new M(e,o)}static hash(e){return new j(e)}toJSON(){return Nr.encode(this)}}class jt{convert(e){if(d(e,Ve),e instanceof M)return{height:a.encode(e.height),offset:a.encode(e.offset)};if(e instanceof j)return{hash:m.encode(e.hash)};throw new N}}class zt{convert(e){if(x(e,"height",k)&&x(e,"offset",k))return new M(a.decode(e.height),a.decode(e.offset));if(x(e,"hash",k))return new j(m.decode(e.hash));throw new N}}class $t extends w{constructor(){super(...arguments);t(this,"encoder",new jt);t(this,"decoder",new zt)}}const Nr=new $t;class M extends Ve{constructor(o,s){super();t(this,"height");t(this,"offset");this.height=o,this.offset=s}}class j extends Ve{constructor(o){super();t(this,"hash");this.hash=o}}class Xe{constructor(e,o,s,n,c,i,l,h,C){t(this,"hash");t(this,"height");t(this,"blockConfirmed");t(this,"offset");t(this,"numTransactions");t(this,"size");t(this,"time");t(this,"sequencingFees");t(this,"feeDetails");this.hash=e,this.height=o,this.blockConfirmed=s,this.offset=n,this.numTransactions=c,this.size=i,this.time=l,this.sequencingFees=h,this.feeDetails=C}toJSON(){return Ze.encode(this)}}class Kt{convert(e){return p(e,"hash","height","block_confirmed","offset","num_transactions","size","time","sequencing_fees","fee_details"),new Xe(m.decode(e.hash),a.decode(e.height),re.decode(e.block_confirmed),a.decode(e.offset),a.decode(e.num_transactions),a.decode(e.size),br.decode(e.time),[],[])}}class Yt{convert(e){return d(e,Xe),{hash:m.encode(e.hash),height:a.encode(e.height),block_confirmed:re.encode(e.blockConfirmed),offset:a.encode(e.offset),num_transactions:a.encode(e.numTransactions),size:a.encode(e.size),time:br.encode(e.time),sequencing_fees:[],fee_details:[]}}}class Vt extends w{constructor(){super(...arguments);t(this,"encoder",new Yt);t(this,"decoder",new Kt)}}const Ze=new Vt;class er{constructor(e,o){t(this,"details");t(this,"data");this.details=e,this.data=o}toJSON(){return rr.encode(this)}}class Xt{convert(e){return p(e,"details","data"),new er(Ze.decode(e.details),Tr.decode(e.data))}}class Zt{convert(e){return d(e,er),{details:Ze.encode(e.details),data:Tr.encode(e.data)}}}class es extends w{constructor(){super(...arguments);t(this,"encoder",new Zt);t(this,"decoder",new Xt)}}const rr=new es;class X{constructor(e){t(this,"transactionDetail");this.transactionDetail=e}toJSON(){return or.encode(this)}}class rs{convert(e){return p(e,"transaction_detail"),new X(rr.decode(e.transaction_detail))}}class os{convert(e){return d(e,X),{transaction_detail:rr.encode(e.transactionDetail)}}}class ts extends R{constructor(){super(...arguments);t(this,"encoder",new os);t(this,"decoder",new rs)}}const or=new ts;class oe{constructor(){}static block(e){return new te(e)}static namespace(e){return new se(e)}static none(){return new sr}toJSON(){return tr.encode(this)}}class ss{convert(e){return x(e,"block",k)?new te(a.decode(e.block)):x(e,"namespace",k)?new se(a.decode(e.namespace)):new sr}}class cs{convert(e){if(d(e,oe),e instanceof sr)return{};if(e instanceof te)return{block:a.encode(e.block)};if(e instanceof se)return{namespace:a.encode(e.namespace)};throw new N}}class ns extends R{constructor(){super(...arguments);t(this,"encoder",new cs);t(this,"decoder",new ss)}}const tr=new ns;class sr extends oe{constructor(){super()}convertURL(e){return e}}class te extends oe{constructor(o){super();t(this,"block");this.block=o}convertURL(o){return new URL(`${o.pathname}/block/${this.block}`,o)}}class se extends oe{constructor(o){super();t(this,"namespace");this.namespace=o}convertURL(o){return new URL(`${o.pathname}/namespace/${this.namespace}`,o)}}class ce{constructor(e){t(this,"limit");this.limit=e}static latest(e){return new ne(e)}static heightAndOffset(e,o,s){return new ae(e,o,s)}static hash(e,o){return new ie(e,o)}toJSON(){return cr.encode(this)}}class as{convert(e){return p(e,"limit"),x(e,"height",k)&&x(e,"offset",k)?new ae(a.decode(e.height),a.decode(e.offset),a.decode(e.limit)):x(e,"hash",k)?new ie(m.decode(e.hash),a.decode(e.limit)):new ne(a.decode(e.limit))}}class is{convert(e){if(d(e,ce),e instanceof ne)return{limit:a.encode(e.limit)};if(e instanceof ae)return{height:a.encode(e.height),offset:a.encode(e.offset),limit:a.encode(e.limit)};if(e instanceof ie)return{hash:m.encode(e.hash),limit:a.encode(e.limit)};throw new N}}class ls extends R{constructor(){super(...arguments);t(this,"encoder",new is);t(this,"decoder",new as)}}const cr=new ls;class ne extends ce{constructor(e){super(e)}convertURL(e){return new URL(`transactions/latest/${this.limit}`,e)}}class ae extends ce{constructor(o,s,n){super(n);t(this,"height");t(this,"offset");this.height=o,this.offset=s}convertURL(o){return new URL(`transactions/from/${this.height}/${this.offset}/${this.limit}`,o)}}class ie extends ce{constructor(o,s){super(s);t(this,"hash");this.hash=o}convertURL(o){return new URL(`transactions/hash/${this.hash}/${this.limit}`,o)}}class Jr{constructor(e,o){t(this,"target");t(this,"filter");this.target=e,this.filter=o}toJSON(){return Qr.encode(this)}}class ds{convert(e){return p(e,"filter","target"),new Jr(cr.decode(e.target),tr.decode(e.filter))}}class ps{convert(e){return d(e,Jr),{filter:tr.encode(e.filter),target:cr.encode(e.target)}}}class us extends R{constructor(){super(...arguments);t(this,"encoder",new ps);t(this,"decoder",new ds)}}const Qr=new us;class H{constructor(e){t(this,"transactionSummaries");this.transactionSummaries=e}toJSON(){return nr.encode(this)}}class hs{convert(e){return p(e,"transaction_summaries"),new H(O.decode(e.transaction_summaries))}}class ms{convert(e){return d(e,H),{transaction_summaries:O.encode(e.transactionSummaries)}}}class ws extends R{constructor(){super(...arguments);t(this,"encoder",new ms);t(this,"decoder",new hs)}}const nr=new ws;function fs(r){return new Worker(""+new URL("hotshot_query_service_web_worker_api.js-yGsvEQGB.js",import.meta.url).href,{name:r==null?void 0:r.name})}class Cs{constructor(e){t(this,"worker");t(this,"nextRequestID",0);t(this,"requestCompleters",new Map);this.worker=e,e.onmessageerror,e.addEventListener("message",this.handleMessage.bind(this)),e.addEventListener("messageerror",this.handleMessageError.bind(this)),e.addEventListener("error",this.handleError.bind(this))}async submitRequest(e,o,s,n){const[c,i]=this.nextRequest();try{return this.worker.postMessage(Mo.encode(new Se(c,o,s,n))),await i.promise.then(l=>{if(l instanceof be)throw new ao(l.error);if(l instanceof ke){const{response:h}=l;return e.decode(h)}throw new bo(typeof l,"WebWorkerResponse")})}finally{this.requestCompleters.delete(c)}}nextRequest(){const e=this.nextRequestID++,o=io();return this.requestCompleters.set(e,o),[e,o]}handleMessage(e){const o=ur.decode(e.data),s=this.requestCompleters.get(o.requestID);if(s===void 0)throw new lr(o.requestID);s.complete(o)}handleMessageError(e){const o=ur.decode(e.data),s=this.requestCompleters.get(o.requestID);if(s===void 0)throw new lr(o.requestID);s.completeError(o)}handleError(e){debugger;console.error("encountered error setting up Web worker",e)}}class ys{constructor(e){t(this,"helper");this.helper=e}async sendRequest(e,o,...s){return this.helper.submitRequest(e,"availability",o,s)}async getLeafFromHeight(e){return await this.sendRequest(Pe,"getLeafFromHeight",e)}async getTransactionFromHeightAndOffset(e,o){return await this.sendRequest(Ue,"getTransactionFromHeightAndOffset",e,o)}async getBlockSummaries(e,o){return await this.sendRequest(lo,"getBlockSummaries",e,o)}async getBlockFromHeight(e){return await this.sendRequest(_e,"getBlockFromHeight",e)}async getTransactionSummaryRange(e,o,s){return await this.sendRequest(dr,"getTransactionSummaryRange",e,o,s)}async getTransactionSummaryRangeForRollup(e,o,s,n){return await this.sendRequest(dr,"getTransactionSummaryRangeForRollup",e,o,s,n)}}class gs{constructor(e){t(this,"helper");this.helper=e}async sendRequest(e,o,...s){return this.helper.submitRequest(e,"status",o,s)}async blockHeight(){return await this.sendRequest(a,"blockHeight")}}class Rs{constructor(e){t(this,"helper");this.helper=e}async sendRequest(e,o,...s){return this.helper.submitRequest(e,"explorer",o,s)}async getBlockDetail(e){return await this.sendRequest(He,"getBlockDetail",Lr.encode(e))}async getBlockSummaries(e){return await this.sendRequest(Qe,"getBlockSummaries",Fr.encode(e))}async getTransactionDetail(e){return await this.sendRequest(or,"getTransactionDetail",Nr.encode(e))}async getTransactionSummaries(e){return await this.sendRequest(nr,"getTransactionSummaries",Qr.encode(e))}async getExplorerOverview(){return await this.sendRequest(Ye,"getExplorerOverview",null)}async getSearchResult(e){return await this.sendRequest(Ee,"getSearchResult",qr.encode(e))}}class vs{constructor(){t(this,"availability");t(this,"status");t(this,"explorer");const e=new fs,o=new Cs(e);this.availability=new ys(o),this.status=new gs(o),this.explorer=new Rs(o)}}function le(r){return new uo(r.height,r.time.valueOf()/1e3,0,new ho(0,"00","00"),[],new mo(new ArrayBuffer(0)),new g("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new g("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new wo(new ArrayBuffer(0),new ArrayBuffer(0),0),new fo(new ArrayBuffer(0),new ArrayBuffer(0)))}async function Es(r){return new Ae(le(r),new Te(await A(T(r.transactions,async e=>new ye(e.tree.namespace,Array.from(new Uint8Array(e.tree.data)))))),new g("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions)}function Ss(r){return new Ar(le(r),new g("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions,r.proposer)}function xs(r){const e=r.transactions,o=le(r);return T(e,async s=>new _r(s.hash,o,s.index,new ye(s.tree.namespace,Array.from(new Uint8Array(s.tree.data)))))}async function*ks(r){const e=le(r),o=r.transactions;yield*T(o,async s=>new Oe(new ye(s.tree.namespace,Array.from(new Uint8Array(s.tree.data))),new g("BLOCK",new Uint8Array([0,0,0,0]).buffer),new Ge(new g("POS",new Uint8Array([0,0,0,0]).buffer),[new po(new g("EMPTY",new Uint8Array([0,0,0,0]).buffer),[])]),e.height,new g("COMMIT",s.tree.data.slice(0,32))))}class bs{async getLeafFromHeight(e){const o=await this.getBlockFromHeight(e);return new qe(new Be(e,new V(new Y(new g("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new g("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null),new g("LEAF",new Uint8Array([0,0,0,0]).buffer),o.header,o.payload,[],o.header.timestamp,o.header.fee_info.account),new V(new Y(new g("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new g("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null))}async getTransactionFromHeightAndOffset(e,o){const s=await K(D(y(),e)),n=ks(s);return await ro($(n,o))}async getBlockSummaries(e,o){const s=D(y(),e),n=B(s,o-e),c=P(n,async i=>Ss(i));return await A(c)}async getBlockFromHeight(e){const o=D(y(),e),s=await K(o);return Es(s)}async*streamTransactionSummaries(e){const o=yr(y(),c=>c.height<=e),s=Ce(o);yield*q(s,c=>W(xs(c)))}async getTransactionSummaryRange(e,o,s){const n=this.streamTransactionSummaries(e),c=D(n,o),i=B(c,s);return await A(i)}async getTransactionSummaryRangeForRollup(e,o,s,n){const c=this.streamTransactionSummaries(o),i=gr(c,C=>C.transaction.vm===e),l=D(i,s),h=B(l,n);return await A(h)}}function hr(r){return new yo(r.hash,r.height,r.time,r.numTransactions,r.proposer,r.proposer,r.size,r.fees)}function me(r){return new go(r.hash,r.height,r.proposer,r.numTransactions,r.size,r.time)}function mr(r,e){return new er(new Xe(e.hash,e.block,!0,e.index,r.numTransactions,e.size,e.time,[],[]),[new Ro(e.tree.namespace,e.tree.data)])}function z(r,e){return new Dr(e.hash,[e.tree.namespace],e.block,e.time,e.index,r.numTransactions)}class Ts{async getBlockDetail(e){const o=e.target,s=await(o===G?oo(y()):K($(y(),o)));return new We(hr(s))}async getBlockSummaries(e){const o=yr(y(),l=>e.from===G||l.height<=e.from),s=Ce(o),n=B(s,e.limit),c=P(n,async l=>me(l)),i=await A(c);return new Je(i)}async getTransactionDetail(e){const o=y();if(e instanceof M){const s=de(o,l=>l.height<=e.height),n=q(s,l=>T(l.transactions,async h=>mr(l,h))),c=$(W(n),e.offset),i=await K(c);return new X(i)}if(e instanceof j){const s=q(o,c=>T(c.transactions,async i=>mr(c,i))),n=await to(s,c=>c.details.hash===e.hash);if(!n)throw new To(e.hash);return new X(n)}throw new f}applyFilter(e,o){return o instanceof te?ir(e,s=>s.height==o.block):o instanceof se?ir(e,s=>s.rollups.indexOf(o.namespace)>=0):e}async getTransactionSummaries(e){const o=y(),{target:s,filter:n}=e;if(s instanceof ne){const i=q(o,E=>T(E.transactions,async u=>z(E,u))),l=W(i),h=this.applyFilter(l,n),C=await pe(ue(h,s.limit));return new H(C)}if(s instanceof ae){const c=de(o,u=>u.height<=s.height),i=q(c,u=>T(u.transactions,async v=>z(u,v))),l=W(i),h=$(l,s.offset),C=this.applyFilter(h,n),E=await pe(ue(C,s.limit));return new H(E)}if(s instanceof ie){const c=y(),i=q(c,u=>T(u.transactions,async v=>new Dr(v.hash,[v.tree.namespace],v.block,v.time,v.index,u.numTransactions))),l=de(i,u=>u.hash!==s.hash),h=W(l),C=this.applyFilter(h,n),E=await pe(ue(C,s.limit));return new H(E)}throw new f}async getExplorerOverview(){let e;const o=b(11),s=b(51),n=b(51),c=b(51),i=b(51),l=b(11);let h=0,C=0;const E=new Map;for await(const u of y()){e=hr(u),o.put(me(u)),s.put(u.size),n.put(Math.round(u.genTime/1e3)),c.put(u.numTransactions),i.put(u.height),h++,C+=u.numTransactions;for await(const v of u.transactions){l.put(z(u,v));const Vr=E.get(v.tree.namespace)||0;E.set(v.tree.namespace,Vr+1)}}return new Ke(new ze(e,new Me(Array.from(E.keys()).length,C,h),Array.from(o),Array.from(l),new Co(Array.from(n),Array.from(s),Array.from(c),Array.from(i))))}async getSearchResult(e){const o=b(101),s=b(10),n=b(10);for await(const c of y())o.put(c);for(const c of o){c.hash.toString().startsWith(e.query)&&s.put(me(c));for await(const i of c.transactions)i.hash.toString().startsWith(e.query)&&n.put(z(c,i))}return new ve(new ge(Array.from(s),Array.from(n)))}}class As{async blockHeight(){return(await so(y())).height}}class _s{constructor(){t(this,"availability",new bs);t(this,"status",new As);t(this,"explorer",new Ts)}}function S(r,e){return async o=>(await Ds(o,e),fe(o),r.convert(await o.json()))}async function Ds(r,e){if(!r.ok){if(r.status>=500&&r.status<600){try{if(fe(r),e!==void 0){const o=await r.json();throw e.convert(o)}}catch(o){if(o instanceof pr)throw o;console.error("encountered an error attempting to decode a server error from the server",o)}throw new vo(r.status,r)}if(r.status>=400&&r.status<500){try{if(fe(r),e!==void 0){const o=await r.json();throw e.convert(o)}}catch(o){if(o instanceof pr)throw o;console.error("encountered an error attempting to decode a client error from the server",o)}throw new Eo(r.status,r)}throw new So(r.status,r)}}function fe(r){const e=r.headers.get("content-type");if(!e||!e.startsWith("application/json"))throw xo.fromResponse(r,e||"undefined")}class Mr{constructor(e){t(this,"availability");this.availability=e}toJSON(){return jr.encode(this)}}class Bs{convert(e){return p(e,"Availability"),new Mr(U.decode(e.Availability))}}class Is{convert(e){return d(e,Mr),{Availability:U.encode(e.availability)}}}class qs extends w{constructor(){super(...arguments);t(this,"encoder",new Is);t(this,"decoder",new Bs)}}const jr=new qs;class Ps{convert(e){return jr.decode(e).availability}}const we=new Ps;async function Gs(r,e){return new Ar(r.header,r.hash,r.size,r.payload.transaction_nmt.length,[e.leaf.proposer_id])}async function*Ls(r,e){const o=e[Symbol.asyncIterator]();yield*T(co(r.leaf.block_payload.transaction_nmt),async s=>{const n=r.leaf.block_payload.transaction_nmt.indexOf(s),c=await o.next();if(c.done)throw new Error("Not enough transactions");return new _r(c.value.hash,r.leaf.block_header,n,s)})}class Os{constructor(e,o){t(this,"fetcher");t(this,"baseURL");this.fetcher=e,this.baseURL=o}getLeafFromHeight(e){const o=new URL(`leaf/${e}`,this.baseURL);return this.fetcher(o).then(S(Pe.decoder,we))}getTransactionFromHeightAndOffset(e,o){const s=new URL(`transaction/${e}/${o}`,this.baseURL);return this.fetcher(s).then(S(Ue.decoder,we))}async getBlockSummaries(e,o){const s=he(o-e),n=P(s,i=>Promise.all([this.getBlockFromHeight(e+i),this.getLeafFromHeight(e+i)])),c=P(n,([i,l])=>Gs(i,l));return await A(c)}getBlockFromHeight(e){const o=new URL(`block/${e}`,this.baseURL);return this.fetcher(o).then(S(_e.decoder,we))}async*streamBlocksFromHeightRange(e,o){const s=he(e),n=P(s,i=>this.getLeafFromHeight(e-i)),c=no(n,i=>Ce(Ls(i,P(he(i.leaf.block_payload.transaction_nmt.length),l=>this.getTransactionFromHeightAndOffset(i.leaf.block_header.height,l)))));if(o===void 0){yield*c;return}yield*B(c,o)}async getTransactionSummaryRange(e,o,s){const n=this.streamBlocksFromHeightRange(e,50),c=D(n,o),i=B(c,s);return await A(i)}async getTransactionSummaryRangeForRollup(e,o,s,n){const c=this.streamBlocksFromHeightRange(o,50),i=gr(c,C=>C.transaction.vm===e),l=D(i,s),h=B(l,n);return await A(h)}}class zr{constructor(e){t(this,"explorer");this.explorer=e}toJSON(){return Kr.encode(this)}}class Us{convert(e){return p(e,"Explorer"),new zr(ar.decode(e.Explorer))}}class Fs{convert(e){return d(e,zr),{Explorer:ar.encode(e.explorer)}}}class Ws extends w{constructor(){super(...arguments);t(this,"encoder",new Fs);t(this,"decoder",new Us)}}class $r{constructor(e){t(this,"error");this.error=e}toJSON(){return ar.encode(this)}}class Hs{convert(e){return p(e,"error"),new $r(U.decode(e.error))}}class Ns{convert(e){return d(e,$r),{Explorer:U.encode(e.error)}}}class Js extends w{constructor(){super(...arguments);t(this,"encoder",new Ns);t(this,"decoder",new Hs)}}const ar=new Js,Kr=new Ws;class Qs{convert(e){return Kr.decode(e).explorer.error}}const I=new Qs;class Ms{constructor(e,o){t(this,"fetcher");t(this,"baseURL");this.fetcher=e,this.baseURL=o}async getBlockDetail(e){const o=new URL(`block/${e.target}`,this.baseURL);return this.fetcher(o).then(S(He.decoder,I))}async getBlockSummaries(e){const o=new URL(`blocks/${e.from}/${e.limit}`,this.baseURL);return this.fetcher(o).then(S(Qe.decoder,I))}async getTransactionDetail(e){let o=null;if(e instanceof j?o=new URL(`transaction/hash/${e.hash}`,this.baseURL):e instanceof M&&(o=new URL(`transaction/${e.height}/${e.offset}`,this.baseURL)),!o)throw new f;return this.fetcher(o).then(S(or.decoder,I))}async getTransactionSummaries(e){const{target:o,filter:s}=e;let n=o.convertURL(this.baseURL);return n=s.convertURL(n),this.fetcher(n).then(S(nr.decoder,I))}async getExplorerOverview(){const e=new URL("explorer-summary",this.baseURL);return this.fetcher(e).then(S(Ye.decoder,I))}async getSearchResult(e){const o=new URL(`search/${encodeURIComponent(e.query)}`,this.baseURL);return this.fetcher(o).then(S(Ee.decoder,I))}}class js{constructor(e,o){t(this,"fetcher");t(this,"baseURL");t(this,"blockHeightURL");t(this,"blockHeightResponseValidator",S(a.decoder));this.fetcher=e,this.baseURL=o,this.blockHeightURL=new URL("block-height",this.baseURL)}blockHeight(){return this.fetcher(this.blockHeightURL).then(this.blockHeightResponseValidator)}}class zs{constructor(e,o){t(this,"availability");t(this,"status");t(this,"explorer");this.availability=new Os(e,new URL("availability/",o)),this.status=new js(e,new URL("status/",o)),this.explorer=new Ms(e,new URL("explorer/",o))}}const Yr=Ao.createContext(new Ho);function $s(){return typeof window<"u"&&"Worker"in window||typeof self<"u"&&"Worker"in self?new vs:new _s}const wr=r=>Cr.jsx(Yr.Provider,{value:$s(),children:r.children}),Ks=async(r,e)=>{try{return await fetch(r,e)}catch(o){throw new eo(o)}},fr=({url:r,children:e})=>Cr.jsx(Yr.Provider,{value:new zs(Ks,r),children:e});try{wr.displayName="ProvideCappuccinoHotShotQueryServiceAPIContext",wr.__docgenInfo={description:"",displayName:"ProvideCappuccinoHotShotQueryServiceAPIContext",props:{}}}catch{}try{fr.displayName="ProvideCappuccinoLiveService",fr.__docgenInfo={description:`ProvideCappuccinoLiveService is a component that provides a Cappuccino
HotShot Query Service API targeting the given URL.`,displayName:"ProvideCappuccinoLiveService",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"URL"}}}}}catch{}export{ve as C,wr as P,ge as a,Yr as b,Fe as c,Ne as d,Jr as e,ce as f,oe as g,Ve as h,Ir as i};
