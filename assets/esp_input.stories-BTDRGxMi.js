import{R as y,j as i}from"./iframe-DNoZVhxP.js";import"./ByteSizeText-D-qCWW9q.js";import"./VariableByteSizeText-Bu2magsE.js";import"./CopyHex-BbfWj7vM.js";import"./DateTimeText-DBJv16gh.js";import"./FullHexText-DFYP_GOS.js";import"./HexText-C3u-GxsN.js";import{M}from"./MoneyText-DG28kpRk.js";import"./NumberText-iNHv8NBq.js";import"./PercentageText-Ch5wz0LI.js";import"./RelativeTimeSinceDateText-BJ-m_iov.js";import"./TaggedBase64Text-C4AL13WE.js";import"./Text-BU7JBOLk.js";import"./TimeText-B8FKHbQv.js";import{M as g,E as d}from"./monetary_value-B0ntaWrJ.js";import{I as P}from"./Container-D4Jm2E14.js";import"./LoadingProvider-jMPSrBN8.js";import"./DateTimeFormattersProvider-f03wtLTp.js";import"./LocaleProvider-BH2CEei5.js";import"./PagePathProvider-BjlOfnGv.js";import"./NowProvider-DJ1Fnn1P.js";import{C as v}from"./NumberFormattersProvider--vwjDh8x.js";import"./PathResolverProvider-BhgJJ4ag.js";import{U as D}from"./UnimplementedError-CdIPpzwU.js";import{T as x,a as C,b as w}from"./text-Bv9grK4k.js";import"./preload-helper-PPVm8Dsz.js";import"./base64-KHURY7_E.js";import"./assert-BI051aL8.js";import"./string-IJEBdhwx.js";import"./CopyButton-B2E6h82I.js";import"./higher_order-Ch0r7QLd.js";import"./CheckCircleFilled-DpH3Q2_x.js";import"./SVGIconBase-B0yIC6Vs.js";import"./Copy-BdkYT5q1.js";/* empty css               */import"./array_buffer-D67g0v0K.js";import"./functional-g5wG3Azh.js";import"./MissingElementError-CbV3pOXz.js";function _(t){return t.type==="change"}function I(t,e){e=e.replace(/^[^\d]+/g,""),e=e.replace(/[^\d]+$/g,"");const a=t.formatToParts(.5).find(p=>p.type==="decimal")?.value??".",o=e.split(a),r=BigInt(o[0].replace(/\D/g,""))*d.significantDigitsMultiplier;if(o.length<2)return g.ESP(r);const s=o[1].replace(/\D/g,"").slice(0,d.significantDigits),c=10n**BigInt(s.length);if(c>d.significantDigitsMultiplier)throw new D("we somehow have more significant digits than the currency supports");const n=BigInt(s)*(d.significantDigitsMultiplier/c);return g.ESP(r+n)}function T(t){return t.value%t.currency.significantDigitsMultiplier===0n?t.value/t.currency.significantDigitsMultiplier:Number(t.value)/Number(t.currency.significantDigitsMultiplier)}const h=t=>{const e=y.useContext(v).ESP,{value:l,onChange:a,...o}=t,r=l??g.ESP(0n),s=T(r),c=new x(e.format(s)),[n,p]=y.useState({rawValue:c,transformed:c,money:r});return n.money.value!==r.value&&p({rawValue:new x(e.format(s)),transformed:new x(e.format(s)),money:r}),i.jsx(C,{...o,value:n.rawValue,onKeyDown:()=>{},onChange:(m,u)=>{if(_(m)){const S=I(e,u.text),V={rawValue:u,transformed:u.copyWith({text:e.format(S.value/S.currency.significantDigitsMultiplier)}),money:S};p(V),a&&a(m,V.money);return}p({...n,rawValue:u,transformed:u})},onBlur:()=>{const m=n.transformed.copyWith({selection:w.collapsed(-1)});p({...n,rawValue:m,transformed:m,money:I(e,m.text)})}})};try{h.displayName="ESPInput",h.__docgenInfo={description:"",displayName:"ESPInput",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"MonetaryValue | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((event: ChangeEvent<HTMLInputElement> | SyntheticEvent<HTMLInputElement, Event>, value: MonetaryValue) => void)"}}}}}catch{}const j=t=>{const{initialValue:e=null}=t,[l,a]=y.useState(e);return i.jsxs(i.Fragment,{children:[i.jsx(P,{children:i.jsx(h,{id:"stake-amount",value:l,onChange:(o,r)=>{a(r)}})}),i.jsx("br",{}),i.jsx(M,{money:l??g.ESP(0n)})]})},Et={title:"Components/HID/Inputs/ESPInput",component:j},f={args:{}},E={args:{initialValue:g.ESP(100000000000000000000000n)}};f.parameters={...f.parameters,docs:{...f.parameters?.docs,source:{originalSource:`{
  args: {}
}`,...f.parameters?.docs?.source}}};E.parameters={...E.parameters,docs:{...E.parameters?.docs,source:{originalSource:`{
  args: {
    initialValue: MonetaryValue.ESP(100000000000000000000000n)
  }
}`,...E.parameters?.docs?.source}}};const St=["ESPInput","EdgeCase"];export{f as ESPInput,E as EdgeCase,St as __namedExportsOrder,Et as default};
