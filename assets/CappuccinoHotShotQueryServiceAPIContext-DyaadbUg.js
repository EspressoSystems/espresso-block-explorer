import{R as Oo,j as Qt}from"./iframe-6sDIVuv1.js";import{B as jt}from"./explorer-CalQ4DGV.js";import{U as f}from"./UnimplementedError-DRDLdWuq.js";import{h as I,u as No,b as G,s as qo}from"./array_buffer-DuWTC5ee.js";import{b as Fo,a as ko}from"./url-DwwBj-2c.js";import{b as d,c as Ut,a as v}from"./assert-BI051aL8.js";import{T as i,b as a,N as xe,s as h,g as ke,h as Ie,A,j as D,k as P,C as g,t as Vt,I as M,f as cr,v as $t,w as x,x as k,d as Re,B as O,r as R,c as _,a as _e,u as Wo,n as Be,e as Kt}from"./string-Bj9RBsFG.js";import{M as Yt}from"./MissingElementError-Dm9GiuiL.js";import{n as s,d as N,e as W}from"./base64-Dx8wLaZf.js";import{I as z,m as Go}from"./monetary_value-q68MMcLV.js";import{t as l,T as S}from"./TaggedBase64-CL6rcPDn.js";import{m as Xt}from"./functional-D84nw2eW.js";import{g as E}from"./blocks-DqaRurhN.js";import{g as ge,h as Z,i as Zt,j as fe,t as Ce,k as zo,l as re,o as Ho,r as Mo,p as j,q as es,m as F,s as ee,v as rs,w as Qe,x as os,y as Io,z as je,A as Ue,B as ts}from"./LoadingProvider-CrTsTokN.js";import"./FetchError-ljfnF1aF.js";import{N as ss}from"./NotFoundError-B7azoDNK.js";import{P as Lo,g as cs}from"./nodes-sPTSRSIJ.js";class nr{r;s;v;constructor(e,o,t){this.r=e,this.s=o,this.v=t}toJSON(){return ar.encode(this)}}class ns{convert(e){return a(e,"r","s","v"),new nr(I.decode(e.r),I.decode(e.s),s.decode(e.v))}}class as{convert(e){return d(e,nr),{r:I.encode(e.r),s:I.encode(e.s),v:s.encode(e.v)}}}class ds extends i{encoder=new as;decoder=new ns}const ar=new ds;class dr{account;amount;constructor(e,o){this.account=e,this.amount=o}toJSON(){return ir.encode(this)}}class is{convert(e){return a(e,"account","amount"),new dr(I.decode(e.account),I.decode(e.amount))}}class ls{convert(e){return d(e,dr),{account:I.encode(e.account),amount:I.encode(e.amount)}}}class us extends i{encoder=new ls;decoder=new is}const ir=new us;class lr{number;timestamp;hash;constructor(e,o,t){this.number=e,this.timestamp=o,this.hash=t}toJSON(){return Ke.encode(this)}}class hs{convert(e){return a(e,"number","timestamp","hash"),new lr(s.decode(e.number),h.decode(e.timestamp),h.decode(e.hash))}}class ps{convert(e){return d(e,lr),{number:s.encode(e.number),timestamp:h.encode(e.timestamp),hash:h.encode(e.hash)}}}class ms extends i{encoder=new ps;decoder=new hs}const Ke=new ms,Jo=new xe(new ke(Ke),new Ie(Ke));class ur{bytes;constructor(e){this.bytes=e}toJSON(){return hr.encode(this)}}class ws{convert(e){return a(e,"bytes"),new ur(No.decode(e.bytes))}}class fs{convert(e){return d(e,ur),{bytes:No.encode(e.bytes)}}}class Cs extends i{encoder=new fs;decoder=new ws}const hr=new Cs;class pr{height;timestamp;l1_head;l1_finalized;payload_commitment;ns_table;block_merkle_root;fee_merkle_root;builder_signature;fee_info;constructor(e,o,t,n,c,u,p,w,C,b){this.height=e,this.timestamp=o,this.l1_head=t,this.l1_finalized=n,this.payload_commitment=c,this.ns_table=u,this.block_merkle_root=p,this.fee_merkle_root=w,this.builder_signature=C,this.fee_info=b}toJSON(){return q.encode(this)}}class gs{convert(e){return a(e,"height","timestamp","l1_head","l1_finalized","payload_commitment","ns_table","block_merkle_root","fee_merkle_root","builder_signature","fee_info"),new pr(s.decode(e.height),s.decode(e.timestamp),s.decode(e.l1_head),Jo.decode(e.l1_finalized),N.decode(e.payload_commitment),hr.decode(e.ns_table),l.decode(e.block_merkle_root),l.decode(e.fee_merkle_root),ar.decode(e.builder_signature),ir.decode(e.fee_info))}}class bs{convert(e){return d(e,pr),{height:s.encode(e.height),timestamp:s.encode(e.timestamp),l1_head:s.encode(e.l1_head),l1_finalized:Jo.encode(e.l1_finalized),payload_commitment:N.encode(e.payload_commitment),ns_table:hr.encode(e.ns_table),block_merkle_root:l.encode(e.block_merkle_root),fee_merkle_root:l.encode(e.fee_merkle_root),builder_signature:ar.encode(e.builder_signature),fee_info:ir.encode(e.fee_info)}}}class ys extends i{encoder=new bs;decoder=new gs}const q=new ys;class ne{vm;payload;constructor(e,o){this.vm=e,this.payload=o}toJSON(){return L.encode(this)}}class vs{convert(e){return a(e,"vm","payload"),new ne(s.decode(e.vm),N.decode(e.payload))}}class Es{convert(e){return d(e,ne),{vm:s.encode(e.vm),payload:N.encode(e.payload)}}}class Ss extends i{encoder=new Es;decoder=new vs}const L=new Ss,Qo=new A(new D(L),new P(L));class mr{transaction_nmt;constructor(e){this.transaction_nmt=e}toJSON(){return ae.encode(this)}}class xs{convert(e){return a(e,"transaction_nmt"),new mr(Qo.decode(e.transaction_nmt))}}class ks{convert(e){return d(e,mr),{transaction_nmt:Qo.encode(e.transaction_nmt)}}}class Is extends i{encoder=new ks;decoder=new xs}const ae=new Is;class wr{header;payload;hash;size;numTransactions;constructor(e,o,t,n,c){this.header=e,this.payload=o,this.hash=t,this.size=n,this.numTransactions=c}toJSON(){return jo.encode(this)}}class Rs{convert(e){return a(e,"header","payload","hash","size","num_transactions"),new wr(q.decode(e.header),ae.decode(e.payload),l.decode(e.hash),s.decode(e.size),s.decode(e.num_transactions))}}class _s{convert(e){return d(e,wr),{header:q.encode(e.header),payload:ae.encode(e.payload),hash:l.encode(e.hash),size:s.encode(e.size),num_transactions:s.encode(e.numTransactions)}}}class Bs extends g{encoder=new _s;decoder=new Rs}const jo=new Bs;class fr{header;hash;size;num_transactions;proposer_id;constructor(e,o,t,n,c){this.header=e,this.hash=o,this.size=t,this.num_transactions=n,this.proposer_id=c}toJSON(){return Ye.encode(this)}}class Ts{convert(e){return a(e,"header","hash","size","num_transactions","proposer_id"),new fr(q.decode(e.header),l.decode(e.hash),s.decode(e.size),s.decode(e.num_transactions),G.decode(e.proposer_id))}}class As{convert(e){return d(e,fr),{header:q.encode(e.header),hash:l.encode(e.hash),size:s.encode(e.size),num_transactions:s.encode(e.num_transactions),proposer_id:G.encode(e.proposer_id)}}}class Ds extends i{encoder=new As;decoder=new Ts}const Ye=new Ds,Ps=new A(new D(Ye),new P(Ye));class Cr{hash;header;offset;transaction;constructor(e,o,t,n){this.hash=e,this.header=o,this.offset=t,this.transaction=n}toJSON(){return Xe.encode(this)}}class Os{convert(e){return a(e,"hash","header","offset","transaction"),new Cr(l.decode(e.hash),q.decode(e.header),s.decode(e.offset),L.decode(e.transaction))}}class Ns{convert(e){return d(e,Cr),{hash:l.encode(e.hash),header:q.encode(e.header),offset:s.encode(e.offset),transaction:L.encode(e.transaction)}}}class qs extends i{encoder=new Ns;decoder=new Os}const Xe=new qs,Ro=new A(new D(Xe),new P(Xe));class Fs{convert(e){if(!Vt(e))throw new M(typeof e,"boolean");return e}}class Ws{convert(e){return Ut(e,"boolean"),e}}class Gs extends i{encoder=new Ws;decoder=new Fs}const de=new Gs;class be{leaf_commit;constructor(e){this.leaf_commit=e}toJSON(){return gr.encode(this)}}class zs{convert(e){return a(e,"leaf_commit"),new be(l.decode(e.leaf_commit))}}class Hs{convert(e){return d(e,be),{leaf_commit:l.encode(e.leaf_commit)}}}class Ms extends i{encoder=new Hs;decoder=new zs}const gr=new Ms;class Ls{convert(e){if(!cr(e))throw new M(typeof e,"string");const o=new Date(e);if(Number.isNaN(o.valueOf()))throw new M("NaN","number");return o}}class Js{convert(e){return d(e,Date),e.toISOString()}}class Qs extends i{encoder=new Js;decoder=new Ls}const H=new Qs;class Uo{width;index;constructor(e,o){this.width=e,this.index=o}toJSON(){return br.encode(this)}}class js{convert(e){return a(e,"width","index"),new Uo(s.decode(e.width),s.decode(e.index))}}class Us{convert(e){return d(e,Uo),{width:s.encode(e.width),index:s.encode(e.index)}}}class Vs extends i{encoder=new Us;decoder=new js}const br=new Vs;class te{static get lsb0(){return Ks}static get msb0(){return Xs}valueOf(){return this.toString()}toJSON(){return this.toString()}}const Vo="bitvec::order::Lsb0",$o="bitvec::order::Msb0";class $s extends te{toString(){return Vo}}const Ks=new $s;class Ys extends te{toString(){return $o}}const Xs=new Ys;class Zs{convert(e){if(typeof e!="string")throw new M(typeof e,"string");switch(e){case Vo:return te.lsb0;case $o:return te.msb0;default:throw new M(e,"CappuccinoAPIBitVecOrder")}}}class ec{convert(e){return e.toString()}}class rc extends i{encoder=new ec;decoder=new Zs}const Ko=new rc;class Yo{order;head;bits;data;constructor(e,o,t,n){this.order=e,this.head=o,this.bits=t,this.data=n}getBitVecIndexIterable(){return this.order===te.lsb0?new ac(this.head.width,this.bits):new ic(this.head.width,this.bits)}[Symbol.iterator](){const e=this.getBitVecIndexIterable();return Xt(e,o=>cc(this.data,o))[Symbol.iterator]()}toJSON(){return se.encode(this)}}class oc{convert(e){return a(e,"order","head","bits","data"),new Yo(Ko.decode(e.order),br.decode(e.head),s.decode(e.bits),N.decode(e.data))}}class tc{convert(e){return d(e,Yo),{order:Ko.encode(e.order),head:br.encode(e.head),bits:s.encode(e.bits),data:N.encode(e.data)}}}class sc extends i{encoder=new tc;decoder=new oc}const se=new sc,Pi=new A(new D(se),new P(se));function cc(r,e){return(r[e.bucket]>>e.bitOffset&1)===1}class Xo{bucket;bitOffset;constructor(e,o){this.bucket=e,this.bitOffset=o}}function Zo(r){switch(v(r===8||r===16||r===32,"bit width should be a power of two that is supported"),r){case 8:return 3;case 16:return 4;case 32:return 5;default:throw new f}}class nc{totalBits;bitWidthMask;bitWidthShift;offset=0;constructor(e,o){this.totalBits=o;const t=Zo(e);this.bitWidthMask=e-1,this.bitWidthShift=t}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,o=this.offset&this.bitWidthMask;return this.offset+=1,{done:!1,value:new Xo(e,o)}}}class ac{bitWidth;totalBits;constructor(e,o){this.bitWidth=e,this.totalBits=o}[Symbol.iterator](){return new nc(this.bitWidth,this.totalBits)}}class dc{bitWidth;totalBits;bitWidthMask;bitWidthShift;offset=0;constructor(e,o){this.bitWidth=e,this.totalBits=o;const t=Zo(e);this.bitWidthMask=e-1,this.bitWidthShift=t}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,o=this.bitWidth-1-(this.offset&this.bitWidthMask);return this.offset+=1,{done:!1,value:new Xo(e,o)}}}class ic{bitWidth;totalBits;constructor(e,o){this.bitWidth=e,this.totalBits=o}[Symbol.iterator](){return new dc(this.bitWidth,this.totalBits)}}class et{signature;bitvec;constructor(e,o){this.signature=e,this.bitvec=o}toJSON(){return Ze.encode(this)}}class lc{convert(e){if(!$t(e)||e.length!==2)throw new M(typeof e,"Array");return new et(l.decode(e[0]),se.decode(e[1]))}}class uc{convert(e){return d(e,et),[l.encode(e.signature),se.encode(e.bitvec)]}}class hc extends i{encoder=new uc;decoder=new lc}const Ze=new hc,rt=new xe(new ke(Ze),new Ie(Ze));class ye{data;vote_commitment;view_number;signatures;is_genesis;_pd;constructor(e,o,t,n,c,u){this.data=e,this.vote_commitment=o,this.view_number=t,this.signatures=n,this.is_genesis=c,this._pd=u}toJSON(){return ie.encode(this)}}class pc{convert(e){return a(e,"data","vote_commitment","view_number","signatures","is_genesis","_pd"),new ye(gr.decode(e.data),l.decode(e.vote_commitment),s.decode(e.view_number),rt.decode(e.signatures),de.decode(e.is_genesis),null)}}class mc{convert(e){return d(e,ye),{data:gr.encode(e.data),vote_commitment:l.encode(e.vote_commitment),view_number:s.encode(e.view_number),signatures:rt.encode(e.signatures),is_genesis:de.encode(e.is_genesis),_pd:null}}}class wc extends i{encoder=new mc;decoder=new pc}const ie=new wc;class yr{view_number;justify_qc;parent_commitment;block_header;block_payload;rejected;timestamp;proposer_id;constructor(e,o,t,n,c,u,p,w){this.view_number=e,this.justify_qc=o,this.parent_commitment=t,this.block_header=n,this.block_payload=c,this.rejected=u,this.timestamp=p,this.proposer_id=w}toJSON(){return vr.encode(this)}}class fc{convert(e){return a(e,"view_number","justify_qc","parent_commitment","block_header","block_payload","rejected","timestamp","proposer_id"),new yr(s.decode(e.view_number),ie.decode(e.justify_qc),l.decode(e.parent_commitment),q.decode(e.block_header),ae.decode(e.block_payload),N.decode(e.rejected),s.decode(e.timestamp),I.decode(e.proposer_id))}}class Cc{convert(e){return d(e,yr),{view_number:s.encode(e.view_number),justify_qc:ie.encode(e.justify_qc),parent_commitment:l.encode(e.parent_commitment),block_header:q.encode(e.block_header),block_payload:ae.encode(e.block_payload),rejected:N.encode(e.rejected),timestamp:s.encode(e.timestamp),proposer_id:I.encode(e.proposer_id)}}}class gc extends i{encoder=new Cc;decoder=new fc}const vr=new gc;class Er{leaf;qc;constructor(e,o){this.leaf=e,this.qc=o}toJSON(){return ot.encode(this)}}class bc{convert(e){return a(e,"leaf","qc"),new Er(vr.decode(e.leaf),ie.decode(e.qc))}}class yc{convert(e){return d(e,Er),{leaf:vr.encode(e.leaf),qc:ie.encode(e.qc)}}}class vc extends i{encoder=new yc;decoder=new bc}const ot=new vc;class le{}class Sr extends le{toJSON(){return xr.encode(this)}}class Ec{convert(e){if(!cr(e)||e!=="Empty")throw new z;return new Sr}}class Sc{convert(e){return d(e,Sr),"Empty"}}class xc extends i{encoder=new Sc;decoder=new Ec}const xr=new xc;class kr extends le{value;pos;elem;constructor(e,o,t){super(),this.value=e,this.pos=o,this.elem=t}toJSON(){return Ir.encode(this)}}class kc{convert(e){a(e,"Leaf");const o=e.Leaf;return a(o,"value","pos","elem"),new kr(l.decode(o.value),l.decode(o.pos),l.decode(o.elem))}}class Ic{convert(e){return d(e,kr),{Leaf:{value:l.encode(e.value),pos:l.encode(e.pos),elem:l.encode(e.elem)}}}}class Rc extends g{encoder=new Ic;decoder=new kc}const Ir=new Rc;class Rr extends le{value;constructor(e){super(),this.value=e}toJSON(){return _r.encode(this)}}class _c{convert(e){a(e,"ForgettenSubtree");const o=e.ForgettenSubtree;return a(o,"value"),new Rr(l.decode(o.value))}}class Bc{convert(e){return d(e,Rr),{ForgettenSubtree:{value:l.encode(e.value)}}}}class Tc extends g{encoder=new Bc;decoder=new _c}const _r=new Tc;class Te extends le{value;children;constructor(e,o){super(),this.value=e,this.children=o}toJSON(){return Br.encode(this)}}class Ac{convert(e){a(e,"Branch");const o=e.Branch;return a(o,"value","children"),new Te(l.decode(o.value),Ae.decode(o.children))}}class Dc{convert(e){return d(e,Te),{Branch:{value:l.encode(e.value),children:Ae.encode(e.children)}}}}class Pc extends i{encoder=new Dc;decoder=new Ac}const Br=new Pc;class Oc{convert(e){if(x(e,"Leaf",k))return Ir.decoder.convert(e);if(x(e,"Branch",k))return Br.decoder.convert(e);if(x(e,"ForgettenSubtree",k))return _r.decoder.convert(e);if(cr(e))return xr.decoder.convert(e);throw new z}}class Nc{convert(e){if(d(e,le),e instanceof kr)return Ir.encode(e);if(e instanceof Te)return Br.encode(e);if(e instanceof Rr)return _r.encode(e);if(e instanceof Sr)return xr.encode(e);throw new z}}class qc extends i{encoder=new Nc;decoder=new Oc}const _o=new qc,Ae=new A(new D(_o),new P(_o));class Tr{pos;proof;constructor(e,o){this.pos=e,this.proof=o}toJSON(){return Ar.encode(this)}}class Fc{convert(e){return a(e,"pos","proof"),new Tr(l.decode(e.pos),Ae.decode(e.proof))}}class Wc{convert(e){return d(e,Tr),{pos:l.encode(e.pos),proof:Ae.encode(e.proof)}}}class Gc extends i{encoder=new Wc;decoder=new Fc}const Ar=new Gc;class Dr{transaction;block_hash;proof;height;hash;constructor(e,o,t,n,c){this.transaction=e,this.block_hash=o,this.proof=t,this.height=n,this.hash=c}toJSON(){return tt.encode(this)}}class zc{convert(e){return a(e,"transaction","block_hash","proof","height","hash"),new Dr(L.decoder.convert(e.transaction),l.decode(e.block_hash),Ar.decoder.convert(e.proof),s.decode(e.height),l.decode(e.hash))}}class Hc{convert(e){return d(e,Dr),{transaction:L.encode(e.transaction),block_hash:l.encode(e.block_hash),proof:Ar.encode(e.proof),height:s.encode(e.height),hash:l.encode(e.hash)}}}class Mc extends i{encoder=new Hc;decoder=new zc}const tt=new Mc;function De(r){return new pr(r.height,r.time.valueOf()/1e3,0,new lr(0,"00","00"),[],new ur(new ArrayBuffer(0)),new S("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new S("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new nr(new ArrayBuffer(0),new ArrayBuffer(0),0),new dr(new ArrayBuffer(0),new ArrayBuffer(0)))}async function Lc(r){return new wr(De(r),new mr(await re(F(r.transactions,async e=>new ne(e.tree.namespace,Array.from(new Uint8Array(e.tree.data)))))),new S("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions)}function Jc(r){return new fr(De(r),new S("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions,r.proposer)}function Qc(r){const e=r.transactions,o=De(r);return F(e,async t=>new Cr(t.hash,o,t.index,new ne(t.tree.namespace,Array.from(new Uint8Array(t.tree.data)))))}async function*jc(r){const e=De(r),o=r.transactions;yield*F(o,async t=>new Dr(new ne(t.tree.namespace,Array.from(new Uint8Array(t.tree.data))),new S("BLOCK",new Uint8Array([0,0,0,0]).buffer),new Tr(new S("POS",new Uint8Array([0,0,0,0]).buffer),[new Te(new S("EMPTY",new Uint8Array([0,0,0,0]).buffer),[])]),e.height,new S("COMMIT",t.tree.data.slice(0,32))))}class Uc{async getLeafFromHeight(e){const o=await this.getBlockFromHeight(e);return new Er(new yr(e,new ye(new be(new S("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new S("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null),new S("LEAF",new Uint8Array([0,0,0,0]).buffer),o.header,o.payload,[],o.header.timestamp,o.header.fee_info.account),new ye(new be(new S("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new S("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null))}async getTransactionFromHeightAndOffset(e,o){const t=await ge(Z(E(),e)),n=jc(t);return await Zt(fe(n,o))}async getBlockSummaries(e,o){const t=Z(E(),e),n=Ce(t,o-e),c=zo(n,async u=>Jc(u));return await re(c)}async getBlockFromHeight(e){const o=Z(E(),e),t=await ge(o);return Lc(t)}async*streamTransactionSummaries(e){const o=Ho(E(),c=>c.height<=e),t=Mo(o);yield*j(t,c=>ee(Qc(c)))}async getTransactionSummaryRange(e,o,t){const n=this.streamTransactionSummaries(e),c=Z(n,o),u=Ce(c,t);return await re(u)}async getTransactionSummaryRangeForRollup(e,o,t,n){const c=this.streamTransactionSummaries(o),u=es(c,C=>C.transaction.vm===e),p=Z(u,t),w=Ce(p,n);return await re(w)}}class ue extends O{response;status;constructor(e,o,t){super(t),this.status=e,this.response=o}toJSON(){return st.convert(this)}}class Pe{convert(e){return d(e,ue),{...Re.convert(e),status:e.status}}}const st=new Pe,Pr="BadResponseClientError";class Vc extends ue{constructor(e,o,t="bad server response: client error"){super(e,o,t),Object.freeze(this)}get code(){return Pr}toJSON(){return ct.encode(this)}}class $c{convert(e){return a(e,"code","message","status"),_(e,Pr),new Vc(Number(e.status),null,h.decode(e.message))}}class Kc extends Pe{}class Yc extends i{encoder=new Kc;decoder=new $c}const ct=new Yc;R(Pr,ct);const Or="BadResponseError";class Xc extends ue{constructor(e,o,t="bad server response"){super(e,o,t),Object.freeze(this)}get code(){return Or}toJSON(){return nt.encode(this)}}class Zc{convert(e){return a(e,"code","message","status"),_(e,Or),new Xc(Number(e.status),null,h.decode(e.message))}}class en extends Pe{}class rn extends i{encoder=new en;decoder=new Zc}const nt=new rn;R(Or,nt);class on extends ue{constructor(e,o,t="bad server response: server error"){super(e,o,t),Object.freeze(this)}get code(){return Nr}}const Nr="BadResponseServerError";class tn{convert(e){return a(e,"code","message","status"),_(e,Nr),new on(Number(e.status),null,h.decode(e.message))}}class sn extends Pe{}class cn extends i{encoder=new sn;decoder=new tn}const nn=new cn;R(Nr,nn);const qr="ChannelClosedError";class an extends O{constructor(e="channel closed"){super(e),Object.freeze(this)}get code(){return qr}}class dn{convert(e){return a(e,"code","message"),_(e,qr),new an(h.decode(e.message))}}class ln extends _e{}class un extends i{encoder=new ln;decoder=new dn}const hn=new un;R(qr,hn);class Fr extends O{constructor(e="completer has already been completed"){super(e),Object.freeze(this)}get code(){return at}}const at="CompleterAlreadyCompletedError";class pn{convert(e){return a(e,"code","message"),_(e,at),new Fr(h.decode(e.message))}}class mn extends _e{}class wn extends i{encoder=new mn;decoder=new pn}const fn=new wn;R(Fr.name,fn);const Wr="InvalidStringValueError";class dt extends O{have;want;constructor(e,o,t=`invalid string value: have "${e}", want "${o}"`){super(t),this.have=e,this.want=o,Object.freeze(this)}toJSON(){return it.encode(this)}get code(){return Wr}}class Cn{convert(e){return a(e,"code","have","want","message"),_(e,Wr),new dt(h.decode(e.have),h.decode(e.want),h.decode(e.message))}}class gn{convert(e){return d(e,dt),{...Re.convert(e),have:h.encode(e.have),want:h.encode(e.want)}}}class bn extends i{encoder=new gn;decoder=new Cn}const it=new bn;R(Wr,it);const Gr="NoCompleterFoundForRequestID";class ve extends O{requestID;constructor(e,o=`no completer found for request id "${e}"`){super(o),this.requestID=e,Object.freeze(this)}toJSON(){return lt.encode(this)}get code(){return Gr}}class yn{convert(e){return a(e,"code","requestID","message"),_(e,Gr),new ve(Wo.decode(e.requestID),h.decode(e.message))}}class vn{convert(e){return d(e,ve),{...Re.convert(e),requestID:Wo.encode(e.requestID)}}}class En extends i{encoder=new vn;decoder=new yn}const lt=new En;R(Gr,lt);const zr="NoURLProvidedError";class Sn extends O{constructor(e="no url provided"){super(e),Object.freeze(this)}get code(){return zr}}class xn{convert(e){return a(e,"code","message"),_(e,zr),new Sn(h.decode(e.message))}}class kn extends _e{}class In extends i{encoder=new kn;decoder=new xn}const Rn=new In;R(zr,Rn);const Hr="QUERY_ERROR";class _n extends O{error;constructor(e,o="missing element"){super(o),this.error=e,Object.freeze(this)}get code(){return Hr}}class Bn{convert(e){return a(e,"code","error","message"),_(e,Hr),new _n(mt.decode(e.error),h.decode(e.message))}}class Tn{convert(e){return{code:e.code,error:mt.encode(e.error),message:h.encode(e.message)}}}class An extends i{encoder=new Tn;decoder=new Bn}const Dn=new An;class Mr{}const Lr="NotFound";class ut extends Mr{constructor(){super(),Object.freeze(this)}valueOf(){return Lr}toJSON(){return this.valueOf()}}const Pn=new ut,Jr="Missing";class ht extends Mr{constructor(){super(),Object.freeze(this)}valueOf(){return Jr}toJSON(){return this.valueOf()}}const On=new ht;class pt extends Mr{error;constructor(e){super(),this.error=e,Object.freeze(this)}toJSON(){return jr.encode(this)}}class Nn{message;constructor(e){this.message=e,Object.freeze(this)}toJSON(){return Qr.encode(this)}}class qn{convert(e){return a(e,"message"),new Nn(h.decode(e.message))}}class Fn{convert(e){return{message:h.encode(e.message)}}}class Wn extends i{encoder=new Fn;decoder=new qn}const Qr=new Wn;class Gn{convert(e){return a(e,"Error"),new pt(Qr.decode(e.Error))}}class zn{convert(e){return{Error:Qr.encode(e.error)}}}class Hn extends i{encoder=new zn;decoder=new Gn}const jr=new Hn;class Mn{convert(e){return e===Lr?Pn:e===Jr?On:jr.decode(e)}}class Ln{convert(e){if(e instanceof ut)return Lr;if(e instanceof ht)return Jr;if(e instanceof pt)return jr.encode(e);throw new f}}class Jn extends i{encoder=new Ln;decoder=new Mn}const mt=new Jn;R(Hr,Dn);const wt="ResponseContentTypeIsNotApplicationJSONError";class Oe extends ue{haveHeaderType;constructor(e,o,t,n="response content type is not application/json"){super(o,t,n),this.haveHeaderType=e,Object.freeze(this)}static fromResponse(e,o){return new Oe(e.headers.get("content-type")??"undefined",e.status,e,o)}toJSON(){return ft.encode(this)}get code(){return wt}}class Qn{convert(e){return a(e,"code","status","have","want","message"),_(e,wt),new Oe(h.decode(e.code),s.decode(e.status),null,h.decode(e.message))}}class jn{convert(e){return{...st.convert(e),have:h.encode(e.haveHeaderType),want:h.encode("application/json")}}}class Un extends i{encoder=new jn;decoder=new Qn}const ft=new Un;R(Oe.name,ft);const Ur="WebWorkerErrorResponse";class Ct extends O{error;constructor(e,o="error in web worker"){super(o),this.error=e,Object.freeze(this)}toJSON(){return gt.encode(this)}get code(){return Ur}}class Vn{convert(e){return a(e,"code","error","message"),_(e,Ur),new Ct(Be.decode(e.error),h.decode(e.message))}}class $n{convert(e){return{...Re.convert(e),error:Be.encode(e.error)}}}class Kn extends i{encoder=new $n;decoder=new Vn}const gt=new Kn;R(Ur,gt);var bt=(r=>(r[r.success=0]="success",r[r.full=1]="full",r[r.failed=2]="failed",r))(bt||{});class Yn{getFromEmpty(){}}class Xn{getFromEmpty(){throw new Yt}}const Zn={returnUndefined:new Yn,throwMissingElement:new Xn};class ea{maxSize;constructor(e){v(!Number.isNaN(e),"maxSize must not be NaN"),v(Number.isInteger(e),"maxSize must be an integer"),v(e>0,"maxSize must be greater than 0"),this.maxSize=e}nextIndex(e){return v(e>=0,"index must be greater than or equal to 0"),(e+1)%this.maxSize}}class ra{preComputedSizeMinus1;constructor(e){v(!Number.isNaN(e),"maxSize must not be NaN"),v(Number.isInteger(e),"maxSize must be an integer"),v(e>0,"maxSize must be greater than 0"),v(yt(e),"maxSize must be a power of two"),this.preComputedSizeMinus1=e-1}nextIndex(e){return v(e>=0,"index must be greater than or equal to 0"),e+1&this.preComputedSizeMinus1}}function yt(r){return(r&r-1)===0}const Vr="BufferFullError";class vt extends O{constructor(e="buffer full"){super(e),Object.freeze(this)}get code(){return Vr}}class oa{convert(e){return a(e,"code","message"),_(e,Vr),new vt(h.decode(e.message))}}class ta extends _e{}class sa extends i{encoder=new ta;decoder=new oa}const ca=new sa;R(Vr,ca);class na{putToFull(e,o){return e.get(),e.put(o)}}class aa{putToFull(){throw new vt}}const da={overwriteOldest:new na,throw:new aa};function ia(r){return yt(r)?new ra(r):new ea(r)}class la{readIndex=0;writeIndex=0;buffer;nextIndex;getOnEmpty;putOnFull;constructor(e,o,t){v(!Number.isNaN(e),"maxSize must not be NaN"),this.buffer=new Array(e),this.nextIndex=ia(e),this.getOnEmpty=o,this.putOnFull=t}get maxSize(){return this.buffer.length}get length(){return this.writeIndex<this.readIndex?this.writeIndex+this.maxSize-this.readIndex:this.writeIndex-this.readIndex}put(e){const o=this.nextIndex.nextIndex(this.writeIndex);return o===this.readIndex?this.putOnFull.putToFull(this,e):(this.buffer[this.writeIndex]=e,this.writeIndex=o,bt.success)}get(){if(this.readIndex===this.writeIndex)return this.getOnEmpty.getFromEmpty(this);const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),e}[Symbol.iterator](){return new ua(this)}immutableIterable(){return{[Symbol.iterator]:()=>this.immutableIterator()}}immutableIterator(){return new ha(this.readIndex,this.writeIndex,this.buffer,this.nextIndex)}}class ua{buffer;constructor(e){this.buffer=e}next(){const e=this.buffer.get();return e==null?{value:void 0,done:!0}:{value:e,done:!1}}}class ha{readIndex;writeIndex;buffer;nextIndex;constructor(e,o,t,n){this.readIndex=e,this.writeIndex=o,this.buffer=t,this.nextIndex=n}next(){if(this.readIndex===this.writeIndex)return{value:void 0,done:!0};const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),{value:e,done:!1}}}function T(r=32,e=Zn.returnUndefined,o=da.overwriteOldest){return new la(r,e,o)}class $r{hash;height;time;numTransactions;proposerID;feeRecipient;size;blockReward;constructor(e,o,t,n,c,u,p,w){this.hash=e,this.height=o,this.time=t,this.numTransactions=n,this.proposerID=c,this.feeRecipient=u,this.size=p,this.blockReward=w}toJSON(){return J.encode(this)}}class pa{convert(e){return a(e,"hash","height","time","num_transactions","proposer_id","fee_recipient","size","block_reward"),new $r(l.decode(e.hash),s.decode(e.height),H.decode(e.time),s.decode(e.num_transactions),G.decode(e.proposer_id),G.decode(e.fee_recipient),s.decode(e.size),Go.decode(e.block_reward))}}class ma{convert(e){return d(e,$r),{hash:l.encode(e.hash),height:s.encode(e.height),time:H.encode(e.time),num_transactions:s.encode(e.numTransactions),proposer_id:G.encode(e.proposerID),fee_recipient:G.encode(e.feeRecipient),size:s.encode(e.size),block_reward:Go.encode(e.blockReward)}}}class wa extends g{encoder=new ma;decoder=new pa}const J=new wa,Oi=new A(new D(J),new P(J));class Kr{hash;height;proposerID;numTransactions;size;time;constructor(e,o,t,n,c,u){this.hash=e,this.height=o,this.proposerID=t,this.numTransactions=n,this.size=c,this.time=u}toJSON(){return er.encode(this)}}class fa{convert(e){return a(e,"hash","height","proposer_id","num_transactions","size","time"),new Kr(l.decode(e.hash),s.decode(e.height),G.decode(e.proposer_id),s.decode(e.num_transactions),s.decode(e.size),H.decode(e.time))}}class Ca{convert(e){return d(e,Kr),{hash:l.encode(e.hash),height:s.encode(e.height),proposer_id:G.encode(e.proposerID),num_transactions:s.encode(e.numTransactions),size:s.encode(e.size),time:H.encode(e.time)}}}class ga extends g{encoder=new Ca;decoder=new fa}const er=new ga,V=new A(new D(er),new P(er)),U="latest";class Yr{rollups;transactions;blocks;constructor(e,o,t){this.rollups=e,this.transactions=o,this.blocks=t}toJSON(){return Xr.encode(this)}}class ba{convert(e){return a(e,"rollups","transactions","blocks"),new Yr(s.decode(e.rollups),s.decode(e.transactions),s.decode(e.blocks))}}class ya{convert(e){return d(e,Yr),{rollups:s.encode(e.rollups),transactions:s.encode(e.transactions),blocks:s.encode(e.blocks)}}}class va extends i{encoder=new ya;decoder=new ba}const Xr=new va;function Ea(r,e){return r.blockHeights-e.blockHeights}class Zr{blockTime;blockSize;blockTransactions;blockHeights;constructor(e,o,t,n){const c=[],u=Math.min(e.length,o.length,t.length,n.length);for(let B=0;B<u;B++){const Y=n[B];Y!==null&&c.push({blockTime:e[B],blockSize:o[B],blockTransactions:t[B],blockHeights:Y})}c.sort(Ea);const p=c[0].blockHeights,w=c[c.length-1].blockHeights,C=[],b=[],m=[],y=[];for(let B=p,Y=0;B<=w;B++){const X=c[Y];if(X.blockHeights!==B){C.push(null),b.push(null),m.push(null),y.push(null);continue}C.push(X.blockTime),b.push(X.blockSize),m.push(X.blockTransactions),y.push(X.blockHeights),Y++}const Q=Math.max(0,y.length-50);this.blockTime=C.slice(Q),this.blockSize=b.slice(Q),this.blockTransactions=m.slice(Q),this.blockHeights=y.slice(Q)}toJSON(){return eo.encode(this)}}class Sa{convert(e){return a(e,"block_time","block_size","block_transactions","block_heights"),new Zr(W.decode(e.block_time),W.decode(e.block_size),W.decode(e.block_transactions),W.decode(e.block_heights))}}class xa{convert(e){return d(e,Zr),{block_time:W.encode(e.blockTime),block_size:W.encode(e.blockSize),block_transactions:W.encode(e.blockTransactions),block_heights:W.encode(e.blockHeights)}}}class ka extends i{encoder=new xa;decoder=new Sa}const eo=new ka,Et=N;class Ne{hash;rollups;height;time;offset;numTransactions;constructor(e,o,t,n,c,u){this.hash=e,this.rollups=o,this.height=t,this.time=n,this.offset=c,this.numTransactions=u}toJSON(){return rr.encode(this)}}class Ia{convert(e){return a(e,"hash","rollups","height","time","offset","num_transactions"),new Ne(l.decode(e.hash),Et.decode(e.rollups),s.decode(e.height),H.decode(e.time),s.decode(e.offset),s.decode(e.num_transactions))}}class Ra{convert(e){return d(e,Ne),{hash:l.encode(e.hash),rollups:Et.encode(e.rollups),height:s.encode(e.height),time:H.encode(e.time),offset:s.encode(e.offset),num_transactions:s.encode(e.numTransactions)}}}class _a extends i{encoder=new Ra;decoder=new Ia}const rr=new _a,$=new A(new D(rr),new P(rr));class ro{latestBlock;genesisOverview;latestBlocks;latestTransactions;histograms;constructor(e,o,t,n,c){this.latestBlock=e,this.genesisOverview=o,this.latestBlocks=t,this.latestTransactions=n,this.histograms=c}toJSON(){return oo.encode(this)}}class Ba{convert(e){return a(e,"latest_block","genesis_overview","latest_blocks","latest_transactions","histograms"),new ro(J.decode(e.latest_block),Xr.decode(e.genesis_overview),V.decode(e.latest_blocks),$.decode(e.latest_transactions),eo.decode(e.histograms))}}class Ta{convert(e){return d(e,ro),{latest_block:J.encode(e.latestBlock),genesis_overview:Xr.encode(e.genesisOverview),latest_blocks:V.encode(e.latestBlocks),latest_transactions:$.encode(e.latestTransactions),histograms:eo.encode(e.histograms)}}}class Aa extends i{encoder=new Ta;decoder=new Ba}const oo=new Aa;class to{blockDetail;constructor(e){this.blockDetail=e}toJSON(){return St.encode(this)}}class Da{convert(e){return a(e,"block_detail"),new to(J.decode(e.block_detail))}}class Pa{convert(e){return d(e,to),{block_detail:J.encode(e.blockDetail)}}}class Oa extends g{encoder=new Pa;decoder=new Da}const St=new Oa;class so{blockSummaries;constructor(e){this.blockSummaries=e}toJSON(){return xt.encode(this)}}class Na{convert(e){return a(e,"block_summaries"),new so(V.decode(e.block_summaries))}}class qa{convert(e){return d(e,so),{block_summaries:V.encode(e.blockSummaries)}}}class Fa extends g{encoder=new qa;decoder=new Na}const xt=new Fa;class co{explorerSummary;constructor(e){this.explorerSummary=e}toJSON(){return kt.encode(this)}}class Wa{convert(e){return a(e,"explorer_summary"),new co(oo.decode(e.explorer_summary))}}class Ga{convert(e){return d(e,co),{explorer_summary:oo.encode(e.explorerSummary)}}}class za extends i{encoder=new Ga;decoder=new Wa}const kt=new za;class no{blocks;transactions;constructor(e,o){this.blocks=e,this.transactions=o}toJSON(){return ao.encode(this)}}class Ha{convert(e){return a(e,"blocks","transactions"),new no(V.decode(e.blocks),$.decode(e.transactions))}}class Ma{convert(e){return d(e,no),{blocks:V.encode(e.blocks),transactions:$.encode(e.transactions)}}}class La extends g{encoder=new Ma;decoder=new Ha}const ao=new La;class io{searchResults;constructor(e){this.searchResults=e}toJSON(){return It.encode(this)}}class Ja{convert(e){return a(e,"search_results"),new io(ao.decode(e.search_results))}}class Qa{convert(e){return d(e,io),{search_results:ao.encode(e.searchResults)}}}class ja extends g{encoder=new Qa;decoder=new Ja}const It=new ja;class lo{static heightAndOffset(e,o){return new qe(e,o)}static hash(e){return new Fe(e)}toJSON(){return Rt.encode(this)}}class Ua{convert(e){if(d(e,lo),e instanceof qe)return{height:s.encode(e.height),offset:s.encode(e.offset)};if(e instanceof Fe)return{hash:l.encode(e.hash)};throw new z}}class Va{convert(e){if(x(e,"height",k)&&x(e,"offset",k))return new qe(s.decode(e.height),s.decode(e.offset));if(x(e,"hash",k))return new Fe(l.decode(e.hash));throw new z}}class $a extends i{encoder=new Ua;decoder=new Va}const Rt=new $a;class qe extends lo{height;offset;constructor(e,o){super(),this.height=e,this.offset=o}}class Fe extends lo{hash;constructor(e){super(),this.hash=e}}const _t=s;class uo{namespace;payload;constructor(e,o){this.namespace=e,this.payload=o}toJSON(){return or.encode(this)}}class Ka{convert(e){return a(e,"namespace","payload"),new uo(_t.decode(e.namespace),qo.decode(e.payload))}}class Ya{convert(e){return d(e,uo),{namespace:_t.encode(e.namespace),payload:qo.encode(e.payload)}}}class Xa extends i{encoder=new Ya;decoder=new Ka}const or=new Xa,Bt=new A(new D(or),new P(or));class ho{hash;height;blockConfirmed;offset;numTransactions;size;time;sequencingFees;feeDetails;constructor(e,o,t,n,c,u,p,w,C){this.hash=e,this.height=o,this.blockConfirmed=t,this.offset=n,this.numTransactions=c,this.size=u,this.time=p,this.sequencingFees=w,this.feeDetails=C}toJSON(){return po.encode(this)}}class Za{convert(e){return a(e,"hash","height","block_confirmed","offset","num_transactions","size","time","sequencing_fees","fee_details"),new ho(l.decode(e.hash),s.decode(e.height),de.decode(e.block_confirmed),s.decode(e.offset),s.decode(e.num_transactions),s.decode(e.size),H.decode(e.time),[],[])}}class ed{convert(e){return d(e,ho),{hash:l.encode(e.hash),height:s.encode(e.height),block_confirmed:de.encode(e.blockConfirmed),offset:s.encode(e.offset),num_transactions:s.encode(e.numTransactions),size:s.encode(e.size),time:H.encode(e.time),sequencing_fees:[],fee_details:[]}}}class rd extends i{encoder=new ed;decoder=new Za}const po=new rd;class mo{details;data;constructor(e,o){this.details=e,this.data=o}toJSON(){return wo.encode(this)}}class od{convert(e){return a(e,"details","data"),new mo(po.decode(e.details),Bt.decode(e.data))}}class td{convert(e){return d(e,mo),{details:po.encode(e.details),data:Bt.encode(e.data)}}}class sd extends i{encoder=new td;decoder=new od}const wo=new sd;class Ee{transactionDetail;constructor(e){this.transactionDetail=e}toJSON(){return Tt.encode(this)}}class cd{convert(e){return a(e,"transaction_detail"),new Ee(wo.decode(e.transaction_detail))}}class nd{convert(e){return d(e,Ee),{transaction_detail:wo.encode(e.transactionDetail)}}}class ad extends g{encoder=new nd;decoder=new cd}const Tt=new ad;class We{constructor(){}static block(e){return new Ge(e)}static namespace(e){return new ze(e)}static none(){return new Co}toJSON(){return fo.encode(this)}}class dd{convert(e){return x(e,"block",k)?new Ge(s.decode(e.block)):x(e,"namespace",k)?new ze(s.decode(e.namespace)):new Co}}class id{convert(e){if(d(e,We),e instanceof Co)return{};if(e instanceof Ge)return{block:s.encode(e.block)};if(e instanceof ze)return{namespace:s.encode(e.namespace)};throw new z}}class ld extends g{encoder=new id;decoder=new dd}const fo=new ld;class Co extends We{constructor(){super()}convertURL(e){return e}}class Ge extends We{block;constructor(e){super(),this.block=e}convertURL(e){return new URL(`${e.pathname}/block/${this.block}`,e)}}class ze extends We{namespace;constructor(e){super(),this.namespace=e}convertURL(e){return new URL(`${e.pathname}/namespace/${this.namespace}`,e)}}class oe{transactionSummaries;constructor(e){this.transactionSummaries=e}toJSON(){return At.encode(this)}}class ud{convert(e){return a(e,"transaction_summaries"),new oe($.decode(e.transaction_summaries))}}class hd{convert(e){return d(e,oe),{transaction_summaries:$.encode(e.transactionSummaries)}}}class pd extends g{encoder=new hd;decoder=new ud}const At=new pd;class He{limit;constructor(e){this.limit=e}static latest(e){return new Me(e)}static heightAndOffset(e,o,t){return new Le(e,o,t)}static hash(e,o){return new Je(e,o)}toJSON(){return go.encode(this)}}class md{convert(e){return a(e,"limit"),x(e,"height",k)&&x(e,"offset",k)?new Le(s.decode(e.height),s.decode(e.offset),s.decode(e.limit)):x(e,"hash",k)?new Je(l.decode(e.hash),s.decode(e.limit)):new Me(s.decode(e.limit))}}class wd{convert(e){if(d(e,He),e instanceof Me)return{limit:s.encode(e.limit)};if(e instanceof Le)return{height:s.encode(e.height),offset:s.encode(e.offset),limit:s.encode(e.limit)};if(e instanceof Je)return{hash:l.encode(e.hash),limit:s.encode(e.limit)};throw new z}}class fd extends g{encoder=new wd;decoder=new md}const go=new fd;class Me extends He{constructor(e){super(e)}convertURL(e){return new URL(`transactions/latest/${this.limit}`,e)}}class Le extends He{height;offset;constructor(e,o,t){super(t),this.height=e,this.offset=o}convertURL(e){return new URL(`transactions/from/${this.height}/${this.offset}/${this.limit}`,e)}}class Je extends He{hash;constructor(e,o){super(o),this.hash=e}convertURL(e){return new URL(`transactions/hash/${this.hash}/${this.limit}`,e)}}function Bo(r){return new $r(r.hash,r.height,r.time,r.numTransactions,r.proposer,r.proposer,r.size,r.fees)}function Ve(r){return new Kr(r.hash,r.height,r.proposer,r.numTransactions,r.size,r.time)}function To(r,e){return new mo(new ho(e.hash,e.block,!0,e.index,r.numTransactions,e.size,e.time,[],[]),[new uo(e.tree.namespace,e.tree.data)])}function he(r,e){return new Ne(e.hash,[e.tree.namespace],e.block,e.time,e.index,r.numTransactions)}class Cd{async getBlockDetail(e){const o=e.target,t=await(o===U?rs(E()):ge(fe(E(),o)));return new to(Bo(t))}async getBlockSummaries(e){const o=Ho(E(),p=>e.from===U||p.height<=e.from),t=Mo(o),n=Ce(t,e.limit),c=zo(n,async p=>Ve(p)),u=await re(c);return new so(u)}async getTransactionDetail(e){const o=E();if(e instanceof qe){const t=Qe(o,p=>p.height<=e.height),n=j(t,p=>F(p.transactions,async w=>To(p,w))),c=fe(ee(n),e.offset),u=await ge(c);return new Ee(u)}if(e instanceof Fe){const t=j(o,c=>F(c.transactions,async u=>To(c,u))),n=await os(t,c=>c.details.hash===e.hash);if(!n)throw new ss(e.hash);return new Ee(n)}throw new f}applyFilter(e,o){return o instanceof Ge?Io(e,t=>t.height==o.block):o instanceof ze?Io(e,t=>t.rollups.indexOf(o.namespace)>=0):e}async getTransactionSummaries(e){const o=E(),{target:t,filter:n}=e;if(t instanceof Me){const u=j(o,b=>F(b.transactions,async m=>he(b,m))),p=ee(u),w=this.applyFilter(p,n),C=await je(Ue(w,t.limit));return new oe(C)}if(t instanceof Le){const c=Qe(o,m=>m.height<=t.height),u=j(c,m=>F(m.transactions,async y=>he(m,y))),p=ee(u),w=fe(p,t.offset),C=this.applyFilter(w,n),b=await je(Ue(C,t.limit));return new oe(b)}if(t instanceof Je){const c=E(),u=j(c,m=>F(m.transactions,async y=>new Ne(y.hash,[y.tree.namespace],y.block,y.time,y.index,m.numTransactions))),p=Qe(u,m=>m.hash!==t.hash),w=ee(p),C=this.applyFilter(w,n),b=await je(Ue(C,t.limit));return new oe(b)}throw new f}async getExplorerOverview(){let e;const o=T(11),t=T(51),n=T(51),c=T(51),u=T(51),p=T(11);let w=0,C=0;const b=new Map;for await(const m of E()){e=Bo(m),o.put(Ve(m)),t.put(m.size),n.put(Math.round(m.genTime/1e3)),c.put(m.numTransactions),u.put(m.height),w++,C+=m.numTransactions;for await(const y of m.transactions){p.put(he(m,y));const Q=b.get(y.tree.namespace)||0;b.set(y.tree.namespace,Q+1)}}return new co(new ro(e,new Yr(Array.from(b.keys()).length,C,w),Array.from(o),Array.from(p),new Zr(Array.from(n),Array.from(t),Array.from(c),Array.from(u))))}async getSearchResult(e){const o=T(101),t=T(10),n=T(10);for await(const c of E())o.put(c);for(const c of o){c.hash.toString().startsWith(e.query)&&t.put(Ve(c));for await(const u of c.transactions)u.hash.toString().startsWith(e.query)&&n.put(he(c,u))}return new io(new no(Array.from(t),Array.from(n)))}}class Se{constructor(e,o){this.lifetimeRewards=e,this.authData=o,Object.freeze(this)}toJSON(){return tr.encode(this)}}class gd{convert(e){return a(e,"lifetime_rewards","auth_data"),new Se(Fo.decode(e.lifetime_rewards),I.decode(e.auth_data))}}class bd{convert(e){return d(e,Se),{lifetime_rewards:Fo.encode(e.lifetimeRewards),auth_data:I.encode(e.authData)}}}class yd extends i{encoder=new bd;decoder=new gd}const tr=new yd,Ao=new xe(new ke(tr),new Ie(tr)),vd=new Lo(cs());class Ed{async getLatestRewardBalance(){return 123000000000000000000n}async getLatestRewardClaimInput(){return new Se(123000000000000000000n,vd.fillBytes(5344))}async getRewardBalance(){return 123000000000000000000n}async getRewardClaimInput(e){const o=new Lo(e.height);return new Se(123000000000000000000n,o.fillBytes(5344))}}class Sd{async blockHeight(){return(await ts(E())).height}}class xd{availability=new Uc;status=new Sd;explorer=new Cd;rewardState=new Ed;async setURL(){throw new f}}class kd{async getLeafFromHeight(){throw new f}async getTransactionFromHeightAndOffset(){throw new f}async getBlockFromHeight(){throw new f}async getBlockSummaries(){throw new f}async getTransactionSummaryRange(){throw new f}async getTransactionSummaryRangeForRollup(){throw new f}}class Id{async getBlockDetail(){throw new f}async getBlockSummaries(){throw new f}async getTransactionDetail(){throw new f}async getTransactionSummaries(){throw new f}async getExplorerOverview(){throw new f}async getSearchResult(){throw new f}}class Rd{async getLatestRewardBalance(){throw new f}async getLatestRewardClaimInput(){throw new f}async getRewardBalance(){throw new f}async getRewardClaimInput(){throw new f}}class _d{async blockHeight(){throw new f}}class Bd{availability=new kd;status=new _d;explorer=new Id;rewardState=new Rd;setURL(){throw new f}}function pe(){v(!1,"completer is not ready, this should never be reached")}function me(){throw new Fr}class Td{resolve=pe;reject=pe;completed=!1;promise;get isCompleted(){return this.completed}constructor(){this.promise=new Promise((e,o)=>{this.resolve=e,this.reject=o}),v(this.resolve!==pe,"resolve should be set"),v(this.reject!==pe,"resolve should be set")}complete(e){const o=this.resolve,t=this.reject;if(this.completed=!0,this.resolve=me,this.reject=me,e instanceof Promise){e.then(o,t);return}o(e)}completeError(e){this.reject(e),this.completed=!0,this.resolve=me,this.reject=me}}function Ad(){return new Td}const K=s;class bo{requestID;api;method;param;constructor(e,o,t,n){this.requestID=e,this.api=o,this.method=t,this.param=n}toJSON(){return{requestID:this.requestID,api:this.api,method:this.method,param:this.param}}}class Dd{convert(e){return a(e,"requestID","api","method","param"),new bo(K.decode(e.requestID),h.decode(e.api),h.decode(e.method),e.param)}}class Pd{convert(e){return d(e,bo),{requestID:K.encode(e.requestID),api:h.encode(e.api),method:h.encode(e.method),param:e.param}}}class Od extends i{encoder=new Pd;decoder=new Dd}const Nd=new Od;class yo{requestID;constructor(e){this.requestID=e}}class vo extends yo{response;constructor(e,o){super(e),this.response=o}toJSON(){return Dt.encode(this)}}class qd{convert(e){return a(e,"requestID","response"),new vo(K.decode(e.requestID),e.response)}}class Fd{convert(e){return d(e,vo),{requestID:K.encode(e.requestID),response:e.response}}}class Wd extends i{encoder=new Fd;decoder=new qd}const Dt=new Wd;class Eo extends yo{error;constructor(e,o){super(e),this.error=o}toJSON(){return Pt.encode(this)}}class Gd{convert(e){return a(e,"requestID","error"),new Eo(K.decode(e.requestID),Be.decode(e.error))}}class zd{convert(e){return d(e,Eo),{requestID:K.encode(e.requestID),error:Be.encode(e.error)}}}class Hd extends i{encoder=new zd;decoder=new Gd}const Pt=new Hd;class Md{convert(e){if(x(e,"response",k))return Dt.decode(e);if(x(e,"error",k))return Pt.decode(e);throw new z}}class Ld{convert(e){return d(e,yo),e.toJSON()}}class Jd extends i{encoder=new Ld;decoder=new Md}const Do=new Jd;class So{target;constructor(e){this.target=e}static latest(){return new Nt}static height(e){return new qt(e)}toJSON(){return Ot.encode(this)}}class Qd{convert(e){return d(e,So),typeof e.target=="number"?s.encode(e.target):h.encode(e.target)}}class jd{convert(e){return e===U?new Nt:new qt(s.decode(e))}}class Ud extends g{encoder=new Qd;decoder=new jd}const Ot=new Ud;class Nt extends So{constructor(){super(U)}}class qt extends So{constructor(e){super(e)}}class xo{limit;constructor(e){this.limit=e}static latest(e){return new Wt(e)}static from(e,o){return new Gt(e,o)}toJSON(){return Ft.encode(this)}}class Vd{convert(e){return d(e,xo),Kt(e.from)?{from:s.encode(e.from),limit:s.encode(e.limit)}:{from:h.encode(e.from),limit:s.encode(e.limit)}}}class $d{convert(e){return a(e,"from","limit"),e.from===U?new Wt(s.decode(e.limit)):new Gt(s.decode(e.from),s.decode(e.limit))}}class Kd extends g{encoder=new Vd;decoder=new $d}const Ft=new Kd;class Wt extends xo{constructor(e){super(e)}get from(){return U}}class Gt extends xo{from;constructor(e,o){super(o),this.from=e}}class zt{query;constructor(e){this.query=e}toJSON(){return Ht.encode(this)}}class Yd{convert(e){return d(e,zt),h.encode(e.query)}}class Xd{convert(e){return new zt(h.decode(e))}}class Zd extends g{encoder=new Yd;decoder=new Xd}const Ht=new Zd;class Mt{target;filter;constructor(e,o){this.target=e,this.filter=o}toJSON(){return Lt.encode(this)}}class ei{convert(e){return a(e,"filter","target"),new Mt(go.decode(e.target),fo.decode(e.filter))}}class ri{convert(e){return d(e,Mt),{filter:fo.encode(e.filter),target:go.encode(e.target)}}}class oi extends g{encoder=new ri;decoder=new ei}const Lt=new oi;function ti(r){return new Worker(""+new URL("hotshot_query_service_web_worker_api.js-DC3Gb_4r.js",import.meta.url).href,{name:r?.name})}class Jt{constructor(e,o){this.height=e,this.address=o,Object.freeze(this)}toJSON(){return ce.encode(this)}}class si{convert(e){return a(e,"height","address"),new Jt(s.decode(e.height),h.decode(e.address))}}class ci{convert(e){return d(e,Jt),{height:s.encode(e.height),address:h.encode(e.address)}}}class ni extends i{encoder=new ci;decoder=new si}const ce=new ni;new xe(new ke(ce),new Ie(ce));class ai{worker;nextRequestID=0;requestCompleters=new Map;constructor(e){this.worker=e,e.addEventListener("message",this.handleMessage.bind(this)),e.addEventListener("messageerror",this.handleMessageError.bind(this)),e.addEventListener("error",this.handleError.bind(this))}async submitRequest(e,o,t,n){const[c,u]=this.nextRequest();try{return this.worker.postMessage(Nd.encode(new bo(c,o,t,n))),await u.promise.then(p=>{if(p instanceof Eo)throw new Ct(p.error);if(p instanceof vo){const{response:w}=p;return e.decode(w)}throw new M(typeof p,"WebWorkerResponse")})}finally{this.requestCompleters.delete(c)}}nextRequest(){const e=this.nextRequestID++,o=Ad();return this.requestCompleters.set(e,o),[e,o]}handleMessage(e){const o=Do.decode(e.data),t=this.requestCompleters.get(o.requestID);if(t===void 0)throw new ve(o.requestID);t.complete(o)}handleMessageError(e){const o=Do.decode(e.data),t=this.requestCompleters.get(o.requestID);if(t===void 0)throw new ve(o.requestID);t.completeError(o)}handleError(e){debugger;console.error("encountered error setting up Web worker",e)}}class di{helper;constructor(e){this.helper=e}async sendRequest(e,o,...t){return this.helper.submitRequest(e,"availability",o,t)}async getLeafFromHeight(e){return await this.sendRequest(ot,"getLeafFromHeight",e)}async getTransactionFromHeightAndOffset(e,o){return await this.sendRequest(tt,"getTransactionFromHeightAndOffset",e,o)}async getBlockSummaries(e,o){return await this.sendRequest(Ps,"getBlockSummaries",e,o)}async getBlockFromHeight(e){return await this.sendRequest(jo,"getBlockFromHeight",e)}async getTransactionSummaryRange(e,o,t){return await this.sendRequest(Ro,"getTransactionSummaryRange",e,o,t)}async getTransactionSummaryRangeForRollup(e,o,t,n){return await this.sendRequest(Ro,"getTransactionSummaryRangeForRollup",e,o,t,n)}}class ii{helper;constructor(e){this.helper=e}async sendRequest(e,o,...t){return this.helper.submitRequest(e,"status",o,t)}async blockHeight(){return await this.sendRequest(s,"blockHeight")}}class li{helper;constructor(e){this.helper=e}async sendRequest(e,o,...t){return this.helper.submitRequest(e,"explorer",o,t)}async getBlockDetail(e){return await this.sendRequest(St,"getBlockDetail",Ot.encode(e))}async getBlockSummaries(e){return await this.sendRequest(xt,"getBlockSummaries",Ft.encode(e))}async getTransactionDetail(e){return await this.sendRequest(Tt,"getTransactionDetail",Rt.encode(e))}async getTransactionSummaries(e){return await this.sendRequest(At,"getTransactionSummaries",Lt.encode(e))}async getExplorerOverview(){return await this.sendRequest(kt,"getExplorerOverview",null)}async getSearchResult(e){return await this.sendRequest(It,"getSearchResult",Ht.encode(e))}}class ui{helper;constructor(e){this.helper=e}async sendRequest(e,o,...t){return this.helper.submitRequest(e,"reward-state",o,t)}async getLatestRewardBalance(e){return await this.sendRequest(ko,"getLatestRewardBalance",h.encode(e))}async getLatestRewardClaimInput(e){return await this.sendRequest(Ao,"getLatestRewardClaimInput",h.encode(e))}async getRewardBalance(e){return await this.sendRequest(ko,"getRewardBalance",ce.encode(e))}async getRewardClaimInput(e){return await this.sendRequest(Ao,"getRewardClaimInput",ce.encode(e))}}let $e=null;function hi(){return $e||($e=new ti),$e}class pi{availability;status;explorer;rewardState;helper;constructor(){const e=hi(),o=new ai(e);this.helper=o,this.availability=new di(o),this.status=new ii(o),this.explorer=new li(o),this.rewardState=new ui(o)}async sendRequest(e,o,...t){return this.helper.submitRequest(e,"proxy",o,t)}async setURL(e){return await this.sendRequest(de,"set-url",h.encode(e))}}const sr=Oo.createContext(new Bd);let we=null;function mi(r){return we===null&&(we=new pi),r&&we.setURL(r).then(e=>{e||console.warn("unable to set the url for the hotshot query service",r)},e=>{console.error("unable to set the url for the hotshot query service",r,e)}),we}function wi(r){return typeof window<"u"&&"Worker"in window||typeof self<"u"&&"Worker"in self?mi(r):new xd}const Po=r=>{const o=Oo.useContext(jt)?.hotshotQueryServiceURL;return Qt.jsx(sr.Provider,{value:wi(o),children:r.children})};try{sr.displayName="CappuccinoHotShotQueryServiceAPIContext",sr.__docgenInfo={description:"",displayName:"CappuccinoHotShotQueryServiceAPIContext",props:{}}}catch{}try{Po.displayName="ProvideCappuccinoHotShotQueryServiceAPIContext",Po.__docgenInfo={description:`ProvideCappuccinoHotShotQueryServiceAPIContext is a component that provides a
Cappuccino HotShot Query Service API using a default implementation that is
dependent on the environment that the code is being run within.`,displayName:"ProvideCappuccinoHotShotQueryServiceAPIContext",props:{}}}catch{}export{xo as A,sr as C,xd as F,Jt as H,ve as N,Po as P,Se as R,Ct as W,io as a,no as b,Kr as c,Ne as d,zt as e,T as f,da as g,Zn as h,Ad as i,an as j,Oi as k,eo as l,J as m,se as n,Pi as o,Yo as p,te as q,Uo as r,Zr as s,$r as t,de as u,Mt as v,He as w,We as x,So as y,lo as z};
