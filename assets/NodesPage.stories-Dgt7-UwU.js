var wo=Object.defineProperty;var ko=(t,e,o)=>e in t?wo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var s=(t,e,o)=>ko(t,typeof e!="symbol"?e+"":e,o);import{j as r}from"./jsx-runtime-BlAj40OV.js";import{P as xo}from"./NowProvider-D4xjbY-7.js";import{O as No}from"./PathResolverProvider-Xv58eOQd.js";import{y as C,G as Bo,H as To,j as he,I as O,J as Tt,h as vt,g as Pt,K as Rt,L as It,M as vo,O as Po,P as Ro,z as Ct,A as Io}from"./CircularBuffer-Dxw-FMcc.js";import{C as Do,D as _o,G as Vo,H as jo,S as D,I as Lo,J as Ho,K as Eo,M as Ao,F as Wo,k as Mo}from"./StoryBookPathResolver-DlmPZ7PA.js";import{A as R}from"./AsyncIterableResolver-CCfvgvmz.js";import{u as I,U as k,P as ft,A as qo,B as Oo,n as ye,g as Go,C as Ko}from"./functional_async-y9fAbhVo.js";import{R as c}from"./index-Cs7sjTYM.js";import{L as Fo,d as zo,e as Uo}from"./RollUpDetailDataTable-DGJExF-h.js";import{D as w,L as E}from"./LoadingProvider-Cf52ybPZ.js";import"./DateTimeFormattersProvider-D6Gp1Kbv.js";import"./LocaleProvider-B0_30C1H.js";import{O as Jo,P as Qo}from"./NavDrawerStateProvider-HpepdHmi.js";import"./NumberFormattersProvider-DANbX_lC.js";import{N as Zo,a as Yo,W as Xo,P as $o,D as er,b as tr}from"./WorldMapDotsPopulationResolver-a_t-SZu8.js";import{T as l,I as g,a as h,N as or,d as rr,e as sr,s as Le,A as nr,h as ar,j as cr,x as S,y as f,p as Dt,r as ir,b as lr,f as dr,B as ur}from"./string-BRHtp8nH.js";import"./base64-B9OJSIzr.js";import{t as _t}from"./TaggedBase64-kwVVsu1o.js";import"./array_buffer-R2gdYDdl.js";import{z as pr,m as _,g as Vt,h as mr,j as jt,i as hr}from"./functional-CfXZTWhy.js";import"./monetary_value-BoyvFl18.js";import"./FetchError-nmVtBWex.js";import"./NotFoundError-CI-iUI-y.js";import{n as Lt}from"./url-YgTINc9c.js";import{w as Ht,L as yr,e as Cr,p as bt,f as fr}from"./constants-BI_m5JjL.js";import{W as br}from"./WorldMapDotsFullResolution-Chuosc2F.js";import"./AffineTransform-DiV9SxhF.js";import{a as Sr}from"./higher_order-DnPEgWEz.js";import{a as M,C as B}from"./Card-0izmXN96.js";import{a as ne,b as He}from"./PieChart-BgybJGe6.js";import{H as gr}from"./Heading2-DdOe_FXR.js";import{T as p}from"./Text-BU7JBOLk.js";import{F as wr}from"./Footer-DtxsyFUR.js";import{H as kr}from"./Header-DV0ijJPt.js";import{N as V}from"./NumberText-C4Z_0tU7.js";import{S as fe,D as xr,a as Nr,c as A,b as Br}from"./DataTable-DzNo7UA-.js";import"./ByteSizeText-Dv1cMyzR.js";import{P as Tr}from"./TransactionsPerSecondText-4_RgFeZU.js";import"./CopyHex-BC7HLqXr.js";import"./DateTimeText-H0_MZ3-7.js";import"./FullHexText-Dx-OT2Be.js";import"./FullTaggedBase64Text-DfQ9QmRF.js";import"./HexText-CWEQvAMb.js";import"./MoneyText-C0mhNXDV.js";import"./RelativeTimeText-DCz-EhHt.js";import{T as vr}from"./TaggedBase64Text-CGXJT8bt.js";import"./TimeText-iZ8ovT8K.js";import{C as Pr}from"./CopyTaggedBase64-CYfLAWz6.js";import{L as Rr}from"./Link-DkuKr0oH.js";import{B as Ir,c as St}from"./BlockSizeHistogram-DT5VDATs.js";import"./ProvideAsyncStates-DyGIG4hw.js";import"./PromiseResolver-CXCa4yLm.js";import"./AnchorButton-QgyBwLin.js";import"./Button-Cc3XS5nv.js";import"./IconAnchorButton-CLyCnfGb.js";import"./IconButton-C8CRMxou.js";import"./LabeledAnchorButton-Ccf2RRuc.js";import"./LabeledButton-Bzsgrhnz.js";import"./Heading1-DEalHnHf.js";import"./SummaryTabledLabeledValue-Cwjroine.js";import{L as Dr,c as _r,d as Vr}from"./RollUpsSummaryDataTable-DoYxCop4.js";import"./TabledLabeledValue-6LvxwEmX.js";import"./CircularProgressIndicator-CmmjYXfy.js";import"./ContainerLoading-bH1zzl06.js";import"./NavBar-BFWD_4mN.js";import"./SocialMediaLinks-Bm4ZO-q5.js";import"./BlockDetailContent-CDRzAWMo.js";import"./HexDump-DDjXVakO.js";import"./RollUpSimple-Ce6Gx4TQ.js";import"./TransactionDetailContent-BawcWa_M.js";import"./TransactionSummaryDataTable-CRvuDgXK.js";import"./typography-BIj1kvXp.js";import"./ArrowLeft-DLfXyVlM.js";import"./ArrowRight-t3TwXnAd.js";import"./CheckCircle-YNmVoImJ.js";import"./InfoCircle-DczreSu1.js";import"./ChevronUp-kyB5007e.js";import"./TwitterIcon-DgUjAjdP.js";import"./EspressoLogo-DwD84bVM.js";import"./EspressoLogoAndTitle-2fto-X4z.js";import"./Menu-fK84igno.js";import"./SVGIconBase-eCXHSPnQ.js";import"./SearchGlass-REp8lC9G.js";import"./sleep-CW-vxfof.js";import"./data-CgOROfg9.js";import"./_commonjsHelpers-BosuxZz1.js";import"./SVGToolTip-VtYDiDwI.js";import"./SVGPathBuilder-XZx_HA2Y.js";/* empty css                */import"./CopyButton-EFpwbuCy.js";import"./Copy-DeuPxRNR.js";/* empty css               */import"./index-Dk74W0Oi.js";class jr{constructor(e){s(this,"publishQueue");s(this,"pollBlocked");s(this,"publishBlocked");s(this,"capacity");s(this,"closed",!1);this.publishQueue=C(Math.max(2,e),To.throwMissingElement,Bo.throw);const o=he();this.pollBlocked=o,this.publishBlocked=o,o.complete(),this.capacity=e-1}get isClosed(){return this.closed}close(){if(this.closed)throw new O;this.closed=!0}async drain(){for(;this.publishQueue.length>0;)this.publishQueue.get()}async publish(e){if(this.closed)throw new O;if(this.publishQueue.length>=this.capacity){if(this.publishBlocked.isCompleted){const o=he();this.publishBlocked=o,await o.promise}return await this.publishBlocked.promise,this.publish(e)}this.publishQueue.put(e),this.pollBlocked.isCompleted||this.pollBlocked.complete()}async poll(){if(this.publishQueue.length<=0){if(this.isClosed)throw new O;if(this.pollBlocked.isCompleted){const o=he();this.pollBlocked=o}return await this.pollBlocked.promise,this.poll()}const e=this.publishQueue.get();return this.publishBlocked.isCompleted||this.publishBlocked.complete(),e}[Symbol.asyncIterator](){return new Lr(this)}}class Lr{constructor(e){s(this,"channel");this.channel=e}async next(){try{return{done:!1,value:await this.channel.poll()}}catch(e){if(e instanceof O)return{done:!0,value:void 0};throw e}}}function m(t){return new jr(t)}class Hr{constructor(e,o){this.sink=e,this.converter=o,this.sink=e,this.converter=o}async send(e){await this.sink.send(this.converter.convert(e))}}function G(t,e){return new Hr(t,e)}const Et=c.createContext(I()),be=t=>{const e=c.useContext(Et);return r.jsx(R,{asyncIterable:e,children:t.children})};try{be.displayName="CountriesPieChartStreamConsumer",be.__docgenInfo={description:"",displayName:"CountriesPieChartStreamConsumer",props:{}}}catch{}const At=c.createContext(I()),Se=t=>{const e=c.useContext(At);return r.jsx(R,{asyncIterable:e,children:t.children})};try{Se.displayName="NetworkTypesPieChartStreamConsumer",Se.__docgenInfo={description:"",displayName:"NetworkTypesPieChartStreamConsumer",props:{}}}catch{}const Wt=c.createContext(I()),ge=t=>{const e=c.useContext(Wt);return r.jsx(R,{asyncIterable:e,children:t.children})};try{ge.displayName="NodeTypesPieChartStreamConsumer",ge.__docgenInfo={description:"",displayName:"NodeTypesPieChartStreamConsumer",props:{}}}catch{}var b=(t=>(t.publicKey="publicKey",t.name="name",t.address="address",t.companyName="companyName",t.companyWebSite="companyWebSite",t.location="location",t.stake="stake",t.uptime="uptime",t.voteParticipation="voteParticipation",t))(b||{});const Mt=c.createContext(I()),qt=c.createContext(I()),Ot=c.createContext([]),we=t=>{const e=c.useContext(w);return r.jsx(Ot.Provider,{value:e??[],children:t.children})},ke=t=>{const e=c.useContext(qt);return r.jsx(R,{asyncIterable:e,children:r.jsx(we,{children:t.children})})},xe=t=>{const e=c.useContext(Mt);return r.jsx(R,{asyncIterable:e,children:t.children})};try{we.displayName="VotersParticipationStatesProvider",we.__docgenInfo={description:"",displayName:"VotersParticipationStatesProvider",props:{}}}catch{}try{ke.displayName="VotersParticipationStatsConsumer",ke.__docgenInfo={description:"",displayName:"VotersParticipationStatsConsumer",props:{}}}catch{}try{xe.displayName="NodeSummaryStreamConsumer",xe.__docgenInfo={description:"",displayName:"NodeSummaryStreamConsumer",props:{}}}catch{}const Gt=c.createContext(I()),Ne=t=>{const e=c.useContext(Gt);return r.jsx(R,{asyncIterable:e,children:t.children})};try{Ne.displayName="OperatingSystemPieChartStreamConsumer",Ne.__docgenInfo={description:"",displayName:"OperatingSystemPieChartStreamConsumer",props:{}}}catch{}class x{}const Kt="SubscribeNodeIdentity";class Ee extends x{valueOf(){return Kt}}const Ft="SubscribeLatestBlock";class Ae extends x{valueOf(){return Ft}}const zt="SubscribeVoters";class We extends x{valueOf(){return zt}}const Ut="RequestNodeIdentitySnapshot";class Me extends x{valueOf(){return Ut}}const Jt="RequestBlocksSnapshot";class qe extends x{valueOf(){return Jt}}const Qt="RequestHistogramSnapshot";class Oe extends x{valueOf(){return Qt}}const Zt="RequestVotersSnapshot";class Ge extends x{valueOf(){return Zt}}class Yt{}const Xt="Connect";class Ke extends Yt{valueOf(){return Xt}}const $t="Close";class Fe extends Yt{valueOf(){return $t}}class Er{convert(e){return e.valueOf()}}class Ar{convert(e){if(typeof e!="string")throw new g(typeof e,"string");switch(e){case Kt:return new Ee;case Ft:return new Ae;case zt:return new We;case Ut:return new Me;case Jt:return new qe;case Qt:return new Oe;case Zt:return new Ge;default:throw new g(e,"CappuccinoNodeValidatorRequest")}}}class Wr extends l{constructor(){super(...arguments);s(this,"encoder",new Er);s(this,"decoder",new Ar)}}const eo=new Wr;class Mr{convert(e){return e.valueOf()}}class qr{convert(e){if(typeof e!="string")throw new g(typeof e,"string");switch(e){case Xt:return new Ke;case $t:return new Fe;default:throw new g(e,"CappuccinoNodeValidatorRequest")}}}class Or extends l{constructor(){super(...arguments);s(this,"encoder",new Mr);s(this,"decoder",new qr)}}const to=new Or;class oo{}const K="LifeCycleRequest";class W extends oo{constructor(o){super();s(this,"request");this.request=o}toJson(){return ze.encode(this)}}class Gr{convert(e){return{[K]:to.encode(e.request)}}}class Kr{convert(e){return h(e,K),new W(to.decode(e[K]))}}class Fr extends l{constructor(){super(...arguments);s(this,"encoder",new Gr);s(this,"decoder",new Kr)}}const ze=new Fr,F="NodeValidatorRequest";class ae extends oo{constructor(o){super();s(this,"request");this.request=o}toJson(){return Ue.encode(this)}}class zr{convert(e){return{[F]:eo.encode(e.request)}}}class Ur{convert(e){return h(e,F),new ae(eo.decode(e[F]))}}class Jr extends l{constructor(){super(...arguments);s(this,"encoder",new zr);s(this,"decoder",new Ur)}}const Ue=new Jr;class Qr{convert(e){return new W(e)}}const Zr=new Qr;class Yr{convert(e){return new ae(e)}}const Xr=new Yr;class N{}const z="BlocksSnapshot";class ce extends N{constructor(o){super();s(this,"blocks");this.blocks=o}toJSON(){return Je.encode(this)}}class $r{convert(e){h(e,z);const o=e[z];return new ce(Tt.decode(o))}}class es{convert(e){return{[z]:Tt.encode(e.blocks)}}}class ts extends l{constructor(){super(...arguments);s(this,"encoder",new es);s(this,"decoder",new $r)}}const Je=new ts,U="HistogramSnapshot";class j extends N{constructor(o){super();s(this,"histograms");this.histograms=o}toJSON(){return Qe.encode(this)}}class os{convert(e){return h(e,U),new j(vt.decode(e[U]))}}class rs{convert(e){return{[U]:vt.encode(e.histograms)}}}class ss extends l{constructor(){super(...arguments);s(this,"encoder",new rs);s(this,"decoder",new os)}}const Qe=new ss,J="LatestBlock";class v extends N{constructor(o){super();s(this,"latestBlock");this.latestBlock=o}toJSON(){return Ze.encode(this)}}class ns{convert(e){return h(e,J),new v(Pt.decode(e[J]))}}class as{convert(e){return{[J]:Pt.encode(e.latestBlock)}}}class cs extends l{constructor(){super(...arguments);s(this,"encoder",new as);s(this,"decoder",new ns)}}const Ze=new cs;class ro{constructor(e,o){s(this,"coords");s(this,"country");this.coords=e,this.country=o}toJSON(){return Be.encode(this)}}class is{convert(e){return{coords:Ht.encode(e.coords),country:Le.encode(e.country)}}}class ls{convert(e){return h(e,"coords","country"),new ro(Ht.decode(e.coords),Le.decode(e.country))}}class ds extends l{constructor(){super(...arguments);s(this,"encoder",new is);s(this,"decoder",new ls)}}const Be=new ds,so=new or(new rr(Be),new sr(Be));class no{constructor(e,o,n,a,i,u,d,y){s(this,"publicKey");s(this,"name");s(this,"publicURL");s(this,"company");s(this,"location");s(this,"operatingSystem");s(this,"nodeType");s(this,"networkType");this.publicKey=e,this.name=o,this.publicURL=n,this.company=a,this.location=i,this.operatingSystem=u,this.nodeType=d,this.networkType=y}toJSON(){return L.encode(this)}}class us{convert(e){return{public_key:_t.encode(e.publicKey),name:S.encode(e.name),public_url:Lt.encode(e.publicURL),company:S.encode(e.company),location:so.encode(e.location),operating_system:S.encode(e.operatingSystem),node_type:S.encode(e.nodeType),network_type:S.encode(e.networkType)}}}class ps{convert(e){return h(e,"public_key","name","public_url","company","location","operating_system","node_type","network_type"),new no(_t.decode(e.public_key),S.decode(e.name),Lt.decode(e.public_url),S.decode(e.company),so.decode(e.location),S.decode(e.operating_system),S.decode(e.node_type),S.decode(e.network_type))}}class ms extends l{constructor(){super(...arguments);s(this,"encoder",new us);s(this,"decoder",new ps)}}const L=new ms,ao=new nr(new ar(L),new cr(L)),Q="LatestNodeIdentity";class Ye extends N{constructor(o){super();s(this,"nodeIdentity");this.nodeIdentity=o}toJSON(){return Xe.encode(this)}}class hs{convert(e){return h(e,Q),new Ye(L.decode(e[Q]))}}class ys{convert(e){return{[Q]:L.encode(e.nodeIdentity)}}}class Cs extends l{constructor(){super(...arguments);s(this,"encoder",new ys);s(this,"decoder",new hs)}}const Xe=new Cs,Z="LatestVoters";class ie extends N{constructor(o){super();s(this,"latestVoter");this.latestVoter=o}toJSON(){return $e.encode(this)}}class fs{convert(e){return h(e,Z),new ie(Rt.decode(e[Z]))}}class bs{convert(e){return{[Z]:Rt.encode(e.latestVoter)}}}class Ss extends l{constructor(){super(...arguments);s(this,"encoder",new bs);s(this,"decoder",new fs)}}const $e=new Ss,Y="NodeIdentitySnapshot";class H extends N{constructor(o){super();s(this,"nodes");this.nodes=o}toJSON(){return et.encode(this)}}class gs{convert(e){h(e,Y);const o=e[Y];return new H(ao.decode(o))}}class ws{convert(e){return{[Y]:ao.encode(e.nodes)}}}class ks extends l{constructor(){super(...arguments);s(this,"encoder",new ws);s(this,"decoder",new gs)}}const et=new ks,X="VotersSnapshot";class le extends N{constructor(o){super();s(this,"voters");this.voters=o}toJSON(){return tt.encode(this)}}class xs{convert(e){h(e,X);const o=e[X];return new le(It.decode(o))}}class Ns{convert(e){return{[X]:It.encode(e.voters)}}}class Bs extends l{constructor(){super(...arguments);s(this,"encoder",new Ns);s(this,"decoder",new xs)}}const tt=new Bs;class Ts{convert(e){if(f(e,z))return Je.decode(e);if(f(e,U))return Qe.decode(e);if(f(e,J))return Ze.decode(e);if(f(e,Q))return Xe.decode(e);if(f(e,Z))return $e.decode(e);if(f(e,Y))return et.decode(e);if(f(e,X))return tt.decode(e);throw new k}}class vs{convert(e){if(e instanceof ce)return Je.encode(e);if(e instanceof j)return Qe.encode(e);if(e instanceof v)return Ze.encode(e);if(e instanceof Ye)return Xe.encode(e);if(e instanceof ie)return $e.encode(e);if(e instanceof H)return et.encode(e);if(e instanceof le)return tt.encode(e);throw new k}}class Ps extends l{constructor(){super(...arguments);s(this,"encoder",new vs);s(this,"decoder",new Ts)}}const co=new Ps;class ot{}const $="ConnectionClosed";class rt extends ot{toJSON(){return st.encode(this)}}class Rs{convert(e){if(typeof e!="string")throw new g(typeof e,"string");if(e!==$)throw new g(e,$);return new rt}}class Is{convert(){return $}}class Ds extends l{constructor(){super(...arguments);s(this,"encoder",new Is);s(this,"decoder",new Rs)}}const st=new Ds,ee="ConnectionConnecting";class nt extends ot{toJSON(){return at.encode(this)}}class _s{convert(e){if(typeof e!="string")throw new g(typeof e,"string");if(e!==ee)throw new g(e,ee);return new nt}}class Vs{convert(){return ee}}class js extends l{constructor(){super(...arguments);s(this,"encoder",new Vs);s(this,"decoder",new _s)}}const at=new js,te="ConnectionOpened";class ct extends ot{toJSON(){return it.encode(this)}}class Ls{convert(e){if(typeof e!="string")throw new g(typeof e,"string");if(e!==te)throw new g(e,te);return new ct}}class Hs{convert(){return te}}class Es extends l{constructor(){super(...arguments);s(this,"encoder",new Hs);s(this,"decoder",new Ls)}}const it=new Es;class As{convert(e){if(e===te)return it.decode(e);if(e===$)return st.decode(e);if(e===ee)return at.decode(e);throw new k}}class Ws{convert(e){if(e instanceof ct)return it.encode(e);if(e instanceof rt)return st.encode(e);if(e instanceof nt)return at.encode(e);throw new k}}class Ms extends l{constructor(){super(...arguments);s(this,"encoder",new Ws);s(this,"decoder",new As)}}const lt=new Ms;class dt{}const oe="NodeValidatorResponse";class de extends dt{constructor(o){super();s(this,"response");this.response=o}toJson(){return ut.encode(this)}}class qs{convert(e){return{[oe]:co.encode(e.response)}}}class Os{convert(e){h(e,oe);const o=e[oe];return new de(co.decode(o))}}class Gs extends l{constructor(){super(...arguments);s(this,"encoder",new qs);s(this,"decoder",new Os)}}const ut=new Gs;class pt extends dt{constructor(o){super();s(this,"response");this.response=o}toJson(){return lt.encode(this)}}const re="LifeCycleResponse";class Ks{convert(e){return{[re]:lt.encode(e.response)}}}class Fs{convert(e){return h(e,re),new pt(lt.decode(e[re]))}}class zs extends l{constructor(){super(...arguments);s(this,"encoder",new Ks);s(this,"decoder",new Fs)}}const io=new zs,se="ErrorResponse";class lo extends dt{constructor(o){super();s(this,"error");this.error=o}toJson(){return mt.encode(this)}}class Us{convert(e){return{[se]:Dt.encode(e.error)}}}class Js{convert(e){return h(e,se),new lo(Dt.decode(e[se]))}}class Qs extends l{constructor(){super(...arguments);s(this,"encoder",new Us);s(this,"decoder",new Js)}}const mt=new Qs;class Zs{convert(e){return new de(e)}}const Ys=new Zs;class Xs{convert(e){return new pt(e)}}const $s=new Xs;class en{constructor(e){s(this,"channel");this.channel=e}async send(e){await this.channel.publish(e)}}function gt(t){return new en(t)}function Ce(t){return new Io(t.hash,t.height,t.time,t.numTransactions,t.proposer,t.proposer,t.size,t.fees)}function wt(t){return new no(t.pubkey,t.name,null,t.company.name,new ro(new yr(new Cr(new bt(t.location.coords[0])),new fr(new bt(t.location.coords[1]))),t.location.country),t.operatingSystem,t.nodeType,t.networkType)}class tn{constructor(e,o){s(this,"responseStream");s(this,"requestStream");s(this,"lifecycleResponseSink");s(this,"nodeValidatorResponseSink");s(this,"prng",new ft(qo()));s(this,"latestBlock",Ce(Oo()));s(this,"latestBlocks",C(50));s(this,"latestVoters",C(50));s(this,"histogramBlockTimeData",C(50));s(this,"histogramBlockSizeData",C(50));s(this,"histogramBlockTransactionData",C(50));s(this,"histogramBlockHeightData",C(50));s(this,"isConnected",!1);s(this,"isSubscribedToLatestBlock",!1);s(this,"isSubscribedToVoters",!1);this.requestStream=e,this.responseStream=o,this.lifecycleResponseSink=G(gt(o),$s),this.nodeValidatorResponseSink=G(gt(o),Ys)}get stream(){return this.responseStream}async send(e){await this.requestStream.publish(e)}generateVotersFromBlockDetail(e){const o=new ft(e.time.valueOf()),n=ye.length,a=Math.ceil(n/16),i=new Uint16Array(o.fillBytes(a*2));return new vo(Po.lsb0,new Ro(16,0),n,Array.from(i))}async updateBlockDetails(e){const o=this.latestBlock,n=(e.time.valueOf()-o.time.valueOf())/1e3,a=this.generateVotersFromBlockDetail(e);this.latestBlock=e,this.latestBlocks.put(e),this.latestVoters.put(a),this.histogramBlockTimeData.put(n),this.histogramBlockSizeData.put(e.size),this.histogramBlockTransactionData.put(e.numTransactions),this.histogramBlockHeightData.put(e.height),this.isConnected&&(this.isSubscribedToLatestBlock&&await this.nodeValidatorResponseSink.send(new v(e)),this.isSubscribedToVoters&&this.nodeValidatorResponseSink.send(new ie(a)))}async initializeState(){for await(const e of Go(this.prng))this.updateBlockDetails(Ce(e));await this.nodeValidatorResponseSink.send(new v(this.latestBlock)),await this.nodeValidatorResponseSink.send(new j(new Ct(Array.from(this.histogramBlockTimeData.immutableIterable()),Array.from(this.histogramBlockSizeData.immutableIterable()),Array.from(this.histogramBlockTransactionData.immutableIterable()),Array.from(this.histogramBlockHeightData.immutableIterable())))),this.nodeValidatorResponseSink.send(new H(ye.map(wt)))}async startProcessing(){await this.initializeState(),this.handleRequests(),this.streamBlocks()}async handleRequests(){for await(const e of this.requestStream)await this.handleRequest(e)}async streamBlocks(){const e=this.latestBlock;for await(const o of Ko(this.prng,e.time.valueOf(),e.height)){const n=Ce(o);this.updateBlockDetails(n)}}async handleRequest(e){if(e instanceof W){try{await this.handleLifeCycleRequest(e.request)}catch(o){console.error("failed to handle life cycle request",e,o)}return}if(e instanceof ae){try{await this.handleNodeValidatorRequest(e.request)}catch(o){console.error("failed to handle node validator request",e,o)}return}console.error("unrecognized request type",e)}async handleLifeCycleRequest(e){if(e instanceof Ke){await this.handleConnect();return}if(e instanceof Fe){await this.handleClose();return}}async handleNodeValidatorRequest(e){if(e instanceof Ae){await this.handleSubscribeLatestBlock();return}if(e instanceof Ee){await this.handleSubscribeNodeIdentity();return}if(e instanceof We){await this.handleSubscribeVoters();return}if(e instanceof qe){await this.handleRequestBlocksSnapshot();return}if(e instanceof Oe){await this.handleRequestHistogramSnapshot();return}if(e instanceof Me){await this.handleRequestNodeIdentitySnapshot();return}if(e instanceof Ge){await this.handleRequestVotersSnapshot();return}}async handleConnect(){if(this.isConnected)throw new Error("already connected to WebSocket");this.isConnected=!0,await this.lifecycleResponseSink.send(new nt),await this.lifecycleResponseSink.send(new ct)}async handleClose(){if(!this.isConnected)throw new Error("not connected to WebSocket");this.isConnected=!1,this.isSubscribedToLatestBlock=!1,this.isSubscribedToVoters=!1,await this.lifecycleResponseSink.send(new rt)}async assertIsConnected(){if(!this.isConnected)throw new Error("not connected to WebSocket")}async handleSubscribeLatestBlock(){await this.assertIsConnected(),this.isSubscribedToLatestBlock=!0}async handleSubscribeNodeIdentity(){await this.assertIsConnected()}async handleSubscribeVoters(){await this.assertIsConnected(),this.isSubscribedToVoters=!0}async handleRequestBlocksSnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new ce(Array.from(this.latestBlocks.immutableIterable())))}async handleRequestHistogramSnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new j(new Ct(Array.from(this.histogramBlockTimeData.immutableIterable()),Array.from(this.histogramBlockSizeData.immutableIterable()),Array.from(this.histogramBlockTransactionData.immutableIterable()),Array.from(this.histogramBlockHeightData.immutableIterable()))))}async handleRequestNodeIdentitySnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new H(ye.map(wt)))}async handleRequestVotersSnapshot(){await this.assertIsConnected(),await this.nodeValidatorResponseSink.send(new le(Array.from(this.latestVoters.immutableIterable())))}}const ht="WebSocketError";class on extends ur{constructor(o,n=`websocket error: ${String(o)}`){super(n);s(this,"cause");this.cause=o,Object.freeze(this)}get code(){return ht}}class rn{convert(e){return h(e,"code","message"),lr(e,ht),new on({},Le.decode(e.message))}}class sn extends dr{}class nn extends l{constructor(){super(...arguments);s(this,"encoder",new sn);s(this,"decoder",new rn)}}const an=new nn;ir(ht,an);function cn(t){return new Worker(""+new URL("node_validator_web_worker_api.js-BtyEtQRD.js",import.meta.url).href,{name:t==null?void 0:t.name})}class ln{convert(e){if(e instanceof ae)return Ue.encode(e);if(e instanceof W)return ze.encode(e);throw new k}}class dn{convert(e){if(f(e,F))return Ue.decode(e);if(f(e,K))return ze.decode(e);throw new k}}class un extends l{constructor(){super(...arguments);s(this,"encoder",new ln);s(this,"decoder",new dn)}}const pn=new un;class mn{convert(e){if(e instanceof de)return ut.encode(e);if(e instanceof pt)return io.encode(e);if(e instanceof lo)return mt.encode(e);throw new k}}class hn{convert(e){if(f(e,oe))return ut.decode(e);if(f(e,re))return io.decode(e);if(f(e,se))return mt.decode(e);throw new k}}class yn extends l{constructor(){super(...arguments);s(this,"encoder",new mn);s(this,"decoder",new hn)}}const Cn=new yn;class fn{constructor(e=m(1024),o=m(1024)){s(this,"requestChannel");s(this,"responseChannel");const n=new cn;this.requestChannel=e,this.responseChannel=o,n.addEventListener("message",this.handleMessage.bind(this)),n.addEventListener("messageerror",this.handleMessageError.bind(this)),n.addEventListener("error",this.handleError.bind(this)),bn(n,e)}get stream(){return this.responseChannel}async send(e){this.requestChannel.publish(e)}handleMessage(e){const o=Cn.decode(e.data);this.responseChannel.publish(o)}handleMessageError(){}handleError(){}}async function bn(t,e){for await(const o of e)t.postMessage(pn.encode(o))}const Sn=c.createContext(gn());function gn(){return typeof window<"u"&&"Worker"in window||typeof self<"u"&&"Worker"in self?new fn:new tn(m(1024),m(1024))}async function yt(t,e,o,n,a){await Promise.all([t.blockSizeHistogramStream.publish({blocks:Array.from(e.immutableIterable()),blockSize:Array.from(n.immutableIterable())}),t.blockTimeHistogramStream.publish({blocks:Array.from(e.immutableIterable()),blockTime:Array.from(o.immutableIterable())}),t.blockThroughputHistogramStream.publish({blocks:Array.from(e.immutableIterable()),blockThroughput:Array.from(a.immutableIterable())})])}function uo(t){var e,o;return{publicKey:t.publicKey,name:t.name,companyDetails:{name:t.company,website:null},location:{coords:(e=t.location)!=null&&e.coords?[t.location.coords.lat.valueOf(),t.location.coords.lng.valueOf()]:null,country:((o=t.location)==null?void 0:o.country)??null}}}function wn(t,e){return t.value-e.value}function ue(t,e){const o=new Map;for(const n of t){const a=e(n);a!==null&&o.set(a,(o.get(a)??0)+1)}return Array.from(o.entries()).map(([n,a])=>({label:n,value:a})).sort(wn)}function po(t){return ue(t,e=>e.operatingSystem)}function mo(t){return ue(t,e=>{var o;return((o=e.location)==null?void 0:o.country)??null})}function ho(t){return ue(t,e=>e.networkType)}function yo(t){return ue(t,e=>e.nodeType)}function Co(t,e){const o=Array.from(_(e,a=>Array.from(_(a,Number))));return t.map((a,i)=>{const d=_(o,me=>me[i])[Symbol.iterator](),[y,pe]=Vt(([me,So],go)=>[me+1,So+go],[0,0],d);return{voteParticipation:pe,totalVotes:y}})}function fo(t){const e=t[Symbol.iterator](),o=Vt((a,i)=>{const u=_(i.proposerID,d=>mr(a.keys(),y=>jt(y,d)===0)??d);for(const d of u)a.set(d,(a.get(d)??0)+1);return a},new Map,e),n=Array.from(o.entries()).sort((a,i)=>i[1]-a[1]);return Array.from(_(n,([a,i])=>({proposer:a,count:i})))}const T=50;function kn(){const t=C(T+1),e=C(T+1),o=C(T+1),n=C(T+1),a=C(T+1),i=C(T+1);return{lastBlock:null,latestBlocks:t,blockHeightHistograms:e,blockTimeHistograms:o,blockSizeHistograms:n,blockThroughputHistograms:a,votersBitVecs:i,nodes:[]}}async function xn(t,e,o){const n=t.lastBlock;t.lastBlock=o,t.latestBlocks.put(o.latestBlock),e.latestBlockStream.publish({height:o.latestBlock.height,time:o.latestBlock.time,size:o.latestBlock.size,transactions:o.latestBlock.numTransactions,proposer:o.latestBlock.proposerID}),t.blockHeightHistograms.put(o.latestBlock.height),t.blockSizeHistograms.put(o.latestBlock.size);const a=(o.latestBlock.time.valueOf()-((n==null?void 0:n.latestBlock.time.valueOf())??0))/1e3;t.blockTimeHistograms.put(a),t.blockThroughputHistograms.put(o.latestBlock.size/Math.max(1,a)),await yt(e,t.blockHeightHistograms,t.blockTimeHistograms,t.blockSizeHistograms,t.blockThroughputHistograms),e.latestBlockProducers.publish(fo(t.latestBlocks.immutableIterable()))}async function Nn(t,e,o){var a,i;for(const u of o.blocks){const d=((a=t.lastBlock)==null?void 0:a.latestBlock)??null;t.lastBlock=new v(u),t.latestBlocks.put(u),t.blockHeightHistograms.put(u.height),t.blockSizeHistograms.put(u.size);const y=(u.time.valueOf()-((d==null?void 0:d.time.valueOf())??0))/1e3;t.blockTimeHistograms.put(y),t.blockThroughputHistograms.put(u.size/Math.max(1,y))}await yt(e,t.blockHeightHistograms,t.blockTimeHistograms,t.blockSizeHistograms,t.blockThroughputHistograms);const n=((i=t.lastBlock)==null?void 0:i.latestBlock)??null;n!==null&&e.latestBlockStream.publish({height:n.height,time:n.time,size:n.size,transactions:n.numTransactions,proposer:n.proposerID}),e.latestBlockProducers.publish(fo(t.latestBlocks.immutableIterable()))}async function Bn(t,e,o){for(const n of o.histograms.blockHeights)t.blockHeightHistograms.put(n);for(const n of o.histograms.blockTime)t.blockTimeHistograms.put(n);for(const n of o.histograms.blockSize)t.blockSizeHistograms.put(n);for(const n of pr(t.blockTimeHistograms.immutableIterable(),t.blockSizeHistograms.immutableIterable(),(a,i)=>(i??0)/Math.max(1,a??1)))t.blockThroughputHistograms.put(n);await yt(e,t.blockHeightHistograms,t.blockTimeHistograms,t.blockSizeHistograms,t.blockThroughputHistograms)}async function Tn(t,e,o){t.nodes=o.nodes;const n=po(t.nodes),a=mo(t.nodes),i=ho(t.nodes),u=yo(t.nodes),d=t.nodes.map(uo);await Promise.all([e.nodesSummary.publish(d),e.nodeCoordinates.publish(d),e.pieChartCountries.publish(a),e.pieChartNetworkTypes.publish(i),e.pieChartNodeTypes.publish(u),e.pieChartOperatingSystems.publish(n)])}async function vn(t,e,o){const n=t.nodes.findIndex(pe=>pe.publicKey.toString()===o.nodeIdentity.publicKey.toString());n<0?t.nodes.push(o.nodeIdentity):t.nodes[n]=o.nodeIdentity;const a=po(t.nodes),i=mo(t.nodes),u=ho(t.nodes),d=yo(t.nodes),y=t.nodes.map(uo);await Promise.all([e.nodesSummary.publish(y),e.nodeCoordinates.publish(y),e.pieChartCountries.publish(i),e.pieChartNetworkTypes.publish(u),e.pieChartNodeTypes.publish(d),e.pieChartOperatingSystems.publish(a)])}async function Pn(t,e,o){for(const a of o.voters)t.votersBitVecs.put(a);const n=Co(t.nodes,t.votersBitVecs.immutableIterable());await e.voters.publish(n)}async function Rn(t,e,o){t.votersBitVecs.put(o.latestVoter);const n=Co(t.nodes,t.votersBitVecs.immutableIterable());await e.voters.publish(n)}async function In(t,e,o){if(o instanceof v)return xn(t,e,o);if(o instanceof ce)return Nn(t,e,o);if(o instanceof j)return Bn(t,e,o);if(o instanceof H)return Tn(t,e,o);if(o instanceof Ye)return vn(t,e,o);if(o instanceof le)return Pn(t,e,o);if(o instanceof ie)return Rn(t,e,o)}async function Dn(t,e){const o=kn();for await(const n of e.stream)n instanceof de&&await In(o,t,n.response)}async function _n(t,e){await t.send(new Ke),await e.send(new Ae),await e.send(new Ee),await e.send(new We),await e.send(new Me),await e.send(new qe),await e.send(new Oe),await e.send(new Ge)}function Vn(){return{latestBlockStream:m(4),blockTimeHistogramStream:m(4),blockSizeHistogramStream:m(4),blockThroughputHistogramStream:m(4),nodesSummary:m(4),nodeCoordinates:m(4),pieChartCountries:m(4),pieChartNetworkTypes:m(4),pieChartNodeTypes:m(4),pieChartOperatingSystems:m(4),voters:m(4),latestBlockProducers:m(4)}}const Te=t=>{const e=c.useContext(Sn),o=Vn();return c.useEffect(()=>{const n=G(e,Xr),a=G(e,Zr);return Dn(o,e),_n(a,n),()=>{e.send(new W(new Fe))}}),r.jsx(Do.Provider,{value:o.latestBlockStream,children:r.jsx(Fo.Provider,{value:o.latestBlockProducers,children:r.jsx(_o.Provider,{value:o.blockTimeHistogramStream,children:r.jsx(Vo.Provider,{value:o.blockSizeHistogramStream,children:r.jsx(jo.Provider,{value:o.blockThroughputHistogramStream,children:r.jsx(Mt.Provider,{value:o.nodesSummary,children:r.jsx(Gt.Provider,{value:o.pieChartOperatingSystems,children:r.jsx(At.Provider,{value:o.pieChartNetworkTypes,children:r.jsx(Wt.Provider,{value:o.pieChartNodeTypes,children:r.jsx(Et.Provider,{value:o.pieChartCountries,children:r.jsx(Zo.Provider,{value:o.nodeCoordinates,children:r.jsx(qt.Provider,{value:o.voters,children:t.children})})})})})})})})})})})})};try{Te.displayName="ProvideCappuccinoNodeValidatorStreams",Te.__docgenInfo={description:"",displayName:"ProvideCappuccinoNodeValidatorStreams",props:{}}}catch{}const P=t=>r.jsx("div",{className:"pie-chart-section-title",children:r.jsx(gr,{children:t.children})});try{P.displayName="PieChartSectionTitle",P.__docgenInfo={description:`PieChartSectionTitle is a component that represents the title of a section
of a pie chart. This component is useful for labeling sections of a pie
chart.`,displayName:"PieChartSectionTitle",props:{}}}catch{}const jn={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Åland Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthélemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia, Plurinational State of",BQ:"Bonaire, Sint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"Congo, Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"Côte d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cabo Verde",CW:"Curaçao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czechia",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia, Federated States of",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom of Great Britain and Northern Ireland",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran, Islamic Republic of",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao People's Democratic Republic",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova, Republic of",ME:"Montenegro",MF:"Saint Martin (French part)",MG:"Madagascar",MH:"Marshall Islands",MK:"North Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands, Kingdom of the",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestine, State of",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Réunion",RO:"Romania",RS:"Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena, Ascension and Tristan da Cunha",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten (Dutch part)",SY:"Syrian Arab Republic",SZ:"Eswatini",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Türkiye",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan, Province of China",TZ:"Tanzania, United Republic of",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States of America",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See",VC:"Saint Vincent and the Grenadines",VE:"Venezuela, Bolivarian Republic of",VG:"Virgin Islands (British)",VI:"Virgin Islands (U.S.)",VN:"Viet Nam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function Ln(t){return jn[t]??t}function Hn(t){return{label:Ln(t.label),value:t.value}}const ve=()=>{const t=c.useContext(E),e=c.useContext(w);return t?r.jsx(r.Fragment,{}):r.jsxs(r.Fragment,{children:[r.jsx(P,{children:r.jsx(p,{text:"Countries"})}),r.jsx(ne,{values:e.map(Hn)})]})};try{ve.displayName="CountriesPieChart",ve.__docgenInfo={description:"",displayName:"CountriesPieChart",props:{}}}catch{}const En=t=>r.jsxs(r.Fragment,{children:[r.jsx(p,{text:t.label}),r.jsx(V,{number:t.value})]}),Pe=()=>{const t=c.useContext(E),e=c.useContext(w);return t?r.jsx(r.Fragment,{}):r.jsxs(He.Provider,{value:En,children:[r.jsx(P,{children:r.jsx(p,{text:"Network Types"})}),r.jsx(ne,{values:e})]})};try{Pe.displayName="NetworkTypesPieChart",Pe.__docgenInfo={description:"",displayName:"NetworkTypesPieChart",props:{}}}catch{}const An=t=>r.jsxs(r.Fragment,{children:[r.jsx(p,{text:t.label}),r.jsx(V,{number:t.value})]}),Re=()=>{const t=c.useContext(E),e=c.useContext(w);return t?r.jsx(r.Fragment,{}):r.jsxs(He.Provider,{value:An,children:[r.jsx(P,{children:r.jsx(p,{text:"Node Types"})}),r.jsx(ne,{values:e})]})};try{Re.displayName="NodeTypesPieChart",Re.__docgenInfo={description:"",displayName:"NodeTypesPieChart",props:{}}}catch{}const Wn=()=>{const[t]=c.useContext(A);return t.name===null||t.name===""?r.jsx(p,{text:"-"}):r.jsx(p,{text:t.name})},Mn=()=>{const[t]=c.useContext(A);return r.jsx(Pr,{value:t.publicKey,children:r.jsx(vr,{value:t.publicKey})})},qn=()=>{const[t]=c.useContext(A);return t.companyDetails===null||t.companyDetails.name===null||t.companyDetails.name===""?r.jsx(p,{text:"-"}):r.jsx(p,{text:t.companyDetails.name})},On=()=>{var e;const[t]=c.useContext(A);return t.companyDetails===null||t.companyDetails.website===null||((e=t.companyDetails)==null?void 0:e.website)===""?r.jsx(p,{text:"-"}):t.companyDetails.website?r.jsx(Rr,{href:t.companyDetails.website,target:"_blank",children:r.jsx(p,{text:t.companyDetails.website})}):r.jsx(p,{text:"-"})},Gn=()=>{const[,t]=c.useContext(A);return t===null?r.jsx(p,{text:"?"}):t.totalVotes===0?r.jsx(V,{number:t.voteParticipation}):r.jsxs(r.Fragment,{children:[r.jsx(V,{number:t.voteParticipation})," (",r.jsx(Tr,{percentage:t.voteParticipation/t.totalVotes}),")"]})},bo=t=>r.jsx(Br,{columns:[{label:"Public Key",columnType:b.publicKey,buildCell:t.components[0]},{label:"Name",columnType:b.name,buildCell:t.components[1]},{label:"Company",columnType:b.companyName,buildCell:t.components[2]},{label:"Website",columnType:b.companyWebSite,buildCell:t.components[3]},{label:"Vote Participation",columnType:b.voteParticipation,buildCell:t.components[4]}]}),Ie=t=>{const{numElements:e=20}=t;return r.jsx(w.Provider,{value:Array.from(hr(e)),children:r.jsx(bo,{components:[D,D,D,D,D]})})},De=()=>r.jsx(bo,{components:[Mn,Wn,qn,On,Gn]});function kt(t,e){const[o]=t,[n]=e;return jt(o.publicKey.data,n.publicKey.data)}function Kn(t,e){const[o]=t,[n]=e;return o.name===null&&n.name===null?0:o.name===null?1:n.name===null?-1:o.name.localeCompare(n.name)}function Fn(t,e){const[o]=t,[n]=e;return o.companyDetails===null&&n.companyDetails===null?0:o.companyDetails===null?1:n.companyDetails===null?-1:o.companyDetails.name===null&&n.companyDetails.name===null?0:o.companyDetails.name===null?1:n.companyDetails.name===null?-1:o.companyDetails.name.localeCompare(n.companyDetails.name)}function zn(t,e){const[o]=t,[n]=e;return o.companyDetails===null&&n.companyDetails===null?0:o.companyDetails===null?1:n.companyDetails===null?-1:o.companyDetails.website===null&&n.companyDetails.website===null?0:o.companyDetails.website===null?1:n.companyDetails.website===null?-1:o.companyDetails.website.localeCompare(n.companyDetails.website)}function Un(t,e){const[,o]=t,[,n]=e;return o.voteParticipation-n.voteParticipation}function Jn(t,e){return t.map((o,n)=>[o,e[n]??{totalVotes:0,voteParticipation:0}])}function Qn(t){switch(t){case b.publicKey:return kt;case b.name:return Kn;case b.companyName:return Fn;case b.companyWebSite:return zn;case b.voteParticipation:return Un;default:return kt}}function Zn(t,e){switch(e){case fe.asc:return t;case fe.desc:return(o,n)=>-t(o,n);default:return t}}function Yn(t,e,o){const n=Zn(Qn(e),o);return t.sort(n)}const _e=()=>{const[t,e]=c.useState({sortColumn:b.publicKey,sortDir:fe.asc}),o=c.useContext(E),n=c.useContext(w),a=c.useContext(Ot);if((!n||n instanceof Array&&n.length<=0)&&o)return r.jsx(Ie,{});const i=Jn(n,a),{sortColumn:u,sortDir:d}=t,y=Yn(i,u,d);return r.jsx(xr.Provider,{value:t,children:r.jsx(Nr.Provider,{value:e,children:r.jsx(w.Provider,{value:y,children:r.jsx(De,{})})})})};try{Ie.displayName="NodesSummaryDataTablePlaceholder",Ie.__docgenInfo={description:`NodesSummaryDataTablePlaceholder is a component that renders a placeholder
version of the Node Summary Data Table.`,displayName:"NodesSummaryDataTablePlaceholder",props:{numElements:{defaultValue:null,description:"",name:"numElements",required:!1,type:{name:"number"}}}}}catch{}try{De.displayName="NodesSummaryDataTablePopulated",De.__docgenInfo={description:`NodesSummaryDataTablePopulated is a component that renders the populated
version of the Node Summary Data Table.`,displayName:"NodesSummaryDataTablePopulated",props:{}}}catch{}try{_e.displayName="NodesSummaryDataTable",_e.__docgenInfo={description:`NodeSummaryDataTable handles the display of the Node Summary Data Table.
Additionally, it handles the sorting of the data via the manipulation of the
headers of the table data.`,displayName:"NodesSummaryDataTable",props:{}}}catch{}const Xn=t=>r.jsxs(r.Fragment,{children:[r.jsx(p,{text:t.label}),r.jsx(V,{number:t.value})]}),Ve=()=>{const t=c.useContext(E),e=c.useContext(w);return t?r.jsx(r.Fragment,{}):r.jsxs(He.Provider,{value:Xn,children:[r.jsx(P,{children:r.jsx(p,{text:"Operating System"})}),r.jsx(ne,{values:e})]})};try{Ve.displayName="OperatingSystemPieChart",Ve.__docgenInfo={description:"",displayName:"OperatingSystemPieChart",props:{}}}catch{}const je=t=>r.jsxs(Jo,{page:Qo.nodes,children:[r.jsx(kr,{}),r.jsxs("div",{...t,className:Sr(t.className,"node-validator-grid edge-margin"),children:[r.jsx(Lo,{children:r.jsx(Dr,{className:"latest-block"})}),r.jsx(zo,{children:r.jsx(Uo,{className:"latest-block-producers"})}),r.jsx(M,{className:"block-time-histogram",children:r.jsx(Ho,{children:r.jsx(_r,{})})}),r.jsx(M,{className:"block-size-histogram",children:r.jsx(Eo,{children:r.jsx(Ir,{})})}),r.jsx(M,{className:"throughput-histogram",children:r.jsx(Ao,{children:r.jsx(Vr,{})})}),r.jsx(B,{className:"cdn",children:r.jsxs(St,{children:[r.jsxs("div",{children:[r.jsx("div",{children:r.jsx(p,{text:"CDN Status"})}),r.jsx("div",{children:r.jsx(p,{text:"Online"})})]}),r.jsx("div",{})]})}),r.jsxs(B,{className:"network-map",children:[r.jsxs(St,{children:[r.jsx(p,{text:"Network Map"}),r.jsx("div",{})]}),r.jsx(Yo,{children:r.jsx(Xo,{children:r.jsxs($o,{children:[r.jsx(br,{}),r.jsx(er,{children:r.jsx(tr,{})})]})})})]}),r.jsx(B,{className:"countries",children:r.jsx(be,{children:r.jsx(ve,{})})}),r.jsx(B,{className:"network-types",children:r.jsx(Se,{children:r.jsx(Pe,{})})}),r.jsx(B,{className:"node-types",children:r.jsx(ge,{children:r.jsx(Re,{})})}),r.jsx(B,{className:"operating-systems",children:r.jsx(Ne,{children:r.jsx(Ve,{})})}),r.jsx(M,{className:"nodes",children:r.jsx(ke,{children:r.jsx(xe,{children:r.jsx(_e,{})})})})]}),r.jsx(wr,{})]});try{je.displayName="NodesPage",je.__docgenInfo={description:"NodesPage is a component that renders the Nodes page.",displayName:"NodesPage",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const $n=t=>r.jsxs(r.Fragment,{children:[r.jsx(Wo,{}),r.jsx(xo,{children:r.jsx(No,{pathResolver:new Mo,children:r.jsx(Te,{children:r.jsx(je,{...t})})})})]}),Mc={title:"Pages/Nodes",component:$n,parameters:{layout:"fullscreen"}},q={argTypes:{}};var xt,Nt,Bt;q.parameters={...q.parameters,docs:{...(xt=q.parameters)==null?void 0:xt.docs,source:{originalSource:`{
  argTypes: {}
}`,...(Bt=(Nt=q.parameters)==null?void 0:Nt.docs)==null?void 0:Bt.source}}};const qc=["Nodes"];export{q as Nodes,qc as __namedExportsOrder,Mc as default};
