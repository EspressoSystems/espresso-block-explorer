var Gt=Object.defineProperty;var zt=(r,e,t)=>e in r?Gt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var o=(r,e,t)=>zt(r,typeof e!="symbol"?e+"":e,t);import{R as rr,j as Mt}from"./iframe-nNwJoZIu.js";import{U as C}from"./UnimplementedError-N0odIfDD.js";import{h as T,u as Bo,b as z,s as To}from"./array_buffer-CitSjtn6.js";import{n as Ht}from"./url-BLYalvQP.js";import{T as l,e as i,b as d,N as Ao,s as p,f as Do,g as Po,A as D,l as P,m as O,C as g,h as Lt,q as Jt,I as L,k as or,t as E,v as Qt,w as k,x as I,d as xe,B as N,r as _,c as R,a as Se,u as Oo,y as ke,j as Ut}from"./string-BI8AIx1I.js";import{M as jt}from"./MissingElementError-BiJAxgGE.js";import{n as c,b as q,d as G}from"./base64-r9vyOGQT.js";import{I as M,m as No}from"./monetary_value-Dof17hnG.js";import{t as u,T as S}from"./TaggedBase64-D-xwfkqv.js";import{m as Vt}from"./functional-C2YPzjZP.js";import{g as x}from"./generateFakeData-B0CdGtRj.js";import{f as be,e as ee,g as $t,h as fe,t as Ce,i as qo,j as oe,k as Fo,r as Wo,l as j,n as Kt,m as W,o as re,p as Yt,q as Me,s as Xt,v as Eo,w as He,x as Le,y as Zt}from"./LoadingProvider-BhcSkREB.js";import"./FetchError-BkM_RKT_.js";import{N as es}from"./NotFoundError-D156Q_Lb.js";class tr{constructor(e,t,s){o(this,"r");o(this,"s");o(this,"v");this.r=e,this.s=t,this.v=s}toJSON(){return sr.encode(this)}}class rs{convert(e){return d(e,"r","s","v"),new tr(T.decode(e.r),T.decode(e.s),c.decode(e.v))}}class os{convert(e){return i(e,tr),{r:T.encode(e.r),s:T.encode(e.s),v:c.encode(e.v)}}}class ts extends l{constructor(){super(...arguments);o(this,"encoder",new os);o(this,"decoder",new rs)}}const sr=new ts;class cr{constructor(e,t){o(this,"account");o(this,"amount");this.account=e,this.amount=t}toJSON(){return nr.encode(this)}}class ss{convert(e){return d(e,"account","amount"),new cr(T.decode(e.account),T.decode(e.amount))}}class cs{convert(e){return i(e,cr),{account:T.encode(e.account),amount:T.encode(e.amount)}}}class ns extends l{constructor(){super(...arguments);o(this,"encoder",new cs);o(this,"decoder",new ss)}}const nr=new ns;class ar{constructor(e,t,s){o(this,"number");o(this,"timestamp");o(this,"hash");this.number=e,this.timestamp=t,this.hash=s}toJSON(){return Ue.encode(this)}}class as{convert(e){return d(e,"number","timestamp","hash"),new ar(c.decode(e.number),p.decode(e.timestamp),p.decode(e.hash))}}class ds{convert(e){return i(e,ar),{number:c.encode(e.number),timestamp:p.encode(e.timestamp),hash:p.encode(e.hash)}}}class is extends l{constructor(){super(...arguments);o(this,"encoder",new ds);o(this,"decoder",new as)}}const Ue=new is,Go=new Ao(new Do(Ue),new Po(Ue));class dr{constructor(e){o(this,"bytes");this.bytes=e}toJSON(){return ir.encode(this)}}class ls{convert(e){return d(e,"bytes"),new dr(Bo.decode(e.bytes))}}class us{convert(e){return i(e,dr),{bytes:Bo.encode(e.bytes)}}}class hs extends l{constructor(){super(...arguments);o(this,"encoder",new us);o(this,"decoder",new ls)}}const ir=new hs;class lr{constructor(e,t,s,n,a,h,m,f,b,y){o(this,"height");o(this,"timestamp");o(this,"l1_head");o(this,"l1_finalized");o(this,"payload_commitment");o(this,"ns_table");o(this,"block_merkle_root");o(this,"fee_merkle_root");o(this,"builder_signature");o(this,"fee_info");this.height=e,this.timestamp=t,this.l1_head=s,this.l1_finalized=n,this.payload_commitment=a,this.ns_table=h,this.block_merkle_root=m,this.fee_merkle_root=f,this.builder_signature=b,this.fee_info=y}toJSON(){return F.encode(this)}}class ps{convert(e){return d(e,"height","timestamp","l1_head","l1_finalized","payload_commitment","ns_table","block_merkle_root","fee_merkle_root","builder_signature","fee_info"),new lr(c.decode(e.height),c.decode(e.timestamp),c.decode(e.l1_head),Go.decode(e.l1_finalized),q.decode(e.payload_commitment),ir.decode(e.ns_table),u.decode(e.block_merkle_root),u.decode(e.fee_merkle_root),sr.decode(e.builder_signature),nr.decode(e.fee_info))}}class ms{convert(e){return i(e,lr),{height:c.encode(e.height),timestamp:c.encode(e.timestamp),l1_head:c.encode(e.l1_head),l1_finalized:Go.encode(e.l1_finalized),payload_commitment:q.encode(e.payload_commitment),ns_table:ir.encode(e.ns_table),block_merkle_root:u.encode(e.block_merkle_root),fee_merkle_root:u.encode(e.fee_merkle_root),builder_signature:sr.encode(e.builder_signature),fee_info:nr.encode(e.fee_info)}}}class ws extends l{constructor(){super(...arguments);o(this,"encoder",new ms);o(this,"decoder",new ps)}}const F=new ws;class ne{constructor(e,t){o(this,"vm");o(this,"payload");this.vm=e,this.payload=t}toJSON(){return J.encode(this)}}class fs{convert(e){return d(e,"vm","payload"),new ne(c.decode(e.vm),q.decode(e.payload))}}class Cs{convert(e){return i(e,ne),{vm:c.encode(e.vm),payload:q.encode(e.payload)}}}class bs extends l{constructor(){super(...arguments);o(this,"encoder",new Cs);o(this,"decoder",new fs)}}const J=new bs,zo=new D(new P(J),new O(J));class ur{constructor(e){o(this,"transaction_nmt");this.transaction_nmt=e}toJSON(){return ae.encode(this)}}class gs{convert(e){return d(e,"transaction_nmt"),new ur(zo.decode(e.transaction_nmt))}}class ys{convert(e){return i(e,ur),{transaction_nmt:zo.encode(e.transaction_nmt)}}}class vs extends l{constructor(){super(...arguments);o(this,"encoder",new ys);o(this,"decoder",new gs)}}const ae=new vs;class hr{constructor(e,t,s,n,a){o(this,"header");o(this,"payload");o(this,"hash");o(this,"size");o(this,"numTransactions");this.header=e,this.payload=t,this.hash=s,this.size=n,this.numTransactions=a}toJSON(){return Mo.encode(this)}}class Es{convert(e){return d(e,"header","payload","hash","size","num_transactions"),new hr(F.decode(e.header),ae.decode(e.payload),u.decode(e.hash),c.decode(e.size),c.decode(e.num_transactions))}}class xs{convert(e){return i(e,hr),{header:F.encode(e.header),payload:ae.encode(e.payload),hash:u.encode(e.hash),size:c.encode(e.size),num_transactions:c.encode(e.numTransactions)}}}class Ss extends g{constructor(){super(...arguments);o(this,"encoder",new xs);o(this,"decoder",new Es)}}const Mo=new Ss;class pr{constructor(e,t,s,n,a){o(this,"header");o(this,"hash");o(this,"size");o(this,"num_transactions");o(this,"proposer_id");this.header=e,this.hash=t,this.size=s,this.num_transactions=n,this.proposer_id=a}toJSON(){return je.encode(this)}}class ks{convert(e){return d(e,"header","hash","size","num_transactions","proposer_id"),new pr(F.decode(e.header),u.decode(e.hash),c.decode(e.size),c.decode(e.num_transactions),z.decode(e.proposer_id))}}class Is{convert(e){return i(e,pr),{header:F.encode(e.header),hash:u.encode(e.hash),size:c.encode(e.size),num_transactions:c.encode(e.num_transactions),proposer_id:z.encode(e.proposer_id)}}}class _s extends l{constructor(){super(...arguments);o(this,"encoder",new Is);o(this,"decoder",new ks)}}const je=new _s,Rs=new D(new P(je),new O(je));class mr{constructor(e,t,s,n){o(this,"hash");o(this,"header");o(this,"offset");o(this,"transaction");this.hash=e,this.header=t,this.offset=s,this.transaction=n}toJSON(){return Ve.encode(this)}}class Bs{convert(e){return d(e,"hash","header","offset","transaction"),new mr(u.decode(e.hash),F.decode(e.header),c.decode(e.offset),J.decode(e.transaction))}}class Ts{convert(e){return i(e,mr),{hash:u.encode(e.hash),header:F.encode(e.header),offset:c.encode(e.offset),transaction:J.encode(e.transaction)}}}class As extends l{constructor(){super(...arguments);o(this,"encoder",new Ts);o(this,"decoder",new Bs)}}const Ve=new As,xo=new D(new P(Ve),new O(Ve));class Ds{convert(e){if(!Jt(e))throw new L(typeof e,"boolean");return e}}class Ps{convert(e){return Lt(e,"boolean"),e}}class Os extends l{constructor(){super(...arguments);o(this,"encoder",new Ps);o(this,"decoder",new Ds)}}const de=new Os;class ge{constructor(e){o(this,"leaf_commit");this.leaf_commit=e}toJSON(){return wr.encode(this)}}class Ns{convert(e){return d(e,"leaf_commit"),new ge(u.decode(e.leaf_commit))}}class qs{convert(e){return i(e,ge),{leaf_commit:u.encode(e.leaf_commit)}}}class Fs extends l{constructor(){super(...arguments);o(this,"encoder",new qs);o(this,"decoder",new Ns)}}const wr=new Fs;class Ws{convert(e){if(!or(e))throw new L(typeof e,"string");const t=new Date(e);if(Number.isNaN(t.valueOf()))throw new L("NaN","number");return t}}class Gs{convert(e){return i(e,Date),e.toISOString()}}class zs extends l{constructor(){super(...arguments);o(this,"encoder",new Gs);o(this,"decoder",new Ws)}}const H=new zs;class Ho{constructor(e,t){o(this,"width");o(this,"index");this.width=e,this.index=t}toJSON(){return fr.encode(this)}}class Ms{convert(e){return d(e,"width","index"),new Ho(c.decode(e.width),c.decode(e.index))}}class Hs{convert(e){return i(e,Ho),{width:c.encode(e.width),index:c.encode(e.index)}}}class Ls extends l{constructor(){super(...arguments);o(this,"encoder",new Hs);o(this,"decoder",new Ms)}}const fr=new Ls;class se{static get lsb0(){return Qs}static get msb0(){return js}valueOf(){return this.toString()}toJSON(){return this.toString()}}const Lo="bitvec::order::Lsb0",Jo="bitvec::order::Msb0";class Js extends se{toString(){return Lo}}const Qs=new Js;class Us extends se{toString(){return Jo}}const js=new Us;class Vs{convert(e){if(typeof e!="string")throw new L(typeof e,"string");switch(e){case Lo:return se.lsb0;case Jo:return se.msb0;default:throw new L(e,"CappuccinoAPIBitVecOrder")}}}class $s{convert(e){return e.toString()}}class Ks extends l{constructor(){super(...arguments);o(this,"encoder",new $s);o(this,"decoder",new Vs)}}const Qo=new Ks;class Uo{constructor(e,t,s,n){o(this,"order");o(this,"head");o(this,"bits");o(this,"data");this.order=e,this.head=t,this.bits=s,this.data=n}getBitVecIndexIterable(){return this.order===se.lsb0?new oc(this.head.width,this.bits):new sc(this.head.width,this.bits)}[Symbol.iterator](){const e=this.getBitVecIndexIterable();return Vt(e,t=>ec(this.data,t))[Symbol.iterator]()}toJSON(){return ce.encode(this)}}class Ys{convert(e){return d(e,"order","head","bits","data"),new Uo(Qo.decode(e.order),fr.decode(e.head),c.decode(e.bits),q.decode(e.data))}}class Xs{convert(e){return i(e,Uo),{order:Qo.encode(e.order),head:fr.encode(e.head),bits:c.encode(e.bits),data:q.encode(e.data)}}}class Zs extends l{constructor(){super(...arguments);o(this,"encoder",new Xs);o(this,"decoder",new Ys)}}const ce=new Zs,gi=new D(new P(ce),new O(ce));function ec(r,e){return(r[e.bucket]>>e.bitOffset&1)===1}class jo{constructor(e,t){o(this,"bucket");o(this,"bitOffset");this.bucket=e,this.bitOffset=t}}function Vo(r){switch(E(r===8||r===16||r===32,"bit width should be a power of two that is supported"),r){case 8:return 3;case 16:return 4;case 32:return 5;default:throw new C}}class rc{constructor(e,t){o(this,"totalBits");o(this,"bitWidthMask");o(this,"bitWidthShift");o(this,"offset",0);this.totalBits=t;const s=Vo(e);this.bitWidthMask=e-1,this.bitWidthShift=s}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,t=this.offset&this.bitWidthMask;return this.offset+=1,{done:!1,value:new jo(e,t)}}}class oc{constructor(e,t){o(this,"bitWidth");o(this,"totalBits");this.bitWidth=e,this.totalBits=t}[Symbol.iterator](){return new rc(this.bitWidth,this.totalBits)}}class tc{constructor(e,t){o(this,"bitWidth");o(this,"totalBits");o(this,"bitWidthMask");o(this,"bitWidthShift");o(this,"offset",0);this.bitWidth=e,this.totalBits=t;const s=Vo(e);this.bitWidthMask=e-1,this.bitWidthShift=s}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,t=this.bitWidth-1-(this.offset&this.bitWidthMask);return this.offset+=1,{done:!1,value:new jo(e,t)}}}class sc{constructor(e,t){o(this,"bitWidth");o(this,"totalBits");this.bitWidth=e,this.totalBits=t}[Symbol.iterator](){return new tc(this.bitWidth,this.totalBits)}}class $o{constructor(e,t){o(this,"signature");o(this,"bitvec");this.signature=e,this.bitvec=t}toJSON(){return $e.encode(this)}}class cc{convert(e){if(!Qt(e)||e.length!==2)throw new L(typeof e,"Array");return new $o(u.decode(e[0]),ce.decode(e[1]))}}class nc{convert(e){return i(e,$o),[u.encode(e.signature),ce.encode(e.bitvec)]}}class ac extends l{constructor(){super(...arguments);o(this,"encoder",new nc);o(this,"decoder",new cc)}}const $e=new ac,Ko=new Ao(new Do($e),new Po($e));class ye{constructor(e,t,s,n,a,h){o(this,"data");o(this,"vote_commitment");o(this,"view_number");o(this,"signatures");o(this,"is_genesis");o(this,"_pd");this.data=e,this.vote_commitment=t,this.view_number=s,this.signatures=n,this.is_genesis=a,this._pd=h}toJSON(){return ie.encode(this)}}class dc{convert(e){return d(e,"data","vote_commitment","view_number","signatures","is_genesis","_pd"),new ye(wr.decode(e.data),u.decode(e.vote_commitment),c.decode(e.view_number),Ko.decode(e.signatures),de.decode(e.is_genesis),null)}}class ic{convert(e){return i(e,ye),{data:wr.encode(e.data),vote_commitment:u.encode(e.vote_commitment),view_number:c.encode(e.view_number),signatures:Ko.encode(e.signatures),is_genesis:de.encode(e.is_genesis),_pd:null}}}class lc extends l{constructor(){super(...arguments);o(this,"encoder",new ic);o(this,"decoder",new dc)}}const ie=new lc;class Cr{constructor(e,t,s,n,a,h,m,f){o(this,"view_number");o(this,"justify_qc");o(this,"parent_commitment");o(this,"block_header");o(this,"block_payload");o(this,"rejected");o(this,"timestamp");o(this,"proposer_id");this.view_number=e,this.justify_qc=t,this.parent_commitment=s,this.block_header=n,this.block_payload=a,this.rejected=h,this.timestamp=m,this.proposer_id=f}toJSON(){return br.encode(this)}}class uc{convert(e){return d(e,"view_number","justify_qc","parent_commitment","block_header","block_payload","rejected","timestamp","proposer_id"),new Cr(c.decode(e.view_number),ie.decode(e.justify_qc),u.decode(e.parent_commitment),F.decode(e.block_header),ae.decode(e.block_payload),q.decode(e.rejected),c.decode(e.timestamp),T.decode(e.proposer_id))}}class hc{convert(e){return i(e,Cr),{view_number:c.encode(e.view_number),justify_qc:ie.encode(e.justify_qc),parent_commitment:u.encode(e.parent_commitment),block_header:F.encode(e.block_header),block_payload:ae.encode(e.block_payload),rejected:q.encode(e.rejected),timestamp:c.encode(e.timestamp),proposer_id:T.encode(e.proposer_id)}}}class pc extends l{constructor(){super(...arguments);o(this,"encoder",new hc);o(this,"decoder",new uc)}}const br=new pc;class gr{constructor(e,t){o(this,"leaf");o(this,"qc");this.leaf=e,this.qc=t}toJSON(){return Yo.encode(this)}}class mc{convert(e){return d(e,"leaf","qc"),new gr(br.decode(e.leaf),ie.decode(e.qc))}}class wc{convert(e){return i(e,gr),{leaf:br.encode(e.leaf),qc:ie.encode(e.qc)}}}class fc extends l{constructor(){super(...arguments);o(this,"encoder",new wc);o(this,"decoder",new mc)}}const Yo=new fc;class le{}class yr extends le{toJSON(){return vr.encode(this)}}class Cc{convert(e){if(!or(e)||e!=="Empty")throw new M;return new yr}}class bc{convert(e){return i(e,yr),"Empty"}}class gc extends l{constructor(){super(...arguments);o(this,"encoder",new bc);o(this,"decoder",new Cc)}}const vr=new gc;class Er extends le{constructor(t,s,n){super();o(this,"value");o(this,"pos");o(this,"elem");this.value=t,this.pos=s,this.elem=n}toJSON(){return xr.encode(this)}}class yc{convert(e){d(e,"Leaf");const t=e.Leaf;return d(t,"value","pos","elem"),new Er(u.decode(t.value),u.decode(t.pos),u.decode(t.elem))}}class vc{convert(e){return i(e,Er),{Leaf:{value:u.encode(e.value),pos:u.encode(e.pos),elem:u.encode(e.elem)}}}}class Ec extends g{constructor(){super(...arguments);o(this,"encoder",new vc);o(this,"decoder",new yc)}}const xr=new Ec;class Sr extends le{constructor(t){super();o(this,"value");this.value=t}toJSON(){return kr.encode(this)}}class xc{convert(e){d(e,"ForgettenSubtree");const t=e.ForgettenSubtree;return d(t,"value"),new Sr(u.decode(t.value))}}class Sc{convert(e){return i(e,Sr),{ForgettenSubtree:{value:u.encode(e.value)}}}}class kc extends g{constructor(){super(...arguments);o(this,"encoder",new Sc);o(this,"decoder",new xc)}}const kr=new kc;class Ie extends le{constructor(t,s){super();o(this,"value");o(this,"children");this.value=t,this.children=s}toJSON(){return Ir.encode(this)}}class Ic{convert(e){d(e,"Branch");const t=e.Branch;return d(t,"value","children"),new Ie(u.decode(t.value),_e.decode(t.children))}}class _c{convert(e){return i(e,Ie),{Branch:{value:u.encode(e.value),children:_e.encode(e.children)}}}}class Rc extends l{constructor(){super(...arguments);o(this,"encoder",new _c);o(this,"decoder",new Ic)}}const Ir=new Rc;class Bc{convert(e){if(k(e,"Leaf",I))return xr.decoder.convert(e);if(k(e,"Branch",I))return Ir.decoder.convert(e);if(k(e,"ForgettenSubtree",I))return kr.decoder.convert(e);if(or(e))return vr.decoder.convert(e);throw new M}}class Tc{convert(e){if(i(e,le),e instanceof Er)return xr.encode(e);if(e instanceof Ie)return Ir.encode(e);if(e instanceof Sr)return kr.encode(e);if(e instanceof yr)return vr.encode(e);throw new M}}class Ac extends l{constructor(){super(...arguments);o(this,"encoder",new Tc);o(this,"decoder",new Bc)}}const So=new Ac,_e=new D(new P(So),new O(So));class _r{constructor(e,t){o(this,"pos");o(this,"proof");this.pos=e,this.proof=t}toJSON(){return Rr.encode(this)}}class Dc{convert(e){return d(e,"pos","proof"),new _r(u.decode(e.pos),_e.decode(e.proof))}}class Pc{convert(e){return i(e,_r),{pos:u.encode(e.pos),proof:_e.encode(e.proof)}}}class Oc extends l{constructor(){super(...arguments);o(this,"encoder",new Pc);o(this,"decoder",new Dc)}}const Rr=new Oc;class Br{constructor(e,t,s,n,a){o(this,"transaction");o(this,"block_hash");o(this,"proof");o(this,"height");o(this,"hash");this.transaction=e,this.block_hash=t,this.proof=s,this.height=n,this.hash=a}toJSON(){return Xo.encode(this)}}class Nc{convert(e){return d(e,"transaction","block_hash","proof","height","hash"),new Br(J.decoder.convert(e.transaction),u.decode(e.block_hash),Rr.decoder.convert(e.proof),c.decode(e.height),u.decode(e.hash))}}class qc{convert(e){return i(e,Br),{transaction:J.encode(e.transaction),block_hash:u.encode(e.block_hash),proof:Rr.encode(e.proof),height:c.encode(e.height),hash:u.encode(e.hash)}}}class Fc extends l{constructor(){super(...arguments);o(this,"encoder",new qc);o(this,"decoder",new Nc)}}const Xo=new Fc;function Re(r){return new lr(r.height,r.time.valueOf()/1e3,0,new ar(0,"00","00"),[],new dr(new ArrayBuffer(0)),new S("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new S("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new tr(new ArrayBuffer(0),new ArrayBuffer(0),0),new cr(new ArrayBuffer(0),new ArrayBuffer(0)))}async function Wc(r){return new hr(Re(r),new ur(await oe(W(r.transactions,async e=>new ne(e.tree.namespace,Array.from(new Uint8Array(e.tree.data)))))),new S("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions)}function Gc(r){return new pr(Re(r),new S("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions,r.proposer)}function zc(r){const e=r.transactions,t=Re(r);return W(e,async s=>new mr(s.hash,t,s.index,new ne(s.tree.namespace,Array.from(new Uint8Array(s.tree.data)))))}async function*Mc(r){const e=Re(r),t=r.transactions;yield*W(t,async s=>new Br(new ne(s.tree.namespace,Array.from(new Uint8Array(s.tree.data))),new S("BLOCK",new Uint8Array([0,0,0,0]).buffer),new _r(new S("POS",new Uint8Array([0,0,0,0]).buffer),[new Ie(new S("EMPTY",new Uint8Array([0,0,0,0]).buffer),[])]),e.height,new S("COMMIT",s.tree.data.slice(0,32))))}class Hc{async getLeafFromHeight(e){const t=await this.getBlockFromHeight(e);return new gr(new Cr(e,new ye(new ge(new S("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new S("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null),new S("LEAF",new Uint8Array([0,0,0,0]).buffer),t.header,t.payload,[],t.header.timestamp,t.header.fee_info.account),new ye(new ge(new S("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new S("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null))}async getTransactionFromHeightAndOffset(e,t){const s=await be(ee(x(),e)),n=Mc(s);return await $t(fe(n,t))}async getBlockSummaries(e,t){const s=ee(x(),e),n=Ce(s,t-e),a=qo(n,async h=>Gc(h));return await oe(a)}async getBlockFromHeight(e){const t=ee(x(),e),s=await be(t);return Wc(s)}async*streamTransactionSummaries(e){const t=Fo(x(),a=>a.height<=e),s=Wo(t);yield*j(s,a=>re(zc(a)))}async getTransactionSummaryRange(e,t,s){const n=this.streamTransactionSummaries(e),a=ee(n,t),h=Ce(a,s);return await oe(h)}async getTransactionSummaryRangeForRollup(e,t,s,n){const a=this.streamTransactionSummaries(t),h=Kt(a,b=>b.transaction.vm===e),m=ee(h,s),f=Ce(m,n);return await oe(f)}}class ue extends N{constructor(t,s,n){super(n);o(this,"response");o(this,"status");this.status=t,this.response=s}toJSON(){return Zo.convert(this)}}class Be{convert(e){return i(e,ue),{...xe.convert(e),status:e.status}}}const Zo=new Be,Tr="BadResponseClientError";class Lc extends ue{constructor(e,t,s="bad server response: client error"){super(e,t,s),Object.freeze(this)}get code(){return Tr}toJSON(){return et.encode(this)}}class Jc{convert(e){return d(e,"code","message","status"),R(e,Tr),new Lc(Number(e.status),null,p.decode(e.message))}}class Qc extends Be{}class Uc extends l{constructor(){super(...arguments);o(this,"encoder",new Qc);o(this,"decoder",new Jc)}}const et=new Uc;_(Tr,et);const Ar="BadResponseError";class jc extends ue{constructor(e,t,s="bad server response"){super(e,t,s),Object.freeze(this)}get code(){return Ar}toJSON(){return rt.encode(this)}}class Vc{convert(e){return d(e,"code","message","status"),R(e,Ar),new jc(Number(e.status),null,p.decode(e.message))}}class $c extends Be{}class Kc extends l{constructor(){super(...arguments);o(this,"encoder",new $c);o(this,"decoder",new Vc)}}const rt=new Kc;_(Ar,rt);class Yc extends ue{constructor(e,t,s="bad server response: server error"){super(e,t,s),Object.freeze(this)}get code(){return Dr}}const Dr="BadResponseServerError";class Xc{convert(e){return d(e,"code","message","status"),R(e,Dr),new Yc(Number(e.status),null,p.decode(e.message))}}class Zc extends Be{}class en extends l{constructor(){super(...arguments);o(this,"encoder",new Zc);o(this,"decoder",new Xc)}}const rn=new en;_(Dr,rn);const Pr="ChannelClosedError";class on extends N{constructor(e="channel closed"){super(e),Object.freeze(this)}get code(){return Pr}}class tn{convert(e){return d(e,"code","message"),R(e,Pr),new on(p.decode(e.message))}}class sn extends Se{}class cn extends l{constructor(){super(...arguments);o(this,"encoder",new sn);o(this,"decoder",new tn)}}const nn=new cn;_(Pr,nn);class Or extends N{constructor(e="completer has already been completed"){super(e),Object.freeze(this)}get code(){return ot}}const ot="CompleterAlreadyCompletedError";class an{convert(e){return d(e,"code","message"),R(e,ot),new Or(p.decode(e.message))}}class dn extends Se{}class ln extends l{constructor(){super(...arguments);o(this,"encoder",new dn);o(this,"decoder",new an)}}const un=new ln;_(Or.name,un);const Nr="InvalidStringValueError";class tt extends N{constructor(t,s,n=`invalid string value: have "${t}", want "${s}"`){super(n);o(this,"have");o(this,"want");this.have=t,this.want=s,Object.freeze(this)}toJSON(){return st.encode(this)}get code(){return Nr}}class hn{convert(e){return d(e,"code","have","want","message"),R(e,Nr),new tt(p.decode(e.have),p.decode(e.want),p.decode(e.message))}}class pn{convert(e){return i(e,tt),{...xe.convert(e),have:p.encode(e.have),want:p.encode(e.want)}}}class mn extends l{constructor(){super(...arguments);o(this,"encoder",new pn);o(this,"decoder",new hn)}}const st=new mn;_(Nr,st);const qr="NoCompleterFoundForRequestID";class ve extends N{constructor(t,s=`no completer found for request id "${t}"`){super(s);o(this,"requestID");this.requestID=t,Object.freeze(this)}toJSON(){return ct.encode(this)}get code(){return qr}}class wn{convert(e){return d(e,"code","requestID","message"),R(e,qr),new ve(Oo.decode(e.requestID),p.decode(e.message))}}class fn{convert(e){return i(e,ve),{...xe.convert(e),requestID:Oo.encode(e.requestID)}}}class Cn extends l{constructor(){super(...arguments);o(this,"encoder",new fn);o(this,"decoder",new wn)}}const ct=new Cn;_(qr,ct);const Fr="NoURLProvidedError";class bn extends N{constructor(e="no url provided"){super(e),Object.freeze(this)}get code(){return Fr}}class gn{convert(e){return d(e,"code","message"),R(e,Fr),new bn(p.decode(e.message))}}class yn extends Se{}class vn extends l{constructor(){super(...arguments);o(this,"encoder",new yn);o(this,"decoder",new gn)}}const En=new vn;_(Fr,En);const Wr="QUERY_ERROR";class xn extends N{constructor(t,s="missing element"){super(s);o(this,"error");this.error=t,Object.freeze(this)}get code(){return Wr}}class Sn{convert(e){return d(e,"code","error","message"),R(e,Wr),new xn(it.decode(e.error),p.decode(e.message))}}class kn{convert(e){return{code:e.code,error:it.encode(e.error),message:p.encode(e.message)}}}class In extends l{constructor(){super(...arguments);o(this,"encoder",new kn);o(this,"decoder",new Sn)}}const _n=new In;class Gr{}const zr="NotFound";class nt extends Gr{constructor(){super(),Object.freeze(this)}valueOf(){return zr}toJSON(){return this.valueOf()}}const Rn=new nt,Mr="Missing";class at extends Gr{constructor(){super(),Object.freeze(this)}valueOf(){return Mr}toJSON(){return this.valueOf()}}const Bn=new at;class dt extends Gr{constructor(t){super();o(this,"error");this.error=t,Object.freeze(this)}toJSON(){return Lr.encode(this)}}class Tn{constructor(e){o(this,"message");this.message=e,Object.freeze(this)}toJSON(){return Hr.encode(this)}}class An{convert(e){return d(e,"message"),new Tn(p.decode(e.message))}}class Dn{convert(e){return{message:p.encode(e.message)}}}class Pn extends l{constructor(){super(...arguments);o(this,"encoder",new Dn);o(this,"decoder",new An)}}const Hr=new Pn;class On{convert(e){return d(e,"Error"),new dt(Hr.decode(e.Error))}}class Nn{convert(e){return{Error:Hr.encode(e.error)}}}class qn extends l{constructor(){super(...arguments);o(this,"encoder",new Nn);o(this,"decoder",new On)}}const Lr=new qn;class Fn{convert(e){return e===zr?Rn:e===Mr?Bn:Lr.decode(e)}}class Wn{convert(e){if(e instanceof nt)return zr;if(e instanceof at)return Mr;if(e instanceof dt)return Lr.encode(e);throw new C}}class Gn extends l{constructor(){super(...arguments);o(this,"encoder",new Wn);o(this,"decoder",new Fn)}}const it=new Gn;_(Wr,_n);const lt="ResponseContentTypeIsNotApplicationJSONError";class Te extends ue{constructor(t,s,n,a="response content type is not application/json"){super(s,n,a);o(this,"haveHeaderType");this.haveHeaderType=t,Object.freeze(this)}static fromResponse(t,s){return new Te(t.headers.get("content-type")??"undefined",t.status,t,s)}toJSON(){return ut.encode(this)}get code(){return lt}}class zn{convert(e){return d(e,"code","status","have","want","message"),R(e,lt),new Te(p.decode(e.code),c.decode(e.status),null,p.decode(e.message))}}class Mn{convert(e){return{...Zo.convert(e),have:p.encode(e.haveHeaderType),want:p.encode("application/json")}}}class Hn extends l{constructor(){super(...arguments);o(this,"encoder",new Mn);o(this,"decoder",new zn)}}const ut=new Hn;_(Te.name,ut);const Jr="WebWorkerErrorResponse";class ht extends N{constructor(t,s="error in web worker"){super(s);o(this,"error");this.error=t,Object.freeze(this)}toJSON(){return pt.encode(this)}get code(){return Jr}}class Ln{convert(e){return d(e,"code","error","message"),R(e,Jr),new ht(ke.decode(e.error),p.decode(e.message))}}class Jn{convert(e){return{...xe.convert(e),error:ke.encode(e.error)}}}class Qn extends l{constructor(){super(...arguments);o(this,"encoder",new Jn);o(this,"decoder",new Ln)}}const pt=new Qn;_(Jr,pt);var mt=(r=>(r[r.success=0]="success",r[r.full=1]="full",r[r.failed=2]="failed",r))(mt||{});class Un{getFromEmpty(){}}class jn{getFromEmpty(){throw new jt}}const Vn={returnUndefined:new Un,throwMissingElement:new jn};class $n{constructor(e){o(this,"maxSize");E(!Number.isNaN(e),"maxSize must not be NaN"),E(Number.isInteger(e),"maxSize must be an integer"),E(e>0,"maxSize must be greater than 0"),this.maxSize=e}nextIndex(e){return E(e>=0,"index must be greater than or equal to 0"),(e+1)%this.maxSize}}class Kn{constructor(e){o(this,"preComputedSizeMinus1");E(!Number.isNaN(e),"maxSize must not be NaN"),E(Number.isInteger(e),"maxSize must be an integer"),E(e>0,"maxSize must be greater than 0"),E(wt(e),"maxSize must be a power of two"),this.preComputedSizeMinus1=e-1}nextIndex(e){return E(e>=0,"index must be greater than or equal to 0"),e+1&this.preComputedSizeMinus1}}function wt(r){return(r&r-1)===0}const Qr="BufferFullError";class ft extends N{constructor(e="buffer full"){super(e),Object.freeze(this)}get code(){return Qr}}class Yn{convert(e){return d(e,"code","message"),R(e,Qr),new ft(p.decode(e.message))}}class Xn extends Se{}class Zn extends l{constructor(){super(...arguments);o(this,"encoder",new Xn);o(this,"decoder",new Yn)}}const ea=new Zn;_(Qr,ea);class ra{putToFull(e,t){return e.get(),e.put(t)}}class oa{putToFull(){throw new ft}}const ta={overwriteOldest:new ra,throw:new oa};function sa(r){return wt(r)?new Kn(r):new $n(r)}class ca{constructor(e,t,s){o(this,"readIndex",0);o(this,"writeIndex",0);o(this,"buffer");o(this,"nextIndex");o(this,"getOnEmpty");o(this,"putOnFull");E(!Number.isNaN(e),"maxSize must not be NaN"),this.buffer=new Array(e),this.nextIndex=sa(e),this.getOnEmpty=t,this.putOnFull=s}get maxSize(){return this.buffer.length}get length(){return this.writeIndex<this.readIndex?this.writeIndex+this.maxSize-this.readIndex:this.writeIndex-this.readIndex}put(e){const t=this.nextIndex.nextIndex(this.writeIndex);return t===this.readIndex?this.putOnFull.putToFull(this,e):(this.buffer[this.writeIndex]=e,this.writeIndex=t,mt.success)}get(){if(this.readIndex===this.writeIndex)return this.getOnEmpty.getFromEmpty(this);const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),e}[Symbol.iterator](){return new na(this)}immutableIterable(){return{[Symbol.iterator]:()=>this.immutableIterator()}}immutableIterator(){return new aa(this.readIndex,this.writeIndex,this.buffer,this.nextIndex)}}class na{constructor(e){o(this,"buffer");this.buffer=e}next(){const e=this.buffer.get();return e==null?{value:void 0,done:!0}:{value:e,done:!1}}}class aa{constructor(e,t,s,n){o(this,"readIndex");o(this,"writeIndex");o(this,"buffer");o(this,"nextIndex");this.readIndex=e,this.writeIndex=t,this.buffer=s,this.nextIndex=n}next(){if(this.readIndex===this.writeIndex)return{value:void 0,done:!0};const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),{value:e,done:!1}}}function A(r=32,e=Vn.returnUndefined,t=ta.overwriteOldest){return new ca(r,e,t)}class Ur{constructor(e,t,s,n,a,h,m,f){o(this,"hash");o(this,"height");o(this,"time");o(this,"numTransactions");o(this,"proposerID");o(this,"feeRecipient");o(this,"size");o(this,"blockReward");this.hash=e,this.height=t,this.time=s,this.numTransactions=n,this.proposerID=a,this.feeRecipient=h,this.size=m,this.blockReward=f}toJSON(){return Q.encode(this)}}class da{convert(e){return d(e,"hash","height","time","num_transactions","proposer_id","fee_recipient","size","block_reward"),new Ur(u.decode(e.hash),c.decode(e.height),H.decode(e.time),c.decode(e.num_transactions),z.decode(e.proposer_id),z.decode(e.fee_recipient),c.decode(e.size),No.decode(e.block_reward))}}class ia{convert(e){return i(e,Ur),{hash:u.encode(e.hash),height:c.encode(e.height),time:H.encode(e.time),num_transactions:c.encode(e.numTransactions),proposer_id:z.encode(e.proposerID),fee_recipient:z.encode(e.feeRecipient),size:c.encode(e.size),block_reward:No.encode(e.blockReward)}}}class la extends g{constructor(){super(...arguments);o(this,"encoder",new ia);o(this,"decoder",new da)}}const Q=new la,yi=new D(new P(Q),new O(Q));class jr{constructor(e,t,s,n,a,h){o(this,"hash");o(this,"height");o(this,"proposerID");o(this,"numTransactions");o(this,"size");o(this,"time");this.hash=e,this.height=t,this.proposerID=s,this.numTransactions=n,this.size=a,this.time=h}toJSON(){return Ke.encode(this)}}class ua{convert(e){return d(e,"hash","height","proposer_id","num_transactions","size","time"),new jr(u.decode(e.hash),c.decode(e.height),z.decode(e.proposer_id),c.decode(e.num_transactions),c.decode(e.size),H.decode(e.time))}}class ha{convert(e){return i(e,jr),{hash:u.encode(e.hash),height:c.encode(e.height),proposer_id:z.encode(e.proposerID),num_transactions:c.encode(e.numTransactions),size:c.encode(e.size),time:H.encode(e.time)}}}class pa extends g{constructor(){super(...arguments);o(this,"encoder",new ha);o(this,"decoder",new ua)}}const Ke=new pa,$=new D(new P(Ke),new O(Ke)),V="latest";class Vr{constructor(e,t,s){o(this,"rollups");o(this,"transactions");o(this,"blocks");this.rollups=e,this.transactions=t,this.blocks=s}toJSON(){return $r.encode(this)}}class ma{convert(e){return d(e,"rollups","transactions","blocks"),new Vr(c.decode(e.rollups),c.decode(e.transactions),c.decode(e.blocks))}}class wa{convert(e){return i(e,Vr),{rollups:c.encode(e.rollups),transactions:c.encode(e.transactions),blocks:c.encode(e.blocks)}}}class fa extends l{constructor(){super(...arguments);o(this,"encoder",new wa);o(this,"decoder",new ma)}}const $r=new fa;function Ca(r,e){return r.blockHeights-e.blockHeights}class Kr{constructor(e,t,s,n){o(this,"blockTime");o(this,"blockSize");o(this,"blockTransactions");o(this,"blockHeights");const a=[],h=Math.min(e.length,t.length,s.length,n.length);for(let B=0;B<h;B++){const X=n[B];X!==null&&a.push({blockTime:e[B],blockSize:t[B],blockTransactions:s[B],blockHeights:X})}a.sort(Ca);const m=a[0].blockHeights,f=a[a.length-1].blockHeights,b=[],y=[],w=[],v=[];for(let B=m,X=0;B<=f;B++){const Z=a[X];if(Z.blockHeights!==B){b.push(null),y.push(null),w.push(null),v.push(null);continue}b.push(Z.blockTime),y.push(Z.blockSize),w.push(Z.blockTransactions),v.push(Z.blockHeights),X++}const U=Math.max(0,v.length-50);this.blockTime=b.slice(U),this.blockSize=y.slice(U),this.blockTransactions=w.slice(U),this.blockHeights=v.slice(U)}toJSON(){return Yr.encode(this)}}class ba{convert(e){return d(e,"block_time","block_size","block_transactions","block_heights"),new Kr(G.decode(e.block_time),G.decode(e.block_size),G.decode(e.block_transactions),G.decode(e.block_heights))}}class ga{convert(e){return i(e,Kr),{block_time:G.encode(e.blockTime),block_size:G.encode(e.blockSize),block_transactions:G.encode(e.blockTransactions),block_heights:G.encode(e.blockHeights)}}}class ya extends l{constructor(){super(...arguments);o(this,"encoder",new ga);o(this,"decoder",new ba)}}const Yr=new ya,Ct=q;class Ae{constructor(e,t,s,n,a,h){o(this,"hash");o(this,"rollups");o(this,"height");o(this,"time");o(this,"offset");o(this,"numTransactions");this.hash=e,this.rollups=t,this.height=s,this.time=n,this.offset=a,this.numTransactions=h}toJSON(){return Ye.encode(this)}}class va{convert(e){return d(e,"hash","rollups","height","time","offset","num_transactions"),new Ae(u.decode(e.hash),Ct.decode(e.rollups),c.decode(e.height),H.decode(e.time),c.decode(e.offset),c.decode(e.num_transactions))}}class Ea{convert(e){return i(e,Ae),{hash:u.encode(e.hash),rollups:Ct.encode(e.rollups),height:c.encode(e.height),time:H.encode(e.time),offset:c.encode(e.offset),num_transactions:c.encode(e.numTransactions)}}}class xa extends l{constructor(){super(...arguments);o(this,"encoder",new Ea);o(this,"decoder",new va)}}const Ye=new xa,K=new D(new P(Ye),new O(Ye));class Xr{constructor(e,t,s,n,a){o(this,"latestBlock");o(this,"genesisOverview");o(this,"latestBlocks");o(this,"latestTransactions");o(this,"histograms");this.latestBlock=e,this.genesisOverview=t,this.latestBlocks=s,this.latestTransactions=n,this.histograms=a}toJSON(){return Zr.encode(this)}}class Sa{convert(e){return d(e,"latest_block","genesis_overview","latest_blocks","latest_transactions","histograms"),new Xr(Q.decode(e.latest_block),$r.decode(e.genesis_overview),$.decode(e.latest_blocks),K.decode(e.latest_transactions),Yr.decode(e.histograms))}}class ka{convert(e){return i(e,Xr),{latest_block:Q.encode(e.latestBlock),genesis_overview:$r.encode(e.genesisOverview),latest_blocks:$.encode(e.latestBlocks),latest_transactions:K.encode(e.latestTransactions),histograms:Yr.encode(e.histograms)}}}class Ia extends l{constructor(){super(...arguments);o(this,"encoder",new ka);o(this,"decoder",new Sa)}}const Zr=new Ia;class eo{constructor(e){o(this,"blockDetail");this.blockDetail=e}toJSON(){return bt.encode(this)}}class _a{convert(e){return d(e,"block_detail"),new eo(Q.decode(e.block_detail))}}class Ra{convert(e){return i(e,eo),{block_detail:Q.encode(e.blockDetail)}}}class Ba extends g{constructor(){super(...arguments);o(this,"encoder",new Ra);o(this,"decoder",new _a)}}const bt=new Ba;class ro{constructor(e){o(this,"blockSummaries");this.blockSummaries=e}toJSON(){return gt.encode(this)}}class Ta{convert(e){return d(e,"block_summaries"),new ro($.decode(e.block_summaries))}}class Aa{convert(e){return i(e,ro),{block_summaries:$.encode(e.blockSummaries)}}}class Da extends g{constructor(){super(...arguments);o(this,"encoder",new Aa);o(this,"decoder",new Ta)}}const gt=new Da;class oo{constructor(e){o(this,"explorerSummary");this.explorerSummary=e}toJSON(){return yt.encode(this)}}class Pa{convert(e){return d(e,"explorer_summary"),new oo(Zr.decode(e.explorer_summary))}}class Oa{convert(e){return i(e,oo),{explorer_summary:Zr.encode(e.explorerSummary)}}}class Na extends l{constructor(){super(...arguments);o(this,"encoder",new Oa);o(this,"decoder",new Pa)}}const yt=new Na;class to{constructor(e,t){o(this,"blocks");o(this,"transactions");this.blocks=e,this.transactions=t}toJSON(){return so.encode(this)}}class qa{convert(e){return d(e,"blocks","transactions"),new to($.decode(e.blocks),K.decode(e.transactions))}}class Fa{convert(e){return i(e,to),{blocks:$.encode(e.blocks),transactions:K.encode(e.transactions)}}}class Wa extends g{constructor(){super(...arguments);o(this,"encoder",new Fa);o(this,"decoder",new qa)}}const so=new Wa;class co{constructor(e){o(this,"searchResults");this.searchResults=e}toJSON(){return vt.encode(this)}}class Ga{convert(e){return d(e,"search_results"),new co(so.decode(e.search_results))}}class za{convert(e){return i(e,co),{search_results:so.encode(e.searchResults)}}}class Ma extends g{constructor(){super(...arguments);o(this,"encoder",new za);o(this,"decoder",new Ga)}}const vt=new Ma;class no{static heightAndOffset(e,t){return new De(e,t)}static hash(e){return new Pe(e)}toJSON(){return Et.encode(this)}}class Ha{convert(e){if(i(e,no),e instanceof De)return{height:c.encode(e.height),offset:c.encode(e.offset)};if(e instanceof Pe)return{hash:u.encode(e.hash)};throw new M}}class La{convert(e){if(k(e,"height",I)&&k(e,"offset",I))return new De(c.decode(e.height),c.decode(e.offset));if(k(e,"hash",I))return new Pe(u.decode(e.hash));throw new M}}class Ja extends l{constructor(){super(...arguments);o(this,"encoder",new Ha);o(this,"decoder",new La)}}const Et=new Ja;class De extends no{constructor(t,s){super();o(this,"height");o(this,"offset");this.height=t,this.offset=s}}class Pe extends no{constructor(t){super();o(this,"hash");this.hash=t}}const xt=c;class ao{constructor(e,t){o(this,"namespace");o(this,"payload");this.namespace=e,this.payload=t}toJSON(){return Xe.encode(this)}}class Qa{convert(e){return d(e,"namespace","payload"),new ao(xt.decode(e.namespace),To.decode(e.payload))}}class Ua{convert(e){return i(e,ao),{namespace:xt.encode(e.namespace),payload:To.encode(e.payload)}}}class ja extends l{constructor(){super(...arguments);o(this,"encoder",new Ua);o(this,"decoder",new Qa)}}const Xe=new ja,St=new D(new P(Xe),new O(Xe));class io{constructor(e,t,s,n,a,h,m,f,b){o(this,"hash");o(this,"height");o(this,"blockConfirmed");o(this,"offset");o(this,"numTransactions");o(this,"size");o(this,"time");o(this,"sequencingFees");o(this,"feeDetails");this.hash=e,this.height=t,this.blockConfirmed=s,this.offset=n,this.numTransactions=a,this.size=h,this.time=m,this.sequencingFees=f,this.feeDetails=b}toJSON(){return lo.encode(this)}}class Va{convert(e){return d(e,"hash","height","block_confirmed","offset","num_transactions","size","time","sequencing_fees","fee_details"),new io(u.decode(e.hash),c.decode(e.height),de.decode(e.block_confirmed),c.decode(e.offset),c.decode(e.num_transactions),c.decode(e.size),H.decode(e.time),[],[])}}class $a{convert(e){return i(e,io),{hash:u.encode(e.hash),height:c.encode(e.height),block_confirmed:de.encode(e.blockConfirmed),offset:c.encode(e.offset),num_transactions:c.encode(e.numTransactions),size:c.encode(e.size),time:H.encode(e.time),sequencing_fees:[],fee_details:[]}}}class Ka extends l{constructor(){super(...arguments);o(this,"encoder",new $a);o(this,"decoder",new Va)}}const lo=new Ka;class uo{constructor(e,t){o(this,"details");o(this,"data");this.details=e,this.data=t}toJSON(){return ho.encode(this)}}class Ya{convert(e){return d(e,"details","data"),new uo(lo.decode(e.details),St.decode(e.data))}}class Xa{convert(e){return i(e,uo),{details:lo.encode(e.details),data:St.encode(e.data)}}}class Za extends l{constructor(){super(...arguments);o(this,"encoder",new Xa);o(this,"decoder",new Ya)}}const ho=new Za;class Ee{constructor(e){o(this,"transactionDetail");this.transactionDetail=e}toJSON(){return kt.encode(this)}}class ed{convert(e){return d(e,"transaction_detail"),new Ee(ho.decode(e.transaction_detail))}}class rd{convert(e){return i(e,Ee),{transaction_detail:ho.encode(e.transactionDetail)}}}class od extends g{constructor(){super(...arguments);o(this,"encoder",new rd);o(this,"decoder",new ed)}}const kt=new od;class Oe{constructor(){}static block(e){return new Ne(e)}static namespace(e){return new qe(e)}static none(){return new mo}toJSON(){return po.encode(this)}}class td{convert(e){return k(e,"block",I)?new Ne(c.decode(e.block)):k(e,"namespace",I)?new qe(c.decode(e.namespace)):new mo}}class sd{convert(e){if(i(e,Oe),e instanceof mo)return{};if(e instanceof Ne)return{block:c.encode(e.block)};if(e instanceof qe)return{namespace:c.encode(e.namespace)};throw new M}}class cd extends g{constructor(){super(...arguments);o(this,"encoder",new sd);o(this,"decoder",new td)}}const po=new cd;class mo extends Oe{constructor(){super()}convertURL(e){return e}}class Ne extends Oe{constructor(t){super();o(this,"block");this.block=t}convertURL(t){return new URL(`${t.pathname}/block/${this.block}`,t)}}class qe extends Oe{constructor(t){super();o(this,"namespace");this.namespace=t}convertURL(t){return new URL(`${t.pathname}/namespace/${this.namespace}`,t)}}class te{constructor(e){o(this,"transactionSummaries");this.transactionSummaries=e}toJSON(){return It.encode(this)}}class nd{convert(e){return d(e,"transaction_summaries"),new te(K.decode(e.transaction_summaries))}}class ad{convert(e){return i(e,te),{transaction_summaries:K.encode(e.transactionSummaries)}}}class dd extends g{constructor(){super(...arguments);o(this,"encoder",new ad);o(this,"decoder",new nd)}}const It=new dd;class Fe{constructor(e){o(this,"limit");this.limit=e}static latest(e){return new We(e)}static heightAndOffset(e,t,s){return new Ge(e,t,s)}static hash(e,t){return new ze(e,t)}toJSON(){return wo.encode(this)}}class id{convert(e){return d(e,"limit"),k(e,"height",I)&&k(e,"offset",I)?new Ge(c.decode(e.height),c.decode(e.offset),c.decode(e.limit)):k(e,"hash",I)?new ze(u.decode(e.hash),c.decode(e.limit)):new We(c.decode(e.limit))}}class ld{convert(e){if(i(e,Fe),e instanceof We)return{limit:c.encode(e.limit)};if(e instanceof Ge)return{height:c.encode(e.height),offset:c.encode(e.offset),limit:c.encode(e.limit)};if(e instanceof ze)return{hash:u.encode(e.hash),limit:c.encode(e.limit)};throw new M}}class ud extends g{constructor(){super(...arguments);o(this,"encoder",new ld);o(this,"decoder",new id)}}const wo=new ud;class We extends Fe{constructor(e){super(e)}convertURL(e){return new URL(`transactions/latest/${this.limit}`,e)}}class Ge extends Fe{constructor(t,s,n){super(n);o(this,"height");o(this,"offset");this.height=t,this.offset=s}convertURL(t){return new URL(`transactions/from/${this.height}/${this.offset}/${this.limit}`,t)}}class ze extends Fe{constructor(t,s){super(s);o(this,"hash");this.hash=t}convertURL(t){return new URL(`transactions/hash/${this.hash}/${this.limit}`,t)}}function ko(r){return new Ur(r.hash,r.height,r.time,r.numTransactions,r.proposer,r.proposer,r.size,r.fees)}function Je(r){return new jr(r.hash,r.height,r.proposer,r.numTransactions,r.size,r.time)}function Io(r,e){return new uo(new io(e.hash,e.block,!0,e.index,r.numTransactions,e.size,e.time,[],[]),[new ao(e.tree.namespace,e.tree.data)])}function he(r,e){return new Ae(e.hash,[e.tree.namespace],e.block,e.time,e.index,r.numTransactions)}class hd{async getBlockDetail(e){const t=e.target,s=await(t===V?Yt(x()):be(fe(x(),t)));return new eo(ko(s))}async getBlockSummaries(e){const t=Fo(x(),m=>e.from===V||m.height<=e.from),s=Wo(t),n=Ce(s,e.limit),a=qo(n,async m=>Je(m)),h=await oe(a);return new ro(h)}async getTransactionDetail(e){const t=x();if(e instanceof De){const s=Me(t,m=>m.height<=e.height),n=j(s,m=>W(m.transactions,async f=>Io(m,f))),a=fe(re(n),e.offset),h=await be(a);return new Ee(h)}if(e instanceof Pe){const s=j(t,a=>W(a.transactions,async h=>Io(a,h))),n=await Xt(s,a=>a.details.hash===e.hash);if(!n)throw new es(e.hash);return new Ee(n)}throw new C}applyFilter(e,t){return t instanceof Ne?Eo(e,s=>s.height==t.block):t instanceof qe?Eo(e,s=>s.rollups.indexOf(t.namespace)>=0):e}async getTransactionSummaries(e){const t=x(),{target:s,filter:n}=e;if(s instanceof We){const h=j(t,y=>W(y.transactions,async w=>he(y,w))),m=re(h),f=this.applyFilter(m,n),b=await He(Le(f,s.limit));return new te(b)}if(s instanceof Ge){const a=Me(t,w=>w.height<=s.height),h=j(a,w=>W(w.transactions,async v=>he(w,v))),m=re(h),f=fe(m,s.offset),b=this.applyFilter(f,n),y=await He(Le(b,s.limit));return new te(y)}if(s instanceof ze){const a=x(),h=j(a,w=>W(w.transactions,async v=>new Ae(v.hash,[v.tree.namespace],v.block,v.time,v.index,w.numTransactions))),m=Me(h,w=>w.hash!==s.hash),f=re(m),b=this.applyFilter(f,n),y=await He(Le(b,s.limit));return new te(y)}throw new C}async getExplorerOverview(){let e;const t=A(11),s=A(51),n=A(51),a=A(51),h=A(51),m=A(11);let f=0,b=0;const y=new Map;for await(const w of x()){e=ko(w),t.put(Je(w)),s.put(w.size),n.put(Math.round(w.genTime/1e3)),a.put(w.numTransactions),h.put(w.height),f++,b+=w.numTransactions;for await(const v of w.transactions){m.put(he(w,v));const U=y.get(v.tree.namespace)||0;y.set(v.tree.namespace,U+1)}}return new oo(new Xr(e,new Vr(Array.from(y.keys()).length,b,f),Array.from(t),Array.from(m),new Kr(Array.from(n),Array.from(s),Array.from(a),Array.from(h))))}async getSearchResult(e){const t=A(101),s=A(10),n=A(10);for await(const a of x())t.put(a);for(const a of t){a.hash.toString().startsWith(e.query)&&s.put(Je(a));for await(const h of a.transactions)h.hash.toString().startsWith(e.query)&&n.put(he(a,h))}return new co(new to(Array.from(s),Array.from(n)))}}class pd{async getLatestRewardBalance(){return null}}class md{async blockHeight(){return(await Zt(x())).height}}class wd{constructor(){o(this,"availability",new Hc);o(this,"status",new md);o(this,"explorer",new hd);o(this,"rewardState",new pd)}async setURL(){throw new C}}const Ze=rr.createContext(null);try{Ze.displayName="BlockExplorerConfigContext",Ze.__docgenInfo={description:`BlockExplorerConfigContext provides the current Block Explorer
configuration for the entire application. It defaults to null, and should
be supplied in order for the interaction with the Block Explorer to work
effectively.`,displayName:"BlockExplorerConfigContext",props:{}}}catch{}class fd{async getLeafFromHeight(){throw new C}async getTransactionFromHeightAndOffset(){throw new C}async getBlockFromHeight(){throw new C}async getBlockSummaries(){throw new C}async getTransactionSummaryRange(){throw new C}async getTransactionSummaryRangeForRollup(){throw new C}}class Cd{async getBlockDetail(){throw new C}async getBlockSummaries(){throw new C}async getTransactionDetail(){throw new C}async getTransactionSummaries(){throw new C}async getExplorerOverview(){throw new C}async getSearchResult(){throw new C}}class bd{async getLatestRewardBalance(){throw new C}}class gd{async blockHeight(){throw new C}}class yd{constructor(){o(this,"availability",new fd);o(this,"status",new gd);o(this,"explorer",new Cd);o(this,"rewardState",new bd)}setURL(){throw new C}}function pe(){return E(!1,"completer is not ready, this should never be reached")}function me(){throw new Or}class vd{constructor(){o(this,"resolve",pe);o(this,"reject",pe);o(this,"completed",!1);o(this,"promise");this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t}),E(this.resolve!==pe,"resolve should be set"),E(this.reject!==pe,"resolve should be set")}get isCompleted(){return this.completed}complete(e){const t=this.resolve,s=this.reject;if(this.completed=!0,this.resolve=me,this.reject=me,e instanceof Promise){e.then(t,s);return}t(e)}completeError(e){this.reject(e),this.completed=!0,this.resolve=me,this.reject=me}}function Ed(){return new vd}const Y=c;class fo{constructor(e,t,s,n){o(this,"requestID");o(this,"api");o(this,"method");o(this,"param");this.requestID=e,this.api=t,this.method=s,this.param=n}toJSON(){return{requestID:this.requestID,api:this.api,method:this.method,param:this.param}}}class xd{convert(e){return d(e,"requestID","api","method","param"),new fo(Y.decode(e.requestID),p.decode(e.api),p.decode(e.method),e.param)}}class Sd{convert(e){return i(e,fo),{requestID:Y.encode(e.requestID),api:p.encode(e.api),method:p.encode(e.method),param:e.param}}}class kd extends l{constructor(){super(...arguments);o(this,"encoder",new Sd);o(this,"decoder",new xd)}}const Id=new kd;class Co{constructor(e){o(this,"requestID");this.requestID=e}}class bo extends Co{constructor(t,s){super(t);o(this,"response");this.response=s}toJSON(){return _t.encode(this)}}class _d{convert(e){return d(e,"requestID","response"),new bo(Y.decode(e.requestID),e.response)}}class Rd{convert(e){return i(e,bo),{requestID:Y.encode(e.requestID),response:e.response}}}class Bd extends l{constructor(){super(...arguments);o(this,"encoder",new Rd);o(this,"decoder",new _d)}}const _t=new Bd;class go extends Co{constructor(t,s){super(t);o(this,"error");this.error=s}toJSON(){return Rt.encode(this)}}class Td{convert(e){return d(e,"requestID","error"),new go(Y.decode(e.requestID),ke.decode(e.error))}}class Ad{convert(e){return i(e,go),{requestID:Y.encode(e.requestID),error:ke.encode(e.error)}}}class Dd extends l{constructor(){super(...arguments);o(this,"encoder",new Ad);o(this,"decoder",new Td)}}const Rt=new Dd;class Pd{convert(e){if(k(e,"response",I))return _t.decode(e);if(k(e,"error",I))return Rt.decode(e);throw new M}}class Od{convert(e){return i(e,Co),e.toJSON()}}class Nd extends l{constructor(){super(...arguments);o(this,"encoder",new Od);o(this,"decoder",new Pd)}}const _o=new Nd;class yo{constructor(e){o(this,"target");this.target=e}static latest(){return new Tt}static height(e){return new At(e)}toJSON(){return Bt.encode(this)}}class qd{convert(e){return i(e,yo),typeof e.target=="number"?c.encode(e.target):p.encode(e.target)}}class Fd{convert(e){return e===V?new Tt:new At(c.decode(e))}}class Wd extends g{constructor(){super(...arguments);o(this,"encoder",new qd);o(this,"decoder",new Fd)}}const Bt=new Wd;class Tt extends yo{constructor(){super(V)}}class At extends yo{constructor(e){super(e)}}class vo{constructor(e){o(this,"limit");this.limit=e}static latest(e){return new Pt(e)}static from(e,t){return new Ot(e,t)}toJSON(){return Dt.encode(this)}}class Gd{convert(e){return i(e,vo),Ut(e.from)?{from:c.encode(e.from),limit:c.encode(e.limit)}:{from:p.encode(e.from),limit:c.encode(e.limit)}}}class zd{convert(e){return d(e,"from","limit"),e.from===V?new Pt(c.decode(e.limit)):new Ot(c.decode(e.from),c.decode(e.limit))}}class Md extends g{constructor(){super(...arguments);o(this,"encoder",new Gd);o(this,"decoder",new zd)}}const Dt=new Md;class Pt extends vo{constructor(e){super(e)}get from(){return V}}class Ot extends vo{constructor(t,s){super(s);o(this,"from");this.from=t}}class Nt{constructor(e){o(this,"query");this.query=e}toJSON(){return qt.encode(this)}}class Hd{convert(e){return i(e,Nt),p.encode(e.query)}}class Ld{convert(e){return new Nt(p.decode(e))}}class Jd extends g{constructor(){super(...arguments);o(this,"encoder",new Hd);o(this,"decoder",new Ld)}}const qt=new Jd;class Ft{constructor(e,t){o(this,"target");o(this,"filter");this.target=e,this.filter=t}toJSON(){return Wt.encode(this)}}class Qd{convert(e){return d(e,"filter","target"),new Ft(wo.decode(e.target),po.decode(e.filter))}}class Ud{convert(e){return i(e,Ft),{filter:po.encode(e.filter),target:wo.encode(e.target)}}}class jd extends g{constructor(){super(...arguments);o(this,"encoder",new Ud);o(this,"decoder",new Qd)}}const Wt=new jd;function Vd(r){return new Worker(""+new URL("hotshot_query_service_web_worker_api.js-UJdQNHB0.js",import.meta.url).href,{name:r==null?void 0:r.name})}class $d{constructor(e){o(this,"worker");o(this,"nextRequestID",0);o(this,"requestCompleters",new Map);this.worker=e,e.addEventListener("message",this.handleMessage.bind(this)),e.addEventListener("messageerror",this.handleMessageError.bind(this)),e.addEventListener("error",this.handleError.bind(this))}async submitRequest(e,t,s,n){const[a,h]=this.nextRequest();try{return this.worker.postMessage(Id.encode(new fo(a,t,s,n))),await h.promise.then(m=>{if(m instanceof go)throw new ht(m.error);if(m instanceof bo){const{response:f}=m;return e.decode(f)}throw new L(typeof m,"WebWorkerResponse")})}finally{this.requestCompleters.delete(a)}}nextRequest(){const e=this.nextRequestID++,t=Ed();return this.requestCompleters.set(e,t),[e,t]}handleMessage(e){const t=_o.decode(e.data),s=this.requestCompleters.get(t.requestID);if(s===void 0)throw new ve(t.requestID);s.complete(t)}handleMessageError(e){const t=_o.decode(e.data),s=this.requestCompleters.get(t.requestID);if(s===void 0)throw new ve(t.requestID);s.completeError(t)}handleError(e){debugger;console.error("encountered error setting up Web worker",e)}}class Kd{constructor(e){o(this,"helper");this.helper=e}async sendRequest(e,t,...s){return this.helper.submitRequest(e,"availability",t,s)}async getLeafFromHeight(e){return await this.sendRequest(Yo,"getLeafFromHeight",e)}async getTransactionFromHeightAndOffset(e,t){return await this.sendRequest(Xo,"getTransactionFromHeightAndOffset",e,t)}async getBlockSummaries(e,t){return await this.sendRequest(Rs,"getBlockSummaries",e,t)}async getBlockFromHeight(e){return await this.sendRequest(Mo,"getBlockFromHeight",e)}async getTransactionSummaryRange(e,t,s){return await this.sendRequest(xo,"getTransactionSummaryRange",e,t,s)}async getTransactionSummaryRangeForRollup(e,t,s,n){return await this.sendRequest(xo,"getTransactionSummaryRangeForRollup",e,t,s,n)}}class Yd{constructor(e){o(this,"helper");this.helper=e}async sendRequest(e,t,...s){return this.helper.submitRequest(e,"status",t,s)}async blockHeight(){return await this.sendRequest(c,"blockHeight")}}class Xd{constructor(e){o(this,"helper");this.helper=e}async sendRequest(e,t,...s){return this.helper.submitRequest(e,"explorer",t,s)}async getBlockDetail(e){return await this.sendRequest(bt,"getBlockDetail",Bt.encode(e))}async getBlockSummaries(e){return await this.sendRequest(gt,"getBlockSummaries",Dt.encode(e))}async getTransactionDetail(e){return await this.sendRequest(kt,"getTransactionDetail",Et.encode(e))}async getTransactionSummaries(e){return await this.sendRequest(It,"getTransactionSummaries",Wt.encode(e))}async getExplorerOverview(){return await this.sendRequest(yt,"getExplorerOverview",null)}async getSearchResult(e){return await this.sendRequest(vt,"getSearchResult",qt.encode(e))}}class Zd{constructor(e){o(this,"helper");this.helper=e}async sendRequest(e,t,...s){return this.helper.submitRequest(e,"reward-state",t,s)}async getLatestRewardBalance(e){return await this.sendRequest(Ht,"getLatestRewardBalance",p.encode(e))}}let Qe=null;function ei(){return Qe||(Qe=new Vd),Qe}class ri{constructor(){o(this,"availability");o(this,"status");o(this,"explorer");o(this,"rewardState");o(this,"helper");const e=ei(),t=new $d(e);this.helper=t,this.availability=new Kd(t),this.status=new Yd(t),this.explorer=new Xd(t),this.rewardState=new Zd(t)}async sendRequest(e,t,...s){return this.helper.submitRequest(e,"proxy",t,s)}async setURL(e){return await this.sendRequest(de,"set-url",p.encode(e))}}const er=rr.createContext(new yd);let we=null;function oi(r){return we===null&&(we=new ri),r&&we.setURL(r).then(e=>{e||console.warn("unable to set the url for the hotshot query service",r)},e=>{console.error("unable to set the url for the hotshot query service",r,e)}),we}function ti(r){return typeof window<"u"&&"Worker"in window||typeof self<"u"&&"Worker"in self?oi(r):new wd}const Ro=r=>{const e=rr.useContext(Ze),t=e==null?void 0:e.hotshotQueryServiceURL;return Mt.jsx(er.Provider,{value:ti(t),children:r.children})};try{er.displayName="CappuccinoHotShotQueryServiceAPIContext",er.__docgenInfo={description:"",displayName:"CappuccinoHotShotQueryServiceAPIContext",props:{}}}catch{}try{Ro.displayName="ProvideCappuccinoHotShotQueryServiceAPIContext",Ro.__docgenInfo={description:`ProvideCappuccinoHotShotQueryServiceAPIContext is a component that provides a
Cappuccino HotShot Query Service API using a default implementation that is
dependent on the environment that the code is being run within.`,displayName:"ProvideCappuccinoHotShotQueryServiceAPIContext",props:{}}}catch{}export{Ze as B,er as C,wd as F,Ro as P,ht as W,co as a,to as b,jr as c,Ae as d,Nt as e,A as f,ta as g,Vn as h,Ed as i,on as j,yi as k,Yr as l,Q as m,ce as n,gi as o,Uo as p,se as q,Ho as r,Kr as s,Ur as t,Ft as u,Fe as v,Oe as w,yo as x,no as y,vo as z};
