var kr=Object.defineProperty;var Sr=(r,e,s)=>e in r?kr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s;var o=(r,e,s)=>Sr(r,typeof e!="symbol"?e+"":e,s);import{T as a,i as te,I as A,g as l,A as v,h as I,j as E,C as L,a as n,r as f,B as k,b as w,s as h,f as j,o as p,u as Pe,c as q,p as De,N as Oe,d as Re,e as Fe,q as yr,t as $,v as K}from"./string-BRHtp8nH.js";import{b as g,h as x,u as ze,s as Me}from"./array_buffer-R2gdYDdl.js";import{n as t,b as m}from"./base64-B9OJSIzr.js";import{t as i}from"./TaggedBase64-kwVVsu1o.js";import"./url-YgTINc9c.js";import{U as Br}from"./functional_async-y9fAbhVo.js";import{m as Tr,M as _r}from"./functional-CfXZTWhy.js";import{I as ne,m as Je}from"./monetary_value-BoyvFl18.js";import"./FetchError-nmVtBWex.js";import"./NotFoundError-CI-iUI-y.js";class Nr{convert(e){if(!te(e))throw new A(typeof e,"string");const s=new Date(e);if(Number.isNaN(s.valueOf()))throw new A("NaN","number");return s}}class Ar{convert(e){return l(e,Date),e.toISOString()}}class Pr extends a{constructor(){super(...arguments);o(this,"encoder",new Ar);o(this,"decoder",new Nr)}}const S=new Pr;class Ve{constructor(e,s,c,d,u,C){o(this,"hash");o(this,"height");o(this,"proposerID");o(this,"numTransactions");o(this,"size");o(this,"time");this.hash=e,this.height=s,this.proposerID=c,this.numTransactions=d,this.size=u,this.time=C}toJSON(){return X.encode(this)}}class Dr{convert(e){return n(e,"hash","height","proposer_id","num_transactions","size","time"),new Ve(i.decode(e.hash),t.decode(e.height),g.decode(e.proposer_id),t.decode(e.num_transactions),t.decode(e.size),S.decode(e.time))}}class Or{convert(e){return l(e,Ve),{hash:i.encode(e.hash),height:t.encode(e.height),proposer_id:g.encode(e.proposerID),num_transactions:t.encode(e.numTransactions),size:t.encode(e.size),time:S.encode(e.time)}}}class Rr extends L{constructor(){super(...arguments);o(this,"encoder",new Or);o(this,"decoder",new Dr)}}const X=new Rr,vc=new v(new I(X),new E(X)),We=m;class He{constructor(e,s,c,d,u,C){o(this,"hash");o(this,"rollups");o(this,"height");o(this,"time");o(this,"offset");o(this,"numTransactions");this.hash=e,this.rollups=s,this.height=c,this.time=d,this.offset=u,this.numTransactions=C}toJSON(){return Y.encode(this)}}class Fr{convert(e){return n(e,"hash","rollups","height","time","offset","num_transactions"),new He(i.decode(e.hash),We.decode(e.rollups),t.decode(e.height),S.decode(e.time),t.decode(e.offset),t.decode(e.num_transactions))}}class zr{convert(e){return l(e,He),{hash:i.encode(e.hash),rollups:We.encode(e.rollups),height:t.encode(e.height),time:S.encode(e.time),offset:t.encode(e.offset),num_transactions:t.encode(e.numTransactions)}}}class Mr extends a{constructor(){super(...arguments);o(this,"encoder",new zr);o(this,"decoder",new Fr)}}const Y=new Mr,Ic=new v(new I(Y),new E(Y));class ae extends k{constructor(e="completer has already been completed"){super(e),Object.freeze(this)}get code(){return Le}}const Le="CompleterAlreadyCompletedError";class Jr{convert(e){return n(e,"code","message"),w(e,Le),new ae(h.decode(e.message))}}class Vr extends j{}class Wr extends a{constructor(){super(...arguments);o(this,"encoder",new Vr);o(this,"decoder",new Jr)}}const Hr=new Wr;f(ae.name,Hr);function V(){return p(!1,"completer is not ready, this should never be reached")}function W(){throw new ae}class Lr{constructor(){o(this,"resolve",V);o(this,"reject",V);o(this,"completed",!1);o(this,"promise");this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s}),p(this.resolve!==V,"resolve should be set"),p(this.reject!==V,"resolve should be set")}get isCompleted(){return this.completed}complete(e){const s=this.resolve,c=this.reject;if(this.completed=!0,this.resolve=W,this.reject=W,e instanceof Promise){e.then(s,c);return}s(e)}completeError(e){this.reject(e),this.completed=!0,this.resolve=W,this.reject=W}}function Ec(){return new Lr}const de="NoCompleterFoundForRequestID";class je extends k{constructor(s,c=`no completer found for request id "${s}"`){super(c);o(this,"requestID");this.requestID=s,Object.freeze(this)}toJSON(){return qe.encode(this)}get code(){return de}}class jr{convert(e){return n(e,"code","requestID","message"),w(e,de),new je(Pe.decode(e.requestID),h.decode(e.message))}}class qr{convert(e){return l(e,je),{...q.convert(e),requestID:Pe.encode(e.requestID)}}}class Ur extends a{constructor(){super(...arguments);o(this,"encoder",new qr);o(this,"decoder",new jr)}}const qe=new Ur;f(de,qe);const ie="WebWorkerErrorResponse";class Qr extends k{constructor(s,c="error in web worker"){super(c);o(this,"error");this.error=s,Object.freeze(this)}toJSON(){return Ue.encode(this)}get code(){return ie}}class Gr{convert(e){return n(e,"code","error","message"),w(e,ie),new Qr(De.decode(e.error),h.decode(e.message))}}class $r{convert(e){return{...q.convert(e),error:De.encode(e.error)}}}class Kr extends a{constructor(){super(...arguments);o(this,"encoder",new $r);o(this,"decoder",new Gr)}}const Ue=new Kr;f(ie,Ue);class Qe{constructor(e,s,c){o(this,"r");o(this,"s");o(this,"v");this.r=e,this.s=s,this.v=c}toJSON(){return le.encode(this)}}class Xr{convert(e){return n(e,"r","s","v"),new Qe(x.decode(e.r),x.decode(e.s),t.decode(e.v))}}class Yr{convert(e){return l(e,Qe),{r:x.encode(e.r),s:x.encode(e.s),v:t.encode(e.v)}}}class Zr extends a{constructor(){super(...arguments);o(this,"encoder",new Yr);o(this,"decoder",new Xr)}}const le=new Zr;class Ge{constructor(e,s){o(this,"account");o(this,"amount");this.account=e,this.amount=s}toJSON(){return he.encode(this)}}class eo{convert(e){return n(e,"account","amount"),new Ge(x.decode(e.account),x.decode(e.amount))}}class ro{convert(e){return l(e,Ge),{account:x.encode(e.account),amount:x.encode(e.amount)}}}class oo extends a{constructor(){super(...arguments);o(this,"encoder",new ro);o(this,"decoder",new eo)}}const he=new oo;class $e{constructor(e,s,c){o(this,"number");o(this,"timestamp");o(this,"hash");this.number=e,this.timestamp=s,this.hash=c}toJSON(){return Z.encode(this)}}class so{convert(e){return n(e,"number","timestamp","hash"),new $e(t.decode(e.number),h.decode(e.timestamp),h.decode(e.hash))}}class co{convert(e){return l(e,$e),{number:t.encode(e.number),timestamp:h.encode(e.timestamp),hash:h.encode(e.hash)}}}class to extends a{constructor(){super(...arguments);o(this,"encoder",new co);o(this,"decoder",new so)}}const Z=new to,Ke=new Oe(new Re(Z),new Fe(Z));class Xe{constructor(e){o(this,"bytes");this.bytes=e}toJSON(){return ue.encode(this)}}class no{convert(e){return n(e,"bytes"),new Xe(ze.decode(e.bytes))}}class ao{convert(e){return l(e,Xe),{bytes:ze.encode(e.bytes)}}}class io extends a{constructor(){super(...arguments);o(this,"encoder",new ao);o(this,"decoder",new no)}}const ue=new io;class Ye{constructor(e,s,c,d,u,C,y,B,T,_){o(this,"height");o(this,"timestamp");o(this,"l1_head");o(this,"l1_finalized");o(this,"payload_commitment");o(this,"ns_table");o(this,"block_merkle_root");o(this,"fee_merkle_root");o(this,"builder_signature");o(this,"fee_info");this.height=e,this.timestamp=s,this.l1_head=c,this.l1_finalized=d,this.payload_commitment=u,this.ns_table=C,this.block_merkle_root=y,this.fee_merkle_root=B,this.builder_signature=T,this.fee_info=_}toJSON(){return R.encode(this)}}class lo{convert(e){return n(e,"height","timestamp","l1_head","l1_finalized","payload_commitment","ns_table","block_merkle_root","fee_merkle_root","builder_signature","fee_info"),new Ye(t.decode(e.height),t.decode(e.timestamp),t.decode(e.l1_head),Ke.decode(e.l1_finalized),m.decode(e.payload_commitment),ue.decode(e.ns_table),i.decode(e.block_merkle_root),i.decode(e.fee_merkle_root),le.decode(e.builder_signature),he.decode(e.fee_info))}}class ho{convert(e){return l(e,Ye),{height:t.encode(e.height),timestamp:t.encode(e.timestamp),l1_head:t.encode(e.l1_head),l1_finalized:Ke.encode(e.l1_finalized),payload_commitment:m.encode(e.payload_commitment),ns_table:ue.encode(e.ns_table),block_merkle_root:i.encode(e.block_merkle_root),fee_merkle_root:i.encode(e.fee_merkle_root),builder_signature:le.encode(e.builder_signature),fee_info:he.encode(e.fee_info)}}}class uo extends a{constructor(){super(...arguments);o(this,"encoder",new ho);o(this,"decoder",new lo)}}const R=new uo;class Ze{constructor(e,s){o(this,"vm");o(this,"payload");this.vm=e,this.payload=s}toJSON(){return P.encode(this)}}class mo{convert(e){return n(e,"vm","payload"),new Ze(t.decode(e.vm),m.decode(e.payload))}}class po{convert(e){return l(e,Ze),{vm:t.encode(e.vm),payload:m.encode(e.payload)}}}class fo extends a{constructor(){super(...arguments);o(this,"encoder",new po);o(this,"decoder",new mo)}}const P=new fo,gc=new v(new I(P),new E(P));class er{constructor(e,s,c,d,u){o(this,"header");o(this,"hash");o(this,"size");o(this,"num_transactions");o(this,"proposer_id");this.header=e,this.hash=s,this.size=c,this.num_transactions=d,this.proposer_id=u}toJSON(){return ee.encode(this)}}class wo{convert(e){return n(e,"header","hash","size","num_transactions","proposer_id"),new er(R.decode(e.header),i.decode(e.hash),t.decode(e.size),t.decode(e.num_transactions),g.decode(e.proposer_id))}}class Co{convert(e){return l(e,er),{header:R.encode(e.header),hash:i.encode(e.hash),size:t.encode(e.size),num_transactions:t.encode(e.num_transactions),proposer_id:g.encode(e.proposer_id)}}}class bo extends a{constructor(){super(...arguments);o(this,"encoder",new Co);o(this,"decoder",new wo)}}const ee=new bo,xc=new v(new I(ee),new E(ee));class rr{constructor(e,s,c,d){o(this,"hash");o(this,"header");o(this,"offset");o(this,"transaction");this.hash=e,this.header=s,this.offset=c,this.transaction=d}toJSON(){return re.encode(this)}}class vo{convert(e){return n(e,"hash","header","offset","transaction"),new rr(i.decode(e.hash),R.decode(e.header),t.decode(e.offset),P.decode(e.transaction))}}class Io{convert(e){return l(e,rr),{hash:i.encode(e.hash),header:R.encode(e.header),offset:t.encode(e.offset),transaction:P.encode(e.transaction)}}}class Eo extends a{constructor(){super(...arguments);o(this,"encoder",new Io);o(this,"decoder",new vo)}}const re=new Eo,kc=new v(new I(re),new E(re));class or{constructor(e,s){o(this,"width");o(this,"index");this.width=e,this.index=s}toJSON(){return me.encode(this)}}class go{convert(e){return n(e,"width","index"),new or(t.decode(e.width),t.decode(e.index))}}class xo{convert(e){return l(e,or),{width:t.encode(e.width),index:t.encode(e.index)}}}class ko extends a{constructor(){super(...arguments);o(this,"encoder",new xo);o(this,"decoder",new go)}}const me=new ko;class D{static get lsb0(){return yo}static get msb0(){return To}valueOf(){return this.toString()}toJSON(){return this.toString()}}const sr="bitvec::order::Lsb0",cr="bitvec::order::Msb0";class So extends D{toString(){return sr}}const yo=new So;class Bo extends D{toString(){return cr}}const To=new Bo;class _o{convert(e){if(typeof e!="string")throw new A(typeof e,"string");switch(e){case sr:return D.lsb0;case cr:return D.msb0;default:throw new A(e,"CappuccinoAPIBitVecOrder")}}}class No{convert(e){return e.toString()}}class Ao extends a{constructor(){super(...arguments);o(this,"encoder",new No);o(this,"decoder",new _o)}}const tr=new Ao;class nr{constructor(e,s,c,d){o(this,"order");o(this,"head");o(this,"bits");o(this,"data");this.order=e,this.head=s,this.bits=c,this.data=d}getBitVecIndexIterable(){return this.order===D.lsb0?new zo(this.head.width,this.bits):new Jo(this.head.width,this.bits)}[Symbol.iterator](){const e=this.getBitVecIndexIterable();return Tr(e,s=>Ro(this.data,s))[Symbol.iterator]()}toJSON(){return O.encode(this)}}class Po{convert(e){return n(e,"order","head","bits","data"),new nr(tr.decode(e.order),me.decode(e.head),t.decode(e.bits),m.decode(e.data))}}class Do{convert(e){return l(e,nr),{order:tr.encode(e.order),head:me.encode(e.head),bits:t.encode(e.bits),data:m.encode(e.data)}}}class Oo extends a{constructor(){super(...arguments);o(this,"encoder",new Do);o(this,"decoder",new Po)}}const O=new Oo,Sc=new v(new I(O),new E(O));function Ro(r,e){return(r[e.bucket]>>e.bitOffset&1)===1}class ar{constructor(e,s){o(this,"bucket");o(this,"bitOffset");this.bucket=e,this.bitOffset=s}}function dr(r){switch(p(r===8||r===16||r===32,"bit width should be a power of two that is supported"),r){case 8:return 3;case 16:return 4;case 32:return 5;default:throw new Br}}class Fo{constructor(e,s){o(this,"totalBits");o(this,"bitWidthMask");o(this,"bitWidthShift");o(this,"offset",0);this.totalBits=s;const c=dr(e);this.bitWidthMask=e-1,this.bitWidthShift=c}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,s=this.offset&this.bitWidthMask;return this.offset+=1,{done:!1,value:new ar(e,s)}}}class zo{constructor(e,s){o(this,"bitWidth");o(this,"totalBits");this.bitWidth=e,this.totalBits=s}[Symbol.iterator](){return new Fo(this.bitWidth,this.totalBits)}}class Mo{constructor(e,s){o(this,"bitWidth");o(this,"totalBits");o(this,"bitWidthMask");o(this,"bitWidthShift");o(this,"offset",0);this.bitWidth=e,this.totalBits=s;const c=dr(e);this.bitWidthMask=e-1,this.bitWidthShift=c}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,s=this.bitWidth-1-(this.offset&this.bitWidthMask);return this.offset+=1,{done:!1,value:new ar(e,s)}}}class Jo{constructor(e,s){o(this,"bitWidth");o(this,"totalBits");this.bitWidth=e,this.totalBits=s}[Symbol.iterator](){return new Mo(this.bitWidth,this.totalBits)}}class ir{constructor(e,s){o(this,"signature");o(this,"bitvec");this.signature=e,this.bitvec=s}toJSON(){return oe.encode(this)}}class Vo{convert(e){if(!yr(e)||e.length!==2)throw new A(typeof e,"Array");return new ir(i.decode(e[0]),O.decode(e[1]))}}class Wo{convert(e){return l(e,ir),[i.encode(e.signature),O.encode(e.bitvec)]}}class Ho extends a{constructor(){super(...arguments);o(this,"encoder",new Wo);o(this,"decoder",new Vo)}}const oe=new Ho,yc=new Oe(new Re(oe),new Fe(oe));class F{}class pe extends F{toJSON(){return fe.encode(this)}}class Lo{convert(e){if(!te(e)||e!=="Empty")throw new ne;return new pe}}class jo{convert(e){return l(e,pe),"Empty"}}class qo extends a{constructor(){super(...arguments);o(this,"encoder",new jo);o(this,"decoder",new Lo)}}const fe=new qo;class we extends F{constructor(s,c,d){super();o(this,"value");o(this,"pos");o(this,"elem");this.value=s,this.pos=c,this.elem=d}toJSON(){return Ce.encode(this)}}class Uo{convert(e){n(e,"Leaf");const s=e.Leaf;return n(s,"value","pos","elem"),new we(i.decode(s.value),i.decode(s.pos),i.decode(s.elem))}}class Qo{convert(e){return l(e,we),{Leaf:{value:i.encode(e.value),pos:i.encode(e.pos),elem:i.encode(e.elem)}}}}class Go extends L{constructor(){super(...arguments);o(this,"encoder",new Qo);o(this,"decoder",new Uo)}}const Ce=new Go;class be extends F{constructor(s){super();o(this,"value");this.value=s}toJSON(){return ve.encode(this)}}class $o{convert(e){n(e,"ForgettenSubtree");const s=e.ForgettenSubtree;return n(s,"value"),new be(i.decode(s.value))}}class Ko{convert(e){return l(e,be),{ForgettenSubtree:{value:i.encode(e.value)}}}}class Xo extends L{constructor(){super(...arguments);o(this,"encoder",new Ko);o(this,"decoder",new $o)}}const ve=new Xo;class Ie extends F{constructor(s,c){super();o(this,"value");o(this,"children");this.value=s,this.children=c}toJSON(){return Ee.encode(this)}}class Yo{convert(e){n(e,"Branch");const s=e.Branch;return n(s,"value","children"),new Ie(i.decode(s.value),lr.decode(s.children))}}class Zo{convert(e){return l(e,Ie),{Branch:{value:i.encode(e.value),children:lr.encode(e.children)}}}}class es extends a{constructor(){super(...arguments);o(this,"encoder",new Zo);o(this,"decoder",new Yo)}}const Ee=new es;class rs{convert(e){if($(e,"Leaf",K))return Ce.decoder.convert(e);if($(e,"Branch",K))return Ee.decoder.convert(e);if($(e,"ForgettenSubtree",K))return ve.decoder.convert(e);if(te(e))return fe.decoder.convert(e);throw new ne}}class os{convert(e){if(l(e,F),e instanceof we)return Ce.encode(e);if(e instanceof Ie)return Ee.encode(e);if(e instanceof be)return ve.encode(e);if(e instanceof pe)return fe.encode(e);throw new ne}}class ss extends a{constructor(){super(...arguments);o(this,"encoder",new os);o(this,"decoder",new rs)}}const Ae=new ss,lr=new v(new I(Ae),new E(Ae));class hr{constructor(e,s,c,d,u,C,y,B){o(this,"hash");o(this,"height");o(this,"time");o(this,"numTransactions");o(this,"proposerID");o(this,"feeRecipient");o(this,"size");o(this,"blockReward");this.hash=e,this.height=s,this.time=c,this.numTransactions=d,this.proposerID=u,this.feeRecipient=C,this.size=y,this.blockReward=B}toJSON(){return se.encode(this)}}class cs{convert(e){return n(e,"hash","height","time","num_transactions","proposer_id","fee_recipient","size","block_reward"),new hr(i.decode(e.hash),t.decode(e.height),S.decode(e.time),t.decode(e.num_transactions),g.decode(e.proposer_id),g.decode(e.fee_recipient),t.decode(e.size),Je.decode(e.block_reward))}}class ts{convert(e){return l(e,hr),{hash:i.encode(e.hash),height:t.encode(e.height),time:S.encode(e.time),num_transactions:t.encode(e.numTransactions),proposer_id:g.encode(e.proposerID),fee_recipient:g.encode(e.feeRecipient),size:t.encode(e.size),block_reward:Je.encode(e.blockReward)}}}class ns extends L{constructor(){super(...arguments);o(this,"encoder",new ts);o(this,"decoder",new cs)}}const se=new ns,Bc=new v(new I(se),new E(se));function H(r){return r!==null}function as(r,e){return r.blockHeights-e.blockHeights}class ur{constructor(e,s,c,d){o(this,"blockTime");o(this,"blockSize");o(this,"blockTransactions");o(this,"blockHeights");const u=[],C=d.length;for(let b=0;b<C;b++)u.push({blockTime:e[b],blockSize:s[b],blockTransactions:c[b],blockHeights:d[b]});u.sort(as);const y=u[0].blockHeights,B=u[C-1].blockHeights,T=[],_=[],G=[],M=[];for(let b=y,Ne=0;b<=B;b++){const N=u[Ne];if(N.blockHeights!==b){T.push(null),_.push(null),G.push(null),M.push(null);continue}T.push(N.blockTime),_.push(N.blockSize),G.push(N.blockTransactions),M.push(N.blockHeights),Ne++}const J=Math.max(0,M.length-50);this.blockTime=T.slice(J),this.blockSize=_.slice(J),this.blockTransactions=G.slice(J),this.blockHeights=M.slice(J)}toJSON(){return hs.encode(this)}}class ds{convert(e){return n(e,"block_time","block_size","block_transactions","block_heights"),new ur(m.decode(e.block_time),m.decode(e.block_size),m.decode(e.block_transactions),m.decode(e.block_heights))}}class is{convert(e){return l(e,ur),{block_time:m.encode(e.blockTime.filter(H)),block_size:m.encode(e.blockSize.filter(H)),block_transactions:m.encode(e.blockTransactions.filter(H)),block_heights:m.encode(e.blockHeights.filter(H))}}}class ls extends a{constructor(){super(...arguments);o(this,"encoder",new is);o(this,"decoder",new ds)}}const hs=new ls,mr=t;class pr{constructor(e,s){o(this,"namespace");o(this,"payload");this.namespace=e,this.payload=s}toJSON(){return ce.encode(this)}}class us{convert(e){return n(e,"namespace","payload"),new pr(mr.decode(e.namespace),Me.decode(e.payload))}}class ms{convert(e){return l(e,pr),{namespace:mr.encode(e.namespace),payload:Me.encode(e.payload)}}}class ps extends a{constructor(){super(...arguments);o(this,"encoder",new ms);o(this,"decoder",new us)}}const ce=new ps,Tc=new v(new I(ce),new E(ce));class z extends k{constructor(s,c,d){super(d);o(this,"response");o(this,"status");this.status=s,this.response=c}toJSON(){return fr.convert(this)}}class U{convert(e){return l(e,z),{...q.convert(e),status:e.status}}}const fr=new U,ge="BadResponseClientError";class fs extends z{constructor(e,s,c="bad server response: client error"){super(e,s,c),Object.freeze(this)}get code(){return ge}toJSON(){return wr.encode(this)}}class ws{convert(e){return n(e,"code","message","status"),w(e,ge),new fs(Number(e.status),null,h.decode(e.message))}}class Cs extends U{}class bs extends a{constructor(){super(...arguments);o(this,"encoder",new Cs);o(this,"decoder",new ws)}}const wr=new bs;f(ge,wr);const xe="BadResponseError";class vs extends z{constructor(e,s,c="bad server response"){super(e,s,c),Object.freeze(this)}get code(){return xe}toJSON(){return Cr.encode(this)}}class Is{convert(e){return n(e,"code","message","status"),w(e,xe),new vs(Number(e.status),null,h.decode(e.message))}}class Es extends U{}class gs extends a{constructor(){super(...arguments);o(this,"encoder",new Es);o(this,"decoder",new Is)}}const Cr=new gs;f(xe,Cr);class xs extends z{constructor(e,s,c="bad server response: server error"){super(e,s,c),Object.freeze(this)}get code(){return ke}}const ke="BadResponseServerError";class ks{convert(e){return n(e,"code","message","status"),w(e,ke),new xs(Number(e.status),null,h.decode(e.message))}}class Ss extends U{}class ys extends a{constructor(){super(...arguments);o(this,"encoder",new Ss);o(this,"decoder",new ks)}}const Bs=new ys;f(ke,Bs);const Se="ChannelClosedError";class Ts extends k{constructor(e="channel closed"){super(e),Object.freeze(this)}get code(){return Se}}class _s{convert(e){return n(e,"code","message"),w(e,Se),new Ts(h.decode(e.message))}}class Ns extends j{}class As extends a{constructor(){super(...arguments);o(this,"encoder",new Ns);o(this,"decoder",new _s)}}const Ps=new As;f(Se,Ps);const ye="InvalidStringValueError";class br extends k{constructor(s,c,d=`invalid string value: have "${s}", want "${c}"`){super(d);o(this,"have");o(this,"want");this.have=s,this.want=c,Object.freeze(this)}toJSON(){return vr.encode(this)}get code(){return ye}}class Ds{convert(e){return n(e,"code","have","want","message"),w(e,ye),new br(h.decode(e.have),h.decode(e.want),h.decode(e.message))}}class Os{convert(e){return l(e,br),{...q.convert(e),have:h.encode(e.have),want:h.encode(e.want)}}}class Rs extends a{constructor(){super(...arguments);o(this,"encoder",new Os);o(this,"decoder",new Ds)}}const vr=new Rs;f(ye,vr);const Be="NoURLProvidedError";class Fs extends k{constructor(e="no url provided"){super(e),Object.freeze(this)}get code(){return Be}}class zs{convert(e){return n(e,"code","message"),w(e,Be),new Fs(h.decode(e.message))}}class Ms extends j{}class Js extends a{constructor(){super(...arguments);o(this,"encoder",new Ms);o(this,"decoder",new zs)}}const Vs=new Js;f(Be,Vs);const Ir="ResponseContentTypeIsNotApplicationJSONError";class Q extends z{constructor(s,c,d,u="response content type is not application/json"){super(c,d,u);o(this,"haveHeaderType");this.haveHeaderType=s,Object.freeze(this)}static fromResponse(s,c){return new Q(s.headers.get("content-type")??"undefined",s.status,s,c)}toJSON(){return Er.encode(this)}get code(){return Ir}}class Ws{convert(e){return n(e,"code","status","have","want","message"),w(e,Ir),new Q(h.decode(e.code),t.decode(e.status),null,h.decode(e.message))}}class Hs{convert(e){return{...fr.convert(e),have:h.encode(e.haveHeaderType),want:h.encode("application/json")}}}class Ls extends a{constructor(){super(...arguments);o(this,"encoder",new Hs);o(this,"decoder",new Ws)}}const Er=new Ls;f(Q.name,Er);var Te=(r=>(r[r.success=0]="success",r[r.full=1]="full",r[r.failed=2]="failed",r))(Te||{});class js{getFromEmpty(){}}class qs{getFromEmpty(){return null}}class Us{getFromEmpty(){throw new _r}}const Qs={returnNull:new qs,returnUndefined:new js,throwMissingElement:new Us};class Gs{constructor(e){o(this,"maxSize");p(!Number.isNaN(e),"maxSize must not be NaN"),p(Number.isInteger(e),"maxSize must be an integer"),p(e>0,"maxSize must be greater than 0"),this.maxSize=e}nextIndex(e){return p(e>=0,"index must be greater than or equal to 0"),(e+1)%this.maxSize}}class $s{constructor(e){o(this,"preComputedSizeMinus1");p(!Number.isNaN(e),"maxSize must not be NaN"),p(Number.isInteger(e),"maxSize must be an integer"),p(e>0,"maxSize must be greater than 0"),p(gr(e),"maxSize must be a power of two"),this.preComputedSizeMinus1=e-1}nextIndex(e){return p(e>=0,"index must be greater than or equal to 0"),e+1&this.preComputedSizeMinus1}}function gr(r){return(r&r-1)===0}const _e="BufferFullError";class xr extends k{constructor(e="buffer full"){super(e),Object.freeze(this)}get code(){return _e}}class Ks{convert(e){return n(e,"code","message"),w(e,_e),new xr(h.decode(e.message))}}class Xs extends j{}class Ys extends a{constructor(){super(...arguments);o(this,"encoder",new Xs);o(this,"decoder",new Ks)}}const Zs=new Ys;f(_e,Zs);class ec{putToFull(e,s){return e.get(),e.put(s)}}class rc{putToFull(){return Te.full}}class oc{putToFull(){throw new xr}}const sc={overwriteOldest:new ec,returnFull:new rc,throw:new oc};function cc(r){return gr(r)?new $s(r):new Gs(r)}class tc{constructor(e,s,c){o(this,"readIndex",0);o(this,"writeIndex",0);o(this,"buffer");o(this,"nextIndex");o(this,"getOnEmpty");o(this,"putOnFull");p(!Number.isNaN(e),"maxSize must not be NaN"),this.buffer=new Array(e),this.nextIndex=cc(e),this.getOnEmpty=s,this.putOnFull=c}get maxSize(){return this.buffer.length}get length(){return this.writeIndex<this.readIndex?this.writeIndex+this.maxSize-this.readIndex:this.writeIndex-this.readIndex}put(e){const s=this.nextIndex.nextIndex(this.writeIndex);return s===this.readIndex?this.putOnFull.putToFull(this,e):(this.buffer[this.writeIndex]=e,this.writeIndex=s,Te.success)}get(){if(this.readIndex===this.writeIndex)return this.getOnEmpty.getFromEmpty(this);const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),e}[Symbol.iterator](){return new nc(this)}immutableIterable(){return{[Symbol.iterator]:()=>this.immutableIterator()}}immutableIterator(){return new ac(this.readIndex,this.writeIndex,this.buffer,this.nextIndex)}}class nc{constructor(e){o(this,"buffer");this.buffer=e}next(){const e=this.buffer.get();return e==null?{value:void 0,done:!0}:{value:e,done:!1}}}class ac{constructor(e,s,c,d){o(this,"readIndex");o(this,"writeIndex");o(this,"buffer");o(this,"nextIndex");this.readIndex=e,this.writeIndex=s,this.buffer=c,this.nextIndex=d}next(){if(this.readIndex===this.writeIndex)return{value:void 0,done:!0};const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),{value:e,done:!1}}}function _c(r=32,e=Qs.returnUndefined,s=sc.overwriteOldest){return new tc(r,e,s)}export{hr as A,pr as B,Ve as C,xs as D,fs as E,vs as F,sc as G,Qs as H,Ts as I,Bc as J,O as K,Sc as L,nr as M,je as N,D as O,or as P,Q as R,Qr as W,He as a,Ic as b,vc as c,gc as d,R as e,P as f,se as g,hs as h,Tc as i,Ec as j,xc as k,lr as l,kc as m,yc as n,Ze as o,Ie as p,Ye as q,S as r,$e as s,Xe as t,Qe as u,Ge as v,er as w,rr as x,_c as y,ur as z};
