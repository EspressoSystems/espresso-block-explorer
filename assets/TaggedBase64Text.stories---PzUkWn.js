var v=Object.defineProperty;var $=(a,t,e)=>t in a?v(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var u=(a,t,e)=>($(a,typeof t!="symbol"?t+"":t,e),e);import{a as D,j as P}from"./jsx-runtime-5BUNAZ9W.js";import"./index-4g5l5LRQ.js";import"./_commonjsHelpers-4gQjN7DL.js";const V=new TextEncoder;function C(a){return V.encode(a)}const L=new TextDecoder;function _(a){return L.decode(a)}function*j(a){yield*C(a)}function*O(){for(let a=0;a<256;a++)yield 255}const f=-1,k=61;class l{constructor(t,e,n=k,o=!1){u(this,"encodeMap");u(this,"decodeMap");u(this,"padChar");u(this,"strict");this.encodeMap=t,this.decodeMap=e,this.padChar=n,this.strict=o}static withAlphabet(t){const e=t.length;if(e!==64)throw new TypeError(`alphabet needs to be 64 chars, got ${e}`);const n=Array.from(j(t)),o=Array.from(O());for(let d=0;d<e;d++)o[n[d]]=d;return new l(n,o)}withPadding(t){return new l(this.encodeMap,this.decodeMap,t,this.strict)}encode(t){if(t.byteLength===0)return new ArrayBuffer(0);let e=0,n=0;const o=Math.floor(t.byteLength/3)*3,d=Math.ceil(t.byteLength/3)*4,h=new ArrayBuffer(d),i=new DataView(t),s=new DataView(h);for(;n<o;){const p=i.getUint8(n+0)<<16|i.getUint8(n+1)<<8|i.getUint8(n+2);s.setUint8(e+0,this.encodeMap[p>>18&63]),s.setUint8(e+1,this.encodeMap[p>>12&63]),s.setUint8(e+2,this.encodeMap[p>>6&63]),s.setUint8(e+3,this.encodeMap[p&63]),n+=3,e+=4}const r=t.byteLength-n;if(r===0)return h;let g=i.getUint8(n+0)<<16;switch(r===2&&(g|=i.getUint8(n+1)<<8),s.setUint8(e+0,this.encodeMap[g>>18&63]),s.setUint8(e+1,this.encodeMap[g>>12&63]),r){case 2:return s.setUint8(e+2,this.encodeMap[g>>6&63]),this.padChar!==f?(s.setUint8(e+3,this.padChar),h.slice(0,e+4)):h.slice(0,e+3);case 1:if(this.padChar!==f)return s.setUint8(e+2,this.padChar),s.setUint8(e+3,this.padChar),h.slice(0,e+4);break}return h.slice(0,e+2)}decode(t){const e=t.byteLength;if(e===0)return new ArrayBuffer(0);const n=new DataView(t),o=new ArrayBuffer(Math.floor(e/4*3)),d=new DataView(o),h=new ArrayBuffer(4),i=new DataView(h);let s=0,r=0,g=0,p=!1;for(;r<e&&!p;){let y=3,w=4;for(let c=0;c<4;c++){if(r===e){if(c===0)return o;if(c===1||this.padChar!==f)throw new TypeError(`corrupted input error at ${r-c}`);y=c-1,w=c,p=!0;break}const U=n.getUint8(r);r++;const E=this.decodeMap[U];if(E!==255){i.setUint8(c,E);continue}if(U===10||U===13){c--;continue}if(U===this.padChar){switch(c){case 0:case 1:throw new Error("Incorrect padding");case 2:for(;r<e&&(n.getUint8(r)===10||n.getUint8(r)===13);)r++;if(r===e)throw new TypeError(`corrupt input error at ${e}`);if(n.getUint8(r)!==this.padChar)throw new Error(`corrupt input error at ${r-1}`);r++}for(;r<e&&(n.getUint8(r)===10||n.getUint8(r)===13);)r++;if(r<e)throw new TypeError(`corrupt input error at ${r}`);y=3,w=c,p=!0;break}throw new TypeError(`corrupt input error ${r-1}`)}const T=i.getUint8(0)<<18|i.getUint8(1)<<12|i.getUint8(2)<<6|i.getUint8(3);switch(i.setUint8(2,T>>0&255),i.setUint8(1,T>>8&255),i.setUint8(0,T>>16&255),w){case 4:d.setUint8(g+2,i.getUint8(2)),i.setUint8(2,0);case 3:if(d.setUint8(g+1,i.getUint8(1)),this.strict&&i.getUint8(2)!==0)throw new TypeError(`corrupt input error at ${r-1}`);i.setUint8(1,0);case 2:if(d.setUint8(g+0,i.getUint8(0)),this.strict&&(i.getUint8(1)!==0||i.getUint8(2)!==0))throw new TypeError(`corrupt input error at ${r-2}`)}g+=y,s+=w-1}return o.slice(0,s)}decodeString(t){return this.decode(C(t).buffer)}encodeToString(t){return _(this.encode(t))}}const N=l.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");N.withPadding(f);const I=l.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),m=I.withPadding(f);let K=class b{constructor(t,e){u(this,"tag");u(this,"data");this.tag=t,this.data=e}static fromString(t){const e=t.indexOf("~");if(e<0)throw new TypeError("unable to find ~ within string");const n=t.substring(0,e),o=m.decodeString(t.substring(e+1));return new b(n,o)}static inflate(t){if(typeof t!="string")throw new TypeError(`expected a string, instead received ${typeof t}`);return b.fromString(t)}toString(){return`${this.tag}~${m.encodeToString(this.data)}`}valueOf(){return this.toString()}toJSON(){return this.toString()}};const B=a=>{const t=m.encodeToString(a.value.data);return t.length<=16?t:D("span",{title:t,children:[t.substring(0,8),"...",t.substring(t.length-8,t.length)]})};try{B.displayName="TaggedBase64Text",B.__docgenInfo={description:`TaggedBase64Text is a simple Text component that renders a TaggedBase64 value
in it's own way.`,displayName:"TaggedBase64Text",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"TaggedBase64"}}}}}catch{}const Y=a=>P(B,{value:new K(a.tag,new Uint8Array(a.hex).buffer)}),R={title:"Components/Text/Tagged Base64",component:Y},x={args:{tag:"PUBKEY",hex:[1,35,69,103,137,171,205,239,254,220,186,152,118,84,50,16]}};var M,S,A;x.parameters={...x.parameters,docs:{...(M=x.parameters)==null?void 0:M.docs,source:{originalSource:`{
  args: {
    tag: 'PUBKEY',
    hex: [0x01, 0x23, 0x45, 0x67, 0x89, 0xab, 0xcd, 0xef, 0xfe, 0xdc, 0xba, 0x98, 0x76, 0x54, 0x32, 0x10]
  }
}`,...(A=(S=x.parameters)==null?void 0:S.docs)==null?void 0:A.source}}};const G=["TaggedBase64"];export{x as TaggedBase64,G as __namedExportsOrder,R as default};
