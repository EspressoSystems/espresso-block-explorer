import{R as o,j as s}from"./iframe-C4ZPvz3S.js";import{a as q}from"./higher_order-bNpIPqEX.js";import{a as ve,E as T,W as Se}from"./environment_banner-BsPCvtAV.js";import{E as fe,D as h,u as xe,c as ge,d as me,t as Ce,m as ke}from"./LoadingProvider-C0CMoad9.js";import{A as ue}from"./AsyncIterableResolver-D1wqYBSp.js";import{d as De,e as Pe}from"./TransactionDetailLoader-w_EpFyCC.js";import{P as b}from"./PromiseResolver-BJMjE7mo.js";import{P as de}from"./PathResolverProvider-CTtpeaKW.js";import{U as g}from"./UnimplementedError-CdIPpzwU.js";import{B as U}from"./block_summary-CBGYsBbN.js";import{T as L}from"./Text-BU7JBOLk.js";import{S as C,D as d,a as z}from"./DataTable-DibrG-zA.js";import{L as A}from"./LabeledAnchorButton-CVWJ5izD.js";import"./DateTimeFormattersProvider-umfK80_V.js";import"./LocaleProvider-Ifjl9SJa.js";import"./PagePathProvider-By61cyAL.js";import"./NowProvider-Bpd3RyKH.js";import"./NumberFormattersProvider-SZx-qAnO.js";import{T as ye}from"./TaggedBase64-S1MhFE0d.js";import{T as F}from"./transaction_summary-_-RUzodv.js";import{C as _,f as v,g as S,h as f,i as Re,j as Be,k as V}from"./CappuccinoHotShotQueryServiceAPIContext-CKMugZV6.js";const w=o.createContext({retrieve(){throw new g}}),x=o.createContext({latestBlock:{hash:new ye("",new ArrayBuffer(0)),height:0,time:new Date(0),transactions:0,proposer:[],recipient:[],size:0,rewards:[]},genesisOverview:{rollups:0,transactions:0,blocks:0},latestBlocks:[],latestTransactions:[],histograms:{blockTime:[],blockSize:[],blockTransactions:[],blockThroughput:[],blocks:[]}});function Ne(e){switch(e){case T.mainnet:case T.decaf:return 100;case T.fakeData:return 1234;default:return 4}}const Q=e=>{const t=o.useContext(ve);o.useContext(fe);const r=o.useContext(h);if(r){const a={...r,genesisOverview:{...r.genesisOverview,sequencerNodes:r.genesisOverview.sequencerNodes??Ne(t)},histograms:{...r.histograms,blockThroughput:r.histograms.blockSize.map((i,n)=>i===null||r.histograms.blockTime[n]===null?null:i/Math.max(1,r.histograms.blockTime[n]))}};return s.jsx(x.Provider,{value:a,children:e.children})}return e.children};try{w.displayName="ExplorerSummaryLoaderContext",w.__docgenInfo={description:"",displayName:"ExplorerSummaryLoaderContext",props:{}}}catch{}try{x.displayName="ExplorerSummaryProvider",x.__docgenInfo={description:"",displayName:"ExplorerSummaryProvider",props:{}}}catch{}try{Q.displayName="ExplorerSummaryLoader",Q.__docgenInfo={description:"",displayName:"ExplorerSummaryLoader",props:{}}}catch{}const I=o.createContext({retrieve(){throw new g}}),O=o.createContext({height:0,time:new Date,size:0,transactions:0,proposer:[]}),H=e=>{const t=o.useContext(x);return t?s.jsx(h.Provider,{value:t.latestBlock,children:e.children}):s.jsx(h.Provider,{value:null,children:e.children})},j=o.createContext(xe()),G=e=>{const t=o.useContext(j);return s.jsx(ge,{children:s.jsx(ue,{asyncIterable:t,children:s.jsx(me,{children:e.children})})})};try{I.displayName="LatestBlockSummaryLoaderContext",I.__docgenInfo={description:`The LatestBlockAsyncRetriever is an interface that is used to
retrieve the data that is expected to be displayed on the Latest Block
Summary. It is expected to be used to retrieve the data asynchronously.`,displayName:"LatestBlockSummaryLoaderContext",props:{}}}catch{}try{O.displayName="LatestBlockSummaryProvider",O.__docgenInfo={description:`The LatestBlockSummaryProvider is a React context that is used to store the
LatestBlock.  This context can be used to retrieve the latest block summary.
It is expected to be used to retrieve the data asynchronously.`,displayName:"LatestBlockSummaryProvider",props:{}}}catch{}try{H.displayName="LatestBlockSummaryDataLoader",H.__docgenInfo={description:"LatestBlockSummaryDataLoader is a component that is used to consume any\ndata the can be retrieved from the AsyncRetriever defined by the current\nLatestBlockSummaryLoaderContext.  It does this via a `PromiseResolver`.\nAny children passed into this component will be passed the resolved contexts\nof the `PromiseResolver`.",displayName:"LatestBlockSummaryDataLoader",props:{}}}catch{}try{j.displayName="LatestBlockSummaryStreamContext",j.__docgenInfo={description:`The LatestBlockSummaryStreamContext is a React context that is used to store
the LatestBlock.  This data can be used to stream the latest block summary.`,displayName:"LatestBlockSummaryStreamContext",props:{}}}catch{}try{G.displayName="LatestBlockSummaryStreamConsumer",G.__docgenInfo={description:"LatestBlockSummaryStreamConsumer is a component that is used to consume\nthe `AsyncIterable` stream of data that is defined by the current context.\nIt does this via an `AsyncIterableResolver`.  Any children passed into this\ncomponent will be passed the resolved contexts of the `AsyncIterableResolver`.",displayName:"LatestBlockSummaryStreamConsumer",props:{}}}catch{}function he(e){return{block:e.height,proposer:e.proposer,transactions:e.transactions,size:e.size,time:e.time}}function be(e){return async t=>{const r=t;return(await e.retrieve({startAtBlock:r.startAtBlock})).map(he)}}const P=o.createContext({async retrieve(){throw new g}}),Te=e=>{const t=o.useContext(P),r=o.useContext(d),a=be(t);return s.jsx(b,{promise:a(r),children:s.jsx(z.Provider,{value:()=>{},children:s.jsx(s.Fragment,{children:e.children})})})},Le=e=>{const t=o.useContext(x);return t?s.jsx(h.Provider,{value:t.latestBlocks.map(he),children:e.children}):s.jsx(h.Provider,{value:null,children:e.children})},J=({startAtBlock:e,...t})=>{const[r,a]=o.useState({sortColumn:U.height,sortDir:C.desc,startAtBlock:e});return e!==void 0&&r.startAtBlock!==e&&a({...r,startAtBlock:e}),s.jsx(d.Provider,{value:r,children:s.jsx(z.Provider,{value:a,children:o.createElement(Te,t)})})},M=({startAtBlock:e,...t})=>{const[r,a]=o.useState({sortColumn:U.height,sortDir:C.desc,startAtBlock:e});return e!==void 0&&r.startAtBlock!==e&&a({...r,startAtBlock:e}),s.jsx(d.Provider,{value:r,children:s.jsx(z.Provider,{value:a,children:o.createElement(Le,t)})})},Ae=20,$=e=>{const t=o.useContext(h),r=o.useContext(de),a=o.useContext(d),i=[],n=[];return a.startAtBlock!==void 0&&i.push(s.jsx(A,{href:r.blocks(a.startAtBlock+Ae),children:s.jsx(L,{text:"Previous"})},0)),t.length>0&&t[t.length-1].block>0&&i.push(s.jsx(A,{href:r.blocks(t[t.length-1].block-1),children:s.jsx(L,{text:"Next"})},1)),s.jsxs("nav",{className:q(e.className,"blocks-navigation"),children:[i,n]})};try{P.displayName="BlockSummaryAsyncRetrieverContext",P.__docgenInfo={description:`RetrieverContext represents the retriever to be utilized for retrieving
the BlockSummary data.`,displayName:"BlockSummaryAsyncRetrieverContext",props:{}}}catch{}try{J.displayName="BlockSummaryDataLoader",J.__docgenInfo={description:`BlockSummaryDataLoader is a component that provides the initial state of
the Block Summary state, and loads the data.`,displayName:"BlockSummaryDataLoader",props:{startAtBlock:{defaultValue:null,description:"",name:"startAtBlock",required:!1,type:{name:"number"}}}}}catch{}try{M.displayName="BlockSummaryDataFromStreamLoader",M.__docgenInfo={description:"",displayName:"BlockSummaryDataFromStreamLoader",props:{startAtBlock:{defaultValue:null,description:"",name:"startAtBlock",required:!1,type:{name:"number"}}}}}catch{}try{$.displayName="BlocksNavigation",$.__docgenInfo={description:"",displayName:"BlocksNavigation",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const we=Se("div"),W=e=>s.jsx(we,{...e,className:q(e.className,"page-title")});try{W.displayName="PageTitle",W.__docgenInfo={description:`PageTitle is a container element to hold the page's title, sub-heading
information, and potentially navigation elements.`,displayName:"PageTitle",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const E=o.createContext(0),R=o.createContext({async retrieve(){throw new g}});function Ie(e,t){return{async retrieve(r){const a=r;return(await e.retrieve({namespace:t,height:a.height,offset:a.offset})).map(n=>({hash:n.hash,block:n.block,offset:0,rollups:n.namespaces,time:n.time}))}}}const K=({children:e,startAtBlock:t,offset:r,...a})=>{const[i]=o.useState({sortColumn:F.block,sortDir:C.desc,height:t,offset:r}),n=o.useContext(E),l=o.useContext(R),c=o.useContext(d),p=Ie(l,n);return s.jsx(d.Provider,{value:i,children:s.jsx(b,{promise:p.retrieve(c),...a,children:e})})};try{E.displayName="NamespaceContext",E.__docgenInfo={description:`NamespaceContext is a React Context that holds a reference to the
current Namespace`,displayName:"NamespaceContext",props:{}}}catch{}try{R.displayName="RollUpDetailAsyncRetrieverContext",R.__docgenInfo={description:`RetrieverContext is a React Context that holds a reference to a
RollUpDetailAsyncRetriever`,displayName:"RollUpDetailAsyncRetrieverContext",props:{}}}catch{}try{K.displayName="RollUpDetailsDataLoader",K.__docgenInfo={description:`RollUpDetailsDataLoader uses the Retriever from the
RetrieverContext and kicks off requests using the state retrieved
by the DataTableStateContext.`,displayName:"RollUpDetailsDataLoader",props:{startAtBlock:{defaultValue:null,description:"",name:"startAtBlock",required:!1,type:{name:"number"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}}}}}catch{}function je(e){return async()=>(await e.retrieve()).map(r=>({namespace:r.namespace,transactions:r.transactions}))}const B=o.createContext({async retrieve(){throw new g}}),Ee=e=>{const t=o.useContext(B),r=je(t);return s.jsx(b,{promise:r(),children:e.children})},X=e=>{const[t]=o.useState({sortColumn:U.height,sortDir:C.desc});return s.jsx(d.Provider,{value:t,children:o.createElement(Ee,e)})};try{B.displayName="RollUpSummaryAsyncRetrieverContext",B.__docgenInfo={description:`RetrieverContext represents the retriever to be utilized for retrieving
the BlockSummary data.`,displayName:"RollUpSummaryAsyncRetrieverContext",props:{}}}catch{}try{X.displayName="RollUpsSummaryLoader",X.__docgenInfo={description:"",displayName:"RollUpsSummaryLoader",props:{}}}catch{}const D=o.createContext({async retrieve(){throw new g}});function _e(e){return{hash:e.hash,block:e.block,offset:e.offset,rollups:e.namespaces,time:e.time}}function qe(e){return{async retrieve(t){const r=t;return(await e.retrieve({startAtBlock:r.height,offset:r.offset})).map(_e)}}}const Ue=e=>{const t=o.useContext(D),r=o.useContext(d),a=qe(t);return s.jsx(b,{promise:a.retrieve(r),children:s.jsx(s.Fragment,{children:e.children})})},ze=e=>{const t=o.useContext(x);return t?s.jsx(h.Provider,{value:t.latestTransactions.map(_e),children:e.children}):s.jsx(h.Provider,{value:null,children:e.children})},Y=e=>{const{startAtBlock:t,offset:r,...a}=e,[i]=o.useState({sortColumn:F.block,sortDir:C.desc,height:t,offset:r});return s.jsx(d.Provider,{value:i,children:o.createElement(Ue,a)})},Z=e=>{const{startAtBlock:t,offset:r,...a}=e,[i]=o.useState({sortColumn:F.block,sortDir:C.desc,height:t,offset:r});return s.jsx(d.Provider,{value:i,children:o.createElement(ze,a)})},ee=e=>{const t=o.useContext(h),r=o.useContext(de),a=[],i=[];if(t&&t[t.length-1].block>0){const n=t[t.length-1];a.push(s.jsx(A,{href:r.transactions(n.block,n.offset+1),children:s.jsx(L,{text:"Next"})},1))}return s.jsxs("nav",{className:q(e.className,"transactions-navigation"),children:[a,i]})};try{D.displayName="TransactionSummaryAsyncRetrieverContext",D.__docgenInfo={description:`RetrieverContext is a React Context that holds a reference to a
TransactionSummaryAsyncRetriever`,displayName:"TransactionSummaryAsyncRetrieverContext",props:{}}}catch{}try{Y.displayName="TransactionSummaryDataLoader",Y.__docgenInfo={description:`TransactionSummaryDataLoader sets up the intial state of the DataTableState
and kicks begins the process of retrieving the data.`,displayName:"TransactionSummaryDataLoader",props:{startAtBlock:{defaultValue:null,description:"",name:"startAtBlock",required:!1,type:{name:"number"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}}}}}catch{}try{Z.displayName="TransactionSummaryDataFromStreamLoader",Z.__docgenInfo={description:"",displayName:"TransactionSummaryDataFromStreamLoader",props:{startAtBlock:{defaultValue:null,description:"",name:"startAtBlock",required:!1,type:{name:"number"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}}}}}catch{}try{ee.displayName="TransactionsNavigation",ee.__docgenInfo={description:"",displayName:"TransactionsNavigation",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const te=e=>{const t=o.useContext(_);return s.jsx(De.Provider,{...e,value:{async retrieve(r){const{blockDetail:a}=await t.explorer.getBlockDetail(Re.height(r));return{hash:a.hash,height:a.height,time:a.time,transactions:a.numTransactions,proposer:a.proposerID,recipient:a.feeRecipient,size:a.size,rewards:a.blockReward}}}})},re=({children:e,blocksPerPage:t=20,...r})=>{const a=o.useContext(_);return s.jsx(P.Provider,{...r,value:{async retrieve(i){const{blocksPerPage:n=t,startAtBlock:l=null}=i,c=l===null?V.latest(n):V.from(l,n),p=await a.explorer.getBlockSummaries(c),{blockSummaries:y}=p;return y.map(u=>({height:u.height,proposer:u.proposerID,transactions:u.numTransactions,size:u.size,time:u.time}))}},children:e})},ae=({children:e,transactionsPerPage:t=20,...r})=>{const a=o.useContext(_);return s.jsx(D.Provider,{...r,value:{async retrieve(i){const{startAtBlock:n=null,offset:l=null,transactionsPerPage:c=t}=i;let p;n===null||l===null?p=new v(S.latest(c),f.none()):p=new v(S.heightAndOffset(n,l,c),f.none());const y=await a.explorer.getTransactionSummaries(p),{transactionSummaries:u}=y;return u.map(m=>({hash:m.hash,namespaces:m.rollups,block:m.height,offset:m.offset,time:m.time}))}},children:e})},oe=({children:e,transactionsPerPage:t=20,...r})=>{const a=o.useContext(_);return s.jsx(D.Provider,{...r,value:{async retrieve(i){const{startAtBlock:n=0,offset:l=null,transactionsPerPage:c=t}=i;let p;n===null||l===null?p=new v(S.latest(c),f.block(n)):p=new v(S.heightAndOffset(n,l,c),f.block(n));const y=await a.explorer.getTransactionSummaries(p),{transactionSummaries:u}=y;return u.map(m=>({hash:m.hash,namespaces:m.rollups,block:m.height,offset:m.offset,time:m.time}))}},children:e})},se=e=>{const t=o.useContext(_);return s.jsx(Pe.Provider,{...e,value:{async retrieve(r){const{height:a,offset:i}=r,n=Be.heightAndOffset(a,i),l=await t.explorer.getTransactionDetail(n),{transactionDetail:c}=l;return{block:c.details.height,index:c.details.offset,total:c.details.numTransactions,size:c.details.size,hash:c.details.hash,time:c.details.time,sender:new ye("",new ArrayBuffer(0)),tree:{namespace:c.data[0].namespace,data:c.data[0].payload}}}}})},ne=({children:e,transactionsPerPage:t=20,...r})=>{const a=o.useContext(_);return s.jsx(R.Provider,{...r,value:{async retrieve(i){const{namespace:n,height:l=null,offset:c=null,transactionsPerPage:p=t}=i;let y;l===null||c===null?y=new v(S.latest(p),f.namespace(n)):y=new v(S.heightAndOffset(l,c,p),f.namespace(n));const u=await a.explorer.getTransactionSummaries(y),{transactionSummaries:m}=u;return m.map(k=>({hash:k.hash,namespaces:k.rollups,block:k.height,offset:k.offset,time:k.time}))}},children:e})},ce=e=>s.jsx(B.Provider,{...e,value:{async retrieve(){return[]}}}),ie=e=>{const t=o.useContext(_);return s.jsx(I.Provider,{...e,value:{async retrieve(){const a=(await t.explorer.getExplorerOverview()).explorerSummary.latestBlock;return{height:a.height,proposer:a.proposerID,transactions:a.numTransactions,size:a.size,time:a.time}}}})};function N(e){const{explorerSummary:t}=e,{latestBlock:r,latestTransactions:a,latestBlocks:i,genesisOverview:n,histograms:l}=t;return{latestBlock:{hash:r.hash,height:r.height,time:r.time,transactions:r.numTransactions,proposer:r.proposerID,recipient:r.feeRecipient,size:r.size,rewards:r.blockReward},genesisOverview:{rollups:n.rollups,transactions:n.transactions,blocks:n.blocks},latestBlocks:i.map(c=>({height:c.height,time:c.time,transactions:c.numTransactions,size:c.size,proposer:c.proposerID})),latestTransactions:a.map(c=>({hash:c.hash,block:c.height,time:c.time,offset:c.offset,namespaces:c.rollups})),histograms:{blockTime:l.blockTime,blockSize:l.blockSize,blockTransactions:l.blockTransactions,blockThroughput:[],blocks:l.blockHeights}}}const le=({children:e})=>{const t=o.useContext(_),r=Ce(2e3,!0),a=ke(r,async()=>{const i=await t.explorer.getExplorerOverview();return N(i)});return s.jsx(ue,{asyncIterable:a,children:s.jsx(me,{children:e})})},pe=e=>{const t=o.useContext(_);return s.jsx(w.Provider,{...e,value:{async retrieve(){const r=await t.explorer.getExplorerOverview();return N(r)}}})};try{N.displayName="transformExplorerSummaryResponse",N.__docgenInfo={description:"",displayName:"transformExplorerSummaryResponse",props:{explorerSummary:{defaultValue:null,description:"",name:"explorerSummary",required:!0,type:{name:"CappuccinoExplorerSummary"}},toJSON:{defaultValue:null,description:"",name:"toJSON",required:!0,type:{name:"() => unknown"}}}}}catch{}try{te.displayName="ProvideCappuccinoBlockDetailDataSource",te.__docgenInfo={description:`ProvideCappuccinoBlockDetailDataSource is a component that converts
the HotShot Query Service for Cappuccino into a BlockDetailAsyncRetriever.`,displayName:"ProvideCappuccinoBlockDetailDataSource",props:{}}}catch{}try{re.displayName="ProvideCappuccinoBlocksSummaryDataSource",re.__docgenInfo={description:`ProvideCappuccinoBlocksSummaryDataSource is a component that converts
the HotShot Query Service for Cappuccino into a BlockSummaryAsyncRetriever.`,displayName:"ProvideCappuccinoBlocksSummaryDataSource",props:{blocksPerPage:{defaultValue:{value:"20"},description:"",name:"blocksPerPage",required:!1,type:{name:"number"}}}}}catch{}try{ae.displayName="ProvideCappuccinoTransactionsSummaryDataSource",ae.__docgenInfo={description:`ProvideCappuccinoTransactionsSummaryDataSource is a component that converts
the HotShot Query Service for Cappuccino into a
TransactionSummaryAsyncRetriever.`,displayName:"ProvideCappuccinoTransactionsSummaryDataSource",props:{transactionsPerPage:{defaultValue:{value:"20"},description:"",name:"transactionsPerPage",required:!1,type:{name:"number"}}}}}catch{}try{oe.displayName="ProvideCappuccinoTransactionsForBlockSummaryDataSource",oe.__docgenInfo={description:"",displayName:"ProvideCappuccinoTransactionsForBlockSummaryDataSource",props:{transactionsPerPage:{defaultValue:{value:"20"},description:"",name:"transactionsPerPage",required:!1,type:{name:"number"}}}}}catch{}try{se.displayName="ProvideCappuccinoTransactionDetailDataSource",se.__docgenInfo={description:`ProvideCappuccinoTransactionDetailDataSource is a component that converts
the HotShot Query Service for Cappuccino into a
TransactionDetailAsyncRetriever.`,displayName:"ProvideCappuccinoTransactionDetailDataSource",props:{}}}catch{}try{ne.displayName="ProvideCappuccinoRollUpDetailDataSource",ne.__docgenInfo={description:`ProvideCappuccinoRollUpDetailDataSource is a component that converts
the HotShot Query Service for Cappuccino into a RollUpDetailAsyncRetriever.`,displayName:"ProvideCappuccinoRollUpDetailDataSource",props:{transactionsPerPage:{defaultValue:{value:"20"},description:"",name:"transactionsPerPage",required:!1,type:{name:"number"}}}}}catch{}try{ce.displayName="ProvideCappuccinoRollUpsSummaryDataSource",ce.__docgenInfo={description:`ProvideCappuccinoRollUpsSummaryDataSource is a component that converts
the HotShot Query Service for Cappuccino into a RollUpSummaryAsyncRetriever.`,displayName:"ProvideCappuccinoRollUpsSummaryDataSource",props:{transactionsPerPage:{defaultValue:{value:"20"},description:"",name:"transactionsPerPage",required:!1,type:{name:"number"}}}}}catch{}try{ie.displayName="ProvideCappuccinoLatestBlockDetails",ie.__docgenInfo={description:"",displayName:"ProvideCappuccinoLatestBlockDetails",props:{}}}catch{}try{le.displayName="ProvideCappuccinoExplorerSummaryAsyncStream",le.__docgenInfo={description:"",displayName:"ProvideCappuccinoExplorerSummaryAsyncStream",props:{}}}catch{}try{pe.displayName="ProvideCappuccinoExplorerSummary",pe.__docgenInfo={description:"",displayName:"ProvideCappuccinoExplorerSummary",props:{}}}catch{}export{J as B,Q as E,H as L,E as N,W as P,K as R,Y as T,$ as a,X as b,ee as c,te as d,re as e,le as f,ne as g,ce as h,se as i,oe as j,ae as k,M as l,Z as m,x as n,O as o,j as p,G as q};
