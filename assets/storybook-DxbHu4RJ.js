import{g as Ae,j as Q}from"./iframe-JNS3S7eL.js";import{E as j,a as qe}from"./environment_banner-CxyxucrT.js";import{E as Re}from"./espresso-rotjY2fB.js";import{B as Me}from"./explorer-Bmf1ITpI.js";import{s as K,T as re,H as z,B as Qe,h as je,j as xe,R as Te,k as F,P as T,S as se,C as Z,n as ie,U as R,w as De,m as V,v as J,o as D,p as Ue,q as Le,r as Fe,t as Ee,M as Ne,u as O,x as oe,y as M,z as Pe,Q as He,A as ae,D as We,E as ce,F as ue,G as Be,I as le,J as de,K as $e,L as $,N as Ke,W as ze,O as Ve,V as Je,X as Ge}from"./en_US-RFN65H63-CnDvuU9W.js";import{w as fe}from"./wallet_address-DSnMXMW7.js";function _e(e,{errorInstance:t=new Error("timed out"),timeout:n,signal:s}){return new Promise((i,o)=>{(async()=>{let p;try{const l=new AbortController;n>0&&(p=setTimeout(()=>{s?l.abort():o(t)},n)),i(await e({signal:l?.signal||null}))}catch(l){l?.name==="AbortError"&&o(t),o(l)}finally{clearTimeout(p)}})()})}function Xe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const he=Xe();function Ze(e,t={}){return{async request(n){const{body:s,fetchFn:i=t.fetchFn??fetch,onRequest:o=t.onRequest,onResponse:p=t.onResponse,timeout:l=t.timeout??1e4}=n,a={...t.fetchOptions??{},...n.fetchOptions??{}},{headers:r,method:c,signal:v}=a;try{const h=await _e(async({signal:g})=>{const f={...a,body:Array.isArray(s)?K(s.map(b=>({jsonrpc:"2.0",id:b.id??he.take(),...b}))):K({jsonrpc:"2.0",id:s.id??he.take(),...s}),headers:{"Content-Type":"application/json",...r},method:c||"POST",signal:v||(l>0?g:null)},d=new Request(e,f),E=await o?.(d,f)??{...f,url:e};return await i(E.url??e,E)},{errorInstance:new re({body:s,url:e}),timeout:l,signal:!0});p&&await p(h);let w;if(h.headers.get("Content-Type")?.startsWith("application/json"))w=await h.json();else{w=await h.text();try{w=JSON.parse(w||"{}")}catch(g){if(h.ok)throw g;w={error:w}}}if(!h.ok)throw new z({body:s,details:K(w.error)||h.statusText,headers:h.headers,status:h.status,url:e});return w}catch(h){throw h instanceof z||h instanceof re?h:new z({body:s,cause:h,url:e})}}}}class Ye extends Qe{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function U(e,t={}){const{batch:n,fetchFn:s,fetchOptions:i,key:o="http",methods:p,name:l="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:r,retryDelay:c,raw:v}=t;return({chain:h,retryCount:w,timeout:g})=>{const{batchSize:f=1e3,wait:d=0}=typeof n=="object"?n:{},E=t.retryCount??w,S=g??t.timeout??1e4,b=h?.rpcUrls.default.http[0];if(!b)throw new Ye;const P=Ze(b,{fetchFn:s,fetchOptions:i,onRequest:a,onResponse:r,timeout:S});return je({key:o,methods:p,name:l,async request({method:u,params:m}){const y={method:u,params:m},{schedule:I}=xe({id:b,wait:d,shouldSplitBatch(q){return q.length>f},fn:q=>P.request({body:q}),sort:(q,k)=>q.id-k.id}),C=async q=>n?I(q):[await P.request({body:q})],[{error:_,result:A}]=await C(y);if(v)return{error:_,result:A};if(_)throw new Te({body:y,error:_,url:b});return A},retryCount:E,retryDelay:c,timeout:S,type:"http"},{fetchOptions:i,url:b})}}ne.type="injected";function ne(e={}){const{shimDisconnect:t=!0,unstable_shimAsyncInject:n}=e;function s(){const a=e.target;if(typeof a=="function"){const r=a();if(r)return r}return typeof a=="object"?a:typeof a=="string"?{...et[a]??{id:a,name:`${a[0].toUpperCase()}${a.slice(1)}`,provider:`is${a[0].toUpperCase()}${a.slice(1)}`}}:{id:"injected",name:"Injected",provider(r){return r?.ethereum}}}let i,o,p,l;return a=>({get icon(){return s().icon},get id(){return s().id},get name(){return s().name},get supportsSimulation(){return!0},type:ne.type,async setup(){const r=await this.getProvider();r?.on&&e.target&&(p||(p=this.onConnect.bind(this),r.on("connect",p)),i||(i=this.onAccountsChanged.bind(this),r.on("accountsChanged",i)))},async connect({chainId:r,isReconnecting:c,withCapabilities:v}={}){const h=await this.getProvider();if(!h)throw new T;let w=[];if(c)w=await this.getAccounts().catch(()=>[]);else if(t)try{w=(await h.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0]?.caveats?.[0]?.value?.map(f=>F(f)),w.length>0&&(w=await this.getAccounts())}catch(g){const f=g;if(f.code===R.code)throw new R(f);if(f.code===V.code)throw f}try{!w?.length&&!c&&(w=(await h.request({method:"eth_requestAccounts"})).map(d=>F(d))),p&&(h.removeListener("connect",p),p=void 0),i||(i=this.onAccountsChanged.bind(this),h.on("accountsChanged",i)),o||(o=this.onChainChanged.bind(this),h.on("chainChanged",o)),l||(l=this.onDisconnect.bind(this),h.on("disconnect",l));let g=await this.getChainId();return r&&g!==r&&(g=(await this.switchChain({chainId:r}).catch(d=>{if(d.code===R.code)throw d;return{id:g}}))?.id??g),t&&await a.storage?.removeItem(`${this.id}.disconnected`),e.target||await a.storage?.setItem("injected.connected",!0),{accounts:v?w.map(f=>({address:f,capabilities:{}})):w,chainId:g}}catch(g){const f=g;throw f.code===R.code?new R(f):f.code===V.code?new V(f):f}},async disconnect(){const r=await this.getProvider();if(!r)throw new T;o&&(r.removeListener("chainChanged",o),o=void 0),l&&(r.removeListener("disconnect",l),l=void 0),p||(p=this.onConnect.bind(this),r.on("connect",p));try{await _e(()=>r.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}t&&await a.storage?.setItem(`${this.id}.disconnected`,!0),e.target||await a.storage?.removeItem("injected.connected")},async getAccounts(){const r=await this.getProvider();if(!r)throw new T;return(await r.request({method:"eth_accounts"})).map(v=>F(v))},async getChainId(){const r=await this.getProvider();if(!r)throw new T;const c=await r.request({method:"eth_chainId"});return Number(c)},async getProvider(){if(typeof window>"u")return;let r;const c=s();return typeof c.provider=="function"?r=c.provider(window):typeof c.provider=="string"?r=B(window,c.provider):r=c.provider,r&&!r.removeListener&&("off"in r&&typeof r.off=="function"?r.removeListener=r.off:r.removeListener=()=>{}),r},async isAuthorized(){try{if(t&&await a.storage?.getItem(`${this.id}.disconnected`)||!e.target&&!await a.storage?.getItem("injected.connected"))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const h=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",h),!!await this.getProvider()),w=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(f=>window.addEventListener("ethereum#initialized",()=>f(h()),{once:!0}))]:[],new Promise(f=>setTimeout(()=>f(h()),w))]))return!0}throw new T}return!!(await De(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:r,chainId:c}){const v=await this.getProvider();if(!v)throw new T;const h=a.chains.find(g=>g.id===c);if(!h)throw new se(new Z);const w=new Promise(g=>{const f=(d=>{"chainId"in d&&d.chainId===c&&(a.emitter.off("change",f),g())});a.emitter.on("change",f)});try{return await Promise.all([v.request({method:"wallet_switchEthereumChain",params:[{chainId:ie(c)}]}).then(async()=>{await this.getChainId()===c&&a.emitter.emit("change",{chainId:c})}),w]),h}catch(g){const f=g;if(f.code===4902||f?.data?.originalError?.code===4902)try{const{default:d,...E}=h.blockExplorers??{};let S;r?.blockExplorerUrls?S=r.blockExplorerUrls:d&&(S=[d.url,...Object.values(E).map(u=>u.url)]);let b;r?.rpcUrls?.length?b=r.rpcUrls:b=[h.rpcUrls.default?.http[0]??""];const P={blockExplorerUrls:S,chainId:ie(c),chainName:r?.chainName??h.name,iconUrls:r?.iconUrls,nativeCurrency:r?.nativeCurrency??h.nativeCurrency,rpcUrls:b};return await Promise.all([v.request({method:"wallet_addEthereumChain",params:[P]}).then(async()=>{if(await this.getChainId()===c)a.emitter.emit("change",{chainId:c});else throw new R(new Error("User rejected switch after adding network."))}),w]),h}catch(d){throw new R(d)}throw f.code===R.code?new R(f):new se(f)}},async onAccountsChanged(r){if(r.length===0)this.onDisconnect();else if(a.emitter.listenerCount("connect")){const c=(await this.getChainId()).toString();this.onConnect({chainId:c}),t&&await a.storage?.removeItem(`${this.id}.disconnected`)}else a.emitter.emit("change",{accounts:r.map(c=>F(c))})},onChainChanged(r){const c=Number(r);a.emitter.emit("change",{chainId:c})},async onConnect(r){const c=await this.getAccounts();if(c.length===0)return;const v=Number(r.chainId);a.emitter.emit("connect",{accounts:c,chainId:v});const h=await this.getProvider();h&&(p&&(h.removeListener("connect",p),p=void 0),i||(i=this.onAccountsChanged.bind(this),h.on("accountsChanged",i)),o||(o=this.onChainChanged.bind(this),h.on("chainChanged",o)),l||(l=this.onDisconnect.bind(this),h.on("disconnect",l)))},async onDisconnect(r){const c=await this.getProvider();r&&r.code===1013&&c&&(await this.getAccounts()).length||(a.emitter.emit("disconnect"),c&&(o&&(c.removeListener("chainChanged",o),o=void 0),l&&(c.removeListener("disconnect",l),l=void 0),p||(p=this.onConnect.bind(this),c.on("connect",p))))}})}const et={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(e){return e?.coinbaseWalletExtension?e.coinbaseWalletExtension:B(e,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(e){return B(e,t=>{if(!t.isMetaMask||t.isBraveWallet&&!t._events&&!t._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const s of n)if(t[s])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(e){return e?.phantom?.ethereum?e.phantom?.ethereum:B(e,"isPhantom")}}};function B(e,t){function n(i){return typeof t=="function"?t(i):typeof t=="string"?i[t]:!0}const s=e.ethereum;if(s?.providers)return s.providers.find(i=>n(i));if(s&&n(s))return s}function tt(e){if(typeof window>"u")return;const t=n=>e(n.detail);return window.addEventListener("eip6963:announceProvider",t),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",t)}function nt(){const e=new Set;let t=[];const n=()=>tt(i=>{t.some(({info:o})=>o.uuid===i.info.uuid)||(t=[...t,i],e.forEach(o=>o(t,{added:[i]})))});let s=n();return{_listeners(){return e},clear(){e.forEach(i=>i([],{removed:[...t]})),t=[]},destroy(){this.clear(),e.clear(),s?.()},findProvider({rdns:i}){return t.find(o=>o.info.rdns===i)},getProviders(){return t},reset(){this.clear(),s?.(),s=n()},subscribe(i,{emitImmediately:o}={}){return e.add(i),o&&i(t,{added:t}),()=>e.delete(i)}}}const rt=e=>(t,n,s)=>{const i=s.subscribe;return s.subscribe=(p,l,a)=>{let r=p;if(l){const c=a?.equalityFn||Object.is;let v=p(s.getState());r=h=>{const w=p(h);if(!c(v,w)){const g=v;l(v=w,g)}},a?.fireImmediately&&l(v,v)}return i(r)},e(t,n,s)},st=rt;function it(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var o;const p=a=>a===null?null:JSON.parse(a,void 0),l=(o=n.getItem(i))!=null?o:null;return l instanceof Promise?l.then(p):p(l)},setItem:(i,o)=>n.setItem(i,JSON.stringify(o,void 0)),removeItem:i=>n.removeItem(i)}}const Y=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(s){return Y(s)(n)},catch(s){return this}}}catch(n){return{then(s){return this},catch(s){return Y(s)(n)}}}},ot=(e,t)=>(n,s,i)=>{let o={storage:it(()=>localStorage),partialize:f=>f,version:0,merge:(f,d)=>({...d,...f}),...t},p=!1;const l=new Set,a=new Set;let r=o.storage;if(!r)return e((...f)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...f)},s,i);const c=()=>{const f=o.partialize({...s()});return r.setItem(o.name,{state:f,version:o.version})},v=i.setState;i.setState=(f,d)=>{v(f,d),c()};const h=e((...f)=>{n(...f),c()},s,i);i.getInitialState=()=>h;let w;const g=()=>{var f,d;if(!r)return;p=!1,l.forEach(S=>{var b;return S((b=s())!=null?b:h)});const E=((d=o.onRehydrateStorage)==null?void 0:d.call(o,(f=s())!=null?f:h))||void 0;return Y(r.getItem.bind(r))(o.name).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==o.version){if(o.migrate)return[!0,o.migrate(S.state,S.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,S.state];return[!1,void 0]}).then(S=>{var b;const[P,u]=S;if(w=o.merge(u,(b=s())!=null?b:h),n(w,!0),P)return c()}).then(()=>{E?.(w,void 0),w=s(),p=!0,a.forEach(S=>S(w))}).catch(S=>{E?.(void 0,S)})};return i.persist={setOptions:f=>{o={...o,...f},f.storage&&(r=f.storage)},clearStorage:()=>{r?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>g(),hasHydrated:()=>p,onHydrate:f=>(l.add(f),()=>{l.delete(f)}),onFinishHydration:f=>(a.add(f),()=>{a.delete(f)})},o.skipHydration||g(),w||h},at=ot,pe=e=>{let t;const n=new Set,s=(r,c)=>{const v=typeof r=="function"?r(t):r;if(!Object.is(v,t)){const h=t;t=c??(typeof v!="object"||v===null)?v:Object.assign({},t,v),n.forEach(w=>w(t,h))}},i=()=>t,l={setState:s,getState:i,getInitialState:()=>a,subscribe:r=>(n.add(r),()=>n.delete(r))},a=t=e(s,i,l);return l},G=e=>e?pe(e):pe;var X={exports:{}},me;function ct(){return me||(me=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function i(a,r,c){this.fn=a,this.context=r,this.once=c||!1}function o(a,r,c,v,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var w=new i(c,v||a,h),g=n?n+r:r;return a._events[g]?a._events[g].fn?a._events[g]=[a._events[g],w]:a._events[g].push(w):(a._events[g]=w,a._eventsCount++),a}function p(a,r){--a._eventsCount===0?a._events=new s:delete a._events[r]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var r=[],c,v;if(this._eventsCount===0)return r;for(v in c=this._events)t.call(c,v)&&r.push(n?v.slice(1):v);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(c)):r},l.prototype.listeners=function(r){var c=n?n+r:r,v=this._events[c];if(!v)return[];if(v.fn)return[v.fn];for(var h=0,w=v.length,g=new Array(w);h<w;h++)g[h]=v[h].fn;return g},l.prototype.listenerCount=function(r){var c=n?n+r:r,v=this._events[c];return v?v.fn?1:v.length:0},l.prototype.emit=function(r,c,v,h,w,g){var f=n?n+r:r;if(!this._events[f])return!1;var d=this._events[f],E=arguments.length,S,b;if(d.fn){switch(d.once&&this.removeListener(r,d.fn,void 0,!0),E){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,c),!0;case 3:return d.fn.call(d.context,c,v),!0;case 4:return d.fn.call(d.context,c,v,h),!0;case 5:return d.fn.call(d.context,c,v,h,w),!0;case 6:return d.fn.call(d.context,c,v,h,w,g),!0}for(b=1,S=new Array(E-1);b<E;b++)S[b-1]=arguments[b];d.fn.apply(d.context,S)}else{var P=d.length,u;for(b=0;b<P;b++)switch(d[b].once&&this.removeListener(r,d[b].fn,void 0,!0),E){case 1:d[b].fn.call(d[b].context);break;case 2:d[b].fn.call(d[b].context,c);break;case 3:d[b].fn.call(d[b].context,c,v);break;case 4:d[b].fn.call(d[b].context,c,v,h);break;default:if(!S)for(u=1,S=new Array(E-1);u<E;u++)S[u-1]=arguments[u];d[b].fn.apply(d[b].context,S)}}return!0},l.prototype.on=function(r,c,v){return o(this,r,c,v,!1)},l.prototype.once=function(r,c,v){return o(this,r,c,v,!0)},l.prototype.removeListener=function(r,c,v,h){var w=n?n+r:r;if(!this._events[w])return this;if(!c)return p(this,w),this;var g=this._events[w];if(g.fn)g.fn===c&&(!h||g.once)&&(!v||g.context===v)&&p(this,w);else{for(var f=0,d=[],E=g.length;f<E;f++)(g[f].fn!==c||h&&!g[f].once||v&&g[f].context!==v)&&d.push(g[f]);d.length?this._events[w]=d.length===1?d[0]:d:p(this,w)}return this},l.prototype.removeAllListeners=function(r){var c;return r?(c=n?n+r:r,this._events[c]&&p(this,c)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(X)),X.exports}var ut=ct();const lt=Ae(ut);class dt{constructor(t){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new lt})}on(t,n){this._emitter.on(t,n)}once(t,n){this._emitter.once(t,n)}off(t,n){this._emitter.off(t,n)}emit(t,...n){const s=n[0];this._emitter.emit(t,{uid:this.uid,...s})}listenerCount(t){return this._emitter.listenerCount(t)}}function ft(e){return new dt(e)}function ht(e,t){return JSON.parse(e,(n,s)=>{let i=s;return i?.__type==="bigint"&&(i=BigInt(i.value)),i?.__type==="Map"&&(i=new Map(i.value)),t?.(n,i)??i})}function ge(e,t){return e.slice(0,t).join(".")||"."}function ye(e,t){const{length:n}=e;for(let s=0;s<n;++s)if(e[s]===t)return s+1;return 0}function pt(e,t){const n=typeof e=="function",s=typeof t=="function",i=[],o=[];return function(l,a){if(typeof a=="object")if(i.length){const r=ye(i,this);r===0?i[i.length]=this:(i.splice(r),o.splice(r)),o[o.length]=l;const c=ye(i,a);if(c!==0)return s?t.call(this,l,a,ge(o,c)):`[ref=${ge(o,c)}]`}else i[0]=a,o[0]=l;return n?e.call(this,l,a):a}}function mt(e,t,n,s){return JSON.stringify(e,pt((i,o)=>{let p=o;return typeof p=="bigint"&&(p={__type:"bigint",value:o.toString()}),p instanceof Map&&(p={__type:"Map",value:Array.from(o.entries())}),t?.(i,p)??p},s),n??void 0)}function gt(e){const{deserialize:t=ht,key:n="wagmi",serialize:s=mt,storage:i=ke}=e;function o(p){return p instanceof Promise?p.then(l=>l).catch(()=>null):p}return{...i,key:n,async getItem(p,l){const a=i.getItem(`${n}.${p}`),r=await o(a);return r?t(r)??null:l??null},async setItem(p,l){const a=`${n}.${p}`;l===null?await o(i.removeItem(a)):await o(i.setItem(a,s(l)))},async removeItem(p){await o(i.removeItem(`${n}.${p}`))}}}const ke={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function yt(){const e=typeof window<"u"&&window.localStorage?window.localStorage:ke;return{getItem(t){return e.getItem(t)},removeItem(t){e.removeItem(t)},setItem(t,n){try{e.setItem(t,n)}catch{}}}}const ee=256;let N=ee,H;function vt(e=11){if(!H||N+e>ee*2){H="",N=0;for(let t=0;t<ee;t++)H+=(256+Math.random()*256|0).toString(16).substring(1)}return H.substring(N,N+++e)}function L(e){const{multiInjectedProviderDiscovery:t=!0,storage:n=gt({storage:yt()}),syncConnectedChain:s=!0,ssr:i=!1,...o}=e,p=typeof window<"u"&&t?nt():void 0,l=G(()=>o.chains),a=G(()=>{const u=[],m=new Set;for(const y of o.connectors??[]){const I=r(y);if(u.push(I),!i&&I.rdns){const C=typeof I.rdns=="string"?[I.rdns]:I.rdns;for(const _ of C)m.add(_)}}if(!i&&p){const y=p.getProviders();for(const I of y)m.has(I.info.rdns)||u.push(r(c(I)))}return u});function r(u){const m=ft(vt()),y={...u({emitter:m,chains:l.getState(),storage:n,transports:o.transports}),emitter:m,uid:m.uid};return m.on("connect",b),y.setup?.(),y}function c(u){const{info:m}=u,y=u.provider;return ne({target:{...m,id:m.rdns,provider:y}})}const v=new Map;function h(u={}){const m=u.chainId??d.getState().chainId,y=l.getState().find(C=>C.id===m);if(u.chainId&&!y)throw new Z;{const C=v.get(d.getState().chainId);if(C&&!y)return C;if(!y)throw new Z}{const C=v.get(m);if(C)return C}let I;if(o.client)I=o.client({chain:y});else{const C=y.id,_=l.getState().map(k=>k.id),A={},q=Object.entries(o);for(const[k,x]of q)if(!(k==="chains"||k==="client"||k==="connectors"||k==="transports"))if(typeof x=="object")if(C in x)A[k]=x[C];else{if(_.some(Oe=>Oe in x))continue;A[k]=x}else A[k]=x;I=D({...A,chain:y,batch:A.batch??{multicall:!0},transport:k=>o.transports[C]({...k,connectors:a})})}return v.set(m,I),I}function w(){return{chainId:l.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let g;const f="0.0.0-canary-";J.startsWith(f)?g=Number.parseInt(J.replace(f,""),10):g=Number.parseInt(J.split(".")[0]??"0",10);const d=G(st(n?at(w,{migrate(u,m){if(m===g)return u;const y=w(),I=E(u,y.chainId);return{...y,chainId:I}},name:"store",partialize(u){return{connections:{__type:"Map",value:Array.from(u.connections.entries()).map(([m,y])=>{const{id:I,name:C,type:_,uid:A}=y.connector;return[m,{...y,connector:{id:I,name:C,type:_,uid:A}}]})},chainId:u.chainId,current:u.current}},merge(u,m){typeof u=="object"&&u&&"status"in u&&delete u.status;const y=E(u,m.chainId);return{...m,...u,chainId:y}},skipHydration:i,storage:n,version:g}):w));d.setState(w());function E(u,m){return u&&typeof u=="object"&&"chainId"in u&&typeof u.chainId=="number"&&l.getState().some(y=>y.id===u.chainId)?u.chainId:m}s&&d.subscribe(({connections:u,current:m})=>m?u.get(m)?.chainId:void 0,u=>{if(l.getState().some(y=>y.id===u))return d.setState(y=>({...y,chainId:u??y.chainId}))}),p?.subscribe(u=>{const m=new Set,y=new Set;for(const C of a.getState())if(m.add(C.id),C.rdns){const _=typeof C.rdns=="string"?[C.rdns]:C.rdns;for(const A of _)y.add(A)}const I=[];for(const C of u){if(y.has(C.info.rdns))continue;const _=r(c(C));m.has(_.id)||I.push(_)}n&&!d.persist.hasHydrated()||a.setState(C=>[...C,...I],!0)});function S(u){d.setState(m=>{const y=m.connections.get(u.uid);return y?{...m,connections:new Map(m.connections).set(u.uid,{accounts:u.accounts??y.accounts,chainId:u.chainId??y.chainId,connector:y.connector})}:m})}function b(u){d.getState().status==="connecting"||d.getState().status==="reconnecting"||d.setState(m=>{const y=a.getState().find(I=>I.uid===u.uid);return y?(y.emitter.listenerCount("connect")&&y.emitter.off("connect",S),y.emitter.listenerCount("change")||y.emitter.on("change",S),y.emitter.listenerCount("disconnect")||y.emitter.on("disconnect",P),{...m,connections:new Map(m.connections).set(u.uid,{accounts:u.accounts,chainId:u.chainId,connector:y}),current:u.uid,status:"connected"}):m})}function P(u){d.setState(m=>{const y=m.connections.get(u.uid);if(y){const C=y.connector;C.emitter.listenerCount("change")&&y.connector.emitter.off("change",S),C.emitter.listenerCount("disconnect")&&y.connector.emitter.off("disconnect",P),C.emitter.listenerCount("connect")||y.connector.emitter.on("connect",b)}if(m.connections.delete(u.uid),m.connections.size===0)return{...m,connections:new Map,current:null,status:"disconnected"};const I=m.connections.values().next().value;return{...m,connections:new Map(m.connections),current:I.connector.uid}})}return{get chains(){return l.getState()},get connectors(){return a.getState()},storage:n,getClient:h,get state(){return d.getState()},setState(u){let m;typeof u=="function"?m=u(d.getState()):m=u;const y=w();typeof m!="object"&&(m=y),Object.keys(y).some(C=>!(C in m))&&(m=y),d.setState(m,!0)},subscribe(u,m,y){return d.subscribe(u,m,y?{...y,fireImmediately:y.emitImmediately}:void 0)},_internal:{mipd:p,async revalidate(){const u=d.getState(),m=u.connections;let y=u.current;for(const[,I]of m){const C=I.connector;C.isAuthorized&&await C.isAuthorized()||(m.delete(C.uid),y===C.uid&&(y=null))}d.setState(I=>({...I,connections:m,current:y}))},store:d,ssr:!!i,syncConnectedChain:s,transports:o.transports,chains:{setState(u){const m=typeof u=="function"?u(l.getState()):u;if(m.length!==0)return l.setState(m,!0)},subscribe(u){return l.subscribe(u)}},connectors:{providerDetailToConnector:c,setup:r,setState(u){return a.setState(typeof u=="function"?u(a.getState()):u,!0)},subscribe(u){return a.subscribe(u)}},events:{change:S,connect:b,disconnect:P}}}}function ve(e){return{onFetch:(t,n)=>{const s=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],p=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},a=0;const r=async()=>{let c=!1;const v=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(t.signal.aborted?c=!0:t.signal.addEventListener("abort",()=>{c=!0}),t.signal)})},h=Ue(t.options,t.fetchOptions),w=async(g,f,d)=>{if(c)return Promise.reject();if(f==null&&g.pages.length)return Promise.resolve(g);const S=(()=>{const m={client:t.client,queryKey:t.queryKey,pageParam:f,direction:d?"backward":"forward",meta:t.options.meta};return v(m),m})(),b=await h(S),{maxPages:P}=t.options,u=d?Le:Fe;return{pages:u(g.pages,b,P),pageParams:u(g.pageParams,f,P)}};if(i&&o.length){const g=i==="backward",f=g?wt:we,d={pages:o,pageParams:p},E=f(s,d);l=await w(d,E,g)}else{const g=e??o.length;do{const f=a===0?p[0]??s.initialPageParam:we(s,l);if(a>0&&f==null)break;l=await w(l,f),a++}while(a<g)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(r,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=r}}}function we(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function wt(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var bt=class extends Ee{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,t,n){const s=new Ne({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:n});return this.add(s),s}add(e){this.#e.add(e);const t=W(e);if(typeof t=="string"){const n=this.#t.get(t);n?n.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=W(e);if(typeof t=="string"){const n=this.#t.get(t);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=W(e);if(typeof t=="string"){const s=this.#t.get(t)?.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){const t=W(e);return typeof t=="string"?this.#t.get(t)?.find(s=>s!==e&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){O.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(n=>oe(t,n))}findAll(e={}){return this.getAll().filter(t=>oe(e,t))}notify(e){O.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return O.batch(()=>Promise.all(e.map(t=>t.continue().catch(M))))}};function W(e){return e.options.scope?.id}var Ct=class extends Ee{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const s=t.queryKey,i=t.queryHash??Pe(s,t);let o=this.get(i);return o||(o=new He({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){O.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>ae(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>ae(e,n)):t}notify(e){O.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){O.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){O.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},St=class{#e;#t;#n;#s;#i;#r;#o;#a;constructor(e={}){this.#e=e.queryCache||new Ct,this.#t=e.mutationCache||new bt,this.#n=e.defaultOptions||{},this.#s=new Map,this.#i=new Map,this.#r=0}mount(){this.#r++,this.#r===1&&(this.#o=We.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=ce.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#r--,this.#r===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#e.build(this,t),s=n.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(ue(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),o=this.#e.get(s.queryHash)?.state.data,p=Be(t,o);if(p!==void 0)return this.#e.build(this,s).setData(p,{...n,manual:!0})}setQueriesData(e,t,n){return O.batch(()=>this.#e.findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;O.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e;return O.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},s=O.batch(()=>this.#e.findAll(e).map(i=>i.cancel(n)));return Promise.all(s).then(M).catch(M)}invalidateQueries(e,t={}){return O.batch(()=>(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},s=O.batch(()=>this.#e.findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(M)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(M)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(ue(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(M).catch(M)}fetchInfiniteQuery(e){return e.behavior=ve(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(M).catch(M)}ensureInfiniteQueryData(e){return e.behavior=ve(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ce.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,t){this.#s.set(le(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#s.values()],n={};return t.forEach(s=>{de(e,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(e,t){this.#i.set(le(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#i.values()],n={};return t.forEach(s=>{de(e,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Pe(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===$e&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}};const It=$({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:8928790}},testnet:!0});function Et(e=null,t=null){return{espTokenContractAddress:e??null,stakeTableContractAddress:t??null}}const Pt=L({chains:[Ke],client({chain:e}){return D({chain:e,transport:U()})}}),_t=L({chains:[It],client({chain:e}){return D({chain:e,transport:U()})}}),kt=L({chains:[$({id:900,name:"GETH (water)",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://geth.water.devnet.espresso.network"],webSocket:["wss://wsgeth.water.devnet.espresso.network"]}},testnet:!0})],client({chain:e}){return D({chain:e,transport:U()})}}),Ot=L({chains:[$({id:900,name:"GETH (milk)",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://geth.milk.devnet.espresso.network"],webSocket:["wss://wsgeth.milk.devnet.espresso.network"]}},testnet:!0})],client({chain:e}){return D({chain:e,transport:U()})}}),be=L({chains:[$({id:31337,name:"GETH (Local DevNet)",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["http://localhost:8545"],webSocket:["ws://localhost:8546"]}},testnet:!0})],client({chain:e}){return D({chain:e,transport:U()})}});function At(e){switch(e){case j.mainnet:return Pt;case j.decaf:return _t;case j.water:return kt;case j.milk:return Ot;case j.fakeData:return be;case j.localDevNet:return be;default:throw new Error(`Unsupported environment: ${e}`)}}const qt=new St;function Ce(e){if(e==null||e==="")return null;try{return new URL(e).toString()}catch(t){return console.error("Invalid URL provided:",e,t),null}}const te=({environment:e=j.fakeData,hotshotQueryServiceURL:t,nodeValidatorWebSocketURL:n,children:s})=>{const i={hotshotQueryServiceURL:Ce(t??null),nodeValidatorServiceURL:Ce(n??null)};return Q.jsx(qe.Provider,{value:e,children:Q.jsx(Me.Provider,{value:i,children:s})})};function Se(e){if(e==null||e===""||!e.startsWith("0x"))return null;const t=fe.decode(e);return fe.encode(t)}const Ie=({environment:e=j.fakeData,hotshotQueryServiceURL:t,nodeValidatorWebSocketURL:n,espTokenContractAddress:s,stakeTableContractAddress:i,children:o})=>{const p=At(e),l=Et(Se(s),Se(i));return Q.jsx(te,{environment:e,hotshotQueryServiceURL:t,nodeValidatorWebSocketURL:n,children:Q.jsx(Re.Provider,{value:l,children:Q.jsx(ze,{config:p,children:Q.jsx(Ve,{client:qt,children:Q.jsx(Je,{children:Q.jsx(Ge,{children:o})})})})})})};try{te.displayName="StoryBookSpecifyEnvironment",te.__docgenInfo={description:"",displayName:"StoryBookSpecifyEnvironment",props:{environment:{defaultValue:{value:"Environment.fakeData"},description:"",name:"environment",required:!1,type:{name:"enum",value:[{value:'"mainnet"'},{value:'"decaf"'},{value:'"milk"'},{value:'"water"'},{value:'"fakeData"'},{value:'"localDevNet"'}]}},hotshotQueryServiceURL:{defaultValue:null,description:"",name:"hotshotQueryServiceURL",required:!1,type:{name:"string"}},nodeValidatorWebSocketURL:{defaultValue:null,description:"",name:"nodeValidatorWebSocketURL",required:!1,type:{name:"string"}}}}}catch{}try{Ie.displayName="StoryBookSpecifyEnvironmentAndContracts",Ie.__docgenInfo={description:"",displayName:"StoryBookSpecifyEnvironmentAndContracts",props:{espTokenContractAddress:{defaultValue:null,description:"",name:"espTokenContractAddress",required:!1,type:{name:"string"}},stakeTableContractAddress:{defaultValue:null,description:"",name:"stakeTableContractAddress",required:!1,type:{name:"string"}},environment:{defaultValue:{value:"Environment.fakeData"},description:"",name:"environment",required:!1,type:{name:"enum",value:[{value:'"mainnet"'},{value:'"decaf"'},{value:'"milk"'},{value:'"water"'},{value:'"fakeData"'},{value:'"localDevNet"'}]}},hotshotQueryServiceURL:{defaultValue:null,description:"",name:"hotshotQueryServiceURL",required:!1,type:{name:"string"}},nodeValidatorWebSocketURL:{defaultValue:null,description:"",name:"nodeValidatorWebSocketURL",required:!1,type:{name:"string"}}}}}catch{}export{te as S,Ie as a};
