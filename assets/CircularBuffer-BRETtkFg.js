var ur=Object.defineProperty;var mr=(r,e,c)=>e in r?ur(r,e,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[e]=c;var o=(r,e,c)=>(mr(r,typeof e!="symbol"?e+"":e,c),c);import{T as a,k as ue,I as X,e as h,A as E,f as g,g as I,C as V,a as t,r as C,B as x,b as f,s as l,d as P,l as w,u as De,c as W,m as Be,n as pr,o as wr,p as $,q as K}from"./string-X3Gg19gt.js";import{h as m,u as Pe,s as Ae}from"./array_buffer-73_ZskUD.js";import{n,b as p}from"./base64-sUJ5_M47.js";import{t as i}from"./TaggedBase64-MUE_Sjuq.js";import{I as me,m as Oe}from"./monetary_value-DdH0GKvL.js";import"./FetchError-B3q-_EcF.js";import{M as Cr}from"./functional-C-MJgtC4.js";import"./NotFoundError-D27_4bN0.js";class fr{convert(e){if(!ue(e))throw new X(typeof e,"string");const c=new Date(e);if(Number.isNaN(c.valueOf()))throw new X("NaN","number");return c}}class vr{convert(e){return h(e,Date),e.toISOString()}}class br extends a{constructor(){super(...arguments);o(this,"encoder",new vr);o(this,"decoder",new fr)}}const y=new br;class Fe{constructor(e,c,s,d,u,v){o(this,"hash");o(this,"height");o(this,"proposerID");o(this,"numTransactions");o(this,"size");o(this,"time");this.hash=e,this.height=c,this.proposerID=s,this.numTransactions=d,this.size=u,this.time=v}toJSON(){return Y.encode(this)}}class xr{convert(e){return t(e,"hash","height","proposer_id","num_transactions","size","time"),new Fe(i.decode(e.hash),n.decode(e.height),m.decode(e.proposer_id),n.decode(e.num_transactions),n.decode(e.size),y.decode(e.time))}}class Er{convert(e){return h(e,Fe),{hash:i.encode(e.hash),height:n.encode(e.height),proposer_id:m.encode(e.proposerID),num_transactions:n.encode(e.numTransactions),size:n.encode(e.size),time:y.encode(e.time)}}}class gr extends V{constructor(){super(...arguments);o(this,"encoder",new Er);o(this,"decoder",new xr)}}const Y=new gr,Vc=new E(new g(Y),new I(Y)),ze=p;class Re{constructor(e,c,s,d,u,v){o(this,"hash");o(this,"rollups");o(this,"height");o(this,"time");o(this,"offset");o(this,"numTransactions");this.hash=e,this.rollups=c,this.height=s,this.time=d,this.offset=u,this.numTransactions=v}toJSON(){return Z.encode(this)}}class Ir{convert(e){return t(e,"hash","rollups","height","time","offset","num_transactions"),new Re(i.decode(e.hash),ze.decode(e.rollups),n.decode(e.height),y.decode(e.time),n.decode(e.offset),n.decode(e.num_transactions))}}class yr{convert(e){return h(e,Re),{hash:i.encode(e.hash),rollups:ze.encode(e.rollups),height:n.encode(e.height),time:y.encode(e.time),offset:n.encode(e.offset),num_transactions:n.encode(e.numTransactions)}}}class kr extends a{constructor(){super(...arguments);o(this,"encoder",new yr);o(this,"decoder",new Ir)}}const Z=new kr,Wc=new E(new g(Z),new I(Z));class j extends x{constructor(e="completer has already been completed"){super(e),Object.freeze(this)}}class Sr{convert(e){return t(e,"code","message"),f(e,j.name),new j(l.decode(e.message))}}class _r extends P{}class Tr extends a{constructor(){super(...arguments);o(this,"encoder",new _r);o(this,"decoder",new Sr)}}const Nr=new Tr;C(j.name,Nr);function M(){return w(!1,"completer is not ready, this should never be reached")}function J(){throw new j}class Dr{constructor(){o(this,"resolve",M);o(this,"reject",M);o(this,"completed",!1);o(this,"promise");this.promise=new Promise((e,c)=>{this.resolve=e,this.reject=c}),w(this.resolve!==M,"resolve should be set"),w(this.reject!==M,"resolve should be set")}get isCompleted(){return this.completed}complete(e){const c=this.resolve,s=this.reject;if(this.completed=!0,this.resolve=J,this.reject=J,e instanceof Promise){e.then(c,s);return}c(e)}completeError(e){this.reject(e),this.completed=!0,this.resolve=J,this.reject=J}}function Qc(){return new Dr}class L extends x{constructor(c,s=`no completer found for request id "${c}"`){super(s);o(this,"requestID");this.requestID=c,Object.freeze(this)}toJSON(){return Me.encode(this)}}class Br{convert(e){return t(e,"code","requestID","message"),f(e,L.name),new L(De.decode(e.requestID),l.decode(e.message))}}class Pr{convert(e){return h(e,L),{...W.convert(e),requestID:De.encode(e.requestID)}}}class Ar extends a{constructor(){super(...arguments);o(this,"encoder",new Pr);o(this,"decoder",new Br)}}const Me=new Ar;C(L.name,Me);class ee extends x{constructor(c,s="error in web worker"){super(s);o(this,"error");this.error=c,Object.freeze(this)}toJSON(){return Je.encode(this)}}class Or{convert(e){return t(e,"code","error","message"),f(e,ee.name),new ee(Be.decode(e.error),l.decode(e.message))}}class Fr{convert(e){return{...W.convert(e),error:Be.encode(e.error)}}}class zr extends a{constructor(){super(...arguments);o(this,"encoder",new Fr);o(this,"decoder",new Or)}}const Je=new zr;C(ee.name,Je);class He{constructor(e,c,s){o(this,"r");o(this,"s");o(this,"v");this.r=e,this.s=c,this.v=s}toJSON(){return pe.encode(this)}}class Rr{convert(e){return t(e,"r","s","v"),new He(m.decode(e.r),m.decode(e.s),n.decode(e.v))}}class Mr{convert(e){return h(e,He),{r:m.encode(e.r),s:m.encode(e.s),v:n.encode(e.v)}}}class Jr extends a{constructor(){super(...arguments);o(this,"encoder",new Mr);o(this,"decoder",new Rr)}}const pe=new Jr;class je{constructor(e,c){o(this,"account");o(this,"amount");this.account=e,this.amount=c}toJSON(){return we.encode(this)}}class Hr{convert(e){return t(e,"account","amount"),new je(m.decode(e.account),m.decode(e.amount))}}class jr{convert(e){return h(e,je),{account:m.encode(e.account),amount:m.encode(e.amount)}}}class Lr extends a{constructor(){super(...arguments);o(this,"encoder",new jr);o(this,"decoder",new Hr)}}const we=new Lr;class Le{constructor(e){o(this,"itemCodec");this.itemCodec=e}convert(e){return e===null?null:this.itemCodec.decode(e)}}class qe{constructor(e){o(this,"itemCodec");this.itemCodec=e}convert(e){return e===null?null:(pr(e),this.itemCodec.encode(e))}}class Ue extends a{constructor(c,s){super();o(this,"encoder");o(this,"decoder");this.encoder=s,this.decoder=c}}class Ve{constructor(e,c,s){o(this,"number");o(this,"timestamp");o(this,"hash");this.number=e,this.timestamp=c,this.hash=s}toJSON(){return re.encode(this)}}class qr{convert(e){return t(e,"number","timestamp","hash"),new Ve(n.decode(e.number),l.decode(e.timestamp),l.decode(e.hash))}}class Ur{convert(e){return h(e,Ve),{number:n.encode(e.number),timestamp:l.encode(e.timestamp),hash:l.encode(e.hash)}}}class Vr extends a{constructor(){super(...arguments);o(this,"encoder",new Ur);o(this,"decoder",new qr)}}const re=new Vr,We=new Ue(new Le(re),new qe(re));class Qe{constructor(e){o(this,"bytes");this.bytes=e}toJSON(){return Ce.encode(this)}}class Wr{convert(e){return t(e,"bytes"),new Qe(Pe.decode(e.bytes))}}class Qr{convert(e){return h(e,Qe),{bytes:Pe.encode(e.bytes)}}}class Gr extends a{constructor(){super(...arguments);o(this,"encoder",new Qr);o(this,"decoder",new Wr)}}const Ce=new Gr;class Ge{constructor(e,c,s,d,u,v,k,S,_,T){o(this,"height");o(this,"timestamp");o(this,"l1_head");o(this,"l1_finalized");o(this,"payload_commitment");o(this,"ns_table");o(this,"block_merkle_root");o(this,"fee_merkle_root");o(this,"builder_signature");o(this,"fee_info");this.height=e,this.timestamp=c,this.l1_head=s,this.l1_finalized=d,this.payload_commitment=u,this.ns_table=v,this.block_merkle_root=k,this.fee_merkle_root=S,this.builder_signature=_,this.fee_info=T}toJSON(){return A.encode(this)}}class $r{convert(e){return t(e,"height","timestamp","l1_head","l1_finalized","payload_commitment","ns_table","block_merkle_root","fee_merkle_root","builder_signature","fee_info"),new Ge(n.decode(e.height),n.decode(e.timestamp),n.decode(e.l1_head),We.decode(e.l1_finalized),p.decode(e.payload_commitment),Ce.decode(e.ns_table),i.decode(e.block_merkle_root),i.decode(e.fee_merkle_root),pe.decode(e.builder_signature),we.decode(e.fee_info))}}class Kr{convert(e){return h(e,Ge),{height:n.encode(e.height),timestamp:n.encode(e.timestamp),l1_head:n.encode(e.l1_head),l1_finalized:We.encode(e.l1_finalized),payload_commitment:p.encode(e.payload_commitment),ns_table:Ce.encode(e.ns_table),block_merkle_root:i.encode(e.block_merkle_root),fee_merkle_root:i.encode(e.fee_merkle_root),builder_signature:pe.encode(e.builder_signature),fee_info:we.encode(e.fee_info)}}}class Xr extends a{constructor(){super(...arguments);o(this,"encoder",new Kr);o(this,"decoder",new $r)}}const A=new Xr;class $e{constructor(e,c){o(this,"vm");o(this,"payload");this.vm=e,this.payload=c}toJSON(){return D.encode(this)}}class Yr{convert(e){return t(e,"vm","payload"),new $e(n.decode(e.vm),p.decode(e.payload))}}class Zr{convert(e){return h(e,$e),{vm:n.encode(e.vm),payload:p.encode(e.payload)}}}class eo extends a{constructor(){super(...arguments);o(this,"encoder",new Zr);o(this,"decoder",new Yr)}}const D=new eo,Gc=new E(new g(D),new I(D));class Ke{constructor(e,c,s,d,u){o(this,"header");o(this,"hash");o(this,"size");o(this,"num_transactions");o(this,"proposer_id");this.header=e,this.hash=c,this.size=s,this.num_transactions=d,this.proposer_id=u}toJSON(){return oe.encode(this)}}class ro{convert(e){return t(e,"header","hash","size","num_transactions","proposer_id"),new Ke(A.decode(e.header),i.decode(e.hash),n.decode(e.size),n.decode(e.num_transactions),m.decode(e.proposer_id))}}class oo{convert(e){return h(e,Ke),{header:A.encode(e.header),hash:i.encode(e.hash),size:n.encode(e.size),num_transactions:n.encode(e.num_transactions),proposer_id:m.encode(e.proposer_id)}}}class co extends a{constructor(){super(...arguments);o(this,"encoder",new oo);o(this,"decoder",new ro)}}const oe=new co,$c=new E(new g(oe),new I(oe));class Xe{constructor(e,c,s,d){o(this,"hash");o(this,"header");o(this,"offset");o(this,"transaction");this.hash=e,this.header=c,this.offset=s,this.transaction=d}toJSON(){return ce.encode(this)}}class so{convert(e){return t(e,"hash","header","offset","transaction"),new Xe(i.decode(e.hash),A.decode(e.header),n.decode(e.offset),D.decode(e.transaction))}}class no{convert(e){return h(e,Xe),{hash:i.encode(e.hash),header:A.encode(e.header),offset:n.encode(e.offset),transaction:D.encode(e.transaction)}}}class to extends a{constructor(){super(...arguments);o(this,"encoder",new no);o(this,"decoder",new so)}}const ce=new to,Kc=new E(new g(ce),new I(ce));class Ye{constructor(e,c){o(this,"width");o(this,"index");this.width=e,this.index=c}toJSON(){return fe.encode(this)}}class ao{convert(e){return t(e,"width","index"),new Ye(n.decode(e.width),n.decode(e.index))}}class io{convert(e){return h(e,Ye),{width:n.encode(e.width),index:n.encode(e.index)}}}class lo extends a{constructor(){super(...arguments);o(this,"encoder",new io);o(this,"decoder",new ao)}}const fe=new lo;class Ze{constructor(e,c,s,d){o(this,"order");o(this,"head");o(this,"bits");o(this,"data");this.order=e,this.head=c,this.bits=s,this.data=d}toJSON(){return ve.encode(this)}}class ho{convert(e){return t(e,"order","head","bits","data"),new Ze(l.decode(e.order),fe.decode(e.head),n.decode(e.bits),p.decode(e.data))}}class uo{convert(e){return h(e,Ze),{order:l.encode(e.order),head:fe.encode(e.head),bits:n.encode(e.bits),data:p.encode(e.data)}}}class mo extends a{constructor(){super(...arguments);o(this,"encoder",new uo);o(this,"decoder",new ho)}}const ve=new mo;class er{constructor(e,c){o(this,"signature");o(this,"bitvec");this.signature=e,this.bitvec=c}toJSON(){return se.encode(this)}}class po{convert(e){if(!wr(e)||e.length!==2)throw new X(typeof e,"Array");return new er(i.decode(e[0]),ve.decode(e[1]))}}class wo{convert(e){return h(e,er),[i.encode(e.signature),ve.encode(e.bitvec)]}}class Co extends a{constructor(){super(...arguments);o(this,"encoder",new wo);o(this,"decoder",new po)}}const se=new Co,Xc=new Ue(new Le(se),new qe(se));class O{}class be extends O{toJSON(){return xe.encode(this)}}class fo{convert(e){if(!ue(e)||e!=="Empty")throw new me;return new be}}class vo{convert(e){return h(e,be),"Empty"}}class bo extends a{constructor(){super(...arguments);o(this,"encoder",new vo);o(this,"decoder",new fo)}}const xe=new bo;class Ee extends O{constructor(c,s,d){super();o(this,"value");o(this,"pos");o(this,"elem");this.value=c,this.pos=s,this.elem=d}toJSON(){return ge.encode(this)}}class xo{convert(e){t(e,"Leaf");const c=e.Leaf;return t(c,"value","pos","elem"),new Ee(i.decode(c.value),i.decode(c.pos),i.decode(c.elem))}}class Eo{convert(e){return h(e,Ee),{Leaf:{value:i.encode(e.value),pos:i.encode(e.pos),elem:i.encode(e.elem)}}}}class go extends V{constructor(){super(...arguments);o(this,"encoder",new Eo);o(this,"decoder",new xo)}}const ge=new go;class Ie extends O{constructor(c){super();o(this,"value");this.value=c}toJSON(){return ye.encode(this)}}class Io{convert(e){t(e,"ForgettenSubtree");const c=e.ForgettenSubtree;return t(c,"value"),new Ie(i.decode(c.value))}}class yo{convert(e){return h(e,Ie),{ForgettenSubtree:{value:i.encode(e.value)}}}}class ko extends V{constructor(){super(...arguments);o(this,"encoder",new yo);o(this,"decoder",new Io)}}const ye=new ko;class ke extends O{constructor(c,s){super();o(this,"value");o(this,"children");this.value=c,this.children=s}toJSON(){return Se.encode(this)}}class So{convert(e){t(e,"Branch");const c=e.Branch;return t(c,"value","children"),new ke(i.decode(c.value),rr.decode(c.children))}}class _o{convert(e){return h(e,ke),{Branch:{value:i.encode(e.value),children:rr.encode(e.children)}}}}class To extends a{constructor(){super(...arguments);o(this,"encoder",new _o);o(this,"decoder",new So)}}const Se=new To;class No{convert(e){if($(e,"Leaf",K))return ge.decoder.convert(e);if($(e,"Branch",K))return Se.decoder.convert(e);if($(e,"ForgettenSubtree",K))return ye.decoder.convert(e);if(ue(e))return xe.decoder.convert(e);throw new me}}class Do{convert(e){if(h(e,O),e instanceof Ee)return ge.encode(e);if(e instanceof ke)return Se.encode(e);if(e instanceof Ie)return ye.encode(e);if(e instanceof be)return xe.encode(e);throw new me}}class Bo extends a{constructor(){super(...arguments);o(this,"encoder",new Do);o(this,"decoder",new No)}}const Ne=new Bo,rr=new E(new g(Ne),new I(Ne));class or{constructor(e,c,s,d,u,v,k,S){o(this,"hash");o(this,"height");o(this,"time");o(this,"numTransactions");o(this,"proposerID");o(this,"feeRecipient");o(this,"size");o(this,"blockReward");this.hash=e,this.height=c,this.time=s,this.numTransactions=d,this.proposerID=u,this.feeRecipient=v,this.size=k,this.blockReward=S}toJSON(){return Fo.encode(this)}}class Po{convert(e){return t(e,"hash","height","time","num_transactions","proposer_id","fee_recipient","size","block_reward"),new or(i.decode(e.hash),n.decode(e.height),y.decode(e.time),n.decode(e.num_transactions),m.decode(e.proposer_id),m.decode(e.fee_recipient),n.decode(e.size),Oe.decode(e.block_reward))}}class Ao{convert(e){return h(e,or),{hash:i.encode(e.hash),height:n.encode(e.height),time:y.encode(e.time),num_transactions:n.encode(e.numTransactions),proposer_id:m.encode(e.proposerID),fee_recipient:m.encode(e.feeRecipient),size:n.encode(e.size),block_reward:Oe.encode(e.blockReward)}}}class Oo extends V{constructor(){super(...arguments);o(this,"encoder",new Ao);o(this,"decoder",new Po)}}const Fo=new Oo;function H(r){return r!==null}function zo(r,e){return r.blockHeights-e.blockHeights}class cr{constructor(e,c,s,d){o(this,"blockTime");o(this,"blockSize");o(this,"blockTransactions");o(this,"blockHeights");const u=[],v=d.length;for(let b=0;b<v;b++)u.push({blockTime:e[b],blockSize:c[b],blockTransactions:s[b],blockHeights:d[b]});u.sort(zo);const k=u[0].blockHeights,S=u[v-1].blockHeights,_=[],T=[],G=[],z=[];for(let b=k,Te=0;b<=S;b++){const N=u[Te];if(N.blockHeights!==b){_.push(null),T.push(null),G.push(null),z.push(null);continue}_.push(N.blockTime),T.push(N.blockSize),G.push(N.blockTransactions),z.push(N.blockHeights),Te++}const R=Math.max(0,z.length-50);this.blockTime=_.slice(R),this.blockSize=T.slice(R),this.blockTransactions=G.slice(R),this.blockHeights=z.slice(R)}toJSON(){return Ho.encode(this)}}class Ro{convert(e){return t(e,"block_time","block_size","block_transactions","block_heights"),new cr(p.decode(e.block_time),p.decode(e.block_size),p.decode(e.block_transactions),p.decode(e.block_heights))}}class Mo{convert(e){return h(e,cr),{block_time:p.encode(e.blockTime.filter(H)),block_size:p.encode(e.blockSize.filter(H)),block_transactions:p.encode(e.blockTransactions.filter(H)),block_heights:p.encode(e.blockHeights.filter(H))}}}class Jo extends a{constructor(){super(...arguments);o(this,"encoder",new Mo);o(this,"decoder",new Ro)}}const Ho=new Jo,sr=n;class nr{constructor(e,c){o(this,"namespace");o(this,"payload");this.namespace=e,this.payload=c}toJSON(){return ne.encode(this)}}class jo{convert(e){return t(e,"namespace","payload"),new nr(sr.decode(e.namespace),Ae.decode(e.payload))}}class Lo{convert(e){return h(e,nr),{namespace:sr.encode(e.namespace),payload:Ae.encode(e.payload)}}}class qo extends a{constructor(){super(...arguments);o(this,"encoder",new Lo);o(this,"decoder",new jo)}}const ne=new qo,Yc=new E(new g(ne),new I(ne));class F extends x{constructor(c,s,d){super(d);o(this,"response");o(this,"status");this.status=c,this.response=s}toJSON(){return tr.convert(this)}}class Q{convert(e){return h(e,F),{...W.convert(e),status:e.status}}}const tr=new Q;class te extends F{constructor(e,c,s="bad server response: client error"){super(e,c,s),Object.freeze(this)}toJSON(){return ar.encode(this)}}class Uo{convert(e){return t(e,"code","message","status"),f(e,te.name),new te(Number(e.status),null,l.decode(e.message))}}class Vo extends Q{}class Wo extends a{constructor(){super(...arguments);o(this,"encoder",new Vo);o(this,"decoder",new Uo)}}const ar=new Wo;C(te.name,ar);class ae extends F{constructor(e,c,s="bad server response"){super(e,c,s),Object.freeze(this)}toJSON(){return dr.encode(this)}}class Qo{convert(e){return t(e,"code","message","status"),f(e,ae.name),new ae(Number(e.status),null,l.decode(e.message))}}class Go extends Q{}class $o extends a{constructor(){super(...arguments);o(this,"encoder",new Go);o(this,"decoder",new Qo)}}const dr=new $o;C(ae.name,dr);class de extends F{constructor(e,c,s="bad server response: server error"){super(e,c,s),Object.freeze(this)}}class Ko{convert(e){return t(e,"code","message","status"),f(e,de.name),new de(Number(e.status),null,l.decode(e.message))}}class Xo extends Q{}class Yo extends a{constructor(){super(...arguments);o(this,"encoder",new Xo);o(this,"decoder",new Ko)}}const Zo=new Yo;C(de.name,Zo);class ie extends x{constructor(e="channel closed"){super(e),Object.freeze(this)}}class ec{convert(e){return t(e,"code","message"),f(e,ie.name),new ie(l.decode(e.message))}}class rc extends P{}class oc extends a{constructor(){super(...arguments);o(this,"encoder",new rc);o(this,"decoder",new ec)}}const cc=new oc;C(ie.name,cc);class q extends x{constructor(c,s,d=`invalid string value: have "${c}", want "${s}"`){super(d);o(this,"have");o(this,"want");this.have=c,this.want=s,Object.freeze(this)}toJSON(){return ir.encode(this)}}class sc{convert(e){return t(e,"code","have","want","message"),f(e,q.name),new q(l.decode(e.have),l.decode(e.want),l.decode(e.message))}}class nc{convert(e){return h(e,q),{...W.convert(e),have:l.encode(e.have),want:l.encode(e.want)}}}class tc extends a{constructor(){super(...arguments);o(this,"encoder",new nc);o(this,"decoder",new sc)}}const ir=new tc;C(q.name,ir);class le extends x{constructor(e="no url provided"){super(e),Object.freeze(this)}}class ac{convert(e){return t(e,"code","message"),f(e,le.name),new le(l.decode(e.message))}}class dc extends P{}class ic extends a{constructor(){super(...arguments);o(this,"encoder",new dc);o(this,"decoder",new ac)}}const lc=new ic;C(le.name,lc);class B extends F{constructor(c,s,d,u="response content type is not application/json"){super(s,d,u);o(this,"haveHeaderType");this.haveHeaderType=c,Object.freeze(this)}static fromResponse(c,s){return new B(c.headers.get("content-type")??"undefined",c.status,c,s)}toJSON(){return lr.encode(this)}}class hc{convert(e){return t(e,"code","status","have","want","message"),f(e,B.name),new B(l.decode(e.code),n.decode(e.status),null,l.decode(e.message))}}class uc{convert(e){return{...tr.convert(e),have:l.encode(e.haveHeaderType),want:l.encode("application/json")}}}class mc extends a{constructor(){super(...arguments);o(this,"encoder",new uc);o(this,"decoder",new hc)}}const lr=new mc;C(B.name,lr);class he extends x{constructor(e="unimplemented"){super(e),Object.freeze(this);debugger}}class pc{convert(e){return t(e,"code","message"),f(e,he.name),new he(l.decode(e.message))}}class wc extends P{}class Cc extends a{constructor(){super(...arguments);o(this,"encoder",new wc);o(this,"decoder",new pc)}}const fc=new Cc;C(he.name,fc);var _e=(r=>(r[r.success=0]="success",r[r.full=1]="full",r[r.failed=2]="failed",r))(_e||{});class vc{getFromEmpty(){}}class bc{getFromEmpty(){return null}}class xc{getFromEmpty(){throw new Cr}}const Ec={returnNull:new bc,returnUndefined:new vc,throwMissingElement:new xc};class gc{constructor(e){o(this,"maxSize");w(!Number.isNaN(e),"maxSize must not be NaN"),w(Number.isInteger(e),"maxSize must be an integer"),w(e>0,"maxSize must be greater than 0"),this.maxSize=e}nextIndex(e){return w(e>=0,"index must be greater than or equal to 0"),(e+1)%this.maxSize}}class Ic{constructor(e){o(this,"preComputedSizeMinus1");w(!Number.isNaN(e),"maxSize must not be NaN"),w(Number.isInteger(e),"maxSize must be an integer"),w(e>0,"maxSize must be greater than 0"),w(hr(e),"maxSize must be a power of two"),this.preComputedSizeMinus1=e-1}nextIndex(e){return w(e>=0,"index must be greater than or equal to 0"),e+1&this.preComputedSizeMinus1}}function hr(r){return(r&r-1)===0}class U extends x{constructor(e="buffer full"){super(e),Object.freeze(this)}}class yc{convert(e){return t(e,"code","message"),f(e,U.name),new U(l.decode(e.message))}}class kc extends P{}class Sc extends a{constructor(){super(...arguments);o(this,"encoder",new kc);o(this,"decoder",new yc)}}const _c=new Sc;C(U.name,_c);class Tc{putToFull(e,c){return e.get(),e.put(c)}}class Nc{putToFull(){return _e.full}}class Dc{putToFull(){throw new U}}const Bc={overwriteOldest:new Tc,returnFull:new Nc,throw:new Dc};function Pc(r){return hr(r)?new Ic(r):new gc(r)}class Ac{constructor(e,c,s){o(this,"readIndex",0);o(this,"writeIndex",0);o(this,"buffer");o(this,"nextIndex");o(this,"getOnEmpty");o(this,"putOnFull");w(!Number.isNaN(e),"maxSize must not be NaN"),this.buffer=new Array(e),this.nextIndex=Pc(e),this.getOnEmpty=c,this.putOnFull=s}get maxSize(){return this.buffer.length}get length(){return this.writeIndex<this.readIndex?this.writeIndex+this.maxSize-this.readIndex:this.writeIndex-this.readIndex}put(e){const c=this.nextIndex.nextIndex(this.writeIndex);return c===this.readIndex?this.putOnFull.putToFull(this,e):(this.buffer[this.writeIndex]=e,this.writeIndex=c,_e.success)}get(){if(this.readIndex===this.writeIndex)return this.getOnEmpty.getFromEmpty(this);const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),e}[Symbol.iterator](){return new Oc(this)}immutableIterable(){return{[Symbol.iterator]:()=>this.immutableIterator()}}immutableIterator(){return new Fc(this.readIndex,this.writeIndex,this.buffer,this.nextIndex)}}class Oc{constructor(e){o(this,"buffer");this.buffer=e}next(){const e=this.buffer.get();return e==null?{value:void 0,done:!0}:{value:e,done:!1}}}class Fc{constructor(e,c,s,d){o(this,"readIndex");o(this,"writeIndex");o(this,"buffer");o(this,"nextIndex");this.readIndex=e,this.writeIndex=c,this.buffer=s,this.nextIndex=d}next(){if(this.readIndex===this.writeIndex)return{value:void 0,done:!0};const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),{value:e,done:!1}}}function Zc(r=32,e=Ec.returnUndefined,c=Bc.overwriteOldest){return new Ac(r,e,c)}export{He as A,je as B,Fe as C,Ke as D,Xe as E,nr as F,de as G,te as H,ae as I,L as N,B as R,he as U,ee as W,Re as a,Bc as b,Zc as c,Ec as d,Qc as e,ie as f,Ho as g,Fo as h,cr as i,or as j,Vc as k,Wc as l,Gc as m,A as n,Xc as o,rr as p,D as q,y as r,Yc as s,$c as t,Kc as u,$e as v,ke as w,Ge as x,Ve as y,Qe as z};
