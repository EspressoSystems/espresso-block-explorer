import{c as h}from"./assert-B11BgmXM.js";import{B,d as b,r as x,T as C,a as P,b as S,c as M,s as $,A as m,k as T,l as O}from"./string-De_JMoQm.js";const w="InvalidInputError";class d extends B{constructor(e="invalid input"){super(e),Object.freeze(this),b()}get code(){return w}}class X{convert(e){return S(e,"code","message"),M(e,w),new d($.decode(e.message))}}class k extends P{}class V extends C{encoder=new k;decoder=new X}const A=new V;x(w,A);class i{constructor(e,r,t){this.alpha3Code=e,this.code=r,this.significantDigits=t,this.alpha3Code=e,this.code=r,this.significantDigits=t,this.significantDigitsMultiplier=BigInt(10)**BigInt(this.significantDigits)}significantDigitsMultiplier;toJSON(){return l.encode(this)}}const y=new i("JPY",392,0),J=new i("GBP",826,2),I=new i("USD",840,2),U=new i("EUR",978,2),N=new i("XXX",999,2),D=new i("ETH",1001,18),f=new i("XBT",1002,8),E=new i("ESP",10001,18),H=[y,J,I,U,N,D,f,E],R=new Map(H.map(n=>[n.alpha3Code,n]));class Y{convert(e){if(typeof e!="string")throw new d("CurrencyCodeDecoder: expected string");if(e==="BTC")return f;const r=R.get(e);if(r===void 0)throw new d(`CurrencyCodeDecoder: unknown currency: "${e}"`);return r}}class G{convert(e){return h(e,i),e.alpha3Code}}class j extends C{decoder=new Y;encoder=new G}const l=new j;class c{constructor(e,r){this.currency=e,this.value=r,this.currency=e,this.value=r}static USD(e){return new c(I,BigInt(e))}static ETH(e){return new c(D,BigInt(e))}static ESP(e){return new c(E,BigInt(e))}static JPY(e){return new c(y,BigInt(e))}static BTC(e){return new c(f,BigInt(e))}toString(){return u.encode(this)}toJSON(){return u.encode(this)}}function z(n){return n==="."||n===","||n===" "}function K(n,e){let r=-1;const t=n.length;for(let s=0;s<t;s++)e(n[s])&&(r=s);return r}class W{parseCurrencyCode(e){return l.decode(e)}parseValue(e,r){let t=1n;r[0]==="-"&&(t=-1n,r=r.substring(1));const s=K(r,z);if(s===-1){const v=BigInt(r.replace(/\D/g,""))*e.significantDigitsMultiplier;return t*v}const o=r.substring(0,s).replace(/\D/g,""),a=r.substring(s+1).replace(/\D/g,""),g=BigInt(o)*e.significantDigitsMultiplier,p=BigInt(a)*10n**BigInt(e.significantDigits-a.length);return t*(g+p)}convert(e){if(typeof e!="string")throw new d("MonetaryValueDecoder: expected string");const r=e.indexOf(" ");if(r<=-1)throw new d("MonetaryValueDecoder: missing non-breaking space");const t=e.substring(0,r),s=e.substring(r+1);if(/^-?[\d .,]+$/.test(t)){const a=this.parseCurrencyCode(s);return new c(a,this.parseValue(a,t))}const o=this.parseCurrencyCode(t);return new c(o,this.parseValue(o,s))}}class q{convert(e){h(e,c);const r=e.value<0n?"-":"",t=e.value<0n?-e.value:e.value,s=t%e.currency.significantDigitsMultiplier,o=t/e.currency.significantDigitsMultiplier,a=String(o),g=String(s);return/^0+$/.test(g)?`${l.encode(e.currency)} ${r}${a}`:`${l.encode(e.currency)} ${r}${o}.${String(s).padStart(e.currency.significantDigits,"0")}`}}class F extends C{decoder=new W;encoder=new q}const u=new F,Z=new m(new T(u),new O(u));export{E,d as I,c as M,l as c,Z as m};
