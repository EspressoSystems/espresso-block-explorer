import{R as Io,j as Fs}from"./iframe-CYSVuX1x.js";import{B as Ws}from"./explorer-BmRoxX1d.js";import{U as f}from"./UnimplementedError-CdIPpzwU.js";import{h as T,u as Ro,b as G,s as _o}from"./array_buffer-CdfOeTuC.js";import{a as Gs}from"./url-Bph6d-ow.js";import{b as d,c as zs,a as y}from"./assert-BI051aL8.js";import{T as i,b as a,N as To,s as h,e as Bo,f as Ao,A,j as D,k as P,C as b,t as Ms,I as H,h as Ze,v as Hs,w as x,x as k,d as Ee,B as O,r as I,c as R,a as Se,u as Do,n as xe,g as Ls}from"./string-IJEBdhwx.js";import{M as Js}from"./MissingElementError-CbV3pOXz.js";import{n as t,d as N,e as W}from"./base64-KHURY7_E.js";import{I as z,m as Po}from"./monetary_value-B0ntaWrJ.js";import{t as l,T as S}from"./TaggedBase64-S1MhFE0d.js";import{m as Qs}from"./functional-BkuSRiGx.js";import{g as E}from"./blocks-DnqCWqJj.js";import{g as Ce,h as Z,i as Us,j as we,k as fe,l as Oo,n as re,o as No,r as qo,p as U,q as js,m as F,s as ee,v as Vs,w as ze,x as $s,y as go,z as Me,A as He,B as Ks}from"./LoadingProvider-MAD86iE_.js";import"./FetchError-DX6me_FL.js";import{N as Ys}from"./NotFoundError-DPKbBn2w.js";class er{r;s;v;constructor(e,o,s){this.r=e,this.s=o,this.v=s}toJSON(){return rr.encode(this)}}class Xs{convert(e){return a(e,"r","s","v"),new er(T.decode(e.r),T.decode(e.s),t.decode(e.v))}}class Zs{convert(e){return d(e,er),{r:T.encode(e.r),s:T.encode(e.s),v:t.encode(e.v)}}}class et extends i{encoder=new Zs;decoder=new Xs}const rr=new et;class or{account;amount;constructor(e,o){this.account=e,this.amount=o}toJSON(){return sr.encode(this)}}class rt{convert(e){return a(e,"account","amount"),new or(T.decode(e.account),T.decode(e.amount))}}class ot{convert(e){return d(e,or),{account:T.encode(e.account),amount:T.encode(e.amount)}}}class st extends i{encoder=new ot;decoder=new rt}const sr=new st;class tr{number;timestamp;hash;constructor(e,o,s){this.number=e,this.timestamp=o,this.hash=s}toJSON(){return Qe.encode(this)}}class tt{convert(e){return a(e,"number","timestamp","hash"),new tr(t.decode(e.number),h.decode(e.timestamp),h.decode(e.hash))}}class ct{convert(e){return d(e,tr),{number:t.encode(e.number),timestamp:h.encode(e.timestamp),hash:h.encode(e.hash)}}}class nt extends i{encoder=new ct;decoder=new tt}const Qe=new nt,Fo=new To(new Bo(Qe),new Ao(Qe));class cr{bytes;constructor(e){this.bytes=e}toJSON(){return nr.encode(this)}}class at{convert(e){return a(e,"bytes"),new cr(Ro.decode(e.bytes))}}class dt{convert(e){return d(e,cr),{bytes:Ro.encode(e.bytes)}}}class it extends i{encoder=new dt;decoder=new at}const nr=new it;class ar{height;timestamp;l1_head;l1_finalized;payload_commitment;ns_table;block_merkle_root;fee_merkle_root;builder_signature;fee_info;constructor(e,o,s,n,c,u,p,w,C,g){this.height=e,this.timestamp=o,this.l1_head=s,this.l1_finalized=n,this.payload_commitment=c,this.ns_table=u,this.block_merkle_root=p,this.fee_merkle_root=w,this.builder_signature=C,this.fee_info=g}toJSON(){return q.encode(this)}}class lt{convert(e){return a(e,"height","timestamp","l1_head","l1_finalized","payload_commitment","ns_table","block_merkle_root","fee_merkle_root","builder_signature","fee_info"),new ar(t.decode(e.height),t.decode(e.timestamp),t.decode(e.l1_head),Fo.decode(e.l1_finalized),N.decode(e.payload_commitment),nr.decode(e.ns_table),l.decode(e.block_merkle_root),l.decode(e.fee_merkle_root),rr.decode(e.builder_signature),sr.decode(e.fee_info))}}class ut{convert(e){return d(e,ar),{height:t.encode(e.height),timestamp:t.encode(e.timestamp),l1_head:t.encode(e.l1_head),l1_finalized:Fo.encode(e.l1_finalized),payload_commitment:N.encode(e.payload_commitment),ns_table:nr.encode(e.ns_table),block_merkle_root:l.encode(e.block_merkle_root),fee_merkle_root:l.encode(e.fee_merkle_root),builder_signature:rr.encode(e.builder_signature),fee_info:sr.encode(e.fee_info)}}}class ht extends i{encoder=new ut;decoder=new lt}const q=new ht;class ce{vm;payload;constructor(e,o){this.vm=e,this.payload=o}toJSON(){return L.encode(this)}}class pt{convert(e){return a(e,"vm","payload"),new ce(t.decode(e.vm),N.decode(e.payload))}}class mt{convert(e){return d(e,ce),{vm:t.encode(e.vm),payload:N.encode(e.payload)}}}class wt extends i{encoder=new mt;decoder=new pt}const L=new wt,Wo=new A(new D(L),new P(L));class dr{transaction_nmt;constructor(e){this.transaction_nmt=e}toJSON(){return ne.encode(this)}}class ft{convert(e){return a(e,"transaction_nmt"),new dr(Wo.decode(e.transaction_nmt))}}class Ct{convert(e){return d(e,dr),{transaction_nmt:Wo.encode(e.transaction_nmt)}}}class bt extends i{encoder=new Ct;decoder=new ft}const ne=new bt;class ir{header;payload;hash;size;numTransactions;constructor(e,o,s,n,c){this.header=e,this.payload=o,this.hash=s,this.size=n,this.numTransactions=c}toJSON(){return Go.encode(this)}}class gt{convert(e){return a(e,"header","payload","hash","size","num_transactions"),new ir(q.decode(e.header),ne.decode(e.payload),l.decode(e.hash),t.decode(e.size),t.decode(e.num_transactions))}}class vt{convert(e){return d(e,ir),{header:q.encode(e.header),payload:ne.encode(e.payload),hash:l.encode(e.hash),size:t.encode(e.size),num_transactions:t.encode(e.numTransactions)}}}class yt extends b{encoder=new vt;decoder=new gt}const Go=new yt;class lr{header;hash;size;num_transactions;proposer_id;constructor(e,o,s,n,c){this.header=e,this.hash=o,this.size=s,this.num_transactions=n,this.proposer_id=c}toJSON(){return Ue.encode(this)}}class Et{convert(e){return a(e,"header","hash","size","num_transactions","proposer_id"),new lr(q.decode(e.header),l.decode(e.hash),t.decode(e.size),t.decode(e.num_transactions),G.decode(e.proposer_id))}}class St{convert(e){return d(e,lr),{header:q.encode(e.header),hash:l.encode(e.hash),size:t.encode(e.size),num_transactions:t.encode(e.num_transactions),proposer_id:G.encode(e.proposer_id)}}}class xt extends i{encoder=new St;decoder=new Et}const Ue=new xt,kt=new A(new D(Ue),new P(Ue));class ur{hash;header;offset;transaction;constructor(e,o,s,n){this.hash=e,this.header=o,this.offset=s,this.transaction=n}toJSON(){return je.encode(this)}}class It{convert(e){return a(e,"hash","header","offset","transaction"),new ur(l.decode(e.hash),q.decode(e.header),t.decode(e.offset),L.decode(e.transaction))}}class Rt{convert(e){return d(e,ur),{hash:l.encode(e.hash),header:q.encode(e.header),offset:t.encode(e.offset),transaction:L.encode(e.transaction)}}}class _t extends i{encoder=new Rt;decoder=new It}const je=new _t,vo=new A(new D(je),new P(je));class Tt{convert(e){if(!Ms(e))throw new H(typeof e,"boolean");return e}}class Bt{convert(e){return zs(e,"boolean"),e}}class At extends i{encoder=new Bt;decoder=new Tt}const ae=new At;class be{leaf_commit;constructor(e){this.leaf_commit=e}toJSON(){return hr.encode(this)}}class Dt{convert(e){return a(e,"leaf_commit"),new be(l.decode(e.leaf_commit))}}class Pt{convert(e){return d(e,be),{leaf_commit:l.encode(e.leaf_commit)}}}class Ot extends i{encoder=new Pt;decoder=new Dt}const hr=new Ot;class Nt{convert(e){if(!Ze(e))throw new H(typeof e,"string");const o=new Date(e);if(Number.isNaN(o.valueOf()))throw new H("NaN","number");return o}}class qt{convert(e){return d(e,Date),e.toISOString()}}class Ft extends i{encoder=new qt;decoder=new Nt}const M=new Ft;class zo{width;index;constructor(e,o){this.width=e,this.index=o}toJSON(){return pr.encode(this)}}class Wt{convert(e){return a(e,"width","index"),new zo(t.decode(e.width),t.decode(e.index))}}class Gt{convert(e){return d(e,zo),{width:t.encode(e.width),index:t.encode(e.index)}}}class zt extends i{encoder=new Gt;decoder=new Wt}const pr=new zt;class se{static get lsb0(){return Ht}static get msb0(){return Jt}valueOf(){return this.toString()}toJSON(){return this.toString()}}const Mo="bitvec::order::Lsb0",Ho="bitvec::order::Msb0";class Mt extends se{toString(){return Mo}}const Ht=new Mt;class Lt extends se{toString(){return Ho}}const Jt=new Lt;class Qt{convert(e){if(typeof e!="string")throw new H(typeof e,"string");switch(e){case Mo:return se.lsb0;case Ho:return se.msb0;default:throw new H(e,"CappuccinoAPIBitVecOrder")}}}class Ut{convert(e){return e.toString()}}class jt extends i{encoder=new Ut;decoder=new Qt}const Lo=new jt;class Jo{order;head;bits;data;constructor(e,o,s,n){this.order=e,this.head=o,this.bits=s,this.data=n}getBitVecIndexIterable(){return this.order===se.lsb0?new Zt(this.head.width,this.bits):new rc(this.head.width,this.bits)}[Symbol.iterator](){const e=this.getBitVecIndexIterable();return Qs(e,o=>Yt(this.data,o))[Symbol.iterator]()}toJSON(){return te.encode(this)}}class Vt{convert(e){return a(e,"order","head","bits","data"),new Jo(Lo.decode(e.order),pr.decode(e.head),t.decode(e.bits),N.decode(e.data))}}class $t{convert(e){return d(e,Jo),{order:Lo.encode(e.order),head:pr.encode(e.head),bits:t.encode(e.bits),data:N.encode(e.data)}}}class Kt extends i{encoder=new $t;decoder=new Vt}const te=new Kt,Ci=new A(new D(te),new P(te));function Yt(r,e){return(r[e.bucket]>>e.bitOffset&1)===1}class Qo{bucket;bitOffset;constructor(e,o){this.bucket=e,this.bitOffset=o}}function Uo(r){switch(y(r===8||r===16||r===32,"bit width should be a power of two that is supported"),r){case 8:return 3;case 16:return 4;case 32:return 5;default:throw new f}}class Xt{totalBits;bitWidthMask;bitWidthShift;offset=0;constructor(e,o){this.totalBits=o;const s=Uo(e);this.bitWidthMask=e-1,this.bitWidthShift=s}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,o=this.offset&this.bitWidthMask;return this.offset+=1,{done:!1,value:new Qo(e,o)}}}class Zt{bitWidth;totalBits;constructor(e,o){this.bitWidth=e,this.totalBits=o}[Symbol.iterator](){return new Xt(this.bitWidth,this.totalBits)}}class ec{bitWidth;totalBits;bitWidthMask;bitWidthShift;offset=0;constructor(e,o){this.bitWidth=e,this.totalBits=o;const s=Uo(e);this.bitWidthMask=e-1,this.bitWidthShift=s}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,o=this.bitWidth-1-(this.offset&this.bitWidthMask);return this.offset+=1,{done:!1,value:new Qo(e,o)}}}class rc{bitWidth;totalBits;constructor(e,o){this.bitWidth=e,this.totalBits=o}[Symbol.iterator](){return new ec(this.bitWidth,this.totalBits)}}class jo{signature;bitvec;constructor(e,o){this.signature=e,this.bitvec=o}toJSON(){return Ve.encode(this)}}class oc{convert(e){if(!Hs(e)||e.length!==2)throw new H(typeof e,"Array");return new jo(l.decode(e[0]),te.decode(e[1]))}}class sc{convert(e){return d(e,jo),[l.encode(e.signature),te.encode(e.bitvec)]}}class tc extends i{encoder=new sc;decoder=new oc}const Ve=new tc,Vo=new To(new Bo(Ve),new Ao(Ve));class ge{data;vote_commitment;view_number;signatures;is_genesis;_pd;constructor(e,o,s,n,c,u){this.data=e,this.vote_commitment=o,this.view_number=s,this.signatures=n,this.is_genesis=c,this._pd=u}toJSON(){return de.encode(this)}}class cc{convert(e){return a(e,"data","vote_commitment","view_number","signatures","is_genesis","_pd"),new ge(hr.decode(e.data),l.decode(e.vote_commitment),t.decode(e.view_number),Vo.decode(e.signatures),ae.decode(e.is_genesis),null)}}class nc{convert(e){return d(e,ge),{data:hr.encode(e.data),vote_commitment:l.encode(e.vote_commitment),view_number:t.encode(e.view_number),signatures:Vo.encode(e.signatures),is_genesis:ae.encode(e.is_genesis),_pd:null}}}class ac extends i{encoder=new nc;decoder=new cc}const de=new ac;class mr{view_number;justify_qc;parent_commitment;block_header;block_payload;rejected;timestamp;proposer_id;constructor(e,o,s,n,c,u,p,w){this.view_number=e,this.justify_qc=o,this.parent_commitment=s,this.block_header=n,this.block_payload=c,this.rejected=u,this.timestamp=p,this.proposer_id=w}toJSON(){return wr.encode(this)}}class dc{convert(e){return a(e,"view_number","justify_qc","parent_commitment","block_header","block_payload","rejected","timestamp","proposer_id"),new mr(t.decode(e.view_number),de.decode(e.justify_qc),l.decode(e.parent_commitment),q.decode(e.block_header),ne.decode(e.block_payload),N.decode(e.rejected),t.decode(e.timestamp),T.decode(e.proposer_id))}}class ic{convert(e){return d(e,mr),{view_number:t.encode(e.view_number),justify_qc:de.encode(e.justify_qc),parent_commitment:l.encode(e.parent_commitment),block_header:q.encode(e.block_header),block_payload:ne.encode(e.block_payload),rejected:N.encode(e.rejected),timestamp:t.encode(e.timestamp),proposer_id:T.encode(e.proposer_id)}}}class lc extends i{encoder=new ic;decoder=new dc}const wr=new lc;class fr{leaf;qc;constructor(e,o){this.leaf=e,this.qc=o}toJSON(){return $o.encode(this)}}class uc{convert(e){return a(e,"leaf","qc"),new fr(wr.decode(e.leaf),de.decode(e.qc))}}class hc{convert(e){return d(e,fr),{leaf:wr.encode(e.leaf),qc:de.encode(e.qc)}}}class pc extends i{encoder=new hc;decoder=new uc}const $o=new pc;class ie{}class Cr extends ie{toJSON(){return br.encode(this)}}class mc{convert(e){if(!Ze(e)||e!=="Empty")throw new z;return new Cr}}class wc{convert(e){return d(e,Cr),"Empty"}}class fc extends i{encoder=new wc;decoder=new mc}const br=new fc;class gr extends ie{value;pos;elem;constructor(e,o,s){super(),this.value=e,this.pos=o,this.elem=s}toJSON(){return vr.encode(this)}}class Cc{convert(e){a(e,"Leaf");const o=e.Leaf;return a(o,"value","pos","elem"),new gr(l.decode(o.value),l.decode(o.pos),l.decode(o.elem))}}class bc{convert(e){return d(e,gr),{Leaf:{value:l.encode(e.value),pos:l.encode(e.pos),elem:l.encode(e.elem)}}}}class gc extends b{encoder=new bc;decoder=new Cc}const vr=new gc;class yr extends ie{value;constructor(e){super(),this.value=e}toJSON(){return Er.encode(this)}}class vc{convert(e){a(e,"ForgettenSubtree");const o=e.ForgettenSubtree;return a(o,"value"),new yr(l.decode(o.value))}}class yc{convert(e){return d(e,yr),{ForgettenSubtree:{value:l.encode(e.value)}}}}class Ec extends b{encoder=new yc;decoder=new vc}const Er=new Ec;class ke extends ie{value;children;constructor(e,o){super(),this.value=e,this.children=o}toJSON(){return Sr.encode(this)}}class Sc{convert(e){a(e,"Branch");const o=e.Branch;return a(o,"value","children"),new ke(l.decode(o.value),Ie.decode(o.children))}}class xc{convert(e){return d(e,ke),{Branch:{value:l.encode(e.value),children:Ie.encode(e.children)}}}}class kc extends i{encoder=new xc;decoder=new Sc}const Sr=new kc;class Ic{convert(e){if(x(e,"Leaf",k))return vr.decoder.convert(e);if(x(e,"Branch",k))return Sr.decoder.convert(e);if(x(e,"ForgettenSubtree",k))return Er.decoder.convert(e);if(Ze(e))return br.decoder.convert(e);throw new z}}class Rc{convert(e){if(d(e,ie),e instanceof gr)return vr.encode(e);if(e instanceof ke)return Sr.encode(e);if(e instanceof yr)return Er.encode(e);if(e instanceof Cr)return br.encode(e);throw new z}}class _c extends i{encoder=new Rc;decoder=new Ic}const yo=new _c,Ie=new A(new D(yo),new P(yo));class xr{pos;proof;constructor(e,o){this.pos=e,this.proof=o}toJSON(){return kr.encode(this)}}class Tc{convert(e){return a(e,"pos","proof"),new xr(l.decode(e.pos),Ie.decode(e.proof))}}class Bc{convert(e){return d(e,xr),{pos:l.encode(e.pos),proof:Ie.encode(e.proof)}}}class Ac extends i{encoder=new Bc;decoder=new Tc}const kr=new Ac;class Ir{transaction;block_hash;proof;height;hash;constructor(e,o,s,n,c){this.transaction=e,this.block_hash=o,this.proof=s,this.height=n,this.hash=c}toJSON(){return Ko.encode(this)}}class Dc{convert(e){return a(e,"transaction","block_hash","proof","height","hash"),new Ir(L.decoder.convert(e.transaction),l.decode(e.block_hash),kr.decoder.convert(e.proof),t.decode(e.height),l.decode(e.hash))}}class Pc{convert(e){return d(e,Ir),{transaction:L.encode(e.transaction),block_hash:l.encode(e.block_hash),proof:kr.encode(e.proof),height:t.encode(e.height),hash:l.encode(e.hash)}}}class Oc extends i{encoder=new Pc;decoder=new Dc}const Ko=new Oc;function Re(r){return new ar(r.height,r.time.valueOf()/1e3,0,new tr(0,"00","00"),[],new cr(new ArrayBuffer(0)),new S("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new S("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new er(new ArrayBuffer(0),new ArrayBuffer(0),0),new or(new ArrayBuffer(0),new ArrayBuffer(0)))}async function Nc(r){return new ir(Re(r),new dr(await re(F(r.transactions,async e=>new ce(e.tree.namespace,Array.from(new Uint8Array(e.tree.data)))))),new S("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions)}function qc(r){return new lr(Re(r),new S("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions,r.proposer)}function Fc(r){const e=r.transactions,o=Re(r);return F(e,async s=>new ur(s.hash,o,s.index,new ce(s.tree.namespace,Array.from(new Uint8Array(s.tree.data)))))}async function*Wc(r){const e=Re(r),o=r.transactions;yield*F(o,async s=>new Ir(new ce(s.tree.namespace,Array.from(new Uint8Array(s.tree.data))),new S("BLOCK",new Uint8Array([0,0,0,0]).buffer),new xr(new S("POS",new Uint8Array([0,0,0,0]).buffer),[new ke(new S("EMPTY",new Uint8Array([0,0,0,0]).buffer),[])]),e.height,new S("COMMIT",s.tree.data.slice(0,32))))}class Gc{async getLeafFromHeight(e){const o=await this.getBlockFromHeight(e);return new fr(new mr(e,new ge(new be(new S("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new S("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null),new S("LEAF",new Uint8Array([0,0,0,0]).buffer),o.header,o.payload,[],o.header.timestamp,o.header.fee_info.account),new ge(new be(new S("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new S("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null))}async getTransactionFromHeightAndOffset(e,o){const s=await Ce(Z(E(),e)),n=Wc(s);return await Us(we(n,o))}async getBlockSummaries(e,o){const s=Z(E(),e),n=fe(s,o-e),c=Oo(n,async u=>qc(u));return await re(c)}async getBlockFromHeight(e){const o=Z(E(),e),s=await Ce(o);return Nc(s)}async*streamTransactionSummaries(e){const o=No(E(),c=>c.height<=e),s=qo(o);yield*U(s,c=>ee(Fc(c)))}async getTransactionSummaryRange(e,o,s){const n=this.streamTransactionSummaries(e),c=Z(n,o),u=fe(c,s);return await re(u)}async getTransactionSummaryRangeForRollup(e,o,s,n){const c=this.streamTransactionSummaries(o),u=js(c,C=>C.transaction.vm===e),p=Z(u,s),w=fe(p,n);return await re(w)}}class le extends O{response;status;constructor(e,o,s){super(s),this.status=e,this.response=o}toJSON(){return Yo.convert(this)}}class _e{convert(e){return d(e,le),{...Ee.convert(e),status:e.status}}}const Yo=new _e,Rr="BadResponseClientError";class zc extends le{constructor(e,o,s="bad server response: client error"){super(e,o,s),Object.freeze(this)}get code(){return Rr}toJSON(){return Xo.encode(this)}}class Mc{convert(e){return a(e,"code","message","status"),R(e,Rr),new zc(Number(e.status),null,h.decode(e.message))}}class Hc extends _e{}class Lc extends i{encoder=new Hc;decoder=new Mc}const Xo=new Lc;I(Rr,Xo);const _r="BadResponseError";class Jc extends le{constructor(e,o,s="bad server response"){super(e,o,s),Object.freeze(this)}get code(){return _r}toJSON(){return Zo.encode(this)}}class Qc{convert(e){return a(e,"code","message","status"),R(e,_r),new Jc(Number(e.status),null,h.decode(e.message))}}class Uc extends _e{}class jc extends i{encoder=new Uc;decoder=new Qc}const Zo=new jc;I(_r,Zo);class Vc extends le{constructor(e,o,s="bad server response: server error"){super(e,o,s),Object.freeze(this)}get code(){return Tr}}const Tr="BadResponseServerError";class $c{convert(e){return a(e,"code","message","status"),R(e,Tr),new Vc(Number(e.status),null,h.decode(e.message))}}class Kc extends _e{}class Yc extends i{encoder=new Kc;decoder=new $c}const Xc=new Yc;I(Tr,Xc);const Br="ChannelClosedError";class Zc extends O{constructor(e="channel closed"){super(e),Object.freeze(this)}get code(){return Br}}class en{convert(e){return a(e,"code","message"),R(e,Br),new Zc(h.decode(e.message))}}class rn extends Se{}class on extends i{encoder=new rn;decoder=new en}const sn=new on;I(Br,sn);class Ar extends O{constructor(e="completer has already been completed"){super(e),Object.freeze(this)}get code(){return es}}const es="CompleterAlreadyCompletedError";class tn{convert(e){return a(e,"code","message"),R(e,es),new Ar(h.decode(e.message))}}class cn extends Se{}class nn extends i{encoder=new cn;decoder=new tn}const an=new nn;I(Ar.name,an);const Dr="InvalidStringValueError";class rs extends O{have;want;constructor(e,o,s=`invalid string value: have "${e}", want "${o}"`){super(s),this.have=e,this.want=o,Object.freeze(this)}toJSON(){return os.encode(this)}get code(){return Dr}}class dn{convert(e){return a(e,"code","have","want","message"),R(e,Dr),new rs(h.decode(e.have),h.decode(e.want),h.decode(e.message))}}class ln{convert(e){return d(e,rs),{...Ee.convert(e),have:h.encode(e.have),want:h.encode(e.want)}}}class un extends i{encoder=new ln;decoder=new dn}const os=new un;I(Dr,os);const Pr="NoCompleterFoundForRequestID";class ve extends O{requestID;constructor(e,o=`no completer found for request id "${e}"`){super(o),this.requestID=e,Object.freeze(this)}toJSON(){return ss.encode(this)}get code(){return Pr}}class hn{convert(e){return a(e,"code","requestID","message"),R(e,Pr),new ve(Do.decode(e.requestID),h.decode(e.message))}}class pn{convert(e){return d(e,ve),{...Ee.convert(e),requestID:Do.encode(e.requestID)}}}class mn extends i{encoder=new pn;decoder=new hn}const ss=new mn;I(Pr,ss);const Or="NoURLProvidedError";class wn extends O{constructor(e="no url provided"){super(e),Object.freeze(this)}get code(){return Or}}class fn{convert(e){return a(e,"code","message"),R(e,Or),new wn(h.decode(e.message))}}class Cn extends Se{}class bn extends i{encoder=new Cn;decoder=new fn}const gn=new bn;I(Or,gn);const Nr="QUERY_ERROR";class vn extends O{error;constructor(e,o="missing element"){super(o),this.error=e,Object.freeze(this)}get code(){return Nr}}class yn{convert(e){return a(e,"code","error","message"),R(e,Nr),new vn(as.decode(e.error),h.decode(e.message))}}class En{convert(e){return{code:e.code,error:as.encode(e.error),message:h.encode(e.message)}}}class Sn extends i{encoder=new En;decoder=new yn}const xn=new Sn;class qr{}const Fr="NotFound";class ts extends qr{constructor(){super(),Object.freeze(this)}valueOf(){return Fr}toJSON(){return this.valueOf()}}const kn=new ts,Wr="Missing";class cs extends qr{constructor(){super(),Object.freeze(this)}valueOf(){return Wr}toJSON(){return this.valueOf()}}const In=new cs;class ns extends qr{error;constructor(e){super(),this.error=e,Object.freeze(this)}toJSON(){return zr.encode(this)}}class Rn{message;constructor(e){this.message=e,Object.freeze(this)}toJSON(){return Gr.encode(this)}}class _n{convert(e){return a(e,"message"),new Rn(h.decode(e.message))}}class Tn{convert(e){return{message:h.encode(e.message)}}}class Bn extends i{encoder=new Tn;decoder=new _n}const Gr=new Bn;class An{convert(e){return a(e,"Error"),new ns(Gr.decode(e.Error))}}class Dn{convert(e){return{Error:Gr.encode(e.error)}}}class Pn extends i{encoder=new Dn;decoder=new An}const zr=new Pn;class On{convert(e){return e===Fr?kn:e===Wr?In:zr.decode(e)}}class Nn{convert(e){if(e instanceof ts)return Fr;if(e instanceof cs)return Wr;if(e instanceof ns)return zr.encode(e);throw new f}}class qn extends i{encoder=new Nn;decoder=new On}const as=new qn;I(Nr,xn);const ds="ResponseContentTypeIsNotApplicationJSONError";class Te extends le{haveHeaderType;constructor(e,o,s,n="response content type is not application/json"){super(o,s,n),this.haveHeaderType=e,Object.freeze(this)}static fromResponse(e,o){return new Te(e.headers.get("content-type")??"undefined",e.status,e,o)}toJSON(){return is.encode(this)}get code(){return ds}}class Fn{convert(e){return a(e,"code","status","have","want","message"),R(e,ds),new Te(h.decode(e.code),t.decode(e.status),null,h.decode(e.message))}}class Wn{convert(e){return{...Yo.convert(e),have:h.encode(e.haveHeaderType),want:h.encode("application/json")}}}class Gn extends i{encoder=new Wn;decoder=new Fn}const is=new Gn;I(Te.name,is);const Mr="WebWorkerErrorResponse";class ls extends O{error;constructor(e,o="error in web worker"){super(o),this.error=e,Object.freeze(this)}toJSON(){return us.encode(this)}get code(){return Mr}}class zn{convert(e){return a(e,"code","error","message"),R(e,Mr),new ls(xe.decode(e.error),h.decode(e.message))}}class Mn{convert(e){return{...Ee.convert(e),error:xe.encode(e.error)}}}class Hn extends i{encoder=new Mn;decoder=new zn}const us=new Hn;I(Mr,us);var hs=(r=>(r[r.success=0]="success",r[r.full=1]="full",r[r.failed=2]="failed",r))(hs||{});class Ln{getFromEmpty(){}}class Jn{getFromEmpty(){throw new Js}}const Qn={returnUndefined:new Ln,throwMissingElement:new Jn};class Un{maxSize;constructor(e){y(!Number.isNaN(e),"maxSize must not be NaN"),y(Number.isInteger(e),"maxSize must be an integer"),y(e>0,"maxSize must be greater than 0"),this.maxSize=e}nextIndex(e){return y(e>=0,"index must be greater than or equal to 0"),(e+1)%this.maxSize}}class jn{preComputedSizeMinus1;constructor(e){y(!Number.isNaN(e),"maxSize must not be NaN"),y(Number.isInteger(e),"maxSize must be an integer"),y(e>0,"maxSize must be greater than 0"),y(ps(e),"maxSize must be a power of two"),this.preComputedSizeMinus1=e-1}nextIndex(e){return y(e>=0,"index must be greater than or equal to 0"),e+1&this.preComputedSizeMinus1}}function ps(r){return(r&r-1)===0}const Hr="BufferFullError";class ms extends O{constructor(e="buffer full"){super(e),Object.freeze(this)}get code(){return Hr}}class Vn{convert(e){return a(e,"code","message"),R(e,Hr),new ms(h.decode(e.message))}}class $n extends Se{}class Kn extends i{encoder=new $n;decoder=new Vn}const Yn=new Kn;I(Hr,Yn);class Xn{putToFull(e,o){return e.get(),e.put(o)}}class Zn{putToFull(){throw new ms}}const ea={overwriteOldest:new Xn,throw:new Zn};function ra(r){return ps(r)?new jn(r):new Un(r)}class oa{readIndex=0;writeIndex=0;buffer;nextIndex;getOnEmpty;putOnFull;constructor(e,o,s){y(!Number.isNaN(e),"maxSize must not be NaN"),this.buffer=new Array(e),this.nextIndex=ra(e),this.getOnEmpty=o,this.putOnFull=s}get maxSize(){return this.buffer.length}get length(){return this.writeIndex<this.readIndex?this.writeIndex+this.maxSize-this.readIndex:this.writeIndex-this.readIndex}put(e){const o=this.nextIndex.nextIndex(this.writeIndex);return o===this.readIndex?this.putOnFull.putToFull(this,e):(this.buffer[this.writeIndex]=e,this.writeIndex=o,hs.success)}get(){if(this.readIndex===this.writeIndex)return this.getOnEmpty.getFromEmpty(this);const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),e}[Symbol.iterator](){return new sa(this)}immutableIterable(){return{[Symbol.iterator]:()=>this.immutableIterator()}}immutableIterator(){return new ta(this.readIndex,this.writeIndex,this.buffer,this.nextIndex)}}class sa{buffer;constructor(e){this.buffer=e}next(){const e=this.buffer.get();return e==null?{value:void 0,done:!0}:{value:e,done:!1}}}class ta{readIndex;writeIndex;buffer;nextIndex;constructor(e,o,s,n){this.readIndex=e,this.writeIndex=o,this.buffer=s,this.nextIndex=n}next(){if(this.readIndex===this.writeIndex)return{value:void 0,done:!0};const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),{value:e,done:!1}}}function B(r=32,e=Qn.returnUndefined,o=ea.overwriteOldest){return new oa(r,e,o)}class Lr{hash;height;time;numTransactions;proposerID;feeRecipient;size;blockReward;constructor(e,o,s,n,c,u,p,w){this.hash=e,this.height=o,this.time=s,this.numTransactions=n,this.proposerID=c,this.feeRecipient=u,this.size=p,this.blockReward=w}toJSON(){return J.encode(this)}}class ca{convert(e){return a(e,"hash","height","time","num_transactions","proposer_id","fee_recipient","size","block_reward"),new Lr(l.decode(e.hash),t.decode(e.height),M.decode(e.time),t.decode(e.num_transactions),G.decode(e.proposer_id),G.decode(e.fee_recipient),t.decode(e.size),Po.decode(e.block_reward))}}class na{convert(e){return d(e,Lr),{hash:l.encode(e.hash),height:t.encode(e.height),time:M.encode(e.time),num_transactions:t.encode(e.numTransactions),proposer_id:G.encode(e.proposerID),fee_recipient:G.encode(e.feeRecipient),size:t.encode(e.size),block_reward:Po.encode(e.blockReward)}}}class aa extends b{encoder=new na;decoder=new ca}const J=new aa,bi=new A(new D(J),new P(J));class Jr{hash;height;proposerID;numTransactions;size;time;constructor(e,o,s,n,c,u){this.hash=e,this.height=o,this.proposerID=s,this.numTransactions=n,this.size=c,this.time=u}toJSON(){return $e.encode(this)}}class da{convert(e){return a(e,"hash","height","proposer_id","num_transactions","size","time"),new Jr(l.decode(e.hash),t.decode(e.height),G.decode(e.proposer_id),t.decode(e.num_transactions),t.decode(e.size),M.decode(e.time))}}class ia{convert(e){return d(e,Jr),{hash:l.encode(e.hash),height:t.encode(e.height),proposer_id:G.encode(e.proposerID),num_transactions:t.encode(e.numTransactions),size:t.encode(e.size),time:M.encode(e.time)}}}class la extends b{encoder=new ia;decoder=new da}const $e=new la,V=new A(new D($e),new P($e)),j="latest";class Qr{rollups;transactions;blocks;constructor(e,o,s){this.rollups=e,this.transactions=o,this.blocks=s}toJSON(){return Ur.encode(this)}}class ua{convert(e){return a(e,"rollups","transactions","blocks"),new Qr(t.decode(e.rollups),t.decode(e.transactions),t.decode(e.blocks))}}class ha{convert(e){return d(e,Qr),{rollups:t.encode(e.rollups),transactions:t.encode(e.transactions),blocks:t.encode(e.blocks)}}}class pa extends i{encoder=new ha;decoder=new ua}const Ur=new pa;function ma(r,e){return r.blockHeights-e.blockHeights}class jr{blockTime;blockSize;blockTransactions;blockHeights;constructor(e,o,s,n){const c=[],u=Math.min(e.length,o.length,s.length,n.length);for(let _=0;_<u;_++){const Y=n[_];Y!==null&&c.push({blockTime:e[_],blockSize:o[_],blockTransactions:s[_],blockHeights:Y})}c.sort(ma);const p=c[0].blockHeights,w=c[c.length-1].blockHeights,C=[],g=[],m=[],v=[];for(let _=p,Y=0;_<=w;_++){const X=c[Y];if(X.blockHeights!==_){C.push(null),g.push(null),m.push(null),v.push(null);continue}C.push(X.blockTime),g.push(X.blockSize),m.push(X.blockTransactions),v.push(X.blockHeights),Y++}const Q=Math.max(0,v.length-50);this.blockTime=C.slice(Q),this.blockSize=g.slice(Q),this.blockTransactions=m.slice(Q),this.blockHeights=v.slice(Q)}toJSON(){return Vr.encode(this)}}class wa{convert(e){return a(e,"block_time","block_size","block_transactions","block_heights"),new jr(W.decode(e.block_time),W.decode(e.block_size),W.decode(e.block_transactions),W.decode(e.block_heights))}}class fa{convert(e){return d(e,jr),{block_time:W.encode(e.blockTime),block_size:W.encode(e.blockSize),block_transactions:W.encode(e.blockTransactions),block_heights:W.encode(e.blockHeights)}}}class Ca extends i{encoder=new fa;decoder=new wa}const Vr=new Ca,ws=N;class Be{hash;rollups;height;time;offset;numTransactions;constructor(e,o,s,n,c,u){this.hash=e,this.rollups=o,this.height=s,this.time=n,this.offset=c,this.numTransactions=u}toJSON(){return Ke.encode(this)}}class ba{convert(e){return a(e,"hash","rollups","height","time","offset","num_transactions"),new Be(l.decode(e.hash),ws.decode(e.rollups),t.decode(e.height),M.decode(e.time),t.decode(e.offset),t.decode(e.num_transactions))}}class ga{convert(e){return d(e,Be),{hash:l.encode(e.hash),rollups:ws.encode(e.rollups),height:t.encode(e.height),time:M.encode(e.time),offset:t.encode(e.offset),num_transactions:t.encode(e.numTransactions)}}}class va extends i{encoder=new ga;decoder=new ba}const Ke=new va,$=new A(new D(Ke),new P(Ke));class $r{latestBlock;genesisOverview;latestBlocks;latestTransactions;histograms;constructor(e,o,s,n,c){this.latestBlock=e,this.genesisOverview=o,this.latestBlocks=s,this.latestTransactions=n,this.histograms=c}toJSON(){return Kr.encode(this)}}class ya{convert(e){return a(e,"latest_block","genesis_overview","latest_blocks","latest_transactions","histograms"),new $r(J.decode(e.latest_block),Ur.decode(e.genesis_overview),V.decode(e.latest_blocks),$.decode(e.latest_transactions),Vr.decode(e.histograms))}}class Ea{convert(e){return d(e,$r),{latest_block:J.encode(e.latestBlock),genesis_overview:Ur.encode(e.genesisOverview),latest_blocks:V.encode(e.latestBlocks),latest_transactions:$.encode(e.latestTransactions),histograms:Vr.encode(e.histograms)}}}class Sa extends i{encoder=new Ea;decoder=new ya}const Kr=new Sa;class Yr{blockDetail;constructor(e){this.blockDetail=e}toJSON(){return fs.encode(this)}}class xa{convert(e){return a(e,"block_detail"),new Yr(J.decode(e.block_detail))}}class ka{convert(e){return d(e,Yr),{block_detail:J.encode(e.blockDetail)}}}class Ia extends b{encoder=new ka;decoder=new xa}const fs=new Ia;class Xr{blockSummaries;constructor(e){this.blockSummaries=e}toJSON(){return Cs.encode(this)}}class Ra{convert(e){return a(e,"block_summaries"),new Xr(V.decode(e.block_summaries))}}class _a{convert(e){return d(e,Xr),{block_summaries:V.encode(e.blockSummaries)}}}class Ta extends b{encoder=new _a;decoder=new Ra}const Cs=new Ta;class Zr{explorerSummary;constructor(e){this.explorerSummary=e}toJSON(){return bs.encode(this)}}class Ba{convert(e){return a(e,"explorer_summary"),new Zr(Kr.decode(e.explorer_summary))}}class Aa{convert(e){return d(e,Zr),{explorer_summary:Kr.encode(e.explorerSummary)}}}class Da extends i{encoder=new Aa;decoder=new Ba}const bs=new Da;class eo{blocks;transactions;constructor(e,o){this.blocks=e,this.transactions=o}toJSON(){return ro.encode(this)}}class Pa{convert(e){return a(e,"blocks","transactions"),new eo(V.decode(e.blocks),$.decode(e.transactions))}}class Oa{convert(e){return d(e,eo),{blocks:V.encode(e.blocks),transactions:$.encode(e.transactions)}}}class Na extends b{encoder=new Oa;decoder=new Pa}const ro=new Na;class oo{searchResults;constructor(e){this.searchResults=e}toJSON(){return gs.encode(this)}}class qa{convert(e){return a(e,"search_results"),new oo(ro.decode(e.search_results))}}class Fa{convert(e){return d(e,oo),{search_results:ro.encode(e.searchResults)}}}class Wa extends b{encoder=new Fa;decoder=new qa}const gs=new Wa;class so{static heightAndOffset(e,o){return new Ae(e,o)}static hash(e){return new De(e)}toJSON(){return vs.encode(this)}}class Ga{convert(e){if(d(e,so),e instanceof Ae)return{height:t.encode(e.height),offset:t.encode(e.offset)};if(e instanceof De)return{hash:l.encode(e.hash)};throw new z}}class za{convert(e){if(x(e,"height",k)&&x(e,"offset",k))return new Ae(t.decode(e.height),t.decode(e.offset));if(x(e,"hash",k))return new De(l.decode(e.hash));throw new z}}class Ma extends i{encoder=new Ga;decoder=new za}const vs=new Ma;class Ae extends so{height;offset;constructor(e,o){super(),this.height=e,this.offset=o}}class De extends so{hash;constructor(e){super(),this.hash=e}}const ys=t;class to{namespace;payload;constructor(e,o){this.namespace=e,this.payload=o}toJSON(){return Ye.encode(this)}}class Ha{convert(e){return a(e,"namespace","payload"),new to(ys.decode(e.namespace),_o.decode(e.payload))}}class La{convert(e){return d(e,to),{namespace:ys.encode(e.namespace),payload:_o.encode(e.payload)}}}class Ja extends i{encoder=new La;decoder=new Ha}const Ye=new Ja,Es=new A(new D(Ye),new P(Ye));class co{hash;height;blockConfirmed;offset;numTransactions;size;time;sequencingFees;feeDetails;constructor(e,o,s,n,c,u,p,w,C){this.hash=e,this.height=o,this.blockConfirmed=s,this.offset=n,this.numTransactions=c,this.size=u,this.time=p,this.sequencingFees=w,this.feeDetails=C}toJSON(){return no.encode(this)}}class Qa{convert(e){return a(e,"hash","height","block_confirmed","offset","num_transactions","size","time","sequencing_fees","fee_details"),new co(l.decode(e.hash),t.decode(e.height),ae.decode(e.block_confirmed),t.decode(e.offset),t.decode(e.num_transactions),t.decode(e.size),M.decode(e.time),[],[])}}class Ua{convert(e){return d(e,co),{hash:l.encode(e.hash),height:t.encode(e.height),block_confirmed:ae.encode(e.blockConfirmed),offset:t.encode(e.offset),num_transactions:t.encode(e.numTransactions),size:t.encode(e.size),time:M.encode(e.time),sequencing_fees:[],fee_details:[]}}}class ja extends i{encoder=new Ua;decoder=new Qa}const no=new ja;class ao{details;data;constructor(e,o){this.details=e,this.data=o}toJSON(){return io.encode(this)}}class Va{convert(e){return a(e,"details","data"),new ao(no.decode(e.details),Es.decode(e.data))}}class $a{convert(e){return d(e,ao),{details:no.encode(e.details),data:Es.encode(e.data)}}}class Ka extends i{encoder=new $a;decoder=new Va}const io=new Ka;class ye{transactionDetail;constructor(e){this.transactionDetail=e}toJSON(){return Ss.encode(this)}}class Ya{convert(e){return a(e,"transaction_detail"),new ye(io.decode(e.transaction_detail))}}class Xa{convert(e){return d(e,ye),{transaction_detail:io.encode(e.transactionDetail)}}}class Za extends b{encoder=new Xa;decoder=new Ya}const Ss=new Za;class Pe{constructor(){}static block(e){return new Oe(e)}static namespace(e){return new Ne(e)}static none(){return new uo}toJSON(){return lo.encode(this)}}class ed{convert(e){return x(e,"block",k)?new Oe(t.decode(e.block)):x(e,"namespace",k)?new Ne(t.decode(e.namespace)):new uo}}class rd{convert(e){if(d(e,Pe),e instanceof uo)return{};if(e instanceof Oe)return{block:t.encode(e.block)};if(e instanceof Ne)return{namespace:t.encode(e.namespace)};throw new z}}class od extends b{encoder=new rd;decoder=new ed}const lo=new od;class uo extends Pe{constructor(){super()}convertURL(e){return e}}class Oe extends Pe{block;constructor(e){super(),this.block=e}convertURL(e){return new URL(`${e.pathname}/block/${this.block}`,e)}}class Ne extends Pe{namespace;constructor(e){super(),this.namespace=e}convertURL(e){return new URL(`${e.pathname}/namespace/${this.namespace}`,e)}}class oe{transactionSummaries;constructor(e){this.transactionSummaries=e}toJSON(){return xs.encode(this)}}class sd{convert(e){return a(e,"transaction_summaries"),new oe($.decode(e.transaction_summaries))}}class td{convert(e){return d(e,oe),{transaction_summaries:$.encode(e.transactionSummaries)}}}class cd extends b{encoder=new td;decoder=new sd}const xs=new cd;class qe{limit;constructor(e){this.limit=e}static latest(e){return new Fe(e)}static heightAndOffset(e,o,s){return new We(e,o,s)}static hash(e,o){return new Ge(e,o)}toJSON(){return ho.encode(this)}}class nd{convert(e){return a(e,"limit"),x(e,"height",k)&&x(e,"offset",k)?new We(t.decode(e.height),t.decode(e.offset),t.decode(e.limit)):x(e,"hash",k)?new Ge(l.decode(e.hash),t.decode(e.limit)):new Fe(t.decode(e.limit))}}class ad{convert(e){if(d(e,qe),e instanceof Fe)return{limit:t.encode(e.limit)};if(e instanceof We)return{height:t.encode(e.height),offset:t.encode(e.offset),limit:t.encode(e.limit)};if(e instanceof Ge)return{hash:l.encode(e.hash),limit:t.encode(e.limit)};throw new z}}class dd extends b{encoder=new ad;decoder=new nd}const ho=new dd;class Fe extends qe{constructor(e){super(e)}convertURL(e){return new URL(`transactions/latest/${this.limit}`,e)}}class We extends qe{height;offset;constructor(e,o,s){super(s),this.height=e,this.offset=o}convertURL(e){return new URL(`transactions/from/${this.height}/${this.offset}/${this.limit}`,e)}}class Ge extends qe{hash;constructor(e,o){super(o),this.hash=e}convertURL(e){return new URL(`transactions/hash/${this.hash}/${this.limit}`,e)}}function Eo(r){return new Lr(r.hash,r.height,r.time,r.numTransactions,r.proposer,r.proposer,r.size,r.fees)}function Le(r){return new Jr(r.hash,r.height,r.proposer,r.numTransactions,r.size,r.time)}function So(r,e){return new ao(new co(e.hash,e.block,!0,e.index,r.numTransactions,e.size,e.time,[],[]),[new to(e.tree.namespace,e.tree.data)])}function ue(r,e){return new Be(e.hash,[e.tree.namespace],e.block,e.time,e.index,r.numTransactions)}class id{async getBlockDetail(e){const o=e.target,s=await(o===j?Vs(E()):Ce(we(E(),o)));return new Yr(Eo(s))}async getBlockSummaries(e){const o=No(E(),p=>e.from===j||p.height<=e.from),s=qo(o),n=fe(s,e.limit),c=Oo(n,async p=>Le(p)),u=await re(c);return new Xr(u)}async getTransactionDetail(e){const o=E();if(e instanceof Ae){const s=ze(o,p=>p.height<=e.height),n=U(s,p=>F(p.transactions,async w=>So(p,w))),c=we(ee(n),e.offset),u=await Ce(c);return new ye(u)}if(e instanceof De){const s=U(o,c=>F(c.transactions,async u=>So(c,u))),n=await $s(s,c=>c.details.hash===e.hash);if(!n)throw new Ys(e.hash);return new ye(n)}throw new f}applyFilter(e,o){return o instanceof Oe?go(e,s=>s.height==o.block):o instanceof Ne?go(e,s=>s.rollups.indexOf(o.namespace)>=0):e}async getTransactionSummaries(e){const o=E(),{target:s,filter:n}=e;if(s instanceof Fe){const u=U(o,g=>F(g.transactions,async m=>ue(g,m))),p=ee(u),w=this.applyFilter(p,n),C=await Me(He(w,s.limit));return new oe(C)}if(s instanceof We){const c=ze(o,m=>m.height<=s.height),u=U(c,m=>F(m.transactions,async v=>ue(m,v))),p=ee(u),w=we(p,s.offset),C=this.applyFilter(w,n),g=await Me(He(C,s.limit));return new oe(g)}if(s instanceof Ge){const c=E(),u=U(c,m=>F(m.transactions,async v=>new Be(v.hash,[v.tree.namespace],v.block,v.time,v.index,m.numTransactions))),p=ze(u,m=>m.hash!==s.hash),w=ee(p),C=this.applyFilter(w,n),g=await Me(He(C,s.limit));return new oe(g)}throw new f}async getExplorerOverview(){let e;const o=B(11),s=B(51),n=B(51),c=B(51),u=B(51),p=B(11);let w=0,C=0;const g=new Map;for await(const m of E()){e=Eo(m),o.put(Le(m)),s.put(m.size),n.put(Math.round(m.genTime/1e3)),c.put(m.numTransactions),u.put(m.height),w++,C+=m.numTransactions;for await(const v of m.transactions){p.put(ue(m,v));const Q=g.get(v.tree.namespace)||0;g.set(v.tree.namespace,Q+1)}}return new Zr(new $r(e,new Qr(Array.from(g.keys()).length,C,w),Array.from(o),Array.from(p),new jr(Array.from(n),Array.from(s),Array.from(c),Array.from(u))))}async getSearchResult(e){const o=B(101),s=B(10),n=B(10);for await(const c of E())o.put(c);for(const c of o){c.hash.toString().startsWith(e.query)&&s.put(Le(c));for await(const u of c.transactions)u.hash.toString().startsWith(e.query)&&n.put(ue(c,u))}return new oo(new eo(Array.from(s),Array.from(n)))}}class ld{async getLatestRewardBalance(){return 12345678900000000n}}class ud{async blockHeight(){return(await Ks(E())).height}}class hd{availability=new Gc;status=new ud;explorer=new id;rewardState=new ld;async setURL(){throw new f}}class pd{async getLeafFromHeight(){throw new f}async getTransactionFromHeightAndOffset(){throw new f}async getBlockFromHeight(){throw new f}async getBlockSummaries(){throw new f}async getTransactionSummaryRange(){throw new f}async getTransactionSummaryRangeForRollup(){throw new f}}class md{async getBlockDetail(){throw new f}async getBlockSummaries(){throw new f}async getTransactionDetail(){throw new f}async getTransactionSummaries(){throw new f}async getExplorerOverview(){throw new f}async getSearchResult(){throw new f}}class wd{async getLatestRewardBalance(){throw new f}}class fd{async blockHeight(){throw new f}}class Cd{availability=new pd;status=new fd;explorer=new md;rewardState=new wd;setURL(){throw new f}}function he(){return y(!1,"completer is not ready, this should never be reached")}function pe(){throw new Ar}class bd{resolve=he;reject=he;completed=!1;promise;get isCompleted(){return this.completed}constructor(){this.promise=new Promise((e,o)=>{this.resolve=e,this.reject=o}),y(this.resolve!==he,"resolve should be set"),y(this.reject!==he,"resolve should be set")}complete(e){const o=this.resolve,s=this.reject;if(this.completed=!0,this.resolve=pe,this.reject=pe,e instanceof Promise){e.then(o,s);return}o(e)}completeError(e){this.reject(e),this.completed=!0,this.resolve=pe,this.reject=pe}}function gd(){return new bd}const K=t;class po{requestID;api;method;param;constructor(e,o,s,n){this.requestID=e,this.api=o,this.method=s,this.param=n}toJSON(){return{requestID:this.requestID,api:this.api,method:this.method,param:this.param}}}class vd{convert(e){return a(e,"requestID","api","method","param"),new po(K.decode(e.requestID),h.decode(e.api),h.decode(e.method),e.param)}}class yd{convert(e){return d(e,po),{requestID:K.encode(e.requestID),api:h.encode(e.api),method:h.encode(e.method),param:e.param}}}class Ed extends i{encoder=new yd;decoder=new vd}const Sd=new Ed;class mo{requestID;constructor(e){this.requestID=e}}class wo extends mo{response;constructor(e,o){super(e),this.response=o}toJSON(){return ks.encode(this)}}class xd{convert(e){return a(e,"requestID","response"),new wo(K.decode(e.requestID),e.response)}}class kd{convert(e){return d(e,wo),{requestID:K.encode(e.requestID),response:e.response}}}class Id extends i{encoder=new kd;decoder=new xd}const ks=new Id;class fo extends mo{error;constructor(e,o){super(e),this.error=o}toJSON(){return Is.encode(this)}}class Rd{convert(e){return a(e,"requestID","error"),new fo(K.decode(e.requestID),xe.decode(e.error))}}class _d{convert(e){return d(e,fo),{requestID:K.encode(e.requestID),error:xe.encode(e.error)}}}class Td extends i{encoder=new _d;decoder=new Rd}const Is=new Td;class Bd{convert(e){if(x(e,"response",k))return ks.decode(e);if(x(e,"error",k))return Is.decode(e);throw new z}}class Ad{convert(e){return d(e,mo),e.toJSON()}}class Dd extends i{encoder=new Ad;decoder=new Bd}const xo=new Dd;class Co{target;constructor(e){this.target=e}static latest(){return new _s}static height(e){return new Ts(e)}toJSON(){return Rs.encode(this)}}class Pd{convert(e){return d(e,Co),typeof e.target=="number"?t.encode(e.target):h.encode(e.target)}}class Od{convert(e){return e===j?new _s:new Ts(t.decode(e))}}class Nd extends b{encoder=new Pd;decoder=new Od}const Rs=new Nd;class _s extends Co{constructor(){super(j)}}class Ts extends Co{constructor(e){super(e)}}class bo{limit;constructor(e){this.limit=e}static latest(e){return new As(e)}static from(e,o){return new Ds(e,o)}toJSON(){return Bs.encode(this)}}class qd{convert(e){return d(e,bo),Ls(e.from)?{from:t.encode(e.from),limit:t.encode(e.limit)}:{from:h.encode(e.from),limit:t.encode(e.limit)}}}class Fd{convert(e){return a(e,"from","limit"),e.from===j?new As(t.decode(e.limit)):new Ds(t.decode(e.from),t.decode(e.limit))}}class Wd extends b{encoder=new qd;decoder=new Fd}const Bs=new Wd;class As extends bo{constructor(e){super(e)}get from(){return j}}class Ds extends bo{from;constructor(e,o){super(o),this.from=e}}class Ps{query;constructor(e){this.query=e}toJSON(){return Os.encode(this)}}class Gd{convert(e){return d(e,Ps),h.encode(e.query)}}class zd{convert(e){return new Ps(h.decode(e))}}class Md extends b{encoder=new Gd;decoder=new zd}const Os=new Md;class Ns{target;filter;constructor(e,o){this.target=e,this.filter=o}toJSON(){return qs.encode(this)}}class Hd{convert(e){return a(e,"filter","target"),new Ns(ho.decode(e.target),lo.decode(e.filter))}}class Ld{convert(e){return d(e,Ns),{filter:lo.encode(e.filter),target:ho.encode(e.target)}}}class Jd extends b{encoder=new Ld;decoder=new Hd}const qs=new Jd;function Qd(r){return new Worker(""+new URL("hotshot_query_service_web_worker_api.js-CakCDrvU.js",import.meta.url).href,{name:r?.name})}class Ud{worker;nextRequestID=0;requestCompleters=new Map;constructor(e){this.worker=e,e.addEventListener("message",this.handleMessage.bind(this)),e.addEventListener("messageerror",this.handleMessageError.bind(this)),e.addEventListener("error",this.handleError.bind(this))}async submitRequest(e,o,s,n){const[c,u]=this.nextRequest();try{return this.worker.postMessage(Sd.encode(new po(c,o,s,n))),await u.promise.then(p=>{if(p instanceof fo)throw new ls(p.error);if(p instanceof wo){const{response:w}=p;return e.decode(w)}throw new H(typeof p,"WebWorkerResponse")})}finally{this.requestCompleters.delete(c)}}nextRequest(){const e=this.nextRequestID++,o=gd();return this.requestCompleters.set(e,o),[e,o]}handleMessage(e){const o=xo.decode(e.data),s=this.requestCompleters.get(o.requestID);if(s===void 0)throw new ve(o.requestID);s.complete(o)}handleMessageError(e){const o=xo.decode(e.data),s=this.requestCompleters.get(o.requestID);if(s===void 0)throw new ve(o.requestID);s.completeError(o)}handleError(e){debugger;console.error("encountered error setting up Web worker",e)}}class jd{helper;constructor(e){this.helper=e}async sendRequest(e,o,...s){return this.helper.submitRequest(e,"availability",o,s)}async getLeafFromHeight(e){return await this.sendRequest($o,"getLeafFromHeight",e)}async getTransactionFromHeightAndOffset(e,o){return await this.sendRequest(Ko,"getTransactionFromHeightAndOffset",e,o)}async getBlockSummaries(e,o){return await this.sendRequest(kt,"getBlockSummaries",e,o)}async getBlockFromHeight(e){return await this.sendRequest(Go,"getBlockFromHeight",e)}async getTransactionSummaryRange(e,o,s){return await this.sendRequest(vo,"getTransactionSummaryRange",e,o,s)}async getTransactionSummaryRangeForRollup(e,o,s,n){return await this.sendRequest(vo,"getTransactionSummaryRangeForRollup",e,o,s,n)}}class Vd{helper;constructor(e){this.helper=e}async sendRequest(e,o,...s){return this.helper.submitRequest(e,"status",o,s)}async blockHeight(){return await this.sendRequest(t,"blockHeight")}}class $d{helper;constructor(e){this.helper=e}async sendRequest(e,o,...s){return this.helper.submitRequest(e,"explorer",o,s)}async getBlockDetail(e){return await this.sendRequest(fs,"getBlockDetail",Rs.encode(e))}async getBlockSummaries(e){return await this.sendRequest(Cs,"getBlockSummaries",Bs.encode(e))}async getTransactionDetail(e){return await this.sendRequest(Ss,"getTransactionDetail",vs.encode(e))}async getTransactionSummaries(e){return await this.sendRequest(xs,"getTransactionSummaries",qs.encode(e))}async getExplorerOverview(){return await this.sendRequest(bs,"getExplorerOverview",null)}async getSearchResult(e){return await this.sendRequest(gs,"getSearchResult",Os.encode(e))}}class Kd{helper;constructor(e){this.helper=e}async sendRequest(e,o,...s){return this.helper.submitRequest(e,"reward-state",o,s)}async getLatestRewardBalance(e){return await this.sendRequest(Gs,"getLatestRewardBalance",h.encode(e))}}let Je=null;function Yd(){return Je||(Je=new Qd),Je}class Xd{availability;status;explorer;rewardState;helper;constructor(){const e=Yd(),o=new Ud(e);this.helper=o,this.availability=new jd(o),this.status=new Vd(o),this.explorer=new $d(o),this.rewardState=new Kd(o)}async sendRequest(e,o,...s){return this.helper.submitRequest(e,"proxy",o,s)}async setURL(e){return await this.sendRequest(ae,"set-url",h.encode(e))}}const Xe=Io.createContext(new Cd);let me=null;function Zd(r){return me===null&&(me=new Xd),r&&me.setURL(r).then(e=>{e||console.warn("unable to set the url for the hotshot query service",r)},e=>{console.error("unable to set the url for the hotshot query service",r,e)}),me}function ei(r){return typeof window<"u"&&"Worker"in window||typeof self<"u"&&"Worker"in self?Zd(r):new hd}const ko=r=>{const o=Io.useContext(Ws)?.hotshotQueryServiceURL;return Fs.jsx(Xe.Provider,{value:ei(o),children:r.children})};try{Xe.displayName="CappuccinoHotShotQueryServiceAPIContext",Xe.__docgenInfo={description:"",displayName:"CappuccinoHotShotQueryServiceAPIContext",props:{}}}catch{}try{ko.displayName="ProvideCappuccinoHotShotQueryServiceAPIContext",ko.__docgenInfo={description:`ProvideCappuccinoHotShotQueryServiceAPIContext is a component that provides a
Cappuccino HotShot Query Service API using a default implementation that is
dependent on the environment that the code is being run within.`,displayName:"ProvideCappuccinoHotShotQueryServiceAPIContext",props:{}}}catch{}export{ae as A,Xe as C,hd as F,ve as N,ko as P,ls as W,oo as a,eo as b,Jr as c,Be as d,Ps as e,Ns as f,qe as g,Pe as h,Co as i,so as j,bo as k,B as l,ea as m,Qn as n,gd as o,Zc as p,bi as q,Vr as r,J as s,te as t,Ci as u,Jo as v,se as w,zo as x,jr as y,Lr as z};
