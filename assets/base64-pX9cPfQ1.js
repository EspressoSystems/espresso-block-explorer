var K=Object.defineProperty;var W=(r,e,t)=>e in r?K(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var c=(r,e,t)=>W(r,typeof e!="symbol"?e+"":e,t);import{N as q,f as G,g as H,A as T,k,l as O,T as C,n as Q,I as X,e as Y,r as m,B as v,a as I,b as M,s as B,j as V,c as j,d as Z}from"./string-CcoL8872.js";class ${convert(e){if(!Q(e))throw new X(typeof e,"number");return e}}class _{convert(e){return Y(e,"number"),e}}class ee extends C{constructor(){super(...arguments);c(this,"encoder",new _);c(this,"decoder",new $)}}const u=new ee,S=new q(new G(u),new H(u)),Be=new T(new k(u),new O(u)),ye=new T(new k(S),new O(S)),x="CorruptBase64InputError";class f extends v{constructor(t,s=`corrupt input error at ${t}`){super(s);c(this,"offset");this.offset=t,Object.freeze(this)}get code(){return x}toJSON(){return z.encode(this)}}class te{convert(e){return I(e,"code","offset","message"),M(e,x),new f(u.decode(e.offset),B.decode(e.message))}}class re{convert(e){return V(e,f),{...j.convert(e),offset:u.encode(e.offset),message:B.encode(e.message)}}}class ne extends C{constructor(){super(...arguments);c(this,"encoder",new re);c(this,"decoder",new te)}}const z=new ne;m(x,z);const D="IncorrectBase64PaddingError";class J extends v{constructor(e="incorrect padding"){super(e),Object.freeze(this)}get code(){return D}}class se{convert(e){return I(e,"code","message"),M(e,D),new J(B.decode(e.message))}}class oe extends Z{}class ce extends C{constructor(){super(...arguments);c(this,"encoder",new oe);c(this,"decoder",new se)}}const ae=new ce;m(D,ae);const L="InvalidBase64AlphabetLengthError";class N extends v{constructor(t,s=`alphabet needs to be 64 characters, received ${t}`){super(s);c(this,"length");this.length=t,Object.freeze(this)}toJSON(){return R.encode(this)}get code(){return L}}class de{convert(e){return I(e,"code","length","message"),M(e,L),new N(u.decode(e.length),B.decode(e.message))}}class ie{convert(e){return V(e,N),{...j.convert(e),length:u.encode(e.length)}}}class he extends C{constructor(){super(...arguments);c(this,"encoder",new ie);c(this,"decoder",new de)}}const R=new he;m(L,R);const le=new TextEncoder;function F(r){return le.encode(r)}const we=new TextDecoder;function ge(r){return we.decode(r)}function*fe(r){yield*F(r)}function*ue(){for(let r=0;r<256;r++)yield 255}const p=-1,pe=61;class E{constructor(e,t,s=pe,i=!1){c(this,"encodeMap");c(this,"decodeMap");c(this,"padChar");c(this,"strict");this.encodeMap=e,this.decodeMap=t,this.padChar=s,this.strict=i}static withAlphabet(e){const t=e.length;if(t!==64)throw new N(t);const s=Array.from(fe(e)),i=Array.from(ue());for(let h=0;h<t;h++)i[s[h]]=h;return new E(s,i)}withPadding(e){return new E(this.encodeMap,this.decodeMap,e,this.strict)}encode(e){if(e.byteLength===0)return new ArrayBuffer(0);let t=0,s=0;const i=Math.floor(e.byteLength/3)*3,h=Math.ceil(e.byteLength/3)*4,w=new ArrayBuffer(h),o=new DataView(e),a=new DataView(w);for(;s<i;){const g=o.getUint8(s+0)<<16|o.getUint8(s+1)<<8|o.getUint8(s+2);a.setUint8(t+0,this.encodeMap[g>>18&63]),a.setUint8(t+1,this.encodeMap[g>>12&63]),a.setUint8(t+2,this.encodeMap[g>>6&63]),a.setUint8(t+3,this.encodeMap[g&63]),s+=3,t+=4}const n=e.byteLength-s;if(n===0)return w;let l=o.getUint8(s+0)<<16;switch(n===2&&(l|=o.getUint8(s+1)<<8),a.setUint8(t+0,this.encodeMap[l>>18&63]),a.setUint8(t+1,this.encodeMap[l>>12&63]),n){case 2:return a.setUint8(t+2,this.encodeMap[l>>6&63]),this.padChar!==p?(a.setUint8(t+3,this.padChar),w.slice(0,t+4)):w.slice(0,t+3);case 1:if(this.padChar!==p)return a.setUint8(t+2,this.padChar),a.setUint8(t+3,this.padChar),w.slice(0,t+4);break}return w.slice(0,t+2)}decode(e){const t=e.byteLength;if(t===0)return new ArrayBuffer(0);const s=new DataView(e),i=new ArrayBuffer(Math.floor(t/4*3)),h=new DataView(i),w=new ArrayBuffer(4),o=new DataView(w);let a=0,n=0,l=0,g=!1;for(;n<t&&!g;){let y=3,U=4;for(let d=0;d<4;d++){if(n===t){if(d===0)return i;if(d===1||this.padChar!==p)throw new f(n-d);y=d-1,U=d,g=!0;break}const b=s.getUint8(n);n++;const P=this.decodeMap[b];if(P!==255){o.setUint8(d,P);continue}if(b===10||b===13){d--;continue}if(b===this.padChar){switch(d){case 0:case 1:throw new J;case 2:for(;n<t&&(s.getUint8(n)===10||s.getUint8(n)===13);)n++;if(n===t)throw new f(t);n++}for(;n<t&&(s.getUint8(n)===10||s.getUint8(n)===13);)n++;if(n<t)throw new f(n);y=3,U=d,g=!0;break}throw new f(n-1)}const A=o.getUint8(0)<<18|o.getUint8(1)<<12|o.getUint8(2)<<6|o.getUint8(3);switch(o.setUint8(2,A>>0&255),o.setUint8(1,A>>8&255),o.setUint8(0,A>>16&255),U){case 4:h.setUint8(l+2,o.getUint8(2)),o.setUint8(2,0);case 3:if(h.setUint8(l+1,o.getUint8(1)),this.strict&&o.getUint8(2)!==0)throw new f(n-1);case 2:if(h.setUint8(l+0,o.getUint8(0)),this.strict&&(o.getUint8(1)!==0||o.getUint8(2)!==0))throw new f(n-2)}l+=y,a+=U-1}return i.slice(0,a)}decodeString(e){return this.decode(F(e).buffer)}encodeToString(e){return ge(this.encode(e))}}const Ee=E.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Ae=Ee.withPadding(p),Ue=E.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),me=Ue.withPadding(p);export{Ae as a,Be as b,fe as c,ye as d,u as n,me as r,Ee as s,Ue as u};
