import{j as c}from"./jsx-runtime-BlAj40OV.js";import{R as l}from"./index-Cs7sjTYM.js";import{b as i,a as r,A as d,P as I}from"./ProvideAsyncStates-DGpd_8Im.js";const y=o=>{const e=o.asyncIterable,[s,u]=l.useState({asyncIterable:e,inFlightPromise:null,state:i.waiting()}),t=s.state;return l.useEffect(()=>{let n=u;if(s.asyncIterable!==e){n({asyncIterable:e,inFlightPromise:null,state:i.waiting()});return}const m=e[Symbol.asyncIterator](),h=a=>{if(a.done){n({asyncIterable:e,inFlightPromise:null,state:i.withData(r.done,t.data)});return}n({asyncIterable:e,inFlightPromise:null,state:i.withData(r.active,a.value)})},p=a=>{n({asyncIterable:e,inFlightPromise:null,state:i.withError(r.done,a)})};if(s.inFlightPromise!==null){s.inFlightPromise.then(h,p);return}if(t.asyncState!==r.done){if(t.asyncState===r.waiting||t.asyncState===r.active){const a=m.next();n({asyncIterable:e,inFlightPromise:a,state:t})}return()=>{n=()=>{}}}},[e,t,t.asyncState,t.data,s.inFlightPromise,s.asyncIterable]),c.jsx(d.Provider,{value:t,children:c.jsx(I,{children:o.children})})};try{y.displayName="AsyncIterableResolver",y.__docgenInfo={description:`AsyncIterableResolver is a component that resolves an AsyncIterable into a series of AsyncSnapshots.
This component is useful for consuming an AsyncIterable in a React component.`,displayName:"AsyncIterableResolver",props:{asyncIterable:{defaultValue:null,description:"",name:"asyncIterable",required:!0,type:{name:"AsyncIterable<unknown>"}}}}}catch{}export{y as A};
