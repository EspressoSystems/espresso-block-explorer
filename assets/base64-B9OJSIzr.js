var z=Object.defineProperty;var J=(r,e,t)=>e in r?z(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var c=(r,e,t)=>J(r,typeof e!="symbol"?e+"":e,t);import{A as R,h as F,j as K,T as b,l as W,I as q,m as G,r as m,B as v,a as I,b as M,s as B,g as T,c as k,f as H}from"./string-BRHtp8nH.js";class Q{convert(e){if(!W(e))throw new q(typeof e,"number");return e}}class X{convert(e){return G(e,"number"),e}}class Y extends b{constructor(){super(...arguments);c(this,"encoder",new X);c(this,"decoder",new Q)}}const u=new Y,Ue=new R(new F(u),new K(u)),x="CorruptBase64InputError";class f extends v{constructor(t,s=`corrupt input error at ${t}`){super(s);c(this,"offset");this.offset=t,Object.freeze(this)}get code(){return x}toJSON(){return N.encode(this)}}class Z{convert(e){return I(e,"code","offset","message"),M(e,x),new f(u.decode(e.offset),B.decode(e.message))}}class ${convert(e){return T(e,f),{...k.convert(e),offset:u.encode(e.offset),message:B.encode(e.message)}}}class _ extends b{constructor(){super(...arguments);c(this,"encoder",new $);c(this,"decoder",new Z)}}const N=new _;m(x,N);const L="IncorrectBase64PaddingError";class O extends v{constructor(e="incorrect padding"){super(e),Object.freeze(this)}get code(){return L}}class ee{convert(e){return I(e,"code","message"),M(e,L),new O(B.decode(e.message))}}class te extends H{}class re extends b{constructor(){super(...arguments);c(this,"encoder",new te);c(this,"decoder",new ee)}}const ne=new re;m(L,ne);const D="InvalidBase64AlphabetLengthError";class P extends v{constructor(t,s=`alphabet needs to be 64 characters, received ${t}`){super(s);c(this,"length");this.length=t,Object.freeze(this)}toJSON(){return V.encode(this)}get code(){return D}}class se{convert(e){return I(e,"code","length","message"),M(e,D),new P(u.decode(e.length),B.decode(e.message))}}class oe{convert(e){return T(e,P),{...k.convert(e),length:u.encode(e.length)}}}class ce extends b{constructor(){super(...arguments);c(this,"encoder",new oe);c(this,"decoder",new se)}}const V=new ce;m(D,V);const ae=new TextEncoder;function j(r){return ae.encode(r)}const de=new TextDecoder;function ie(r){return de.decode(r)}function*he(r){yield*j(r)}function*le(){for(let r=0;r<256;r++)yield 255}const p=-1,ge=61;class U{constructor(e,t,s=ge,i=!1){c(this,"encodeMap");c(this,"decodeMap");c(this,"padChar");c(this,"strict");this.encodeMap=e,this.decodeMap=t,this.padChar=s,this.strict=i}static withAlphabet(e){const t=e.length;if(t!==64)throw new P(t);const s=Array.from(he(e)),i=Array.from(le());for(let h=0;h<t;h++)i[s[h]]=h;return new U(s,i)}withPadding(e){return new U(this.encodeMap,this.decodeMap,e,this.strict)}encode(e){if(e.byteLength===0)return new ArrayBuffer(0);let t=0,s=0;const i=Math.floor(e.byteLength/3)*3,h=Math.ceil(e.byteLength/3)*4,g=new ArrayBuffer(h),o=new DataView(e),a=new DataView(g);for(;s<i;){const w=o.getUint8(s+0)<<16|o.getUint8(s+1)<<8|o.getUint8(s+2);a.setUint8(t+0,this.encodeMap[w>>18&63]),a.setUint8(t+1,this.encodeMap[w>>12&63]),a.setUint8(t+2,this.encodeMap[w>>6&63]),a.setUint8(t+3,this.encodeMap[w&63]),s+=3,t+=4}const n=e.byteLength-s;if(n===0)return g;let l=o.getUint8(s+0)<<16;switch(n===2&&(l|=o.getUint8(s+1)<<8),a.setUint8(t+0,this.encodeMap[l>>18&63]),a.setUint8(t+1,this.encodeMap[l>>12&63]),n){case 2:return a.setUint8(t+2,this.encodeMap[l>>6&63]),this.padChar!==p?(a.setUint8(t+3,this.padChar),g.slice(0,t+4)):g.slice(0,t+3);case 1:if(this.padChar!==p)return a.setUint8(t+2,this.padChar),a.setUint8(t+3,this.padChar),g.slice(0,t+4);break}return g.slice(0,t+2)}decode(e){const t=e.byteLength;if(t===0)return new ArrayBuffer(0);const s=new DataView(e),i=new ArrayBuffer(Math.floor(t/4*3)),h=new DataView(i),g=new ArrayBuffer(4),o=new DataView(g);let a=0,n=0,l=0,w=!1;for(;n<t&&!w;){let y=3,E=4;for(let d=0;d<4;d++){if(n===t){if(d===0)return i;if(d===1||this.padChar!==p)throw new f(n-d);y=d-1,E=d,w=!0;break}const C=s.getUint8(n);n++;const S=this.decodeMap[C];if(S!==255){o.setUint8(d,S);continue}if(C===10||C===13){d--;continue}if(C===this.padChar){switch(d){case 0:case 1:throw new O;case 2:for(;n<t&&(s.getUint8(n)===10||s.getUint8(n)===13);)n++;if(n===t)throw new f(t);n++}for(;n<t&&(s.getUint8(n)===10||s.getUint8(n)===13);)n++;if(n<t)throw new f(n);y=3,E=d,w=!0;break}throw new f(n-1)}const A=o.getUint8(0)<<18|o.getUint8(1)<<12|o.getUint8(2)<<6|o.getUint8(3);switch(o.setUint8(2,A>>0&255),o.setUint8(1,A>>8&255),o.setUint8(0,A>>16&255),E){case 4:h.setUint8(l+2,o.getUint8(2)),o.setUint8(2,0);case 3:if(h.setUint8(l+1,o.getUint8(1)),this.strict&&o.getUint8(2)!==0)throw new f(n-1);case 2:if(h.setUint8(l+0,o.getUint8(0)),this.strict&&(o.getUint8(1)!==0||o.getUint8(2)!==0))throw new f(n-2)}l+=y,a+=E-1}return i.slice(0,a)}decodeString(e){return this.decode(j(e).buffer)}encodeToString(e){return ie(this.encode(e))}}const we=U.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Ee=we.withPadding(p),fe=U.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Ce=fe.withPadding(p);export{Ee as a,Ue as b,he as c,u as n,Ce as r,we as s,fe as u};
