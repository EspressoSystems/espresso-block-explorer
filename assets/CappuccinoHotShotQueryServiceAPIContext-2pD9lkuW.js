import{R as xo,j as Ot}from"./iframe-DDtNpaPj.js";import{B as Nt}from"./explorer-CC5IGeiJ.js";import{U as f}from"./UnimplementedError-DEXMe0kn.js";import{h as T,u as ko,b as W,s as Io}from"./array_buffer-ChxgVYUa.js";import{a as qt}from"./url-Cp1wsmOC.js";import{b as i,c as Ft,a as v}from"./assert-BI051aL8.js";import{T as d,b as a,N as _o,s as p,f as Ro,g as To,A,k as D,l as P,C as b,t as Wt,I as H,j as Ye,v as Gt,w as x,x as k,d as Xe,B as G,r as I,c as _,a as Ee,u as Bo,e as Ao,h as zt}from"./string-DurhFPzJ.js";import{M as Mt}from"./MissingElementError-C2wrrywP.js";import{n as s,b as O,d as F}from"./base64-CwylSrof.js";import{W as Ht}from"./WebWorkerErrorResponse-DDmF8pSp.js";import{I as z,m as Do}from"./monetary_value-D_JlCdWi.js";import{t as l,T as S}from"./TaggedBase64-DTqtQPCE.js";import{m as Lt}from"./functional-CtVX7zWU.js";import{a as E}from"./generateFakeData-DW9myA_6.js";import{h as Ce,i as Z,j as Jt,k as we,t as fe,l as Po,n as re,o as Oo,r as No,p as U,q as Qt,m as q,s as ee,v as Ut,w as We,x as jt,y as Co,z as Ge,A as ze,B as Vt}from"./LoadingProvider-EJvyESuW.js";import"./FetchError-CshovAWm.js";import{N as $t}from"./NotFoundError-BfMh7-IB.js";class Ze{r;s;v;constructor(e,o,t){this.r=e,this.s=o,this.v=t}toJSON(){return er.encode(this)}}class Kt{convert(e){return a(e,"r","s","v"),new Ze(T.decode(e.r),T.decode(e.s),s.decode(e.v))}}class Yt{convert(e){return i(e,Ze),{r:T.encode(e.r),s:T.encode(e.s),v:s.encode(e.v)}}}class Xt extends d{encoder=new Yt;decoder=new Kt}const er=new Xt;class rr{account;amount;constructor(e,o){this.account=e,this.amount=o}toJSON(){return or.encode(this)}}class Zt{convert(e){return a(e,"account","amount"),new rr(T.decode(e.account),T.decode(e.amount))}}class es{convert(e){return i(e,rr),{account:T.encode(e.account),amount:T.encode(e.amount)}}}class rs extends d{encoder=new es;decoder=new Zt}const or=new rs;class tr{number;timestamp;hash;constructor(e,o,t){this.number=e,this.timestamp=o,this.hash=t}toJSON(){return Le.encode(this)}}class os{convert(e){return a(e,"number","timestamp","hash"),new tr(s.decode(e.number),p.decode(e.timestamp),p.decode(e.hash))}}class ts{convert(e){return i(e,tr),{number:s.encode(e.number),timestamp:p.encode(e.timestamp),hash:p.encode(e.hash)}}}class ss extends d{encoder=new ts;decoder=new os}const Le=new ss,qo=new _o(new Ro(Le),new To(Le));class sr{bytes;constructor(e){this.bytes=e}toJSON(){return cr.encode(this)}}class cs{convert(e){return a(e,"bytes"),new sr(ko.decode(e.bytes))}}class ns{convert(e){return i(e,sr),{bytes:ko.encode(e.bytes)}}}class as extends d{encoder=new ns;decoder=new cs}const cr=new as;class nr{height;timestamp;l1_head;l1_finalized;payload_commitment;ns_table;block_merkle_root;fee_merkle_root;builder_signature;fee_info;constructor(e,o,t,n,c,u,h,w,C,g){this.height=e,this.timestamp=o,this.l1_head=t,this.l1_finalized=n,this.payload_commitment=c,this.ns_table=u,this.block_merkle_root=h,this.fee_merkle_root=w,this.builder_signature=C,this.fee_info=g}toJSON(){return N.encode(this)}}class is{convert(e){return a(e,"height","timestamp","l1_head","l1_finalized","payload_commitment","ns_table","block_merkle_root","fee_merkle_root","builder_signature","fee_info"),new nr(s.decode(e.height),s.decode(e.timestamp),s.decode(e.l1_head),qo.decode(e.l1_finalized),O.decode(e.payload_commitment),cr.decode(e.ns_table),l.decode(e.block_merkle_root),l.decode(e.fee_merkle_root),er.decode(e.builder_signature),or.decode(e.fee_info))}}class ds{convert(e){return i(e,nr),{height:s.encode(e.height),timestamp:s.encode(e.timestamp),l1_head:s.encode(e.l1_head),l1_finalized:qo.encode(e.l1_finalized),payload_commitment:O.encode(e.payload_commitment),ns_table:cr.encode(e.ns_table),block_merkle_root:l.encode(e.block_merkle_root),fee_merkle_root:l.encode(e.fee_merkle_root),builder_signature:er.encode(e.builder_signature),fee_info:or.encode(e.fee_info)}}}class ls extends d{encoder=new ds;decoder=new is}const N=new ls;class ce{vm;payload;constructor(e,o){this.vm=e,this.payload=o}toJSON(){return L.encode(this)}}class us{convert(e){return a(e,"vm","payload"),new ce(s.decode(e.vm),O.decode(e.payload))}}class hs{convert(e){return i(e,ce),{vm:s.encode(e.vm),payload:O.encode(e.payload)}}}class ps extends d{encoder=new hs;decoder=new us}const L=new ps,Fo=new A(new D(L),new P(L));class ar{transaction_nmt;constructor(e){this.transaction_nmt=e}toJSON(){return ne.encode(this)}}class ms{convert(e){return a(e,"transaction_nmt"),new ar(Fo.decode(e.transaction_nmt))}}class ws{convert(e){return i(e,ar),{transaction_nmt:Fo.encode(e.transaction_nmt)}}}class fs extends d{encoder=new ws;decoder=new ms}const ne=new fs;class ir{header;payload;hash;size;numTransactions;constructor(e,o,t,n,c){this.header=e,this.payload=o,this.hash=t,this.size=n,this.numTransactions=c}toJSON(){return Wo.encode(this)}}class Cs{convert(e){return a(e,"header","payload","hash","size","num_transactions"),new ir(N.decode(e.header),ne.decode(e.payload),l.decode(e.hash),s.decode(e.size),s.decode(e.num_transactions))}}class bs{convert(e){return i(e,ir),{header:N.encode(e.header),payload:ne.encode(e.payload),hash:l.encode(e.hash),size:s.encode(e.size),num_transactions:s.encode(e.numTransactions)}}}class gs extends b{encoder=new bs;decoder=new Cs}const Wo=new gs;class dr{header;hash;size;num_transactions;proposer_id;constructor(e,o,t,n,c){this.header=e,this.hash=o,this.size=t,this.num_transactions=n,this.proposer_id=c}toJSON(){return Je.encode(this)}}class ys{convert(e){return a(e,"header","hash","size","num_transactions","proposer_id"),new dr(N.decode(e.header),l.decode(e.hash),s.decode(e.size),s.decode(e.num_transactions),W.decode(e.proposer_id))}}class vs{convert(e){return i(e,dr),{header:N.encode(e.header),hash:l.encode(e.hash),size:s.encode(e.size),num_transactions:s.encode(e.num_transactions),proposer_id:W.encode(e.proposer_id)}}}class Es extends d{encoder=new vs;decoder=new ys}const Je=new Es,Ss=new A(new D(Je),new P(Je));class lr{hash;header;offset;transaction;constructor(e,o,t,n){this.hash=e,this.header=o,this.offset=t,this.transaction=n}toJSON(){return Qe.encode(this)}}class xs{convert(e){return a(e,"hash","header","offset","transaction"),new lr(l.decode(e.hash),N.decode(e.header),s.decode(e.offset),L.decode(e.transaction))}}class ks{convert(e){return i(e,lr),{hash:l.encode(e.hash),header:N.encode(e.header),offset:s.encode(e.offset),transaction:L.encode(e.transaction)}}}class Is extends d{encoder=new ks;decoder=new xs}const Qe=new Is,bo=new A(new D(Qe),new P(Qe));class _s{convert(e){if(!Wt(e))throw new H(typeof e,"boolean");return e}}class Rs{convert(e){return Ft(e,"boolean"),e}}class Ts extends d{encoder=new Rs;decoder=new _s}const ae=new Ts;class be{leaf_commit;constructor(e){this.leaf_commit=e}toJSON(){return ur.encode(this)}}class Bs{convert(e){return a(e,"leaf_commit"),new be(l.decode(e.leaf_commit))}}class As{convert(e){return i(e,be),{leaf_commit:l.encode(e.leaf_commit)}}}class Ds extends d{encoder=new As;decoder=new Bs}const ur=new Ds;class Ps{convert(e){if(!Ye(e))throw new H(typeof e,"string");const o=new Date(e);if(Number.isNaN(o.valueOf()))throw new H("NaN","number");return o}}class Os{convert(e){return i(e,Date),e.toISOString()}}class Ns extends d{encoder=new Os;decoder=new Ps}const M=new Ns;class Go{width;index;constructor(e,o){this.width=e,this.index=o}toJSON(){return hr.encode(this)}}class qs{convert(e){return a(e,"width","index"),new Go(s.decode(e.width),s.decode(e.index))}}class Fs{convert(e){return i(e,Go),{width:s.encode(e.width),index:s.encode(e.index)}}}class Ws extends d{encoder=new Fs;decoder=new qs}const hr=new Ws;class te{static get lsb0(){return zs}static get msb0(){return Hs}valueOf(){return this.toString()}toJSON(){return this.toString()}}const zo="bitvec::order::Lsb0",Mo="bitvec::order::Msb0";class Gs extends te{toString(){return zo}}const zs=new Gs;class Ms extends te{toString(){return Mo}}const Hs=new Ms;class Ls{convert(e){if(typeof e!="string")throw new H(typeof e,"string");switch(e){case zo:return te.lsb0;case Mo:return te.msb0;default:throw new H(e,"CappuccinoAPIBitVecOrder")}}}class Js{convert(e){return e.toString()}}class Qs extends d{encoder=new Js;decoder=new Ls}const Ho=new Qs;class Lo{order;head;bits;data;constructor(e,o,t,n){this.order=e,this.head=o,this.bits=t,this.data=n}getBitVecIndexIterable(){return this.order===te.lsb0?new Ys(this.head.width,this.bits):new Zs(this.head.width,this.bits)}[Symbol.iterator](){const e=this.getBitVecIndexIterable();return Lt(e,o=>$s(this.data,o))[Symbol.iterator]()}toJSON(){return se.encode(this)}}class Us{convert(e){return a(e,"order","head","bits","data"),new Lo(Ho.decode(e.order),hr.decode(e.head),s.decode(e.bits),O.decode(e.data))}}class js{convert(e){return i(e,Lo),{order:Ho.encode(e.order),head:hr.encode(e.head),bits:s.encode(e.bits),data:O.encode(e.data)}}}class Vs extends d{encoder=new js;decoder=new Us}const se=new Vs,pd=new A(new D(se),new P(se));function $s(r,e){return(r[e.bucket]>>e.bitOffset&1)===1}class Jo{bucket;bitOffset;constructor(e,o){this.bucket=e,this.bitOffset=o}}function Qo(r){switch(v(r===8||r===16||r===32,"bit width should be a power of two that is supported"),r){case 8:return 3;case 16:return 4;case 32:return 5;default:throw new f}}class Ks{totalBits;bitWidthMask;bitWidthShift;offset=0;constructor(e,o){this.totalBits=o;const t=Qo(e);this.bitWidthMask=e-1,this.bitWidthShift=t}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,o=this.offset&this.bitWidthMask;return this.offset+=1,{done:!1,value:new Jo(e,o)}}}class Ys{bitWidth;totalBits;constructor(e,o){this.bitWidth=e,this.totalBits=o}[Symbol.iterator](){return new Ks(this.bitWidth,this.totalBits)}}class Xs{bitWidth;totalBits;bitWidthMask;bitWidthShift;offset=0;constructor(e,o){this.bitWidth=e,this.totalBits=o;const t=Qo(e);this.bitWidthMask=e-1,this.bitWidthShift=t}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,o=this.bitWidth-1-(this.offset&this.bitWidthMask);return this.offset+=1,{done:!1,value:new Jo(e,o)}}}class Zs{bitWidth;totalBits;constructor(e,o){this.bitWidth=e,this.totalBits=o}[Symbol.iterator](){return new Xs(this.bitWidth,this.totalBits)}}class Uo{signature;bitvec;constructor(e,o){this.signature=e,this.bitvec=o}toJSON(){return Ue.encode(this)}}class ec{convert(e){if(!Gt(e)||e.length!==2)throw new H(typeof e,"Array");return new Uo(l.decode(e[0]),se.decode(e[1]))}}class rc{convert(e){return i(e,Uo),[l.encode(e.signature),se.encode(e.bitvec)]}}class oc extends d{encoder=new rc;decoder=new ec}const Ue=new oc,jo=new _o(new Ro(Ue),new To(Ue));class ge{data;vote_commitment;view_number;signatures;is_genesis;_pd;constructor(e,o,t,n,c,u){this.data=e,this.vote_commitment=o,this.view_number=t,this.signatures=n,this.is_genesis=c,this._pd=u}toJSON(){return ie.encode(this)}}class tc{convert(e){return a(e,"data","vote_commitment","view_number","signatures","is_genesis","_pd"),new ge(ur.decode(e.data),l.decode(e.vote_commitment),s.decode(e.view_number),jo.decode(e.signatures),ae.decode(e.is_genesis),null)}}class sc{convert(e){return i(e,ge),{data:ur.encode(e.data),vote_commitment:l.encode(e.vote_commitment),view_number:s.encode(e.view_number),signatures:jo.encode(e.signatures),is_genesis:ae.encode(e.is_genesis),_pd:null}}}class cc extends d{encoder=new sc;decoder=new tc}const ie=new cc;class pr{view_number;justify_qc;parent_commitment;block_header;block_payload;rejected;timestamp;proposer_id;constructor(e,o,t,n,c,u,h,w){this.view_number=e,this.justify_qc=o,this.parent_commitment=t,this.block_header=n,this.block_payload=c,this.rejected=u,this.timestamp=h,this.proposer_id=w}toJSON(){return mr.encode(this)}}class nc{convert(e){return a(e,"view_number","justify_qc","parent_commitment","block_header","block_payload","rejected","timestamp","proposer_id"),new pr(s.decode(e.view_number),ie.decode(e.justify_qc),l.decode(e.parent_commitment),N.decode(e.block_header),ne.decode(e.block_payload),O.decode(e.rejected),s.decode(e.timestamp),T.decode(e.proposer_id))}}class ac{convert(e){return i(e,pr),{view_number:s.encode(e.view_number),justify_qc:ie.encode(e.justify_qc),parent_commitment:l.encode(e.parent_commitment),block_header:N.encode(e.block_header),block_payload:ne.encode(e.block_payload),rejected:O.encode(e.rejected),timestamp:s.encode(e.timestamp),proposer_id:T.encode(e.proposer_id)}}}class ic extends d{encoder=new ac;decoder=new nc}const mr=new ic;class wr{leaf;qc;constructor(e,o){this.leaf=e,this.qc=o}toJSON(){return Vo.encode(this)}}class dc{convert(e){return a(e,"leaf","qc"),new wr(mr.decode(e.leaf),ie.decode(e.qc))}}class lc{convert(e){return i(e,wr),{leaf:mr.encode(e.leaf),qc:ie.encode(e.qc)}}}class uc extends d{encoder=new lc;decoder=new dc}const Vo=new uc;class de{}class fr extends de{toJSON(){return Cr.encode(this)}}class hc{convert(e){if(!Ye(e)||e!=="Empty")throw new z;return new fr}}class pc{convert(e){return i(e,fr),"Empty"}}class mc extends d{encoder=new pc;decoder=new hc}const Cr=new mc;class br extends de{value;pos;elem;constructor(e,o,t){super(),this.value=e,this.pos=o,this.elem=t}toJSON(){return gr.encode(this)}}class wc{convert(e){a(e,"Leaf");const o=e.Leaf;return a(o,"value","pos","elem"),new br(l.decode(o.value),l.decode(o.pos),l.decode(o.elem))}}class fc{convert(e){return i(e,br),{Leaf:{value:l.encode(e.value),pos:l.encode(e.pos),elem:l.encode(e.elem)}}}}class Cc extends b{encoder=new fc;decoder=new wc}const gr=new Cc;class yr extends de{value;constructor(e){super(),this.value=e}toJSON(){return vr.encode(this)}}class bc{convert(e){a(e,"ForgettenSubtree");const o=e.ForgettenSubtree;return a(o,"value"),new yr(l.decode(o.value))}}class gc{convert(e){return i(e,yr),{ForgettenSubtree:{value:l.encode(e.value)}}}}class yc extends b{encoder=new gc;decoder=new bc}const vr=new yc;class Se extends de{value;children;constructor(e,o){super(),this.value=e,this.children=o}toJSON(){return Er.encode(this)}}class vc{convert(e){a(e,"Branch");const o=e.Branch;return a(o,"value","children"),new Se(l.decode(o.value),xe.decode(o.children))}}class Ec{convert(e){return i(e,Se),{Branch:{value:l.encode(e.value),children:xe.encode(e.children)}}}}class Sc extends d{encoder=new Ec;decoder=new vc}const Er=new Sc;class xc{convert(e){if(x(e,"Leaf",k))return gr.decoder.convert(e);if(x(e,"Branch",k))return Er.decoder.convert(e);if(x(e,"ForgettenSubtree",k))return vr.decoder.convert(e);if(Ye(e))return Cr.decoder.convert(e);throw new z}}class kc{convert(e){if(i(e,de),e instanceof br)return gr.encode(e);if(e instanceof Se)return Er.encode(e);if(e instanceof yr)return vr.encode(e);if(e instanceof fr)return Cr.encode(e);throw new z}}class Ic extends d{encoder=new kc;decoder=new xc}const go=new Ic,xe=new A(new D(go),new P(go));class Sr{pos;proof;constructor(e,o){this.pos=e,this.proof=o}toJSON(){return xr.encode(this)}}class _c{convert(e){return a(e,"pos","proof"),new Sr(l.decode(e.pos),xe.decode(e.proof))}}class Rc{convert(e){return i(e,Sr),{pos:l.encode(e.pos),proof:xe.encode(e.proof)}}}class Tc extends d{encoder=new Rc;decoder=new _c}const xr=new Tc;class kr{transaction;block_hash;proof;height;hash;constructor(e,o,t,n,c){this.transaction=e,this.block_hash=o,this.proof=t,this.height=n,this.hash=c}toJSON(){return $o.encode(this)}}class Bc{convert(e){return a(e,"transaction","block_hash","proof","height","hash"),new kr(L.decoder.convert(e.transaction),l.decode(e.block_hash),xr.decoder.convert(e.proof),s.decode(e.height),l.decode(e.hash))}}class Ac{convert(e){return i(e,kr),{transaction:L.encode(e.transaction),block_hash:l.encode(e.block_hash),proof:xr.encode(e.proof),height:s.encode(e.height),hash:l.encode(e.hash)}}}class Dc extends d{encoder=new Ac;decoder=new Bc}const $o=new Dc;function ke(r){return new nr(r.height,r.time.valueOf()/1e3,0,new tr(0,"00","00"),[],new sr(new ArrayBuffer(0)),new S("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new S("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new Ze(new ArrayBuffer(0),new ArrayBuffer(0),0),new rr(new ArrayBuffer(0),new ArrayBuffer(0)))}async function Pc(r){return new ir(ke(r),new ar(await re(q(r.transactions,async e=>new ce(e.tree.namespace,Array.from(new Uint8Array(e.tree.data)))))),new S("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions)}function Oc(r){return new dr(ke(r),new S("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions,r.proposer)}function Nc(r){const e=r.transactions,o=ke(r);return q(e,async t=>new lr(t.hash,o,t.index,new ce(t.tree.namespace,Array.from(new Uint8Array(t.tree.data)))))}async function*qc(r){const e=ke(r),o=r.transactions;yield*q(o,async t=>new kr(new ce(t.tree.namespace,Array.from(new Uint8Array(t.tree.data))),new S("BLOCK",new Uint8Array([0,0,0,0]).buffer),new Sr(new S("POS",new Uint8Array([0,0,0,0]).buffer),[new Se(new S("EMPTY",new Uint8Array([0,0,0,0]).buffer),[])]),e.height,new S("COMMIT",t.tree.data.slice(0,32))))}class Fc{async getLeafFromHeight(e){const o=await this.getBlockFromHeight(e);return new wr(new pr(e,new ge(new be(new S("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new S("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null),new S("LEAF",new Uint8Array([0,0,0,0]).buffer),o.header,o.payload,[],o.header.timestamp,o.header.fee_info.account),new ge(new be(new S("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new S("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null))}async getTransactionFromHeightAndOffset(e,o){const t=await Ce(Z(E(),e)),n=qc(t);return await Jt(we(n,o))}async getBlockSummaries(e,o){const t=Z(E(),e),n=fe(t,o-e),c=Po(n,async u=>Oc(u));return await re(c)}async getBlockFromHeight(e){const o=Z(E(),e),t=await Ce(o);return Pc(t)}async*streamTransactionSummaries(e){const o=Oo(E(),c=>c.height<=e),t=No(o);yield*U(t,c=>ee(Nc(c)))}async getTransactionSummaryRange(e,o,t){const n=this.streamTransactionSummaries(e),c=Z(n,o),u=fe(c,t);return await re(u)}async getTransactionSummaryRangeForRollup(e,o,t,n){const c=this.streamTransactionSummaries(o),u=Qt(c,C=>C.transaction.vm===e),h=Z(u,t),w=fe(h,n);return await re(w)}}class le extends G{response;status;constructor(e,o,t){super(t),this.status=e,this.response=o}toJSON(){return Ko.convert(this)}}class Ie{convert(e){return i(e,le),{...Xe.convert(e),status:e.status}}}const Ko=new Ie,Ir="BadResponseClientError";class Wc extends le{constructor(e,o,t="bad server response: client error"){super(e,o,t),Object.freeze(this)}get code(){return Ir}toJSON(){return Yo.encode(this)}}class Gc{convert(e){return a(e,"code","message","status"),_(e,Ir),new Wc(Number(e.status),null,p.decode(e.message))}}class zc extends Ie{}class Mc extends d{encoder=new zc;decoder=new Gc}const Yo=new Mc;I(Ir,Yo);const _r="BadResponseError";class Hc extends le{constructor(e,o,t="bad server response"){super(e,o,t),Object.freeze(this)}get code(){return _r}toJSON(){return Xo.encode(this)}}class Lc{convert(e){return a(e,"code","message","status"),_(e,_r),new Hc(Number(e.status),null,p.decode(e.message))}}class Jc extends Ie{}class Qc extends d{encoder=new Jc;decoder=new Lc}const Xo=new Qc;I(_r,Xo);class Uc extends le{constructor(e,o,t="bad server response: server error"){super(e,o,t),Object.freeze(this)}get code(){return Rr}}const Rr="BadResponseServerError";class jc{convert(e){return a(e,"code","message","status"),_(e,Rr),new Uc(Number(e.status),null,p.decode(e.message))}}class Vc extends Ie{}class $c extends d{encoder=new Vc;decoder=new jc}const Kc=new $c;I(Rr,Kc);const Tr="ChannelClosedError";class Yc extends G{constructor(e="channel closed"){super(e),Object.freeze(this)}get code(){return Tr}}class Xc{convert(e){return a(e,"code","message"),_(e,Tr),new Yc(p.decode(e.message))}}class Zc extends Ee{}class en extends d{encoder=new Zc;decoder=new Xc}const rn=new en;I(Tr,rn);class Br extends G{constructor(e="completer has already been completed"){super(e),Object.freeze(this)}get code(){return Zo}}const Zo="CompleterAlreadyCompletedError";class on{convert(e){return a(e,"code","message"),_(e,Zo),new Br(p.decode(e.message))}}class tn extends Ee{}class sn extends d{encoder=new tn;decoder=new on}const cn=new sn;I(Br.name,cn);const Ar="InvalidStringValueError";class et extends G{have;want;constructor(e,o,t=`invalid string value: have "${e}", want "${o}"`){super(t),this.have=e,this.want=o,Object.freeze(this)}toJSON(){return rt.encode(this)}get code(){return Ar}}class nn{convert(e){return a(e,"code","have","want","message"),_(e,Ar),new et(p.decode(e.have),p.decode(e.want),p.decode(e.message))}}class an{convert(e){return i(e,et),{...Xe.convert(e),have:p.encode(e.have),want:p.encode(e.want)}}}class dn extends d{encoder=new an;decoder=new nn}const rt=new dn;I(Ar,rt);const Dr="NoCompleterFoundForRequestID";class ye extends G{requestID;constructor(e,o=`no completer found for request id "${e}"`){super(o),this.requestID=e,Object.freeze(this)}toJSON(){return ot.encode(this)}get code(){return Dr}}class ln{convert(e){return a(e,"code","requestID","message"),_(e,Dr),new ye(Bo.decode(e.requestID),p.decode(e.message))}}class un{convert(e){return i(e,ye),{...Xe.convert(e),requestID:Bo.encode(e.requestID)}}}class hn extends d{encoder=new un;decoder=new ln}const ot=new hn;I(Dr,ot);const Pr="NoURLProvidedError";class pn extends G{constructor(e="no url provided"){super(e),Object.freeze(this)}get code(){return Pr}}class mn{convert(e){return a(e,"code","message"),_(e,Pr),new pn(p.decode(e.message))}}class wn extends Ee{}class fn extends d{encoder=new wn;decoder=new mn}const Cn=new fn;I(Pr,Cn);const Or="QUERY_ERROR";class bn extends G{error;constructor(e,o="missing element"){super(o),this.error=e,Object.freeze(this)}get code(){return Or}}class gn{convert(e){return a(e,"code","error","message"),_(e,Or),new bn(nt.decode(e.error),p.decode(e.message))}}class yn{convert(e){return{code:e.code,error:nt.encode(e.error),message:p.encode(e.message)}}}class vn extends d{encoder=new yn;decoder=new gn}const En=new vn;class Nr{}const qr="NotFound";class tt extends Nr{constructor(){super(),Object.freeze(this)}valueOf(){return qr}toJSON(){return this.valueOf()}}const Sn=new tt,Fr="Missing";class st extends Nr{constructor(){super(),Object.freeze(this)}valueOf(){return Fr}toJSON(){return this.valueOf()}}const xn=new st;class ct extends Nr{error;constructor(e){super(),this.error=e,Object.freeze(this)}toJSON(){return Gr.encode(this)}}class kn{message;constructor(e){this.message=e,Object.freeze(this)}toJSON(){return Wr.encode(this)}}class In{convert(e){return a(e,"message"),new kn(p.decode(e.message))}}class _n{convert(e){return{message:p.encode(e.message)}}}class Rn extends d{encoder=new _n;decoder=new In}const Wr=new Rn;class Tn{convert(e){return a(e,"Error"),new ct(Wr.decode(e.Error))}}class Bn{convert(e){return{Error:Wr.encode(e.error)}}}class An extends d{encoder=new Bn;decoder=new Tn}const Gr=new An;class Dn{convert(e){return e===qr?Sn:e===Fr?xn:Gr.decode(e)}}class Pn{convert(e){if(e instanceof tt)return qr;if(e instanceof st)return Fr;if(e instanceof ct)return Gr.encode(e);throw new f}}class On extends d{encoder=new Pn;decoder=new Dn}const nt=new On;I(Or,En);const at="ResponseContentTypeIsNotApplicationJSONError";class _e extends le{haveHeaderType;constructor(e,o,t,n="response content type is not application/json"){super(o,t,n),this.haveHeaderType=e,Object.freeze(this)}static fromResponse(e,o){return new _e(e.headers.get("content-type")??"undefined",e.status,e,o)}toJSON(){return it.encode(this)}get code(){return at}}class Nn{convert(e){return a(e,"code","status","have","want","message"),_(e,at),new _e(p.decode(e.code),s.decode(e.status),null,p.decode(e.message))}}class qn{convert(e){return{...Ko.convert(e),have:p.encode(e.haveHeaderType),want:p.encode("application/json")}}}class Fn extends d{encoder=new qn;decoder=new Nn}const it=new Fn;I(_e.name,it);var dt=(r=>(r[r.success=0]="success",r[r.full=1]="full",r[r.failed=2]="failed",r))(dt||{});class Wn{getFromEmpty(){}}class Gn{getFromEmpty(){throw new Mt}}const zn={returnUndefined:new Wn,throwMissingElement:new Gn};class Mn{maxSize;constructor(e){v(!Number.isNaN(e),"maxSize must not be NaN"),v(Number.isInteger(e),"maxSize must be an integer"),v(e>0,"maxSize must be greater than 0"),this.maxSize=e}nextIndex(e){return v(e>=0,"index must be greater than or equal to 0"),(e+1)%this.maxSize}}class Hn{preComputedSizeMinus1;constructor(e){v(!Number.isNaN(e),"maxSize must not be NaN"),v(Number.isInteger(e),"maxSize must be an integer"),v(e>0,"maxSize must be greater than 0"),v(lt(e),"maxSize must be a power of two"),this.preComputedSizeMinus1=e-1}nextIndex(e){return v(e>=0,"index must be greater than or equal to 0"),e+1&this.preComputedSizeMinus1}}function lt(r){return(r&r-1)===0}const zr="BufferFullError";class ut extends G{constructor(e="buffer full"){super(e),Object.freeze(this)}get code(){return zr}}class Ln{convert(e){return a(e,"code","message"),_(e,zr),new ut(p.decode(e.message))}}class Jn extends Ee{}class Qn extends d{encoder=new Jn;decoder=new Ln}const Un=new Qn;I(zr,Un);class jn{putToFull(e,o){return e.get(),e.put(o)}}class Vn{putToFull(){throw new ut}}const $n={overwriteOldest:new jn,throw:new Vn};function Kn(r){return lt(r)?new Hn(r):new Mn(r)}class Yn{readIndex=0;writeIndex=0;buffer;nextIndex;getOnEmpty;putOnFull;constructor(e,o,t){v(!Number.isNaN(e),"maxSize must not be NaN"),this.buffer=new Array(e),this.nextIndex=Kn(e),this.getOnEmpty=o,this.putOnFull=t}get maxSize(){return this.buffer.length}get length(){return this.writeIndex<this.readIndex?this.writeIndex+this.maxSize-this.readIndex:this.writeIndex-this.readIndex}put(e){const o=this.nextIndex.nextIndex(this.writeIndex);return o===this.readIndex?this.putOnFull.putToFull(this,e):(this.buffer[this.writeIndex]=e,this.writeIndex=o,dt.success)}get(){if(this.readIndex===this.writeIndex)return this.getOnEmpty.getFromEmpty(this);const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),e}[Symbol.iterator](){return new Xn(this)}immutableIterable(){return{[Symbol.iterator]:()=>this.immutableIterator()}}immutableIterator(){return new Zn(this.readIndex,this.writeIndex,this.buffer,this.nextIndex)}}class Xn{buffer;constructor(e){this.buffer=e}next(){const e=this.buffer.get();return e==null?{value:void 0,done:!0}:{value:e,done:!1}}}class Zn{readIndex;writeIndex;buffer;nextIndex;constructor(e,o,t,n){this.readIndex=e,this.writeIndex=o,this.buffer=t,this.nextIndex=n}next(){if(this.readIndex===this.writeIndex)return{value:void 0,done:!0};const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),{value:e,done:!1}}}function B(r=32,e=zn.returnUndefined,o=$n.overwriteOldest){return new Yn(r,e,o)}class Mr{hash;height;time;numTransactions;proposerID;feeRecipient;size;blockReward;constructor(e,o,t,n,c,u,h,w){this.hash=e,this.height=o,this.time=t,this.numTransactions=n,this.proposerID=c,this.feeRecipient=u,this.size=h,this.blockReward=w}toJSON(){return J.encode(this)}}class ea{convert(e){return a(e,"hash","height","time","num_transactions","proposer_id","fee_recipient","size","block_reward"),new Mr(l.decode(e.hash),s.decode(e.height),M.decode(e.time),s.decode(e.num_transactions),W.decode(e.proposer_id),W.decode(e.fee_recipient),s.decode(e.size),Do.decode(e.block_reward))}}class ra{convert(e){return i(e,Mr),{hash:l.encode(e.hash),height:s.encode(e.height),time:M.encode(e.time),num_transactions:s.encode(e.numTransactions),proposer_id:W.encode(e.proposerID),fee_recipient:W.encode(e.feeRecipient),size:s.encode(e.size),block_reward:Do.encode(e.blockReward)}}}class oa extends b{encoder=new ra;decoder=new ea}const J=new oa,md=new A(new D(J),new P(J));class Hr{hash;height;proposerID;numTransactions;size;time;constructor(e,o,t,n,c,u){this.hash=e,this.height=o,this.proposerID=t,this.numTransactions=n,this.size=c,this.time=u}toJSON(){return je.encode(this)}}class ta{convert(e){return a(e,"hash","height","proposer_id","num_transactions","size","time"),new Hr(l.decode(e.hash),s.decode(e.height),W.decode(e.proposer_id),s.decode(e.num_transactions),s.decode(e.size),M.decode(e.time))}}class sa{convert(e){return i(e,Hr),{hash:l.encode(e.hash),height:s.encode(e.height),proposer_id:W.encode(e.proposerID),num_transactions:s.encode(e.numTransactions),size:s.encode(e.size),time:M.encode(e.time)}}}class ca extends b{encoder=new sa;decoder=new ta}const je=new ca,V=new A(new D(je),new P(je)),j="latest";class Lr{rollups;transactions;blocks;constructor(e,o,t){this.rollups=e,this.transactions=o,this.blocks=t}toJSON(){return Jr.encode(this)}}class na{convert(e){return a(e,"rollups","transactions","blocks"),new Lr(s.decode(e.rollups),s.decode(e.transactions),s.decode(e.blocks))}}class aa{convert(e){return i(e,Lr),{rollups:s.encode(e.rollups),transactions:s.encode(e.transactions),blocks:s.encode(e.blocks)}}}class ia extends d{encoder=new aa;decoder=new na}const Jr=new ia;function da(r,e){return r.blockHeights-e.blockHeights}class Qr{blockTime;blockSize;blockTransactions;blockHeights;constructor(e,o,t,n){const c=[],u=Math.min(e.length,o.length,t.length,n.length);for(let R=0;R<u;R++){const Y=n[R];Y!==null&&c.push({blockTime:e[R],blockSize:o[R],blockTransactions:t[R],blockHeights:Y})}c.sort(da);const h=c[0].blockHeights,w=c[c.length-1].blockHeights,C=[],g=[],m=[],y=[];for(let R=h,Y=0;R<=w;R++){const X=c[Y];if(X.blockHeights!==R){C.push(null),g.push(null),m.push(null),y.push(null);continue}C.push(X.blockTime),g.push(X.blockSize),m.push(X.blockTransactions),y.push(X.blockHeights),Y++}const Q=Math.max(0,y.length-50);this.blockTime=C.slice(Q),this.blockSize=g.slice(Q),this.blockTransactions=m.slice(Q),this.blockHeights=y.slice(Q)}toJSON(){return Ur.encode(this)}}class la{convert(e){return a(e,"block_time","block_size","block_transactions","block_heights"),new Qr(F.decode(e.block_time),F.decode(e.block_size),F.decode(e.block_transactions),F.decode(e.block_heights))}}class ua{convert(e){return i(e,Qr),{block_time:F.encode(e.blockTime),block_size:F.encode(e.blockSize),block_transactions:F.encode(e.blockTransactions),block_heights:F.encode(e.blockHeights)}}}class ha extends d{encoder=new ua;decoder=new la}const Ur=new ha,ht=O;class Re{hash;rollups;height;time;offset;numTransactions;constructor(e,o,t,n,c,u){this.hash=e,this.rollups=o,this.height=t,this.time=n,this.offset=c,this.numTransactions=u}toJSON(){return Ve.encode(this)}}class pa{convert(e){return a(e,"hash","rollups","height","time","offset","num_transactions"),new Re(l.decode(e.hash),ht.decode(e.rollups),s.decode(e.height),M.decode(e.time),s.decode(e.offset),s.decode(e.num_transactions))}}class ma{convert(e){return i(e,Re),{hash:l.encode(e.hash),rollups:ht.encode(e.rollups),height:s.encode(e.height),time:M.encode(e.time),offset:s.encode(e.offset),num_transactions:s.encode(e.numTransactions)}}}class wa extends d{encoder=new ma;decoder=new pa}const Ve=new wa,$=new A(new D(Ve),new P(Ve));class jr{latestBlock;genesisOverview;latestBlocks;latestTransactions;histograms;constructor(e,o,t,n,c){this.latestBlock=e,this.genesisOverview=o,this.latestBlocks=t,this.latestTransactions=n,this.histograms=c}toJSON(){return Vr.encode(this)}}class fa{convert(e){return a(e,"latest_block","genesis_overview","latest_blocks","latest_transactions","histograms"),new jr(J.decode(e.latest_block),Jr.decode(e.genesis_overview),V.decode(e.latest_blocks),$.decode(e.latest_transactions),Ur.decode(e.histograms))}}class Ca{convert(e){return i(e,jr),{latest_block:J.encode(e.latestBlock),genesis_overview:Jr.encode(e.genesisOverview),latest_blocks:V.encode(e.latestBlocks),latest_transactions:$.encode(e.latestTransactions),histograms:Ur.encode(e.histograms)}}}class ba extends d{encoder=new Ca;decoder=new fa}const Vr=new ba;class $r{blockDetail;constructor(e){this.blockDetail=e}toJSON(){return pt.encode(this)}}class ga{convert(e){return a(e,"block_detail"),new $r(J.decode(e.block_detail))}}class ya{convert(e){return i(e,$r),{block_detail:J.encode(e.blockDetail)}}}class va extends b{encoder=new ya;decoder=new ga}const pt=new va;class Kr{blockSummaries;constructor(e){this.blockSummaries=e}toJSON(){return mt.encode(this)}}class Ea{convert(e){return a(e,"block_summaries"),new Kr(V.decode(e.block_summaries))}}class Sa{convert(e){return i(e,Kr),{block_summaries:V.encode(e.blockSummaries)}}}class xa extends b{encoder=new Sa;decoder=new Ea}const mt=new xa;class Yr{explorerSummary;constructor(e){this.explorerSummary=e}toJSON(){return wt.encode(this)}}class ka{convert(e){return a(e,"explorer_summary"),new Yr(Vr.decode(e.explorer_summary))}}class Ia{convert(e){return i(e,Yr),{explorer_summary:Vr.encode(e.explorerSummary)}}}class _a extends d{encoder=new Ia;decoder=new ka}const wt=new _a;class Xr{blocks;transactions;constructor(e,o){this.blocks=e,this.transactions=o}toJSON(){return Zr.encode(this)}}class Ra{convert(e){return a(e,"blocks","transactions"),new Xr(V.decode(e.blocks),$.decode(e.transactions))}}class Ta{convert(e){return i(e,Xr),{blocks:V.encode(e.blocks),transactions:$.encode(e.transactions)}}}class Ba extends b{encoder=new Ta;decoder=new Ra}const Zr=new Ba;class eo{searchResults;constructor(e){this.searchResults=e}toJSON(){return ft.encode(this)}}class Aa{convert(e){return a(e,"search_results"),new eo(Zr.decode(e.search_results))}}class Da{convert(e){return i(e,eo),{search_results:Zr.encode(e.searchResults)}}}class Pa extends b{encoder=new Da;decoder=new Aa}const ft=new Pa;class ro{static heightAndOffset(e,o){return new Te(e,o)}static hash(e){return new Be(e)}toJSON(){return Ct.encode(this)}}class Oa{convert(e){if(i(e,ro),e instanceof Te)return{height:s.encode(e.height),offset:s.encode(e.offset)};if(e instanceof Be)return{hash:l.encode(e.hash)};throw new z}}class Na{convert(e){if(x(e,"height",k)&&x(e,"offset",k))return new Te(s.decode(e.height),s.decode(e.offset));if(x(e,"hash",k))return new Be(l.decode(e.hash));throw new z}}class qa extends d{encoder=new Oa;decoder=new Na}const Ct=new qa;class Te extends ro{height;offset;constructor(e,o){super(),this.height=e,this.offset=o}}class Be extends ro{hash;constructor(e){super(),this.hash=e}}const bt=s;class oo{namespace;payload;constructor(e,o){this.namespace=e,this.payload=o}toJSON(){return $e.encode(this)}}class Fa{convert(e){return a(e,"namespace","payload"),new oo(bt.decode(e.namespace),Io.decode(e.payload))}}class Wa{convert(e){return i(e,oo),{namespace:bt.encode(e.namespace),payload:Io.encode(e.payload)}}}class Ga extends d{encoder=new Wa;decoder=new Fa}const $e=new Ga,gt=new A(new D($e),new P($e));class to{hash;height;blockConfirmed;offset;numTransactions;size;time;sequencingFees;feeDetails;constructor(e,o,t,n,c,u,h,w,C){this.hash=e,this.height=o,this.blockConfirmed=t,this.offset=n,this.numTransactions=c,this.size=u,this.time=h,this.sequencingFees=w,this.feeDetails=C}toJSON(){return so.encode(this)}}class za{convert(e){return a(e,"hash","height","block_confirmed","offset","num_transactions","size","time","sequencing_fees","fee_details"),new to(l.decode(e.hash),s.decode(e.height),ae.decode(e.block_confirmed),s.decode(e.offset),s.decode(e.num_transactions),s.decode(e.size),M.decode(e.time),[],[])}}class Ma{convert(e){return i(e,to),{hash:l.encode(e.hash),height:s.encode(e.height),block_confirmed:ae.encode(e.blockConfirmed),offset:s.encode(e.offset),num_transactions:s.encode(e.numTransactions),size:s.encode(e.size),time:M.encode(e.time),sequencing_fees:[],fee_details:[]}}}class Ha extends d{encoder=new Ma;decoder=new za}const so=new Ha;class co{details;data;constructor(e,o){this.details=e,this.data=o}toJSON(){return no.encode(this)}}class La{convert(e){return a(e,"details","data"),new co(so.decode(e.details),gt.decode(e.data))}}class Ja{convert(e){return i(e,co),{details:so.encode(e.details),data:gt.encode(e.data)}}}class Qa extends d{encoder=new Ja;decoder=new La}const no=new Qa;class ve{transactionDetail;constructor(e){this.transactionDetail=e}toJSON(){return yt.encode(this)}}class Ua{convert(e){return a(e,"transaction_detail"),new ve(no.decode(e.transaction_detail))}}class ja{convert(e){return i(e,ve),{transaction_detail:no.encode(e.transactionDetail)}}}class Va extends b{encoder=new ja;decoder=new Ua}const yt=new Va;class Ae{constructor(){}static block(e){return new De(e)}static namespace(e){return new Pe(e)}static none(){return new io}toJSON(){return ao.encode(this)}}class $a{convert(e){return x(e,"block",k)?new De(s.decode(e.block)):x(e,"namespace",k)?new Pe(s.decode(e.namespace)):new io}}class Ka{convert(e){if(i(e,Ae),e instanceof io)return{};if(e instanceof De)return{block:s.encode(e.block)};if(e instanceof Pe)return{namespace:s.encode(e.namespace)};throw new z}}class Ya extends b{encoder=new Ka;decoder=new $a}const ao=new Ya;class io extends Ae{constructor(){super()}convertURL(e){return e}}class De extends Ae{block;constructor(e){super(),this.block=e}convertURL(e){return new URL(`${e.pathname}/block/${this.block}`,e)}}class Pe extends Ae{namespace;constructor(e){super(),this.namespace=e}convertURL(e){return new URL(`${e.pathname}/namespace/${this.namespace}`,e)}}class oe{transactionSummaries;constructor(e){this.transactionSummaries=e}toJSON(){return vt.encode(this)}}class Xa{convert(e){return a(e,"transaction_summaries"),new oe($.decode(e.transaction_summaries))}}class Za{convert(e){return i(e,oe),{transaction_summaries:$.encode(e.transactionSummaries)}}}class ei extends b{encoder=new Za;decoder=new Xa}const vt=new ei;class Oe{limit;constructor(e){this.limit=e}static latest(e){return new Ne(e)}static heightAndOffset(e,o,t){return new qe(e,o,t)}static hash(e,o){return new Fe(e,o)}toJSON(){return lo.encode(this)}}class ri{convert(e){return a(e,"limit"),x(e,"height",k)&&x(e,"offset",k)?new qe(s.decode(e.height),s.decode(e.offset),s.decode(e.limit)):x(e,"hash",k)?new Fe(l.decode(e.hash),s.decode(e.limit)):new Ne(s.decode(e.limit))}}class oi{convert(e){if(i(e,Oe),e instanceof Ne)return{limit:s.encode(e.limit)};if(e instanceof qe)return{height:s.encode(e.height),offset:s.encode(e.offset),limit:s.encode(e.limit)};if(e instanceof Fe)return{hash:l.encode(e.hash),limit:s.encode(e.limit)};throw new z}}class ti extends b{encoder=new oi;decoder=new ri}const lo=new ti;class Ne extends Oe{constructor(e){super(e)}convertURL(e){return new URL(`transactions/latest/${this.limit}`,e)}}class qe extends Oe{height;offset;constructor(e,o,t){super(t),this.height=e,this.offset=o}convertURL(e){return new URL(`transactions/from/${this.height}/${this.offset}/${this.limit}`,e)}}class Fe extends Oe{hash;constructor(e,o){super(o),this.hash=e}convertURL(e){return new URL(`transactions/hash/${this.hash}/${this.limit}`,e)}}function yo(r){return new Mr(r.hash,r.height,r.time,r.numTransactions,r.proposer,r.proposer,r.size,r.fees)}function Me(r){return new Hr(r.hash,r.height,r.proposer,r.numTransactions,r.size,r.time)}function vo(r,e){return new co(new to(e.hash,e.block,!0,e.index,r.numTransactions,e.size,e.time,[],[]),[new oo(e.tree.namespace,e.tree.data)])}function ue(r,e){return new Re(e.hash,[e.tree.namespace],e.block,e.time,e.index,r.numTransactions)}class si{async getBlockDetail(e){const o=e.target,t=await(o===j?Ut(E()):Ce(we(E(),o)));return new $r(yo(t))}async getBlockSummaries(e){const o=Oo(E(),h=>e.from===j||h.height<=e.from),t=No(o),n=fe(t,e.limit),c=Po(n,async h=>Me(h)),u=await re(c);return new Kr(u)}async getTransactionDetail(e){const o=E();if(e instanceof Te){const t=We(o,h=>h.height<=e.height),n=U(t,h=>q(h.transactions,async w=>vo(h,w))),c=we(ee(n),e.offset),u=await Ce(c);return new ve(u)}if(e instanceof Be){const t=U(o,c=>q(c.transactions,async u=>vo(c,u))),n=await jt(t,c=>c.details.hash===e.hash);if(!n)throw new $t(e.hash);return new ve(n)}throw new f}applyFilter(e,o){return o instanceof De?Co(e,t=>t.height==o.block):o instanceof Pe?Co(e,t=>t.rollups.indexOf(o.namespace)>=0):e}async getTransactionSummaries(e){const o=E(),{target:t,filter:n}=e;if(t instanceof Ne){const u=U(o,g=>q(g.transactions,async m=>ue(g,m))),h=ee(u),w=this.applyFilter(h,n),C=await Ge(ze(w,t.limit));return new oe(C)}if(t instanceof qe){const c=We(o,m=>m.height<=t.height),u=U(c,m=>q(m.transactions,async y=>ue(m,y))),h=ee(u),w=we(h,t.offset),C=this.applyFilter(w,n),g=await Ge(ze(C,t.limit));return new oe(g)}if(t instanceof Fe){const c=E(),u=U(c,m=>q(m.transactions,async y=>new Re(y.hash,[y.tree.namespace],y.block,y.time,y.index,m.numTransactions))),h=We(u,m=>m.hash!==t.hash),w=ee(h),C=this.applyFilter(w,n),g=await Ge(ze(C,t.limit));return new oe(g)}throw new f}async getExplorerOverview(){let e;const o=B(11),t=B(51),n=B(51),c=B(51),u=B(51),h=B(11);let w=0,C=0;const g=new Map;for await(const m of E()){e=yo(m),o.put(Me(m)),t.put(m.size),n.put(Math.round(m.genTime/1e3)),c.put(m.numTransactions),u.put(m.height),w++,C+=m.numTransactions;for await(const y of m.transactions){h.put(ue(m,y));const Q=g.get(y.tree.namespace)||0;g.set(y.tree.namespace,Q+1)}}return new Yr(new jr(e,new Lr(Array.from(g.keys()).length,C,w),Array.from(o),Array.from(h),new Qr(Array.from(n),Array.from(t),Array.from(c),Array.from(u))))}async getSearchResult(e){const o=B(101),t=B(10),n=B(10);for await(const c of E())o.put(c);for(const c of o){c.hash.toString().startsWith(e.query)&&t.put(Me(c));for await(const u of c.transactions)u.hash.toString().startsWith(e.query)&&n.put(ue(c,u))}return new eo(new Xr(Array.from(t),Array.from(n)))}}class ci{async getLatestRewardBalance(){return 12345678900000000n}}class ni{async blockHeight(){return(await Vt(E())).height}}class ai{availability=new Fc;status=new ni;explorer=new si;rewardState=new ci;async setURL(){throw new f}}class ii{async getLeafFromHeight(){throw new f}async getTransactionFromHeightAndOffset(){throw new f}async getBlockFromHeight(){throw new f}async getBlockSummaries(){throw new f}async getTransactionSummaryRange(){throw new f}async getTransactionSummaryRangeForRollup(){throw new f}}class di{async getBlockDetail(){throw new f}async getBlockSummaries(){throw new f}async getTransactionDetail(){throw new f}async getTransactionSummaries(){throw new f}async getExplorerOverview(){throw new f}async getSearchResult(){throw new f}}class li{async getLatestRewardBalance(){throw new f}}class ui{async blockHeight(){throw new f}}class hi{availability=new ii;status=new ui;explorer=new di;rewardState=new li;setURL(){throw new f}}function he(){return v(!1,"completer is not ready, this should never be reached")}function pe(){throw new Br}class pi{resolve=he;reject=he;completed=!1;promise;get isCompleted(){return this.completed}constructor(){this.promise=new Promise((e,o)=>{this.resolve=e,this.reject=o}),v(this.resolve!==he,"resolve should be set"),v(this.reject!==he,"resolve should be set")}complete(e){const o=this.resolve,t=this.reject;if(this.completed=!0,this.resolve=pe,this.reject=pe,e instanceof Promise){e.then(o,t);return}o(e)}completeError(e){this.reject(e),this.completed=!0,this.resolve=pe,this.reject=pe}}function mi(){return new pi}const K=s;class uo{requestID;api;method;param;constructor(e,o,t,n){this.requestID=e,this.api=o,this.method=t,this.param=n}toJSON(){return{requestID:this.requestID,api:this.api,method:this.method,param:this.param}}}class wi{convert(e){return a(e,"requestID","api","method","param"),new uo(K.decode(e.requestID),p.decode(e.api),p.decode(e.method),e.param)}}class fi{convert(e){return i(e,uo),{requestID:K.encode(e.requestID),api:p.encode(e.api),method:p.encode(e.method),param:e.param}}}class Ci extends d{encoder=new fi;decoder=new wi}const bi=new Ci;class ho{requestID;constructor(e){this.requestID=e}}class po extends ho{response;constructor(e,o){super(e),this.response=o}toJSON(){return Et.encode(this)}}class gi{convert(e){return a(e,"requestID","response"),new po(K.decode(e.requestID),e.response)}}class yi{convert(e){return i(e,po),{requestID:K.encode(e.requestID),response:e.response}}}class vi extends d{encoder=new yi;decoder=new gi}const Et=new vi;class mo extends ho{error;constructor(e,o){super(e),this.error=o}toJSON(){return St.encode(this)}}class Ei{convert(e){return a(e,"requestID","error"),new mo(K.decode(e.requestID),Ao.decode(e.error))}}class Si{convert(e){return i(e,mo),{requestID:K.encode(e.requestID),error:Ao.encode(e.error)}}}class xi extends d{encoder=new Si;decoder=new Ei}const St=new xi;class ki{convert(e){if(x(e,"response",k))return Et.decode(e);if(x(e,"error",k))return St.decode(e);throw new z}}class Ii{convert(e){return i(e,ho),e.toJSON()}}class _i extends d{encoder=new Ii;decoder=new ki}const Eo=new _i;class wo{target;constructor(e){this.target=e}static latest(){return new kt}static height(e){return new It(e)}toJSON(){return xt.encode(this)}}class Ri{convert(e){return i(e,wo),typeof e.target=="number"?s.encode(e.target):p.encode(e.target)}}class Ti{convert(e){return e===j?new kt:new It(s.decode(e))}}class Bi extends b{encoder=new Ri;decoder=new Ti}const xt=new Bi;class kt extends wo{constructor(){super(j)}}class It extends wo{constructor(e){super(e)}}class fo{limit;constructor(e){this.limit=e}static latest(e){return new Rt(e)}static from(e,o){return new Tt(e,o)}toJSON(){return _t.encode(this)}}class Ai{convert(e){return i(e,fo),zt(e.from)?{from:s.encode(e.from),limit:s.encode(e.limit)}:{from:p.encode(e.from),limit:s.encode(e.limit)}}}class Di{convert(e){return a(e,"from","limit"),e.from===j?new Rt(s.decode(e.limit)):new Tt(s.decode(e.from),s.decode(e.limit))}}class Pi extends b{encoder=new Ai;decoder=new Di}const _t=new Pi;class Rt extends fo{constructor(e){super(e)}get from(){return j}}class Tt extends fo{from;constructor(e,o){super(o),this.from=e}}class Bt{query;constructor(e){this.query=e}toJSON(){return At.encode(this)}}class Oi{convert(e){return i(e,Bt),p.encode(e.query)}}class Ni{convert(e){return new Bt(p.decode(e))}}class qi extends b{encoder=new Oi;decoder=new Ni}const At=new qi;class Dt{target;filter;constructor(e,o){this.target=e,this.filter=o}toJSON(){return Pt.encode(this)}}class Fi{convert(e){return a(e,"filter","target"),new Dt(lo.decode(e.target),ao.decode(e.filter))}}class Wi{convert(e){return i(e,Dt),{filter:ao.encode(e.filter),target:lo.encode(e.target)}}}class Gi extends b{encoder=new Wi;decoder=new Fi}const Pt=new Gi;function zi(r){return new Worker(""+new URL("hotshot_query_service_web_worker_api.js-CA9zupeI.js",import.meta.url).href,{name:r?.name})}class Mi{worker;nextRequestID=0;requestCompleters=new Map;constructor(e){this.worker=e,e.addEventListener("message",this.handleMessage.bind(this)),e.addEventListener("messageerror",this.handleMessageError.bind(this)),e.addEventListener("error",this.handleError.bind(this))}async submitRequest(e,o,t,n){const[c,u]=this.nextRequest();try{return this.worker.postMessage(bi.encode(new uo(c,o,t,n))),await u.promise.then(h=>{if(h instanceof mo)throw new Ht(h.error);if(h instanceof po){const{response:w}=h;return e.decode(w)}throw new H(typeof h,"WebWorkerResponse")})}finally{this.requestCompleters.delete(c)}}nextRequest(){const e=this.nextRequestID++,o=mi();return this.requestCompleters.set(e,o),[e,o]}handleMessage(e){const o=Eo.decode(e.data),t=this.requestCompleters.get(o.requestID);if(t===void 0)throw new ye(o.requestID);t.complete(o)}handleMessageError(e){const o=Eo.decode(e.data),t=this.requestCompleters.get(o.requestID);if(t===void 0)throw new ye(o.requestID);t.completeError(o)}handleError(e){debugger;console.error("encountered error setting up Web worker",e)}}class Hi{helper;constructor(e){this.helper=e}async sendRequest(e,o,...t){return this.helper.submitRequest(e,"availability",o,t)}async getLeafFromHeight(e){return await this.sendRequest(Vo,"getLeafFromHeight",e)}async getTransactionFromHeightAndOffset(e,o){return await this.sendRequest($o,"getTransactionFromHeightAndOffset",e,o)}async getBlockSummaries(e,o){return await this.sendRequest(Ss,"getBlockSummaries",e,o)}async getBlockFromHeight(e){return await this.sendRequest(Wo,"getBlockFromHeight",e)}async getTransactionSummaryRange(e,o,t){return await this.sendRequest(bo,"getTransactionSummaryRange",e,o,t)}async getTransactionSummaryRangeForRollup(e,o,t,n){return await this.sendRequest(bo,"getTransactionSummaryRangeForRollup",e,o,t,n)}}class Li{helper;constructor(e){this.helper=e}async sendRequest(e,o,...t){return this.helper.submitRequest(e,"status",o,t)}async blockHeight(){return await this.sendRequest(s,"blockHeight")}}class Ji{helper;constructor(e){this.helper=e}async sendRequest(e,o,...t){return this.helper.submitRequest(e,"explorer",o,t)}async getBlockDetail(e){return await this.sendRequest(pt,"getBlockDetail",xt.encode(e))}async getBlockSummaries(e){return await this.sendRequest(mt,"getBlockSummaries",_t.encode(e))}async getTransactionDetail(e){return await this.sendRequest(yt,"getTransactionDetail",Ct.encode(e))}async getTransactionSummaries(e){return await this.sendRequest(vt,"getTransactionSummaries",Pt.encode(e))}async getExplorerOverview(){return await this.sendRequest(wt,"getExplorerOverview",null)}async getSearchResult(e){return await this.sendRequest(ft,"getSearchResult",At.encode(e))}}class Qi{helper;constructor(e){this.helper=e}async sendRequest(e,o,...t){return this.helper.submitRequest(e,"reward-state",o,t)}async getLatestRewardBalance(e){return await this.sendRequest(qt,"getLatestRewardBalance",p.encode(e))}}let He=null;function Ui(){return He||(He=new zi),He}class ji{availability;status;explorer;rewardState;helper;constructor(){const e=Ui(),o=new Mi(e);this.helper=o,this.availability=new Hi(o),this.status=new Li(o),this.explorer=new Ji(o),this.rewardState=new Qi(o)}async sendRequest(e,o,...t){return this.helper.submitRequest(e,"proxy",o,t)}async setURL(e){return await this.sendRequest(ae,"set-url",p.encode(e))}}const Ke=xo.createContext(new hi);let me=null;function Vi(r){return me===null&&(me=new ji),r&&me.setURL(r).then(e=>{e||console.warn("unable to set the url for the hotshot query service",r)},e=>{console.error("unable to set the url for the hotshot query service",r,e)}),me}function $i(r){return typeof window<"u"&&"Worker"in window||typeof self<"u"&&"Worker"in self?Vi(r):new ai}const So=r=>{const o=xo.useContext(Nt)?.hotshotQueryServiceURL;return Ot.jsx(Ke.Provider,{value:$i(o),children:r.children})};try{Ke.displayName="CappuccinoHotShotQueryServiceAPIContext",Ke.__docgenInfo={description:"",displayName:"CappuccinoHotShotQueryServiceAPIContext",props:{}}}catch{}try{So.displayName="ProvideCappuccinoHotShotQueryServiceAPIContext",So.__docgenInfo={description:`ProvideCappuccinoHotShotQueryServiceAPIContext is a component that provides a
Cappuccino HotShot Query Service API using a default implementation that is
dependent on the environment that the code is being run within.`,displayName:"ProvideCappuccinoHotShotQueryServiceAPIContext",props:{}}}catch{}export{Ke as C,ai as F,So as P,eo as a,Xr as b,Hr as c,Re as d,Bt as e,B as f,$n as g,zn as h,mi as i,Yc as j,md as k,Ur as l,J as m,se as n,pd as o,Lo as p,te as q,Go as r,Qr as s,Mr as t,Dt as u,Oe as v,Ae as w,wo as x,ro as y,fo as z};
