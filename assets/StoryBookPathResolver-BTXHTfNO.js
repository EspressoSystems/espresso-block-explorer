var It=Object.defineProperty;var Dt=(t,e,r)=>e in t?It(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var o=(t,e,r)=>(Dt(t,typeof e!="symbol"?e+"":e,r),r);import{a as b,j as i,F as K}from"./jsx-runtime-5BUNAZ9W.js";import{b as Bt,a as W}from"./higher_order-VtSBvwoq.js";import{R as l}from"./index-4g5l5LRQ.js";import{a as v,T as Rt,C as p,i as c,I as f,t as h,b as d,c as _,d as Nt,e as Gt,f as L,g as at,h as Lt}from"./TaggedBase64Text-Bekfw4ly.js";import{P as D,L as Et,E as Ft,D as X}from"./PromiseResolver-ad-l-dUz.js";import{b as Z}from"./NavBar-OA1qFW7U.js";import"./AnchorButton-otSsAsSc.js";import"./Button-nGjelwSV.js";import{I as ie}from"./IconAnchorButton-yD9LQ3N1.js";import"./IconButton-yAenjv_7.js";import{L as le}from"./LabeledAnchorButton-WaSb0fXE.js";import"./LabeledButton-GV2hMMJ7.js";import{C as Ut}from"./Card-h8BJV9JH.js";import{b as Mt,i as Ot}from"./typography-H6hXb9lb.js";import{T as R}from"./TabledLabeledValue-jP1PK3rT.js";import{C as zt}from"./Loading-BiRA42C2.js";import{B as Ht}from"./ByteSizeText-SJWvTHPo.js";import{D as Qt}from"./DateTimeText-MVlsngu-.js";import{N as de}from"./NumberText-1F_WTjXR.js";import{R as Jt}from"./RelativeTimeText-naKFZweh.js";import{T as g}from"./Text-qj7igP2-.js";import{A as Fe}from"./ArrowLeft-V57gzgMN.js";import{A as qt}from"./ArrowRight-49S3eE7Z.js";import{S as ee,D as A,a as ot}from"./DataTable-T6QCMKyq.js";import{i as Vt,a as jt}from"./functional-1_R4425B.js";import{c as $t}from"./data-sQ4HBCiI.js";class te extends Error{constructor(e="missing element"){super(e),Object.freeze(this)}toJSON(){return{name:te.name,message:this.message}}}class Yt{constructor(e,r){o(this,"value");o(this,"next");this.value=e,this.next=r}[Symbol.iterator](){return nt(this)}}function Kt(t,e){return new Yt(e,t)}function*nt(t){if(t!==null)for(let e=t;e!==null;e=e.next)yield e.value}class S extends Error{constructor(e="unimplemented"){super(e),Object.freeze(this)}toJSON(){return{name:S.name,message:this.message}}}const Q=Mt("p");try{Q.displayName="ParagraphTextSmall",Q.__docgenInfo={description:`ParagraphTextSmall represents the standard Paragraph element to be utilized
within the Block Explorer.`,displayName:"ParagraphTextSmall",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const E=l.createContext(0),Wt=()=>{const t=l.useContext(E),e=l.useContext(Z);return t<=0?i(ie,{children:i(Fe,{})}):i(ie,{href:e.block(t-1),children:i(Fe,{})})},Xt=()=>{const t=l.useContext(E),e=l.useContext(Z);return i(ie,{href:e.block(t+1),children:i(qt,{})})},Zt=Ot("label"),Ue=()=>{const t=l.useContext(E);return b("nav",{className:"nav--block",children:[b(Zt,{children:["# ",i(de,{number:t})]}),i(Wt,{}),i(Xt,{})]})},st=l.createContext({height:0,time:new Date,transactions:0,proposer:new v("PUBKEY",new ArrayBuffer(0)),size:0}),J=l.createContext({async retrieve(){throw new S}}),er=t=>{const e=l.useContext(st);return l.createElement(Ut,t,b(R,{children:[i(g,{text:"Block Height"}),i(de,{number:e.height})]}),b(R,{children:[i(g,{text:"Timestamp"}),b(K,{children:[i(Jt,{date:e.time})," (",i(Qt,{date:e.time}),")"]})]}),b(R,{children:[i(g,{text:"Transactions"}),i(de,{number:e.transactions})]}),b(R,{children:[i(g,{text:"Proposer"}),i(Rt,{value:e.proposer})]}),b(R,{children:[i(g,{text:"Size"}),i(Ht,{bytes:e.size})]}))},tr=t=>{const e=l.useContext(Et),r=l.useContext(Ft),a=l.useContext(X);return r?b(K,{children:[i(g,{text:"Encountered Error"}),i("br",{}),i(g,{text:r.toString()})]}):e?i(zt,{}):a?i(st.Provider,{value:a,children:t.children}):i(Q,{children:i(g,{text:"No Data Found"})})},Eo=t=>{const e=l.useContext(E),r=l.useContext(J);return i(D,{promise:r.retrieve(e),children:i(tr,{children:l.createElement(er,t)})})};try{Ue.displayName="BlockNavigation",Ue.__docgenInfo={description:`BlockNavigation is a component that displays the current BlockID
and provides the corresponding Previous and Next block navigation
components.`,displayName:"BlockNavigation",props:{}}}catch{}try{J.displayName="BlockDetailAsyncRetrieverContext",J.__docgenInfo={description:`RetrieverContext is a React Context for retrieving a BlockDetail from a
BlockDetailAsyncRetriever.`,displayName:"BlockDetailAsyncRetrieverContext",props:{}}}catch{}try{BlockDetailContent.displayName="BlockDetailContent",BlockDetailContent.__docgenInfo={description:`BlockDetails kicks off the retrieval of the details for the individual
Block, and ensures that the data is available for BlockDetailsContent`,displayName:"BlockDetailContent",props:{}}}catch{}function ct(t){return Bt(t,"edge-margin")}const rr=ct("div"),Me=t=>i(rr,{...t,className:W(t.className,"page-title")});try{Me.displayName="PageTitle",Me.__docgenInfo={description:`PageTitle is a container element to hold the page's title, sub-heading
information, and potentially navigation elements.`,displayName:"PageTitle",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const ar=ct(Q),Oe=t=>i("div",{...t,className:W(t.className,"fake-data-notice"),children:i(ar,{children:"This Demo contains fake data and navigation that is not indicative of the final product."})});try{Oe.displayName="FakeDataNotice",Oe.__docgenInfo={description:"",displayName:"FakeDataNotice",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}var _e=(t=>(t.height="height",t.proposer="proposer",t.size="size",t.time="time",t.transactions="transaction",t))(_e||{});const it=20;function or(t){return async e=>{const r=e;return(await t.retrieve({startAtBlock:r.startAtBlock,blocksPerPage:it})).map(n=>({block:n.height,proposer:n.proposer,transactions:n.transactions,size:n.size,time:n.time}))}}const q=l.createContext({async retrieve(){throw new S}}),nr=t=>{const e=l.useContext(q),r=l.useContext(A),a=or(e);return i(D,{promise:a(r),children:i(ot.Provider,{value:()=>{},children:i(K,{children:t.children})})})},ze=({startAtBlock:t,...e})=>{const[r,a]=l.useState({sortColumn:_e.height,sortDir:ee.desc,startAtBlock:t});return t!==void 0&&r.startAtBlock!==t&&a({...r,startAtBlock:t}),i(A.Provider,{value:r,children:i(ot.Provider,{value:a,children:l.createElement(nr,e)})})},He=t=>{const e=l.useContext(X),r=l.useContext(Z),a=l.useContext(A),n=[],s=[];return a.startAtBlock!==void 0&&n.push(i(le,{href:r.blocks(a.startAtBlock-it),children:i(g,{text:"Previous"})},0)),e[e.length-1].block>0&&n.push(i(le,{href:r.blocks(e[e.length-1].block+1),children:i(g,{text:"Next"})},1)),b("nav",{className:W(t.className,"blocks-navigation"),children:[n,s]})};try{q.displayName="BlockSummaryAsyncRetrieverContext",q.__docgenInfo={description:`RetrieverContext represents the retriever to be utilized for retrieving
the BlockSummary data.`,displayName:"BlockSummaryAsyncRetrieverContext",props:{}}}catch{}try{ze.displayName="BlockSummaryDataLoader",ze.__docgenInfo={description:`BlockSummaryDataLoader is a component that provides the initial state of
the Block Summary state, and loads the data.`,displayName:"BlockSummaryDataLoader",props:{startAtBlock:{defaultValue:null,description:"",name:"startAtBlock",required:!1,type:{name:"number"}}}}}catch{}try{He.displayName="BlocksNavigation",He.__docgenInfo={description:"",displayName:"BlocksNavigation",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}var be=(t=>(t.hash="hash",t.rollup="rollup",t.block="block",t.time="time",t))(be||{});const sr=20,he=l.createContext(0),V=l.createContext({async retrieve(){throw new S}});function cr(t,e){return{async retrieve(r){const a=r;return(await t.retrieve({namespace:e,height:a.height,offset:a.offset,transactionsPerPage:sr})).map(s=>({hash:s.hash,block:s.block,offset:0,rollups:s.namespaces,time:s.time}))}}}const Qe=({children:t,startAtBlock:e,offset:r,...a})=>{const[n]=l.useState({sortColumn:be.block,sortDir:ee.desc,height:e,offset:r}),s=l.useContext(he),m=l.useContext(V),u=l.useContext(A),y=cr(m,s);return i(A.Provider,{value:n,children:i(D,{promise:y.retrieve(u),...a,children:t})})};try{he.displayName="NamespaceContext",he.__docgenInfo={description:`NamespaceContext is a React Context that holds a reference to the
current Namespace`,displayName:"NamespaceContext",props:{}}}catch{}try{V.displayName="RollUpDetailAsyncRetrieverContext",V.__docgenInfo={description:`RetrieverContext is a React Context that holds a reference to a
RollUpDetailAsyncRetriever`,displayName:"RollUpDetailAsyncRetrieverContext",props:{}}}catch{}try{Qe.displayName="RollUpDetailsDataLoader",Qe.__docgenInfo={description:`RollUpDetailsDataLoader uses the Retriever from the
RetrieverContext and kicks off requests using the state retrieved
by the DataTableStateContext.`,displayName:"RollUpDetailsDataLoader",props:{startAtBlock:{defaultValue:null,description:"",name:"startAtBlock",required:!1,type:{name:"number"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}}}}}catch{}function ir(t){return async()=>(await t.retrieve()).map(r=>({namespace:r.namespace,transactions:r.transactions}))}const j=l.createContext({async retrieve(){throw new S}}),lr=t=>{const e=l.useContext(j),r=ir(e);return i(D,{promise:r(),children:t.children})},Je=t=>{const[e]=l.useState({sortColumn:_e.height,sortDir:ee.desc});return i(A.Provider,{value:e,children:l.createElement(lr,t)})};try{j.displayName="RollUpSummaryAsyncRetrieverContext",j.__docgenInfo={description:`RetrieverContext represents the retriever to be utilized for retrieving
the BlockSummary data.`,displayName:"RollUpSummaryAsyncRetrieverContext",props:{}}}catch{}try{Je.displayName="RollUpsSummaryLoader",Je.__docgenInfo={description:"",displayName:"RollUpsSummaryLoader",props:{}}}catch{}const qe=l.createContext(new ArrayBuffer(0)),me=l.createContext(0),ue=l.createContext({block:0,index:0,total:0,size:0,hash:new v("ERR",new ArrayBuffer(0)),time:new Date,sender:new v("ERR",new ArrayBuffer(0)),tree:{namespace:0,data:new ArrayBuffer(0)}}),$=l.createContext({async retrieve(){throw new S}}),dr=t=>{const e=l.useContext(X);return e===void 0?t.children:i(ue.Provider,{value:e,children:t.children})},Ve=t=>{const e=l.useContext(E),r=l.useContext(me),a=l.useContext($);return i(D,{promise:a.retrieve({height:e,offset:r}),children:i(dr,{children:t.children})})};try{qe.displayName="TransactionCommitContext",qe.__docgenInfo={description:"TransactionCommitContext represents the current hash for a Transaction.",displayName:"TransactionCommitContext",props:{}}}catch{}try{me.displayName="TransactionOffsetContext",me.__docgenInfo={description:`TransactionOffsetContext represents the current offset for this Transaction
within a block.`,displayName:"TransactionOffsetContext",props:{}}}catch{}try{ue.displayName="TransactionDetailContext",ue.__docgenInfo={description:`TransactionDetailContext is a context that indicates the current
TransactionDetail to make available to the descendants of the component
tree.`,displayName:"TransactionDetailContext",props:{}}}catch{}try{$.displayName="TransactionDetailAsyncRetrieverContext",$.__docgenInfo={description:`RetrieverContext is a context for retrieving the TransactionDetail
response.`,displayName:"TransactionDetailAsyncRetrieverContext",props:{}}}catch{}try{Ve.displayName="TransactionDetailContentLoader",Ve.__docgenInfo={description:`TransactionDetailContent uses the retriever from the RetrieverContext
to retrieve the data using the hash retrieved from the
TransactionCommitContext`,displayName:"TransactionDetailContentLoader",props:{}}}catch{}const hr=20,Y=l.createContext({async retrieve(){throw new S}});function mr(t){return{async retrieve(e){const r=e;return(await t.retrieve({startAtBlock:r.height,offset:r.offset,transactionsPerPage:hr})).map(n=>({hash:n.hash,block:n.block,offset:n.offset,rollups:n.namespaces,time:n.time}))}}}const ur=t=>{const e=l.useContext(Y),r=l.useContext(A),a=mr(e);return i(D,{promise:a.retrieve(r),children:i(K,{children:t.children})})},je=t=>{const{startAtBlock:e,offset:r,...a}=t,[n]=l.useState({sortColumn:be.block,sortDir:ee.desc,height:e,offset:r});return i(A.Provider,{value:n,children:l.createElement(ur,a)})},$e=t=>{const e=l.useContext(X),r=l.useContext(Z),a=[],n=[];if(e[e.length-1].block>0){const s=e[e.length-1];a.push(i(le,{href:r.transactions(s.block,s.offset+1),children:i(g,{text:"Next"})},1))}return b("nav",{className:W(t.className,"transactions-navigation"),children:[a,n]})};try{Y.displayName="TransactionSummaryAsyncRetrieverContext",Y.__docgenInfo={description:`RetrieverContext is a React Context that holds a reference to a
TransactionSummaryAsyncRetriever`,displayName:"TransactionSummaryAsyncRetrieverContext",props:{}}}catch{}try{je.displayName="TransactionSummaryDataLoader",je.__docgenInfo={description:`TransactionSummaryDataLoader sets up the intial state of the DataTableState
and kicks begins the process of retrieving the data.`,displayName:"TransactionSummaryDataLoader",props:{startAtBlock:{defaultValue:null,description:"",name:"startAtBlock",required:!1,type:{name:"number"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}}}}}catch{}try{$e.displayName="TransactionsNavigation",$e.__docgenInfo={description:"",displayName:"TransactionsNavigation",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}async function*fr(t){for(let e=t.next();!e.done;e=t.next())yield e.value}function pr(t){return fr(t[Symbol.iterator]())}async function*yr(t){for(let e=await t.next();!e.done;e=await t.next())yield e.value}async function*lt(t,e){for(let r=await t.next();!r.done;r=await t.next())e(r.value)&&(yield r.value)}async function*k(t,e){for(let r=await t.next();!r.done;r=await t.next())yield await e(r.value)}function re(t,e){return k(t[Symbol.asyncIterator](),e)}async function*G(t,e){for(let r=0;r<e;r++){const a=await t.next();if(a.done)return;yield a.value}}async function*vr(t,e){for(let r=await t.next();!r.done&&e(r.value);r=await t.next())yield r.value}async function*P(t,e){for(let r=0;r<e;r++)if((await t.next()).done)return;yield*yr(t)}function _r(t,e){return P(t[Symbol.asyncIterator](),e)}async function fe(t){const e=await t.next();if(e.done)throw new te;return e.value}async function br(t){return fe(t[Symbol.asyncIterator]())}async function gr(t){let e;for(let r=await t.next();!r.done;r=await t.next())e=r.value;if(e===void 0)throw new te;return e}async function*dt(t,e){for(let r=await t.next();!r.done;r=await t.next())yield*e(r.value)}function wr(t,e){return dt(t[Symbol.asyncIterator](),e)}async function*z(t){yield*Vt(t)}async function ht(t,e,r){const a=r;let n=e;for(let s=await a.next();!s.done;s=await a.next())n=t(await n,s.value);return n}async function*ge(t){let e=null;for(let r=await t.next();!r.done;r=await t.next())e=Kt(e,r.value);yield*nt(e)}function xr(t){return ge(t[Symbol.asyncIterator]())}function C(t){return ht(async(e,r)=>(e.push(r),e),Promise.resolve([]),t)}const O=2147483648,Pr=1103515245,kr=12345;class pe{constructor(e){o(this,"state");this.state=e!==void 0?e:Math.floor(Math.random()*(O-1))}nextInt(){return this.state=(Pr*this.state+kr)%O,this.state}nextFloat(){return this.nextInt()/(O-1)}nextRange(e,r){const a=r-e,n=this.nextInt()/O;return e+Math.floor(n*a)}fillBytes(e){const r=new ArrayBuffer(e),a=new DataView(r);let n=0;for(;n<e-4;n+=4)a.setUint32(n,this.nextRange(0,4294967295));for(let s=n;s<e;s++)a.setUint8(s,this.nextRange(0,256));return r}}async function*N(){const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()).valueOf(),r=new pe(e);let a=0,n=e;for(;n<t.valueOf();){const s=Math.floor(r.nextFloat()*14*1e3);yield Ar(new pe(a+s),a,n,n+s),n+=s,a++}}function Ar(t,e,r,a){const n=Math.floor(t.nextFloat()*((a-r)/1e3)*12);return{height:e,time:new Date(a),numTransactions:n,transactions:Cr(new pe(e+r),e,r,a,n),proposer:new v("PUBKEY",t.fillBytes(t.nextRange(32,64))),size:Math.floor(t.nextFloat()*1024*n)+8}}const Ye=Array.from($t.keys());function Sr(t){return t.nextFloat()>.98?1:Ye[t.nextRange(0,Ye.length)]}async function*Cr(t,e,r,a,n){const s=(a-r)/n;for(let m=0,u=r;u<a;u+=s,m++){const y=Sr(t),w=Math.floor(1024*t.nextFloat());yield{block:e,index:m,size:w,hash:new v("COMMIT",t.fillBytes(32)),time:new Date(u),sender:new v("PUBKEY",t.fillBytes(32)),tree:{namespace:y,data:t.fillBytes(w)}}}}const ae=at(_);class mt{constructor(e,r,a){o(this,"number");o(this,"timestamp");o(this,"hash");this.number=e,this.timestamp=r,this.hash=a}toJSON(){return we.encode(this)}}class Tr{convert(e){if(!c(e,"number",_)||!c(e,"timestamp",L)||!c(e,"hash",L))throw new f;return new mt(e.number,e.timestamp,e.hash)}}class Ir{convert(e){return{number:e.number,timestamp:e.timestamp,hash:e.hash}}}class Dr extends p{constructor(){super(...arguments);o(this,"encoder",new Ir);o(this,"decoder",new Tr)}}const we=new Dr;class ut{constructor(e){o(this,"root");this.root=e}toJSON(){return xe.encode(this)}}class Br{convert(e){if(!c(e,"root",ae))throw new f;return new ut(e.root)}}class Rr{convert(e){return{root:e.root}}}class Nr extends p{constructor(){super(...arguments);o(this,"encoder",new Rr);o(this,"decoder",new Br)}}const xe=new Nr;class ft{constructor(e,r,a,n,s,m){o(this,"height");o(this,"timestamp");o(this,"l1_head");o(this,"l1_finalized");o(this,"payload_commitment");o(this,"transactions_root");this.height=e,this.timestamp=r,this.l1_head=a,this.l1_finalized=n,this.payload_commitment=s,this.transactions_root=m}toJSON(){return x.encode(this)}}class Gr{convert(e){if(!c(e,"height",_)||!c(e,"timestamp",_)||!c(e,"l1_head",_)||!c(e,"l1_finalized",d)||!c(e,"payload_commitment",ae)||!c(e,"transactions_root",d))throw new f;return new ft(e.height,e.timestamp,e.l1_head,e.l1_finalized===null?null:we.decode(e.l1_finalized),e.payload_commitment,xe.decode(e.transactions_root))}}class Lr{convert(e){return{height:e.height,timestamp:e.timestamp,l1_head:e.l1_head,l1_finalized:e.l1_finalized&&we.encode(e.l1_finalized),payload_commitment:e.payload_commitment,transactions_root:xe.encode(e.transactions_root)}}}class Er extends p{constructor(){super(...arguments);o(this,"encoder",new Lr);o(this,"decoder",new Gr)}}const x=new Er;class oe{constructor(e,r){o(this,"vm");o(this,"payload");this.vm=e,this.payload=r}toJSON(){return T.encode(this)}}class Fr{convert(e){if(!c(e,"vm",_)||!c(e,"payload",ae))throw new f;return new oe(e.vm,e.payload)}}class Ur{convert(e){return{vm:e.vm,payload:e.payload}}}class Mr extends p{constructor(){super(...arguments);o(this,"encoder",new Ur);o(this,"decoder",new Fr)}}const T=new Mr;class pt{constructor(e){o(this,"transaction_nmt");this.transaction_nmt=e}toJSON(){return F.encode(this)}}const B=at(d);class Or{convert(e){if(!c(e,"transaction_nmt",B))throw new f;return new pt(e.transaction_nmt.map(T.decoder.convert))}}class zr{convert(e){return{transaction_nmt:e.transaction_nmt.map(T.encode)}}}class Hr extends p{constructor(){super(...arguments);o(this,"encoder",new zr);o(this,"decoder",new Or)}}const F=new Hr;class yt{constructor(e,r,a,n){o(this,"header");o(this,"payload");o(this,"hash");o(this,"size");this.header=e,this.payload=r,this.hash=a,this.size=n}toJSON(){return vt.encode(this)}}class Qr{convert(e){if(!c(e,"header",d)||!c(e,"payload",d)||!c(e,"hash",d)||!c(e,"size",_))throw new f;return new yt(x.decode(e.header),F.decode(e.payload),h.decode(e.hash),e.size)}}class Jr{convert(e){return{header:x.encode(e.header),payload:F.encode(e.payload),hash:h.encode(e.hash),size:e.size}}}class qr extends p{constructor(){super(...arguments);o(this,"encoder",new Jr);o(this,"decoder",new Qr)}}const vt=new qr;class Vr{constructor(e,r){o(this,"width");o(this,"index");this.width=e,this.index=r}toJSON(){return Pe.encode(this)}}class jr{convert(e){if(!c(e,"width",_)||!c(e,"index",_))throw new f;return new Vr(e.width,e.index)}}class $r{convert(e){return{width:e.width,index:e.index}}}class Yr extends p{constructor(){super(...arguments);o(this,"encoder",new $r);o(this,"decoder",new jr)}}const Pe=new Yr;class Kr{constructor(e,r,a,n){o(this,"order");o(this,"head");o(this,"bits");o(this,"data");this.order=e,this.head=r,this.bits=a,this.data=n}toJSON(){return ke.encode(this)}}class Wr{convert(e){if(!c(e,"order",L)||!c(e,"head",d)||!c(e,"bits",_)||!c(e,"data",ae))throw new f;return new Kr(e.order,Pe.decode(e.head),e.bits,e.data)}}class Xr{convert(e){return{order:e.order,head:Pe.encode(e.head),bits:e.bits,data:e.data}}}class Zr extends p{constructor(){super(...arguments);o(this,"encoder",new Xr);o(this,"decoder",new Wr)}}const ke=new Zr;class ye{constructor(e){o(this,"leaf_commit");this.leaf_commit=e}toJSON(){return Ae.encode(this)}}class ea{convert(e){if(!c(e,"leaf_commit",d))throw new f;return new ye(h.decode(e.leaf_commit))}}class ta{convert(e){return{leaf_commit:h.encode(e.leaf_commit)}}}class ra extends p{constructor(){super(...arguments);o(this,"encoder",new ta);o(this,"decoder",new ea)}}const Ae=new ra;class aa{constructor(e,r){o(this,"signature");o(this,"bitvec");this.signature=e,this.bitvec=r}toJSON(){return Se.encode(this)}}class oa{convert(e){if(!B(e)||e.length!==2)throw new f;return new aa(h.decode(e[0]),ke.decode(e[1]))}}class na{convert(e){return[h.encode(e.signature),ke.encode(e.bitvec)]}}class sa extends p{constructor(){super(...arguments);o(this,"encoder",new na);o(this,"decoder",new oa)}}const Se=new sa;class ve{constructor(e,r,a,n,s,m){o(this,"data");o(this,"vote_commitment");o(this,"view_number");o(this,"signatures");o(this,"is_genesis");o(this,"_pd");this.data=e,this.vote_commitment=r,this.view_number=a,this.signatures=n,this.is_genesis=s,this._pd=m}toJSON(){return U.encode(this)}}class ca{convert(e){if(!c(e,"data",d)||!c(e,"vote_commitment",d)||!c(e,"view_number",_)||!(c(e,"signatures",B)||c(e,"signatures",Nt))||!c(e,"is_genesis",Gt)||!c(e,"_pd",d))throw new f;return new ve(Ae.decode(e.data),h.decode(e.vote_commitment),e.view_number,e.signatures&&Se.decode(e.signatures),e.is_genesis,null)}}class ia{convert(e){return{data:Ae.encode(e.data),vote_commitment:h.encode(e.vote_commitment),view_number:e.view_number,signatures:e.signatures&&Se.encode(e.signatures),is_genesis:e.is_genesis,_pd:null}}}class la extends p{constructor(){super(...arguments);o(this,"encoder",new ia);o(this,"decoder",new ca)}}const U=new la;class _t{constructor(e,r,a,n,s,m,u,y){o(this,"view_number");o(this,"justify_qc");o(this,"parent_commitment");o(this,"block_header");o(this,"block_payload");o(this,"rejected");o(this,"timestamp");o(this,"proposer_id");this.view_number=e,this.justify_qc=r,this.parent_commitment=a,this.block_header=n,this.block_payload=s,this.rejected=m,this.timestamp=u,this.proposer_id=y}toJSON(){return Ce.encode(this)}}class da{convert(e){if(!c(e,"view_number",_)||!c(e,"justify_qc",d)||!c(e,"parent_commitment",d)||!c(e,"block_header",d)||!c(e,"block_payload",d)||!c(e,"rejected",B)||!c(e,"timestamp",_)||!c(e,"proposer_id",d))throw new f;return new _t(e.view_number,U.decode(e.justify_qc),h.decode(e.parent_commitment),x.decode(e.block_header),F.decode(e.block_payload),e.rejected,e.timestamp,h.decode(e.proposer_id))}}class ha{convert(e){return{view_number:e.view_number,justify_qc:U.encode(e.justify_qc),parent_commitment:h.encode(e.parent_commitment),block_header:x.encode(e.block_header),block_payload:F.encode(e.block_payload),rejected:e.rejected,timestamp:e.timestamp,proposer_id:h.encode(e.proposer_id)}}}class ma extends p{constructor(){super(...arguments);o(this,"encoder",new ha);o(this,"decoder",new da)}}const Ce=new ma;class bt{constructor(e,r){o(this,"leaf");o(this,"qc");this.leaf=e,this.qc=r}toJSON(){return gt.encode(this)}}class ua{convert(e){if(!c(e,"leaf",d)||!c(e,"qc",d))throw new f;return new bt(Ce.decode(e.leaf),U.decode(e.qc))}}class fa{convert(e){return{leaf:Ce.encode(e.leaf),qc:U.encode(e.qc)}}}class pa extends p{constructor(){super(...arguments);o(this,"encoder",new fa);o(this,"decoder",new ua)}}const gt=new pa;class Te{constructor(e,r,a,n,s){o(this,"header");o(this,"hash");o(this,"size");o(this,"num_transactions");o(this,"proposer_id");this.header=e,this.hash=r,this.size=a,this.num_transactions=n,this.proposer_id=s}toJSON(){return ba.encode(this)}}class ya{convert(e){if(!c(e,"header",d)||!c(e,"hash",d)||!c(e,"size",_)||!c(e,"num_transactions",_)||!c(e,"proposer_id",d))throw new f;return new Te(x.decode(e.header),h.decode(e.hash),e.size,e.num_transactions,h.decode(e.proposer_id))}}class va{convert(e){return{header:x.encode(e.header),hash:h.encode(e.hash),size:e.size,num_transactions:e.num_transactions,proposer_id:h.encode(e.proposer_id)}}}class _a extends p{constructor(){super(...arguments);o(this,"encoder",new va);o(this,"decoder",new ya)}}const ba=new _a;class Ie{constructor(e,r,a,n){o(this,"hash");o(this,"header");o(this,"offset");o(this,"transaction");this.hash=e,this.header=r,this.offset=a,this.transaction=n}toJSON(){return Ja.encode(this)}}class ga{convert(e){if(!c(e,"hash",d)||!c(e,"header",d)||!c(e,"offset",_)||!c(e,"transaction",d))throw new f;return new Ie(h.decode(e.hash),x.decode(e.header),e.offset,T.decode(e.transaction))}}class wa{convert(e){return{hash:h.encode(e.hash),header:x.encode(e.header),transaction:T.encode(e.transaction)}}}class xa extends p{constructor(){super(...arguments);o(this,"encoder",new wa);o(this,"decoder",new ga)}}class ne{}class wt extends ne{toJSON(){return De.encode(this)}}class Pa{convert(e){if(!L(e)||e!=="Empty")throw new f;return new wt}}class ka{convert(){return"Empty"}}class Aa extends p{constructor(){super(...arguments);o(this,"encoder",new ka);o(this,"decoder",new Pa)}}const De=new Aa;class xt extends ne{constructor(r,a,n){super();o(this,"value");o(this,"pos");o(this,"elem");this.value=r,this.pos=a,this.elem=n}toJSON(){return Be.encode(this)}}class Sa{convert(e){if(!c(e,"Leaf",d))throw new f;const r=e.Leaf;if(!c(r,"value",d)||!c(r,"pos",d)||!c(r,"elem",d))throw new f;return new xt(h.decode(r.value),h.decode(r.pos),h.decode(r.elem))}}class Ca{convert(e){return{Leaf:{value:h.encode(e.value),pos:h.encode(e.pos),elem:h.encode(e.elem)}}}}class Ta extends p{constructor(){super(...arguments);o(this,"encoder",new Ca);o(this,"decoder",new Sa)}}const Be=new Ta;class Pt extends ne{constructor(r){super();o(this,"value");this.value=r}toJSON(){return Re.encode(this)}}class Ia{convert(e){if(!c(e,"ForgettenSubtree",d))throw new f;const r=e.ForgettenSubtree;if(!c(r,"value",d))throw new f;return new Pt(h.decode(r.value))}}class Da{convert(e){return{ForgettenSubtree:{value:h.encode(e.value)}}}}class Ba extends p{constructor(){super(...arguments);o(this,"encoder",new Da);o(this,"decoder",new Ia)}}const Re=new Ba;class Ne extends ne{constructor(r,a){super();o(this,"value");o(this,"children");this.value=r,this.children=a}toJSON(){return Ge.encode(this)}}class Ra{convert(e){if(!c(e,"Branch",d))throw new f;const r=e.Branch;if(!c(r,"value",d)||!c(r,"children",B))throw new f;return new Ne(h.decode(r.value),r.children.map(a=>se.decode(a)))}}class Na{convert(e){return{Branch:{value:h.encode(e.value),children:e.children.map(r=>se.encode(r))}}}}class Ga extends p{constructor(){super(...arguments);o(this,"encoder",new Na);o(this,"decoder",new Ra)}}const Ge=new Ga;class La{convert(e){if(c(e,"Leaf",d))return Be.decoder.convert(e);if(c(e,"Branch",d))return Ge.decoder.convert(e);if(c(e,"ForgettenSubtree",d))return Re.decoder.convert(e);if(L(e))return De.decoder.convert(e);throw new f}}class Ea{convert(e){if(e instanceof xt)return Be.encode(e);if(e instanceof Ne)return Ge.encode(e);if(e instanceof Pt)return Re.encode(e);if(e instanceof wt)return De.encode(e);throw new f}}class Fa extends p{constructor(){super(...arguments);o(this,"encoder",new Ea);o(this,"decoder",new La)}}const se=new Fa;class kt{constructor(e,r){o(this,"pos");o(this,"proof");this.pos=e,this.proof=r}toJSON(){return Le.encode(this)}}class Ua{convert(e){if(!c(e,"pos",d)||!c(e,"proof",B))throw new f;return new kt(h.decode(e.pos),e.proof.map(se.decoder.convert))}}class Ma{convert(e){return{pos:h.encode(e.pos),proof:se.encode(e.proof)}}}class Oa extends p{constructor(){super(...arguments);o(this,"encoder",new Ma);o(this,"decoder",new Ua)}}const Le=new Oa;class At{constructor(e,r,a,n,s){o(this,"transaction");o(this,"block_hash");o(this,"proof");o(this,"height");o(this,"hash");this.transaction=e,this.block_hash=r,this.proof=a,this.height=n,this.hash=s}toJSON(){return St.encode(this)}}class za{convert(e){if(!c(e,"transaction",d)||!c(e,"block_hash",d)||!c(e,"proof",d)||!c(e,"height",_)||!c(e,"hash",d))throw new f;return new At(T.decoder.convert(e.transaction),h.decode(e.block_hash),Le.decoder.convert(e.proof),e.height,h.decode(e.hash))}}class Ha{convert(e){return{transaction:T.encode(e.transaction),block_hash:h.encode(e.block_hash),proof:Le.encode(e.proof),height:e.height,hash:h.encode(e.hash)}}}class Qa extends p{constructor(){super(...arguments);o(this,"encoder",new Ha);o(this,"decoder",new za)}}const St=new Qa,Ja=new xa;async function qa(t,e){return new Te(t.header,t.hash,t.size,t.payload.transaction_nmt.length,e.leaf.proposer_id)}async function*Va(t,e){const r=e[Symbol.asyncIterator]();yield*re(pr(t.leaf.block_payload.transaction_nmt),async a=>{const n=t.leaf.block_payload.transaction_nmt.indexOf(a),s=await r.next();if(s.done)throw new Error("Not enough transactions");return new Ie(s.value.hash,t.leaf.block_header,n,a)})}function ce(t){return new ft(t.height,t.time.valueOf()/1e3,0,new mt(0,"00","00"),[],new ut([]))}async function ja(t){return new yt(ce(t),new pt(await C(re(t.transactions,async e=>new oe(e.tree.namespace,Array.from(new Uint8Array(e.tree.data)))))),new v("BLOCK",new Uint8Array([0,0,0,0]).buffer),t.size)}function $a(t){return new Te(ce(t),new v("BLOCK",new Uint8Array([0,0,0,0]).buffer),t.size,t.numTransactions,new v("PROPOSER",new Uint8Array([0,0,0,0]).buffer))}function Ya(t){const e=t.transactions,r=ce(t);return re(e,async a=>new Ie(a.hash,r,a.index,new oe(a.tree.namespace,Array.from(new Uint8Array(a.tree.data)))))}async function*Ka(t){const e=ce(t),r=t.transactions;yield*re(r,async a=>new At(new oe(a.tree.namespace,Array.from(new Uint8Array(a.tree.data))),new v("BLOCK",new Uint8Array([0,0,0,0]).buffer),new kt(new v("POS",new Uint8Array([0,0,0,0]).buffer),new Ne(new v("EMPTY",new Uint8Array([0,0,0,0]).buffer),[])),e.height,new v("COMMIT",a.tree.data.slice(0,32))))}class Wa{async getLeafFromHeight(e){const r=await this.getBlockFromHeight(e);return new bt(new _t(e,new ve(new ye(new v("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new v("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null),new v("LEAF",new Uint8Array([0,0,0,0]).buffer),r.header,r.payload,[],r.header.timestamp,new v("PROPOSER",new Uint8Array([0,0,0,0]).buffer)),new ve(new ye(new v("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new v("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null))}async getTransactionFromHeightAndOffset(e,r){const a=await fe(P(N(),e)),n=Ka(a);return await br(_r(n,r))}async getBlockSummaries(e,r){const a=P(N(),e),n=G(a,r-e),s=k(n,async m=>$a(m));return await C(s)}async getBlockFromHeight(e){const r=P(N(),e),a=await fe(r);return ja(a)}async*streamTransactionSummaries(e){const r=vr(N(),s=>s.height<=e),a=ge(r);yield*wr(a,s=>xr(Ya(s)))}async getTransactionSummaryRange(e,r,a){const n=this.streamTransactionSummaries(e),s=P(n,r),m=G(s,a);return await C(m)}async getTransactionSummaryRangeForRollup(e,r,a,n){const s=this.streamTransactionSummaries(r),m=lt(s,w=>w.transaction.vm===e),u=P(m,a),y=G(u,n);return await C(y)}}class Xa{async blockHeight(){return(await gr(N())).height}}class Za{constructor(){o(this,"availability",new Wa);o(this,"status",new Xa)}}class M extends Error{constructor(r,a="bad server response"){super(a);o(this,"response");this.response=r,Object.freeze(this)}toJSON(){return{name:M.name,status:this.response.status,message:this.message}}}let eo=class Ct extends M{constructor(e,r="bad sever response: client error"){super(e,r)}toJSON(){return{name:Ct.name,status:this.response.status,message:this.message}}};class Ee extends M{constructor(e,r="bad sever response: client error"){super(e,r)}toJSON(){return{name:Ee.name,status:this.response.status,message:this.message}}}class to{constructor(e,r){o(this,"fetcher");o(this,"baseURL");this.fetcher=e,this.baseURL=r}getLeafFromHeight(e){const r=new URL(`leaf/${e}`,this.baseURL);return this.fetcher(r.toString()).then(H(gt.decoder))}getTransactionFromHeightAndOffset(e,r){const a=new URL(`transaction/${e}/${r}`,this.baseURL);return this.fetcher(a.toString()).then(H(St.decoder))}async getBlockSummaries(e,r){const a=z(r-e),n=k(a,m=>Promise.all([this.getBlockFromHeight(e+m),this.getLeafFromHeight(e+m)])),s=k(n,([m,u])=>qa(m,u));return await C(s)}getBlockFromHeight(e){const r=new URL(`block/${e}`,this.baseURL);return this.fetcher(r.toString()).then(H(vt.decoder))}async*streamBlocksFromHeightRange(e){const r=z(e),a=k(r,s=>this.getLeafFromHeight(e-s));yield*dt(a,s=>ge(Va(s,k(z(s.leaf.block_payload.transaction_nmt.length),m=>this.getTransactionFromHeightAndOffset(s.leaf.block_header.height,m)))))}async getTransactionSummaryRange(e,r,a){const n=this.streamBlocksFromHeightRange(e),s=P(n,r),m=G(s,a);return await C(m)}async getTransactionSummaryRangeForRollup(e,r,a,n){const s=this.streamBlocksFromHeightRange(r),m=lt(s,w=>w.transaction.vm===e),u=P(m,a),y=G(u,n);return await C(y)}}function H(t){return async e=>(ro(e),ao(e),t.convert(await e.json()))}function ro(t){if(!t.ok)throw t.status>=500?new Ee(t):t.status>=400?new eo(t):new M(t)}function ao(t){const e=t.headers.get("content-type");!e||e.startsWith("application/json")}class oo{constructor(e,r){o(this,"fetcher");o(this,"baseURL");o(this,"blockHeightURL");o(this,"blockHeightResponseValidator",H({convert(e){if(typeof e!="number")throw new Lt(typeof e,"number");return e}}));this.fetcher=e,this.baseURL=r,this.blockHeightURL=new URL("latest_block_height",this.baseURL)}blockHeight(){return this.fetcher(this.blockHeightURL).then(this.blockHeightResponseValidator)}}class no{constructor(e,r){o(this,"availability");o(this,"status");this.availability=new to(e,new URL("availability/",r)),this.status=new oo(e,new URL("status/",r))}}const I=l.createContext(new Za);function so(){return typeof window>"u"?fetch:fetch.bind(window)}const Ke=({url:t,children:e})=>i(I.Provider,{value:new no(so(),t),children:e});try{Ke.displayName="ProvideGibraltarLiveService",Ke.__docgenInfo={description:"",displayName:"ProvideGibraltarLiveService",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"URL"}}}}}catch{}const We=t=>{const e=l.useContext(I);return i(J.Provider,{...t,value:{async retrieve(r){const[a,n]=await Promise.all([e.availability.getBlockFromHeight(r),e.availability.getLeafFromHeight(r)]);return{height:a.header.height,proposer:n.leaf.proposer_id,transactions:a.payload.transaction_nmt.length,size:a.size,time:new Date(a.header.timestamp*1e3)}}}})},Xe=t=>{const e=l.useContext(I);return i(q.Provider,{...t,value:{async retrieve(r){const{startAtBlock:a=await e.status.blockHeight()}=r;return(await e.availability.getBlockSummaries(Math.max(0,a-r.blocksPerPage),a)).map(s=>({height:s.header.height,proposer:s.proposer_id,transactions:s.num_transactions,size:s.size,time:new Date(s.header.timestamp*1e3)})).reverse()}}})},Ze=t=>{const e=l.useContext(I);return i(Y.Provider,{...t,value:{async retrieve(r){const{startAtBlock:a=await e.status.blockHeight()-1,offset:n=0,transactionsPerPage:s=20}=r;return(await e.availability.getTransactionSummaryRange(a,n,s)).map(u=>({hash:u.hash,block:u.header.height,offset:u.offset,namespaces:[u.transaction.vm],time:new Date(u.header.timestamp*1e3)}))}}})},et=t=>{const e=l.useContext(I);return i($.Provider,{...t,value:{async retrieve(r){const[a,n,s]=await Promise.all([e.availability.getLeafFromHeight(r.height),e.availability.getBlockFromHeight(r.height),e.availability.getTransactionFromHeightAndOffset(r.height,r.offset)]);return{block:n.header.height,index:r.offset,total:n.payload.transaction_nmt.length,size:n.size,hash:s.hash,time:new Date(n.header.timestamp*1e3),sender:a.leaf.proposer_id,tree:{namespace:s.transaction.vm,data:new Uint8Array(s.transaction.payload).buffer}}}}})},tt=t=>{const e=l.useContext(I);return i(V.Provider,{...t,value:{async retrieve(r){const{height:a=await e.status.blockHeight()-1,offset:n=0,namespace:s,transactionsPerPage:m}=r;return(await e.availability.getTransactionSummaryRangeForRollup(s,a,n,m)).map(y=>({hash:y.hash,block:y.header.height,offset:y.offset,namespaces:[y.transaction.vm],time:new Date(y.header.timestamp*1e3)}))}}})},co=30,rt=t=>{const e=l.useContext(I);return i(j.Provider,{...t,value:{async retrieve(){const r=await e.status.blockHeight()-1,a=z(co),n=k(a,u=>Promise.resolve(r-u)),s=k(n,u=>e.availability.getBlockFromHeight(u)),m=await ht(async(u,y)=>{for(const w of y.payload.transaction_nmt){const Tt=u.get(w.vm)??0;u.set(w.vm,Tt+1)}return u},Promise.resolve(new Map),s);return Array.from(jt(m.entries(),([u,y])=>({namespace:u,transactions:y})))}}})};try{We.displayName="ProvideGibraltarBlockDetailDataSource",We.__docgenInfo={description:"",displayName:"ProvideGibraltarBlockDetailDataSource",props:{}}}catch{}try{Xe.displayName="ProvideGibraltarBlocksSummaryDataSource",Xe.__docgenInfo={description:"",displayName:"ProvideGibraltarBlocksSummaryDataSource",props:{}}}catch{}try{Ze.displayName="ProvideGibraltarTransactionsSummaryDataSource",Ze.__docgenInfo={description:"",displayName:"ProvideGibraltarTransactionsSummaryDataSource",props:{}}}catch{}try{et.displayName="ProvideGibraltarTransactionDetailDataSource",et.__docgenInfo={description:"",displayName:"ProvideGibraltarTransactionDetailDataSource",props:{}}}catch{}try{tt.displayName="ProvideGibraltarRollUpDetailDataSource",tt.__docgenInfo={description:"",displayName:"ProvideGibraltarRollUpDetailDataSource",props:{}}}catch{}try{rt.displayName="ProvideGibraltarRollUpsSummaryDataSource",rt.__docgenInfo={description:"",displayName:"ProvideGibraltarRollUpsSummaryDataSource",props:{}}}catch{}class Fo{explorer(){return"/?path=/story/pages-explorer--explorer"}blocks(e){return e!==void 0?`/?path=/story/pages-blocks--blocks&args=startAtBlock:${e}`:"/?path=/story/pages-blocks--blocks"}block(e){return`/?path=/story/pages-block--block&args=block:${e}`}transactions(e,r){return e!==void 0?`/?path=/story/pages-transactions--transactions&args=startAtBlock:${e};offset:${r??0}`:"/?path=/story/pages-transactions--transactions"}transaction(e,r){return`/?path=/story/pages-transaction--transaction&args=height:${e};offset:${r}`}rollUps(){return"/?path=/story/pages-rollups--rollups"}rollUp(e,r,a){return r!==void 0?`/?path=/story/pages-rollup--rollup&args=namespace:${e};startAtBlock:${r};offset:${a??0}`:`/?path=/story/pages-rollup--rollup&args=namespace:${e}`}}export{Ue as B,Oe as F,he as N,Me as P,Qe as R,Fo as S,Ve as T,ct as W,Eo as a,E as b,We as c,ze as d,He as e,Xe as f,tt as g,Je as h,rt as i,me as j,co as k,et as l,je as m,$e as n,Ze as o,ue as p,_e as q,be as r};
