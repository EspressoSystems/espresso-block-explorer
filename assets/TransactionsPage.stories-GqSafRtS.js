import{j as t,a as v}from"./jsx-runtime-5BUNAZ9W.js";import{P as T,O as x,H as P,a as k}from"./Header-efnDnTsH.js";import{W as b,H as C,C as _,P as D,g as R,S as w}from"./StoryBookPathResolver-8EOso1hl.js";import{F as A}from"./Footer-CrD2Tz-8.js";import{R as s}from"./index-4g5l5LRQ.js";import{a as B,t as F,d as N,e as E,c as H,b as I}from"./functional-Sf3DWwwq.js";import{S as f,D as g,a as O,c as j,b as U,d as i,r as L}from"./DataTable-iTPprKGc.js";import{P as M}from"./PromiseBuilder-Wx5BoySI.js";import{L as y}from"./Link-Cn5sJHnZ.js";import{H as W}from"./HexText-rq0ubeAq.js";import{N as $}from"./NumberText-vuBi4ZSJ.js";import{T as q}from"./TimeText-GYuBLmF5.js";import{R as z}from"./RollUpSimple-tOS3HHQF.js";import{T as G}from"./Text-qj7igP2-.js";import"./Close-bhffxfNn.js";import"./higher_order-VtSBvwoq.js";import"./SVGIconBase-1p394ezW.js";import"./IconButton-7JNgBrhk.js";import"./Button-I3bbD5ni.js";import"./typography-fmBtJntk.js";import"./TaggedBase64-4sAxGbCE.js";import"./ArrowRight-9gpb0-y0.js";import"./AnchorButton-nRlYYR1D.js";import"./FlatIconAnchorButton-1U1EvmN5.js";import"./IconAnchorButton-HujeWbUs.js";import"./LabeledAnchorButton-vxbK3n4D.js";import"./LabeledButton-lVcWQ9Rx.js";import"./DiscordIcon-3IewVXYd.js";import"./EspressoLogo-WrwOKMPe.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./ChevronUp-LKTnnBoj.js";import"./NumberFormattersProvider-olCp0Cc0.js";import"./DateTimeFormattersProvider-ojTofX-n.js";var o=(e=>(e.hash="hash",e.rollup="rollup",e.block="block",e.time="time",e))(o||{});const S=s.createContext({async retrieve(){throw new Error("unimplemented")}});function J(e){return{async retrieve(r){const a=r;return(await e.retrieve({page:a.page,resultsPerPage:20,sortColumn:a.sortColumn,sortDir:a.sortDir})).map(n=>({hash:n.hash,block:n.block,rollups:n.namespaces,time:n.time}))}}}const K=()=>{const e=s.useContext(i),r=s.useContext(T),a=Array.from(B(new Uint8Array(e.hash),m=>m.toString(16).padStart(2,"0"))).join("");return t(y,{href:r.transaction(`0x${a}`),children:t(W,{value:e.hash})})},Q=()=>{const e=s.useContext(i);return t(z,{namespace:e.rollups[0]})},V=()=>{const e=s.useContext(T),r=s.useContext(i);return t(y,{href:e.block(r.block),children:t($,{number:r.block})})},X=()=>{const e=s.useContext(i);return t(q,{date:e.time})},Y=()=>{const e=s.useContext(S),r=s.useContext(g),a=J(e);return t(M,{promise:a.retrieve(r),builder:j(ee)})},Z=()=>{const[e,r]=s.useState({sortColumn:o.block,sortDir:f.desc,page:0});return t(g.Provider,{value:e,children:t(O.Provider,{value:r,children:t(Y,{})})})},ee=()=>t(U,{columns:[{label:"Transaction",columnType:o.hash,buildCell:K},{label:"Rollups",columnType:o.rollup,buildCell:Q},{label:"Block",columnType:o.block,buildCell:V},{label:"Time",columnType:o.time,buildCell:X}]});try{TransactionSummaryDataTable.displayName="TransactionSummaryDataTable",TransactionSummaryDataTable.__docgenInfo={description:"",displayName:"TransactionSummaryDataTable",props:{}}}catch{}const re=b(_),te=b(D),ae=()=>v(x,{pathname:"/transaction",children:[t(P,{}),t(te,{children:t(C,{children:t(G,{text:"Transactions"})})}),t(re,{children:t(Z,{})}),t(A,{})]});try{TransactionsPage.displayName="TransactionsPage",TransactionsPage.__docgenInfo={description:"",displayName:"TransactionsPage",props:{}}}catch{}function u(e,r){return e.block-r.block}function oe(e,r){return H(e.hash,r.hash)}function se(e,r){return e.time.valueOf()-r.time.valueOf()}function ne(e,r){return I(e.namespaces,r.namespaces)}function ce(e){switch(e){case o.hash:return oe;case o.block:return u;case o.time:return se;case o.rollup:return ne}return u}function ie(e){const r=ce(e.sortColumn);switch(e.sortDir){case f.desc:return L(r)}return r}let l=null;function le(){return l===null&&(l=me()),l}async function me(){const e=[];for await(const r of E(R(),a=>a.transactions))e.push({hash:r.hash,block:r.block,namespaces:r.tree.map(a=>a.namespace),time:r.time});return e}const ue=e=>t(S.Provider,{...e,value:{async retrieve(r){const a=Array.from(await le());return a.sort(ie(r)),console.log("<<< HERE data.length",a.length),Array.from(F(N(a,r.page*r.resultsPerPage),r.resultsPerPage))}}});try{FakeTransactionsSummaryDataSource.displayName="FakeTransactionsSummaryDataSource",FakeTransactionsSummaryDataSource.__docgenInfo={description:"",displayName:"FakeTransactionsSummaryDataSource",props:{}}}catch{}const pe=()=>t(k,{pathResolver:new w,children:t(ue,{children:t(ae,{})})}),Ge={title:"Pages/Transactions",component:pe,parameters:{layout:"fullscreen"}},c={args:{}};var p,d,h;c.parameters={...c.parameters,docs:{...(p=c.parameters)==null?void 0:p.docs,source:{originalSource:`{
  args: {}
}`,...(h=(d=c.parameters)==null?void 0:d.docs)==null?void 0:h.source}}};const Je=["Transactions"];export{c as Transactions,Je as __namedExportsOrder,Ge as default};
