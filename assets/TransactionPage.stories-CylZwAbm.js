import{j as t,a as n,F as d}from"./jsx-runtime-5BUNAZ9W.js";import"./DateTimeFormattersProvider-ew7zMQJ5.js";import"./LocaleProvider-pqvxCw-R.js";import{P as F}from"./RelativeTimeText-YyUKPtxp.js";import"./NumberFormattersProvider-qGn07z_Y.js";import{P as A,D as I}from"./PromiseResolver-3CMncE_b.js";import{W as y,h as L,g as z,P as U,F as W,S as j}from"./StoryBookPathResolver-nBjR85Jr.js";import"./DataTable-nD0Jni6A.js";import"./AnchorButton-otSsAsSc.js";import"./Button-nGjelwSV.js";import"./IconAnchorButton-yD9LQ3N1.js";import"./IconButton-yAenjv_7.js";import"./LabeledAnchorButton-WaSb0fXE.js";import{L as v}from"./LabeledButton-GV2hMMJ7.js";import{C as M}from"./Card-h8BJV9JH.js";import{a as O,H as $}from"./Heading2-n3LYvQdK.js";import{R as o}from"./index-4g5l5LRQ.js";import{T as l}from"./TabledLabeledValue-uTjZB1fd.js";import{b as w,O as V,P as q,a as G}from"./NavBar-jHFiI4us.js";import{L as H}from"./Link-cIG_z142.js";import"./SocialMediaLinks-KpfXVInQ.js";import{H as J}from"./Header-app1MH_g.js";import{H as K}from"./HexDump-Ie7aeshY.js";import{R as Q}from"./RollUpSimple-Bmohx6DO.js";import{B as X}from"./ByteSizeText-SEJ34lc5.js";import{D as Y}from"./DateTimeText-0M6T_ChF.js";import{N as S}from"./NumberText-8xcSHIjc.js";import{T as i}from"./Text-qj7igP2-.js";import"./TimeText-XfKpDBzb.js";import{h as Z}from"./typography-_ddOfzBO.js";import"./SearchGlass-ePUBDoPe.js";import"./ArrowRight-49S3eE7Z.js";import"./ChevronUp-NmEPZg9I.js";import"./TwitterIcon-pfkyNkAt.js";import"./EspressoLogo-i5IlZ4vG.js";import"./EspressoLogoAndTitle-S8HsCgCD.js";import"./Menu-86-CB54X.js";import"./SVGIconBase-2PJxIh1i.js";import{c as ee,T as te,u as re}from"./TaggedBase64-4OEwxdMB.js";import{m as ae,c as ne}from"./functional-Rm0aYQEK.js";import{F as oe}from"./FullHexText-GBC23OeJ.js";import{H as ie}from"./HexText-lgN0lyZc.js";import{T as se}from"./TaggedBase64Text-v1U3LybN.js";import{c as ce,e as le,m as de}from"./functional_async-GTj58yym.js";import{F as me}from"./Footer-56xJJ0Sl.js";import"./higher_order-VtSBvwoq.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./inline-54z6-ie8.js";import"./Copy-Sdn8c7EE.js";function N(e){if(e.startsWith("0x"))return N(e.substring(2));if(e.length&1)throw new Error("Hex string invalid, not a multiple of 2");const r=new ArrayBuffer(e.length/2);return pe(ee(e),r),r}function pe(e,r){const a=new DataView(r);let s=0;for(;s<r.byteLength;){const p=e.next(),c=e.next();if(p.done||c.done)throw new Error("hex encoding terminated early");const R=C(p.value),k=C(c.value),B=R<<4|k;a.setUint8(s,B),s++}}function C(e){if(e>=48&&e<=57)return e-48;if(e>=97&&e<=102)return e-97+10;if(e>=65&&e<=70)return e-65+10;throw new TypeError(`invalid hex value "${e}"`)}function he(e){return e.toString(16).padStart(2,"0")}function*ue(e){yield*ae(e,he)}function xe(e){return ue(e[Symbol.iterator]())}const E=y(M),fe=Z("label"),m=o.createContext(new ArrayBuffer(0)),x=()=>{const e=o.useContext(m);return t(fe,{className:"sub-heading",children:t(oe,{value:e})})},_=o.createContext({block:0,index:0,total:0,size:0,hash:new ArrayBuffer(0),time:new Date,sender:new te("ERR",new ArrayBuffer(0)),tree:[]}),u=o.createContext({async retrieve(){throw new Error("unimplemented")}}),ge=e=>{const r=o.useContext(_),a=o.useContext(w);return o.createElement(E,e,n(l,{children:[t(i,{text:"Block"}),t(H,{href:a.block(r.block),children:t(S,{number:r.block})})]}),n(l,{children:[t(i,{text:"Transaction index in block"}),t(i,{text:`index ${r.index} out of ${r.total} transactions`})]}),n(l,{children:[t(i,{text:"Transaction Size"}),t(X,{bytes:r.size})]}),n(l,{children:[t(i,{text:"Espresso Sequencer Hash"}),t(ie,{value:r.hash})]}),n(l,{children:[t(i,{text:"Time"}),t(Y,{date:r.time})]}),n(l,{children:[t(i,{text:"Sender"}),t(se,{value:r.sender})]}))},Te=e=>{const r=o.useContext(I);return r?t(_.Provider,{value:r,children:e.children}):t(L,{children:t(i,{text:"No Data Found"})})},ye=y(O),_e=()=>{const e=o.useContext(_),r=o.useContext(w),a=e.tree;return a.length<=0?null:n(d,{children:[t(ye,{children:t(i,{text:"Data"})}),a.map((s,p)=>t(E,{children:n(d,{children:[n(l,{children:[t(i,{text:"Rollup"}),n(d,{children:[t(Q,{namespace:s.namespace}),t("br",{}),t(H,{href:r.rollUp(s.namespace),children:t(S,{number:s.namespace})})]})]}),n(l,{children:[t(i,{text:"Transaction data"}),n(d,{children:[t(K,{value:s.data}),t("br",{}),t(v,{onClick:c=>{c.stopPropagation(),c.preventDefault(),navigator.clipboard.writeText(Array.from(xe(new Uint8Array(s.data))).join(""))},children:t(i,{text:"Copy as Hex"})}),"Â ",t(v,{onClick:c=>{c.stopPropagation(),c.preventDefault(),navigator.clipboard.writeText(re.encodeToString(s.data))},children:t(i,{text:"Copy as Base64"})})]})]})]})},p))]})},ve=e=>n(Te,{children:[o.createElement(ge,e),t(_e,{})]}),f=e=>{const r=o.useContext(m),a=o.useContext(u);return t(A,{promise:a.retrieve(r),children:o.createElement(ve,e)})};try{m.displayName="TransactionCommitContext",m.__docgenInfo={description:"TransactionCommitContext represents the current hash for a Transaction.",displayName:"TransactionCommitContext",props:{}}}catch{}try{x.displayName="TransactionSubHeading",x.__docgenInfo={description:`TransactionSubHeading represents a sub heading for the Transaction Detail
Header.`,displayName:"TransactionSubHeading",props:{}}}catch{}try{u.displayName="RetrieverContext",u.__docgenInfo={description:`RetrieverContext is a context for retrieving the TransactionDetail
response.`,displayName:"RetrieverContext",props:{}}}catch{}try{f.displayName="TransactionDetailContent",f.__docgenInfo={description:`TransactionDetailContent uses the retriever from the RetrieverContext
to retrieve the data using the hash retrieved from the
TransactionCommitContext`,displayName:"TransactionDetailContent",props:{}}}catch{}async function*Ce(){for await(const e of le(z(),r=>de(r.transactions,a=>Promise.resolve({block:a.block,index:a.index,total:r.numTransactions,size:a.size,hash:a.hash,time:a.time,sender:a.sender,tree:a.tree}))))yield e}const g=e=>t(u.Provider,{...e,value:{async retrieve(r){const a=await ce(Ce(),s=>ne(s.hash,r)===0);if(!a)throw new Error("Not Found");return a}}});try{g.displayName="ProvideFakeTransactionDetailDataSource",g.__docgenInfo={description:"",displayName:"ProvideFakeTransactionDetailDataSource",props:{}}}catch{}const be=y(U),T=e=>n(V,{page:q.transactions,children:[t(J,{}),n(be,{children:[t($,{children:t(i,{text:"Transaction Details"})}),t(x,{})]}),o.createElement(f,e),t(me,{})]});try{T.displayName="TransactionPage",T.__docgenInfo={description:"",displayName:"TransactionPage",props:{}}}catch{}const De=({hash:e,...r})=>n(d,{children:[t(W,{}),t(F,{children:t(G,{pathResolver:new j,children:t(m.Provider,{value:N(e),children:t(g,{children:t(T,{...r})})})})})]}),_t={title:"Pages/Transaction",component:De,parameters:{layout:"fullscreen"}},h={args:{hash:"0xdeadbeef"}};var b,D,P;h.parameters={...h.parameters,docs:{...(b=h.parameters)==null?void 0:b.docs,source:{originalSource:`{
  args: {
    hash: '0xdeadbeef'
  }
}`,...(P=(D=h.parameters)==null?void 0:D.docs)==null?void 0:P.source}}};const vt=["Transaction"];export{h as Transaction,vt as __namedExportsOrder,_t as default};
