import{R as h,j as e}from"./iframe-DBL03KB_.js";import{d as k}from"./assert-BI051aL8.js";import"./ByteSizeText-C6mbuV3Q.js";import"./VariableByteSizeText-nrSKuyYW.js";import"./CopyHex-DbPkuZ0b.js";import{D as A}from"./DateTimeText-CJEitzMO.js";import"./FullHexText-Cc87lfvK.js";import"./HexText-5ZvMZLKw.js";import"./MoneyText-DE4bwqda.js";import{N as m}from"./NumberText-C6v9mUpM.js";import"./RelativeTimeText-CPThff-t.js";import"./TaggedBase64Text-rMwIDupZ.js";import{T as r}from"./Text-BU7JBOLk.js";import"./TimeText-BbHRTCq8.js";import{c as u,a as N,E as _,u as p,H as R,C as U,W as V}from"./deserializer-4_V_K8bR.js";import"./UnimplementedError-DEXMe0kn.js";import{T as d}from"./TableLabeledValue-DnI6IMPr.js";import{i as P}from"./data-CeQBE4up.js";import{W as O,c as G}from"./TransactionDetailLoader-DnqPn6ys.js";var c=(t=>(t[t.l2Message=3]="l2Message",t[t.endOfBlock=6]="endOfBlock",t[t.l2FundedByL1=7]="l2FundedByL1",t[t.rollupEvent=8]="rollupEvent",t[t.submitRetryable=9]="submitRetryable",t[t.batchForGasEstimation=10]="batchForGasEstimation",t[t.initialize=11]="initialize",t[t.ethDeposit=12]="ethDeposit",t[t.batchPostingReport=13]="batchPostingReport",t[t.invalid=255]="invalid",t))(c||{});class q{kind;poster;blockNumber;timestamp;requestID;l1BaseFee;constructor(a,s,i,o,l=null,n=null){this.kind=a,this.poster=s,this.blockNumber=i,this.timestamp=o,this.requestID=l,this.l1BaseFee=n,Object.freeze(this)}}function H(t){const a=u(N(new Uint8Array(t).buffer,_.big));try{const s=a.deserializeUint8(),i=a.deserializeBytes(),o=a.deserializeUint64(),l=a.deserializeUint64(),n=a.deserializeBytes(),g=a.deserializeUint64();return new q(s,new O(p.encode(i)),o,l,n.length>0?p.encode(n):null,g>0n?g:null)}catch(s){return console.debug("failed to decode nitro l1 incoming message header due to error",s),null}}class S{header;l2Msg;batchGasCost;constructor(a,s,i=null){this.header=a,this.l2Msg=s,this.batchGasCost=i,Object.freeze(this)}}function L(t){const a=u(N(new Uint8Array(t).buffer,_.big));try{const s=a.deserializeBytes(),i=a.deserializeBytes(),o=H(s);return k(o),new S(o,p.encode(i),null)}catch(s){return console.error("Failed to decode Nitro L1 Incoming Message",s),null}}class j{message;delayedMessagesRead;constructor(a,s){this.message=a,this.delayedMessagesRead=s,Object.freeze(this)}}function M(t){const a=u(N(new Uint8Array(t).buffer,_.big));try{const s=a.deserializeBytes(),i=u(N(new Uint8Array(s).buffer,_.big)),o=i.deserializeBytes(),l=i.deserializeUint64(),n=L(o);return k(n),new j(n,l)}catch(s){return console.debug("Failed to decode Nitro Message with Metadata",s),null}}class B{index;length;contents;messageWithMetadata;constructor(a,s,i,o){this.index=a,this.length=s,this.contents=i,this.messageWithMetadata=o,Object.freeze(this)}}class D{signature;messages;constructor(a,s){this.signature=a,this.messages=s,Object.freeze(this)}}function C(t){const a=[];let s=0;const i=new DataView(t.buffer),o=i.getBigUint64(0,!1);s+=8;const l=t.subarray(s,s+Number(o));s+=l.byteLength;const n=t.byteLength;for(;s<n;){const g=i.getBigUint64(s,!1);s+=8;const x=i.getBigUint64(s,!1);s+=8;const W=Number(x);if(s+W>n){console.error("nitro batch data is malformed, message size exceeds data length",s,W,n);break}const v=t.subarray(s,s+Number(x));s+=Number(x);const E=M(v);a.push(new B(g,x,p.encode(v),E))}return new D(p.encode(l),a)}const F=()=>{const a=h.useContext(G).tree;if(!P(a.namespace))return e.jsx(e.Fragment,{});const s=C(new Uint8Array(a.data));return s?e.jsx(y.Provider,{value:s,children:e.jsxs(d,{className:"card--padding nitro--section",children:[e.jsx(r,{text:"Nitro Batch"}),e.jsx(I,{})]})}):e.jsx(e.Fragment,{})},y=h.createContext(null),I=()=>{const t=h.useContext(y);return t?e.jsxs(e.Fragment,{children:[e.jsxs(d,{children:[e.jsx(r,{text:"Signature"}),e.jsx(R,{data:t.signature})]}),e.jsxs(d,{children:[e.jsx(r,{text:"Number of Messages"}),e.jsx(m,{number:t.messages.length})]}),t.messages.map((a,s)=>e.jsx(f.Provider,{value:a,children:e.jsx(b.Provider,{value:s,children:e.jsx(z,{},s)})},s))]}):e.jsx(e.Fragment,{})},f=h.createContext(null),b=h.createContext(0),z=()=>{const t=h.useContext(b),a=h.useContext(f);return a?e.jsxs(d,{children:[e.jsxs(e.Fragment,{children:[e.jsx(r,{text:"Message"}),e.jsx(r,{text:"Â "}),e.jsx(m,{number:t})]}),e.jsxs(e.Fragment,{children:[e.jsxs(d,{children:[e.jsx(r,{text:"Rollup Block Number"}),e.jsx(m,{number:a.index})]}),e.jsxs(d,{children:[e.jsx(r,{text:"Length"}),e.jsx(m,{number:a.length})]}),e.jsx("br",{}),e.jsx(R,{data:a.contents}),e.jsx("br",{}),e.jsx(w,{data:a.messageWithMetadata})]})]}):null},K=({kind:t})=>{switch(t){case c.batchForGasEstimation:return e.jsx(r,{text:"Batch for Gas Estimation"});case c.batchPostingReport:return e.jsx(r,{text:"Batch Posting Report"});case c.endOfBlock:return e.jsx(r,{text:"End of Block"});case c.ethDeposit:return e.jsx(r,{text:"ETH Deposit"});case c.initialize:return e.jsx(r,{text:"Initialize"});case c.l2FundedByL1:return e.jsx(r,{text:"L2 Funded by L1"});case c.l2Message:return e.jsx(r,{text:"L2 Message"});case c.rollupEvent:return e.jsx(r,{text:"Rollup Event"});case c.invalid:return e.jsx(r,{text:"Invalid"});case c.submitRetryable:return e.jsx(r,{text:"Submit Retryable"});default:return e.jsx(r,{text:`Unknown Kind (${t})`})}},w=({data:t})=>t?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:e.jsx(r,{text:"Nitro Message with Metadata"})}),e.jsx("br",{}),e.jsxs(d,{children:[e.jsx(r,{text:"Kind"}),e.jsx("span",{title:String(t.message.header.kind),children:e.jsx(K,{kind:t.message.header.kind})})]}),e.jsxs(d,{children:[e.jsx(r,{text:"Poster"}),e.jsx(U,{value:t.message.header.poster,children:e.jsx(V,{value:t.message.header.poster})})]}),e.jsxs(d,{children:[e.jsx(r,{text:"L1 Block Number"}),e.jsx(m,{number:t.message.header.blockNumber})]}),e.jsxs(d,{children:[e.jsx(r,{text:"Timestamp"}),e.jsx(A,{date:new Date(Number(t.message.header.timestamp)*1e3)})]}),e.jsxs(d,{children:[e.jsx(r,{text:"Delayed Messages Read"}),e.jsx(m,{number:t.delayedMessagesRead})]}),e.jsx("br",{}),e.jsx(r,{text:"L2 Message"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(R,{data:t.message.l2Msg})]}):e.jsx(e.Fragment,{});try{M.displayName="decodeNitroMessageWithMetadata",M.__docgenInfo={description:`decodeNitroMessageWithMetadata attempts to decode a Nitro Message with
metadata from the provided data.

This data is RLP encoded.`,displayName:"decodeNitroMessageWithMetadata",props:{}}}catch{}try{C.displayName="extractNitroBatch",C.__docgenInfo={description:"extractNitroBatch extracts a Nitro Batch from the provided payload.",displayName:"extractNitroBatch",props:{}}}catch{}try{j.displayName="NitroMessageWithMetadata",j.__docgenInfo={description:`NitroMessageWithMetadata represents a Nitro Message with metadata
that is stored as part of a batch submitted for Nitro integration projects.

This layout is adapted from the Nitro's code base:
https://github.com/EspressoSystems/nitro-espresso-integration/blob/828cc2a47358a8aac2a4931fe087f07037351164/arbos/arbostypes/messagewithmeta.go#L17-L20`,displayName:"NitroMessageWithMetadata",props:{}}}catch{}try{B.displayName="NitroMessageV0",B.__docgenInfo={description:`NitroMessageV0 represents an opaque Nitro Message that is stored as part of a
batch submitted for Nitro integration projects that are submitted to
Espresso.`,displayName:"NitroMessageV0",props:{}}}catch{}try{D.displayName="NitroBatchV0",D.__docgenInfo={description:`NitroBatchV0 represents a Nitro Batch that is submitted to Espresso.
It contains a signature and a list of NitroMessages.`,displayName:"NitroBatchV0",props:{}}}catch{}try{F.displayName="NitroBatchDetectAndDisplay",F.__docgenInfo={description:`NitroBatchDisplay is a component that displays the Nitro Batch
information successfully parsed from data stored within a
TransactionDetail.`,displayName:"NitroBatchDetectAndDisplay",props:{}}}catch{}try{y.displayName="NitroBatchContext",y.__docgenInfo={description:`NitroBatchContext is a React Context that contains the Nitro Batch
information.`,displayName:"NitroBatchContext",props:{}}}catch{}try{I.displayName="NitroBatchDisplay",I.__docgenInfo={description:`NitroBatchDisplay is a component that displays the Nitro Batch detail contained
within the NitroBatchContext.`,displayName:"NitroBatchDisplay",props:{}}}catch{}try{f.displayName="NitroMessageContext",f.__docgenInfo={description:`NitroMessageContext is a React Context that contains the Nitro Message
information.`,displayName:"NitroMessageContext",props:{}}}catch{}try{b.displayName="NitroMessageIndexContext",b.__docgenInfo={description:`NitroMessageIndexContext is a React Context that contains the index offset of
the Nitro Message within the batch.`,displayName:"NitroMessageIndexContext",props:{}}}catch{}try{z.displayName="NitroMessageDisplay",z.__docgenInfo={description:`NitroMessageDisplay is a component that displays the Nitro Message
information successfully parsed from data.`,displayName:"NitroMessageDisplay",props:{}}}catch{}try{w.displayName="NitroMessageWithMetadataDisplay",w.__docgenInfo={description:`NitroMessageWithMetadataDisplay is a component that displays the Nitro
Message with Metadata information successfully parsed from data stored
within a TransactionDetail.`,displayName:"NitroMessageWithMetadataDisplay",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"NitroMessageWithMetadata | null"}}}}}catch{}export{y as N,I as a,F as b,C as e};
