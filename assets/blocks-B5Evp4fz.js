import{s as h}from"./sleep-CW-vxfof.js";import{M as g}from"./monetary_value-B0ntaWrJ.js";import{c as p}from"./data-Cpeha0UW.js";import{T as i}from"./TaggedBase64-S1MhFE0d.js";import{P as l,g as w,a as B,n as f}from"./nodes-D4QSeByf.js";async function*x(){}function M(){const e=new Uint8Array(new Array(20).map(()=>0)).buffer;return{hash:new i("BLOCK",e),height:0,time:new Date(0),genTime:0,transactions:x(),numTransactions:0,proposer:[],size:0,fees:[]}}async function*T(e){let o=1,t=w();const n=B();for(;t<n;){const s=Math.floor(e.nextFloat()*14*1e3);yield y(new l(o+s),o,t,t+s),t+=s,o++}}async function*C(e=new l(w())){yield M(),yield*T(e)}async function*D(e,o,t){let n=o,s=t;for(;;){const a=Math.floor(e.nextFloat()*14*1e3),r=n+a-Date.now();await h(r),yield y(new l(s+a),s,n,n+a),n+=a,s++}}function y(e,o,t,n){const s=Math.floor(e.nextRange(0,5)),a=e.nextRange(0,f.length),r=f[a];return{hash:new i("BLOCK",e.fillBytes(32)),height:o,genTime:n-t,time:new Date(n),numTransactions:s,transactions:E(new l(o+t),o,t,n,s),proposer:[r.address],size:Math.floor(e.nextFloat()*1024*s)+8,fees:[g.ESP(BigInt(e.nextRange(0,1e9)*1e3))]}}const u=Array.from(p.keys());function k(e){return e.nextFloat()>.98?1:u[e.nextRange(0,u.length)]}async function*E(e,o,t,n,s){const a=(n-t)/s;for(let r=0,c=t;c<n;c+=a,r++){const d=k(e),m=Math.floor(1024*e.nextFloat());yield{block:o,index:r,size:m,hash:new i("COMMIT",e.fillBytes(32)),time:new Date(c),sender:new i("PUBKEY",e.fillBytes(32)),tree:{namespace:d,data:e.fillBytes(m)}}}}export{M as c,C as g,D as s};
