var xr=Object.defineProperty;var kr=(r,e,s)=>e in r?xr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s;var o=(r,e,s)=>kr(r,typeof e!="symbol"?e+"":e,s);import{T as a,i as te,I as N,g as l,A as I,h as E,j as g,C as H,a as n,r as w,B as x,b as C,s as h,f as L,o as f,u as Pe,c as j,p as Ae,N as De,d as Oe,e as Re,q as Sr,t as G,v as $}from"./string-BRHtp8nH.js";import{h as m,u as Fe,s as ze}from"./array_buffer-CXlRbd7o.js";import{n as c,b as p}from"./base64-B9OJSIzr.js";import{t as i}from"./TaggedBase64-kwVVsu1o.js";import"./url-YgTINc9c.js";import{U as yr}from"./functional_async-mClN8vtW.js";import{m as Br,M as Tr}from"./functional-CfXZTWhy.js";import{I as ce,m as Me}from"./monetary_value-BoyvFl18.js";import"./FetchError-nmVtBWex.js";import"./NotFoundError-CI-iUI-y.js";class _r{convert(e){if(!te(e))throw new N(typeof e,"string");const s=new Date(e);if(Number.isNaN(s.valueOf()))throw new N("NaN","number");return s}}class Nr{convert(e){return l(e,Date),e.toISOString()}}class Pr extends a{constructor(){super(...arguments);o(this,"encoder",new Nr);o(this,"decoder",new _r)}}const k=new Pr;class Je{constructor(e,s,t,d,u,b){o(this,"hash");o(this,"height");o(this,"proposerID");o(this,"numTransactions");o(this,"size");o(this,"time");this.hash=e,this.height=s,this.proposerID=t,this.numTransactions=d,this.size=u,this.time=b}toJSON(){return K.encode(this)}}class Ar{convert(e){return n(e,"hash","height","proposer_id","num_transactions","size","time"),new Je(i.decode(e.hash),c.decode(e.height),m.decode(e.proposer_id),c.decode(e.num_transactions),c.decode(e.size),k.decode(e.time))}}class Dr{convert(e){return l(e,Je),{hash:i.encode(e.hash),height:c.encode(e.height),proposer_id:m.encode(e.proposerID),num_transactions:c.encode(e.numTransactions),size:c.encode(e.size),time:k.encode(e.time)}}}class Or extends H{constructor(){super(...arguments);o(this,"encoder",new Dr);o(this,"decoder",new Ar)}}const K=new Or,bt=new I(new E(K),new g(K)),Ve=p;class We{constructor(e,s,t,d,u,b){o(this,"hash");o(this,"rollups");o(this,"height");o(this,"time");o(this,"offset");o(this,"numTransactions");this.hash=e,this.rollups=s,this.height=t,this.time=d,this.offset=u,this.numTransactions=b}toJSON(){return X.encode(this)}}class Rr{convert(e){return n(e,"hash","rollups","height","time","offset","num_transactions"),new We(i.decode(e.hash),Ve.decode(e.rollups),c.decode(e.height),k.decode(e.time),c.decode(e.offset),c.decode(e.num_transactions))}}class Fr{convert(e){return l(e,We),{hash:i.encode(e.hash),rollups:Ve.encode(e.rollups),height:c.encode(e.height),time:k.encode(e.time),offset:c.encode(e.offset),num_transactions:c.encode(e.numTransactions)}}}class zr extends a{constructor(){super(...arguments);o(this,"encoder",new Fr);o(this,"decoder",new Rr)}}const X=new zr,vt=new I(new E(X),new g(X));class ne extends x{constructor(e="completer has already been completed"){super(e),Object.freeze(this)}get code(){return He}}const He="CompleterAlreadyCompletedError";class Mr{convert(e){return n(e,"code","message"),C(e,He),new ne(h.decode(e.message))}}class Jr extends L{}class Vr extends a{constructor(){super(...arguments);o(this,"encoder",new Jr);o(this,"decoder",new Mr)}}const Wr=new Vr;w(ne.name,Wr);function J(){return f(!1,"completer is not ready, this should never be reached")}function V(){throw new ne}class Hr{constructor(){o(this,"resolve",J);o(this,"reject",J);o(this,"completed",!1);o(this,"promise");this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s}),f(this.resolve!==J,"resolve should be set"),f(this.reject!==J,"resolve should be set")}get isCompleted(){return this.completed}complete(e){const s=this.resolve,t=this.reject;if(this.completed=!0,this.resolve=V,this.reject=V,e instanceof Promise){e.then(s,t);return}s(e)}completeError(e){this.reject(e),this.completed=!0,this.resolve=V,this.reject=V}}function It(){return new Hr}const ae="NoCompleterFoundForRequestID";class Le extends x{constructor(s,t=`no completer found for request id "${s}"`){super(t);o(this,"requestID");this.requestID=s,Object.freeze(this)}toJSON(){return je.encode(this)}get code(){return ae}}class Lr{convert(e){return n(e,"code","requestID","message"),C(e,ae),new Le(Pe.decode(e.requestID),h.decode(e.message))}}class jr{convert(e){return l(e,Le),{...j.convert(e),requestID:Pe.encode(e.requestID)}}}class qr extends a{constructor(){super(...arguments);o(this,"encoder",new jr);o(this,"decoder",new Lr)}}const je=new qr;w(ae,je);const de="WebWorkerErrorResponse";class Ur extends x{constructor(s,t="error in web worker"){super(t);o(this,"error");this.error=s,Object.freeze(this)}toJSON(){return qe.encode(this)}get code(){return de}}class Qr{convert(e){return n(e,"code","error","message"),C(e,de),new Ur(Ae.decode(e.error),h.decode(e.message))}}class Gr{convert(e){return{...j.convert(e),error:Ae.encode(e.error)}}}class $r extends a{constructor(){super(...arguments);o(this,"encoder",new Gr);o(this,"decoder",new Qr)}}const qe=new $r;w(de,qe);class Ue{constructor(e,s,t){o(this,"r");o(this,"s");o(this,"v");this.r=e,this.s=s,this.v=t}toJSON(){return ie.encode(this)}}class Kr{convert(e){return n(e,"r","s","v"),new Ue(m.decode(e.r),m.decode(e.s),c.decode(e.v))}}class Xr{convert(e){return l(e,Ue),{r:m.encode(e.r),s:m.encode(e.s),v:c.encode(e.v)}}}class Yr extends a{constructor(){super(...arguments);o(this,"encoder",new Xr);o(this,"decoder",new Kr)}}const ie=new Yr;class Qe{constructor(e,s){o(this,"account");o(this,"amount");this.account=e,this.amount=s}toJSON(){return le.encode(this)}}class Zr{convert(e){return n(e,"account","amount"),new Qe(m.decode(e.account),m.decode(e.amount))}}class eo{convert(e){return l(e,Qe),{account:m.encode(e.account),amount:m.encode(e.amount)}}}class ro extends a{constructor(){super(...arguments);o(this,"encoder",new eo);o(this,"decoder",new Zr)}}const le=new ro;class Ge{constructor(e,s,t){o(this,"number");o(this,"timestamp");o(this,"hash");this.number=e,this.timestamp=s,this.hash=t}toJSON(){return Y.encode(this)}}class oo{convert(e){return n(e,"number","timestamp","hash"),new Ge(c.decode(e.number),h.decode(e.timestamp),h.decode(e.hash))}}class so{convert(e){return l(e,Ge),{number:c.encode(e.number),timestamp:h.encode(e.timestamp),hash:h.encode(e.hash)}}}class to extends a{constructor(){super(...arguments);o(this,"encoder",new so);o(this,"decoder",new oo)}}const Y=new to,$e=new De(new Oe(Y),new Re(Y));class Ke{constructor(e){o(this,"bytes");this.bytes=e}toJSON(){return he.encode(this)}}class co{convert(e){return n(e,"bytes"),new Ke(Fe.decode(e.bytes))}}class no{convert(e){return l(e,Ke),{bytes:Fe.encode(e.bytes)}}}class ao extends a{constructor(){super(...arguments);o(this,"encoder",new no);o(this,"decoder",new co)}}const he=new ao;class Xe{constructor(e,s,t,d,u,b,S,y,B,T){o(this,"height");o(this,"timestamp");o(this,"l1_head");o(this,"l1_finalized");o(this,"payload_commitment");o(this,"ns_table");o(this,"block_merkle_root");o(this,"fee_merkle_root");o(this,"builder_signature");o(this,"fee_info");this.height=e,this.timestamp=s,this.l1_head=t,this.l1_finalized=d,this.payload_commitment=u,this.ns_table=b,this.block_merkle_root=S,this.fee_merkle_root=y,this.builder_signature=B,this.fee_info=T}toJSON(){return O.encode(this)}}class io{convert(e){return n(e,"height","timestamp","l1_head","l1_finalized","payload_commitment","ns_table","block_merkle_root","fee_merkle_root","builder_signature","fee_info"),new Xe(c.decode(e.height),c.decode(e.timestamp),c.decode(e.l1_head),$e.decode(e.l1_finalized),p.decode(e.payload_commitment),he.decode(e.ns_table),i.decode(e.block_merkle_root),i.decode(e.fee_merkle_root),ie.decode(e.builder_signature),le.decode(e.fee_info))}}class lo{convert(e){return l(e,Xe),{height:c.encode(e.height),timestamp:c.encode(e.timestamp),l1_head:c.encode(e.l1_head),l1_finalized:$e.encode(e.l1_finalized),payload_commitment:p.encode(e.payload_commitment),ns_table:he.encode(e.ns_table),block_merkle_root:i.encode(e.block_merkle_root),fee_merkle_root:i.encode(e.fee_merkle_root),builder_signature:ie.encode(e.builder_signature),fee_info:le.encode(e.fee_info)}}}class ho extends a{constructor(){super(...arguments);o(this,"encoder",new lo);o(this,"decoder",new io)}}const O=new ho;class Ye{constructor(e,s){o(this,"vm");o(this,"payload");this.vm=e,this.payload=s}toJSON(){return P.encode(this)}}class uo{convert(e){return n(e,"vm","payload"),new Ye(c.decode(e.vm),p.decode(e.payload))}}class mo{convert(e){return l(e,Ye),{vm:c.encode(e.vm),payload:p.encode(e.payload)}}}class po extends a{constructor(){super(...arguments);o(this,"encoder",new mo);o(this,"decoder",new uo)}}const P=new po,Et=new I(new E(P),new g(P));class Ze{constructor(e,s,t,d,u){o(this,"header");o(this,"hash");o(this,"size");o(this,"num_transactions");o(this,"proposer_id");this.header=e,this.hash=s,this.size=t,this.num_transactions=d,this.proposer_id=u}toJSON(){return Z.encode(this)}}class fo{convert(e){return n(e,"header","hash","size","num_transactions","proposer_id"),new Ze(O.decode(e.header),i.decode(e.hash),c.decode(e.size),c.decode(e.num_transactions),m.decode(e.proposer_id))}}class wo{convert(e){return l(e,Ze),{header:O.encode(e.header),hash:i.encode(e.hash),size:c.encode(e.size),num_transactions:c.encode(e.num_transactions),proposer_id:m.encode(e.proposer_id)}}}class Co extends a{constructor(){super(...arguments);o(this,"encoder",new wo);o(this,"decoder",new fo)}}const Z=new Co,gt=new I(new E(Z),new g(Z));class er{constructor(e,s,t,d){o(this,"hash");o(this,"header");o(this,"offset");o(this,"transaction");this.hash=e,this.header=s,this.offset=t,this.transaction=d}toJSON(){return ee.encode(this)}}class bo{convert(e){return n(e,"hash","header","offset","transaction"),new er(i.decode(e.hash),O.decode(e.header),c.decode(e.offset),P.decode(e.transaction))}}class vo{convert(e){return l(e,er),{hash:i.encode(e.hash),header:O.encode(e.header),offset:c.encode(e.offset),transaction:P.encode(e.transaction)}}}class Io extends a{constructor(){super(...arguments);o(this,"encoder",new vo);o(this,"decoder",new bo)}}const ee=new Io,xt=new I(new E(ee),new g(ee));class rr{constructor(e,s){o(this,"width");o(this,"index");this.width=e,this.index=s}toJSON(){return ue.encode(this)}}class Eo{convert(e){return n(e,"width","index"),new rr(c.decode(e.width),c.decode(e.index))}}class go{convert(e){return l(e,rr),{width:c.encode(e.width),index:c.encode(e.index)}}}class xo extends a{constructor(){super(...arguments);o(this,"encoder",new go);o(this,"decoder",new Eo)}}const ue=new xo;class A{static get lsb0(){return So}static get msb0(){return Bo}valueOf(){return this.toString()}toJSON(){return this.toString()}}const or="bitvec::order::Lsb0",sr="bitvec::order::Msb0";class ko extends A{toString(){return or}}const So=new ko;class yo extends A{toString(){return sr}}const Bo=new yo;class To{convert(e){if(typeof e!="string")throw new N(typeof e,"string");switch(e){case or:return A.lsb0;case sr:return A.msb0;default:throw new N(e,"CappuccinoAPIBitVecOrder")}}}class _o{convert(e){return e.toString()}}class No extends a{constructor(){super(...arguments);o(this,"encoder",new _o);o(this,"decoder",new To)}}const tr=new No;class cr{constructor(e,s,t,d){o(this,"order");o(this,"head");o(this,"bits");o(this,"data");this.order=e,this.head=s,this.bits=t,this.data=d}getBitVecIndexIterable(){return this.order===A.lsb0?new Fo(this.head.width,this.bits):new Mo(this.head.width,this.bits)}[Symbol.iterator](){const e=this.getBitVecIndexIterable();return Br(e,s=>Oo(this.data,s))[Symbol.iterator]()}toJSON(){return D.encode(this)}}class Po{convert(e){return n(e,"order","head","bits","data"),new cr(tr.decode(e.order),ue.decode(e.head),c.decode(e.bits),p.decode(e.data))}}class Ao{convert(e){return l(e,cr),{order:tr.encode(e.order),head:ue.encode(e.head),bits:c.encode(e.bits),data:p.encode(e.data)}}}class Do extends a{constructor(){super(...arguments);o(this,"encoder",new Ao);o(this,"decoder",new Po)}}const D=new Do,kt=new I(new E(D),new g(D));function Oo(r,e){return(r[e.bucket]>>e.bitOffset&1)===1}class nr{constructor(e,s){o(this,"bucket");o(this,"bitOffset");this.bucket=e,this.bitOffset=s}}function ar(r){switch(f(r===8||r===16||r===32,"bit width should be a power of two that is supported"),r){case 8:return 3;case 16:return 4;case 32:return 5;default:throw new yr}}class Ro{constructor(e,s){o(this,"totalBits");o(this,"bitWidthMask");o(this,"bitWidthShift");o(this,"offset",0);this.totalBits=s;const t=ar(e);this.bitWidthMask=e-1,this.bitWidthShift=t}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,s=this.offset&this.bitWidthMask;return this.offset+=1,{done:!1,value:new nr(e,s)}}}class Fo{constructor(e,s){o(this,"bitWidth");o(this,"totalBits");this.bitWidth=e,this.totalBits=s}[Symbol.iterator](){return new Ro(this.bitWidth,this.totalBits)}}class zo{constructor(e,s){o(this,"bitWidth");o(this,"totalBits");o(this,"bitWidthMask");o(this,"bitWidthShift");o(this,"offset",0);this.bitWidth=e,this.totalBits=s;const t=ar(e);this.bitWidthMask=e-1,this.bitWidthShift=t}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,s=this.bitWidth-1-(this.offset&this.bitWidthMask);return this.offset+=1,{done:!1,value:new nr(e,s)}}}class Mo{constructor(e,s){o(this,"bitWidth");o(this,"totalBits");this.bitWidth=e,this.totalBits=s}[Symbol.iterator](){return new zo(this.bitWidth,this.totalBits)}}class dr{constructor(e,s){o(this,"signature");o(this,"bitvec");this.signature=e,this.bitvec=s}toJSON(){return re.encode(this)}}class Jo{convert(e){if(!Sr(e)||e.length!==2)throw new N(typeof e,"Array");return new dr(i.decode(e[0]),D.decode(e[1]))}}class Vo{convert(e){return l(e,dr),[i.encode(e.signature),D.encode(e.bitvec)]}}class Wo extends a{constructor(){super(...arguments);o(this,"encoder",new Vo);o(this,"decoder",new Jo)}}const re=new Wo,St=new De(new Oe(re),new Re(re));class R{}class me extends R{toJSON(){return pe.encode(this)}}class Ho{convert(e){if(!te(e)||e!=="Empty")throw new ce;return new me}}class Lo{convert(e){return l(e,me),"Empty"}}class jo extends a{constructor(){super(...arguments);o(this,"encoder",new Lo);o(this,"decoder",new Ho)}}const pe=new jo;class fe extends R{constructor(s,t,d){super();o(this,"value");o(this,"pos");o(this,"elem");this.value=s,this.pos=t,this.elem=d}toJSON(){return we.encode(this)}}class qo{convert(e){n(e,"Leaf");const s=e.Leaf;return n(s,"value","pos","elem"),new fe(i.decode(s.value),i.decode(s.pos),i.decode(s.elem))}}class Uo{convert(e){return l(e,fe),{Leaf:{value:i.encode(e.value),pos:i.encode(e.pos),elem:i.encode(e.elem)}}}}class Qo extends H{constructor(){super(...arguments);o(this,"encoder",new Uo);o(this,"decoder",new qo)}}const we=new Qo;class Ce extends R{constructor(s){super();o(this,"value");this.value=s}toJSON(){return be.encode(this)}}class Go{convert(e){n(e,"ForgettenSubtree");const s=e.ForgettenSubtree;return n(s,"value"),new Ce(i.decode(s.value))}}class $o{convert(e){return l(e,Ce),{ForgettenSubtree:{value:i.encode(e.value)}}}}class Ko extends H{constructor(){super(...arguments);o(this,"encoder",new $o);o(this,"decoder",new Go)}}const be=new Ko;class ve extends R{constructor(s,t){super();o(this,"value");o(this,"children");this.value=s,this.children=t}toJSON(){return Ie.encode(this)}}class Xo{convert(e){n(e,"Branch");const s=e.Branch;return n(s,"value","children"),new ve(i.decode(s.value),ir.decode(s.children))}}class Yo{convert(e){return l(e,ve),{Branch:{value:i.encode(e.value),children:ir.encode(e.children)}}}}class Zo extends a{constructor(){super(...arguments);o(this,"encoder",new Yo);o(this,"decoder",new Xo)}}const Ie=new Zo;class es{convert(e){if(G(e,"Leaf",$))return we.decoder.convert(e);if(G(e,"Branch",$))return Ie.decoder.convert(e);if(G(e,"ForgettenSubtree",$))return be.decoder.convert(e);if(te(e))return pe.decoder.convert(e);throw new ce}}class rs{convert(e){if(l(e,R),e instanceof fe)return we.encode(e);if(e instanceof ve)return Ie.encode(e);if(e instanceof Ce)return be.encode(e);if(e instanceof me)return pe.encode(e);throw new ce}}class os extends a{constructor(){super(...arguments);o(this,"encoder",new rs);o(this,"decoder",new es)}}const Ne=new os,ir=new I(new E(Ne),new g(Ne));class lr{constructor(e,s,t,d,u,b,S,y){o(this,"hash");o(this,"height");o(this,"time");o(this,"numTransactions");o(this,"proposerID");o(this,"feeRecipient");o(this,"size");o(this,"blockReward");this.hash=e,this.height=s,this.time=t,this.numTransactions=d,this.proposerID=u,this.feeRecipient=b,this.size=S,this.blockReward=y}toJSON(){return oe.encode(this)}}class ss{convert(e){return n(e,"hash","height","time","num_transactions","proposer_id","fee_recipient","size","block_reward"),new lr(i.decode(e.hash),c.decode(e.height),k.decode(e.time),c.decode(e.num_transactions),m.decode(e.proposer_id),m.decode(e.fee_recipient),c.decode(e.size),Me.decode(e.block_reward))}}class ts{convert(e){return l(e,lr),{hash:i.encode(e.hash),height:c.encode(e.height),time:k.encode(e.time),num_transactions:c.encode(e.numTransactions),proposer_id:m.encode(e.proposerID),fee_recipient:m.encode(e.feeRecipient),size:c.encode(e.size),block_reward:Me.encode(e.blockReward)}}}class cs extends H{constructor(){super(...arguments);o(this,"encoder",new ts);o(this,"decoder",new ss)}}const oe=new cs,yt=new I(new E(oe),new g(oe));function W(r){return r!==null}function ns(r,e){return r.blockHeights-e.blockHeights}class hr{constructor(e,s,t,d){o(this,"blockTime");o(this,"blockSize");o(this,"blockTransactions");o(this,"blockHeights");const u=[],b=d.length;for(let v=0;v<b;v++)u.push({blockTime:e[v],blockSize:s[v],blockTransactions:t[v],blockHeights:d[v]});u.sort(ns);const S=u[0].blockHeights,y=u[b-1].blockHeights,B=[],T=[],Q=[],z=[];for(let v=S,_e=0;v<=y;v++){const _=u[_e];if(_.blockHeights!==v){B.push(null),T.push(null),Q.push(null),z.push(null);continue}B.push(_.blockTime),T.push(_.blockSize),Q.push(_.blockTransactions),z.push(_.blockHeights),_e++}const M=Math.max(0,z.length-50);this.blockTime=B.slice(M),this.blockSize=T.slice(M),this.blockTransactions=Q.slice(M),this.blockHeights=z.slice(M)}toJSON(){return ls.encode(this)}}class as{convert(e){return n(e,"block_time","block_size","block_transactions","block_heights"),new hr(p.decode(e.block_time),p.decode(e.block_size),p.decode(e.block_transactions),p.decode(e.block_heights))}}class ds{convert(e){return l(e,hr),{block_time:p.encode(e.blockTime.filter(W)),block_size:p.encode(e.blockSize.filter(W)),block_transactions:p.encode(e.blockTransactions.filter(W)),block_heights:p.encode(e.blockHeights.filter(W))}}}class is extends a{constructor(){super(...arguments);o(this,"encoder",new ds);o(this,"decoder",new as)}}const ls=new is,ur=c;class mr{constructor(e,s){o(this,"namespace");o(this,"payload");this.namespace=e,this.payload=s}toJSON(){return se.encode(this)}}class hs{convert(e){return n(e,"namespace","payload"),new mr(ur.decode(e.namespace),ze.decode(e.payload))}}class us{convert(e){return l(e,mr),{namespace:ur.encode(e.namespace),payload:ze.encode(e.payload)}}}class ms extends a{constructor(){super(...arguments);o(this,"encoder",new us);o(this,"decoder",new hs)}}const se=new ms,Bt=new I(new E(se),new g(se));class F extends x{constructor(s,t,d){super(d);o(this,"response");o(this,"status");this.status=s,this.response=t}toJSON(){return pr.convert(this)}}class q{convert(e){return l(e,F),{...j.convert(e),status:e.status}}}const pr=new q,Ee="BadResponseClientError";class ps extends F{constructor(e,s,t="bad server response: client error"){super(e,s,t),Object.freeze(this)}get code(){return Ee}toJSON(){return fr.encode(this)}}class fs{convert(e){return n(e,"code","message","status"),C(e,Ee),new ps(Number(e.status),null,h.decode(e.message))}}class ws extends q{}class Cs extends a{constructor(){super(...arguments);o(this,"encoder",new ws);o(this,"decoder",new fs)}}const fr=new Cs;w(Ee,fr);const ge="BadResponseError";class bs extends F{constructor(e,s,t="bad server response"){super(e,s,t),Object.freeze(this)}get code(){return ge}toJSON(){return wr.encode(this)}}class vs{convert(e){return n(e,"code","message","status"),C(e,ge),new bs(Number(e.status),null,h.decode(e.message))}}class Is extends q{}class Es extends a{constructor(){super(...arguments);o(this,"encoder",new Is);o(this,"decoder",new vs)}}const wr=new Es;w(ge,wr);class gs extends F{constructor(e,s,t="bad server response: server error"){super(e,s,t),Object.freeze(this)}get code(){return xe}}const xe="BadResponseServerError";class xs{convert(e){return n(e,"code","message","status"),C(e,xe),new gs(Number(e.status),null,h.decode(e.message))}}class ks extends q{}class Ss extends a{constructor(){super(...arguments);o(this,"encoder",new ks);o(this,"decoder",new xs)}}const ys=new Ss;w(xe,ys);const ke="ChannelClosedError";class Bs extends x{constructor(e="channel closed"){super(e),Object.freeze(this)}get code(){return ke}}class Ts{convert(e){return n(e,"code","message"),C(e,ke),new Bs(h.decode(e.message))}}class _s extends L{}class Ns extends a{constructor(){super(...arguments);o(this,"encoder",new _s);o(this,"decoder",new Ts)}}const Ps=new Ns;w(ke,Ps);const Se="InvalidStringValueError";class Cr extends x{constructor(s,t,d=`invalid string value: have "${s}", want "${t}"`){super(d);o(this,"have");o(this,"want");this.have=s,this.want=t,Object.freeze(this)}toJSON(){return br.encode(this)}get code(){return Se}}class As{convert(e){return n(e,"code","have","want","message"),C(e,Se),new Cr(h.decode(e.have),h.decode(e.want),h.decode(e.message))}}class Ds{convert(e){return l(e,Cr),{...j.convert(e),have:h.encode(e.have),want:h.encode(e.want)}}}class Os extends a{constructor(){super(...arguments);o(this,"encoder",new Ds);o(this,"decoder",new As)}}const br=new Os;w(Se,br);const ye="NoURLProvidedError";class Rs extends x{constructor(e="no url provided"){super(e),Object.freeze(this)}get code(){return ye}}class Fs{convert(e){return n(e,"code","message"),C(e,ye),new Rs(h.decode(e.message))}}class zs extends L{}class Ms extends a{constructor(){super(...arguments);o(this,"encoder",new zs);o(this,"decoder",new Fs)}}const Js=new Ms;w(ye,Js);const vr="ResponseContentTypeIsNotApplicationJSONError";class U extends F{constructor(s,t,d,u="response content type is not application/json"){super(t,d,u);o(this,"haveHeaderType");this.haveHeaderType=s,Object.freeze(this)}static fromResponse(s,t){return new U(s.headers.get("content-type")??"undefined",s.status,s,t)}toJSON(){return Ir.encode(this)}get code(){return vr}}class Vs{convert(e){return n(e,"code","status","have","want","message"),C(e,vr),new U(h.decode(e.code),c.decode(e.status),null,h.decode(e.message))}}class Ws{convert(e){return{...pr.convert(e),have:h.encode(e.haveHeaderType),want:h.encode("application/json")}}}class Hs extends a{constructor(){super(...arguments);o(this,"encoder",new Ws);o(this,"decoder",new Vs)}}const Ir=new Hs;w(U.name,Ir);var Be=(r=>(r[r.success=0]="success",r[r.full=1]="full",r[r.failed=2]="failed",r))(Be||{});class Ls{getFromEmpty(){}}class js{getFromEmpty(){return null}}class qs{getFromEmpty(){throw new Tr}}const Us={returnNull:new js,returnUndefined:new Ls,throwMissingElement:new qs};class Qs{constructor(e){o(this,"maxSize");f(!Number.isNaN(e),"maxSize must not be NaN"),f(Number.isInteger(e),"maxSize must be an integer"),f(e>0,"maxSize must be greater than 0"),this.maxSize=e}nextIndex(e){return f(e>=0,"index must be greater than or equal to 0"),(e+1)%this.maxSize}}class Gs{constructor(e){o(this,"preComputedSizeMinus1");f(!Number.isNaN(e),"maxSize must not be NaN"),f(Number.isInteger(e),"maxSize must be an integer"),f(e>0,"maxSize must be greater than 0"),f(Er(e),"maxSize must be a power of two"),this.preComputedSizeMinus1=e-1}nextIndex(e){return f(e>=0,"index must be greater than or equal to 0"),e+1&this.preComputedSizeMinus1}}function Er(r){return(r&r-1)===0}const Te="BufferFullError";class gr extends x{constructor(e="buffer full"){super(e),Object.freeze(this)}get code(){return Te}}class $s{convert(e){return n(e,"code","message"),C(e,Te),new gr(h.decode(e.message))}}class Ks extends L{}class Xs extends a{constructor(){super(...arguments);o(this,"encoder",new Ks);o(this,"decoder",new $s)}}const Ys=new Xs;w(Te,Ys);class Zs{putToFull(e,s){return e.get(),e.put(s)}}class et{putToFull(){return Be.full}}class rt{putToFull(){throw new gr}}const ot={overwriteOldest:new Zs,returnFull:new et,throw:new rt};function st(r){return Er(r)?new Gs(r):new Qs(r)}class tt{constructor(e,s,t){o(this,"readIndex",0);o(this,"writeIndex",0);o(this,"buffer");o(this,"nextIndex");o(this,"getOnEmpty");o(this,"putOnFull");f(!Number.isNaN(e),"maxSize must not be NaN"),this.buffer=new Array(e),this.nextIndex=st(e),this.getOnEmpty=s,this.putOnFull=t}get maxSize(){return this.buffer.length}get length(){return this.writeIndex<this.readIndex?this.writeIndex+this.maxSize-this.readIndex:this.writeIndex-this.readIndex}put(e){const s=this.nextIndex.nextIndex(this.writeIndex);return s===this.readIndex?this.putOnFull.putToFull(this,e):(this.buffer[this.writeIndex]=e,this.writeIndex=s,Be.success)}get(){if(this.readIndex===this.writeIndex)return this.getOnEmpty.getFromEmpty(this);const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),e}[Symbol.iterator](){return new ct(this)}immutableIterable(){return{[Symbol.iterator]:()=>this.immutableIterator()}}immutableIterator(){return new nt(this.readIndex,this.writeIndex,this.buffer,this.nextIndex)}}class ct{constructor(e){o(this,"buffer");this.buffer=e}next(){const e=this.buffer.get();return e==null?{value:void 0,done:!0}:{value:e,done:!1}}}class nt{constructor(e,s,t,d){o(this,"readIndex");o(this,"writeIndex");o(this,"buffer");o(this,"nextIndex");this.readIndex=e,this.writeIndex=s,this.buffer=t,this.nextIndex=d}next(){if(this.readIndex===this.writeIndex)return{value:void 0,done:!0};const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),{value:e,done:!1}}}function Tt(r=32,e=Us.returnUndefined,s=ot.overwriteOldest){return new tt(r,e,s)}export{lr as A,mr as B,Je as C,gs as D,ps as E,bs as F,ot as G,Us as H,Bs as I,yt as J,D as K,kt as L,cr as M,Le as N,A as O,rr as P,U as R,Ur as W,We as a,vt as b,bt as c,Et as d,O as e,P as f,oe as g,ls as h,Bt as i,It as j,gt as k,ir as l,xt as m,St as n,Ye as o,ve as p,Xe as q,k as r,Ge as s,Ke as t,Ue as u,Qe as v,Ze as w,er as x,Tt as y,hr as z};
