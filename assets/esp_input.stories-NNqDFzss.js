import{R as y,j as i}from"./iframe-CoIItnDg.js";import"./ByteSizeText-1CR_PcDC.js";import"./VariableByteSizeText-BUAmCxtD.js";import"./CopyHex-DCdX-JYu.js";import"./DateTimeText-BHh4HfXD.js";import"./FullHexText-DFYP_GOS.js";import"./HexText-C1VrTX7i.js";import{M}from"./MoneyText-C6EXEoJl.js";import"./NumberText-CnoQTjHV.js";import"./PercentageText-CcsSyWK7.js";import"./RelativeTimeSinceDateText-B4yCg0bz.js";import"./TaggedBase64Text-CdWAXBu7.js";import"./Text-BU7JBOLk.js";import"./TimeText-Bzp_vd_g.js";import{M as g,E as d}from"./monetary_value-B0ntaWrJ.js";import{I as P}from"./Container-B2MlAQhk.js";import"./LoadingProvider-D3gToPRF.js";import"./DateTimeFormattersProvider-NK-Emwp_.js";import"./LocaleProvider-DjGseKT_.js";import"./PagePathProvider-Cds9E7Bf.js";import"./NowProvider-CYvyuQeG.js";import{C as v}from"./NumberFormattersProvider-DRR430ge.js";import"./PathResolverProvider-DDmd5dVN.js";import{U as D}from"./UnimplementedError-CdIPpzwU.js";import{T as x,a as C,b as w}from"./text-CdKur0Xj.js";import"./preload-helper-PPVm8Dsz.js";import"./base64-KHURY7_E.js";import"./assert-BI051aL8.js";import"./string-IJEBdhwx.js";import"./CopyButton-CsrwStrT.js";import"./higher_order-CRWKtA4N.js";import"./CheckCircleFilled-C3pP6zIZ.js";import"./SVGIconBase-CsFpHk-L.js";import"./Copy-BWOcw-FF.js";/* empty css               */import"./array_buffer-D67g0v0K.js";import"./functional-g5wG3Azh.js";import"./MissingElementError-CbV3pOXz.js";function _(t){return t.type==="change"}function I(t,e){e=e.replace(/^[^\d]+/g,""),e=e.replace(/[^\d]+$/g,"");const a=t.formatToParts(.5).find(p=>p.type==="decimal")?.value??".",o=e.split(a),r=BigInt(o[0].replace(/\D/g,""))*d.significantDigitsMultiplier;if(o.length<2)return g.ESP(r);const s=o[1].replace(/\D/g,"").slice(0,d.significantDigits),c=10n**BigInt(s.length);if(c>d.significantDigitsMultiplier)throw new D("we somehow have more significant digits than the currency supports");const n=BigInt(s)*(d.significantDigitsMultiplier/c);return g.ESP(r+n)}function T(t){return t.value%t.currency.significantDigitsMultiplier===0n?t.value/t.currency.significantDigitsMultiplier:Number(t.value)/Number(t.currency.significantDigitsMultiplier)}const h=t=>{const e=y.useContext(v).ESP,{value:l,onChange:a,...o}=t,r=l??g.ESP(0n),s=T(r),c=new x(e.format(s)),[n,p]=y.useState({rawValue:c,transformed:c,money:r});return n.money.value!==r.value&&p({rawValue:new x(e.format(s)),transformed:new x(e.format(s)),money:r}),i.jsx(C,{...o,value:n.rawValue,onKeyDown:()=>{},onChange:(m,u)=>{if(_(m)){const S=I(e,u.text),V={rawValue:u,transformed:u.copyWith({text:e.format(S.value/S.currency.significantDigitsMultiplier)}),money:S};p(V),a&&a(m,V.money);return}p({...n,rawValue:u,transformed:u})},onBlur:()=>{const m=n.transformed.copyWith({selection:w.collapsed(-1)});p({...n,rawValue:m,transformed:m,money:I(e,m.text)})}})};try{h.displayName="ESPInput",h.__docgenInfo={description:"",displayName:"ESPInput",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"MonetaryValue | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((event: ChangeEvent<HTMLInputElement> | SyntheticEvent<HTMLInputElement, Event>, value: MonetaryValue) => void)"}}}}}catch{}const j=t=>{const{initialValue:e=null}=t,[l,a]=y.useState(e);return i.jsxs(i.Fragment,{children:[i.jsx(P,{children:i.jsx(h,{id:"stake-amount",value:l,onChange:(o,r)=>{a(r)}})}),i.jsx("br",{}),i.jsx(M,{money:l??g.ESP(0n)})]})},Et={title:"Components/HID/Inputs/ESPInput",component:j},f={args:{}},E={args:{initialValue:g.ESP(100000000000000000000000n)}};f.parameters={...f.parameters,docs:{...f.parameters?.docs,source:{originalSource:`{
  args: {}
}`,...f.parameters?.docs?.source}}};E.parameters={...E.parameters,docs:{...E.parameters?.docs,source:{originalSource:`{
  args: {
    initialValue: MonetaryValue.ESP(100000000000000000000000n)
  }
}`,...E.parameters?.docs?.source}}};const St=["ESPInput","EdgeCase"];export{f as ESPInput,E as EdgeCase,St as __namedExportsOrder,Et as default};
