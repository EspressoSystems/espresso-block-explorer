var et=Object.defineProperty;var rt=(r,e,t)=>e in r?et(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var o=(r,e,t)=>rt(r,typeof e!="symbol"?e+"":e,t);import{j as gr}from"./jsx-runtime-BlAj40OV.js";import{F as tt}from"./FetchError-C1VXamgN.js";import{g as K,h as D,i as ot,j as $,t as B,k as P,l as A,n as vr,r as ge,o as q,p as Rr,m as T,q as F,s as st,v as de,w as ct,U as f,x as dr,y as pe,z as ue,A as nt,B as at,C as he,F as it}from"./LoadingProvider-BbWjDjJb.js";import{n as a,b as Er}from"./base64-pX9cPfQ1.js";import{r as Sr,s as Z,t as kr,u as xr,v as br,w as ve,x as Tr,y as lt,z as dt,A as pt,D as ut,E as ht,F as mt,G as Ar,j as ee,H as L,I as O,i as _r,J as Dr,K as Br,b,p as wt,q as ft,C as Ct,a as Ir,L as yt,W as gt,c as vt,N as pr,M as Rt,O as ur,B as Et,d as St,P as kt,R as xt}from"./Completer-4eUr9S2j.js";import{T as w,a as p,j as d,C as v,y as k,z as x,s as _,t as W,n as bt,I as Tt,B as hr}from"./string-CcoL8872.js";import{I as N}from"./monetary_value-B2EGCn_o.js";import{t as m,T as g}from"./TaggedBase64-D45f0-Ll.js";import{h as qr}from"./array_buffer-B1tGIozn.js";import{b as re}from"./boolean-G714bpgs.js";import{a as y}from"./generateFakeData-u_w3-cMG.js";import{N as At}from"./NotFoundError-C6Rvypd-.js";import"./functional-Bu4SNxPm.js";import{R as _t}from"./index-Cs7sjTYM.js";class Re{constructor(e){o(this,"transaction_nmt");this.transaction_nmt=e}toJSON(){return J.encode(this)}}class Dt{convert(e){return p(e,"transaction_nmt"),new Re(Sr.decode(e.transaction_nmt))}}class Bt{convert(e){return d(e,Re),{transaction_nmt:Sr.encode(e.transaction_nmt)}}}class It extends w{constructor(){super(...arguments);o(this,"encoder",new Bt);o(this,"decoder",new Dt)}}const J=new It;class Ee{constructor(e,t,s,n,c){o(this,"header");o(this,"payload");o(this,"hash");o(this,"size");o(this,"numTransactions");this.header=e,this.payload=t,this.hash=s,this.size=n,this.numTransactions=c}toJSON(){return Se.encode(this)}}class qt{convert(e){return p(e,"header","payload","hash","size","num_transactions"),new Ee(Z.decode(e.header),J.decode(e.payload),m.decode(e.hash),a.decode(e.size),a.decode(e.num_transactions))}}class Pt{convert(e){return d(e,Ee),{header:Z.encode(e.header),payload:J.encode(e.payload),hash:m.encode(e.hash),size:a.encode(e.size),num_transactions:a.encode(e.numTransactions)}}}class Gt extends v{constructor(){super(...arguments);o(this,"encoder",new Pt);o(this,"decoder",new qt)}}const Se=new Gt;class Y{constructor(e){o(this,"leaf_commit");this.leaf_commit=e}toJSON(){return ke.encode(this)}}class Lt{convert(e){return p(e,"leaf_commit"),new Y(m.decode(e.leaf_commit))}}class Ot{convert(e){return d(e,Y),{leaf_commit:m.encode(e.leaf_commit)}}}class Wt extends w{constructor(){super(...arguments);o(this,"encoder",new Ot);o(this,"decoder",new Lt)}}const ke=new Wt;class V{constructor(e,t,s,n,c,i){o(this,"data");o(this,"vote_commitment");o(this,"view_number");o(this,"signatures");o(this,"is_genesis");o(this,"_pd");this.data=e,this.vote_commitment=t,this.view_number=s,this.signatures=n,this.is_genesis=c,this._pd=i}toJSON(){return Q.encode(this)}}class Ut{convert(e){return p(e,"data","vote_commitment","view_number","signatures","is_genesis","_pd"),new V(ke.decode(e.data),m.decode(e.vote_commitment),a.decode(e.view_number),kr.decode(e.signatures),re.decode(e.is_genesis),null)}}class Ft{convert(e){return d(e,V),{data:ke.encode(e.data),vote_commitment:m.encode(e.vote_commitment),view_number:a.encode(e.view_number),signatures:kr.encode(e.signatures),is_genesis:re.encode(e.is_genesis),_pd:null}}}class Ht extends w{constructor(){super(...arguments);o(this,"encoder",new Ft);o(this,"decoder",new Ut)}}const Q=new Ht;class xe{constructor(e,t,s,n,c,i,l,h){o(this,"view_number");o(this,"justify_qc");o(this,"parent_commitment");o(this,"block_header");o(this,"block_payload");o(this,"rejected");o(this,"timestamp");o(this,"proposer_id");this.view_number=e,this.justify_qc=t,this.parent_commitment=s,this.block_header=n,this.block_payload=c,this.rejected=i,this.timestamp=l,this.proposer_id=h}toJSON(){return be.encode(this)}}class Nt{convert(e){return p(e,"view_number","justify_qc","parent_commitment","block_header","block_payload","rejected","timestamp","proposer_id"),new xe(a.decode(e.view_number),Q.decode(e.justify_qc),m.decode(e.parent_commitment),Z.decode(e.block_header),J.decode(e.block_payload),Er.decode(e.rejected),a.decode(e.timestamp),qr.decode(e.proposer_id))}}class Jt{convert(e){return d(e,xe),{view_number:a.encode(e.view_number),justify_qc:Q.encode(e.justify_qc),parent_commitment:m.encode(e.parent_commitment),block_header:Z.encode(e.block_header),block_payload:J.encode(e.block_payload),rejected:Er.encode(e.rejected),timestamp:a.encode(e.timestamp),proposer_id:qr.encode(e.proposer_id)}}}class Qt extends w{constructor(){super(...arguments);o(this,"encoder",new Jt);o(this,"decoder",new Nt)}}const be=new Qt;class Te{constructor(e,t){o(this,"leaf");o(this,"qc");this.leaf=e,this.qc=t}toJSON(){return Ae.encode(this)}}class Mt{convert(e){return p(e,"leaf","qc"),new Te(be.decode(e.leaf),Q.decode(e.qc))}}class jt{convert(e){return d(e,Te),{leaf:be.encode(e.leaf),qc:Q.encode(e.qc)}}}class zt extends w{constructor(){super(...arguments);o(this,"encoder",new jt);o(this,"decoder",new Mt)}}const Ae=new zt;class _e{constructor(e,t){o(this,"pos");o(this,"proof");this.pos=e,this.proof=t}toJSON(){return De.encode(this)}}class $t{convert(e){return p(e,"pos","proof"),new _e(m.decode(e.pos),xr.decode(e.proof))}}class Kt{convert(e){return d(e,_e),{pos:m.encode(e.pos),proof:xr.encode(e.proof)}}}class Yt extends w{constructor(){super(...arguments);o(this,"encoder",new Kt);o(this,"decoder",new $t)}}const De=new Yt;class Be{constructor(e,t,s,n,c){o(this,"transaction");o(this,"block_hash");o(this,"proof");o(this,"height");o(this,"hash");this.transaction=e,this.block_hash=t,this.proof=s,this.height=n,this.hash=c}toJSON(){return Ie.encode(this)}}class Vt{convert(e){return p(e,"transaction","block_hash","proof","height","hash"),new Be(br.decoder.convert(e.transaction),m.decode(e.block_hash),De.decoder.convert(e.proof),a.decode(e.height),m.decode(e.hash))}}class Xt{convert(e){return d(e,Be),{transaction:br.encode(e.transaction),block_hash:m.encode(e.block_hash),proof:De.encode(e.proof),height:a.encode(e.height),hash:m.encode(e.hash)}}}class Zt extends w{constructor(){super(...arguments);o(this,"encoder",new Xt);o(this,"decoder",new Vt)}}const Ie=new Zt;function te(r){return new dt(r.height,r.time.valueOf()/1e3,0,new pt(0,"00","00"),[],new ut(new ArrayBuffer(0)),new g("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new g("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new ht(new ArrayBuffer(0),new ArrayBuffer(0),0),new mt(new ArrayBuffer(0),new ArrayBuffer(0)))}async function eo(r){return new Ee(te(r),new Re(await A(T(r.transactions,async e=>new ve(e.tree.namespace,Array.from(new Uint8Array(e.tree.data)))))),new g("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions)}function ro(r){return new Tr(te(r),new g("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions,r.proposer)}function to(r){const e=r.transactions,t=te(r);return T(e,async s=>new Ar(s.hash,t,s.index,new ve(s.tree.namespace,Array.from(new Uint8Array(s.tree.data)))))}async function*oo(r){const e=te(r),t=r.transactions;yield*T(t,async s=>new Be(new ve(s.tree.namespace,Array.from(new Uint8Array(s.tree.data))),new g("BLOCK",new Uint8Array([0,0,0,0]).buffer),new _e(new g("POS",new Uint8Array([0,0,0,0]).buffer),[new lt(new g("EMPTY",new Uint8Array([0,0,0,0]).buffer),[])]),e.height,new g("COMMIT",s.tree.data.slice(0,32))))}class so{async getLeafFromHeight(e){const t=await this.getBlockFromHeight(e);return new Te(new xe(e,new V(new Y(new g("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new g("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null),new g("LEAF",new Uint8Array([0,0,0,0]).buffer),t.header,t.payload,[],t.header.timestamp,t.header.fee_info.account),new V(new Y(new g("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new g("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null))}async getTransactionFromHeightAndOffset(e,t){const s=await K(D(y(),e)),n=oo(s);return await ot($(n,t))}async getBlockSummaries(e,t){const s=D(y(),e),n=B(s,t-e),c=P(n,async i=>ro(i));return await A(c)}async getBlockFromHeight(e){const t=D(y(),e),s=await K(t);return eo(s)}async*streamTransactionSummaries(e){const t=vr(y(),c=>c.height<=e),s=ge(t);yield*q(s,c=>F(to(c)))}async getTransactionSummaryRange(e,t,s){const n=this.streamTransactionSummaries(e),c=D(n,t),i=B(c,s);return await A(i)}async getTransactionSummaryRangeForRollup(e,t,s,n){const c=this.streamTransactionSummaries(t),i=Rr(c,C=>C.transaction.vm===e),l=D(i,s),h=B(l,n);return await A(h)}}const G="latest";class qe{constructor(e,t,s){o(this,"rollups");o(this,"transactions");o(this,"blocks");this.rollups=e,this.transactions=t,this.blocks=s}toJSON(){return Pe.encode(this)}}class co{convert(e){return p(e,"rollups","transactions","blocks"),new qe(a.decode(e.rollups),a.decode(e.transactions),a.decode(e.blocks))}}class no{convert(e){return d(e,qe),{rollups:a.encode(e.rollups),transactions:a.encode(e.transactions),blocks:a.encode(e.blocks)}}}class ao extends w{constructor(){super(...arguments);o(this,"encoder",new no);o(this,"decoder",new co)}}const Pe=new ao;class Ge{constructor(e,t,s,n,c){o(this,"latestBlock");o(this,"genesisOverview");o(this,"latestBlocks");o(this,"latestTransactions");o(this,"histograms");this.latestBlock=e,this.genesisOverview=t,this.latestBlocks=s,this.latestTransactions=n,this.histograms=c}toJSON(){return Le.encode(this)}}class io{convert(e){return p(e,"latest_block","genesis_overview","latest_blocks","latest_transactions","histograms"),new Ge(ee.decode(e.latest_block),Pe.decode(e.genesis_overview),L.decode(e.latest_blocks),O.decode(e.latest_transactions),_r.decode(e.histograms))}}class lo{convert(e){return d(e,Ge),{latest_block:ee.encode(e.latestBlock),genesis_overview:Pe.encode(e.genesisOverview),latest_blocks:L.encode(e.latestBlocks),latest_transactions:O.encode(e.latestTransactions),histograms:_r.encode(e.histograms)}}}class po extends w{constructor(){super(...arguments);o(this,"encoder",new lo);o(this,"decoder",new io)}}const Le=new po;class Oe{constructor(e){o(this,"blockDetail");this.blockDetail=e}toJSON(){return We.encode(this)}}class uo{convert(e){return p(e,"block_detail"),new Oe(ee.decode(e.block_detail))}}class ho{convert(e){return d(e,Oe),{block_detail:ee.encode(e.blockDetail)}}}class mo extends v{constructor(){super(...arguments);o(this,"encoder",new ho);o(this,"decoder",new uo)}}const We=new mo;class Ue{constructor(e){o(this,"blockSummaries");this.blockSummaries=e}toJSON(){return Fe.encode(this)}}class wo{convert(e){return p(e,"block_summaries"),new Ue(L.decode(e.block_summaries))}}class fo{convert(e){return d(e,Ue),{block_summaries:L.encode(e.blockSummaries)}}}class Co extends v{constructor(){super(...arguments);o(this,"encoder",new fo);o(this,"decoder",new wo)}}const Fe=new Co;class He{constructor(e){o(this,"explorerSummary");this.explorerSummary=e}toJSON(){return Ne.encode(this)}}class yo{convert(e){return p(e,"explorer_summary"),new He(Le.decode(e.explorer_summary))}}class go{convert(e){return d(e,He),{explorer_summary:Le.encode(e.explorerSummary)}}}class vo extends w{constructor(){super(...arguments);o(this,"encoder",new go);o(this,"decoder",new yo)}}const Ne=new vo;class Je{constructor(e,t){o(this,"blocks");o(this,"transactions");this.blocks=e,this.transactions=t}toJSON(){return Qe.encode(this)}}class Ro{convert(e){return p(e,"blocks","transactions"),new Je(L.decode(e.blocks),O.decode(e.transactions))}}class Eo{convert(e){return d(e,Je),{blocks:L.encode(e.blocks),transactions:O.encode(e.transactions)}}}class So extends v{constructor(){super(...arguments);o(this,"encoder",new Eo);o(this,"decoder",new Ro)}}const Qe=new So;class Me{constructor(e){o(this,"searchResults");this.searchResults=e}toJSON(){return je.encode(this)}}class ko{convert(e){return p(e,"search_results"),new Me(Qe.decode(e.search_results))}}class xo{convert(e){return d(e,Me),{search_results:Qe.encode(e.searchResults)}}}class bo extends v{constructor(){super(...arguments);o(this,"encoder",new xo);o(this,"decoder",new ko)}}const je=new bo;class ze{static heightAndOffset(e,t){return new M(e,t)}static hash(e){return new j(e)}toJSON(){return Pr.encode(this)}}class To{convert(e){if(d(e,ze),e instanceof M)return{height:a.encode(e.height),offset:a.encode(e.offset)};if(e instanceof j)return{hash:m.encode(e.hash)};throw new N}}class Ao{convert(e){if(k(e,"height",x)&&k(e,"offset",x))return new M(a.decode(e.height),a.decode(e.offset));if(k(e,"hash",x))return new j(m.decode(e.hash));throw new N}}class _o extends w{constructor(){super(...arguments);o(this,"encoder",new To);o(this,"decoder",new Ao)}}const Pr=new _o;class M extends ze{constructor(t,s){super();o(this,"height");o(this,"offset");this.height=t,this.offset=s}}class j extends ze{constructor(t){super();o(this,"hash");this.hash=t}}class $e{constructor(e,t,s,n,c,i,l,h,C){o(this,"hash");o(this,"height");o(this,"blockConfirmed");o(this,"offset");o(this,"numTransactions");o(this,"size");o(this,"time");o(this,"sequencingFees");o(this,"feeDetails");this.hash=e,this.height=t,this.blockConfirmed=s,this.offset=n,this.numTransactions=c,this.size=i,this.time=l,this.sequencingFees=h,this.feeDetails=C}toJSON(){return Ke.encode(this)}}class Do{convert(e){return p(e,"hash","height","block_confirmed","offset","num_transactions","size","time","sequencing_fees","fee_details"),new $e(m.decode(e.hash),a.decode(e.height),re.decode(e.block_confirmed),a.decode(e.offset),a.decode(e.num_transactions),a.decode(e.size),Dr.decode(e.time),[],[])}}class Bo{convert(e){return d(e,$e),{hash:m.encode(e.hash),height:a.encode(e.height),block_confirmed:re.encode(e.blockConfirmed),offset:a.encode(e.offset),num_transactions:a.encode(e.numTransactions),size:a.encode(e.size),time:Dr.encode(e.time),sequencing_fees:[],fee_details:[]}}}class Io extends w{constructor(){super(...arguments);o(this,"encoder",new Bo);o(this,"decoder",new Do)}}const Ke=new Io;class Ye{constructor(e,t){o(this,"details");o(this,"data");this.details=e,this.data=t}toJSON(){return Ve.encode(this)}}class qo{convert(e){return p(e,"details","data"),new Ye(Ke.decode(e.details),Br.decode(e.data))}}class Po{convert(e){return d(e,Ye),{details:Ke.encode(e.details),data:Br.encode(e.data)}}}class Go extends w{constructor(){super(...arguments);o(this,"encoder",new Po);o(this,"decoder",new qo)}}const Ve=new Go;class X{constructor(e){o(this,"transactionDetail");this.transactionDetail=e}toJSON(){return Xe.encode(this)}}class Lo{convert(e){return p(e,"transaction_detail"),new X(Ve.decode(e.transaction_detail))}}class Oo{convert(e){return d(e,X),{transaction_detail:Ve.encode(e.transactionDetail)}}}class Wo extends v{constructor(){super(...arguments);o(this,"encoder",new Oo);o(this,"decoder",new Lo)}}const Xe=new Wo;class oe{constructor(){}static block(e){return new se(e)}static namespace(e){return new ce(e)}static none(){return new er}toJSON(){return Ze.encode(this)}}class Uo{convert(e){return k(e,"block",x)?new se(a.decode(e.block)):k(e,"namespace",x)?new ce(a.decode(e.namespace)):new er}}class Fo{convert(e){if(d(e,oe),e instanceof er)return{};if(e instanceof se)return{block:a.encode(e.block)};if(e instanceof ce)return{namespace:a.encode(e.namespace)};throw new N}}class Ho extends v{constructor(){super(...arguments);o(this,"encoder",new Fo);o(this,"decoder",new Uo)}}const Ze=new Ho;class er extends oe{constructor(){super()}convertURL(e){return e}}class se extends oe{constructor(t){super();o(this,"block");this.block=t}convertURL(t){return new URL(`${t.pathname}/block/${this.block}`,t)}}class ce extends oe{constructor(t){super();o(this,"namespace");this.namespace=t}convertURL(t){return new URL(`${t.pathname}/namespace/${this.namespace}`,t)}}class H{constructor(e){o(this,"transactionSummaries");this.transactionSummaries=e}toJSON(){return rr.encode(this)}}class No{convert(e){return p(e,"transaction_summaries"),new H(O.decode(e.transaction_summaries))}}class Jo{convert(e){return d(e,H),{transaction_summaries:O.encode(e.transactionSummaries)}}}class Qo extends v{constructor(){super(...arguments);o(this,"encoder",new Jo);o(this,"decoder",new No)}}const rr=new Qo;class ne{constructor(e){o(this,"limit");this.limit=e}static latest(e){return new ae(e)}static heightAndOffset(e,t,s){return new ie(e,t,s)}static hash(e,t){return new le(e,t)}toJSON(){return tr.encode(this)}}class Mo{convert(e){return p(e,"limit"),k(e,"height",x)&&k(e,"offset",x)?new ie(a.decode(e.height),a.decode(e.offset),a.decode(e.limit)):k(e,"hash",x)?new le(m.decode(e.hash),a.decode(e.limit)):new ae(a.decode(e.limit))}}class jo{convert(e){if(d(e,ne),e instanceof ae)return{limit:a.encode(e.limit)};if(e instanceof ie)return{height:a.encode(e.height),offset:a.encode(e.offset),limit:a.encode(e.limit)};if(e instanceof le)return{hash:m.encode(e.hash),limit:a.encode(e.limit)};throw new N}}class zo extends v{constructor(){super(...arguments);o(this,"encoder",new jo);o(this,"decoder",new Mo)}}const tr=new zo;class ae extends ne{constructor(e){super(e)}convertURL(e){return new URL(`transactions/latest/${this.limit}`,e)}}class ie extends ne{constructor(t,s,n){super(n);o(this,"height");o(this,"offset");this.height=t,this.offset=s}convertURL(t){return new URL(`transactions/from/${this.height}/${this.offset}/${this.limit}`,t)}}class le extends ne{constructor(t,s){super(s);o(this,"hash");this.hash=t}convertURL(t){return new URL(`transactions/hash/${this.hash}/${this.limit}`,t)}}function mr(r){return new ft(r.hash,r.height,r.time,r.numTransactions,r.proposer,r.proposer,r.size,r.fees)}function me(r){return new Ct(r.hash,r.height,r.proposer,r.numTransactions,r.size,r.time)}function wr(r,e){return new Ye(new $e(e.hash,e.block,!0,e.index,r.numTransactions,e.size,e.time,[],[]),[new yt(e.tree.namespace,e.tree.data)])}function z(r,e){return new Ir(e.hash,[e.tree.namespace],e.block,e.time,e.index,r.numTransactions)}class $o{async getBlockDetail(e){const t=e.target,s=await(t===G?st(y()):K($(y(),t)));return new Oe(mr(s))}async getBlockSummaries(e){const t=vr(y(),l=>e.from===G||l.height<=e.from),s=ge(t),n=B(s,e.limit),c=P(n,async l=>me(l)),i=await A(c);return new Ue(i)}async getTransactionDetail(e){const t=y();if(e instanceof M){const s=de(t,l=>l.height<=e.height),n=q(s,l=>T(l.transactions,async h=>wr(l,h))),c=$(F(n),e.offset),i=await K(c);return new X(i)}if(e instanceof j){const s=q(t,c=>T(c.transactions,async i=>wr(c,i))),n=await ct(s,c=>c.details.hash===e.hash);if(!n)throw new At(e.hash);return new X(n)}throw new f}applyFilter(e,t){return t instanceof se?dr(e,s=>s.height==t.block):t instanceof ce?dr(e,s=>s.rollups.indexOf(t.namespace)>=0):e}async getTransactionSummaries(e){const t=y(),{target:s,filter:n}=e;if(s instanceof ae){const i=q(t,E=>T(E.transactions,async u=>z(E,u))),l=F(i),h=this.applyFilter(l,n),C=await pe(ue(h,s.limit));return new H(C)}if(s instanceof ie){const c=de(t,u=>u.height<=s.height),i=q(c,u=>T(u.transactions,async R=>z(u,R))),l=F(i),h=$(l,s.offset),C=this.applyFilter(h,n),E=await pe(ue(C,s.limit));return new H(E)}if(s instanceof le){const c=y(),i=q(c,u=>T(u.transactions,async R=>new Ir(R.hash,[R.tree.namespace],R.block,R.time,R.index,u.numTransactions))),l=de(i,u=>u.hash!==s.hash),h=F(l),C=this.applyFilter(h,n),E=await pe(ue(C,s.limit));return new H(E)}throw new f}async getExplorerOverview(){let e;const t=b(11),s=b(51),n=b(51),c=b(51),i=b(51),l=b(11);let h=0,C=0;const E=new Map;for await(const u of y()){e=mr(u),t.put(me(u)),s.put(u.size),n.put(Math.round(u.genTime/1e3)),c.put(u.numTransactions),i.put(u.height),h++,C+=u.numTransactions;for await(const R of u.transactions){l.put(z(u,R));const Zr=E.get(R.tree.namespace)||0;E.set(R.tree.namespace,Zr+1)}}return new He(new Ge(e,new qe(Array.from(E.keys()).length,C,h),Array.from(t),Array.from(l),new wt(Array.from(n),Array.from(s),Array.from(c),Array.from(i))))}async getSearchResult(e){const t=b(101),s=b(10),n=b(10);for await(const c of y())t.put(c);for(const c of t){c.hash.toString().startsWith(e.query)&&s.put(me(c));for await(const i of c.transactions)i.hash.toString().startsWith(e.query)&&n.put(z(c,i))}return new Me(new Je(Array.from(s),Array.from(n)))}}class Ko{async blockHeight(){return(await nt(y())).height}}class Yo{constructor(){o(this,"availability",new so);o(this,"status",new Ko);o(this,"explorer",new $o)}}class Vo{async getLeafFromHeight(){throw new f}async getTransactionFromHeightAndOffset(){throw new f}async getBlockFromHeight(){throw new f}async getBlockSummaries(){throw new f}async getTransactionSummaryRange(){throw new f}async getTransactionSummaryRangeForRollup(){throw new f}}class Xo{async getBlockDetail(){throw new f}async getBlockSummaries(){throw new f}async getTransactionDetail(){throw new f}async getTransactionSummaries(){throw new f}async getExplorerOverview(){throw new f}async getSearchResult(){throw new f}}class Zo{async blockHeight(){throw new f}}class es{constructor(){o(this,"availability",new Vo);o(this,"status",new Zo);o(this,"explorer",new Xo)}}const U=a;class or{constructor(e,t,s,n){o(this,"requestID");o(this,"api");o(this,"method");o(this,"param");this.requestID=e,this.api=t,this.method=s,this.param=n}toJSON(){return{requestID:this.requestID,api:this.api,method:this.method,param:this.param}}}class rs{convert(e){return p(e,"requestID","api","method","param"),new or(U.decode(e.requestID),_.decode(e.api),_.decode(e.method),e.param)}}class ts{convert(e){return d(e,or),{requestID:U.encode(e.requestID),api:_.encode(e.api),method:_.encode(e.method),param:e.param}}}class os extends w{constructor(){super(...arguments);o(this,"encoder",new ts);o(this,"decoder",new rs)}}const ss=new os;class sr{constructor(e){o(this,"requestID");this.requestID=e}}class cr extends sr{constructor(t,s){super(t);o(this,"response");this.response=s}toJSON(){return Gr.encode(this)}}class cs{convert(e){return p(e,"requestID","response"),new cr(U.decode(e.requestID),e.response)}}class ns{convert(e){return d(e,cr),{requestID:U.encode(e.requestID),response:e.response}}}class as extends w{constructor(){super(...arguments);o(this,"encoder",new ns);o(this,"decoder",new cs)}}const Gr=new as;class nr extends sr{constructor(t,s){super(t);o(this,"error");this.error=s}toJSON(){return Lr.encode(this)}}class is{convert(e){return p(e,"requestID","error"),new nr(U.decode(e.requestID),W.decode(e.error))}}class ls{convert(e){return d(e,nr),{requestID:U.encode(e.requestID),error:W.encode(e.error)}}}class ds extends w{constructor(){super(...arguments);o(this,"encoder",new ls);o(this,"decoder",new is)}}const Lr=new ds;class ps{convert(e){if(k(e,"response",x))return Gr.decode(e);if(k(e,"error",x))return Lr.decode(e);throw new N}}class us{convert(e){return d(e,sr),e.toJSON()}}class hs extends w{constructor(){super(...arguments);o(this,"encoder",new us);o(this,"decoder",new ps)}}const fr=new hs;class ar{constructor(e){o(this,"target");this.target=e}static latest(){return new Wr}static height(e){return new Ur(e)}toJSON(){return Or.encode(this)}}class ms{convert(e){return d(e,ar),typeof e.target=="number"?a.encode(e.target):_.encode(e.target)}}class ws{convert(e){return e===G?new Wr:new Ur(a.decode(e))}}class fs extends v{constructor(){super(...arguments);o(this,"encoder",new ms);o(this,"decoder",new ws)}}const Or=new fs;class Wr extends ar{constructor(){super(G)}}class Ur extends ar{constructor(e){super(e)}}class ir{constructor(e){o(this,"limit");this.limit=e}static latest(e){return new Hr(e)}static from(e,t){return new Nr(e,t)}toJSON(){return Fr.encode(this)}}class Cs{convert(e){return d(e,ir),bt(e.from)?{from:a.encode(e.from),limit:a.encode(e.limit)}:{from:_.encode(e.from),limit:a.encode(e.limit)}}}class ys{convert(e){return p(e,"from","limit"),e.from===G?new Hr(a.decode(e.limit)):new Nr(a.decode(e.from),a.decode(e.limit))}}class gs extends v{constructor(){super(...arguments);o(this,"encoder",new Cs);o(this,"decoder",new ys)}}const Fr=new gs;class Hr extends ir{constructor(e){super(e)}get from(){return G}}class Nr extends ir{constructor(t,s){super(s);o(this,"from");this.from=t}}class Jr{constructor(e){o(this,"query");this.query=e}toJSON(){return Qr.encode(this)}}class vs{convert(e){return d(e,Jr),_.encode(e.query)}}class Rs{convert(e){return new Jr(_.decode(e))}}class Es extends v{constructor(){super(...arguments);o(this,"encoder",new vs);o(this,"decoder",new Rs)}}const Qr=new Es;class Mr{constructor(e,t){o(this,"target");o(this,"filter");this.target=e,this.filter=t}toJSON(){return jr.encode(this)}}class Ss{convert(e){return p(e,"filter","target"),new Mr(tr.decode(e.target),Ze.decode(e.filter))}}class ks{convert(e){return d(e,Mr),{filter:Ze.encode(e.filter),target:tr.encode(e.target)}}}class xs extends v{constructor(){super(...arguments);o(this,"encoder",new ks);o(this,"decoder",new Ss)}}const jr=new xs;function bs(r){return new Worker(""+new URL("hotshot_query_service_web_worker_api.js-DDb3b82Y.js",import.meta.url).href,{name:r==null?void 0:r.name})}class Ts{constructor(e){o(this,"worker");o(this,"nextRequestID",0);o(this,"requestCompleters",new Map);this.worker=e,e.onmessageerror,e.addEventListener("message",this.handleMessage.bind(this)),e.addEventListener("messageerror",this.handleMessageError.bind(this)),e.addEventListener("error",this.handleError.bind(this))}async submitRequest(e,t,s,n){const[c,i]=this.nextRequest();try{return this.worker.postMessage(ss.encode(new or(c,t,s,n))),await i.promise.then(l=>{if(l instanceof nr)throw new gt(l.error);if(l instanceof cr){const{response:h}=l;return e.decode(h)}throw new Tt(typeof l,"WebWorkerResponse")})}finally{this.requestCompleters.delete(c)}}nextRequest(){const e=this.nextRequestID++,t=vt();return this.requestCompleters.set(e,t),[e,t]}handleMessage(e){const t=fr.decode(e.data),s=this.requestCompleters.get(t.requestID);if(s===void 0)throw new pr(t.requestID);s.complete(t)}handleMessageError(e){const t=fr.decode(e.data),s=this.requestCompleters.get(t.requestID);if(s===void 0)throw new pr(t.requestID);s.completeError(t)}handleError(e){debugger;console.error("encountered error setting up Web worker",e)}}class As{constructor(e){o(this,"helper");this.helper=e}async sendRequest(e,t,...s){return this.helper.submitRequest(e,"availability",t,s)}async getLeafFromHeight(e){return await this.sendRequest(Ae,"getLeafFromHeight",e)}async getTransactionFromHeightAndOffset(e,t){return await this.sendRequest(Ie,"getTransactionFromHeightAndOffset",e,t)}async getBlockSummaries(e,t){return await this.sendRequest(Rt,"getBlockSummaries",e,t)}async getBlockFromHeight(e){return await this.sendRequest(Se,"getBlockFromHeight",e)}async getTransactionSummaryRange(e,t,s){return await this.sendRequest(ur,"getTransactionSummaryRange",e,t,s)}async getTransactionSummaryRangeForRollup(e,t,s,n){return await this.sendRequest(ur,"getTransactionSummaryRangeForRollup",e,t,s,n)}}class _s{constructor(e){o(this,"helper");this.helper=e}async sendRequest(e,t,...s){return this.helper.submitRequest(e,"status",t,s)}async blockHeight(){return await this.sendRequest(a,"blockHeight")}}class Ds{constructor(e){o(this,"helper");this.helper=e}async sendRequest(e,t,...s){return this.helper.submitRequest(e,"explorer",t,s)}async getBlockDetail(e){return await this.sendRequest(We,"getBlockDetail",Or.encode(e))}async getBlockSummaries(e){return await this.sendRequest(Fe,"getBlockSummaries",Fr.encode(e))}async getTransactionDetail(e){return await this.sendRequest(Xe,"getTransactionDetail",Pr.encode(e))}async getTransactionSummaries(e){return await this.sendRequest(rr,"getTransactionSummaries",jr.encode(e))}async getExplorerOverview(){return await this.sendRequest(Ne,"getExplorerOverview",null)}async getSearchResult(e){return await this.sendRequest(je,"getSearchResult",Qr.encode(e))}}let we=null;function Bs(){return we||(we=new bs),we}class Is{constructor(){o(this,"availability");o(this,"status");o(this,"explorer");const e=Bs(),t=new Ts(e);this.availability=new As(t),this.status=new _s(t),this.explorer=new Ds(t)}}function S(r,e){return async t=>(await qs(t,e),ye(t),r.convert(await t.json()))}async function qs(r,e){if(!r.ok){if(r.status>=500&&r.status<600){try{if(ye(r),e!==void 0){const t=await r.json();throw e.convert(t)}}catch(t){if(t instanceof hr)throw t;console.error("encountered an error attempting to decode a server error from the server",t)}throw new Et(r.status,r)}if(r.status>=400&&r.status<500){try{if(ye(r),e!==void 0){const t=await r.json();throw e.convert(t)}}catch(t){if(t instanceof hr)throw t;console.error("encountered an error attempting to decode a client error from the server",t)}throw new St(r.status,r)}throw new kt(r.status,r)}}function ye(r){const e=r.headers.get("content-type");if(!e||!e.startsWith("application/json"))throw xt.fromResponse(r,e||"undefined")}class zr{constructor(e){o(this,"availability");this.availability=e}toJSON(){return $r.encode(this)}}class Ps{convert(e){return p(e,"Availability"),new zr(W.decode(e.Availability))}}class Gs{convert(e){return d(e,zr),{Availability:W.encode(e.availability)}}}class Ls extends w{constructor(){super(...arguments);o(this,"encoder",new Gs);o(this,"decoder",new Ps)}}const $r=new Ls;class Os{convert(e){return $r.decode(e).availability}}const fe=new Os;async function Ws(r,e){return new Tr(r.header,r.hash,r.size,r.payload.transaction_nmt.length,[e.leaf.proposer_id])}async function*Us(r,e){const t=e[Symbol.asyncIterator]();yield*T(at(r.leaf.block_payload.transaction_nmt),async s=>{const n=r.leaf.block_payload.transaction_nmt.indexOf(s),c=await t.next();if(c.done)throw new Error("Not enough transactions");return new Ar(c.value.hash,r.leaf.block_header,n,s)})}class Fs{constructor(e,t){o(this,"fetcher");o(this,"baseURL");this.fetcher=e,this.baseURL=t}getLeafFromHeight(e){const t=new URL(`leaf/${e}`,this.baseURL);return this.fetcher(t).then(S(Ae.decoder,fe))}getTransactionFromHeightAndOffset(e,t){const s=new URL(`transaction/${e}/${t}`,this.baseURL);return this.fetcher(s).then(S(Ie.decoder,fe))}async getBlockSummaries(e,t){const s=he(t-e),n=P(s,i=>Promise.all([this.getBlockFromHeight(e+i),this.getLeafFromHeight(e+i)])),c=P(n,([i,l])=>Ws(i,l));return await A(c)}getBlockFromHeight(e){const t=new URL(`block/${e}`,this.baseURL);return this.fetcher(t).then(S(Se.decoder,fe))}async*streamBlocksFromHeightRange(e,t){const s=he(e),n=P(s,i=>this.getLeafFromHeight(e-i)),c=it(n,i=>ge(Us(i,P(he(i.leaf.block_payload.transaction_nmt.length),l=>this.getTransactionFromHeightAndOffset(i.leaf.block_header.height,l)))));if(t===void 0){yield*c;return}yield*B(c,t)}async getTransactionSummaryRange(e,t,s){const n=this.streamBlocksFromHeightRange(e,50),c=D(n,t),i=B(c,s);return await A(i)}async getTransactionSummaryRangeForRollup(e,t,s,n){const c=this.streamBlocksFromHeightRange(t,50),i=Rr(c,C=>C.transaction.vm===e),l=D(i,s),h=B(l,n);return await A(h)}}class Kr{constructor(e){o(this,"explorer");this.explorer=e}toJSON(){return Vr.encode(this)}}class Hs{convert(e){return p(e,"Explorer"),new Kr(lr.decode(e.Explorer))}}class Ns{convert(e){return d(e,Kr),{Explorer:lr.encode(e.explorer)}}}class Js extends w{constructor(){super(...arguments);o(this,"encoder",new Ns);o(this,"decoder",new Hs)}}class Yr{constructor(e){o(this,"error");this.error=e}toJSON(){return lr.encode(this)}}class Qs{convert(e){return p(e,"error"),new Yr(W.decode(e.error))}}class Ms{convert(e){return d(e,Yr),{Explorer:W.encode(e.error)}}}class js extends w{constructor(){super(...arguments);o(this,"encoder",new Ms);o(this,"decoder",new Qs)}}const lr=new js,Vr=new Js;class zs{convert(e){return Vr.decode(e).explorer.error}}const I=new zs;class $s{constructor(e,t){o(this,"fetcher");o(this,"baseURL");this.fetcher=e,this.baseURL=t}async getBlockDetail(e){const t=new URL(`block/${e.target}`,this.baseURL);return this.fetcher(t).then(S(We.decoder,I))}async getBlockSummaries(e){const t=new URL(`blocks/${e.from}/${e.limit}`,this.baseURL);return this.fetcher(t).then(S(Fe.decoder,I))}async getTransactionDetail(e){let t=null;if(e instanceof j?t=new URL(`transaction/hash/${e.hash}`,this.baseURL):e instanceof M&&(t=new URL(`transaction/${e.height}/${e.offset}`,this.baseURL)),!t)throw new f;return this.fetcher(t).then(S(Xe.decoder,I))}async getTransactionSummaries(e){const{target:t,filter:s}=e;let n=t.convertURL(this.baseURL);return n=s.convertURL(n),this.fetcher(n).then(S(rr.decoder,I))}async getExplorerOverview(){const e=new URL("explorer-summary",this.baseURL);return this.fetcher(e).then(S(Ne.decoder,I))}async getSearchResult(e){const t=new URL(`search/${encodeURIComponent(e.query)}`,this.baseURL);return this.fetcher(t).then(S(je.decoder,I))}}class Ks{constructor(e,t){o(this,"fetcher");o(this,"baseURL");o(this,"blockHeightURL");o(this,"blockHeightResponseValidator",S(a.decoder));this.fetcher=e,this.baseURL=t,this.blockHeightURL=new URL("block-height",this.baseURL)}blockHeight(){return this.fetcher(this.blockHeightURL).then(this.blockHeightResponseValidator)}}class Ys{constructor(e,t){o(this,"availability");o(this,"status");o(this,"explorer");this.availability=new Fs(e,new URL("availability/",t)),this.status=new Ks(e,new URL("status/",t)),this.explorer=new $s(e,new URL("explorer/",t))}}const Xr=_t.createContext(new es);let Ce=null;function Vs(){return Ce===null&&(Ce=new Is),Ce}function Xs(){return typeof window<"u"&&"Worker"in window||typeof self<"u"&&"Worker"in self?Vs():new Yo}const Cr=r=>gr.jsx(Xr.Provider,{value:Xs(),children:r.children}),Zs=async(r,e)=>{try{return await fetch(r,e)}catch(t){throw new tt(t)}},yr=({url:r,children:e})=>gr.jsx(Xr.Provider,{value:new Ys(Zs,r),children:e});try{Cr.displayName="ProvideCappuccinoHotShotQueryServiceAPIContext",Cr.__docgenInfo={description:`ProvideCappuccinoHotShotQueryServiceAPIContext is a component that provides a
Cappuccino HotShot Query Service API using a default implementation that is
dependent on the environment that the code is being run within.`,displayName:"ProvideCappuccinoHotShotQueryServiceAPIContext",props:{}}}catch{}try{yr.displayName="ProvideCappuccinoLiveService",yr.__docgenInfo={description:`ProvideCappuccinoLiveService is a component that provides a Cappuccino
HotShot Query Service API targeting the given URL.`,displayName:"ProvideCappuccinoLiveService",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"URL"}}}}}catch{}export{Xr as C,Yo as F,Cr as P,Me as a,Je as b,ar as c,ir as d,Mr as e,ne as f,oe as g,ze as h,Jr as i};
