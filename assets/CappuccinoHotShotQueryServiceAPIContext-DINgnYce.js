var ft=Object.defineProperty;var Ct=(r,e,o)=>e in r?ft(r,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[e]=o;var t=(r,e,o)=>(Ct(r,typeof e!="symbol"?e+"":e,o),o);import{j as yt}from"./jsx-runtime-Cd6u8K_H.js";import{M as vt,I as q,m as _o}from"./monetary_value-DDtKFr-C.js";import{c as gt}from"./data-BqGnzjPf.js";import{t as h,T as v}from"./TaggedBase64-CWozzVDS.js";import{M as cr,i as xt}from"./functional-D1RzZCNy.js";import{T as u,j as sr,I as re,e as l,A as M,f as H,g as W,C as x,a as d,s as p,k as bt,l as Et,h as kt,m as St,n as k,o as S,B as L,c as Re,r as I,b as _,d as Te,u as Do,p as Ie,q as E,i as Rt}from"./string-BgQ3tcOU.js";import{n as s,b as g}from"./base64-ByugtSst.js";import{h as y,u as Ao,s as Bo}from"./array_buffer-EBg4rlG_.js";import{N as Tt}from"./NotFoundError-BY595sC3.js";import{R as It}from"./index-UfW7PFvU.js";class _t{constructor(e,o){t(this,"value");t(this,"next");this.value=e,this.next=o}[Symbol.iterator](){return Po(this)}}function Dt(r,e){return new _t(e,r)}function*Po(r){if(r!==null)for(let e=r;e!==null;e=e.next)yield e.value}class At{convert(e){if(!sr(e))throw new re(typeof e,"string");const o=new Date(e);if(Number.isNaN(o.valueOf()))throw new re("NaN","number");return o}}class Bt{convert(e){return l(e,Date),e.toISOString()}}class Pt extends u{constructor(){super(...arguments);t(this,"encoder",new Bt);t(this,"decoder",new At)}}const G=new Pt;class ar{constructor(e,o,n,c,a,i){t(this,"hash");t(this,"height");t(this,"proposerID");t(this,"numTransactions");t(this,"size");t(this,"time");this.hash=e,this.height=o,this.proposerID=n,this.numTransactions=c,this.size=a,this.time=i}toJSON(){return Ke.encode(this)}}class Nt{convert(e){return d(e,"hash","height","proposer_id","num_transactions","size","time"),new ar(h.decode(e.hash),s.decode(e.height),y.decode(e.proposer_id),s.decode(e.num_transactions),s.decode(e.size),G.decode(e.time))}}class Ot{convert(e){return l(e,ar),{hash:h.encode(e.hash),height:s.encode(e.height),proposer_id:y.encode(e.proposerID),num_transactions:s.encode(e.numTransactions),size:s.encode(e.size),time:G.encode(e.time)}}}class Ft extends x{constructor(){super(...arguments);t(this,"encoder",new Ot);t(this,"decoder",new Nt)}}const Ke=new Ft,K=new M(new H(Ke),new W(Ke));class No{constructor(e){t(this,"query");this.query=e}toJSON(){return Oo.encode(this)}}class qt{convert(e){return l(e,No),p.encode(e.query)}}class Lt{convert(e){return new No(p.decode(e))}}class Gt extends x{constructor(){super(...arguments);t(this,"encoder",new qt);t(this,"decoder",new Lt)}}const Oo=new Gt,Fo=g;class _e{constructor(e,o,n,c,a,i){t(this,"hash");t(this,"rollups");t(this,"height");t(this,"time");t(this,"offset");t(this,"numTransactions");this.hash=e,this.rollups=o,this.height=n,this.time=c,this.offset=a,this.numTransactions=i}toJSON(){return Ye.encode(this)}}class Ut{convert(e){return d(e,"hash","rollups","height","time","offset","num_transactions"),new _e(h.decode(e.hash),Fo.decode(e.rollups),s.decode(e.height),G.decode(e.time),s.decode(e.offset),s.decode(e.num_transactions))}}class zt{convert(e){return l(e,_e),{hash:h.encode(e.hash),rollups:Fo.encode(e.rollups),height:s.encode(e.height),time:G.encode(e.time),offset:s.encode(e.offset),num_transactions:s.encode(e.numTransactions)}}}class Mt extends u{constructor(){super(...arguments);t(this,"encoder",new zt);t(this,"decoder",new Ut)}}const Ye=new Mt,Y=new M(new H(Ye),new W(Ye));class ir{constructor(e,o){t(this,"blocks");t(this,"transactions");this.blocks=e,this.transactions=o}toJSON(){return dr.encode(this)}}class Ht{convert(e){return d(e,"blocks","transactions"),new ir(K.decode(e.blocks),Y.decode(e.transactions))}}class Wt{convert(e){return l(e,ir),{blocks:K.encode(e.blocks),transactions:Y.encode(e.transactions)}}}class Jt extends x{constructor(){super(...arguments);t(this,"encoder",new Wt);t(this,"decoder",new Ht)}}const dr=new Jt;class lr{constructor(e){t(this,"searchResults");this.searchResults=e}toJSON(){return ur.encode(this)}}class jt{convert(e){return d(e,"search_results"),new lr(dr.decode(e.search_results))}}class Qt{convert(e){return l(e,lr),{search_results:dr.encode(e.searchResults)}}}class $t extends x{constructor(){super(...arguments);t(this,"encoder",new Qt);t(this,"decoder",new jt)}}const ur=new $t,ue=2147483648,Vt=1103515245,Kt=12345;class Ze{constructor(e){t(this,"state");this.state=e!==void 0?e:Math.floor(Math.random()*(ue-1))}nextInt(){return this.state=(Vt*this.state+Kt)%ue,this.state}nextFloat(){return this.nextInt()/(ue-1)}nextRange(e,o){const n=o-e,c=this.nextInt()/ue;return e+Math.floor(c*n)}fillBytes(e){const o=new ArrayBuffer(e),n=new DataView(o);let c=0;for(;c<e-4;c+=4)n.setUint32(c,this.nextRange(0,4294967295));for(let a=c;a<e;a++)n.setUint8(a,this.nextRange(0,256));return o}}async function*Yt(){}async function*b(){const r=new Date,e=new Date(r.getFullYear(),r.getMonth(),r.getDate()).valueOf(),o=new Ze(e),n=new Uint8Array(new Array(20).map(()=>0)).buffer;yield{hash:new v("BLOCK",n),height:0,time:new Date(0),genTime:0,transactions:Yt(),numTransactions:0,proposer:n,size:0,fees:[]};let c=1,a=e;for(;a<r.valueOf();){const i=Math.floor(o.nextFloat()*14*1e3);yield Zt(new Ze(c+i),c,a,a+i),a+=i,c++}}function Zt(r,e,o,n){const c=Math.floor(r.nextRange(0,5));return{hash:new v("BLOCK",r.fillBytes(32)),height:e,genTime:n-o,time:new Date(n),numTransactions:c,transactions:en(new Ze(e+o),e,o,n,c),proposer:r.fillBytes(30),size:Math.floor(r.nextFloat()*1024*c)+8,fees:[vt.ESP(BigInt(r.nextRange(0,1e9)*1e3))]}}const xo=Array.from(gt.keys());function Xt(r){return r.nextFloat()>.98?1:xo[r.nextRange(0,xo.length)]}async function*en(r,e,o,n,c){const a=(n-o)/c;for(let i=0,m=o;m<n;m+=a,i++){const w=Xt(r),C=Math.floor(1024*r.nextFloat());yield{block:e,index:i,size:C,hash:new v("COMMIT",r.fillBytes(32)),time:new Date(m),sender:new v("PUBKEY",r.fillBytes(32)),tree:{namespace:w,data:r.fillBytes(C)}}}}async function*rn(r){for(let e=r.next();!e.done;e=r.next())yield e.value}function on(r){return rn(r[Symbol.iterator]())}async function*tn(r){for(let e=await r.next();!e.done;e=await r.next())yield e.value}async function*hr(r,e){for(let o=await r.next();!o.done;o=await r.next())e(o.value)&&(yield o.value)}function bo(r,e){return hr(r[Symbol.asyncIterator](),e)}async function*U(r,e){for(let o=await r.next();!o.done;o=await r.next())yield await e(o.value)}function B(r,e){return U(r[Symbol.asyncIterator](),e)}async function*F(r,e){for(let o=0;o<e;o++){const n=await r.next();if(n.done)return;yield n.value}}function Je(r,e){return F(r[Symbol.asyncIterator](),e)}async function*mr(r,e){for(let o=await r.next();!o.done&&e(o.value);o=await r.next())yield o.value}function je(r,e){return mr(r[Symbol.asyncIterator](),e)}async function*O(r,e){for(let o=0;o<e;o++)if((await r.next()).done)return;yield*tn(r)}function we(r,e){return O(r[Symbol.asyncIterator](),e)}async function oe(r){const e=await r.next();if(e.done)throw new cr;return e.value}async function nn(r){return oe(r[Symbol.asyncIterator]())}async function cn(r,e){for(let o=await r.next();!o.done;o=await r.next())if(e(o.value))return o.value}async function sn(r,e){return cn(r[Symbol.asyncIterator](),e)}async function qo(r){let e;for(let o=await r.next();!o.done;o=await r.next())e=o.value;if(e===void 0)throw new cr;return e}async function an(r){return qo(r[Symbol.asyncIterator]())}async function*Lo(r,e){for(let o=await r.next();!o.done;o=await r.next())yield*e(o.value)}function J(r,e){return Lo(r[Symbol.asyncIterator](),e)}async function*Qe(r){yield*xt(r)}async function dn(r,e,o){const n=o;let c=e;for(let a=await n.next();!a.done;a=await n.next())c=r(await c,a.value);return c}async function*De(r){let e=null;for(let o=await r.next();!o.done;o=await r.next())e=Dt(e,o.value);yield*Po(e)}function X(r){return De(r[Symbol.asyncIterator]())}function P(r){return dn(async(e,o)=>(e.push(o),e),Promise.resolve([]),r)}async function $e(r){return P(r[Symbol.asyncIterator]())}class pr{constructor(e,o,n){t(this,"r");t(this,"s");t(this,"v");this.r=e,this.s=o,this.v=n}toJSON(){return wr.encode(this)}}class ln{convert(e){return d(e,"r","s","v"),new pr(y.decode(e.r),y.decode(e.s),s.decode(e.v))}}class un{convert(e){return l(e,pr),{r:y.encode(e.r),s:y.encode(e.s),v:s.encode(e.v)}}}class hn extends u{constructor(){super(...arguments);t(this,"encoder",new un);t(this,"decoder",new ln)}}const wr=new hn;class fr{constructor(e,o){t(this,"account");t(this,"amount");this.account=e,this.amount=o}toJSON(){return Cr.encode(this)}}class mn{convert(e){return d(e,"account","amount"),new fr(y.decode(e.account),y.decode(e.amount))}}class pn{convert(e){return l(e,fr),{account:y.encode(e.account),amount:y.encode(e.amount)}}}class wn extends u{constructor(){super(...arguments);t(this,"encoder",new pn);t(this,"decoder",new mn)}}const Cr=new wn;class Go{constructor(e){t(this,"itemCodec");this.itemCodec=e}convert(e){return e===null?null:this.itemCodec.decode(e)}}class Uo{constructor(e){t(this,"itemCodec");this.itemCodec=e}convert(e){return e===null?null:(bt(e),this.itemCodec.encode(e))}}class zo extends u{constructor(o,n){super();t(this,"encoder");t(this,"decoder");this.encoder=n,this.decoder=o}}class yr{constructor(e,o,n){t(this,"number");t(this,"timestamp");t(this,"hash");this.number=e,this.timestamp=o,this.hash=n}toJSON(){return Xe.encode(this)}}class fn{convert(e){return d(e,"number","timestamp","hash"),new yr(s.decode(e.number),p.decode(e.timestamp),p.decode(e.hash))}}class Cn{convert(e){return l(e,yr),{number:s.encode(e.number),timestamp:p.encode(e.timestamp),hash:p.encode(e.hash)}}}class yn extends u{constructor(){super(...arguments);t(this,"encoder",new Cn);t(this,"decoder",new fn)}}const Xe=new yn,Mo=new zo(new Go(Xe),new Uo(Xe));class vr{constructor(e){t(this,"bytes");this.bytes=e}toJSON(){return gr.encode(this)}}class vn{convert(e){return d(e,"bytes"),new vr(Ao.decode(e.bytes))}}class gn{convert(e){return l(e,vr),{bytes:Ao.encode(e.bytes)}}}class xn extends u{constructor(){super(...arguments);t(this,"encoder",new gn);t(this,"decoder",new vn)}}const gr=new xn;class xr{constructor(e,o,n,c,a,i,m,w,C,R){t(this,"height");t(this,"timestamp");t(this,"l1_head");t(this,"l1_finalized");t(this,"payload_commitment");t(this,"ns_table");t(this,"block_merkle_root");t(this,"fee_merkle_root");t(this,"builder_signature");t(this,"fee_info");this.height=e,this.timestamp=o,this.l1_head=n,this.l1_finalized=c,this.payload_commitment=a,this.ns_table=i,this.block_merkle_root=m,this.fee_merkle_root=w,this.builder_signature=C,this.fee_info=R}toJSON(){return N.encode(this)}}class bn{convert(e){return d(e,"height","timestamp","l1_head","l1_finalized","payload_commitment","ns_table","block_merkle_root","fee_merkle_root","builder_signature","fee_info"),new xr(s.decode(e.height),s.decode(e.timestamp),s.decode(e.l1_head),Mo.decode(e.l1_finalized),g.decode(e.payload_commitment),gr.decode(e.ns_table),h.decode(e.block_merkle_root),h.decode(e.fee_merkle_root),wr.decode(e.builder_signature),Cr.decode(e.fee_info))}}class En{convert(e){return l(e,xr),{height:s.encode(e.height),timestamp:s.encode(e.timestamp),l1_head:s.encode(e.l1_head),l1_finalized:Mo.encode(e.l1_finalized),payload_commitment:g.encode(e.payload_commitment),ns_table:gr.encode(e.ns_table),block_merkle_root:h.encode(e.block_merkle_root),fee_merkle_root:h.encode(e.fee_merkle_root),builder_signature:wr.encode(e.builder_signature),fee_info:Cr.encode(e.fee_info)}}}class kn extends u{constructor(){super(...arguments);t(this,"encoder",new En);t(this,"decoder",new bn)}}const N=new kn;class te{constructor(e,o){t(this,"vm");t(this,"payload");this.vm=e,this.payload=o}toJSON(){return z.encode(this)}}class Sn{convert(e){return d(e,"vm","payload"),new te(s.decode(e.vm),g.decode(e.payload))}}class Rn{convert(e){return l(e,te),{vm:s.encode(e.vm),payload:g.encode(e.payload)}}}class Tn extends u{constructor(){super(...arguments);t(this,"encoder",new Rn);t(this,"decoder",new Sn)}}const z=new Tn,Ho=new M(new H(z),new W(z));class br{constructor(e){t(this,"transaction_nmt");this.transaction_nmt=e}toJSON(){return ne.encode(this)}}class In{convert(e){return d(e,"transaction_nmt"),new br(Ho.decode(e.transaction_nmt))}}class _n{convert(e){return l(e,br),{transaction_nmt:Ho.encode(e.transaction_nmt)}}}class Dn extends u{constructor(){super(...arguments);t(this,"encoder",new _n);t(this,"decoder",new In)}}const ne=new Dn;class Er{constructor(e,o,n,c,a){t(this,"header");t(this,"payload");t(this,"hash");t(this,"size");t(this,"numTransactions");this.header=e,this.payload=o,this.hash=n,this.size=c,this.numTransactions=a}toJSON(){return kr.encode(this)}}class An{convert(e){return d(e,"header","payload","hash","size","num_transactions"),new Er(N.decode(e.header),ne.decode(e.payload),h.decode(e.hash),s.decode(e.size),s.decode(e.num_transactions))}}class Bn{convert(e){return l(e,Er),{header:N.encode(e.header),payload:ne.encode(e.payload),hash:h.encode(e.hash),size:s.encode(e.size),num_transactions:s.encode(e.numTransactions)}}}class Pn extends x{constructor(){super(...arguments);t(this,"encoder",new Bn);t(this,"decoder",new An)}}const kr=new Pn;class Ae{constructor(e,o,n,c,a){t(this,"header");t(this,"hash");t(this,"size");t(this,"num_transactions");t(this,"proposer_id");this.header=e,this.hash=o,this.size=n,this.num_transactions=c,this.proposer_id=a}toJSON(){return er.encode(this)}}class Nn{convert(e){return d(e,"header","hash","size","num_transactions","proposer_id"),new Ae(N.decode(e.header),h.decode(e.hash),s.decode(e.size),s.decode(e.num_transactions),y.decode(e.proposer_id))}}class On{convert(e){return l(e,Ae),{header:N.encode(e.header),hash:h.encode(e.hash),size:s.encode(e.size),num_transactions:s.encode(e.num_transactions),proposer_id:y.encode(e.proposer_id)}}}class Fn extends u{constructor(){super(...arguments);t(this,"encoder",new On);t(this,"decoder",new Nn)}}const er=new Fn,qn=new M(new H(er),new W(er));class Be{constructor(e,o,n,c){t(this,"hash");t(this,"header");t(this,"offset");t(this,"transaction");this.hash=e,this.header=o,this.offset=n,this.transaction=c}toJSON(){return rr.encode(this)}}class Ln{convert(e){return d(e,"hash","header","offset","transaction"),new Be(h.decode(e.hash),N.decode(e.header),s.decode(e.offset),z.decode(e.transaction))}}class Gn{convert(e){return l(e,Be),{hash:h.encode(e.hash),header:N.encode(e.header),offset:s.encode(e.offset),transaction:z.encode(e.transaction)}}}class Un extends u{constructor(){super(...arguments);t(this,"encoder",new Gn);t(this,"decoder",new Ln)}}const rr=new Un,Eo=new M(new H(rr),new W(rr));class zn{convert(e){if(!Et(e))throw new re(typeof e,"boolean");return e}}class Mn{convert(e){return kt(e,"boolean"),e}}class Hn extends u{constructor(){super(...arguments);t(this,"encoder",new Mn);t(this,"decoder",new zn)}}const Pe=new Hn;class fe{constructor(e){t(this,"leaf_commit");this.leaf_commit=e}toJSON(){return Sr.encode(this)}}class Wn{convert(e){return d(e,"leaf_commit"),new fe(h.decode(e.leaf_commit))}}class Jn{convert(e){return l(e,fe),{leaf_commit:h.encode(e.leaf_commit)}}}class jn extends u{constructor(){super(...arguments);t(this,"encoder",new Jn);t(this,"decoder",new Wn)}}const Sr=new jn;class Wo{constructor(e,o){t(this,"width");t(this,"index");this.width=e,this.index=o}toJSON(){return Rr.encode(this)}}class Qn{convert(e){return d(e,"width","index"),new Wo(s.decode(e.width),s.decode(e.index))}}class $n{convert(e){return l(e,Wo),{width:s.encode(e.width),index:s.encode(e.index)}}}class Vn extends u{constructor(){super(...arguments);t(this,"encoder",new $n);t(this,"decoder",new Qn)}}const Rr=new Vn;class Jo{constructor(e,o,n,c){t(this,"order");t(this,"head");t(this,"bits");t(this,"data");this.order=e,this.head=o,this.bits=n,this.data=c}toJSON(){return Tr.encode(this)}}class Kn{convert(e){return d(e,"order","head","bits","data"),new Jo(p.decode(e.order),Rr.decode(e.head),s.decode(e.bits),g.decode(e.data))}}class Yn{convert(e){return l(e,Jo),{order:p.encode(e.order),head:Rr.encode(e.head),bits:s.encode(e.bits),data:g.encode(e.data)}}}class Zn extends u{constructor(){super(...arguments);t(this,"encoder",new Yn);t(this,"decoder",new Kn)}}const Tr=new Zn;class jo{constructor(e,o){t(this,"signature");t(this,"bitvec");this.signature=e,this.bitvec=o}toJSON(){return or.encode(this)}}class Xn{convert(e){if(!St(e)||e.length!==2)throw new re(typeof e,"Array");return new jo(h.decode(e[0]),Tr.decode(e[1]))}}class ec{convert(e){return l(e,jo),[h.encode(e.signature),Tr.encode(e.bitvec)]}}class rc extends u{constructor(){super(...arguments);t(this,"encoder",new ec);t(this,"decoder",new Xn)}}const or=new rc,Qo=new zo(new Go(or),new Uo(or));class Ce{constructor(e,o,n,c,a,i){t(this,"data");t(this,"vote_commitment");t(this,"view_number");t(this,"signatures");t(this,"is_genesis");t(this,"_pd");this.data=e,this.vote_commitment=o,this.view_number=n,this.signatures=c,this.is_genesis=a,this._pd=i}toJSON(){return ce.encode(this)}}class oc{convert(e){return d(e,"data","vote_commitment","view_number","signatures","is_genesis","_pd"),new Ce(Sr.decode(e.data),h.decode(e.vote_commitment),s.decode(e.view_number),Qo.decode(e.signatures),Pe.decode(e.is_genesis),null)}}class tc{convert(e){return l(e,Ce),{data:Sr.encode(e.data),vote_commitment:h.encode(e.vote_commitment),view_number:s.encode(e.view_number),signatures:Qo.encode(e.signatures),is_genesis:Pe.encode(e.is_genesis),_pd:null}}}class nc extends u{constructor(){super(...arguments);t(this,"encoder",new tc);t(this,"decoder",new oc)}}const ce=new nc;class Ir{constructor(e,o,n,c,a,i,m,w){t(this,"view_number");t(this,"justify_qc");t(this,"parent_commitment");t(this,"block_header");t(this,"block_payload");t(this,"rejected");t(this,"timestamp");t(this,"proposer_id");this.view_number=e,this.justify_qc=o,this.parent_commitment=n,this.block_header=c,this.block_payload=a,this.rejected=i,this.timestamp=m,this.proposer_id=w}toJSON(){return _r.encode(this)}}class cc{convert(e){return d(e,"view_number","justify_qc","parent_commitment","block_header","block_payload","rejected","timestamp","proposer_id"),new Ir(s.decode(e.view_number),ce.decode(e.justify_qc),h.decode(e.parent_commitment),N.decode(e.block_header),ne.decode(e.block_payload),g.decode(e.rejected),s.decode(e.timestamp),y.decode(e.proposer_id))}}class sc{convert(e){return l(e,Ir),{view_number:s.encode(e.view_number),justify_qc:ce.encode(e.justify_qc),parent_commitment:h.encode(e.parent_commitment),block_header:N.encode(e.block_header),block_payload:ne.encode(e.block_payload),rejected:g.encode(e.rejected),timestamp:s.encode(e.timestamp),proposer_id:y.encode(e.proposer_id)}}}class ac extends u{constructor(){super(...arguments);t(this,"encoder",new sc);t(this,"decoder",new cc)}}const _r=new ac;class Dr{constructor(e,o){t(this,"leaf");t(this,"qc");this.leaf=e,this.qc=o}toJSON(){return Ar.encode(this)}}class ic{convert(e){return d(e,"leaf","qc"),new Dr(_r.decode(e.leaf),ce.decode(e.qc))}}class dc{convert(e){return l(e,Dr),{leaf:_r.encode(e.leaf),qc:ce.encode(e.qc)}}}class lc extends u{constructor(){super(...arguments);t(this,"encoder",new dc);t(this,"decoder",new ic)}}const Ar=new lc;class se{}class Br extends se{toJSON(){return Pr.encode(this)}}class uc{convert(e){if(!sr(e)||e!=="Empty")throw new q;return new Br}}class hc{convert(e){return l(e,Br),"Empty"}}class mc extends u{constructor(){super(...arguments);t(this,"encoder",new hc);t(this,"decoder",new uc)}}const Pr=new mc;class Nr extends se{constructor(o,n,c){super();t(this,"value");t(this,"pos");t(this,"elem");this.value=o,this.pos=n,this.elem=c}toJSON(){return Or.encode(this)}}class pc{convert(e){d(e,"Leaf");const o=e.Leaf;return d(o,"value","pos","elem"),new Nr(h.decode(o.value),h.decode(o.pos),h.decode(o.elem))}}class wc{convert(e){return l(e,Nr),{Leaf:{value:h.encode(e.value),pos:h.encode(e.pos),elem:h.encode(e.elem)}}}}class fc extends x{constructor(){super(...arguments);t(this,"encoder",new wc);t(this,"decoder",new pc)}}const Or=new fc;class Fr extends se{constructor(o){super();t(this,"value");this.value=o}toJSON(){return qr.encode(this)}}class Cc{convert(e){d(e,"ForgettenSubtree");const o=e.ForgettenSubtree;return d(o,"value"),new Fr(h.decode(o.value))}}class yc{convert(e){return l(e,Fr),{ForgettenSubtree:{value:h.encode(e.value)}}}}class vc extends x{constructor(){super(...arguments);t(this,"encoder",new yc);t(this,"decoder",new Cc)}}const qr=new vc;class Ne extends se{constructor(o,n){super();t(this,"value");t(this,"children");this.value=o,this.children=n}toJSON(){return Lr.encode(this)}}class gc{convert(e){d(e,"Branch");const o=e.Branch;return d(o,"value","children"),new Ne(h.decode(o.value),Oe.decode(o.children))}}class xc{convert(e){return l(e,Ne),{Branch:{value:h.encode(e.value),children:Oe.encode(e.children)}}}}class bc extends u{constructor(){super(...arguments);t(this,"encoder",new xc);t(this,"decoder",new gc)}}const Lr=new bc;class Ec{convert(e){if(k(e,"Leaf",S))return Or.decoder.convert(e);if(k(e,"Branch",S))return Lr.decoder.convert(e);if(k(e,"ForgettenSubtree",S))return qr.decoder.convert(e);if(sr(e))return Pr.decoder.convert(e);throw new q}}class kc{convert(e){if(l(e,se),e instanceof Nr)return Or.encode(e);if(e instanceof Ne)return Lr.encode(e);if(e instanceof Fr)return qr.encode(e);if(e instanceof Br)return Pr.encode(e);throw new q}}class Sc extends u{constructor(){super(...arguments);t(this,"encoder",new kc);t(this,"decoder",new Ec)}}const ko=new Sc,Oe=new M(new H(ko),new W(ko));class Gr{constructor(e,o){t(this,"pos");t(this,"proof");this.pos=e,this.proof=o}toJSON(){return Ur.encode(this)}}class Rc{convert(e){return d(e,"pos","proof"),new Gr(h.decode(e.pos),Oe.decode(e.proof))}}class Tc{convert(e){return l(e,Gr),{pos:h.encode(e.pos),proof:Oe.encode(e.proof)}}}class Ic extends u{constructor(){super(...arguments);t(this,"encoder",new Tc);t(this,"decoder",new Rc)}}const Ur=new Ic;class zr{constructor(e,o,n,c,a){t(this,"transaction");t(this,"block_hash");t(this,"proof");t(this,"height");t(this,"hash");this.transaction=e,this.block_hash=o,this.proof=n,this.height=c,this.hash=a}toJSON(){return Mr.encode(this)}}class _c{convert(e){return d(e,"transaction","block_hash","proof","height","hash"),new zr(z.decoder.convert(e.transaction),h.decode(e.block_hash),Ur.decoder.convert(e.proof),s.decode(e.height),h.decode(e.hash))}}class Dc{convert(e){return l(e,zr),{transaction:z.encode(e.transaction),block_hash:h.encode(e.block_hash),proof:Ur.encode(e.proof),height:s.encode(e.height),hash:h.encode(e.hash)}}}class Ac extends u{constructor(){super(...arguments);t(this,"encoder",new Dc);t(this,"decoder",new _c)}}const Mr=new Ac;function Fe(r){return new xr(r.height,r.time.valueOf()/1e3,0,new yr(0,"00","00"),[],new vr(new ArrayBuffer(0)),new v("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new v("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new pr(new ArrayBuffer(0),new ArrayBuffer(0),0),new fr(new ArrayBuffer(0),new ArrayBuffer(0)))}async function Bc(r){return new Er(Fe(r),new br(await P(B(r.transactions,async e=>new te(e.tree.namespace,Array.from(new Uint8Array(e.tree.data)))))),new v("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions)}function Pc(r){return new Ae(Fe(r),new v("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions,r.proposer)}function Nc(r){const e=r.transactions,o=Fe(r);return B(e,async n=>new Be(n.hash,o,n.index,new te(n.tree.namespace,Array.from(new Uint8Array(n.tree.data)))))}async function*Oc(r){const e=Fe(r),o=r.transactions;yield*B(o,async n=>new zr(new te(n.tree.namespace,Array.from(new Uint8Array(n.tree.data))),new v("BLOCK",new Uint8Array([0,0,0,0]).buffer),new Gr(new v("POS",new Uint8Array([0,0,0,0]).buffer),[new Ne(new v("EMPTY",new Uint8Array([0,0,0,0]).buffer),[])]),e.height,new v("COMMIT",n.tree.data.slice(0,32))))}class Fc{async getLeafFromHeight(e){const o=await this.getBlockFromHeight(e);return new Dr(new Ir(e,new Ce(new fe(new v("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new v("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null),new v("LEAF",new Uint8Array([0,0,0,0]).buffer),o.header,o.payload,[],o.header.timestamp,o.header.fee_info.account),new Ce(new fe(new v("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new v("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null))}async getTransactionFromHeightAndOffset(e,o){const n=await oe(O(b(),e)),c=Oc(n);return await nn(we(c,o))}async getBlockSummaries(e,o){const n=O(b(),e),c=F(n,o-e),a=U(c,async i=>Pc(i));return await P(a)}async getBlockFromHeight(e){const o=O(b(),e),n=await oe(o);return Bc(n)}async*streamTransactionSummaries(e){const o=mr(b(),a=>a.height<=e),n=De(o);yield*J(n,a=>X(Nc(a)))}async getTransactionSummaryRange(e,o,n){const c=this.streamTransactionSummaries(e),a=O(c,o),i=F(a,n);return await P(i)}async getTransactionSummaryRangeForRollup(e,o,n,c){const a=this.streamTransactionSummaries(o),i=hr(a,C=>C.transaction.vm===e),m=O(i,n),w=F(m,c);return await P(w)}}class ae extends L{constructor(o,n,c){super(c);t(this,"response");t(this,"status");this.status=o,this.response=n}toJSON(){return $o.convert(this)}}class qe{convert(e){return l(e,ae),{...Re.convert(e),status:e.status}}}const $o=new qe;class ye extends ae{constructor(e,o,n="bad server response: client error"){super(e,o,n),Object.freeze(this)}toJSON(){return Vo.encode(this)}}class qc{convert(e){return d(e,"code","message","status"),_(e,ye.name),new ye(Number(e.status),null,p.decode(e.message))}}class Lc extends qe{}class Gc extends u{constructor(){super(...arguments);t(this,"encoder",new Lc);t(this,"decoder",new qc)}}const Vo=new Gc;I(ye.name,Vo);class ve extends ae{constructor(e,o,n="bad server response"){super(e,o,n),Object.freeze(this)}toJSON(){return Ko.encode(this)}}class Uc{convert(e){return d(e,"code","message","status"),_(e,ve.name),new ve(Number(e.status),null,p.decode(e.message))}}class zc extends qe{}class Mc extends u{constructor(){super(...arguments);t(this,"encoder",new zc);t(this,"decoder",new Uc)}}const Ko=new Mc;I(ve.name,Ko);class ge extends ae{constructor(e,o,n="bad server response: server error"){super(e,o,n),Object.freeze(this)}}class Hc{convert(e){return d(e,"code","message","status"),_(e,ge.name),new ge(Number(e.status),null,p.decode(e.message))}}class Wc extends qe{}class Jc extends u{constructor(){super(...arguments);t(this,"encoder",new Wc);t(this,"decoder",new Hc)}}const jc=new Jc;I(ge.name,jc);class xe extends L{constructor(e="completer has already been completed"){super(e),Object.freeze(this)}}class Qc{convert(e){return d(e,"code","message"),_(e,xe.name),new xe(p.decode(e.message))}}class $c extends Te{}class Vc extends u{constructor(){super(...arguments);t(this,"encoder",new $c);t(this,"decoder",new Qc)}}const Kc=new Vc;I(xe.name,Kc);class be extends L{constructor(o,n,c=`invalid string value: have "${o}", want "${n}"`){super(c);t(this,"have");t(this,"want");this.have=o,this.want=n,Object.freeze(this)}toJSON(){return Yo.encode(this)}}class Yc{convert(e){return d(e,"code","have","want","message"),_(e,be.name),new be(p.decode(e.have),p.decode(e.want),p.decode(e.message))}}class Zc{convert(e){return l(e,be),{...Re.convert(e),have:p.encode(e.have),want:p.encode(e.want)}}}class Xc extends u{constructor(){super(...arguments);t(this,"encoder",new Zc);t(this,"decoder",new Yc)}}const Yo=new Xc;I(be.name,Yo);class j extends L{constructor(o,n=`no completer found for request id "${o}"`){super(n);t(this,"requestID");this.requestID=o,Object.freeze(this)}toJSON(){return Zo.encode(this)}}class es{convert(e){return d(e,"code","requestID","message"),_(e,j.name),new j(Do.decode(e.requestID),p.decode(e.message))}}class rs{convert(e){return l(e,j),{...Re.convert(e),requestID:Do.encode(e.requestID)}}}class os extends u{constructor(){super(...arguments);t(this,"encoder",new rs);t(this,"decoder",new es)}}const Zo=new os;I(j.name,Zo);class tr extends L{constructor(e="no url provided"){super(e),Object.freeze(this)}}class ts{convert(e){return d(e,"code","message"),_(e,tr.name),new tr(p.decode(e.message))}}class ns extends Te{}class cs extends u{constructor(){super(...arguments);t(this,"encoder",new ns);t(this,"decoder",new ts)}}const ss=new cs;I(tr.name,ss);class Q extends ae{constructor(o,n,c,a="response content type is not application/json"){super(n,c,a);t(this,"haveHeaderType");this.haveHeaderType=o,Object.freeze(this)}static fromResponse(o,n){return new Q(o.headers.get("content-type")??"undefined",o.status,o,n)}toJSON(){return Xo.encode(this)}}class as{convert(e){return d(e,"code","status","have","want","message"),_(e,Q.name),new Q(p.decode(e.code),s.decode(e.status),null,p.decode(e.message))}}class is{convert(e){return{...$o.convert(e),have:p.encode(e.haveHeaderType),want:p.encode("application/json")}}}class ds extends u{constructor(){super(...arguments);t(this,"encoder",new is);t(this,"decoder",new as)}}const Xo=new ds;I(Q.name,Xo);class $ extends L{constructor(e="unimplemented"){super(e),Object.freeze(this);debugger}}class ls{convert(e){return d(e,"code","message"),_(e,$.name),new $(p.decode(e.message))}}class us extends Te{}class hs extends u{constructor(){super(...arguments);t(this,"encoder",new us);t(this,"decoder",new ls)}}const ms=new hs;I($.name,ms);class Ee extends L{constructor(o,n="error in web worker"){super(n);t(this,"error");this.error=o,Object.freeze(this)}toJSON(){return et.encode(this)}}class ps{convert(e){return d(e,"code","error","message"),_(e,Ee.name),new Ee(Ie.decode(e.error),p.decode(e.message))}}class ws{convert(e){return{...Re.convert(e),error:Ie.encode(e.error)}}}class fs extends u{constructor(){super(...arguments);t(this,"encoder",new ws);t(this,"decoder",new ps)}}const et=new fs;I(Ee.name,et);var Hr=(r=>(r[r.success=0]="success",r[r.full=1]="full",r[r.failed=2]="failed",r))(Hr||{});class Cs{getFromEmpty(){}}class ys{getFromEmpty(){return null}}class vs{getFromEmpty(){throw new cr}}const gs={returnNull:new ys,returnUndefined:new Cs,throwMissingElement:new vs};class xs{constructor(e){t(this,"maxSize");E(!Number.isNaN(e),"maxSize must not be NaN"),E(Number.isInteger(e),"maxSize must be an integer"),E(e>0,"maxSize must be greater than 0"),this.maxSize=e}nextIndex(e){return E(e>=0,"index must be greater than or equal to 0"),(e+1)%this.maxSize}}class bs{constructor(e){t(this,"preComputedSizeMinus1");E(!Number.isNaN(e),"maxSize must not be NaN"),E(Number.isInteger(e),"maxSize must be an integer"),E(e>0,"maxSize must be greater than 0"),E(rt(e),"maxSize must be a power of two"),this.preComputedSizeMinus1=e-1}nextIndex(e){return E(e>=0,"index must be greater than or equal to 0"),e+1&this.preComputedSizeMinus1}}function rt(r){return(r&r-1)===0}class ke extends L{constructor(e="buffer full"){super(e),Object.freeze(this)}}class Es{convert(e){return d(e,"code","message"),_(e,ke.name),new ke(p.decode(e.message))}}class ks extends Te{}class Ss extends u{constructor(){super(...arguments);t(this,"encoder",new ks);t(this,"decoder",new Es)}}const Rs=new Ss;I(ke.name,Rs);class Ts{putToFull(e,o){return e.get(),e.put(o)}}class Is{putToFull(){return Hr.full}}class _s{putToFull(){throw new ke}}const Ds={overwriteOldest:new Ts,returnFull:new Is,throw:new _s};function As(r){return rt(r)?new bs(r):new xs(r)}class Bs{constructor(e,o,n){t(this,"readIndex",0);t(this,"writeIndex",0);t(this,"buffer");t(this,"nextIndex");t(this,"getOnEmpty");t(this,"putOnFull");E(!Number.isNaN(e),"maxSize must not be NaN"),this.buffer=new Array(e),this.nextIndex=As(e),this.getOnEmpty=o,this.putOnFull=n}get maxSize(){return this.buffer.length}get length(){return this.writeIndex<this.readIndex?this.writeIndex+this.maxSize-this.readIndex:this.writeIndex-this.readIndex}put(e){const o=this.nextIndex.nextIndex(this.writeIndex);return o===this.readIndex?this.putOnFull.putToFull(this,e):(this.buffer[this.writeIndex]=e,this.writeIndex=o,Hr.success)}get(){if(this.readIndex===this.writeIndex)return this.getOnEmpty.getFromEmpty(this);const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),e}[Symbol.iterator](){return{next:()=>{const e=this.get();return e==null?{value:void 0,done:!0}:{value:e,done:!1}}}}}function A(r=32,e=gs.returnUndefined,o=Ds.overwriteOldest){return new Bs(r,e,o)}class Wr{constructor(e,o,n,c,a,i,m,w){t(this,"hash");t(this,"height");t(this,"time");t(this,"numTransactions");t(this,"proposerID");t(this,"feeRecipient");t(this,"size");t(this,"blockReward");this.hash=e,this.height=o,this.time=n,this.numTransactions=c,this.proposerID=a,this.feeRecipient=i,this.size=m,this.blockReward=w}toJSON(){return ie.encode(this)}}class Ps{convert(e){return d(e,"hash","height","time","num_transactions","proposer_id","fee_recipient","size","block_reward"),new Wr(h.decode(e.hash),s.decode(e.height),G.decode(e.time),s.decode(e.num_transactions),y.decode(e.proposer_id),y.decode(e.fee_recipient),s.decode(e.size),_o.decode(e.block_reward))}}class Ns{convert(e){return l(e,Wr),{hash:h.encode(e.hash),height:s.encode(e.height),time:G.encode(e.time),num_transactions:s.encode(e.numTransactions),proposer_id:y.encode(e.proposerID),fee_recipient:y.encode(e.feeRecipient),size:s.encode(e.size),block_reward:_o.encode(e.blockReward)}}}class Os extends x{constructor(){super(...arguments);t(this,"encoder",new Ns);t(this,"decoder",new Ps)}}const ie=new Os,V="latest";class Jr{constructor(e,o,n){t(this,"rollups");t(this,"transactions");t(this,"blocks");this.rollups=e,this.transactions=o,this.blocks=n}toJSON(){return jr.encode(this)}}class Fs{convert(e){return d(e,"rollups","transactions","blocks"),new Jr(s.decode(e.rollups),s.decode(e.transactions),s.decode(e.blocks))}}class qs{convert(e){return l(e,Jr),{rollups:s.encode(e.rollups),transactions:s.encode(e.transactions),blocks:s.encode(e.blocks)}}}class Ls extends u{constructor(){super(...arguments);t(this,"encoder",new qs);t(this,"decoder",new Fs)}}const jr=new Ls;class Qr{constructor(e,o,n,c){t(this,"blockTime");t(this,"blockSize");t(this,"blockTransactions");t(this,"blockHeights");this.blockTime=e,this.blockSize=o,this.blockTransactions=n,this.blockHeights=c}toJSON(){return $r.encode(this)}}class Gs{convert(e){return d(e,"block_time","block_size","block_transactions","block_heights"),new Qr(g.decode(e.block_time),g.decode(e.block_size),g.decode(e.block_transactions),g.decode(e.block_heights))}}class Us{convert(e){return l(e,Qr),{block_time:g.encode(e.blockTime),block_size:g.encode(e.blockSize),block_transactions:g.encode(e.blockTransactions),block_heights:g.encode(e.blockHeights)}}}class zs extends u{constructor(){super(...arguments);t(this,"encoder",new Us);t(this,"decoder",new Gs)}}const $r=new zs;class Vr{constructor(e,o,n,c,a){t(this,"latestBlock");t(this,"genesisOverview");t(this,"latestBlocks");t(this,"latestTransactions");t(this,"histograms");this.latestBlock=e,this.genesisOverview=o,this.latestBlocks=n,this.latestTransactions=c,this.histograms=a}toJSON(){return Kr.encode(this)}}class Ms{convert(e){return d(e,"latest_block","genesis_overview","latest_blocks","latest_transactions","histograms"),new Vr(ie.decode(e.latest_block),jr.decode(e.genesis_overview),K.decode(e.latest_blocks),Y.decode(e.latest_transactions),$r.decode(e.histograms))}}class Hs{convert(e){return l(e,Vr),{latest_block:ie.encode(e.latestBlock),genesis_overview:jr.encode(e.genesisOverview),latest_blocks:K.encode(e.latestBlocks),latest_transactions:Y.encode(e.latestTransactions),histograms:$r.encode(e.histograms)}}}class Ws extends u{constructor(){super(...arguments);t(this,"encoder",new Hs);t(this,"decoder",new Ms)}}const Kr=new Ws;class Yr{constructor(e){t(this,"blockDetail");this.blockDetail=e}toJSON(){return Zr.encode(this)}}class Js{convert(e){return d(e,"block_detail"),new Yr(ie.decode(e.block_detail))}}class js{convert(e){return l(e,Yr),{block_detail:ie.encode(e.blockDetail)}}}class Qs extends x{constructor(){super(...arguments);t(this,"encoder",new js);t(this,"decoder",new Js)}}const Zr=new Qs;class Xr{constructor(e){t(this,"blockSummaries");this.blockSummaries=e}toJSON(){return eo.encode(this)}}class $s{convert(e){return d(e,"block_summaries"),new Xr(K.decode(e.block_summaries))}}class Vs{convert(e){return l(e,Xr),{block_summaries:K.encode(e.blockSummaries)}}}class Ks extends x{constructor(){super(...arguments);t(this,"encoder",new Vs);t(this,"decoder",new $s)}}const eo=new Ks;class ro{constructor(e){t(this,"explorerSummary");this.explorerSummary=e}toJSON(){return oo.encode(this)}}class Ys{convert(e){return d(e,"explorer_summary"),new ro(Kr.decode(e.explorer_summary))}}class Zs{convert(e){return l(e,ro),{explorer_summary:Kr.encode(e.explorerSummary)}}}class Xs extends u{constructor(){super(...arguments);t(this,"encoder",new Zs);t(this,"decoder",new Ys)}}const oo=new Xs;class to{static heightAndOffset(e,o){return new de(e,o)}static hash(e){return new le(e)}toJSON(){return ot.encode(this)}}class ea{convert(e){if(l(e,to),e instanceof de)return{height:s.encode(e.height),offset:s.encode(e.offset)};if(e instanceof le)return{hash:h.encode(e.hash)};throw new q}}class ra{convert(e){if(k(e,"height",S)&&k(e,"offset",S))return new de(s.decode(e.height),s.decode(e.offset));if(k(e,"hash",S))return new le(h.decode(e.hash));throw new q}}class oa extends u{constructor(){super(...arguments);t(this,"encoder",new ea);t(this,"decoder",new ra)}}const ot=new oa;class de extends to{constructor(o,n){super();t(this,"height");t(this,"offset");this.height=o,this.offset=n}}class le extends to{constructor(o){super();t(this,"hash");this.hash=o}}const tt=s;class no{constructor(e,o){t(this,"namespace");t(this,"payload");this.namespace=e,this.payload=o}toJSON(){return nr.encode(this)}}class ta{convert(e){return d(e,"namespace","payload"),new no(tt.decode(e.namespace),Bo.decode(e.payload))}}class na{convert(e){return l(e,no),{namespace:tt.encode(e.namespace),payload:Bo.encode(e.payload)}}}class ca extends u{constructor(){super(...arguments);t(this,"encoder",new na);t(this,"decoder",new ta)}}const nr=new ca,nt=new M(new H(nr),new W(nr));class co{constructor(e,o,n,c,a,i,m,w,C){t(this,"hash");t(this,"height");t(this,"blockConfirmed");t(this,"offset");t(this,"numTransactions");t(this,"size");t(this,"time");t(this,"sequencingFees");t(this,"feeDetails");this.hash=e,this.height=o,this.blockConfirmed=n,this.offset=c,this.numTransactions=a,this.size=i,this.time=m,this.sequencingFees=w,this.feeDetails=C}toJSON(){return so.encode(this)}}class sa{convert(e){return d(e,"hash","height","block_confirmed","offset","num_transactions","size","time","sequencing_fees","fee_details"),new co(h.decode(e.hash),s.decode(e.height),Pe.decode(e.block_confirmed),s.decode(e.offset),s.decode(e.num_transactions),s.decode(e.size),G.decode(e.time),[],[])}}class aa{convert(e){return l(e,co),{hash:h.encode(e.hash),height:s.encode(e.height),block_confirmed:Pe.encode(e.blockConfirmed),offset:s.encode(e.offset),num_transactions:s.encode(e.numTransactions),size:s.encode(e.size),time:G.encode(e.time),sequencing_fees:[],fee_details:[]}}}class ia extends u{constructor(){super(...arguments);t(this,"encoder",new aa);t(this,"decoder",new sa)}}const so=new ia;class ao{constructor(e,o){t(this,"details");t(this,"data");this.details=e,this.data=o}toJSON(){return io.encode(this)}}class da{convert(e){return d(e,"details","data"),new ao(so.decode(e.details),nt.decode(e.data))}}class la{convert(e){return l(e,ao),{details:so.encode(e.details),data:nt.encode(e.data)}}}class ua extends u{constructor(){super(...arguments);t(this,"encoder",new la);t(this,"decoder",new da)}}const io=new ua;class Se{constructor(e){t(this,"transactionDetail");this.transactionDetail=e}toJSON(){return lo.encode(this)}}class ha{convert(e){return d(e,"transaction_detail"),new Se(io.decode(e.transaction_detail))}}class ma{convert(e){return l(e,Se),{transaction_detail:io.encode(e.transactionDetail)}}}class pa extends x{constructor(){super(...arguments);t(this,"encoder",new ma);t(this,"decoder",new ha)}}const lo=new pa;class Le{constructor(){}static block(e){return new Ge(e)}static namespace(e){return new Ue(e)}static none(){return new ho}toJSON(){return uo.encode(this)}}class wa{convert(e){return k(e,"block",S)?new Ge(s.decode(e.block)):k(e,"namespace",S)?new Ue(s.decode(e.namespace)):new ho}}class fa{convert(e){if(l(e,Le),e instanceof ho)return{};if(e instanceof Ge)return{block:s.encode(e.block)};if(e instanceof Ue)return{namespace:s.encode(e.namespace)};throw new q}}class Ca extends x{constructor(){super(...arguments);t(this,"encoder",new fa);t(this,"decoder",new wa)}}const uo=new Ca;class ho extends Le{constructor(){super()}convertURL(e){return e}}class Ge extends Le{constructor(o){super();t(this,"block");this.block=o}convertURL(o){return new URL(`${o.pathname}/block/${this.block}`,o)}}class Ue extends Le{constructor(o){super();t(this,"namespace");this.namespace=o}convertURL(o){return new URL(`${o.pathname}/namespace/${this.namespace}`,o)}}class ee{constructor(e){t(this,"transactionSummaries");this.transactionSummaries=e}toJSON(){return mo.encode(this)}}class ya{convert(e){return d(e,"transaction_summaries"),new ee(Y.decode(e.transaction_summaries))}}class va{convert(e){return l(e,ee),{transaction_summaries:Y.encode(e.transactionSummaries)}}}class ga extends x{constructor(){super(...arguments);t(this,"encoder",new va);t(this,"decoder",new ya)}}const mo=new ga;class ze{constructor(e){t(this,"limit");this.limit=e}static latest(e){return new Me(e)}static heightAndOffset(e,o,n){return new He(e,o,n)}static hash(e,o){return new We(e,o)}toJSON(){return po.encode(this)}}class xa{convert(e){return d(e,"limit"),k(e,"height",S)&&k(e,"offset",S)?new He(s.decode(e.height),s.decode(e.offset),s.decode(e.limit)):k(e,"hash",S)?new We(h.decode(e.hash),s.decode(e.limit)):new Me(s.decode(e.limit))}}class ba{convert(e){if(l(e,ze),e instanceof Me)return{limit:s.encode(e.limit)};if(e instanceof He)return{height:s.encode(e.height),offset:s.encode(e.offset),limit:s.encode(e.limit)};if(e instanceof We)return{hash:h.encode(e.hash),limit:s.encode(e.limit)};throw new q}}class Ea extends x{constructor(){super(...arguments);t(this,"encoder",new ba);t(this,"decoder",new xa)}}const po=new Ea;class Me extends ze{constructor(e){super(e)}convertURL(e){return new URL(`transactions/latest/${this.limit}`,e)}}class He extends ze{constructor(o,n,c){super(c);t(this,"height");t(this,"offset");this.height=o,this.offset=n}convertURL(o){return new URL(`transactions/from/${this.height}/${this.offset}/${this.limit}`,o)}}class We extends ze{constructor(o,n){super(n);t(this,"hash");this.hash=o}convertURL(o){return new URL(`transactions/hash/${this.hash}/${this.limit}`,o)}}function So(r){return new Wr(r.hash,r.height,r.time,r.numTransactions,r.proposer,r.proposer,r.size,r.fees)}function Ve(r){return new ar(r.hash,r.height,r.proposer,r.numTransactions,r.size,r.time)}function Ro(r,e){return new ao(new co(e.hash,e.block,!0,e.index,r.numTransactions,e.size,e.time,[],[]),[new no(e.tree.namespace,e.tree.data)])}function he(r,e){return new _e(e.hash,[e.tree.namespace],e.block,e.time,e.index,r.numTransactions)}class ka{async getBlockDetail(e){const o=e.target,n=await(o===V?an(b()):oe(we(b(),o)));return new Yr(So(n))}async getBlockSummaries(e){const o=mr(b(),m=>e.from===V||m.height<=e.from),n=De(o),c=F(n,e.limit),a=U(c,async m=>Ve(m)),i=await P(a);return new Xr(i)}async getTransactionDetail(e){const o=b();if(e instanceof de){const n=je(o,m=>m.height<=e.height),c=J(n,m=>B(m.transactions,async w=>Ro(m,w))),a=we(X(c),e.offset),i=await oe(a);return new Se(i)}if(e instanceof le){const n=J(o,a=>B(a.transactions,async i=>Ro(a,i))),c=await sn(n,a=>a.details.hash===e.hash);if(!c)throw new Tt(e.hash);return new Se(c)}throw new $}applyFilter(e,o){return o instanceof Ge?bo(e,n=>n.height==o.block):o instanceof Ue?bo(e,n=>n.rollups.indexOf(o.namespace)>=0):e}async getTransactionSummaries(e){const o=b(),{target:n,filter:c}=e;if(n instanceof Me){const i=J(o,R=>B(R.transactions,async f=>he(R,f))),m=X(i),w=this.applyFilter(m,c),C=await $e(Je(w,n.limit));return new ee(C)}if(n instanceof He){const a=je(o,f=>f.height<=n.height),i=J(a,f=>B(f.transactions,async T=>he(f,T))),m=X(i),w=we(m,n.offset),C=this.applyFilter(w,c),R=await $e(Je(C,n.limit));return new ee(R)}if(n instanceof We){const a=b(),i=J(a,f=>B(f.transactions,async T=>new _e(T.hash,[T.tree.namespace],T.block,T.time,T.index,f.numTransactions))),m=je(i,f=>f.hash!==n.hash),w=X(m),C=this.applyFilter(w,c),R=await $e(Je(C,n.limit));return new ee(R)}throw new $}async getExplorerOverview(){let e;const o=A(11),n=A(51),c=A(51),a=A(51),i=A(51),m=A(11);let w=0,C=0;const R=new Map;for await(const f of b()){e=So(f),o.put(Ve(f)),n.put(f.size),c.put(Math.round(f.genTime/1e3)),a.put(f.numTransactions),i.put(f.height),w++,C+=f.numTransactions;for await(const T of f.transactions){m.put(he(f,T));const wt=R.get(T.tree.namespace)||0;R.set(T.tree.namespace,wt+1)}}return new ro(new Vr(e,new Jr(Array.from(R.keys()).length,C,w),Array.from(o),Array.from(m),new Qr(Array.from(c),Array.from(n),Array.from(a),Array.from(i))))}async getSearchResult(e){const o=A(101),n=A(10),c=A(10);for await(const a of b())o.put(a);for(const a of o){a.hash.toString().startsWith(e.query)&&n.put(Ve(a));for await(const i of a.transactions)i.hash.toString().startsWith(e.query)&&c.put(he(a,i))}return new lr(new ir(Array.from(n),Array.from(c)))}}class Sa{async blockHeight(){return(await qo(b())).height}}class Ra{constructor(){t(this,"availability",new Fc);t(this,"status",new Sa);t(this,"explorer",new ka)}}function D(r){return async e=>(Ta(e),Ia(e),r.convert(await e.json()))}function Ta(r){if(!r.ok)throw r.status>=500&&r.status<600?new ge(r.status,r):r.status>=400&&r.status<500?new ye(r.status,r):new ve(r.status,r)}function Ia(r){const e=r.headers.get("content-type");if(!e||!e.startsWith("application/json"))throw Q.fromResponse(r,e||"undefined")}async function _a(r,e){return new Ae(r.header,r.hash,r.size,r.payload.transaction_nmt.length,e.leaf.proposer_id)}async function*Da(r,e){const o=e[Symbol.asyncIterator]();yield*B(on(r.leaf.block_payload.transaction_nmt),async n=>{const c=r.leaf.block_payload.transaction_nmt.indexOf(n),a=await o.next();if(a.done)throw new Error("Not enough transactions");return new Be(a.value.hash,r.leaf.block_header,c,n)})}class Aa{constructor(e,o){t(this,"fetcher");t(this,"baseURL");this.fetcher=e,this.baseURL=o}getLeafFromHeight(e){const o=new URL(`leaf/${e}`,this.baseURL);return this.fetcher(o.toString()).then(D(Ar.decoder))}getTransactionFromHeightAndOffset(e,o){const n=new URL(`transaction/${e}/${o}`,this.baseURL);return this.fetcher(n.toString()).then(D(Mr.decoder))}async getBlockSummaries(e,o){const n=Qe(o-e),c=U(n,i=>Promise.all([this.getBlockFromHeight(e+i),this.getLeafFromHeight(e+i)])),a=U(c,([i,m])=>_a(i,m));return await P(a)}getBlockFromHeight(e){const o=new URL(`block/${e}`,this.baseURL);return this.fetcher(o.toString()).then(D(kr.decoder))}async*streamBlocksFromHeightRange(e,o){const n=Qe(e),c=U(n,i=>this.getLeafFromHeight(e-i)),a=Lo(c,i=>De(Da(i,U(Qe(i.leaf.block_payload.transaction_nmt.length),m=>this.getTransactionFromHeightAndOffset(i.leaf.block_header.height,m)))));if(o===void 0){yield*a;return}yield*F(a,o)}async getTransactionSummaryRange(e,o,n){const c=this.streamBlocksFromHeightRange(e,50),a=O(c,o),i=F(a,n);return await P(i)}async getTransactionSummaryRangeForRollup(e,o,n,c){const a=this.streamBlocksFromHeightRange(o,50),i=hr(a,C=>C.transaction.vm===e),m=O(i,n),w=F(m,c);return await P(w)}}class Ba{constructor(e,o){t(this,"fetcher");t(this,"baseURL");this.fetcher=e,this.baseURL=o}async getBlockDetail(e){const o=new URL(`block/${e.target}`,this.baseURL);return this.fetcher(o.toString()).then(D(Zr.decoder))}async getBlockSummaries(e){const o=new URL(`blocks/${e.from}/${e.limit}`,this.baseURL);return this.fetcher(o.toString()).then(D(eo.decoder))}async getTransactionDetail(e){let o=null;if(e instanceof le?o=new URL(`transaction/hash/${e.hash}`,this.baseURL):e instanceof de&&(o=new URL(`transaction/${e.height}/${e.offset}`,this.baseURL)),!o)throw new $;return this.fetcher(o.toString()).then(D(lo.decoder))}async getTransactionSummaries(e){const{target:o,filter:n}=e;let c=o.convertURL(this.baseURL);return c=n.convertURL(c),this.fetcher(c.toString()).then(D(mo.decoder))}async getExplorerOverview(){const e=new URL("explorer-summary",this.baseURL);return this.fetcher(e.toString()).then(D(oo.decoder))}async getSearchResult(e){const o=new URL(`search/${encodeURIComponent(e.query)}`,this.baseURL);return this.fetcher(o.toString()).then(D(ur.decoder))}}class Pa{constructor(e,o){t(this,"fetcher");t(this,"baseURL");t(this,"blockHeightURL");t(this,"blockHeightResponseValidator",D(s.decoder));this.fetcher=e,this.baseURL=o,this.blockHeightURL=new URL("block-height",this.baseURL)}blockHeight(){return this.fetcher(this.blockHeightURL).then(this.blockHeightResponseValidator)}}class Na{constructor(e,o){t(this,"availability");t(this,"status");t(this,"explorer");this.availability=new Aa(e,new URL("availability/",o)),this.status=new Pa(e,new URL("status/",o)),this.explorer=new Ba(e,new URL("explorer/",o))}}function me(){return E(!1,"completer is not ready, this should never be reached")}function pe(){throw new xe}class Oa{constructor(){t(this,"resolve",me);t(this,"reject",me);t(this,"completed",!1);t(this,"promise");this.promise=new Promise((e,o)=>{this.resolve=e,this.reject=o}),E(this.resolve!==me,"resolve should be set"),E(this.reject!==me,"resolve should be set")}get isCompleted(){return this.completed}complete(e){const o=this.resolve,n=this.reject;if(this.completed=!0,this.resolve=pe,this.reject=pe,e instanceof Promise){e.then(o,n);return}o(e)}completeError(e){this.reject(e),this.completed=!0,this.resolve=pe,this.reject=pe}}function Fa(){return new Oa}const Z=s;class wo{constructor(e,o,n,c){t(this,"requestID");t(this,"api");t(this,"method");t(this,"param");this.requestID=e,this.api=o,this.method=n,this.param=c}toJSON(){return{requestID:this.requestID,api:this.api,method:this.method,param:this.param}}}class qa{convert(e){return d(e,"requestID","api","method","param"),new wo(Z.decode(e.requestID),p.decode(e.api),p.decode(e.method),e.param)}}class La{convert(e){return l(e,wo),{requestID:Z.encode(e.requestID),api:p.encode(e.api),method:p.encode(e.method),param:e.param}}}class Ga extends u{constructor(){super(...arguments);t(this,"encoder",new La);t(this,"decoder",new qa)}}const Ua=new Ga;class fo{constructor(e){t(this,"requestID");this.requestID=e}}class Co extends fo{constructor(o,n){super(o);t(this,"response");this.response=n}toJSON(){return ct.encode(this)}}class za{convert(e){return d(e,"requestID","response"),new Co(Z.decode(e.requestID),e.response)}}class Ma{convert(e){return l(e,Co),{requestID:Z.encode(e.requestID),response:e.response}}}class Ha extends u{constructor(){super(...arguments);t(this,"encoder",new Ma);t(this,"decoder",new za)}}const ct=new Ha;class yo extends fo{constructor(o,n){super(o);t(this,"error");this.error=n}toJSON(){return st.encode(this)}}class Wa{convert(e){return d(e,"requestID","error"),new yo(Z.decode(e.requestID),Ie.decode(e.error))}}class Ja{convert(e){return l(e,yo),{requestID:Z.encode(e.requestID),error:Ie.encode(e.error)}}}class ja extends u{constructor(){super(...arguments);t(this,"encoder",new Ja);t(this,"decoder",new Wa)}}const st=new ja;class Qa{convert(e){if(k(e,"response",S))return ct.decode(e);if(k(e,"error",S))return st.decode(e);throw new q}}class $a{convert(e){return l(e,fo),e.toJSON()}}class Va extends u{constructor(){super(...arguments);t(this,"encoder",new $a);t(this,"decoder",new Qa)}}const To=new Va;class vo{constructor(e){t(this,"target");this.target=e}static latest(){return new it}static height(e){return new dt(e)}toJSON(){return at.encode(this)}}class Ka{convert(e){return l(e,vo),typeof e.target=="number"?s.encode(e.target):p.encode(e.target)}}class Ya{convert(e){return e===V?new it:new dt(s.decode(e))}}class Za extends x{constructor(){super(...arguments);t(this,"encoder",new Ka);t(this,"decoder",new Ya)}}const at=new Za;class it extends vo{constructor(){super(V)}}class dt extends vo{constructor(e){super(e)}}class go{constructor(e){t(this,"limit");this.limit=e}static latest(e){return new ut(e)}static from(e,o){return new ht(e,o)}toJSON(){return lt.encode(this)}}class Xa{convert(e){return l(e,go),Rt(e.from)?{from:s.encode(e.from),limit:s.encode(e.limit)}:{from:p.encode(e.from),limit:s.encode(e.limit)}}}class ei{convert(e){return d(e,"from","limit"),e.from===V?new ut(s.decode(e.limit)):new ht(s.decode(e.from),s.decode(e.limit))}}class ri extends x{constructor(){super(...arguments);t(this,"encoder",new Xa);t(this,"decoder",new ei)}}const lt=new ri;class ut extends go{constructor(e){super(e)}get from(){return V}}class ht extends go{constructor(o,n){super(n);t(this,"from");this.from=o}}class mt{constructor(e,o){t(this,"target");t(this,"filter");this.target=e,this.filter=o}toJSON(){return pt.encode(this)}}class oi{convert(e){return d(e,"filter","target"),new mt(po.decode(e.target),uo.decode(e.filter))}}class ti{convert(e){return l(e,mt),{filter:uo.encode(e.filter),target:po.encode(e.target)}}}class ni extends x{constructor(){super(...arguments);t(this,"encoder",new ti);t(this,"decoder",new oi)}}const pt=new ni;function ci(r){return new Worker(""+new URL("web_worker_api.js-CzNRf7kP.js",import.meta.url).href,{name:r==null?void 0:r.name})}class si{constructor(e){t(this,"worker");t(this,"nextRequestID",0);t(this,"requestCompleters",new Map);this.worker=e,e.onmessageerror,e.addEventListener("message",this.handleMessage.bind(this)),e.addEventListener("messageerror",this.handleMessageError.bind(this)),e.addEventListener("error",this.handleError.bind(this))}async submitRequest(e,o,n,c){const[a,i]=this.nextRequest();try{return this.worker.postMessage(Ua.encode(new wo(a,o,n,c))),await i.promise.then(m=>{if(m instanceof yo)throw new Ee(m.error);if(m instanceof Co){const{response:w}=m;return e.decode(w)}throw new re(typeof m,"WebWorkerResponse")})}finally{this.requestCompleters.delete(a)}}nextRequest(){const e=this.nextRequestID++,o=Fa();return this.requestCompleters.set(e,o),[e,o]}handleMessage(e){const o=To.decode(e.data),n=this.requestCompleters.get(o.requestID);if(n===void 0)throw new j(o.requestID);n.complete(o)}handleMessageError(e){const o=To.decode(e.data),n=this.requestCompleters.get(o.requestID);if(n===void 0)throw new j(o.requestID);n.completeError(o)}handleError(e){debugger;console.error("encountered error setting up Web worker",e)}}class ai{constructor(e){t(this,"helper");this.helper=e}async sendRequest(e,o,...n){return this.helper.submitRequest(e,"availability",o,n)}async getLeafFromHeight(e){return await this.sendRequest(Ar,"getLeafFromHeight",e)}async getTransactionFromHeightAndOffset(e,o){return await this.sendRequest(Mr,"getTransactionFromHeightAndOffset",e,o)}async getBlockSummaries(e,o){return await this.sendRequest(qn,"getBlockSummaries",e,o)}async getBlockFromHeight(e){return await this.sendRequest(kr,"getBlockFromHeight",e)}async getTransactionSummaryRange(e,o,n){return await this.sendRequest(Eo,"getTransactionSummaryRange",e,o,n)}async getTransactionSummaryRangeForRollup(e,o,n,c){return await this.sendRequest(Eo,"getTransactionSummaryRangeForRollup",e,o,n,c)}}class ii{constructor(e){t(this,"helper");this.helper=e}async sendRequest(e,o,...n){return this.helper.submitRequest(e,"status",o,n)}async blockHeight(){return await this.sendRequest(s,"blockHeight")}}class di{constructor(e){t(this,"helper");this.helper=e}async sendRequest(e,o,...n){return this.helper.submitRequest(e,"explorer",o,n)}async getBlockDetail(e){return await this.sendRequest(Zr,"getBlockDetail",at.encode(e))}async getBlockSummaries(e){return await this.sendRequest(eo,"getBlockSummaries",lt.encode(e))}async getTransactionDetail(e){return await this.sendRequest(lo,"getTransactionDetail",ot.encode(e))}async getTransactionSummaries(e){return await this.sendRequest(mo,"getTransactionSummaries",pt.encode(e))}async getExplorerOverview(){return await this.sendRequest(oo,"getExplorerOverview",null)}async getSearchResult(e){return await this.sendRequest(ur,"getSearchResult",Oo.encode(e))}}class li{constructor(){t(this,"availability");t(this,"status");t(this,"explorer");const e=new ci,o=new si(e);this.availability=new ai(o),this.status=new ii(o),this.explorer=new di(o)}}const ui=It.createContext(hi());function hi(){return typeof window<"u"&&"Worker"in window||typeof self<"u"&&"Worker"in self?new li:new Ra}function mi(){return typeof window>"u"?fetch:fetch.bind(window)}const Io=({url:r,children:e})=>yt(ui.Provider,{value:new Na(mi(),r),children:e});try{Io.displayName="ProvideCappuccinoLiveService",Io.__docgenInfo={description:`ProvideCappuccinoLiveService is a component that provides a Cappuccino
HotShot Query Service API targeting the given URL.`,displayName:"ProvideCappuccinoLiveService",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"URL"}}}}}catch{}export{lr as C,Ze as P,$ as U,ir as a,ar as b,_e as c,No as d,ui as e,vo as f,go as g,mt as h,ze as i,Le as j,to as k};
