(function(){"use strict";class ri{breakpoint(){}}function oi(){return new ri}const ni=oi();function We(){ni.breakpoint()}class si{assert(){}}function ci(){return new si}const ai=ci();function U(t,e){ai.assert(t,e)}function Je(t,e){U(typeof t===e,`type assertion failed: expected "${e}", received "${typeof t}"`)}function ii(t){U(t!=null,"expected a non-null value, received null")}function h(t,e){U(t instanceof e,`given value is not an instance of "${e.name}", specific type is "${typeof t=="object"&&t!==null?t.constructor.name:typeof t}"`)}class Tt extends Error{key;haveType;constructor(e,r,o=`expected object with key: "${r}", instead found ${e}`){super(o),this.haveType=e,this.key=r,Object.freeze(this),We()}toJSON(){return{code:Tt.name,message:this.message,have:this.haveType,key:this.key}}}class R{encode(e){return this.encoder.convert(e)}decode(e){return this.decoder.convert(e)}}class i extends R{}function di(t){return typeof t=="boolean"}function Dt(t){return typeof t=="number"}function ie(t){return typeof t=="string"}function li(t){return typeof t=="bigint"}function hi(t){return typeof t=="object"&&t!==null}function G(t){return t!==void 0}function ui(t,e){return Array.isArray(t)&&t.every(e)}function wi(t){return e=>ui(e,t)}function J(t,e,r){return hi(t)&&e in t&&r(t[e])}function d(t,...e){if(typeof t!="object")throw new Error("expected object");if(t===null)throw new Error("received null");for(const r of e)if(!(r in t))throw new Tt("object",r)}function E(t,e){if(!ie(t.code))throw new Error("code must be a string");if(t.code!==e)throw new Error(`expected code to be ${e}, got ${t.code}`)}class v extends Error{constructor(e){super(e)}get code(){return this.constructor.name}toJSON(){return j.convert(this)}}class V{convert(e){return h(e,v),{code:e.code,message:e.message}}}const j=new V,pi="NoCodecFoundError";class je extends Error{codec;constructor(e,r=`no codec found for: "${e}"`){super(r),this.codec=e,Object.freeze(this),We()}toJSON(){return{code:u.encode(je.name),message:u.encode(this.message),codec:u.encode(this.codec)}}get code(){return pi}}const _t=new Map;class mi{convert(e){d(e,"code");const r=u.decode(e.code),o=_t.get(r);if(!o)throw new je(r);return o.decode(e)}}class fi{convert(e){const r=_t.get(e.code);if(!r)throw new je(e.code);return r.encode(e)}}class gi extends R{encoder=new fi;decoder=new mi}const Z=new gi;function x(t,e){_t.set(t,e)}const Ut="InvalidTypeError";class D extends v{have;want;constructor(e,r,o=`invalid type: have "${e}", want "${r}"`){super(o),this.have=e,this.want=r,Object.freeze(this)}toJSON(){return Gn.encode(this)}get code(){return Ut}}class yi{convert(e){return d(e,"code","have","want","message"),E(e,Ut),new D(u.decode(e.have),u.decode(e.want),u.decode(e.message))}}class Ci{convert(e){return h(e,D),{...j.convert(e),have:u.encode(e.have),want:u.encode(e.want)}}}class bi extends i{encoder=new Ci;decoder=new yi}const Gn=new bi;x(Ut,Gn);const Vn=wi(G);class vi{convert(e){return e}}const Wn=new vi;class Ei extends R{encoder=Wn;decoder=Wn}const qe=new Ei;class I{itemCodec;constructor(e){this.itemCodec=e}convert(e){if(!Vn(e)){const r=typeof e=="object"&&e!==null?e.constructor.name:typeof e,o="array";throw new Error(`invalid array value: have "${r}", want "${o}"`)}return e.map(r=>this.itemCodec.decode(r))}}class B{itemCodec;constructor(e){this.itemCodec=e}convert(e){return h(e,Array),e.map(r=>this.itemCodec.encode(r))}}class A extends i{encoder;decoder;constructor(e,r){super(),this.encoder=r,this.decoder=e}}class P{itemCodec;constructor(e){this.itemCodec=e}convert(e){return e===null?null:this.itemCodec.decode(e)}}class O{itemCodec;constructor(e){this.itemCodec=e}convert(e){return e===null?null:(ii(e),this.itemCodec.encode(e))}}class M extends i{encoder;decoder;constructor(e,r){super(),this.encoder=r,this.decoder=e}}class xi{convert(e){if(!ie(e))throw new D(typeof e,"string");return e}}class ki{convert(e){return Je(e,"string"),e}}class Si extends i{encoder=new ki;decoder=new xi}const u=new Si;new A(new I(u),new B(u)),new M(new P(u),new O(u));class Lt extends v{constructor(e="completer has already been completed"){super(e),Object.freeze(this)}get code(){return Jn}}const Jn="CompleterAlreadyCompletedError";class Ri{convert(e){return d(e,"code","message"),E(e,Jn),new Lt(u.decode(e.message))}}class Ii extends V{}class Bi extends i{encoder=new Ii;decoder=new Ri}const Ai=new Bi;x(Lt.name,Ai);function $e(){U(!1,"completer is not ready, this should never be reached")}function Qe(){throw new Lt}class Ti{resolve=$e;reject=$e;completed=!1;promise;get isCompleted(){return this.completed}constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r}),U(this.resolve!==$e,"resolve should be set"),U(this.reject!==$e,"resolve should be set")}complete(e){const r=this.resolve,o=this.reject;if(this.completed=!0,this.resolve=Qe,this.reject=Qe,e instanceof Promise){e.then(r,o);return}r(e)}completeError(e){this.reject(e),this.completed=!0,this.resolve=Qe,this.reject=Qe}}function Nt(){return new Ti}class ve extends v{response;status;constructor(e,r,o){super(o),this.status=e,this.response=r}toJSON(){return jn.convert(this)}}class Ke{convert(e){return h(e,ve),{...j.convert(e),status:e.status}}}const jn=new Ke,Pt="BadResponseClientError";class qn extends ve{constructor(e,r,o="bad server response: client error"){super(e,r,o),Object.freeze(this)}get code(){return Pt}toJSON(){return $n.encode(this)}}class Di{convert(e){return d(e,"code","message","status"),E(e,Pt),new qn(Number(e.status),null,u.decode(e.message))}}class _i extends Ke{}class Ui extends i{encoder=new _i;decoder=new Di}const $n=new Ui;x(Pt,$n);const Ot="BadResponseError";class Qn extends ve{constructor(e,r,o="bad server response"){super(e,r,o),Object.freeze(this)}get code(){return Ot}toJSON(){return Kn.encode(this)}}class Li{convert(e){return d(e,"code","message","status"),E(e,Ot),new Qn(Number(e.status),null,u.decode(e.message))}}class Ni extends Ke{}class Pi extends i{encoder=new Ni;decoder=new Li}const Kn=new Pi;x(Ot,Kn);class Xn extends ve{constructor(e,r,o="bad server response: server error"){super(e,r,o),Object.freeze(this)}get code(){return Mt}}const Mt="BadResponseServerError";class Oi{convert(e){return d(e,"code","message","status"),E(e,Mt),new Xn(Number(e.status),null,u.decode(e.message))}}class Mi extends Ke{}class Fi extends i{encoder=new Mi;decoder=new Oi}const zi=new Fi;x(Mt,zi);const Ft="ChannelClosedError";class Ee extends v{constructor(e="channel closed"){super(e),Object.freeze(this)}get code(){return Ft}}class Hi{convert(e){return d(e,"code","message"),E(e,Ft),new Ee(u.decode(e.message))}}class Gi extends V{}class Vi extends i{encoder=new Gi;decoder=new Hi}const Wi=new Vi;x(Ft,Wi);const zt="FetchError";class Yn extends v{cause;constructor(e,r=`fetch failed: ${String(e)}`){super(r),this.cause=e,Object.freeze(this)}get code(){return zt}}class Ji{convert(e){return d(e,"code","message"),E(e,zt),new Yn({},u.decode(e.message))}}class ji extends V{}class qi extends i{encoder=new ji;decoder=new Ji}const $i=new qi;x(zt,$i);const Ht="IncorrectBase64PaddingError";class Zn extends v{constructor(e="incorrect padding"){super(e),Object.freeze(this)}get code(){return Ht}}class Qi{convert(e){return d(e,"code","message"),E(e,Ht),new Zn(u.decode(e.message))}}class Ki extends V{}class Xi extends i{encoder=new Ki;decoder=new Qi}const Yi=new Xi;x(Ht,Yi);class Zi{convert(e){if(!Dt(e))throw new D(typeof e,"number");return e}}class ed{convert(e){return Je(e,"number"),e}}class td extends i{encoder=new ed;decoder=new Zi}const c=new td,es=new M(new P(c),new O(c)),de=new A(new I(c),new B(c)),ee=new A(new I(es),new B(es)),Gt="InvalidBase64AlphabetLengthError";class Vt extends v{length;constructor(e,r=`alphabet needs to be 64 characters, received ${e}`){super(r),this.length=e,Object.freeze(this)}toJSON(){return ts.encode(this)}get code(){return Gt}}class rd{convert(e){return d(e,"code","length","message"),E(e,Gt),new Vt(c.decode(e.length),u.decode(e.message))}}class od{convert(e){return h(e,Vt),{...j.convert(e),length:c.encode(e.length)}}}class nd extends i{encoder=new od;decoder=new rd}const ts=new nd;x(Gt,ts);const Wt="InvalidHexStringError";class rs extends v{constructor(e="invalid hex string"){super(e),Object.freeze(this)}get code(){return Wt}}class sd{convert(e){return d(e,"code","message"),E(e,Wt),new rs(u.decode(e.message))}}class cd extends V{}class ad extends i{encoder=new cd;decoder=new sd}const id=new ad;x(Wt,id);const Jt="InvalidHexValueError";class os extends v{value;constructor(e,r=`invalid hex value "${e}"`){super(r),this.value=e,Object.freeze(this)}toJSON(){return ns.encode(this)}get code(){return Jt}}class dd{convert(e){return d(e,"code","value","message"),E(e,Jt),new os(c.decode(e.value),u.decode(e.message))}}class ld{convert(e){return{...j.convert(e),value:c.encode(e.value)}}}class hd extends i{encoder=new ld;decoder=new dd}const ns=new hd;x(Jt,ns);const jt="InvalidInputError";class W extends v{constructor(e="invalid input"){super(e),Object.freeze(this),We()}get code(){return jt}}class ud{convert(e){return d(e,"code","message"),E(e,jt),new W(u.decode(e.message))}}class wd extends V{}class pd extends i{encoder=new wd;decoder=new ud}const md=new pd;x(jt,md);const qt="InvalidStringValueError";class ss extends v{have;want;constructor(e,r,o=`invalid string value: have "${e}", want "${r}"`){super(o),this.have=e,this.want=r,Object.freeze(this)}toJSON(){return cs.encode(this)}get code(){return qt}}class fd{convert(e){return d(e,"code","have","want","message"),E(e,qt),new ss(u.decode(e.have),u.decode(e.want),u.decode(e.message))}}class gd{convert(e){return h(e,ss),{...j.convert(e),have:u.encode(e.have),want:u.encode(e.want)}}}class yd extends i{encoder=new gd;decoder=new fd}const cs=new yd;x(qt,cs);const $t="InvalidTaggedBase64EncodingError";class as extends v{constructor(e="invalid tagged base64 encoding"){super(e),Object.freeze(this)}toJSON(){return is.encode(this)}get code(){return $t}}class Cd{convert(e){return d(e,"code","message"),E(e,$t),new as(u.decode(e.message))}}class bd extends V{}class vd extends i{encoder=new bd;decoder=new Cd}const is=new vd;x($t,is);const Qt="MissingElementError";class xe extends v{constructor(e="missing element"){super(e),Object.freeze(this)}get code(){return Qt}}class Ed{convert(e){return d(e,"code","message"),E(e,Qt),new xe(u.decode(e.message))}}class xd extends V{}class kd extends i{encoder=new xd;decoder=new Ed}const Sd=new kd;x(Qt,Sd);const Kt="NoCompleterFoundForRequestID";class ds extends v{requestID;constructor(e,r=`no completer found for request id "${e}"`){super(r),this.requestID=e,Object.freeze(this)}toJSON(){return ls.encode(this)}get code(){return Kt}}class Rd{convert(e){return d(e,"code","requestID","message"),E(e,Kt),new ds(qe.decode(e.requestID),u.decode(e.message))}}class Id{convert(e){return h(e,ds),{...j.convert(e),requestID:qe.encode(e.requestID)}}}class Bd extends i{encoder=new Id;decoder=new Rd}const ls=new Bd;x(Kt,ls);const Xt="NotFoundError";class hs extends v{key;constructor(e,r=`Not Found: ${e}`){super(r),this.key=e,Object.freeze(this)}get code(){return Xt}}class us{codec;constructor(e){this.codec=e}convert(e){return d(e,"code","key"),E(e,Xt),new hs(this.codec.decode(e.key))}}class ws{codec;constructor(e){this.codec=e}convert(e){return{...j.convert(e),key:this.codec.encode(e.key)}}}class ps extends i{encoder;decoder;constructor(e,r){super(),this.encoder=e,this.decoder=r}}new ps(new ws(u),new us(u));const Ad=new ps(new ws(qe),new us(qe));x(Xt,Ad);const Yt="NoURLProvidedError";class Td extends v{constructor(e="no url provided"){super(e),Object.freeze(this)}get code(){return Yt}}class Dd{convert(e){return d(e,"code","message"),E(e,Yt),new Td(u.decode(e.message))}}class _d extends V{}class Ud extends i{encoder=new _d;decoder=new Dd}const Ld=new Ud;x(Yt,Ld);const Zt="UnimplementedError";class N extends v{constructor(e="unimplemented"){super(e),Object.freeze(this),We()}get code(){return Zt}}class Nd{convert(e){return d(e,"code","message"),E(e,Zt),new N(u.decode(e.message))}}class Pd extends V{}class Od extends i{encoder=new Pd;decoder=new Nd}const Md=new Od;x(Zt,Md);const er="QUERY_ERROR";class Fd extends v{error;constructor(e,r="missing element"){super(r),this.error=e,Object.freeze(this)}get code(){return er}}class zd{convert(e){return d(e,"code","error","message"),E(e,er),new Fd(ys.decode(e.error),u.decode(e.message))}}class Hd{convert(e){return{code:e.code,error:ys.encode(e.error),message:u.encode(e.message)}}}class Gd extends i{encoder=new Hd;decoder=new zd}const Vd=new Gd;class tr{}const rr="NotFound";class ms extends tr{constructor(){super(),Object.freeze(this)}valueOf(){return rr}toJSON(){return this.valueOf()}}const Wd=new ms,or="Missing";class fs extends tr{constructor(){super(),Object.freeze(this)}valueOf(){return or}toJSON(){return this.valueOf()}}const Jd=new fs;class gs extends tr{error;constructor(e){super(),this.error=e,Object.freeze(this)}toJSON(){return sr.encode(this)}}class jd{message;constructor(e){this.message=e,Object.freeze(this)}toJSON(){return nr.encode(this)}}class qd{convert(e){return d(e,"message"),new jd(u.decode(e.message))}}class $d{convert(e){return{message:u.encode(e.message)}}}class Qd extends i{encoder=new $d;decoder=new qd}const nr=new Qd;class Kd{convert(e){return d(e,"Error"),new gs(nr.decode(e.Error))}}class Xd{convert(e){return{Error:nr.encode(e.error)}}}class Yd extends i{encoder=new Xd;decoder=new Kd}const sr=new Yd;class Zd{convert(e){return e===rr?Wd:e===or?Jd:sr.decode(e)}}class el{convert(e){if(e instanceof ms)return rr;if(e instanceof fs)return or;if(e instanceof gs)return sr.encode(e);throw new N}}class tl extends i{encoder=new el;decoder=new Zd}const ys=new tl;x(er,Vd);const Cs="ResponseContentTypeIsNotApplicationJSONError";class ke extends ve{haveHeaderType;constructor(e,r,o,n="response content type is not application/json"){super(r,o,n),this.haveHeaderType=e,Object.freeze(this)}static fromResponse(e,r){return new ke(e.headers.get("content-type")??"undefined",e.status,e,r)}toJSON(){return bs.encode(this)}get code(){return Cs}}class rl{convert(e){return d(e,"code","status","have","want","message"),E(e,Cs),new ke(u.decode(e.code),c.decode(e.status),null,u.decode(e.message))}}class ol{convert(e){return{...jn.convert(e),have:u.encode(e.haveHeaderType),want:u.encode("application/json")}}}class nl extends i{encoder=new ol;decoder=new rl}const bs=new nl;x(ke.name,bs);const cr="WebWorkerErrorResponse";class sl extends v{error;constructor(e,r="error in web worker"){super(r),this.error=e,Object.freeze(this)}toJSON(){return vs.encode(this)}get code(){return cr}}class cl{convert(e){return d(e,"code","error","message"),E(e,cr),new sl(Z.decode(e.error),u.decode(e.message))}}class al{convert(e){return{...j.convert(e),error:Z.encode(e.error)}}}class il extends i{encoder=new al;decoder=new cl}const vs=new il;x(cr,vs);var Es=(t=>(t[t.success=0]="success",t[t.full=1]="full",t[t.failed=2]="failed",t))(Es||{});class dl{getFromEmpty(){}}class ll{getFromEmpty(){throw new xe}}const xs={returnUndefined:new dl,throwMissingElement:new ll};class hl{maxSize;constructor(e){U(!Number.isNaN(e),"maxSize must not be NaN"),U(Number.isInteger(e),"maxSize must be an integer"),U(e>0,"maxSize must be greater than 0"),this.maxSize=e}nextIndex(e){return U(e>=0,"index must be greater than or equal to 0"),(e+1)%this.maxSize}}class ul{preComputedSizeMinus1;constructor(e){U(!Number.isNaN(e),"maxSize must not be NaN"),U(Number.isInteger(e),"maxSize must be an integer"),U(e>0,"maxSize must be greater than 0"),U(ks(e),"maxSize must be a power of two"),this.preComputedSizeMinus1=e-1}nextIndex(e){return U(e>=0,"index must be greater than or equal to 0"),e+1&this.preComputedSizeMinus1}}function ks(t){return(t&t-1)===0}const ar="BufferFullError";class Ss extends v{constructor(e="buffer full"){super(e),Object.freeze(this)}get code(){return ar}}class wl{convert(e){return d(e,"code","message"),E(e,ar),new Ss(u.decode(e.message))}}class pl extends V{}class ml extends i{encoder=new pl;decoder=new wl}const fl=new ml;x(ar,fl);class gl{putToFull(e,r){return e.get(),e.put(r)}}class yl{putToFull(){throw new Ss}}const Rs={overwriteOldest:new gl,throw:new yl};function Cl(t){return ks(t)?new ul(t):new hl(t)}class bl{readIndex=0;writeIndex=0;buffer;nextIndex;getOnEmpty;putOnFull;constructor(e,r,o){U(!Number.isNaN(e),"maxSize must not be NaN"),this.buffer=new Array(e),this.nextIndex=Cl(e),this.getOnEmpty=r,this.putOnFull=o}get maxSize(){return this.buffer.length}get length(){return this.writeIndex<this.readIndex?this.writeIndex+this.maxSize-this.readIndex:this.writeIndex-this.readIndex}put(e){const r=this.nextIndex.nextIndex(this.writeIndex);return r===this.readIndex?this.putOnFull.putToFull(this,e):(this.buffer[this.writeIndex]=e,this.writeIndex=r,Es.success)}get(){if(this.readIndex===this.writeIndex)return this.getOnEmpty.getFromEmpty(this);const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),e}[Symbol.iterator](){return new vl(this)}immutableIterable(){return{[Symbol.iterator]:()=>this.immutableIterator()}}immutableIterator(){return new El(this.readIndex,this.writeIndex,this.buffer,this.nextIndex)}}class vl{buffer;constructor(e){this.buffer=e}next(){const e=this.buffer.get();return e==null?{value:void 0,done:!0}:{value:e,done:!1}}}class El{readIndex;writeIndex;buffer;nextIndex;constructor(e,r,o,n){this.readIndex=e,this.writeIndex=r,this.buffer=o,this.nextIndex=n}next(){if(this.readIndex===this.writeIndex)return{value:void 0,done:!0};const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),{value:e,done:!1}}}function q(t=32,e=xs.returnUndefined,r=Rs.overwriteOldest){return new bl(t,e,r)}class xl{publishQueue;pollBlocked;publishBlocked;capacity;closed=!1;constructor(e){this.publishQueue=q(Math.max(2,e),xs.throwMissingElement,Rs.throw);const r=Nt();this.pollBlocked=r,this.publishBlocked=r,r.complete(),this.capacity=e-1}get isClosed(){return this.closed}close(){if(this.closed)throw new Ee;this.closed=!0}async drain(){for(;this.publishQueue.length>0;)this.publishQueue.get()}async publish(e){if(this.closed)throw new Ee;if(this.publishQueue.length>=this.capacity){if(this.publishBlocked.isCompleted){const r=Nt();this.publishBlocked=r,await r.promise}return await this.publishBlocked.promise,this.publish(e)}this.publishQueue.put(e),this.pollBlocked.isCompleted||this.pollBlocked.complete()}async poll(){if(this.publishQueue.length<=0){if(this.isClosed)throw new Ee;if(this.pollBlocked.isCompleted){const r=Nt();this.pollBlocked=r}return await this.pollBlocked.promise,this.poll()}const e=this.publishQueue.get();return this.publishBlocked.isCompleted||this.publishBlocked.complete(),e}[Symbol.asyncIterator](){return new kl(this)}}class kl{channel;constructor(e){this.channel=e}async next(){try{return{done:!1,value:await this.channel.poll()}}catch(e){if(e instanceof Ee)return{done:!0,value:void 0};throw e}}}function Sl(t){return new xl(t)}const we=c;class Is{requestID;api;method;param;constructor(e,r,o,n){this.requestID=e,this.api=r,this.method=o,this.param=n}toJSON(){return{requestID:this.requestID,api:this.api,method:this.method,param:this.param}}}class Rl{convert(e){return d(e,"requestID","api","method","param"),new Is(we.decode(e.requestID),u.decode(e.api),u.decode(e.method),e.param)}}class Il{convert(e){return h(e,Is),{requestID:we.encode(e.requestID),api:u.encode(e.api),method:u.encode(e.method),param:e.param}}}class Bl extends i{encoder=new Il;decoder=new Rl}const Al=new Bl;class Bs{requestID;constructor(e){this.requestID=e}}class ir extends Bs{response;constructor(e,r){super(e),this.response=r}toJSON(){return As.encode(this)}}class Tl{convert(e){return d(e,"requestID","response"),new ir(we.decode(e.requestID),e.response)}}class Dl{convert(e){return h(e,ir),{requestID:we.encode(e.requestID),response:e.response}}}class _l extends i{encoder=new Dl;decoder=new Tl}const As=new _l;class dr extends Bs{error;constructor(e,r){super(e),this.error=r}toJSON(){return Ts.encode(this)}}class Ul{convert(e){return d(e,"requestID","error"),new dr(we.decode(e.requestID),Z.decode(e.error))}}class Ll{convert(e){return h(e,dr),{requestID:we.encode(e.requestID),error:Z.encode(e.error)}}}class Nl extends i{encoder=new Ll;decoder=new Ul}const Ts=new Nl;class Q{constructor(e,r,o){this.alpha3Code=e,this.code=r,this.significantDigits=o,this.alpha3Code=e,this.code=r,this.significantDigits=o,this.significantDigitsMultiplier=BigInt(10)**BigInt(this.significantDigits)}significantDigitsMultiplier;toJSON(){return Xe.encode(this)}}const Ds=new Q("JPY",392,0),Pl=new Q("GBP",826,2),_s=new Q("USD",840,2),Ol=new Q("EUR",978,2),Ml=new Q("XXX",999,2),Us=new Q("ETH",1001,18),lr=new Q("XBT",1002,8),Ls=new Q("ESP",10001,18),Fl=[Ds,Pl,_s,Ol,Ml,Us,lr,Ls],zl=new Map(Fl.map(t=>[t.alpha3Code,t]));class Hl{convert(e){if(typeof e!="string")throw new W("CurrencyCodeDecoder: expected string");if(e==="BTC")return lr;const r=zl.get(e);if(r===void 0)throw new W(`CurrencyCodeDecoder: unknown currency: "${e}"`);return r}}class Gl{convert(e){return h(e,Q),e.alpha3Code}}class Vl extends i{decoder=new Hl;encoder=new Gl}const Xe=new Vl;class ${constructor(e,r){this.currency=e,this.value=r,this.currency=e,this.value=r}static USD(e){return new $(_s,BigInt(e))}static ETH(e){return new $(Us,BigInt(e))}static ESP(e){return new $(Ls,BigInt(e))}static JPY(e){return new $(Ds,BigInt(e))}static BTC(e){return new $(lr,BigInt(e))}toString(){return Ye.encode(this)}toJSON(){return Ye.encode(this)}}function Wl(t){return t==="."||t===","||t===" "}function Jl(t,e){let r=-1;const o=t.length;for(let n=0;n<o;n++)e(t[n])&&(r=n);return r}class jl{parseCurrencyCode(e){return Xe.decode(e)}parseValue(e,r){let o=1n;r[0]==="-"&&(o=-1n,r=r.substring(1));const n=Jl(r,Wl);if(n===-1){const p=BigInt(r.replace(/\D/g,""))*e.significantDigitsMultiplier;return o*p}const s=r.substring(0,n).replace(/\D/g,""),a=r.substring(n+1).replace(/\D/g,""),l=BigInt(s)*e.significantDigitsMultiplier,m=BigInt(a)*10n**BigInt(e.significantDigits-a.length);return o*(l+m)}convert(e){if(typeof e!="string")throw new W("MonetaryValueDecoder: expected string");const r=e.indexOf(" ");if(r<=-1)throw new W("MonetaryValueDecoder: missing non-breaking space");const o=e.substring(0,r),n=e.substring(r+1);if(/^-?[\d .,]+$/.test(o)){const a=this.parseCurrencyCode(n);return new $(a,this.parseValue(a,o))}const s=this.parseCurrencyCode(o);return new $(s,this.parseValue(s,n))}}class ql{convert(e){h(e,$);const r=e.value<0n?"-":"",o=e.value<0n?-e.value:e.value,n=o%e.currency.significantDigitsMultiplier,s=o/e.currency.significantDigitsMultiplier,a=String(s),l=String(n);return/^0+$/.test(l)?`${Xe.encode(e.currency)} ${r}${a}`:`${Xe.encode(e.currency)} ${r}${s}.${String(n).padStart(e.currency.significantDigits,"0")}`}}class $l extends i{decoder=new jl;encoder=new ql}const Ye=new $l,Ns=new A(new I(Ye),new B(Ye));class b{namespace;name;site;blockExplorer;constructor(e,r,o,n){this.namespace=e,this.name=r,this.site=o,this.blockExplorer=n}}const Ql=new b(202374881,"Vienna",new URL("https://vienna.caldera.dev/"),new URL("https://vienna.calderaexplorer.xyz/")),Kl=new b(202374882,"OP Stack",new URL("https://stack.optimism.io/"),new URL("https://www.blockscout.com/")),Xl=new b(33914988448,"Arbitrum",new URL("https://arbitrum.io/"),new URL("https://arbiscan.io/")),Yl=new b(33914988449,"Eigen Layer",new URL("https://www.eigenlayer.xyz/"),new URL("https://www.blockscout.com/")),Zl=new b(33914988450,"Spire",new URL("https://www.spire.dev/"),new URL("https://www.blockscout.com/")),eh=new b(33914988451,"Alt Layer",new URL("https://altlayer.io/"),new URL("https://www.blockscout.com/")),th=new b(33914988452,"Caldera",new URL("https://www.caldera.xyz/"),new URL("https://www.blockscout.com/")),rh=new b(33914988453,"Vistara Labs",new URL("https://vistara.dev/"),new URL("https://www.blockscout.com/")),oh=new b(33914988454,"Polygon",new URL("https://polygon.technology/"),new URL("https://www.blockscout.com/")),nh=new b(263,"Milan",new URL("https://milan.caldera.dev/"),new URL("https://milan-devnet.explorer.caldera.xyz/")),sh=new b(41234687,"Kyoto",new URL("https://example.com/"),new URL("https://kyoto-explorer.altlayer.io/")),ch=1918988905,ah=new b(ch,"RARI",new URL("https://rarichain.org/"),new URL("https://explorer.rarichain.org/")),ih=1380012617,dh=new b(ih,"RARI",new URL("https://rarichain.org/"),new URL("https://mainnet.explorer.rarichain.org/")),lh=9369,hh=new b(lh,"LogX",new URL("https://logx.network/"),new URL("https://kartel-testnet-explorer.alt.technology/")),uh=936369,wh=new b(uh,"LogX",new URL("https://logx.network/"),new URL("https://vzjuxmhfn70kgnlds27h-explorer.alt.technology")),ph=466,mh=new b(ph,"AppChain",new URL("https://appchain.xyz/"),new URL("https://explorer.appchain.xyz/")),fh=4661,gh=new b(fh,"AppChain",new URL("https://appchain.xyz/"),new URL("https://appchaintestnet.explorer.caldera.xyz/")),yh=360,Ch=new b(yh,"Molten",new URL("https://www.moltennetwork.com/"),new URL("https://molten.explorer.caldera.dev/")),bh=3609,vh=new b(bh,"Molten",new URL("https://www.moltennetwork.com/"),new URL("https://molten.explorer.caldera.dev/")),Eh=33139,xh=new b(Eh,"APECHAIN",new URL("https://apechain.com/"),new URL("https://apescan.io/")),kh=3313939,Sh=new b(kh,"APECHAIN",new URL("https://apechain.com/"),new URL("https://apechain-testnet.explorer.caldera.xyz/")),Rh=13107,Ih=new b(Rh,"t3rn",new URL("https://t3rn.io/"),new URL("https://brn-testnet.explorer.caldera.xyz/")),Bh=819,Ah=new b(Bh,"t3rn",new URL("https://t3rn.io/"),new URL("https://exporer.t3rn.io/")),Ps=21341,Th=new b(Ps,"Rufus",new URL("https://l2beat.com/scaling/projects/rufus"),new URL("https://rufus-sepolia-testnet.explorer.caldera.xyz/")),Dh=new b(Ps,"Rufus",new URL("https://l2beat.com/scaling/projects/rufus"),new URL("https://rufus.calderaexplorer.xyz/")),_h=2524852,Uh=new b(_h,"Huddle01",new URL("https://huddle01.com/"),new URL("https://hudlscan.com/txs")),Lh=1397311310,Os=new b(Lh,"Infinite Garden",new URL("https://infinitegarden.espressosys.com/"),new URL("https://explorer.main.net.espressosys.com/")),Nh=10101,Ph=new b(Nh,"Timeboost Decaf",new URL("https://espressosys.com/"),new URL("https://explorer.decaf.testnet.espresso.network/")),Oh=[Os,dh,wh,Ch,mh,xh,Ah,Dh],Mh=[Os,ah,hh,gh,vh,Sh,Ih,Th,Uh,Ph],Fh=new Map([Ql,Kl,Xl,oh,Yl,Zl,eh,th,rh,nh,sh,...Oh,...Mh].map(t=>[t.namespace,t])),hr="CorruptBase64InputError";class te extends v{offset;constructor(e,r=`corrupt input error at ${e}`){super(r),this.offset=e,Object.freeze(this)}get code(){return hr}toJSON(){return Ms.encode(this)}}class zh{convert(e){return d(e,"code","offset","message"),E(e,hr),new te(c.decode(e.offset),u.decode(e.message))}}class Hh{convert(e){return h(e,te),{...j.convert(e),offset:c.encode(e.offset),message:u.encode(e.message)}}}class Gh extends i{encoder=new Hh;decoder=new zh}const Ms=new Gh;x(hr,Ms);class Vh{convert(e){const r=new ArrayBuffer(e.byteLength);return new Uint8Array(r).set(e),r}}class Wh{convert(e){return new Uint8Array(e)}}class Jh extends i{encoder=new Vh;decoder=new Wh}const ur=new Jh,jh=new TextEncoder;function Fs(t){return jh.encode(t)}const qh=new TextDecoder;function $h(t){return qh.decode(t)}function*zs(t){yield*Fs(t)}function*Qh(){for(let t=0;t<256;t++)yield 255}const Se=-1,Kh=61;class Re{encodeMap;decodeMap;padChar;strict;constructor(e,r,o=Kh,n=!1){this.encodeMap=e,this.decodeMap=r,this.padChar=o,this.strict=n}static withAlphabet(e){const r=e.length;if(r!==64)throw new Vt(r);const o=Array.from(zs(e)),n=Array.from(Qh());for(let s=0;s<r;s++)n[o[s]]=s;return new Re(o,n)}withPadding(e){return new Re(this.encodeMap,this.decodeMap,e,this.strict)}encode(e){if(e.byteLength===0)return new ArrayBuffer(0);let r=0,o=0;const n=Math.floor(e.byteLength/3)*3,s=Math.ceil(e.byteLength/3)*4,a=new ArrayBuffer(s),l=new DataView(e),m=new DataView(a);for(;o<n;){const y=l.getUint8(o+0)<<16|l.getUint8(o+1)<<8|l.getUint8(o+2);m.setUint8(r+0,this.encodeMap[y>>18&63]),m.setUint8(r+1,this.encodeMap[y>>12&63]),m.setUint8(r+2,this.encodeMap[y>>6&63]),m.setUint8(r+3,this.encodeMap[y&63]),o+=3,r+=4}const p=e.byteLength-o;if(p===0)return a;let C=l.getUint8(o+0)<<16;switch(p===2&&(C|=l.getUint8(o+1)<<8),m.setUint8(r+0,this.encodeMap[C>>18&63]),m.setUint8(r+1,this.encodeMap[C>>12&63]),p){case 2:return m.setUint8(r+2,this.encodeMap[C>>6&63]),this.padChar!==Se?(m.setUint8(r+3,this.padChar),a.slice(0,r+4)):a.slice(0,r+3);case 1:if(this.padChar!==Se)return m.setUint8(r+2,this.padChar),m.setUint8(r+3,this.padChar),a.slice(0,r+4);break}return a.slice(0,r+2)}decode(e){const r=e.byteLength;if(r===0)return new ArrayBuffer(0);const o=new DataView(e),n=new ArrayBuffer(Math.floor(r/4*3)),s=new DataView(n),a=new ArrayBuffer(4),l=new DataView(a);let m=0,p=0,C=0,y=!1;for(;p<r&&!y;){let f=3,g=4;for(let T=0;T<4;T++){if(p===r){if(T===0)return n;if(T===1||this.padChar!==Se)throw new te(p-T);f=T-1,g=T,y=!0;break}const H=o.getUint8(p);p++;const Ve=this.decodeMap[H];if(Ve!==255){l.setUint8(T,Ve);continue}if(H===10||H===13){T--;continue}if(H===this.padChar){switch(T){case 0:case 1:throw new Zn;case 2:for(;p<r&&(o.getUint8(p)===10||o.getUint8(p)===13);)p++;if(p===r)throw new te(r);p++}for(;p<r&&(o.getUint8(p)===10||o.getUint8(p)===13);)p++;if(p<r)throw new te(p);f=3,g=T,y=!0;break}throw new te(p-1)}const L=l.getUint8(0)<<18|l.getUint8(1)<<12|l.getUint8(2)<<6|l.getUint8(3);switch(l.setUint8(2,L>>0&255),l.setUint8(1,L>>8&255),l.setUint8(0,L>>16&255),g){case 4:s.setUint8(C+2,l.getUint8(2)),l.setUint8(2,0);case 3:if(s.setUint8(C+1,l.getUint8(1)),this.strict&&l.getUint8(2)!==0)throw new te(p-1);case 2:if(s.setUint8(C+0,l.getUint8(0)),this.strict&&(l.getUint8(1)!==0||l.getUint8(2)!==0))throw new te(p-2)}C+=f,m+=g-1}return n.slice(0,m)}decodeString(e){return this.decode(ur.encode(Fs(e)))}encodeToString(e){return $h(this.encode(e))}}const Hs=Re.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Xh=Hs.withPadding(Se),Gs=Re.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),wr=Gs.withPadding(Se);class k{tag;data;constructor(e,r){this.tag=e,this.data=r}static fromString(e){const r=e.indexOf("~");if(r<0)throw new as;const o=e.substring(0,r),n=wr.decodeString(e.substring(r+1));return new k(o,n)}static inflate(e){return w.decode(e)}toString(){return`${this.tag}~${wr.encodeToString(this.data)}`}valueOf(){return this.toString()}toJSON(){return this.toString()}}class Yh{convert(e){if(typeof e!="string")throw new D(typeof e,"string");return k.fromString(e)}}class Zh{convert(e){return h(e,k),e.toString()}}class eu extends i{encoder=new Zh;decoder=new Yh}const w=new eu,Ie=2147483648,tu=1103515245,ru=12345;class re{state;constructor(e){this.state=e!==void 0?e:Math.floor(Math.random()*(Ie-1))}nextInt(){return this.state=(tu*this.state+ru)%Ie,this.state}nextFloat(){return this.nextInt()/(Ie-1)}nextRange(e,r){const o=r-e,n=this.nextInt()/Ie;return e+Math.floor(n*o)}nextRangeBigInt(e,r){const o=r-e,n=BigInt(this.nextInt())*1000000n/BigInt(Ie);return e+n*o/1000000n}fillBytes(e){const r=new ArrayBuffer(e),o=new DataView(r);let n=0;for(;n<e-4;n+=4)o.setUint32(n,this.nextRange(0,4294967295));for(let s=n;s<e;s++)o.setUint8(s,this.nextRange(0,256));return r}}const Ze=new Date,ou=new Date(Ze.getFullYear(),Ze.getMonth(),Ze.getDate()).valueOf();function Vs(){return Ze.valueOf()}function Be(){return ou}class nu{value;next;constructor(e,r){this.value=e,this.next=r}[Symbol.iterator](){return Ws(this)}}function su(t,e){return new nu(e,t)}function*Ws(t){if(t!==null)for(let e=t;e!==null;e=e.next)yield e.value}function*cu(t,e){for(let r=t.next();!r.done;r=t.next())e(r.value)&&(yield r.value)}function au(t,e){return cu(t[Symbol.iterator](),e)}function*Js(t,e){for(let r=t.next();!r.done;r=t.next())yield e(r.value)}function et(t,e){return Js(t[Symbol.iterator](),e)}function*iu(t,e){for(let r=0;r<e;r++){const o=t.next();if(o.done)return;yield o.value}}function du(t,e){return iu(t[Symbol.iterator](),e)}function lu(t){let e;for(let r=t.next();!r.done;r=t.next())e=r.value;if(e===void 0)throw new xe;return e}function hu(t){return lu(t[Symbol.iterator]())}function*uu(t,e){for(let r=t.next();!r.done;r=t.next())yield*e(r.value)}function wu(t,e){return uu(t[Symbol.iterator](),e)}function*pu(){let t=0;for(;;)yield t++}function js(t){return du(pu(),Math.ceil(t))}function*mu(t,e,r){for(let o=t.next(),n=e.next();!o.done&&!n.done;o=t.next(),n=e.next())yield r(o.value,n.value)}function qs(t,e,r){return mu(t[Symbol.iterator](),e[Symbol.iterator](),r)}const $s=["Residential","Mobile","Enterprise","AWS","Azure","GCP"],Qs=["Espresso v1.0","Espresso v1.1","Espresso v1.2","Espresso v1.3","Espresso v1.4"],Ks=["Linux","Unix","Windows","MacOS"],Xs=[["Espresso","https://espressosys.com/"],["BlockDaemon","https://www.blockdaemon.com/"],["Unit 410","https://unit410.com/"],["Nethermind","https://www.nethermind.io/"],["Sub7","https://sub7.xyz/"],["KudasaiJP","https://kudasai.co.jp/"],["Informal Systems","https://informal.systems/"],["P2P","https://p2p.org/"],["LinkPool","https://linkpool.com/"],["ZKV","https://zkvalidator.com/"],["Figment","https://figment.io/"]],fu=[[["Mexico City",19.4333,-99.1333,"MX"],["Guadalajara",20.6767,-103.3475,"MX"],["Monterrey",25.6667,-100.3,"MX"],["Guatemala City",14.6133,-90.5353,"GT"],["Tijuana",32.525,-117.0333,"MX"],["Ecatepec",19.6097,-99.06,"MX"],["Tegucigalpa",14.1058,-87.2047,"HN"],["León de los Aldama",21.1167,-101.6833,"MX"],["San José",9.9325,-84.08,"CR"],["Panama City",8.9833,-79.5167,"PA"],["Juárez",31.745,-106.485,"MX"],["Comayagüela",14.098,-87.21,"HN"],["Mexicali",32.6633,-115.4678,"MX"],["Nezahualcóyotl",19.4081,-99.0186,"MX"],["Managua",12.1364,-86.2514,"NI"],["Morelia",19.7683,-101.1894,"MX"],["Aguascalientes",21.876,-102.296,"MX"],["Mérida",20.97,-89.62,"MX"],["Saltillo",25.4231,-100.9919,"MX"],["Culiacán",24.8069,-107.3939,"MX"]],[["Havana",23.1367,-82.3589,"CU"],["San Juan",18.3985,-66.061,"PR"],["Santiago",19.4572,-70.6889,"DO"],["Santo Domingo",18.4667,-69.95,"DO"],["Port-au-Prince",18.5333,-72.3333,"HT"],["Santo Domingo Este",18.4855,-69.8734,"DO"],["Kingston",17.9714,-76.7931,"JM"],["Carrefour",18.5344,-72.4094,"HT"],["Santiago de Cuba",20.0217,-75.8294,"CU"],["Pétion-Ville",18.5128,-72.2864,"HT"],["Holguín",20.8869,-76.2592,"CU"],["Gonaïves",19.4456,-72.6883,"HT"],["Camagüey",21.3839,-77.9075,"CU"],["Puerto Plata",19.8,-70.6833,"DO"],["Croix-des-Bouquets",18.5761,-72.2269,"HT"],["Nassau",25.0781,-77.3386,"BS"],["Fort-de-France",14.6,-61.0667,"MQ"],["Higüey",18.6167,-68.7,"DO"],["Santa Clara",22.4069,-79.9649,"CU"],["Bayamo",20.3817,-76.6428,"CU"]],[["Cairo",30.0444,31.2358,"EG"],["Lagos",6.455,3.3841,"NG"],["Kinshasa",-4.3219,15.3119,"CD"],["Luanda",-8.8383,13.2344,"AO"],["Johannesburg",-26.2044,28.0456,"ZA"],["Dar es Salaam",-6.8161,39.2803,"TZ"],["Douala",4.05,9.7,"CM"],["Giza",29.987,31.2118,"EG"],["Abidjan",5.3167,-4.0333,"CI"],["Cape Town",-33.9253,18.4239,"ZA"],["Bamako",12.6392,-8.0028,"ML"],["Abuja",9.0667,7.4833,"NG"],["Ibadan",7.3964,3.9167,"NG"],["Addis Ababa",9.03,38.74,"ET"],["Mbuji-Mayi",-6.15,23.6,"CD"],["Mogadishu",2.0392,45.3419,"SO"],["Lusaka",-15.4167,28.2833,"ZM"],["Antananarivo",-18.91,47.525,"MG"],["Awka",6.2069,7.0678,"NG"],["Bamenda",5.9614,10.1517,"CM"]],[["Tokyo",35.6897,139.6922,"JP"],["Delhi",28.61,77.23,"IN"],["Manila",14.5958,120.9772,"PH"],["Dhaka",23.7639,90.3889,"BD"],["Moscow",55.7558,37.6172,"RU"],["Ho Chi Minh City",10.7756,106.7019,"VN"],["Xi’an",34.2611,108.9422,"CN"],["Dongguan",23.021,113.752,"CN"],["Tongshan",34.204,117.284,"CN"],["Jining",35.4151,116.5871,"CN"],["Cangzhou",38.3047,116.8387,"CN"],["Shaoyang",27.2395,111.4679,"CN"],["Dalian",38.9,121.6,"CN"],["Ankara",39.93,32.85,"TR"],["Zhangzhou",24.513,117.647,"CN"],["Changsha",28.228,112.939,"CN"],["Ürümqi",43.8225,87.6125,"CN"],["Ningbo",29.8603,121.6245,"CN"],["Suihua",46.654,126.969,"CN"],["Deyang",31.127,104.398,"CN"]],[["London",51.5072,-.1275,"GB"],["Madrid",40.4169,-3.7033,"ES"],["Berlin",52.52,13.405,"DE"],["Barcelona",41.3828,2.1769,"ES"],["Athens",37.9842,23.7281,"GR"],["Budapest",47.4925,19.0514,"HU"],["Birmingham",52.48,-1.9025,"GB"],["Stuttgart",48.7775,9.18,"DE"],["Munich",48.1375,11.575,"DE"],["Hamburg",53.55,10,"DE"],["Bucharest",44.4325,26.1039,"RO"],["Vienna",48.2083,16.3725,"AT"],["Stockholm",59.3294,18.0686,"SE"],["Minsk",53.9,27.5667,"BY"],["Warsaw",52.23,21.0111,"PL"],["Valencia",39.47,-.3764,"ES"],["Amsterdam",52.3728,4.8936,"NL"],["Copenhagen",55.6761,12.5683,"DK"],["Porto",41.1621,-8.622,"PT"],["Brussels",50.8467,4.3525,"BE"]],[["New York",40.6943,-73.9249,"US"],["Los Angeles",34.1141,-118.4068,"US"],["Chicago",41.8375,-87.6866,"US"],["Miami",25.784,-80.2101,"US"],["Dallas",32.7935,-96.7667,"US"],["Philadelphia",40.0077,-75.1339,"US"],["Atlanta",33.7628,-84.422,"US"],["Boston",42.3188,-71.0852,"US"],["Phoenix",33.5722,-112.0892,"US"],["Detroit",42.3834,-83.1024,"US"],["Seattle",47.6211,-122.3244,"US"],["San Francisco",37.7558,-122.4449,"US"],["San Diego",32.8313,-117.1222,"US"],["Minneapolis",44.9635,-93.2678,"US"],["Brooklyn",40.6501,-73.9496,"US"],["Vancouver",49.25,-123.1,"CA"],["Riverside",33.9381,-117.3949,"US"],["Baltimore",39.3051,-76.6144,"US"],["Portland",45.5371,-122.65,"US"],["Sacramento",38.5677,-121.4685,"US"]],[["Melbourne",-37.8142,144.9631,"AU"],["Sydney",-33.8678,151.21,"AU"],["Brisbane",-27.4678,153.0281,"AU"],["Perth",-31.9559,115.8606,"AU"],["Auckland",-36.8406,174.74,"NZ"],["Adelaide",-34.9275,138.6,"AU"],["Port Moresby",-9.4789,147.1494,"PG"],["Gold Coast",-28.0167,153.4,"AU"],["Cranbourne",-38.0996,145.2834,"AU"],["Christchurch",-43.531,172.6365,"NZ"],["Manukau City",-37,174.885,"NZ"],["Central Coast",-33.3,151.2,"AU"],["Wollongong",-34.4331,150.8831,"AU"],["Ipswich",-27.6144,152.7608,"AU"],["Wellington",-41.2889,174.7772,"NZ"],["Northcote",-36.8019,174.7494,"NZ"],["Hobart",-42.8806,147.325,"AU"],["Lae",-6.7303,147.0008,"PG"],["Suva",-18.1416,178.4419,"FJ"],["Nouméa",-22.2758,166.458,"NC"]],[["São Paulo",-23.55,-46.6333,"BR"],["Buenos Aires",-34.6033,-58.3817,"AR"],["Rio de Janeiro",-22.9111,-43.2056,"BR"],["Lima",-12.06,-77.0375,"PE"],["Bogotá",4.7111,-74.0722,"CO"],["Santiago",-33.4372,-70.6506,"CL"],["Belo Horizonte",-19.9167,-43.9333,"BR"],["Fortaleza",-3.7275,-38.5275,"BR"],["Santa Cruz de la Sierra",-17.7892,-63.1975,"BO"],["La Paz",-16.4958,-68.1333,"BO"],["Guayaquil",-2.19,-79.8875,"EC"],["Medellín",6.2308,-75.5906,"CO"],["Salvador",-12.9747,-38.4767,"BR"],["Caracas",10.4806,-66.9036,"VE"],["Córdoba",-31.4167,-64.1833,"AR"],["Santos",-23.9369,-46.325,"BR"],["Curitiba",-25.4297,-49.2711,"BR"],["Maracaibo",10.6333,-71.6333,"VE"],["Recife",-8.05,-34.9,"BR"],["Porto Alegre",-30.0331,-51.23,"BR"]]],Ys=[0,0,5,26,28,26,9,6],gu=Ys.reduce((t,e)=>t+e,0),yu=Ys.reduce((t,e)=>{const r=t[t.length-1]??0;return t.push(r+e),t},[]),Cu=Array.from(qs(yu,fu,(t,e)=>[t,e]));function bu(t){const e=t.nextRange(0,gu),r=au(Cu,([a])=>a<=e),[,o]=hu(r),n=t.nextRange(0,o.length);return o[n]}function vu(t){const e=t.nextRange(0,Xs.length);return Xs[e]}function Eu(t){const e=t.nextRange(0,Ks.length);return Ks[e]}function xu(t){const e=t.nextRange(0,Qs.length);return Qs[e]}function ku(t){const e=t.nextRange(0,$s.length);return $s[e]}function Su(t){const[e,r]=vu(t),[,o,n,s]=bu(t),a=Eu(t),l=xu(t),m=ku(t);return{pubkey:new k("PUBKEY",t.fillBytes(32)),stateVerKey:new k("STATE_VER_KEY",t.fillBytes(32)),stake:t.nextRangeBigInt(0n,1000n)*1000000000000000000n,commission:t.nextRange(0,5e3),name:`${e} Node ${s} ${t.nextRange(0,100)}`,address:t.fillBytes(32),company:{name:e,website:r},location:{coords:[o,n],country:s},operatingSystem:a,networkType:m,nodeType:l}}function*Ru(t=new re(Be())){const e=t.nextRange(100,350);for(let r=0;r<e;r++)yield Su(new re(r))}const tt=Array.from(Ru());async function*Iu(){}function Bu(){const t=new Uint8Array(new Array(20).map(()=>0)).buffer;return{hash:new k("BLOCK",t),height:0,time:new Date(0),genTime:0,transactions:Iu(),numTransactions:0,proposer:[],size:0,fees:[]}}async function*Au(t,e=Vs()){let r=1,o=Be();for(;o<e;){const n=Math.floor(t.nextFloat()*14*1e3);yield Tu(new re(r+n),r,o,o+n),o+=n,r++}}async function*z(t=new re(Be()),e=Vs()){yield Bu(),yield*Au(t,e)}function Tu(t,e,r,o){const n=Math.floor(t.nextRange(0,5)),s=t.nextRange(0,tt.length),a=tt[s];return{hash:new k("BLOCK",t.fillBytes(32)),height:e,genTime:o-r,time:new Date(o),numTransactions:n,transactions:_u(new re(e+r),e,r,o,n),proposer:[a.address],size:Math.floor(t.nextFloat()*1024*n)+8,fees:[$.ESP(BigInt(t.nextRange(0,1e9)*1e3))]}}const Zs=Array.from(Fh.keys());function Du(t){return t.nextFloat()>.98?1:Zs[t.nextRange(0,Zs.length)]}async function*_u(t,e,r,o,n){const s=(o-r)/n;for(let a=0,l=r;l<o;l+=s,a++){const m=Du(t),p=Math.floor(1024*t.nextFloat());yield{block:e,index:a,size:p,hash:new k("COMMIT",t.fillBytes(32)),time:new Date(l),sender:new k("PUBKEY",t.fillBytes(32)),tree:{namespace:m,data:t.fillBytes(p)}}}}async function*Uu(t){for(let e=t.next();!e.done;e=t.next())yield e.value}function Lu(t){return Uu(t[Symbol.iterator]())}async function*Nu(t){for(let e=await t.next();!e.done;e=await t.next())yield e.value}async function*pr(t,e){for(let r=await t.next();!r.done;r=await t.next())e(r.value)&&(yield r.value)}function ec(t,e){return pr(t[Symbol.asyncIterator](),e)}async function*le(t,e){for(let r=await t.next();!r.done;r=await t.next())yield await e(r.value)}function K(t,e){return le(t[Symbol.asyncIterator](),e)}async function*oe(t,e){for(let r=0;r<e;r++){const o=await t.next();if(o.done)return;yield o.value}}function mr(t,e){return oe(t[Symbol.asyncIterator](),e)}async function*fr(t,e){for(let r=await t.next();!r.done&&e(r.value);r=await t.next())yield r.value}function gr(t,e){return fr(t[Symbol.asyncIterator](),e)}async function*ne(t,e){for(let r=0;r<e;r++)if((await t.next()).done)return;yield*Nu(t)}function rt(t,e){return ne(t[Symbol.asyncIterator](),e)}async function Ae(t){const e=await t.next();if(e.done)throw new xe;return e.value}async function Pu(t){return Ae(t[Symbol.asyncIterator]())}async function Ou(t,e){for(let r=await t.next();!r.done;r=await t.next())if(e(r.value))return r.value}async function Mu(t,e){return Ou(t[Symbol.asyncIterator](),e)}async function Fu(t){let e;for(let r=await t.next();!r.done;r=await t.next())e=r.value;if(e===void 0)throw new xe;return e}async function tc(t){return Fu(t[Symbol.asyncIterator]())}async function*rc(t,e){for(let r=await t.next();!r.done;r=await t.next())yield*e(r.value)}function pe(t,e){return rc(t[Symbol.asyncIterator](),e)}async function*yr(t){yield*js(t)}async function zu(t,e,r){const o=r;let n=e;for(let s=await o.next();!s.done;s=await o.next())n=t(await n,s.value);return n}async function*ot(t){let e=null;for(let r=await t.next();!r.done;r=await t.next())e=su(e,r.value);yield*Ws(e)}function Te(t){return ot(t[Symbol.asyncIterator]())}function X(t){return zu(async(e,r)=>(e.push(r),e),Promise.resolve([]),t)}async function Cr(t){return X(t[Symbol.asyncIterator]())}new Promise(()=>{});function br(t){if(t.startsWith("0x"))return br(t.substring(2));if((t.length&1)!==0)return br("0"+t);const e=new ArrayBuffer(t.length/2);return Hu(zs(t),e),e}function Hu(t,e){const r=new DataView(e);let o=0;for(;o<e.byteLength;){const n=t.next(),s=t.next();if(n.done||s.done)throw new rs;const a=oc(n.value),l=oc(s.value),m=a<<4|l;r.setUint8(o,m),o++}}function oc(t){if(t>=48&&t<=57)return t-48;if(t>=97&&t<=102)return t-97+10;if(t>=65&&t<=70)return t-65+10;throw new os(t)}function Gu(t){return t.toString(16).padStart(2,"0")}function*Vu(t){yield*Js(t,Gu)}function nc(t){return Vu(t[Symbol.iterator]())}class Wu{convert(e){if(typeof e!="string")throw new D(typeof e,"string");return br(e)}}class Ju{convert(e){return`0x${Array.from(nc(new Uint8Array(e))).join("")}`}}class ju extends i{encoder=new Ju;decoder=new Wu}const S=new ju;new M(new P(S),new O(S));const sc=new A(new I(S),new B(S));class qu{convert(e){return e instanceof Array?sc.decode(e):[S.decode(e)]}}class $u{convert(e){return sc.encode(e)}}class Qu extends i{encoder=new $u;decoder=new qu}const se=new Qu;class Ku{encoding;constructor(e){this.encoding=e}convert(e){if(typeof e!="string")throw new D(typeof e,"string");return this.encoding.decodeString(e)}}class Xu{encoding;constructor(e){this.encoding=e}convert(e){return this.encoding.encodeToString(e)}}class nt extends i{encoder;decoder;constructor(e){super(),this.encoder=new Xu(e),this.decoder=new Ku(e)}}new nt(wr),new nt(Xh);const cc=new nt(Gs),st=new nt(Hs);new M(new P(st),new O(st));class vr{r;s;v;constructor(e,r,o){this.r=e,this.s=r,this.v=o}toJSON(){return Er.encode(this)}}class Yu{convert(e){return d(e,"r","s","v"),new vr(S.decode(e.r),S.decode(e.s),c.decode(e.v))}}class Zu{convert(e){return h(e,vr),{r:S.encode(e.r),s:S.encode(e.s),v:c.encode(e.v)}}}class ew extends i{encoder=new Zu;decoder=new Yu}const Er=new ew;class xr{account;amount;constructor(e,r){this.account=e,this.amount=r}toJSON(){return kr.encode(this)}}class tw{convert(e){return d(e,"account","amount"),new xr(S.decode(e.account),S.decode(e.amount))}}class rw{convert(e){return h(e,xr),{account:S.encode(e.account),amount:S.encode(e.amount)}}}class ow extends i{encoder=new rw;decoder=new tw}const kr=new ow;class Sr{number;timestamp;hash;constructor(e,r,o){this.number=e,this.timestamp=r,this.hash=o}toJSON(){return Rr.encode(this)}}class nw{convert(e){return d(e,"number","timestamp","hash"),new Sr(c.decode(e.number),u.decode(e.timestamp),u.decode(e.hash))}}class sw{convert(e){return h(e,Sr),{number:c.encode(e.number),timestamp:u.encode(e.timestamp),hash:u.encode(e.hash)}}}class cw extends i{encoder=new sw;decoder=new nw}const Rr=new cw,ac=new M(new P(Rr),new O(Rr));class Ir{bytes;constructor(e){this.bytes=e}toJSON(){return Br.encode(this)}}class aw{convert(e){return d(e,"bytes"),new Ir(cc.decode(e.bytes))}}class iw{convert(e){return h(e,Ir),{bytes:cc.encode(e.bytes)}}}class dw extends i{encoder=new iw;decoder=new aw}const Br=new dw;class Ar{height;timestamp;l1_head;l1_finalized;payload_commitment;ns_table;block_merkle_root;fee_merkle_root;builder_signature;fee_info;constructor(e,r,o,n,s,a,l,m,p,C){this.height=e,this.timestamp=r,this.l1_head=o,this.l1_finalized=n,this.payload_commitment=s,this.ns_table=a,this.block_merkle_root=l,this.fee_merkle_root=m,this.builder_signature=p,this.fee_info=C}toJSON(){return Y.encode(this)}}class lw{convert(e){return d(e,"height","timestamp","l1_head","l1_finalized","payload_commitment","ns_table","block_merkle_root","fee_merkle_root","builder_signature","fee_info"),new Ar(c.decode(e.height),c.decode(e.timestamp),c.decode(e.l1_head),ac.decode(e.l1_finalized),de.decode(e.payload_commitment),Br.decode(e.ns_table),w.decode(e.block_merkle_root),w.decode(e.fee_merkle_root),Er.decode(e.builder_signature),kr.decode(e.fee_info))}}class hw{convert(e){return h(e,Ar),{height:c.encode(e.height),timestamp:c.encode(e.timestamp),l1_head:c.encode(e.l1_head),l1_finalized:ac.encode(e.l1_finalized),payload_commitment:de.encode(e.payload_commitment),ns_table:Br.encode(e.ns_table),block_merkle_root:w.encode(e.block_merkle_root),fee_merkle_root:w.encode(e.fee_merkle_root),builder_signature:Er.encode(e.builder_signature),fee_info:kr.encode(e.fee_info)}}}class uw extends i{encoder=new hw;decoder=new lw}const Y=new uw;class De{vm;payload;constructor(e,r){this.vm=e,this.payload=r}toJSON(){return he.encode(this)}}class ww{convert(e){return d(e,"vm","payload"),new De(c.decode(e.vm),de.decode(e.payload))}}class pw{convert(e){return h(e,De),{vm:c.encode(e.vm),payload:de.encode(e.payload)}}}class mw extends i{encoder=new pw;decoder=new ww}const he=new mw,ic=new A(new I(he),new B(he));class Tr{transaction_nmt;constructor(e){this.transaction_nmt=e}toJSON(){return _e.encode(this)}}class fw{convert(e){return d(e,"transaction_nmt"),new Tr(ic.decode(e.transaction_nmt))}}class gw{convert(e){return h(e,Tr),{transaction_nmt:ic.encode(e.transaction_nmt)}}}class yw extends i{encoder=new gw;decoder=new fw}const _e=new yw;class Dr{header;payload;hash;size;numTransactions;constructor(e,r,o,n,s){this.header=e,this.payload=r,this.hash=o,this.size=n,this.numTransactions=s}toJSON(){return _r.encode(this)}}class Cw{convert(e){return d(e,"header","payload","hash","size","num_transactions"),new Dr(Y.decode(e.header),_e.decode(e.payload),w.decode(e.hash),c.decode(e.size),c.decode(e.num_transactions))}}class bw{convert(e){return h(e,Dr),{header:Y.encode(e.header),payload:_e.encode(e.payload),hash:w.encode(e.hash),size:c.encode(e.size),num_transactions:c.encode(e.numTransactions)}}}class vw extends R{encoder=new bw;decoder=new Cw}const _r=new vw;class ct{header;hash;size;num_transactions;proposer_id;constructor(e,r,o,n,s){this.header=e,this.hash=r,this.size=o,this.num_transactions=n,this.proposer_id=s}toJSON(){return Ur.encode(this)}}class Ew{convert(e){return d(e,"header","hash","size","num_transactions","proposer_id"),new ct(Y.decode(e.header),w.decode(e.hash),c.decode(e.size),c.decode(e.num_transactions),se.decode(e.proposer_id))}}class xw{convert(e){return h(e,ct),{header:Y.encode(e.header),hash:w.encode(e.hash),size:c.encode(e.size),num_transactions:c.encode(e.num_transactions),proposer_id:se.encode(e.proposer_id)}}}class kw extends i{encoder=new xw;decoder=new Ew}const Ur=new kw,Sw=new A(new I(Ur),new B(Ur));class at{hash;header;offset;transaction;constructor(e,r,o,n){this.hash=e,this.header=r,this.offset=o,this.transaction=n}toJSON(){return Lr.encode(this)}}class Rw{convert(e){return d(e,"hash","header","offset","transaction"),new at(w.decode(e.hash),Y.decode(e.header),c.decode(e.offset),he.decode(e.transaction))}}class Iw{convert(e){return h(e,at),{hash:w.encode(e.hash),header:Y.encode(e.header),offset:c.encode(e.offset),transaction:he.encode(e.transaction)}}}class Bw extends i{encoder=new Iw;decoder=new Rw}const Lr=new Bw,dc=new A(new I(Lr),new B(Lr));class Aw{convert(e){if(!di(e))throw new D(typeof e,"boolean");return e}}class Tw{convert(e){return Je(e,"boolean"),e}}class Dw extends i{encoder=new Tw;decoder=new Aw}const it=new Dw;class dt{leaf_commit;constructor(e){this.leaf_commit=e}toJSON(){return Nr.encode(this)}}class _w{convert(e){return d(e,"leaf_commit"),new dt(w.decode(e.leaf_commit))}}class Uw{convert(e){return h(e,dt),{leaf_commit:w.encode(e.leaf_commit)}}}class Lw extends i{encoder=new Uw;decoder=new _w}const Nr=new Lw;class Nw{convert(e){if(li(e))return e;if(Dt(e))return BigInt(e);if(!ie(e))throw new D(typeof e,"string | bigint | number");return BigInt(e)}}class Pw{convert(e){return Je(e,"bigint"),`0x${e.toString(16)}`}}class Ow extends i{encoder=new Pw;decoder=new Nw}const _=new Ow,Ue=new M(new P(_),new O(_)),lc=new A(new I(_),new B(_));new A(new I(Ue),new B(Ue)),BigInt.prototype.toJSON=function(){return _.encode(this)};class Mw{convert(e){if(!ie(e))throw new D(typeof e,"string");const r=new Date(e);if(Number.isNaN(r.valueOf()))throw new D("NaN","number");return r}}class Fw{convert(e){return h(e,Date),e.toISOString()}}class zw extends i{encoder=new Fw;decoder=new Mw}const ce=new zw,hc=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];function lt(t){for(let e=0;e<24;++e){const r=t[0]^t[10]^t[20]^t[30]^t[40],o=t[1]^t[11]^t[21]^t[31]^t[41],n=t[2]^t[12]^t[22]^t[32]^t[42],s=t[3]^t[13]^t[23]^t[33]^t[43],a=t[4]^t[14]^t[24]^t[34]^t[44],l=t[5]^t[15]^t[25]^t[35]^t[45],m=t[6]^t[16]^t[26]^t[36]^t[46],p=t[7]^t[17]^t[27]^t[37]^t[47],C=t[8]^t[18]^t[28]^t[38]^t[48],y=t[9]^t[19]^t[29]^t[39]^t[49];let f=C^(n<<1|s>>>31),g=y^(s<<1|n>>>31);const L=t[0]^f,T=t[1]^g,H=t[10]^f,Ve=t[11]^g,la=t[20]^f,ha=t[21]^g,ua=t[30]^f,wa=t[31]^g,pa=t[40]^f,ma=t[41]^g;f=r^(a<<1|l>>>31),g=o^(l<<1|a>>>31);const fa=t[2]^f,ga=t[3]^g,ya=t[12]^f,Ca=t[13]^g,ba=t[22]^f,va=t[23]^g,Ea=t[32]^f,xa=t[33]^g,ka=t[42]^f,Sa=t[43]^g;f=n^(m<<1|p>>>31),g=s^(p<<1|m>>>31);const Ra=t[4]^f,Ia=t[5]^g,Ba=t[14]^f,Aa=t[15]^g,Ta=t[24]^f,Da=t[25]^g,_a=t[34]^f,Ua=t[35]^g,La=t[44]^f,Na=t[45]^g;f=a^(C<<1|y>>>31),g=l^(y<<1|C>>>31);const Pa=t[6]^f,Oa=t[7]^g,Ma=t[16]^f,Fa=t[17]^g,za=t[26]^f,Ha=t[27]^g,Ga=t[36]^f,Va=t[37]^g,Wa=t[46]^f,Ja=t[47]^g;f=m^(r<<1|o>>>31),g=p^(o<<1|r>>>31);const ja=t[8]^f,qa=t[9]^g,$a=t[18]^f,Qa=t[19]^g,Ka=t[28]^f,Xa=t[29]^g,Ya=t[38]^f,Za=t[39]^g,ei=t[48]^f,ti=t[49]^g,Jo=L,jo=T,qo=Ve<<4|H>>>28,$o=H<<4|Ve>>>28,Qo=la<<3|ha>>>29,Ko=ha<<3|la>>>29,Xo=wa<<9|ua>>>23,Yo=ua<<9|wa>>>23,Zo=pa<<18|ma>>>14,en=ma<<18|pa>>>14,tn=fa<<1|ga>>>31,rn=ga<<1|fa>>>31,on=Ca<<12|ya>>>20,nn=ya<<12|Ca>>>20,sn=ba<<10|va>>>22,cn=va<<10|ba>>>22,an=xa<<13|Ea>>>19,dn=Ea<<13|xa>>>19,ln=ka<<2|Sa>>>30,hn=Sa<<2|ka>>>30,un=Ia<<30|Ra>>>2,wn=Ra<<30|Ia>>>2,pn=Ba<<6|Aa>>>26,mn=Aa<<6|Ba>>>26,fn=Da<<11|Ta>>>21,gn=Ta<<11|Da>>>21,yn=_a<<15|Ua>>>17,Cn=Ua<<15|_a>>>17,bn=Na<<29|La>>>3,vn=La<<29|Na>>>3,En=Pa<<28|Oa>>>4,xn=Oa<<28|Pa>>>4,kn=Fa<<23|Ma>>>9,Sn=Ma<<23|Fa>>>9,Rn=za<<25|Ha>>>7,In=Ha<<25|za>>>7,Bn=Ga<<21|Va>>>11,An=Va<<21|Ga>>>11,Tn=Ja<<24|Wa>>>8,Dn=Wa<<24|Ja>>>8,_n=ja<<27|qa>>>5,Un=qa<<27|ja>>>5,Ln=$a<<20|Qa>>>12,Nn=Qa<<20|$a>>>12,Pn=Xa<<7|Ka>>>25,On=Ka<<7|Xa>>>25,Mn=Ya<<8|Za>>>24,Fn=Za<<8|Ya>>>24,zn=ei<<14|ti>>>18,Hn=ti<<14|ei>>>18;t[0]=Jo^~on&fn,t[1]=jo^~nn&gn,t[10]=En^~Ln&Qo,t[11]=xn^~Nn&Ko,t[20]=tn^~pn&Rn,t[21]=rn^~mn&In,t[30]=_n^~qo&sn,t[31]=Un^~$o&cn,t[40]=un^~kn&Pn,t[41]=wn^~Sn&On,t[2]=on^~fn&Bn,t[3]=nn^~gn&An,t[12]=Ln^~Qo&an,t[13]=Nn^~Ko&dn,t[22]=pn^~Rn&Mn,t[23]=mn^~In&Fn,t[32]=qo^~sn&yn,t[33]=$o^~cn&Cn,t[42]=kn^~Pn&Xo,t[43]=Sn^~On&Yo,t[4]=fn^~Bn&zn,t[5]=gn^~An&Hn,t[14]=Qo^~an&bn,t[15]=Ko^~dn&vn,t[24]=Rn^~Mn&Zo,t[25]=In^~Fn&en,t[34]=sn^~yn&Tn,t[35]=cn^~Cn&Dn,t[44]=Pn^~Xo&ln,t[45]=On^~Yo&hn,t[6]=Bn^~zn&Jo,t[7]=An^~Hn&jo,t[16]=an^~bn&En,t[17]=dn^~vn&xn,t[26]=Mn^~Zo&tn,t[27]=Fn^~en&rn,t[36]=yn^~Tn&_n,t[37]=Cn^~Dn&Un,t[46]=Xo^~ln&un,t[47]=Yo^~hn&wn,t[8]=zn^~Jo&on,t[9]=Hn^~jo&nn,t[18]=bn^~En&Ln,t[19]=vn^~xn&Nn,t[28]=Zo^~tn&pn,t[29]=en^~rn&mn,t[38]=Tn^~_n&qo,t[39]=Dn^~Un&$o,t[48]=ln^~un&kn,t[49]=hn^~wn&Sn,t[0]^=hc[e*2],t[1]^=hc[e*2+1]}}class Hw{state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];blockSize=0;count=0;squeezing=!1;initialize(e,r){for(let o=0;o<50;++o)this.state[o]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1}absorb(e){for(let r=0;r<e.length;++r)this.state[~~(this.count/4)]^=e[r]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(lt(this.state),this.count=0)}absorbLastFewBits(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),(e&128)!==0&&this.count===this.blockSize-1&&lt(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),lt(this.state),this.count=0,this.squeezing=!0}squeeze(e){this.squeezing||this.absorbLastFewBits(1);const r=new Uint8Array(e);for(let o=0;o<e;++o)r[o]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(lt(this.state),this.count=0);return r}copy(e){for(let r=0;r<50;++r)e.state[r]=this.state[r];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing}}class ae{_rate;_capacity;_delimitedSuffix;_hashBitLength;_state;_finalized;constructor(e,r,o,n){this._rate=e,this._capacity=r,this._delimitedSuffix=o,this._hashBitLength=n,this._state=new Hw,this._state.initialize(e,r),this._finalized=!1}update(e){if(this._finalized)throw new Error("Digest already called");return this._state.absorb(new Uint8Array(e)),this}digest(){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);const e=this._state.squeeze(this._hashBitLength/8);return this._resetState(),ur.encode(e)}_resetState(){return this._state.initialize(this._rate,this._capacity),this}}function Gw(t){switch(t.toLowerCase()){case"keccak224":return new ae(1152,448,null,224);case"keccak256":return new ae(1088,512,null,256);case"keccak384":return new ae(832,768,null,384);case"keccak512":return new ae(576,1024,null,512);case"sha3-224":return new ae(1152,448,6,224);case"sha3-256":return new ae(1088,512,6,256);case"sha3-384":return new ae(832,768,6,384);case"sha3-512":return new ae(576,1024,6,512);default:throw new Error("invalid algorithm: "+t)}}const Vw=48,Ww=57,Jw=97,jw=102;class qw{convert(e){if(h(e,ArrayBuffer),e.byteLength!==20)throw new D(typeof e,"20-byte ArrayBuffer");const o=[...wu(nc(new Uint8Array(e)),m=>m.split(""))],n=Gw("keccak256"),s=new TextEncoder;n.update(ur.encode(s.encode(o.join(""))));const a=new Uint8Array(n.digest());return["0x",...et(qs(js(e.byteLength*2),o,(m,p)=>[m,p]),([m,p])=>{const C=p.charCodeAt(0);if(C>=Vw&&C<=Ww)return p;if(C>=Jw&&C<=jw){const y=Math.floor(m/2),f=m&1,g=a[y];return(f===0?g>>4:g&15)>7?p.toUpperCase():p}throw new N})].join("")}}const $w=new qw;class Pr{keyCodec;valueCodec;constructor(e,r){this.keyCodec=e,this.valueCodec=r}convert(e){if(typeof e!="object"||e===null)throw new Error(`invalid map value: expected an object, got ${typeof e}`);const r=new Map;for(const[o,n]of Object.entries(e)){const s=this.keyCodec.decode(o),a=this.valueCodec.decode(n);r.set(s,a)}return r}}class Or{keyCodec;valueCodec;constructor(e,r){this.keyCodec=e,this.valueCodec=r}convert(e){h(e,Map);const r={};for(const[o,n]of e.entries()){const s=this.keyCodec.encode(o),a=this.valueCodec.encode(n);r[s]=a}return r}}class Le extends i{encoder;decoder;constructor(e,r){super(),this.encoder=r,this.decoder=e}static keyStringCodec(e){return new Le(new Pr(u,e),new Or(u,e))}}class Qw{convert(e){if(!ie(e))throw new D(typeof e,"string");return new URL(e)}}class Kw{convert(e){return e.toString()}}class Xw extends i{encoder=new Kw;decoder=new Qw}const uc=new Xw;new M(new P(uc),new O(uc));class wc{width;index;constructor(e,r){this.width=e,this.index=r}toJSON(){return Mr.encode(this)}}class Yw{convert(e){return d(e,"width","index"),new wc(c.decode(e.width),c.decode(e.index))}}class Zw{convert(e){return h(e,wc),{width:c.encode(e.width),index:c.encode(e.index)}}}class ep extends i{encoder=new Zw;decoder=new Yw}const Mr=new ep;class Ne{static get lsb0(){return rp}static get msb0(){return np}valueOf(){return this.toString()}toJSON(){return this.toString()}}const pc="bitvec::order::Lsb0",mc="bitvec::order::Msb0";class tp extends Ne{toString(){return pc}}const rp=new tp;class op extends Ne{toString(){return mc}}const np=new op;class sp{convert(e){if(typeof e!="string")throw new D(typeof e,"string");switch(e){case pc:return Ne.lsb0;case mc:return Ne.msb0;default:throw new D(e,"CappuccinoAPIBitVecOrder")}}}class cp{convert(e){return e.toString()}}class ap extends i{encoder=new cp;decoder=new sp}const fc=new ap;class gc{order;head;bits;data;constructor(e,r,o,n){this.order=e,this.head=r,this.bits=o,this.data=n}getBitVecIndexIterable(){return this.order===Ne.lsb0?new wp(this.head.width,this.bits):new mp(this.head.width,this.bits)}[Symbol.iterator](){const e=this.getBitVecIndexIterable();return et(e,r=>hp(this.data,r))[Symbol.iterator]()}toJSON(){return Pe.encode(this)}}class ip{convert(e){return d(e,"order","head","bits","data"),new gc(fc.decode(e.order),Mr.decode(e.head),c.decode(e.bits),lc.decode(e.data))}}class dp{convert(e){return h(e,gc),{order:fc.encode(e.order),head:Mr.encode(e.head),bits:c.encode(e.bits),data:lc.encode(e.data)}}}class lp extends i{encoder=new dp;decoder=new ip}const Pe=new lp;new A(new I(Pe),new B(Pe));function hp(t,e){return(t[e.bucket]>>e.bitOffset&1n)===1n}class yc{constructor(e,r){this.bucket=e,this.bitOffset=r}}function Cc(t){switch(U(t===8||t===16||t===32||t===64,"bit width should be a power of two that is supported"),t){case 8:return 3;case 16:return 4;case 32:return 5;case 64:return 6;default:throw new N}}class up{totalBits;bitWidthMask;bitWidthShift;offset=0n;constructor(e,r){this.totalBits=r;const o=BigInt(Cc(e));this.bitWidthMask=BigInt(e)-1n,this.bitWidthShift=o}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,r=this.offset&this.bitWidthMask;return this.offset+=1n,{done:!1,value:new yc(Number(e),r)}}}class wp{bitWidth;totalBits;constructor(e,r){this.bitWidth=e,this.totalBits=r}[Symbol.iterator](){return new up(this.bitWidth,this.totalBits)}}class pp{bitWidth;totalBits;bitWidthMask;bitWidthShift;offset=0n;constructor(e,r){this.bitWidth=BigInt(e),this.totalBits=BigInt(r);const o=BigInt(Cc(e));this.bitWidthMask=BigInt(e)-1n,this.bitWidthShift=o}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,r=this.bitWidth-1n-(this.offset&this.bitWidthMask);return this.offset+=1n,{done:!1,value:new yc(Number(e),r)}}}class mp{bitWidth;totalBits;constructor(e,r){this.bitWidth=e,this.totalBits=r}[Symbol.iterator](){return new pp(this.bitWidth,this.totalBits)}}class bc{signature;bitvec;constructor(e,r){this.signature=e,this.bitvec=r}toJSON(){return Fr.encode(this)}}class fp{convert(e){if(!Vn(e)||e.length!==2)throw new D(typeof e,"Array");return new bc(w.decode(e[0]),Pe.decode(e[1]))}}class gp{convert(e){return h(e,bc),[w.encode(e.signature),Pe.encode(e.bitvec)]}}class yp extends i{encoder=new gp;decoder=new fp}const Fr=new yp,vc=new M(new P(Fr),new O(Fr));class ht{data;vote_commitment;view_number;signatures;is_genesis;_pd;constructor(e,r,o,n,s,a){this.data=e,this.vote_commitment=r,this.view_number=o,this.signatures=n,this.is_genesis=s,this._pd=a}toJSON(){return Oe.encode(this)}}class Cp{convert(e){return d(e,"data","vote_commitment","view_number","signatures","is_genesis","_pd"),new ht(Nr.decode(e.data),w.decode(e.vote_commitment),c.decode(e.view_number),vc.decode(e.signatures),it.decode(e.is_genesis),null)}}class bp{convert(e){return h(e,ht),{data:Nr.encode(e.data),vote_commitment:w.encode(e.vote_commitment),view_number:c.encode(e.view_number),signatures:vc.encode(e.signatures),is_genesis:it.encode(e.is_genesis),_pd:null}}}class vp extends i{encoder=new bp;decoder=new Cp}const Oe=new vp;class zr{view_number;justify_qc;parent_commitment;block_header;block_payload;rejected;timestamp;proposer_id;constructor(e,r,o,n,s,a,l,m){this.view_number=e,this.justify_qc=r,this.parent_commitment=o,this.block_header=n,this.block_payload=s,this.rejected=a,this.timestamp=l,this.proposer_id=m}toJSON(){return Hr.encode(this)}}class Ep{convert(e){return d(e,"view_number","justify_qc","parent_commitment","block_header","block_payload","rejected","timestamp","proposer_id"),new zr(c.decode(e.view_number),Oe.decode(e.justify_qc),w.decode(e.parent_commitment),Y.decode(e.block_header),_e.decode(e.block_payload),de.decode(e.rejected),c.decode(e.timestamp),S.decode(e.proposer_id))}}class xp{convert(e){return h(e,zr),{view_number:c.encode(e.view_number),justify_qc:Oe.encode(e.justify_qc),parent_commitment:w.encode(e.parent_commitment),block_header:Y.encode(e.block_header),block_payload:_e.encode(e.block_payload),rejected:de.encode(e.rejected),timestamp:c.encode(e.timestamp),proposer_id:S.encode(e.proposer_id)}}}class kp extends i{encoder=new xp;decoder=new Ep}const Hr=new kp;class Gr{leaf;qc;constructor(e,r){this.leaf=e,this.qc=r}toJSON(){return Vr.encode(this)}}class Sp{convert(e){return d(e,"leaf","qc"),new Gr(Hr.decode(e.leaf),Oe.decode(e.qc))}}class Rp{convert(e){return h(e,Gr),{leaf:Hr.encode(e.leaf),qc:Oe.encode(e.qc)}}}class Ip extends i{encoder=new Rp;decoder=new Sp}const Vr=new Ip;class Me{}class Wr extends Me{toJSON(){return Jr.encode(this)}}class Bp{convert(e){if(!ie(e)||e!=="Empty")throw new W;return new Wr}}class Ap{convert(e){return h(e,Wr),"Empty"}}class Tp extends i{encoder=new Ap;decoder=new Bp}const Jr=new Tp;class jr extends Me{value;pos;elem;constructor(e,r,o){super(),this.value=e,this.pos=r,this.elem=o}toJSON(){return qr.encode(this)}}class Dp{convert(e){d(e,"Leaf");const r=e.Leaf;return d(r,"value","pos","elem"),new jr(w.decode(r.value),w.decode(r.pos),w.decode(r.elem))}}class _p{convert(e){return h(e,jr),{Leaf:{value:w.encode(e.value),pos:w.encode(e.pos),elem:w.encode(e.elem)}}}}class Up extends R{encoder=new _p;decoder=new Dp}const qr=new Up;class $r extends Me{value;constructor(e){super(),this.value=e}toJSON(){return Qr.encode(this)}}class Lp{convert(e){d(e,"ForgettenSubtree");const r=e.ForgettenSubtree;return d(r,"value"),new $r(w.decode(r.value))}}class Np{convert(e){return h(e,$r),{ForgettenSubtree:{value:w.encode(e.value)}}}}class Pp extends R{encoder=new Np;decoder=new Lp}const Qr=new Pp;class ut extends Me{value;children;constructor(e,r){super(),this.value=e,this.children=r}toJSON(){return Kr.encode(this)}}class Op{convert(e){d(e,"Branch");const r=e.Branch;return d(r,"value","children"),new ut(w.decode(r.value),wt.decode(r.children))}}class Mp{convert(e){return h(e,ut),{Branch:{value:w.encode(e.value),children:wt.encode(e.children)}}}}class Fp extends i{encoder=new Mp;decoder=new Op}const Kr=new Fp;class zp{convert(e){if(J(e,"Leaf",G))return qr.decoder.convert(e);if(J(e,"Branch",G))return Kr.decoder.convert(e);if(J(e,"ForgettenSubtree",G))return Qr.decoder.convert(e);if(ie(e))return Jr.decoder.convert(e);throw new W}}class Hp{convert(e){if(h(e,Me),e instanceof jr)return qr.encode(e);if(e instanceof ut)return Kr.encode(e);if(e instanceof $r)return Qr.encode(e);if(e instanceof Wr)return Jr.encode(e);throw new W}}class Gp extends i{encoder=new Hp;decoder=new zp}const Ec=new Gp,wt=new A(new I(Ec),new B(Ec));class Xr{pos;proof;constructor(e,r){this.pos=e,this.proof=r}toJSON(){return Yr.encode(this)}}class Vp{convert(e){return d(e,"pos","proof"),new Xr(w.decode(e.pos),wt.decode(e.proof))}}class Wp{convert(e){return h(e,Xr),{pos:w.encode(e.pos),proof:wt.encode(e.proof)}}}class Jp extends i{encoder=new Wp;decoder=new Vp}const Yr=new Jp;class Zr{transaction;block_hash;proof;height;hash;constructor(e,r,o,n,s){this.transaction=e,this.block_hash=r,this.proof=o,this.height=n,this.hash=s}toJSON(){return eo.encode(this)}}class jp{convert(e){return d(e,"transaction","block_hash","proof","height","hash"),new Zr(he.decoder.convert(e.transaction),w.decode(e.block_hash),Yr.decoder.convert(e.proof),c.decode(e.height),w.decode(e.hash))}}class qp{convert(e){return h(e,Zr),{transaction:he.encode(e.transaction),block_hash:w.encode(e.block_hash),proof:Yr.encode(e.proof),height:c.encode(e.height),hash:w.encode(e.hash)}}}class $p extends i{encoder=new qp;decoder=new jp}const eo=new $p;function pt(t){return new Ar(t.height,t.time.valueOf()/1e3,0,new Sr(0,"00","00"),[],new Ir(new ArrayBuffer(0)),new k("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new k("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new vr(new ArrayBuffer(0),new ArrayBuffer(0),0),new xr(new ArrayBuffer(0),new ArrayBuffer(0)))}async function Qp(t){return new Dr(pt(t),new Tr(await X(K(t.transactions,async e=>new De(e.tree.namespace,Array.from(new Uint8Array(e.tree.data)))))),new k("BLOCK",new Uint8Array([0,0,0,0]).buffer),t.size,t.numTransactions)}function Kp(t){return new ct(pt(t),new k("BLOCK",new Uint8Array([0,0,0,0]).buffer),t.size,t.numTransactions,t.proposer)}function Xp(t){const e=t.transactions,r=pt(t);return K(e,async o=>new at(o.hash,r,o.index,new De(o.tree.namespace,Array.from(new Uint8Array(o.tree.data)))))}async function*Yp(t){const e=pt(t),r=t.transactions;yield*K(r,async o=>new Zr(new De(o.tree.namespace,Array.from(new Uint8Array(o.tree.data))),new k("BLOCK",new Uint8Array([0,0,0,0]).buffer),new Xr(new k("POS",new Uint8Array([0,0,0,0]).buffer),[new ut(new k("EMPTY",new Uint8Array([0,0,0,0]).buffer),[])]),e.height,new k("COMMIT",o.tree.data.slice(0,32))))}class Zp{async getLeafFromHeight(e){const r=await this.getBlockFromHeight(e);return new Gr(new zr(e,new ht(new dt(new k("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new k("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null),new k("LEAF",new Uint8Array([0,0,0,0]).buffer),r.header,r.payload,[],r.header.timestamp,r.header.fee_info.account),new ht(new dt(new k("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new k("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null))}async getTransactionFromHeightAndOffset(e,r){const o=await Ae(ne(z(),e)),n=Yp(o);return await Pu(rt(n,r))}async getBlockSummaries(e,r){const o=ne(z(),e),n=oe(o,r-e),s=le(n,async a=>Kp(a));return await X(s)}async getBlockFromHeight(e){const r=ne(z(),e),o=await Ae(r);return Qp(o)}async*streamTransactionSummaries(e){const r=fr(z(),s=>s.height<=e),o=ot(r);yield*pe(o,s=>Te(Xp(s)))}async getTransactionSummaryRange(e,r,o){const n=this.streamTransactionSummaries(e),s=ne(n,r),a=oe(s,o);return await X(a)}async getTransactionSummaryRangeForRollup(e,r,o,n){const s=this.streamTransactionSummaries(r),a=pr(s,p=>p.transaction.vm===e),l=ne(a,o),m=oe(l,n);return await X(m)}}class to{hash;height;time;numTransactions;proposerID;feeRecipient;size;blockReward;constructor(e,r,o,n,s,a,l,m){this.hash=e,this.height=r,this.time=o,this.numTransactions=n,this.proposerID=s,this.feeRecipient=a,this.size=l,this.blockReward=m}toJSON(){return ue.encode(this)}}class em{convert(e){return d(e,"hash","height","time","num_transactions","proposer_id","fee_recipient","size","block_reward"),new to(w.decode(e.hash),c.decode(e.height),ce.decode(e.time),c.decode(e.num_transactions),se.decode(e.proposer_id),se.decode(e.fee_recipient),c.decode(e.size),Ns.decode(e.block_reward))}}class tm{convert(e){return h(e,to),{hash:w.encode(e.hash),height:c.encode(e.height),time:ce.encode(e.time),num_transactions:c.encode(e.numTransactions),proposer_id:se.encode(e.proposerID),fee_recipient:se.encode(e.feeRecipient),size:c.encode(e.size),block_reward:Ns.encode(e.blockReward)}}}class rm extends R{encoder=new tm;decoder=new em}const ue=new rm;new A(new I(ue),new B(ue));class ro{hash;height;proposerID;numTransactions;size;time;constructor(e,r,o,n,s,a){this.hash=e,this.height=r,this.proposerID=o,this.numTransactions=n,this.size=s,this.time=a}toJSON(){return oo.encode(this)}}class om{convert(e){return d(e,"hash","height","proposer_id","num_transactions","size","time"),new ro(w.decode(e.hash),c.decode(e.height),se.decode(e.proposer_id),c.decode(e.num_transactions),c.decode(e.size),ce.decode(e.time))}}class nm{convert(e){return h(e,ro),{hash:w.encode(e.hash),height:c.encode(e.height),proposer_id:se.encode(e.proposerID),num_transactions:c.encode(e.numTransactions),size:c.encode(e.size),time:ce.encode(e.time)}}}class sm extends R{encoder=new nm;decoder=new om}const oo=new sm,me=new A(new I(oo),new B(oo)),fe="latest";class no{rollups;transactions;blocks;constructor(e,r,o){this.rollups=e,this.transactions=r,this.blocks=o}toJSON(){return so.encode(this)}}class cm{convert(e){return d(e,"rollups","transactions","blocks"),new no(c.decode(e.rollups),c.decode(e.transactions),c.decode(e.blocks))}}class am{convert(e){return h(e,no),{rollups:c.encode(e.rollups),transactions:c.encode(e.transactions),blocks:c.encode(e.blocks)}}}class im extends i{encoder=new am;decoder=new cm}const so=new im;function dm(t,e){return t.blockHeights-e.blockHeights}class co{blockTime;blockSize;blockTransactions;blockHeights;constructor(e,r,o,n){const s=[],a=Math.min(e.length,r.length,o.length,n.length);for(let L=0;L<a;L++){const T=n[L];T!==null&&s.push({blockTime:e[L],blockSize:r[L],blockTransactions:o[L],blockHeights:T})}s.sort(dm);const l=s[0].blockHeights,m=s[s.length-1].blockHeights,p=[],C=[],y=[],f=[];for(let L=l,T=0;L<=m;L++){const H=s[T];if(H.blockHeights!==L){p.push(null),C.push(null),y.push(null),f.push(null);continue}p.push(H.blockTime),C.push(H.blockSize),y.push(H.blockTransactions),f.push(H.blockHeights),T++}const g=Math.max(0,f.length-50);this.blockTime=p.slice(g),this.blockSize=C.slice(g),this.blockTransactions=y.slice(g),this.blockHeights=f.slice(g)}toJSON(){return ao.encode(this)}}class lm{convert(e){return d(e,"block_time","block_size","block_transactions","block_heights"),new co(ee.decode(e.block_time),ee.decode(e.block_size),ee.decode(e.block_transactions),ee.decode(e.block_heights))}}class hm{convert(e){return h(e,co),{block_time:ee.encode(e.blockTime),block_size:ee.encode(e.blockSize),block_transactions:ee.encode(e.blockTransactions),block_heights:ee.encode(e.blockHeights)}}}class um extends i{encoder=new hm;decoder=new lm}const ao=new um,xc=de;class mt{hash;rollups;height;time;offset;numTransactions;constructor(e,r,o,n,s,a){this.hash=e,this.rollups=r,this.height=o,this.time=n,this.offset=s,this.numTransactions=a}toJSON(){return io.encode(this)}}class wm{convert(e){return d(e,"hash","rollups","height","time","offset","num_transactions"),new mt(w.decode(e.hash),xc.decode(e.rollups),c.decode(e.height),ce.decode(e.time),c.decode(e.offset),c.decode(e.num_transactions))}}class pm{convert(e){return h(e,mt),{hash:w.encode(e.hash),rollups:xc.encode(e.rollups),height:c.encode(e.height),time:ce.encode(e.time),offset:c.encode(e.offset),num_transactions:c.encode(e.numTransactions)}}}class mm extends i{encoder=new pm;decoder=new wm}const io=new mm,ge=new A(new I(io),new B(io));class lo{latestBlock;genesisOverview;latestBlocks;latestTransactions;histograms;constructor(e,r,o,n,s){this.latestBlock=e,this.genesisOverview=r,this.latestBlocks=o,this.latestTransactions=n,this.histograms=s}toJSON(){return ho.encode(this)}}class fm{convert(e){return d(e,"latest_block","genesis_overview","latest_blocks","latest_transactions","histograms"),new lo(ue.decode(e.latest_block),so.decode(e.genesis_overview),me.decode(e.latest_blocks),ge.decode(e.latest_transactions),ao.decode(e.histograms))}}class gm{convert(e){return h(e,lo),{latest_block:ue.encode(e.latestBlock),genesis_overview:so.encode(e.genesisOverview),latest_blocks:me.encode(e.latestBlocks),latest_transactions:ge.encode(e.latestTransactions),histograms:ao.encode(e.histograms)}}}class ym extends i{encoder=new gm;decoder=new fm}const ho=new ym;class uo{blockDetail;constructor(e){this.blockDetail=e}toJSON(){return wo.encode(this)}}class Cm{convert(e){return d(e,"block_detail"),new uo(ue.decode(e.block_detail))}}class bm{convert(e){return h(e,uo),{block_detail:ue.encode(e.blockDetail)}}}class vm extends R{encoder=new bm;decoder=new Cm}const wo=new vm;class po{blockSummaries;constructor(e){this.blockSummaries=e}toJSON(){return mo.encode(this)}}class Em{convert(e){return d(e,"block_summaries"),new po(me.decode(e.block_summaries))}}class xm{convert(e){return h(e,po),{block_summaries:me.encode(e.blockSummaries)}}}class km extends R{encoder=new xm;decoder=new Em}const mo=new km;class fo{explorerSummary;constructor(e){this.explorerSummary=e}toJSON(){return go.encode(this)}}class Sm{convert(e){return d(e,"explorer_summary"),new fo(ho.decode(e.explorer_summary))}}class Rm{convert(e){return h(e,fo),{explorer_summary:ho.encode(e.explorerSummary)}}}class Im extends i{encoder=new Rm;decoder=new Sm}const go=new Im;class yo{blocks;transactions;constructor(e,r){this.blocks=e,this.transactions=r}toJSON(){return Co.encode(this)}}class Bm{convert(e){return d(e,"blocks","transactions"),new yo(me.decode(e.blocks),ge.decode(e.transactions))}}class Am{convert(e){return h(e,yo),{blocks:me.encode(e.blocks),transactions:ge.encode(e.transactions)}}}class Tm extends R{encoder=new Am;decoder=new Bm}const Co=new Tm;class bo{searchResults;constructor(e){this.searchResults=e}toJSON(){return vo.encode(this)}}class Dm{convert(e){return d(e,"search_results"),new bo(Co.decode(e.search_results))}}class _m{convert(e){return h(e,bo),{search_results:Co.encode(e.searchResults)}}}class Um extends R{encoder=new _m;decoder=new Dm}const vo=new Um;class Eo{static heightAndOffset(e,r){return new Fe(e,r)}static hash(e){return new ze(e)}toJSON(){return kc.encode(this)}}class Lm{convert(e){if(h(e,Eo),e instanceof Fe)return{height:c.encode(e.height),offset:c.encode(e.offset)};if(e instanceof ze)return{hash:w.encode(e.hash)};throw new W}}class Nm{convert(e){if(J(e,"height",G)&&J(e,"offset",G))return new Fe(c.decode(e.height),c.decode(e.offset));if(J(e,"hash",G))return new ze(w.decode(e.hash));throw new W}}class Pm extends i{encoder=new Lm;decoder=new Nm}const kc=new Pm;class Fe extends Eo{height;offset;constructor(e,r){super(),this.height=e,this.offset=r}}class ze extends Eo{hash;constructor(e){super(),this.hash=e}}const Sc=c;class xo{namespace;payload;constructor(e,r){this.namespace=e,this.payload=r}toJSON(){return ko.encode(this)}}class Om{convert(e){return d(e,"namespace","payload"),new xo(Sc.decode(e.namespace),st.decode(e.payload))}}class Mm{convert(e){return h(e,xo),{namespace:Sc.encode(e.namespace),payload:st.encode(e.payload)}}}class Fm extends i{encoder=new Mm;decoder=new Om}const ko=new Fm,Rc=new A(new I(ko),new B(ko));class So{hash;height;blockConfirmed;offset;numTransactions;size;time;sequencingFees;feeDetails;constructor(e,r,o,n,s,a,l,m,p){this.hash=e,this.height=r,this.blockConfirmed=o,this.offset=n,this.numTransactions=s,this.size=a,this.time=l,this.sequencingFees=m,this.feeDetails=p}toJSON(){return Ro.encode(this)}}class zm{convert(e){return d(e,"hash","height","block_confirmed","offset","num_transactions","size","time","sequencing_fees","fee_details"),new So(w.decode(e.hash),c.decode(e.height),it.decode(e.block_confirmed),c.decode(e.offset),c.decode(e.num_transactions),c.decode(e.size),ce.decode(e.time),[],[])}}class Hm{convert(e){return h(e,So),{hash:w.encode(e.hash),height:c.encode(e.height),block_confirmed:it.encode(e.blockConfirmed),offset:c.encode(e.offset),num_transactions:c.encode(e.numTransactions),size:c.encode(e.size),time:ce.encode(e.time),sequencing_fees:[],fee_details:[]}}}class Gm extends i{encoder=new Hm;decoder=new zm}const Ro=new Gm;class Io{details;data;constructor(e,r){this.details=e,this.data=r}toJSON(){return Bo.encode(this)}}class Vm{convert(e){return d(e,"details","data"),new Io(Ro.decode(e.details),Rc.decode(e.data))}}class Wm{convert(e){return h(e,Io),{details:Ro.encode(e.details),data:Rc.encode(e.data)}}}class Jm extends i{encoder=new Wm;decoder=new Vm}const Bo=new Jm;class ft{transactionDetail;constructor(e){this.transactionDetail=e}toJSON(){return Ao.encode(this)}}class jm{convert(e){return d(e,"transaction_detail"),new ft(Bo.decode(e.transaction_detail))}}class qm{convert(e){return h(e,ft),{transaction_detail:Bo.encode(e.transactionDetail)}}}class $m extends R{encoder=new qm;decoder=new jm}const Ao=new $m;class gt{constructor(){}static block(e){return new yt(e)}static namespace(e){return new Ct(e)}static none(){return new Do}toJSON(){return To.encode(this)}}class Qm{convert(e){return J(e,"block",G)?new yt(c.decode(e.block)):J(e,"namespace",G)?new Ct(c.decode(e.namespace)):new Do}}class Km{convert(e){if(h(e,gt),e instanceof Do)return{};if(e instanceof yt)return{block:c.encode(e.block)};if(e instanceof Ct)return{namespace:c.encode(e.namespace)};throw new W}}class Xm extends R{encoder=new Km;decoder=new Qm}const To=new Xm;class Do extends gt{constructor(){super()}convertURL(e){return e}}class yt extends gt{block;constructor(e){super(),this.block=e}convertURL(e){return new URL(`${e.pathname}/block/${this.block}`,e)}}class Ct extends gt{namespace;constructor(e){super(),this.namespace=e}convertURL(e){return new URL(`${e.pathname}/namespace/${this.namespace}`,e)}}class He{transactionSummaries;constructor(e){this.transactionSummaries=e}toJSON(){return _o.encode(this)}}class Ym{convert(e){return d(e,"transaction_summaries"),new He(ge.decode(e.transaction_summaries))}}class Zm{convert(e){return h(e,He),{transaction_summaries:ge.encode(e.transactionSummaries)}}}class ef extends R{encoder=new Zm;decoder=new Ym}const _o=new ef;class bt{limit;constructor(e){this.limit=e}static latest(e){return new vt(e)}static heightAndOffset(e,r,o){return new Et(e,r,o)}static hash(e,r){return new xt(e,r)}toJSON(){return Uo.encode(this)}}class tf{convert(e){return d(e,"limit"),J(e,"height",G)&&J(e,"offset",G)?new Et(c.decode(e.height),c.decode(e.offset),c.decode(e.limit)):J(e,"hash",G)?new xt(w.decode(e.hash),c.decode(e.limit)):new vt(c.decode(e.limit))}}class rf{convert(e){if(h(e,bt),e instanceof vt)return{limit:c.encode(e.limit)};if(e instanceof Et)return{height:c.encode(e.height),offset:c.encode(e.offset),limit:c.encode(e.limit)};if(e instanceof xt)return{hash:w.encode(e.hash),limit:c.encode(e.limit)};throw new W}}class of extends R{encoder=new rf;decoder=new tf}const Uo=new of;class vt extends bt{constructor(e){super(e)}convertURL(e){return new URL(`transactions/latest/${this.limit}`,e)}}class Et extends bt{height;offset;constructor(e,r,o){super(o),this.height=e,this.offset=r}convertURL(e){return new URL(`transactions/from/${this.height}/${this.offset}/${this.limit}`,e)}}class xt extends bt{hash;constructor(e,r){super(r),this.hash=e}convertURL(e){return new URL(`transactions/hash/${this.hash}/${this.limit}`,e)}}function Ic(t){return new to(t.hash,t.height,t.time,t.numTransactions,t.proposer,t.proposer,t.size,t.fees)}function Lo(t){return new ro(t.hash,t.height,t.proposer,t.numTransactions,t.size,t.time)}function Bc(t,e){return new Io(new So(e.hash,e.block,!0,e.index,t.numTransactions,e.size,e.time,[],[]),[new xo(e.tree.namespace,e.tree.data)])}function kt(t,e){return new mt(e.hash,[e.tree.namespace],e.block,e.time,e.index,t.numTransactions)}class nf{async getBlockDetail(e){const r=e.target,o=await(r===fe?tc(z()):Ae(rt(z(),r)));return new uo(Ic(o))}async getBlockSummaries(e){const r=fr(z(),l=>e.from===fe||l.height<=e.from),o=ot(r),n=oe(o,e.limit),s=le(n,async l=>Lo(l)),a=await X(s);return new po(a)}async getTransactionDetail(e){const r=z();if(e instanceof Fe){const o=gr(r,l=>l.height<=e.height),n=pe(o,l=>K(l.transactions,async m=>Bc(l,m))),s=rt(Te(n),e.offset),a=await Ae(s);return new ft(a)}if(e instanceof ze){const o=pe(r,s=>K(s.transactions,async a=>Bc(s,a))),n=await Mu(o,s=>s.details.hash===e.hash);if(!n)throw new hs(e.hash);return new ft(n)}throw new N}applyFilter(e,r){return r instanceof yt?ec(e,o=>o.height==r.block):r instanceof Ct?ec(e,o=>o.rollups.indexOf(r.namespace)>=0):e}async getTransactionSummaries(e){const r=z(),{target:o,filter:n}=e;if(o instanceof vt){const a=pe(r,C=>K(C.transactions,async y=>kt(C,y))),l=Te(a),m=this.applyFilter(l,n),p=await Cr(mr(m,o.limit));return new He(p)}if(o instanceof Et){const s=gr(r,y=>y.height<=o.height),a=pe(s,y=>K(y.transactions,async f=>kt(y,f))),l=Te(a),m=rt(l,o.offset),p=this.applyFilter(m,n),C=await Cr(mr(p,o.limit));return new He(C)}if(o instanceof xt){const s=z(),a=pe(s,y=>K(y.transactions,async f=>new mt(f.hash,[f.tree.namespace],f.block,f.time,f.index,y.numTransactions))),l=gr(a,y=>y.hash!==o.hash),m=Te(l),p=this.applyFilter(m,n),C=await Cr(mr(p,o.limit));return new He(C)}throw new N}async getExplorerOverview(){let e;const r=q(11),o=q(51),n=q(51),s=q(51),a=q(51),l=q(11);let m=0,p=0;const C=new Map;for await(const y of z()){e=Ic(y),r.put(Lo(y)),o.put(y.size),n.put(Math.round(y.genTime/1e3)),s.put(y.numTransactions),a.put(y.height),m++,p+=y.numTransactions;for await(const f of y.transactions){l.put(kt(y,f));const g=C.get(f.tree.namespace)||0;C.set(f.tree.namespace,g+1)}}return new fo(new lo(e,new no(Array.from(C.keys()).length,p,m),Array.from(r),Array.from(l),new co(Array.from(n),Array.from(o),Array.from(s),Array.from(a))))}async getSearchResult(e){const r=q(101),o=q(10),n=q(10);for await(const s of z())r.put(s);for(const s of r){s.hash.toString().startsWith(e.query)&&o.put(Lo(s));for await(const a of s.transactions)a.hash.toString().startsWith(e.query)&&n.put(kt(s,a))}return new bo(new yo(Array.from(o),Array.from(n)))}}const No=1e4,Ac=0,sf="PercentageOutOfRange";class cf extends v{value;constructor(e,r=`the commission percentage is outside of the range [${Ac}, ${No}], have ${e}`){super(r),this.value=e,Object.freeze(this)}get code(){return sf}}class Po{value;constructor(e){if(e<Ac||e>No)throw new cf(e);this.value=e}toString(){return`${this.value/100}%`}toJSON(){return this.value}valueOf(){return this.value/No}}class af{convert(e){if(typeof e!="number")throw new D(typeof e,"number");return new Po(e)}}class df{convert(e){if(!(e instanceof Po))throw new D(e,"CommissionPercent");return Math.floor(e.value)}}class lf extends i{encoder=new df;decoder=new af}const St=new lf;let Tc=class{stakeKey;stakeAmount;constructor(e,r){this.stakeKey=e,this.stakeAmount=r}},hf=class{convert(e){return d(e,"stake_key","stake_amount"),new Tc(w.decode(e.stake_key),_.decode(e.stake_amount))}},uf=class{convert(e){return h(e,Tc),{stake_key:w.encode(e.stakeKey),stake_amount:_.encode(e.stakeAmount)}}},wf=class extends i{encoder=new uf;decoder=new hf};const ye=new wf;new M(new P(ye),new O(ye)),new A(new I(ye),new B(ye));class Dc{stakeTableEntry;stateVerKey;constructor(e,r){this.stakeTableEntry=e,this.stateVerKey=r}}class pf{convert(e){return d(e,"stake_table_entry","state_ver_key"),new Dc(ye.decode(e.stake_table_entry),w.decode(e.state_ver_key))}}class mf{convert(e){return h(e,Dc),{stake_table_entry:ye.encode(e.stakeTableEntry),state_ver_key:w.encode(e.stateVerKey)}}}class ff extends i{encoder=new mf;decoder=new pf}const Rt=new ff;new M(new P(Rt),new O(Rt)),new A(new I(Rt),new B(Rt));class gf{address;constructor(e){this.address=e,Object.freeze(this)}toJSON(){return Ce.encode(this)}toString(){return Ce.encode(this)}}class yf{convert(e){return e.address.byteLength!==20?S.encode(e.address):$w.convert(e.address)}}class Cf{convert(e){return new gf(S.decode(e))}}class bf extends i{encoder=new yf;decoder=new Cf}const Ce=new bf;new M(new P(Ce),new O(Ce));const _c=Le.keyStringCodec(_);class Uc{account;stakeTableKey;stateVerKey;stake;commission;delegators;constructor(e,r,o,n,s,a){this.account=e,this.stakeTableKey=r,this.stateVerKey=o,this.stake=n,this.commission=s,this.delegators=a}}class vf{convert(e){return d(e,"account","stake_table_key","state_ver_key","stake","commission","delegators"),new Uc(Ce.decode(e.account),w.decode(e.stake_table_key),w.decode(e.state_ver_key),_.decode(e.stake),St.decode(e.commission),_c.decode(e.delegators))}}class Ef{convert(e){return h(e,Uc),{account:Ce.encode(e.account),stake_table_key:w.encode(e.stakeTableKey),state_ver_key:w.encode(e.stateVerKey),stake:_.encode(e.stake),commission:St.encode(e.commission),delegators:_c.encode(e.delegators)}}}class xf extends i{encoder=new Ef;decoder=new vf}const It=new xf;new M(new P(It),new O(It)),new A(new I(It),new B(It));class Lc{constructor(e,r,o,n,s,a){this.address=e,this.stakeTableKey=r,this.stakeKey=o,this.stake=n,this.comission=s,this.delegators=a,Object.freeze(this)}toJSON(){return Oo.encode(this)}}const Nc=new Le(new Pr(u,_),new Or(u,_));class kf{convert(e){return d(e,"account","stake_table_key","state_ver_key","stake","commission","delegators"),new Lc(S.decode(e.account),w.decode(e.stake_table_key),w.decode(e.state_ver_key),_.decode(e.stake),St.decode(e.commission),Nc.decode(e.delegators))}}class Sf{convert(e){return{account:S.encode(e.address),stake_table_key:w.encode(e.stakeTableKey),state_ver_key:w.encode(e.stakeKey),stake:_.encode(e.stake),commission:St.encode(e.comission),delegators:Nc.encode(e.delegators)}}}class Rf extends i{encoder=new Sf;decoder=new kf}const Oo=new Rf;class Pc{constructor(e){this.validators=e,Object.freeze(this)}toJSON(){return Mo.encode(this)}}const Oc=new Le(new Pr(u,Oo),new Or(u,Oo));class If{convert(e){return new Pc(Oc.decode(e))}}class Bf{convert(e){return Oc.encode(e.validators)}}class Af extends i{encoder=new Bf;decoder=new If}const Mo=new Af;class Mc{constructor(e,r){this.stakeKey=e,this.stakeAmount=r,Object.freeze(this)}toJSON(){return Fo.encode(this)}}class Tf{convert(e){return d(e,"stake_key","stake_amount"),new Mc(w.decode(e.stake_key),_.decode(e.stake_amount))}}class Df{convert(e){return{stake_key:w.encode(e.stakeKey),stake_amount:_.encode(e.stakeAmount)}}}class _f extends i{encoder=new Df;decoder=new Tf}const Fo=new _f;class Fc{constructor(e,r){this.stakeTableEntry=e,this.stateVerKey=r,Object.freeze(this)}}class Uf{convert(e){return d(e,"stake_table_entry","state_ver_key"),new Fc(Fo.decode(e.stake_table_entry),w.decode(e.state_ver_key))}}class Lf{convert(e){return{stake_table_entry:Fo.encode(e.stakeTableEntry),state_ver_key:w.encode(e.stateVerKey)}}}class Nf extends i{encoder=new Lf;decoder=new Uf}const zc=new Nf,Hc=new A(new I(zc),new B(zc));class Gc{constructor(e){this.entries=e,Object.freeze(this)}}class Pf{convert(e){return new Gc(Hc.decode(e))}}class Of{convert(e){return Hc.encode(e.entries)}}class Mf extends i{encoder=new Of;decoder=new Pf}const Vc=new Mf;class Ff{async getStakeTableForEpoch(){return new Gc(Array.from(et(tt,e=>new Fc(new Mc(e.pubkey,e.stake),e.stateVerKey))))}async getValidatorsAtEpoch(){return new Pc(new Map(et(tt,e=>[S.encode(e.address),new Lc(e.address,e.pubkey,e.stateVerKey,e.stake,new Po(e.commission),new Map([[S.encode(e.address),e.stake]]))])))}}class Bt{constructor(e,r){this.lifetimeRewards=e,this.authData=r,Object.freeze(this)}toJSON(){return At.encode(this)}}class zf{convert(e){return d(e,"lifetime_rewards","auth_data"),new Bt(_.decode(e.lifetime_rewards),S.decode(e.auth_data))}}class Hf{convert(e){return h(e,Bt),{lifetime_rewards:_.encode(e.lifetimeRewards),auth_data:S.encode(e.authData)}}}class Gf extends i{encoder=new Hf;decoder=new zf}const At=new Gf,Wc=new M(new P(At),new O(At)),Vf=new re(Be());class Wf{async getLatestRewardBalance(){return 123000000000000000000n}async getLatestRewardClaimInput(){return new Bt(123000000000000000000n,Vf.fillBytes(5344))}async getRewardBalance(){return 123000000000000000000n}async getRewardClaimInput(e){const r=new re(e.height);return new Bt(123000000000000000000n,r.fillBytes(5344))}}class Jf{async blockHeight(){const e=Date.now(),r=new re(Be());return(await tc(z(r,e))).height}}class jf{availability=new Zp;status=new Jf;explorer=new nf;rewardState=new Wf;node=new Ff;async setURL(){throw new N}}function F(t,e){return async r=>(await qf(r,e),zo(r),t.convert(await r.json()))}async function qf(t,e){if(!t.ok){if(t.status>=500&&t.status<600){try{if(zo(t),e!==void 0){const r=await t.json();throw e.convert(r)}}catch(r){if(r instanceof v)throw r;console.error("encountered an error attempting to decode a server error from the server",r)}throw new Xn(t.status,t)}if(t.status>=400&&t.status<500){try{if(zo(t),e!==void 0){const r=await t.json();throw e.convert(r)}}catch(r){if(r instanceof v)throw r;console.error("encountered an error attempting to decode a client error from the server",r)}throw new qn(t.status,t)}throw new Qn(t.status,t)}}function zo(t){const e=t.headers.get("content-type");if(!e||!e.startsWith("application/json"))throw ke.fromResponse(t,e||"undefined")}class Jc{availability;constructor(e){this.availability=e}toJSON(){return jc.encode(this)}}class $f{convert(e){return d(e,"Availability"),new Jc(Z.decode(e.Availability))}}class Qf{convert(e){return h(e,Jc),{Availability:Z.encode(e.availability)}}}class Kf extends i{encoder=new Qf;decoder=new $f}const jc=new Kf;class Xf{convert(e){return jc.decode(e).availability}}const Ho=new Xf;async function Yf(t,e){return new ct(t.header,t.hash,t.size,t.payload.transaction_nmt.length,[e.leaf.proposer_id])}async function*Zf(t,e){const r=e[Symbol.asyncIterator]();yield*K(Lu(t.leaf.block_payload.transaction_nmt),async o=>{const n=t.leaf.block_payload.transaction_nmt.indexOf(o),s=await r.next();if(s.done)throw new Error("Not enough transactions");return new at(s.value.hash,t.leaf.block_header,n,o)})}class eg{fetcher;baseURL;constructor(e,r){this.fetcher=e,this.baseURL=r}getLeafFromHeight(e){const r=new URL(`leaf/${e}`,this.baseURL);return this.fetcher(r).then(F(Vr.decoder,Ho))}getTransactionFromHeightAndOffset(e,r){const o=new URL(`transaction/${e}/${r}`,this.baseURL);return this.fetcher(o).then(F(eo.decoder,Ho))}async getBlockSummaries(e,r){const o=yr(r-e),n=le(o,a=>Promise.all([this.getBlockFromHeight(e+a),this.getLeafFromHeight(e+a)])),s=le(n,([a,l])=>Yf(a,l));return await X(s)}getBlockFromHeight(e){const r=new URL(`block/${e}`,this.baseURL);return this.fetcher(r).then(F(_r.decoder,Ho))}async*streamBlocksFromHeightRange(e,r){const o=yr(e),n=le(o,a=>this.getLeafFromHeight(e-a)),s=rc(n,a=>ot(Zf(a,le(yr(a.leaf.block_payload.transaction_nmt.length),l=>this.getTransactionFromHeightAndOffset(a.leaf.block_header.height,l)))));if(r===void 0){yield*s;return}yield*oe(s,r)}async getTransactionSummaryRange(e,r,o){const n=this.streamBlocksFromHeightRange(e,50),s=ne(n,r),a=oe(s,o);return await X(a)}async getTransactionSummaryRangeForRollup(e,r,o,n){const s=this.streamBlocksFromHeightRange(r,50),a=pr(s,p=>p.transaction.vm===e),l=ne(a,o),m=oe(l,n);return await X(m)}}class qc{explorer;constructor(e){this.explorer=e}toJSON(){return Qc.encode(this)}}class tg{convert(e){return d(e,"Explorer"),new qc(Go.decode(e.Explorer))}}class rg{convert(e){return h(e,qc),{Explorer:Go.encode(e.explorer)}}}class og extends i{encoder=new rg;decoder=new tg}class $c{error;constructor(e){this.error=e}toJSON(){return Go.encode(this)}}class ng{convert(e){return d(e,"error"),new $c(Z.decode(e.error))}}class sg{convert(e){return h(e,$c),{Explorer:Z.encode(e.error)}}}class cg extends i{encoder=new sg;decoder=new ng}const Go=new cg,Qc=new og;class ag{convert(e){return Qc.decode(e).explorer.error}}const be=new ag;class ig{fetcher;baseURL;constructor(e,r){this.fetcher=e,this.baseURL=r}async getBlockDetail(e){const r=new URL(`block/${e.target}`,this.baseURL);return this.fetcher(r).then(F(wo.decoder,be))}async getBlockSummaries(e){const r=new URL(`blocks/${e.from}/${e.limit}`,this.baseURL);return this.fetcher(r).then(F(mo.decoder,be))}async getTransactionDetail(e){let r=null;if(e instanceof ze?r=new URL(`transaction/hash/${e.hash}`,this.baseURL):e instanceof Fe&&(r=new URL(`transaction/${e.height}/${e.offset}`,this.baseURL)),!r)throw new N;return this.fetcher(r).then(F(Ao.decoder,be))}async getTransactionSummaries(e){const{target:r,filter:o}=e;let n=r.convertURL(this.baseURL);return n=o.convertURL(n),this.fetcher(n).then(F(_o.decoder,be))}async getExplorerOverview(){const e=new URL("explorer-summary",this.baseURL);return this.fetcher(e).then(F(go.decoder,be))}async getSearchResult(e){const r=new URL(`search/${encodeURIComponent(e.query)}`,this.baseURL);return this.fetcher(r).then(F(vo.decoder,be))}}class dg{fetcher;baseURL;stakeTableURL;validatorsURL;blockHeightResponseValidator=F(Vc.decoder);validatorsResponseValidator=F(Mo.decoder);constructor(e,r){this.fetcher=e,this.baseURL=r,this.stakeTableURL=new URL("stake-table/",this.baseURL),this.validatorsURL=new URL("validators/",this.baseURL)}getStakeTableForEpoch(e){const r=new URL(String(e),this.stakeTableURL);return this.fetcher(r).then(this.blockHeightResponseValidator)}getValidatorsAtEpoch(e){const r=new URL(String(e),this.validatorsURL);return this.fetcher(r).then(this.validatorsResponseValidator)}}class lg{fetcher;baseURL;rewardBalanceResponseValidator=F(Ue.decoder);rewardClaimInputResponseValidator=F(At.decoder);constructor(e,r){this.fetcher=e,this.baseURL=r}async getLatestRewardBalance(e){return this.fetcher(new URL(`reward-balance/latest/${e}`,this.baseURL)).then(this.rewardBalanceResponseValidator)}async getLatestRewardClaimInput(e){return this.fetcher(new URL(`reward-claim-input/latest/${e}`,this.baseURL)).then(this.rewardClaimInputResponseValidator)}async getRewardBalance(e){return this.fetcher(new URL(`reward-balance/${e.height}/${e.address}`,this.baseURL)).then(this.rewardBalanceResponseValidator)}async getRewardClaimInput(e){return this.fetcher(new URL(`reward-claim-input/${e.height}/${e.address}`,this.baseURL)).then(this.rewardClaimInputResponseValidator)}}class hg{fetcher;baseURL;blockHeightURL;blockHeightResponseValidator=F(c.decoder);constructor(e,r){this.fetcher=e,this.baseURL=r,this.blockHeightURL=new URL("block-height",this.baseURL)}blockHeight(){return this.fetcher(this.blockHeightURL).then(this.blockHeightResponseValidator)}}class Kc{availability;status;explorer;rewardState;node;constructor(e,r){this.availability=new eg(e,new URL("availability/",r)),this.status=new hg(e,new URL("status/",r)),this.explorer=new ig(e,new URL("explorer/",r)),this.rewardState=new lg(e,new URL("reward-state-v2/",r)),this.node=new dg(e,new URL("node/",r))}async setURL(){throw new N}}class ug{service;constructor(e){this.service=e}async getLeafFromHeight(e){return Vr.encode(await this.service.getLeafFromHeight(e))}async getTransactionFromHeightAndOffset(e,r){return eo.encode(await this.service.getTransactionFromHeightAndOffset(e,r))}async getBlockFromHeight(e){return _r.encode(await this.service.getBlockFromHeight(e))}async getBlockSummaries(e,r){return Sw.encode(await this.service.getBlockSummaries(e,r))}async getTransactionSummaryRange(e,r,o){return dc.encode(await this.service.getTransactionSummaryRange(e,r,o))}async getTransactionSummaryRangeForRollup(e,r,o,n){return dc.encode(await this.service.getTransactionSummaryRangeForRollup(e,r,o,n))}async handleRequest(e){switch(e.method){case"getLeafFromHeight":return await this.getLeafFromHeight(c.decode(e.param[0]));case"getTransactionFromHeightAndOffset":return await this.getTransactionFromHeightAndOffset(c.decode(e.param[0]),c.decode(e.param[1]));case"getBlockFromHeight":return await this.getBlockFromHeight(c.decode(e.param[0]));case"getBlockSummaries":return await this.getBlockSummaries(c.decode(e.param[0]),c.decode(e.param[1]));case"getTransactionSummaryRange":return await this.getTransactionSummaryRange(c.decode(e.param[0]),c.decode(e.param[1]),c.decode(e.param[2]));case"getTransactionSummaryRangeForRollup":return await this.getTransactionSummaryRangeForRollup(c.decode(e.param[0]),c.decode(e.param[1]),c.decode(e.param[2]),c.decode(e.param[3]));default:throw new N}}}class Vo{target;constructor(e){this.target=e}static latest(){return new Yc}static height(e){return new Zc(e)}toJSON(){return Xc.encode(this)}}class wg{convert(e){return h(e,Vo),typeof e.target=="number"?c.encode(e.target):u.encode(e.target)}}class pg{convert(e){return e===fe?new Yc:new Zc(c.decode(e))}}class mg extends R{encoder=new wg;decoder=new pg}const Xc=new mg;class Yc extends Vo{constructor(){super(fe)}}class Zc extends Vo{constructor(e){super(e)}}class Wo{limit;constructor(e){this.limit=e}static latest(e){return new ta(e)}static from(e,r){return new ra(e,r)}toJSON(){return ea.encode(this)}}class fg{convert(e){return h(e,Wo),Dt(e.from)?{from:c.encode(e.from),limit:c.encode(e.limit)}:{from:u.encode(e.from),limit:c.encode(e.limit)}}}class gg{convert(e){return d(e,"from","limit"),e.from===fe?new ta(c.decode(e.limit)):new ra(c.decode(e.from),c.decode(e.limit))}}class yg extends R{encoder=new fg;decoder=new gg}const ea=new yg;class ta extends Wo{constructor(e){super(e)}get from(){return fe}}class ra extends Wo{from;constructor(e,r){super(r),this.from=e}}class oa{query;constructor(e){this.query=e}toJSON(){return na.encode(this)}}class Cg{convert(e){return h(e,oa),u.encode(e.query)}}class bg{convert(e){return new oa(u.decode(e))}}class vg extends R{encoder=new Cg;decoder=new bg}const na=new vg;class sa{target;filter;constructor(e,r){this.target=e,this.filter=r}toJSON(){return ca.encode(this)}}class Eg{convert(e){return d(e,"filter","target"),new sa(Uo.decode(e.target),To.decode(e.filter))}}class xg{convert(e){return h(e,sa),{filter:To.encode(e.filter),target:Uo.encode(e.target)}}}class kg extends R{encoder=new xg;decoder=new Eg}const ca=new kg;class Sg{service;constructor(e){this.service=e}async getBlockDetail(e){return wo.encode(await this.service.getBlockDetail(e))}async getBlockSummaries(e){return mo.encode(await this.service.getBlockSummaries(e))}async getTransactionDetail(e){return Ao.encode(await this.service.getTransactionDetail(e))}async getTransactionSummaries(e){return _o.encode(await this.service.getTransactionSummaries(e))}async getExplorerOverview(){return go.encode(await this.service.getExplorerOverview())}async getSearchResult(e){return vo.encode(await this.service.getSearchResult(e))}async handleRequest(e){switch(e.method){case"getBlockDetail":return await this.getBlockDetail(Xc.decode(e.param[0]));case"getBlockSummaries":return await this.getBlockSummaries(ea.decode(e.param[0]));case"getTransactionDetail":return this.getTransactionDetail(kc.decode(e.param[0]));case"getTransactionSummaries":return this.getTransactionSummaries(ca.decode(e.param[0]));case"getExplorerOverview":return this.getExplorerOverview();case"getSearchResult":return this.getSearchResult(na.decode(e.param[0]))}}}class Rg{service;constructor(e){this.service=e}async getStakeTableForEpoch(e){return Vc.encode(await this.service.getStakeTableForEpoch(e))}async getValidatorsAtEpoch(e){return Mo.encode(await this.service.getValidatorsAtEpoch(e))}async handleRequest(e){switch(e.method){case"getStakeTableForEpoch":return this.getStakeTableForEpoch(c.decode(e.param[0]));case"getValidatorsAtEpoch":return this.getValidatorsAtEpoch(c.decode(e.param[0]));default:throw new N}}}class aa{constructor(e,r){this.height=e,this.address=r,Object.freeze(this)}toJSON(){return Ge.encode(this)}}class Ig{convert(e){return d(e,"height","address"),new aa(c.decode(e.height),u.decode(e.address))}}class Bg{convert(e){return h(e,aa),{height:c.encode(e.height),address:u.encode(e.address)}}}class Ag extends i{encoder=new Bg;decoder=new Ig}const Ge=new Ag;new M(new P(Ge),new O(Ge));class Tg{service;constructor(e){this.service=e}async getLatestRewardBalance(e){return Ue.encode(await this.service.getLatestRewardBalance(e))}async getLatestRewardClaimInput(e){return Wc.encode(await this.service.getLatestRewardClaimInput(e))}async getRewardBalance(e){return Ue.encode(await this.service.getRewardBalance(e))}async getRewardClaimInput(e){return Wc.encode(await this.service.getRewardClaimInput(e))}async handleRequest(e){switch(e.method){case"getLatestRewardBalance":return await this.getLatestRewardBalance(u.decode(e.param[0]));case"getLatestRewardClaimInput":return await this.getLatestRewardClaimInput(u.decode(e.param[0]));case"getRewardBalance":return await this.getRewardBalance(Ge.decode(e.param[0]));case"getRewardClaimInput":return await this.getRewardClaimInput(Ge.decode(e.param[0]));default:throw new N}}}class Dg{service;constructor(e){this.service=e}blockHeight(){return this.service.blockHeight()}async handleRequest(e){switch(e.method){case"blockHeight":return this.blockHeight();default:throw new N}}}class ia{availability;status;explorer;rewardState;node;constructor(e){this.availability=new ug(e.availability),this.status=new Dg(e.status),this.explorer=new Sg(e.explorer),this.rewardState=new Tg(e.rewardState),this.node=new Rg(e.node)}async handleRequest(e){switch(e.api){case"availability":return this.availability.handleRequest(e);case"status":return this.status.handleRequest(e);case"explorer":return this.explorer.handleRequest(e);case"reward-state":return this.rewardState.handleRequest(e);case"node":return this.node.handleRequest(e);default:throw new N}}}const da=async(t,e)=>{try{return await fetch(t,e)}catch(r){throw new Yn(r)}};async function _g(){try{const e=await(await fetch("/config.json")).json();if(e.hotshot_query_service_url){const r=new URL(e.hotshot_query_service_url);return new Kc(da,r)}}catch{}return new jf}async function Ug(){return new ia(await _g())}class Lg{service;postMessage;requestChannel;constructor(e){this.postMessage=e,this.service=Ug(),this.requestChannel=Sl(10),this.processRequests()}async handleProxyRequest(e){if(e.method==="set-url"){const r=e.param[0];if(!r||typeof r!="string")throw new N("Invalid URL provided");return this.service=Promise.resolve(new ia(new Kc(da,new URL(r)))),!0}else throw new N(`Unknown proxy method: ${e.method}`)}async processRequests(){for await(const e of this.requestChannel)try{const r=await this.service;let o;e.api==="proxy"?o=await this.handleProxyRequest(e):o=await r.handleRequest(e),this.postMessage(As.encode(new ir(e.requestID,o)))}catch(r){this.postMessage(Ts.encode(new dr(e.requestID,r)))}}async handleEvent(e){const r=Al.decode(e.data);await this.requestChannel.publish(r)}}self.addEventListener("message",new Lg(self.postMessage.bind(self)))})();
