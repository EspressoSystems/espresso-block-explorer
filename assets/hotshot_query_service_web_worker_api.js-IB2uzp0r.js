var Kp=Object.defineProperty;var Yp=(se,j,pe)=>j in se?Kp(se,j,{enumerable:!0,configurable:!0,writable:!0,value:pe}):se[j]=pe;var o=(se,j,pe)=>Yp(se,typeof j!="symbol"?j+"":j,pe);(function(){"use strict";class se{assert(){}}function j(){return new se}const pe=j();function R(r,e){pe.assert(r,e)}function Oe(r,e){R(typeof r===e,`type assertion failed: expected "${e}", received "${typeof r}"`)}function Is(r){R(r!==null,"expected a non-null value, received null")}function h(r,e){R(r instanceof e,`given value is not an instance of "${e.name}", specific type is "${typeof r=="object"&&r!==null?r.constructor.name:typeof r}"`)}class gr extends Error{constructor(t,n,s=`expected object with key: "${n}", instead found ${t}`){super(s);o(this,"key");o(this,"haveType");this.haveType=t,this.key=n,Object.freeze(this)}toJSON(){return{code:gr.name,message:this.message,have:this.haveType,key:this.key}}}class S{encode(e){return this.encoder.convert(e)}decode(e){return this.decoder.convert(e)}}class d extends S{}function As(r){return typeof r=="boolean"}function Cr(r){return typeof r=="number"}function ce(r){return typeof r=="string"}function Ds(r){return typeof r=="bigint"}function Ts(r){return typeof r=="object"&&r!==null}function L(r){return r!==void 0}function Us(r,e){return Array.isArray(r)&&r.every(e)}function Ps(r){return e=>Us(e,r)}function F(r,e,t){return Ts(r)&&e in r&&t(r[e])}function l(r,...e){if(typeof r!="object")throw new Error("expected object");if(r===null)throw new Error("received null");for(const t of e)if(!(t in r))throw new gr("object",t)}function v(r,e){if(!ce(r.code))throw new Error("code must be a string");if(r.code!==e)throw new Error(`expected code to be ${e}, got ${r.code}`)}class b extends Error{constructor(e){super(e)}get code(){return this.constructor.name}toJSON(){return G.convert(this)}}class O{convert(e){return h(e,b),{code:e.code,message:e.message}}}const G=new O,Ns="NoCodecFoundError";class Me extends Error{constructor(t,n=`no codec found for: "${t}"`){super(n);o(this,"codec");this.codec=t,Object.freeze(this);debugger}toJSON(){return{code:p.encode(Me.name),message:p.encode(this.message),codec:p.encode(this.codec)}}get code(){return Ns}}const yr=new Map;class _s{convert(e){l(e,"code");const t=p.decode(e.code),n=yr.get(t);if(!n)throw new Me(t);return n.decode(e)}}class Ls{convert(e){const t=yr.get(e.code);if(!t)throw new Me(e.code);return t.encode(e)}}class Os extends S{constructor(){super(...arguments);o(this,"encoder",new Ls);o(this,"decoder",new _s)}}const Y=new Os;function x(r,e){yr.set(r,e)}const vr="InvalidTypeError";class T extends b{constructor(t,n,s=`invalid type: have "${t}", want "${n}"`){super(s);o(this,"have");o(this,"want");this.have=t,this.want=n,Object.freeze(this)}toJSON(){return ko.encode(this)}get code(){return vr}}class Ms{convert(e){return l(e,"code","have","want","message"),v(e,vr),new T(p.decode(e.have),p.decode(e.want),p.decode(e.message))}}class Fs{convert(e){return h(e,T),{...G.convert(e),have:p.encode(e.have),want:p.encode(e.want)}}}class Hs extends d{constructor(){super(...arguments);o(this,"encoder",new Fs);o(this,"decoder",new Ms)}}const ko=new Hs;x(vr,ko);const Ro=Ps(L);class zs{convert(e){return e}}const Bo=new zs;class Gs extends S{constructor(){super(...arguments);o(this,"encoder",Bo);o(this,"decoder",Bo)}}const Fe=new Gs;class I{constructor(e){o(this,"itemCodec");this.itemCodec=e}convert(e){if(!Ro(e)){const t=typeof e=="object"&&e!==null?e.constructor.name:typeof e,n="array";throw new Error(`invalid array value: have "${t}", want "${n}"`)}return e.map(t=>this.itemCodec.decode(t))}}class A{constructor(e){o(this,"itemCodec");this.itemCodec=e}convert(e){return h(e,Array),e.map(t=>this.itemCodec.encode(t))}}class D extends d{constructor(t,n){super();o(this,"encoder");o(this,"decoder");this.encoder=n,this.decoder=t}}class ae{constructor(e){o(this,"itemCodec");this.itemCodec=e}convert(e){return e===null?null:this.itemCodec.decode(e)}}class ie{constructor(e){o(this,"itemCodec");this.itemCodec=e}convert(e){return e===null?null:(Is(e),this.itemCodec.encode(e))}}class de extends d{constructor(t,n){super();o(this,"encoder");o(this,"decoder");this.encoder=n,this.decoder=t}}class Ws{convert(e){if(!ce(e))throw new T(typeof e,"string");return e}}class Js{convert(e){return Oe(e,"string"),e}}class qs extends d{constructor(){super(...arguments);o(this,"encoder",new Js);o(this,"decoder",new Ws)}}const p=new qs;new D(new I(p),new A(p)),new de(new ae(p),new ie(p));class br extends b{constructor(e="completer has already been completed"){super(e),Object.freeze(this)}get code(){return Io}}const Io="CompleterAlreadyCompletedError";class js{convert(e){return l(e,"code","message"),v(e,Io),new br(p.decode(e.message))}}class Vs extends O{}class $s extends d{constructor(){super(...arguments);o(this,"encoder",new Vs);o(this,"decoder",new js)}}const Qs=new $s;x(br.name,Qs);function He(){return R(!1,"completer is not ready, this should never be reached")}function ze(){throw new br}class Xs{constructor(){o(this,"resolve",He);o(this,"reject",He);o(this,"completed",!1);o(this,"promise");this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t}),R(this.resolve!==He,"resolve should be set"),R(this.reject!==He,"resolve should be set")}get isCompleted(){return this.completed}complete(e){const t=this.resolve,n=this.reject;if(this.completed=!0,this.resolve=ze,this.reject=ze,e instanceof Promise){e.then(t,n);return}t(e)}completeError(e){this.reject(e),this.completed=!0,this.resolve=ze,this.reject=ze}}function xr(){return new Xs}class ve extends b{constructor(t,n,s){super(s);o(this,"response");o(this,"status");this.status=t,this.response=n}toJSON(){return Ao.convert(this)}}class Ge{convert(e){return h(e,ve),{...G.convert(e),status:e.status}}}const Ao=new Ge,Er="BadResponseClientError";class Do extends ve{constructor(e,t,n="bad server response: client error"){super(e,t,n),Object.freeze(this)}get code(){return Er}toJSON(){return To.encode(this)}}class Ks{convert(e){return l(e,"code","message","status"),v(e,Er),new Do(Number(e.status),null,p.decode(e.message))}}class Ys extends Ge{}class Zs extends d{constructor(){super(...arguments);o(this,"encoder",new Ys);o(this,"decoder",new Ks)}}const To=new Zs;x(Er,To);const Sr="BadResponseError";class Uo extends ve{constructor(e,t,n="bad server response"){super(e,t,n),Object.freeze(this)}get code(){return Sr}toJSON(){return Po.encode(this)}}class ec{convert(e){return l(e,"code","message","status"),v(e,Sr),new Uo(Number(e.status),null,p.decode(e.message))}}class rc extends Ge{}class tc extends d{constructor(){super(...arguments);o(this,"encoder",new rc);o(this,"decoder",new ec)}}const Po=new tc;x(Sr,Po);class No extends ve{constructor(e,t,n="bad server response: server error"){super(e,t,n),Object.freeze(this)}get code(){return kr}}const kr="BadResponseServerError";class oc{convert(e){return l(e,"code","message","status"),v(e,kr),new No(Number(e.status),null,p.decode(e.message))}}class nc extends Ge{}class sc extends d{constructor(){super(...arguments);o(this,"encoder",new nc);o(this,"decoder",new oc)}}const cc=new sc;x(kr,cc);const Rr="ChannelClosedError";class be extends b{constructor(e="channel closed"){super(e),Object.freeze(this)}get code(){return Rr}}class ac{convert(e){return l(e,"code","message"),v(e,Rr),new be(p.decode(e.message))}}class ic extends O{}class dc extends d{constructor(){super(...arguments);o(this,"encoder",new ic);o(this,"decoder",new ac)}}const lc=new dc;x(Rr,lc);const Br="FetchError";class _o extends b{constructor(t,n=`fetch failed: ${String(t)}`){super(n);o(this,"cause");this.cause=t,Object.freeze(this)}get code(){return Br}}class uc{convert(e){return l(e,"code","message"),v(e,Br),new _o({},p.decode(e.message))}}class hc extends O{}class pc extends d{constructor(){super(...arguments);o(this,"encoder",new hc);o(this,"decoder",new uc)}}const wc=new pc;x(Br,wc);const Ir="IncorrectBase64PaddingError";class Lo extends b{constructor(e="incorrect padding"){super(e),Object.freeze(this)}get code(){return Ir}}class mc{convert(e){return l(e,"code","message"),v(e,Ir),new Lo(p.decode(e.message))}}class fc extends O{}class gc extends d{constructor(){super(...arguments);o(this,"encoder",new fc);o(this,"decoder",new mc)}}const Cc=new gc;x(Ir,Cc);class yc{convert(e){if(!Cr(e))throw new T(typeof e,"number");return e}}class vc{convert(e){return Oe(e,"number"),e}}class bc extends d{constructor(){super(...arguments);o(this,"encoder",new vc);o(this,"decoder",new yc)}}const c=new bc,Oo=new de(new ae(c),new ie(c)),V=new D(new I(c),new A(c)),Z=new D(new I(Oo),new A(Oo)),Ar="InvalidBase64AlphabetLengthError";class Dr extends b{constructor(t,n=`alphabet needs to be 64 characters, received ${t}`){super(n);o(this,"length");this.length=t,Object.freeze(this)}toJSON(){return Mo.encode(this)}get code(){return Ar}}class xc{convert(e){return l(e,"code","length","message"),v(e,Ar),new Dr(c.decode(e.length),p.decode(e.message))}}class Ec{convert(e){return h(e,Dr),{...G.convert(e),length:c.encode(e.length)}}}class Sc extends d{constructor(){super(...arguments);o(this,"encoder",new Ec);o(this,"decoder",new xc)}}const Mo=new Sc;x(Ar,Mo);const Tr="InvalidHexStringError";class Fo extends b{constructor(e="invalid hex string"){super(e),Object.freeze(this)}get code(){return Tr}}class kc{convert(e){return l(e,"code","message"),v(e,Tr),new Fo(p.decode(e.message))}}class Rc extends O{}class Bc extends d{constructor(){super(...arguments);o(this,"encoder",new Rc);o(this,"decoder",new kc)}}const Ic=new Bc;x(Tr,Ic);const Ur="InvalidHexValueError";class Ho extends b{constructor(t,n=`invalid hex value "${t}"`){super(n);o(this,"value");this.value=t,Object.freeze(this)}toJSON(){return zo.encode(this)}get code(){return Ur}}class Ac{convert(e){return l(e,"code","value","message"),v(e,Ur),new Ho(c.decode(e.value),p.decode(e.message))}}class Dc{convert(e){return{...G.convert(e),value:c.encode(e.value)}}}class Tc extends d{constructor(){super(...arguments);o(this,"encoder",new Dc);o(this,"decoder",new Ac)}}const zo=new Tc;x(Ur,zo);const Pr="InvalidInputError";class M extends b{constructor(e="invalid input"){super(e),Object.freeze(this)}get code(){return Pr}}class Uc{convert(e){return l(e,"code","message"),v(e,Pr),new M(p.decode(e.message))}}class Pc extends O{}class Nc extends d{constructor(){super(...arguments);o(this,"encoder",new Pc);o(this,"decoder",new Uc)}}const _c=new Nc;x(Pr,_c);const Nr="InvalidStringValueError";class Go extends b{constructor(t,n,s=`invalid string value: have "${t}", want "${n}"`){super(s);o(this,"have");o(this,"want");this.have=t,this.want=n,Object.freeze(this)}toJSON(){return Wo.encode(this)}get code(){return Nr}}class Lc{convert(e){return l(e,"code","have","want","message"),v(e,Nr),new Go(p.decode(e.have),p.decode(e.want),p.decode(e.message))}}class Oc{convert(e){return h(e,Go),{...G.convert(e),have:p.encode(e.have),want:p.encode(e.want)}}}class Mc extends d{constructor(){super(...arguments);o(this,"encoder",new Oc);o(this,"decoder",new Lc)}}const Wo=new Mc;x(Nr,Wo);const _r="InvalidTaggedBase64EncodingError";class Jo extends b{constructor(e="invalid tagged base64 encoding"){super(e),Object.freeze(this)}toJSON(){return qo.encode(this)}get code(){return _r}}class Fc{convert(e){return l(e,"code","message"),v(e,_r),new Jo(p.decode(e.message))}}class Hc extends O{}class zc extends d{constructor(){super(...arguments);o(this,"encoder",new Hc);o(this,"decoder",new Fc)}}const qo=new zc;x(_r,qo);const Lr="MissingElementError";class xe extends b{constructor(e="missing element"){super(e),Object.freeze(this)}get code(){return Lr}}class Gc{convert(e){return l(e,"code","message"),v(e,Lr),new xe(p.decode(e.message))}}class Wc extends O{}class Jc extends d{constructor(){super(...arguments);o(this,"encoder",new Wc);o(this,"decoder",new Gc)}}const qc=new Jc;x(Lr,qc);const Or="NoCompleterFoundForRequestID";class jo extends b{constructor(t,n=`no completer found for request id "${t}"`){super(n);o(this,"requestID");this.requestID=t,Object.freeze(this)}toJSON(){return Vo.encode(this)}get code(){return Or}}class jc{convert(e){return l(e,"code","requestID","message"),v(e,Or),new jo(Fe.decode(e.requestID),p.decode(e.message))}}class Vc{convert(e){return h(e,jo),{...G.convert(e),requestID:Fe.encode(e.requestID)}}}class $c extends d{constructor(){super(...arguments);o(this,"encoder",new Vc);o(this,"decoder",new jc)}}const Vo=new $c;x(Or,Vo);const Mr="NotFoundError";class $o extends b{constructor(t,n=`Not Found: ${t}`){super(n);o(this,"key");this.key=t,Object.freeze(this)}get code(){return Mr}}class Qo{constructor(e){o(this,"codec");this.codec=e}convert(e){return l(e,"code","key"),v(e,Mr),new $o(this.codec.decode(e.key))}}class Xo{constructor(e){o(this,"codec");this.codec=e}convert(e){return{...G.convert(e),key:this.codec.encode(e.key)}}}class Ko extends d{constructor(t,n){super();o(this,"encoder");o(this,"decoder");this.encoder=t,this.decoder=n}}new Ko(new Xo(p),new Qo(p));const Qc=new Ko(new Xo(Fe),new Qo(Fe));x(Mr,Qc);const Fr="NoURLProvidedError";class Xc extends b{constructor(e="no url provided"){super(e),Object.freeze(this)}get code(){return Fr}}class Kc{convert(e){return l(e,"code","message"),v(e,Fr),new Xc(p.decode(e.message))}}class Yc extends O{}class Zc extends d{constructor(){super(...arguments);o(this,"encoder",new Yc);o(this,"decoder",new Kc)}}const ea=new Zc;x(Fr,ea);const Hr="UnimplementedError";class N extends b{constructor(e="unimplemented"){super(e),Object.freeze(this);debugger}get code(){return Hr}}class ra{convert(e){return l(e,"code","message"),v(e,Hr),new N(p.decode(e.message))}}class ta extends O{}class oa extends d{constructor(){super(...arguments);o(this,"encoder",new ta);o(this,"decoder",new ra)}}const na=new oa;x(Hr,na);const zr="QUERY_ERROR";class sa extends b{constructor(t,n="missing element"){super(n);o(this,"error");this.error=t,Object.freeze(this)}get code(){return zr}}class ca{convert(e){return l(e,"code","error","message"),v(e,zr),new sa(rn.decode(e.error),p.decode(e.message))}}class aa{convert(e){return{code:e.code,error:rn.encode(e.error),message:p.encode(e.message)}}}class ia extends d{constructor(){super(...arguments);o(this,"encoder",new aa);o(this,"decoder",new ca)}}const da=new ia;class Gr{}const Wr="NotFound";class Yo extends Gr{constructor(){super(),Object.freeze(this)}valueOf(){return Wr}toJSON(){return this.valueOf()}}const la=new Yo,Jr="Missing";class Zo extends Gr{constructor(){super(),Object.freeze(this)}valueOf(){return Jr}toJSON(){return this.valueOf()}}const ua=new Zo;class en extends Gr{constructor(t){super();o(this,"error");this.error=t,Object.freeze(this)}toJSON(){return jr.encode(this)}}class ha{constructor(e){o(this,"message");this.message=e,Object.freeze(this)}toJSON(){return qr.encode(this)}}class pa{convert(e){return l(e,"message"),new ha(p.decode(e.message))}}class wa{convert(e){return{message:p.encode(e.message)}}}class ma extends d{constructor(){super(...arguments);o(this,"encoder",new wa);o(this,"decoder",new pa)}}const qr=new ma;class fa{convert(e){return l(e,"Error"),new en(qr.decode(e.Error))}}class ga{convert(e){return{Error:qr.encode(e.error)}}}class Ca extends d{constructor(){super(...arguments);o(this,"encoder",new ga);o(this,"decoder",new fa)}}const jr=new Ca;class ya{convert(e){return e===Wr?la:e===Jr?ua:jr.decode(e)}}class va{convert(e){if(e instanceof Yo)return Wr;if(e instanceof Zo)return Jr;if(e instanceof en)return jr.encode(e);throw new N}}class ba extends d{constructor(){super(...arguments);o(this,"encoder",new va);o(this,"decoder",new ya)}}const rn=new ba;x(zr,da);const tn="ResponseContentTypeIsNotApplicationJSONError";class Ee extends ve{constructor(t,n,s,a="response content type is not application/json"){super(n,s,a);o(this,"haveHeaderType");this.haveHeaderType=t,Object.freeze(this)}static fromResponse(t,n){return new Ee(t.headers.get("content-type")??"undefined",t.status,t,n)}toJSON(){return on.encode(this)}get code(){return tn}}class xa{convert(e){return l(e,"code","status","have","want","message"),v(e,tn),new Ee(p.decode(e.code),c.decode(e.status),null,p.decode(e.message))}}class Ea{convert(e){return{...Ao.convert(e),have:p.encode(e.haveHeaderType),want:p.encode("application/json")}}}class Sa extends d{constructor(){super(...arguments);o(this,"encoder",new Ea);o(this,"decoder",new xa)}}const on=new Sa;x(Ee.name,on);const Vr="WebWorkerErrorResponse";class ka extends b{constructor(t,n="error in web worker"){super(n);o(this,"error");this.error=t,Object.freeze(this)}toJSON(){return nn.encode(this)}get code(){return Vr}}class Ra{convert(e){return l(e,"code","error","message"),v(e,Vr),new ka(Y.decode(e.error),p.decode(e.message))}}class Ba{convert(e){return{...G.convert(e),error:Y.encode(e.error)}}}class Ia extends d{constructor(){super(...arguments);o(this,"encoder",new Ba);o(this,"decoder",new Ra)}}const nn=new Ia;x(Vr,nn);var sn=(r=>(r[r.success=0]="success",r[r.full=1]="full",r[r.failed=2]="failed",r))(sn||{});class Aa{getFromEmpty(){}}class Da{getFromEmpty(){throw new xe}}const cn={returnUndefined:new Aa,throwMissingElement:new Da};class Ta{constructor(e){o(this,"maxSize");R(!Number.isNaN(e),"maxSize must not be NaN"),R(Number.isInteger(e),"maxSize must be an integer"),R(e>0,"maxSize must be greater than 0"),this.maxSize=e}nextIndex(e){return R(e>=0,"index must be greater than or equal to 0"),(e+1)%this.maxSize}}class Ua{constructor(e){o(this,"preComputedSizeMinus1");R(!Number.isNaN(e),"maxSize must not be NaN"),R(Number.isInteger(e),"maxSize must be an integer"),R(e>0,"maxSize must be greater than 0"),R(an(e),"maxSize must be a power of two"),this.preComputedSizeMinus1=e-1}nextIndex(e){return R(e>=0,"index must be greater than or equal to 0"),e+1&this.preComputedSizeMinus1}}function an(r){return(r&r-1)===0}const $r="BufferFullError";class dn extends b{constructor(e="buffer full"){super(e),Object.freeze(this)}get code(){return $r}}class Pa{convert(e){return l(e,"code","message"),v(e,$r),new dn(p.decode(e.message))}}class Na extends O{}class _a extends d{constructor(){super(...arguments);o(this,"encoder",new Na);o(this,"decoder",new Pa)}}const La=new _a;x($r,La);class Oa{putToFull(e,t){return e.get(),e.put(t)}}class Ma{putToFull(){throw new dn}}const ln={overwriteOldest:new Oa,throw:new Ma};function Fa(r){return an(r)?new Ua(r):new Ta(r)}class Ha{constructor(e,t,n){o(this,"readIndex",0);o(this,"writeIndex",0);o(this,"buffer");o(this,"nextIndex");o(this,"getOnEmpty");o(this,"putOnFull");R(!Number.isNaN(e),"maxSize must not be NaN"),this.buffer=new Array(e),this.nextIndex=Fa(e),this.getOnEmpty=t,this.putOnFull=n}get maxSize(){return this.buffer.length}get length(){return this.writeIndex<this.readIndex?this.writeIndex+this.maxSize-this.readIndex:this.writeIndex-this.readIndex}put(e){const t=this.nextIndex.nextIndex(this.writeIndex);return t===this.readIndex?this.putOnFull.putToFull(this,e):(this.buffer[this.writeIndex]=e,this.writeIndex=t,sn.success)}get(){if(this.readIndex===this.writeIndex)return this.getOnEmpty.getFromEmpty(this);const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),e}[Symbol.iterator](){return new za(this)}immutableIterable(){return{[Symbol.iterator]:()=>this.immutableIterator()}}immutableIterator(){return new Ga(this.readIndex,this.writeIndex,this.buffer,this.nextIndex)}}class za{constructor(e){o(this,"buffer");this.buffer=e}next(){const e=this.buffer.get();return e==null?{value:void 0,done:!0}:{value:e,done:!1}}}class Ga{constructor(e,t,n,s){o(this,"readIndex");o(this,"writeIndex");o(this,"buffer");o(this,"nextIndex");this.readIndex=e,this.writeIndex=t,this.buffer=n,this.nextIndex=s}next(){if(this.readIndex===this.writeIndex)return{value:void 0,done:!0};const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),{value:e,done:!1}}}function W(r=32,e=cn.returnUndefined,t=ln.overwriteOldest){return new Ha(r,e,t)}class Wa{constructor(e){o(this,"publishQueue");o(this,"pollBlocked");o(this,"publishBlocked");o(this,"capacity");o(this,"closed",!1);this.publishQueue=W(Math.max(2,e),cn.throwMissingElement,ln.throw);const t=xr();this.pollBlocked=t,this.publishBlocked=t,t.complete(),this.capacity=e-1}get isClosed(){return this.closed}close(){if(this.closed)throw new be;this.closed=!0}async drain(){for(;this.publishQueue.length>0;)this.publishQueue.get()}async publish(e){if(this.closed)throw new be;if(this.publishQueue.length>=this.capacity){if(this.publishBlocked.isCompleted){const t=xr();this.publishBlocked=t,await t.promise}return await this.publishBlocked.promise,this.publish(e)}this.publishQueue.put(e),this.pollBlocked.isCompleted||this.pollBlocked.complete()}async poll(){if(this.publishQueue.length<=0){if(this.isClosed)throw new be;if(this.pollBlocked.isCompleted){const t=xr();this.pollBlocked=t}return await this.pollBlocked.promise,this.poll()}const e=this.publishQueue.get();return this.publishBlocked.isCompleted||this.publishBlocked.complete(),e}[Symbol.asyncIterator](){return new Ja(this)}}class Ja{constructor(e){o(this,"channel");this.channel=e}async next(){try{return{done:!1,value:await this.channel.poll()}}catch(e){if(e instanceof be)return{done:!0,value:void 0};throw e}}}function qa(r){return new Wa(r)}const Qr="CorruptBase64InputError";class ee extends b{constructor(t,n=`corrupt input error at ${t}`){super(n);o(this,"offset");this.offset=t,Object.freeze(this)}get code(){return Qr}toJSON(){return un.encode(this)}}class ja{convert(e){return l(e,"code","offset","message"),v(e,Qr),new ee(c.decode(e.offset),p.decode(e.message))}}class Va{convert(e){return h(e,ee),{...G.convert(e),offset:c.encode(e.offset),message:p.encode(e.message)}}}class $a extends d{constructor(){super(...arguments);o(this,"encoder",new Va);o(this,"decoder",new ja)}}const un=new $a;x(Qr,un);const Qa=new TextEncoder;function hn(r){return Qa.encode(r)}const Xa=new TextDecoder;function Ka(r){return Xa.decode(r)}function*pn(r){yield*hn(r)}function*Ya(){for(let r=0;r<256;r++)yield 255}const Se=-1,Za=61;class ke{constructor(e,t,n=Za,s=!1){o(this,"encodeMap");o(this,"decodeMap");o(this,"padChar");o(this,"strict");this.encodeMap=e,this.decodeMap=t,this.padChar=n,this.strict=s}static withAlphabet(e){const t=e.length;if(t!==64)throw new Dr(t);const n=Array.from(pn(e)),s=Array.from(Ya());for(let a=0;a<t;a++)s[n[a]]=a;return new ke(n,s)}withPadding(e){return new ke(this.encodeMap,this.decodeMap,e,this.strict)}encode(e){if(e.byteLength===0)return new ArrayBuffer(0);let t=0,n=0;const s=Math.floor(e.byteLength/3)*3,a=Math.ceil(e.byteLength/3)*4,i=new ArrayBuffer(a),u=new DataView(e),f=new DataView(i);for(;n<s;){const g=u.getUint8(n+0)<<16|u.getUint8(n+1)<<8|u.getUint8(n+2);f.setUint8(t+0,this.encodeMap[g>>18&63]),f.setUint8(t+1,this.encodeMap[g>>12&63]),f.setUint8(t+2,this.encodeMap[g>>6&63]),f.setUint8(t+3,this.encodeMap[g&63]),n+=3,t+=4}const w=e.byteLength-n;if(w===0)return i;let y=u.getUint8(n+0)<<16;switch(w===2&&(y|=u.getUint8(n+1)<<8),f.setUint8(t+0,this.encodeMap[y>>18&63]),f.setUint8(t+1,this.encodeMap[y>>12&63]),w){case 2:return f.setUint8(t+2,this.encodeMap[y>>6&63]),this.padChar!==Se?(f.setUint8(t+3,this.padChar),i.slice(0,t+4)):i.slice(0,t+3);case 1:if(this.padChar!==Se)return f.setUint8(t+2,this.padChar),f.setUint8(t+3,this.padChar),i.slice(0,t+4);break}return i.slice(0,t+2)}decode(e){const t=e.byteLength;if(t===0)return new ArrayBuffer(0);const n=new DataView(e),s=new ArrayBuffer(Math.floor(t/4*3)),a=new DataView(s),i=new ArrayBuffer(4),u=new DataView(i);let f=0,w=0,y=0,g=!1;for(;w<t&&!g;){let k=3,z=4;for(let B=0;B<4;B++){if(w===t){if(B===0)return s;if(B===1||this.padChar!==Se)throw new ee(w-B);k=B-1,z=B,g=!0;break}const q=n.getUint8(w);w++;const Bs=this.decodeMap[q];if(Bs!==255){u.setUint8(B,Bs);continue}if(q===10||q===13){B--;continue}if(q===this.padChar){switch(B){case 0:case 1:throw new Lo;case 2:for(;w<t&&(n.getUint8(w)===10||n.getUint8(w)===13);)w++;if(w===t)throw new ee(t);w++}for(;w<t&&(n.getUint8(w)===10||n.getUint8(w)===13);)w++;if(w<t)throw new ee(w);k=3,z=B,g=!0;break}throw new ee(w-1)}const P=u.getUint8(0)<<18|u.getUint8(1)<<12|u.getUint8(2)<<6|u.getUint8(3);switch(u.setUint8(2,P>>0&255),u.setUint8(1,P>>8&255),u.setUint8(0,P>>16&255),z){case 4:a.setUint8(y+2,u.getUint8(2)),u.setUint8(2,0);case 3:if(a.setUint8(y+1,u.getUint8(1)),this.strict&&u.getUint8(2)!==0)throw new ee(w-1);case 2:if(a.setUint8(y+0,u.getUint8(0)),this.strict&&(u.getUint8(1)!==0||u.getUint8(2)!==0))throw new ee(w-2)}y+=k,f+=z-1}return s.slice(0,f)}decodeString(e){return this.decode(hn(e).buffer)}encodeToString(e){return Ka(this.encode(e))}}const wn=ke.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),ei=wn.withPadding(Se),mn=ke.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Xr=mn.withPadding(Se);class ri{constructor(e,t){o(this,"value");o(this,"next");this.value=e,this.next=t}[Symbol.iterator](){return fn(this)}}function ti(r,e){return new ri(e,r)}function*fn(r){if(r!==null)for(let e=r;e!==null;e=e.next)yield e.value}function*oi(r,e){for(let t=r.next();!t.done;t=r.next())e(t.value)&&(yield t.value)}function ni(r,e){return oi(r[Symbol.iterator](),e)}function*gn(r,e){for(let t=r.next();!t.done;t=r.next())yield e(t.value)}function si(r,e){return gn(r[Symbol.iterator](),e)}function*ci(r,e){for(let t=0;t<e;t++){const n=r.next();if(n.done)return;yield n.value}}function ai(r,e){return ci(r[Symbol.iterator](),e)}function ii(r){let e;for(let t=r.next();!t.done;t=r.next())e=t.value;if(e===void 0)throw new xe;return e}function di(r){return ii(r[Symbol.iterator]())}function*li(){let r=0;for(;;)yield r++}function ui(r){return ai(li(),Math.ceil(r))}function*hi(r,e,t){for(let n=r.next(),s=e.next();!n.done&&!s.done;n=r.next(),s=e.next())yield t(n.value,s.value)}function pi(r,e,t){return hi(r[Symbol.iterator](),e[Symbol.iterator](),t)}function Kr(r){if(r.startsWith("0x"))return Kr(r.substring(2));if((r.length&1)!==0)return Kr("0"+r);const e=new ArrayBuffer(r.length/2);return wi(pn(r),e),e}function wi(r,e){const t=new DataView(e);let n=0;for(;n<e.byteLength;){const s=r.next(),a=r.next();if(s.done||a.done)throw new Fo;const i=Cn(s.value),u=Cn(a.value),f=i<<4|u;t.setUint8(n,f),n++}}function Cn(r){if(r>=48&&r<=57)return r-48;if(r>=97&&r<=102)return r-97+10;if(r>=65&&r<=70)return r-65+10;throw new Ho(r)}function mi(r){return r.toString(16).padStart(2,"0")}function*fi(r){yield*gn(r,mi)}function gi(r){return fi(r[Symbol.iterator]())}class Ci{convert(e){if(typeof e!="string")throw new T(typeof e,"string");return Kr(e)}}class yi{convert(e){return["0x",...gi(new Uint8Array(e))].join("")}}class vi extends d{constructor(){super(...arguments);o(this,"encoder",new yi);o(this,"decoder",new Ci)}}const U=new vi;new de(new ae(U),new ie(U));const yn=new D(new I(U),new A(U));class bi{convert(e){return e instanceof Array?yn.decode(e):[U.decode(e)]}}class xi{convert(e){return yn.encode(e)}}class Ei extends d{constructor(){super(...arguments);o(this,"encoder",new xi);o(this,"decoder",new bi)}}const re=new Ei;class Si{constructor(e){o(this,"encoding");this.encoding=e}convert(e){if(typeof e!="string")throw new T(typeof e,"string");return this.encoding.decodeString(e)}}class ki{constructor(e){o(this,"encoding");this.encoding=e}convert(e){return this.encoding.encodeToString(e)}}class We extends d{constructor(t){super();o(this,"encoder");o(this,"decoder");this.encoder=new ki(t),this.decoder=new Si(t)}}new We(Xr),new We(ei);const vn=new We(mn),bn=new We(wn);class Ri{convert(e){if(Ds(e))return e;if(Cr(e))return BigInt(e);if(!ce(e))throw new T(typeof e,"string | bigint | number");return BigInt(e)}}class Bi{convert(e){return Oe(e,"bigint"),`0x${e.toString(16)}`}}class Ii extends d{constructor(){super(...arguments);o(this,"encoder",new Bi);o(this,"decoder",new Ri)}}const Je=new Ii,qe=new de(new ae(Je),new ie(Je));new D(new I(Je),new A(Je)),new D(new I(qe),new A(qe));class Ai{convert(e){if(!As(e))throw new T(typeof e,"boolean");return e}}class Di{convert(e){return Oe(e,"boolean"),e}}class Ti extends d{constructor(){super(...arguments);o(this,"encoder",new Di);o(this,"decoder",new Ai)}}const je=new Ti;class Ui{convert(e){if(!ce(e))throw new T(typeof e,"string");const t=new Date(e);if(Number.isNaN(t.valueOf()))throw new T("NaN","number");return t}}class Pi{convert(e){return h(e,Date),e.toISOString()}}class Ni extends d{constructor(){super(...arguments);o(this,"encoder",new Pi);o(this,"decoder",new Ui)}}const te=new Ni;class _i{convert(e){if(!ce(e))throw new T(typeof e,"string");return new URL(e)}}class Li{convert(e){return e.toString()}}class Oi extends d{constructor(){super(...arguments);o(this,"encoder",new Li);o(this,"decoder",new _i)}}const xn=new Oi;new de(new ae(xn),new ie(xn));const we=c;class En{constructor(e,t,n,s){o(this,"requestID");o(this,"api");o(this,"method");o(this,"param");this.requestID=e,this.api=t,this.method=n,this.param=s}toJSON(){return{requestID:this.requestID,api:this.api,method:this.method,param:this.param}}}class Mi{convert(e){return l(e,"requestID","api","method","param"),new En(we.decode(e.requestID),p.decode(e.api),p.decode(e.method),e.param)}}class Fi{convert(e){return h(e,En),{requestID:we.encode(e.requestID),api:p.encode(e.api),method:p.encode(e.method),param:e.param}}}class Hi extends d{constructor(){super(...arguments);o(this,"encoder",new Fi);o(this,"decoder",new Mi)}}const zi=new Hi;class Sn{constructor(e){o(this,"requestID");this.requestID=e}}class Yr extends Sn{constructor(t,n){super(t);o(this,"response");this.response=n}toJSON(){return kn.encode(this)}}class Gi{convert(e){return l(e,"requestID","response"),new Yr(we.decode(e.requestID),e.response)}}class Wi{convert(e){return h(e,Yr),{requestID:we.encode(e.requestID),response:e.response}}}class Ji extends d{constructor(){super(...arguments);o(this,"encoder",new Wi);o(this,"decoder",new Gi)}}const kn=new Ji;class Zr extends Sn{constructor(t,n){super(t);o(this,"error");this.error=n}toJSON(){return Rn.encode(this)}}class qi{convert(e){return l(e,"requestID","error"),new Zr(we.decode(e.requestID),Y.decode(e.error))}}class ji{convert(e){return h(e,Zr),{requestID:we.encode(e.requestID),error:Y.encode(e.error)}}}class Vi extends d{constructor(){super(...arguments);o(this,"encoder",new ji);o(this,"decoder",new qi)}}const Rn=new Vi;class E{constructor(e,t){o(this,"tag");o(this,"data");this.tag=e,this.data=t}static fromString(e){const t=e.indexOf("~");if(t<0)throw new Jo;const n=e.substring(0,t),s=Xr.decodeString(e.substring(t+1));return new E(n,s)}static inflate(e){return m.decode(e)}toString(){return`${this.tag}~${Xr.encodeToString(this.data)}`}valueOf(){return this.toString()}toJSON(){return this.toString()}}class $i{convert(e){if(typeof e!="string")throw new T(typeof e,"string");return E.fromString(e)}}class Qi{convert(e){return h(e,E),e.toString()}}class Xi extends d{constructor(){super(...arguments);o(this,"encoder",new Qi);o(this,"decoder",new $i)}}const m=new Xi;class et{constructor(e,t,n){o(this,"r");o(this,"s");o(this,"v");this.r=e,this.s=t,this.v=n}toJSON(){return rt.encode(this)}}class Ki{convert(e){return l(e,"r","s","v"),new et(U.decode(e.r),U.decode(e.s),c.decode(e.v))}}class Yi{convert(e){return h(e,et),{r:U.encode(e.r),s:U.encode(e.s),v:c.encode(e.v)}}}class Zi extends d{constructor(){super(...arguments);o(this,"encoder",new Yi);o(this,"decoder",new Ki)}}const rt=new Zi;class tt{constructor(e,t){o(this,"account");o(this,"amount");this.account=e,this.amount=t}toJSON(){return ot.encode(this)}}class ed{convert(e){return l(e,"account","amount"),new tt(U.decode(e.account),U.decode(e.amount))}}class rd{convert(e){return h(e,tt),{account:U.encode(e.account),amount:U.encode(e.amount)}}}class td extends d{constructor(){super(...arguments);o(this,"encoder",new rd);o(this,"decoder",new ed)}}const ot=new td;class nt{constructor(e,t,n){o(this,"number");o(this,"timestamp");o(this,"hash");this.number=e,this.timestamp=t,this.hash=n}toJSON(){return st.encode(this)}}class od{convert(e){return l(e,"number","timestamp","hash"),new nt(c.decode(e.number),p.decode(e.timestamp),p.decode(e.hash))}}class nd{convert(e){return h(e,nt),{number:c.encode(e.number),timestamp:p.encode(e.timestamp),hash:p.encode(e.hash)}}}class sd extends d{constructor(){super(...arguments);o(this,"encoder",new nd);o(this,"decoder",new od)}}const st=new sd,Bn=new de(new ae(st),new ie(st));class ct{constructor(e){o(this,"bytes");this.bytes=e}toJSON(){return at.encode(this)}}class cd{convert(e){return l(e,"bytes"),new ct(vn.decode(e.bytes))}}class ad{convert(e){return h(e,ct),{bytes:vn.encode(e.bytes)}}}class id extends d{constructor(){super(...arguments);o(this,"encoder",new ad);o(this,"decoder",new cd)}}const at=new id;class it{constructor(e,t,n,s,a,i,u,f,w,y){o(this,"height");o(this,"timestamp");o(this,"l1_head");o(this,"l1_finalized");o(this,"payload_commitment");o(this,"ns_table");o(this,"block_merkle_root");o(this,"fee_merkle_root");o(this,"builder_signature");o(this,"fee_info");this.height=e,this.timestamp=t,this.l1_head=n,this.l1_finalized=s,this.payload_commitment=a,this.ns_table=i,this.block_merkle_root=u,this.fee_merkle_root=f,this.builder_signature=w,this.fee_info=y}toJSON(){return $.encode(this)}}class dd{convert(e){return l(e,"height","timestamp","l1_head","l1_finalized","payload_commitment","ns_table","block_merkle_root","fee_merkle_root","builder_signature","fee_info"),new it(c.decode(e.height),c.decode(e.timestamp),c.decode(e.l1_head),Bn.decode(e.l1_finalized),V.decode(e.payload_commitment),at.decode(e.ns_table),m.decode(e.block_merkle_root),m.decode(e.fee_merkle_root),rt.decode(e.builder_signature),ot.decode(e.fee_info))}}class ld{convert(e){return h(e,it),{height:c.encode(e.height),timestamp:c.encode(e.timestamp),l1_head:c.encode(e.l1_head),l1_finalized:Bn.encode(e.l1_finalized),payload_commitment:V.encode(e.payload_commitment),ns_table:at.encode(e.ns_table),block_merkle_root:m.encode(e.block_merkle_root),fee_merkle_root:m.encode(e.fee_merkle_root),builder_signature:rt.encode(e.builder_signature),fee_info:ot.encode(e.fee_info)}}}class ud extends d{constructor(){super(...arguments);o(this,"encoder",new ld);o(this,"decoder",new dd)}}const $=new ud;class Re{constructor(e,t){o(this,"vm");o(this,"payload");this.vm=e,this.payload=t}toJSON(){return le.encode(this)}}class hd{convert(e){return l(e,"vm","payload"),new Re(c.decode(e.vm),V.decode(e.payload))}}class pd{convert(e){return h(e,Re),{vm:c.encode(e.vm),payload:V.encode(e.payload)}}}class wd extends d{constructor(){super(...arguments);o(this,"encoder",new pd);o(this,"decoder",new hd)}}const le=new wd,In=new D(new I(le),new A(le));class dt{constructor(e){o(this,"transaction_nmt");this.transaction_nmt=e}toJSON(){return Be.encode(this)}}class md{convert(e){return l(e,"transaction_nmt"),new dt(In.decode(e.transaction_nmt))}}class fd{convert(e){return h(e,dt),{transaction_nmt:In.encode(e.transaction_nmt)}}}class gd extends d{constructor(){super(...arguments);o(this,"encoder",new fd);o(this,"decoder",new md)}}const Be=new gd;class lt{constructor(e,t,n,s,a){o(this,"header");o(this,"payload");o(this,"hash");o(this,"size");o(this,"numTransactions");this.header=e,this.payload=t,this.hash=n,this.size=s,this.numTransactions=a}toJSON(){return ut.encode(this)}}class Cd{convert(e){return l(e,"header","payload","hash","size","num_transactions"),new lt($.decode(e.header),Be.decode(e.payload),m.decode(e.hash),c.decode(e.size),c.decode(e.num_transactions))}}class yd{convert(e){return h(e,lt),{header:$.encode(e.header),payload:Be.encode(e.payload),hash:m.encode(e.hash),size:c.encode(e.size),num_transactions:c.encode(e.numTransactions)}}}class vd extends S{constructor(){super(...arguments);o(this,"encoder",new yd);o(this,"decoder",new Cd)}}const ut=new vd;class Ve{constructor(e,t,n,s,a){o(this,"header");o(this,"hash");o(this,"size");o(this,"num_transactions");o(this,"proposer_id");this.header=e,this.hash=t,this.size=n,this.num_transactions=s,this.proposer_id=a}toJSON(){return ht.encode(this)}}class bd{convert(e){return l(e,"header","hash","size","num_transactions","proposer_id"),new Ve($.decode(e.header),m.decode(e.hash),c.decode(e.size),c.decode(e.num_transactions),re.decode(e.proposer_id))}}class xd{convert(e){return h(e,Ve),{header:$.encode(e.header),hash:m.encode(e.hash),size:c.encode(e.size),num_transactions:c.encode(e.num_transactions),proposer_id:re.encode(e.proposer_id)}}}class Ed extends d{constructor(){super(...arguments);o(this,"encoder",new xd);o(this,"decoder",new bd)}}const ht=new Ed,Sd=new D(new I(ht),new A(ht));class $e{constructor(e,t,n,s){o(this,"hash");o(this,"header");o(this,"offset");o(this,"transaction");this.hash=e,this.header=t,this.offset=n,this.transaction=s}toJSON(){return pt.encode(this)}}class kd{convert(e){return l(e,"hash","header","offset","transaction"),new $e(m.decode(e.hash),$.decode(e.header),c.decode(e.offset),le.decode(e.transaction))}}class Rd{convert(e){return h(e,$e),{hash:m.encode(e.hash),header:$.encode(e.header),offset:c.encode(e.offset),transaction:le.encode(e.transaction)}}}class Bd extends d{constructor(){super(...arguments);o(this,"encoder",new Rd);o(this,"decoder",new kd)}}const pt=new Bd,An=new D(new I(pt),new A(pt));class Qe{constructor(e){o(this,"leaf_commit");this.leaf_commit=e}toJSON(){return wt.encode(this)}}class Id{convert(e){return l(e,"leaf_commit"),new Qe(m.decode(e.leaf_commit))}}class Ad{convert(e){return h(e,Qe),{leaf_commit:m.encode(e.leaf_commit)}}}class Dd extends d{constructor(){super(...arguments);o(this,"encoder",new Ad);o(this,"decoder",new Id)}}const wt=new Dd;class Dn{constructor(e,t){o(this,"width");o(this,"index");this.width=e,this.index=t}toJSON(){return mt.encode(this)}}class Td{convert(e){return l(e,"width","index"),new Dn(c.decode(e.width),c.decode(e.index))}}class Ud{convert(e){return h(e,Dn),{width:c.encode(e.width),index:c.encode(e.index)}}}class Pd extends d{constructor(){super(...arguments);o(this,"encoder",new Ud);o(this,"decoder",new Td)}}const mt=new Pd;class Ie{static get lsb0(){return _d}static get msb0(){return Od}valueOf(){return this.toString()}toJSON(){return this.toString()}}const Tn="bitvec::order::Lsb0",Un="bitvec::order::Msb0";class Nd extends Ie{toString(){return Tn}}const _d=new Nd;class Ld extends Ie{toString(){return Un}}const Od=new Ld;class Md{convert(e){if(typeof e!="string")throw new T(typeof e,"string");switch(e){case Tn:return Ie.lsb0;case Un:return Ie.msb0;default:throw new T(e,"CappuccinoAPIBitVecOrder")}}}class Fd{convert(e){return e.toString()}}class Hd extends d{constructor(){super(...arguments);o(this,"encoder",new Fd);o(this,"decoder",new Md)}}const Pn=new Hd;class Nn{constructor(e,t,n,s){o(this,"order");o(this,"head");o(this,"bits");o(this,"data");this.order=e,this.head=t,this.bits=n,this.data=s}getBitVecIndexIterable(){return this.order===Ie.lsb0?new jd(this.head.width,this.bits):new $d(this.head.width,this.bits)}[Symbol.iterator](){const e=this.getBitVecIndexIterable();return si(e,t=>Jd(this.data,t))[Symbol.iterator]()}toJSON(){return Ae.encode(this)}}class zd{convert(e){return l(e,"order","head","bits","data"),new Nn(Pn.decode(e.order),mt.decode(e.head),c.decode(e.bits),V.decode(e.data))}}class Gd{convert(e){return h(e,Nn),{order:Pn.encode(e.order),head:mt.encode(e.head),bits:c.encode(e.bits),data:V.encode(e.data)}}}class Wd extends d{constructor(){super(...arguments);o(this,"encoder",new Gd);o(this,"decoder",new zd)}}const Ae=new Wd;new D(new I(Ae),new A(Ae));function Jd(r,e){return(r[e.bucket]>>e.bitOffset&1)===1}class _n{constructor(e,t){o(this,"bucket");o(this,"bitOffset");this.bucket=e,this.bitOffset=t}}function Ln(r){switch(R(r===8||r===16||r===32,"bit width should be a power of two that is supported"),r){case 8:return 3;case 16:return 4;case 32:return 5;default:throw new N}}class qd{constructor(e,t){o(this,"totalBits");o(this,"bitWidthMask");o(this,"bitWidthShift");o(this,"offset",0);this.totalBits=t;const n=Ln(e);this.bitWidthMask=e-1,this.bitWidthShift=n}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,t=this.offset&this.bitWidthMask;return this.offset+=1,{done:!1,value:new _n(e,t)}}}class jd{constructor(e,t){o(this,"bitWidth");o(this,"totalBits");this.bitWidth=e,this.totalBits=t}[Symbol.iterator](){return new qd(this.bitWidth,this.totalBits)}}class Vd{constructor(e,t){o(this,"bitWidth");o(this,"totalBits");o(this,"bitWidthMask");o(this,"bitWidthShift");o(this,"offset",0);this.bitWidth=e,this.totalBits=t;const n=Ln(e);this.bitWidthMask=e-1,this.bitWidthShift=n}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,t=this.bitWidth-1-(this.offset&this.bitWidthMask);return this.offset+=1,{done:!1,value:new _n(e,t)}}}class $d{constructor(e,t){o(this,"bitWidth");o(this,"totalBits");this.bitWidth=e,this.totalBits=t}[Symbol.iterator](){return new Vd(this.bitWidth,this.totalBits)}}class On{constructor(e,t){o(this,"signature");o(this,"bitvec");this.signature=e,this.bitvec=t}toJSON(){return ft.encode(this)}}class Qd{convert(e){if(!Ro(e)||e.length!==2)throw new T(typeof e,"Array");return new On(m.decode(e[0]),Ae.decode(e[1]))}}class Xd{convert(e){return h(e,On),[m.encode(e.signature),Ae.encode(e.bitvec)]}}class Kd extends d{constructor(){super(...arguments);o(this,"encoder",new Xd);o(this,"decoder",new Qd)}}const ft=new Kd,Mn=new de(new ae(ft),new ie(ft));class Xe{constructor(e,t,n,s,a,i){o(this,"data");o(this,"vote_commitment");o(this,"view_number");o(this,"signatures");o(this,"is_genesis");o(this,"_pd");this.data=e,this.vote_commitment=t,this.view_number=n,this.signatures=s,this.is_genesis=a,this._pd=i}toJSON(){return De.encode(this)}}class Yd{convert(e){return l(e,"data","vote_commitment","view_number","signatures","is_genesis","_pd"),new Xe(wt.decode(e.data),m.decode(e.vote_commitment),c.decode(e.view_number),Mn.decode(e.signatures),je.decode(e.is_genesis),null)}}class Zd{convert(e){return h(e,Xe),{data:wt.encode(e.data),vote_commitment:m.encode(e.vote_commitment),view_number:c.encode(e.view_number),signatures:Mn.encode(e.signatures),is_genesis:je.encode(e.is_genesis),_pd:null}}}class el extends d{constructor(){super(...arguments);o(this,"encoder",new Zd);o(this,"decoder",new Yd)}}const De=new el;class gt{constructor(e,t,n,s,a,i,u,f){o(this,"view_number");o(this,"justify_qc");o(this,"parent_commitment");o(this,"block_header");o(this,"block_payload");o(this,"rejected");o(this,"timestamp");o(this,"proposer_id");this.view_number=e,this.justify_qc=t,this.parent_commitment=n,this.block_header=s,this.block_payload=a,this.rejected=i,this.timestamp=u,this.proposer_id=f}toJSON(){return Ct.encode(this)}}class rl{convert(e){return l(e,"view_number","justify_qc","parent_commitment","block_header","block_payload","rejected","timestamp","proposer_id"),new gt(c.decode(e.view_number),De.decode(e.justify_qc),m.decode(e.parent_commitment),$.decode(e.block_header),Be.decode(e.block_payload),V.decode(e.rejected),c.decode(e.timestamp),U.decode(e.proposer_id))}}class tl{convert(e){return h(e,gt),{view_number:c.encode(e.view_number),justify_qc:De.encode(e.justify_qc),parent_commitment:m.encode(e.parent_commitment),block_header:$.encode(e.block_header),block_payload:Be.encode(e.block_payload),rejected:V.encode(e.rejected),timestamp:c.encode(e.timestamp),proposer_id:U.encode(e.proposer_id)}}}class ol extends d{constructor(){super(...arguments);o(this,"encoder",new tl);o(this,"decoder",new rl)}}const Ct=new ol;class yt{constructor(e,t){o(this,"leaf");o(this,"qc");this.leaf=e,this.qc=t}toJSON(){return vt.encode(this)}}class nl{convert(e){return l(e,"leaf","qc"),new yt(Ct.decode(e.leaf),De.decode(e.qc))}}class sl{convert(e){return h(e,yt),{leaf:Ct.encode(e.leaf),qc:De.encode(e.qc)}}}class cl extends d{constructor(){super(...arguments);o(this,"encoder",new sl);o(this,"decoder",new nl)}}const vt=new cl;class Te{}class bt extends Te{toJSON(){return xt.encode(this)}}class al{convert(e){if(!ce(e)||e!=="Empty")throw new M;return new bt}}class il{convert(e){return h(e,bt),"Empty"}}class dl extends d{constructor(){super(...arguments);o(this,"encoder",new il);o(this,"decoder",new al)}}const xt=new dl;class Et extends Te{constructor(t,n,s){super();o(this,"value");o(this,"pos");o(this,"elem");this.value=t,this.pos=n,this.elem=s}toJSON(){return St.encode(this)}}class ll{convert(e){l(e,"Leaf");const t=e.Leaf;return l(t,"value","pos","elem"),new Et(m.decode(t.value),m.decode(t.pos),m.decode(t.elem))}}class ul{convert(e){return h(e,Et),{Leaf:{value:m.encode(e.value),pos:m.encode(e.pos),elem:m.encode(e.elem)}}}}class hl extends S{constructor(){super(...arguments);o(this,"encoder",new ul);o(this,"decoder",new ll)}}const St=new hl;class kt extends Te{constructor(t){super();o(this,"value");this.value=t}toJSON(){return Rt.encode(this)}}class pl{convert(e){l(e,"ForgettenSubtree");const t=e.ForgettenSubtree;return l(t,"value"),new kt(m.decode(t.value))}}class wl{convert(e){return h(e,kt),{ForgettenSubtree:{value:m.encode(e.value)}}}}class ml extends S{constructor(){super(...arguments);o(this,"encoder",new wl);o(this,"decoder",new pl)}}const Rt=new ml;class Ke extends Te{constructor(t,n){super();o(this,"value");o(this,"children");this.value=t,this.children=n}toJSON(){return Bt.encode(this)}}class fl{convert(e){l(e,"Branch");const t=e.Branch;return l(t,"value","children"),new Ke(m.decode(t.value),Ye.decode(t.children))}}class gl{convert(e){return h(e,Ke),{Branch:{value:m.encode(e.value),children:Ye.encode(e.children)}}}}class Cl extends d{constructor(){super(...arguments);o(this,"encoder",new gl);o(this,"decoder",new fl)}}const Bt=new Cl;class yl{convert(e){if(F(e,"Leaf",L))return St.decoder.convert(e);if(F(e,"Branch",L))return Bt.decoder.convert(e);if(F(e,"ForgettenSubtree",L))return Rt.decoder.convert(e);if(ce(e))return xt.decoder.convert(e);throw new M}}class vl{convert(e){if(h(e,Te),e instanceof Et)return St.encode(e);if(e instanceof Ke)return Bt.encode(e);if(e instanceof kt)return Rt.encode(e);if(e instanceof bt)return xt.encode(e);throw new M}}class bl extends d{constructor(){super(...arguments);o(this,"encoder",new vl);o(this,"decoder",new yl)}}const Fn=new bl,Ye=new D(new I(Fn),new A(Fn));class It{constructor(e,t){o(this,"pos");o(this,"proof");this.pos=e,this.proof=t}toJSON(){return At.encode(this)}}class xl{convert(e){return l(e,"pos","proof"),new It(m.decode(e.pos),Ye.decode(e.proof))}}class El{convert(e){return h(e,It),{pos:m.encode(e.pos),proof:Ye.encode(e.proof)}}}class Sl extends d{constructor(){super(...arguments);o(this,"encoder",new El);o(this,"decoder",new xl)}}const At=new Sl;class Dt{constructor(e,t,n,s,a){o(this,"transaction");o(this,"block_hash");o(this,"proof");o(this,"height");o(this,"hash");this.transaction=e,this.block_hash=t,this.proof=n,this.height=s,this.hash=a}toJSON(){return Tt.encode(this)}}class kl{convert(e){return l(e,"transaction","block_hash","proof","height","hash"),new Dt(le.decoder.convert(e.transaction),m.decode(e.block_hash),At.decoder.convert(e.proof),c.decode(e.height),m.decode(e.hash))}}class Rl{convert(e){return h(e,Dt),{transaction:le.encode(e.transaction),block_hash:m.encode(e.block_hash),proof:At.encode(e.proof),height:c.encode(e.height),hash:m.encode(e.hash)}}}class Bl extends d{constructor(){super(...arguments);o(this,"encoder",new Rl);o(this,"decoder",new kl)}}const Tt=new Bl,me="latest";class Ut{constructor(e){o(this,"target");this.target=e}static latest(){return new zn}static height(e){return new Gn(e)}toJSON(){return Hn.encode(this)}}class Il{convert(e){return h(e,Ut),typeof e.target=="number"?c.encode(e.target):p.encode(e.target)}}class Al{convert(e){return e===me?new zn:new Gn(c.decode(e))}}class Dl extends S{constructor(){super(...arguments);o(this,"encoder",new Il);o(this,"decoder",new Al)}}const Hn=new Dl;class zn extends Ut{constructor(){super(me)}}class Gn extends Ut{constructor(e){super(e)}}class Q{constructor(e,t,n){o(this,"significantDigitsMultiplier");this.alpha3Code=e,this.code=t,this.significantDigits=n,this.alpha3Code=e,this.code=t,this.significantDigits=n,this.significantDigitsMultiplier=BigInt(10)**BigInt(this.significantDigits)}toJSON(){return Ze.encode(this)}}const Wn=new Q("JPY",392,0),Tl=new Q("GBP",826,2),Jn=new Q("USD",840,2),Ul=new Q("EUR",978,2),Pl=new Q("XXX",999,2),qn=new Q("ETH",1001,18),Pt=new Q("XBT",1002,8),jn=new Q("ESP",10001,18),Nl=[Wn,Tl,Jn,Ul,Pl,qn,Pt,jn],_l=new Map(Nl.map(r=>[r.alpha3Code,r]));class Ll{convert(e){if(typeof e!="string")throw new M("CurrencyCodeDecoder: expected string");if(e==="BTC")return Pt;const t=_l.get(e);if(t===void 0)throw new M(`CurrencyCodeDecoder: unknown currency: "${e}"`);return t}}class Ol{convert(e){return h(e,Q),e.alpha3Code}}class Ml extends d{constructor(){super(...arguments);o(this,"decoder",new Ll);o(this,"encoder",new Ol)}}const Ze=new Ml;class J{constructor(e,t){this.currency=e,this.value=t,this.currency=e,this.value=t}static USD(e){return new J(Jn,BigInt(e))}static ETH(e){return new J(qn,BigInt(e))}static ESP(e){return new J(jn,BigInt(e))}static JPY(e){return new J(Wn,BigInt(e))}static BTC(e){return new J(Pt,BigInt(e))}toString(){return er.encode(this)}toJSON(){return er.encode(this)}}function Fl(r){return r==="."||r===","||r===" "}function Hl(r,e){let t=-1;const n=r.length;for(let s=0;s<n;s++)e(r[s])&&(t=s);return t}class zl{parseCurrencyCode(e){return Ze.decode(e)}parseValue(e,t){let n=1n;t[0]==="-"&&(n=-1n,t=t.substring(1));const s=Hl(t,Fl);if(s===-1){const w=BigInt(t.replace(/\D/g,""))*e.significantDigitsMultiplier;return n*w}const a=t.substring(0,s).replace(/\D/g,""),i=t.substring(s+1).replace(/\D/g,""),u=BigInt(a)*e.significantDigitsMultiplier,f=BigInt(i)*10n**BigInt(e.significantDigits-i.length);return n*(u+f)}convert(e){if(typeof e!="string")throw new M("MonetaryValueDecoder: expected string");const t=e.indexOf("Â ");if(t<=-1)throw new M("MonetaryValueDecoder: missing non-breaking space");const n=e.substring(0,t),s=e.substring(t+1);if(/^-?[\d .,]+$/.test(n)){const i=this.parseCurrencyCode(s);return new J(i,this.parseValue(i,n))}const a=this.parseCurrencyCode(n);return new J(a,this.parseValue(a,s))}}class Gl{convert(e){h(e,J);const t=e.value<0n?"-":"",n=e.value<0n?-e.value:e.value,s=n%e.currency.significantDigitsMultiplier,a=n/e.currency.significantDigitsMultiplier,i=String(a),u=String(s);return/^0+$/.test(u)?`${Ze.encode(e.currency)}Â ${t}${i}`:`${Ze.encode(e.currency)}Â ${t}${a}.${String(s).padStart(e.currency.significantDigits,"0")}`}}class Wl extends d{constructor(){super(...arguments);o(this,"decoder",new zl);o(this,"encoder",new Gl)}}const er=new Wl,Vn=new D(new I(er),new A(er));class Nt{constructor(e,t,n,s,a,i,u,f){o(this,"hash");o(this,"height");o(this,"time");o(this,"numTransactions");o(this,"proposerID");o(this,"feeRecipient");o(this,"size");o(this,"blockReward");this.hash=e,this.height=t,this.time=n,this.numTransactions=s,this.proposerID=a,this.feeRecipient=i,this.size=u,this.blockReward=f}toJSON(){return ue.encode(this)}}class Jl{convert(e){return l(e,"hash","height","time","num_transactions","proposer_id","fee_recipient","size","block_reward"),new Nt(m.decode(e.hash),c.decode(e.height),te.decode(e.time),c.decode(e.num_transactions),re.decode(e.proposer_id),re.decode(e.fee_recipient),c.decode(e.size),Vn.decode(e.block_reward))}}class ql{convert(e){return h(e,Nt),{hash:m.encode(e.hash),height:c.encode(e.height),time:te.encode(e.time),num_transactions:c.encode(e.numTransactions),proposer_id:re.encode(e.proposerID),fee_recipient:re.encode(e.feeRecipient),size:c.encode(e.size),block_reward:Vn.encode(e.blockReward)}}}class jl extends S{constructor(){super(...arguments);o(this,"encoder",new ql);o(this,"decoder",new Jl)}}const ue=new jl;new D(new I(ue),new A(ue));class _t{constructor(e){o(this,"blockDetail");this.blockDetail=e}toJSON(){return Lt.encode(this)}}class Vl{convert(e){return l(e,"block_detail"),new _t(ue.decode(e.block_detail))}}class $l{convert(e){return h(e,_t),{block_detail:ue.encode(e.blockDetail)}}}class Ql extends S{constructor(){super(...arguments);o(this,"encoder",new $l);o(this,"decoder",new Vl)}}const Lt=new Ql;class Ot{constructor(e){o(this,"limit");this.limit=e}static latest(e){return new Qn(e)}static from(e,t){return new Xn(e,t)}toJSON(){return $n.encode(this)}}class Xl{convert(e){return h(e,Ot),Cr(e.from)?{from:c.encode(e.from),limit:c.encode(e.limit)}:{from:p.encode(e.from),limit:c.encode(e.limit)}}}class Kl{convert(e){return l(e,"from","limit"),e.from===me?new Qn(c.decode(e.limit)):new Xn(c.decode(e.from),c.decode(e.limit))}}class Yl extends S{constructor(){super(...arguments);o(this,"encoder",new Xl);o(this,"decoder",new Kl)}}const $n=new Yl;class Qn extends Ot{constructor(e){super(e)}get from(){return me}}class Xn extends Ot{constructor(t,n){super(n);o(this,"from");this.from=t}}class Mt{constructor(e,t,n,s,a,i){o(this,"hash");o(this,"height");o(this,"proposerID");o(this,"numTransactions");o(this,"size");o(this,"time");this.hash=e,this.height=t,this.proposerID=n,this.numTransactions=s,this.size=a,this.time=i}toJSON(){return Ft.encode(this)}}class Zl{convert(e){return l(e,"hash","height","proposer_id","num_transactions","size","time"),new Mt(m.decode(e.hash),c.decode(e.height),re.decode(e.proposer_id),c.decode(e.num_transactions),c.decode(e.size),te.decode(e.time))}}class eu{convert(e){return h(e,Mt),{hash:m.encode(e.hash),height:c.encode(e.height),proposer_id:re.encode(e.proposerID),num_transactions:c.encode(e.numTransactions),size:c.encode(e.size),time:te.encode(e.time)}}}class ru extends S{constructor(){super(...arguments);o(this,"encoder",new eu);o(this,"decoder",new Zl)}}const Ft=new ru,fe=new D(new I(Ft),new A(Ft));class Ht{constructor(e){o(this,"blockSummaries");this.blockSummaries=e}toJSON(){return zt.encode(this)}}class tu{convert(e){return l(e,"block_summaries"),new Ht(fe.decode(e.block_summaries))}}class ou{convert(e){return h(e,Ht),{block_summaries:fe.encode(e.blockSummaries)}}}class nu extends S{constructor(){super(...arguments);o(this,"encoder",new ou);o(this,"decoder",new tu)}}const zt=new nu;class Gt{constructor(e,t,n){o(this,"rollups");o(this,"transactions");o(this,"blocks");this.rollups=e,this.transactions=t,this.blocks=n}toJSON(){return Wt.encode(this)}}class su{convert(e){return l(e,"rollups","transactions","blocks"),new Gt(c.decode(e.rollups),c.decode(e.transactions),c.decode(e.blocks))}}class cu{convert(e){return h(e,Gt),{rollups:c.encode(e.rollups),transactions:c.encode(e.transactions),blocks:c.encode(e.blocks)}}}class au extends d{constructor(){super(...arguments);o(this,"encoder",new cu);o(this,"decoder",new su)}}const Wt=new au;function iu(r,e){return r.blockHeights-e.blockHeights}class Jt{constructor(e,t,n,s){o(this,"blockTime");o(this,"blockSize");o(this,"blockTransactions");o(this,"blockHeights");const a=[],i=Math.min(e.length,t.length,n.length,s.length);for(let P=0;P<i;P++){const B=s[P];B!==null&&a.push({blockTime:e[P],blockSize:t[P],blockTransactions:n[P],blockHeights:B})}a.sort(iu);const u=a[0].blockHeights,f=a[a.length-1].blockHeights,w=[],y=[],g=[],k=[];for(let P=u,B=0;P<=f;P++){const q=a[B];if(q.blockHeights!==P){w.push(null),y.push(null),g.push(null),k.push(null);continue}w.push(q.blockTime),y.push(q.blockSize),g.push(q.blockTransactions),k.push(q.blockHeights),B++}const z=Math.max(0,k.length-50);this.blockTime=w.slice(z),this.blockSize=y.slice(z),this.blockTransactions=g.slice(z),this.blockHeights=k.slice(z)}toJSON(){return qt.encode(this)}}class du{convert(e){return l(e,"block_time","block_size","block_transactions","block_heights"),new Jt(Z.decode(e.block_time),Z.decode(e.block_size),Z.decode(e.block_transactions),Z.decode(e.block_heights))}}class lu{convert(e){return h(e,Jt),{block_time:Z.encode(e.blockTime),block_size:Z.encode(e.blockSize),block_transactions:Z.encode(e.blockTransactions),block_heights:Z.encode(e.blockHeights)}}}class uu extends d{constructor(){super(...arguments);o(this,"encoder",new lu);o(this,"decoder",new du)}}const qt=new uu,Kn=V;class rr{constructor(e,t,n,s,a,i){o(this,"hash");o(this,"rollups");o(this,"height");o(this,"time");o(this,"offset");o(this,"numTransactions");this.hash=e,this.rollups=t,this.height=n,this.time=s,this.offset=a,this.numTransactions=i}toJSON(){return jt.encode(this)}}class hu{convert(e){return l(e,"hash","rollups","height","time","offset","num_transactions"),new rr(m.decode(e.hash),Kn.decode(e.rollups),c.decode(e.height),te.decode(e.time),c.decode(e.offset),c.decode(e.num_transactions))}}class pu{convert(e){return h(e,rr),{hash:m.encode(e.hash),rollups:Kn.encode(e.rollups),height:c.encode(e.height),time:te.encode(e.time),offset:c.encode(e.offset),num_transactions:c.encode(e.numTransactions)}}}class wu extends d{constructor(){super(...arguments);o(this,"encoder",new pu);o(this,"decoder",new hu)}}const jt=new wu,ge=new D(new I(jt),new A(jt));class Vt{constructor(e,t,n,s,a){o(this,"latestBlock");o(this,"genesisOverview");o(this,"latestBlocks");o(this,"latestTransactions");o(this,"histograms");this.latestBlock=e,this.genesisOverview=t,this.latestBlocks=n,this.latestTransactions=s,this.histograms=a}toJSON(){return $t.encode(this)}}class mu{convert(e){return l(e,"latest_block","genesis_overview","latest_blocks","latest_transactions","histograms"),new Vt(ue.decode(e.latest_block),Wt.decode(e.genesis_overview),fe.decode(e.latest_blocks),ge.decode(e.latest_transactions),qt.decode(e.histograms))}}class fu{convert(e){return h(e,Vt),{latest_block:ue.encode(e.latestBlock),genesis_overview:Wt.encode(e.genesisOverview),latest_blocks:fe.encode(e.latestBlocks),latest_transactions:ge.encode(e.latestTransactions),histograms:qt.encode(e.histograms)}}}class gu extends d{constructor(){super(...arguments);o(this,"encoder",new fu);o(this,"decoder",new mu)}}const $t=new gu;class Qt{constructor(e){o(this,"explorerSummary");this.explorerSummary=e}toJSON(){return Xt.encode(this)}}class Cu{convert(e){return l(e,"explorer_summary"),new Qt($t.decode(e.explorer_summary))}}class yu{convert(e){return h(e,Qt),{explorer_summary:$t.encode(e.explorerSummary)}}}class vu extends d{constructor(){super(...arguments);o(this,"encoder",new yu);o(this,"decoder",new Cu)}}const Xt=new vu;class Yn{constructor(e){o(this,"query");this.query=e}toJSON(){return Zn.encode(this)}}class bu{convert(e){return h(e,Yn),p.encode(e.query)}}class xu{convert(e){return new Yn(p.decode(e))}}class Eu extends S{constructor(){super(...arguments);o(this,"encoder",new bu);o(this,"decoder",new xu)}}const Zn=new Eu;class Kt{constructor(e,t){o(this,"blocks");o(this,"transactions");this.blocks=e,this.transactions=t}toJSON(){return Yt.encode(this)}}class Su{convert(e){return l(e,"blocks","transactions"),new Kt(fe.decode(e.blocks),ge.decode(e.transactions))}}class ku{convert(e){return h(e,Kt),{blocks:fe.encode(e.blocks),transactions:ge.encode(e.transactions)}}}class Ru extends S{constructor(){super(...arguments);o(this,"encoder",new ku);o(this,"decoder",new Su)}}const Yt=new Ru;class Zt{constructor(e){o(this,"searchResults");this.searchResults=e}toJSON(){return eo.encode(this)}}class Bu{convert(e){return l(e,"search_results"),new Zt(Yt.decode(e.search_results))}}class Iu{convert(e){return h(e,Zt),{search_results:Yt.encode(e.searchResults)}}}class Au extends S{constructor(){super(...arguments);o(this,"encoder",new Iu);o(this,"decoder",new Bu)}}const eo=new Au;class ro{static heightAndOffset(e,t){return new Ue(e,t)}static hash(e){return new Pe(e)}toJSON(){return es.encode(this)}}class Du{convert(e){if(h(e,ro),e instanceof Ue)return{height:c.encode(e.height),offset:c.encode(e.offset)};if(e instanceof Pe)return{hash:m.encode(e.hash)};throw new M}}class Tu{convert(e){if(F(e,"height",L)&&F(e,"offset",L))return new Ue(c.decode(e.height),c.decode(e.offset));if(F(e,"hash",L))return new Pe(m.decode(e.hash));throw new M}}class Uu extends d{constructor(){super(...arguments);o(this,"encoder",new Du);o(this,"decoder",new Tu)}}const es=new Uu;class Ue extends ro{constructor(t,n){super();o(this,"height");o(this,"offset");this.height=t,this.offset=n}}class Pe extends ro{constructor(t){super();o(this,"hash");this.hash=t}}const rs=c;class to{constructor(e,t){o(this,"namespace");o(this,"payload");this.namespace=e,this.payload=t}toJSON(){return oo.encode(this)}}class Pu{convert(e){return l(e,"namespace","payload"),new to(rs.decode(e.namespace),bn.decode(e.payload))}}class Nu{convert(e){return h(e,to),{namespace:rs.encode(e.namespace),payload:bn.encode(e.payload)}}}class _u extends d{constructor(){super(...arguments);o(this,"encoder",new Nu);o(this,"decoder",new Pu)}}const oo=new _u,ts=new D(new I(oo),new A(oo));class no{constructor(e,t,n,s,a,i,u,f,w){o(this,"hash");o(this,"height");o(this,"blockConfirmed");o(this,"offset");o(this,"numTransactions");o(this,"size");o(this,"time");o(this,"sequencingFees");o(this,"feeDetails");this.hash=e,this.height=t,this.blockConfirmed=n,this.offset=s,this.numTransactions=a,this.size=i,this.time=u,this.sequencingFees=f,this.feeDetails=w}toJSON(){return so.encode(this)}}class Lu{convert(e){return l(e,"hash","height","block_confirmed","offset","num_transactions","size","time","sequencing_fees","fee_details"),new no(m.decode(e.hash),c.decode(e.height),je.decode(e.block_confirmed),c.decode(e.offset),c.decode(e.num_transactions),c.decode(e.size),te.decode(e.time),[],[])}}class Ou{convert(e){return h(e,no),{hash:m.encode(e.hash),height:c.encode(e.height),block_confirmed:je.encode(e.blockConfirmed),offset:c.encode(e.offset),num_transactions:c.encode(e.numTransactions),size:c.encode(e.size),time:te.encode(e.time),sequencing_fees:[],fee_details:[]}}}class Mu extends d{constructor(){super(...arguments);o(this,"encoder",new Ou);o(this,"decoder",new Lu)}}const so=new Mu;class co{constructor(e,t){o(this,"details");o(this,"data");this.details=e,this.data=t}toJSON(){return ao.encode(this)}}class Fu{convert(e){return l(e,"details","data"),new co(so.decode(e.details),ts.decode(e.data))}}class Hu{convert(e){return h(e,co),{details:so.encode(e.details),data:ts.encode(e.data)}}}class zu extends d{constructor(){super(...arguments);o(this,"encoder",new Hu);o(this,"decoder",new Fu)}}const ao=new zu;class tr{constructor(e){o(this,"transactionDetail");this.transactionDetail=e}toJSON(){return io.encode(this)}}class Gu{convert(e){return l(e,"transaction_detail"),new tr(ao.decode(e.transaction_detail))}}class Wu{convert(e){return h(e,tr),{transaction_detail:ao.encode(e.transactionDetail)}}}class Ju extends S{constructor(){super(...arguments);o(this,"encoder",new Wu);o(this,"decoder",new Gu)}}const io=new Ju;class or{constructor(){}static block(e){return new nr(e)}static namespace(e){return new sr(e)}static none(){return new uo}toJSON(){return lo.encode(this)}}class qu{convert(e){return F(e,"block",L)?new nr(c.decode(e.block)):F(e,"namespace",L)?new sr(c.decode(e.namespace)):new uo}}class ju{convert(e){if(h(e,or),e instanceof uo)return{};if(e instanceof nr)return{block:c.encode(e.block)};if(e instanceof sr)return{namespace:c.encode(e.namespace)};throw new M}}class Vu extends S{constructor(){super(...arguments);o(this,"encoder",new ju);o(this,"decoder",new qu)}}const lo=new Vu;class uo extends or{constructor(){super()}convertURL(e){return e}}class nr extends or{constructor(t){super();o(this,"block");this.block=t}convertURL(t){return new URL(`${t.pathname}/block/${this.block}`,t)}}class sr extends or{constructor(t){super();o(this,"namespace");this.namespace=t}convertURL(t){return new URL(`${t.pathname}/namespace/${this.namespace}`,t)}}class cr{constructor(e){o(this,"limit");this.limit=e}static latest(e){return new ar(e)}static heightAndOffset(e,t,n){return new ir(e,t,n)}static hash(e,t){return new dr(e,t)}toJSON(){return ho.encode(this)}}class $u{convert(e){return l(e,"limit"),F(e,"height",L)&&F(e,"offset",L)?new ir(c.decode(e.height),c.decode(e.offset),c.decode(e.limit)):F(e,"hash",L)?new dr(m.decode(e.hash),c.decode(e.limit)):new ar(c.decode(e.limit))}}class Qu{convert(e){if(h(e,cr),e instanceof ar)return{limit:c.encode(e.limit)};if(e instanceof ir)return{height:c.encode(e.height),offset:c.encode(e.offset),limit:c.encode(e.limit)};if(e instanceof dr)return{hash:m.encode(e.hash),limit:c.encode(e.limit)};throw new M}}class Xu extends S{constructor(){super(...arguments);o(this,"encoder",new Qu);o(this,"decoder",new $u)}}const ho=new Xu;class ar extends cr{constructor(e){super(e)}convertURL(e){return new URL(`transactions/latest/${this.limit}`,e)}}class ir extends cr{constructor(t,n,s){super(s);o(this,"height");o(this,"offset");this.height=t,this.offset=n}convertURL(t){return new URL(`transactions/from/${this.height}/${this.offset}/${this.limit}`,t)}}class dr extends cr{constructor(t,n){super(n);o(this,"hash");this.hash=t}convertURL(t){return new URL(`transactions/hash/${this.hash}/${this.limit}`,t)}}class os{constructor(e,t){o(this,"target");o(this,"filter");this.target=e,this.filter=t}toJSON(){return ns.encode(this)}}class Ku{convert(e){return l(e,"filter","target"),new os(ho.decode(e.target),lo.decode(e.filter))}}class Yu{convert(e){return h(e,os),{filter:lo.encode(e.filter),target:ho.encode(e.target)}}}class Zu extends S{constructor(){super(...arguments);o(this,"encoder",new Yu);o(this,"decoder",new Ku)}}const ns=new Zu;class Ne{constructor(e){o(this,"transactionSummaries");this.transactionSummaries=e}toJSON(){return po.encode(this)}}class eh{convert(e){return l(e,"transaction_summaries"),new Ne(ge.decode(e.transaction_summaries))}}class rh{convert(e){return h(e,Ne),{transaction_summaries:ge.encode(e.transactionSummaries)}}}class th extends S{constructor(){super(...arguments);o(this,"encoder",new rh);o(this,"decoder",new eh)}}const po=new th;class C{constructor(e,t,n,s){o(this,"namespace");o(this,"name");o(this,"site");o(this,"blockExplorer");this.namespace=e,this.name=t,this.site=n,this.blockExplorer=s}}const oh=new C(202374881,"Vienna",new URL("https://vienna.caldera.dev/"),new URL("https://vienna.calderaexplorer.xyz/")),nh=new C(202374882,"OP Stack",new URL("https://stack.optimism.io/"),new URL("https://www.blockscout.com/")),sh=new C(33914988448,"Arbitrum",new URL("https://arbitrum.io/"),new URL("https://arbiscan.io/")),ch=new C(33914988449,"Eigen Layer",new URL("https://www.eigenlayer.xyz/"),new URL("https://www.blockscout.com/")),ah=new C(33914988450,"Spire",new URL("https://www.spire.dev/"),new URL("https://www.blockscout.com/")),ih=new C(33914988451,"Alt Layer",new URL("https://altlayer.io/"),new URL("https://www.blockscout.com/")),dh=new C(33914988452,"Caldera",new URL("https://www.caldera.xyz/"),new URL("https://www.blockscout.com/")),lh=new C(33914988453,"Vistara Labs",new URL("https://vistara.dev/"),new URL("https://www.blockscout.com/")),uh=new C(33914988454,"Polygon",new URL("https://polygon.technology/"),new URL("https://www.blockscout.com/")),hh=new C(263,"Milan",new URL("https://milan.caldera.dev/"),new URL("https://milan-devnet.explorer.caldera.xyz/")),ph=new C(41234687,"Kyoto",new URL("https://example.com/"),new URL("https://kyoto-explorer.altlayer.io/")),wh=1918988905,mh=new C(wh,"RARI",new URL("https://rarichain.org/"),new URL("https://explorer.rarichain.org/")),fh=1380012617,gh=new C(fh,"RARI",new URL("https://rarichain.org/"),new URL("https://mainnet.explorer.rarichain.org/")),Ch=9369,yh=new C(Ch,"LogX",new URL("https://logx.network/"),new URL("https://kartel-testnet-explorer.alt.technology/")),vh=936369,bh=new C(vh,"LogX",new URL("https://logx.network/"),new URL("https://vzjuxmhfn70kgnlds27h-explorer.alt.technology")),xh=466,Eh=new C(xh,"AppChain",new URL("https://appchain.xyz/"),new URL("https://explorer.appchain.xyz/")),Sh=4661,kh=new C(Sh,"AppChain",new URL("https://appchain.xyz/"),new URL("https://appchaintestnet.explorer.caldera.xyz/")),Rh=360,Bh=new C(Rh,"Molten",new URL("https://www.moltennetwork.com/"),new URL("https://molten.explorer.caldera.dev/")),Ih=3609,Ah=new C(Ih,"Molten",new URL("https://www.moltennetwork.com/"),new URL("https://molten.explorer.caldera.dev/")),Dh=33139,Th=new C(Dh,"APECHAIN",new URL("https://apechain.com/"),new URL("https://apescan.io/")),Uh=3313939,Ph=new C(Uh,"APECHAIN",new URL("https://apechain.com/"),new URL("https://apechain-testnet.explorer.caldera.xyz/")),Nh=13107,_h=new C(Nh,"t3rn",new URL("https://t3rn.io/"),new URL("https://brn-testnet.explorer.caldera.xyz/")),Lh=819,Oh=new C(Lh,"t3rn",new URL("https://t3rn.io/"),new URL("https://exporer.t3rn.io/")),ss=21341,Mh=new C(ss,"Rufus",new URL("https://l2beat.com/scaling/projects/rufus"),new URL("https://rufus-sepolia-testnet.explorer.caldera.xyz/")),Fh=new C(ss,"Rufus",new URL("https://l2beat.com/scaling/projects/rufus"),new URL("https://rufus.calderaexplorer.xyz/")),Hh=1397311310,cs=new C(Hh,"Infinite Garden",new URL("https://infinitegarden.espressosys.com/"),new URL("https://explorer.main.net.espressosys.com/")),zh=[cs,gh,bh,Bh,Eh,Th,Oh,Fh],Gh=[cs,mh,yh,kh,Ah,Ph,_h,Mh],Wh=new Map([oh,nh,sh,uh,ch,ah,ih,dh,lh,hh,ph,...zh,...Gh].map(r=>[r.namespace,r])),as=["Residential","Mobile","Enterprise","AWS","Azure","GCP"],is=["Espresso v1.0","Espresso v1.1","Espresso v1.2","Espresso v1.3","Espresso v1.4"],ds=["Linux","Unix","Windows","MacOS"],ls=[["Espresso","https://espressosys.com/"],["BlockDaemon","https://www.blockdaemon.com/"],["Unit 410","https://unit410.com/"],["Nethermind","https://www.nethermind.io/"],["Sub7","https://sub7.xyz/"],["KudasaiJP","https://kudasai.co.jp/"],["Informal Systems","https://informal.systems/"],["P2P","https://p2p.org/"],["LinkPool","https://linkpool.com/"],["ZKV","https://zkvalidator.com/"],["Figment","https://figment.io/"]],lr=2147483648,Jh=1103515245,qh=12345;class ur{constructor(e){o(this,"state");this.state=e!==void 0?e:Math.floor(Math.random()*(lr-1))}nextInt(){return this.state=(Jh*this.state+qh)%lr,this.state}nextFloat(){return this.nextInt()/(lr-1)}nextRange(e,t){const n=t-e,s=this.nextInt()/lr;return e+Math.floor(s*n)}fillBytes(e){const t=new ArrayBuffer(e),n=new DataView(t);let s=0;for(;s<e-4;s+=4)n.setUint32(s,this.nextRange(0,4294967295));for(let a=s;a<e;a++)n.setUint8(a,this.nextRange(0,256));return t}}const jh=[[["Mexico City",19.4333,-99.1333,"MX"],["Guadalajara",20.6767,-103.3475,"MX"],["Monterrey",25.6667,-100.3,"MX"],["Guatemala City",14.6133,-90.5353,"GT"],["Tijuana",32.525,-117.0333,"MX"],["Ecatepec",19.6097,-99.06,"MX"],["Tegucigalpa",14.1058,-87.2047,"HN"],["LeÃ³n de los Aldama",21.1167,-101.6833,"MX"],["San JosÃ©",9.9325,-84.08,"CR"],["Panama City",8.9833,-79.5167,"PA"],["JuÃ¡rez",31.745,-106.485,"MX"],["ComayagÃ¼ela",14.098,-87.21,"HN"],["Mexicali",32.6633,-115.4678,"MX"],["NezahualcÃ³yotl",19.4081,-99.0186,"MX"],["Managua",12.1364,-86.2514,"NI"],["Morelia",19.7683,-101.1894,"MX"],["Aguascalientes",21.876,-102.296,"MX"],["MÃ©rida",20.97,-89.62,"MX"],["Saltillo",25.4231,-100.9919,"MX"],["CuliacÃ¡n",24.8069,-107.3939,"MX"]],[["Havana",23.1367,-82.3589,"CU"],["San Juan",18.3985,-66.061,"PR"],["Santiago",19.4572,-70.6889,"DO"],["Santo Domingo",18.4667,-69.95,"DO"],["Port-au-Prince",18.5333,-72.3333,"HT"],["Santo Domingo Este",18.4855,-69.8734,"DO"],["Kingston",17.9714,-76.7931,"JM"],["Carrefour",18.5344,-72.4094,"HT"],["Santiago de Cuba",20.0217,-75.8294,"CU"],["PÃ©tion-Ville",18.5128,-72.2864,"HT"],["HolguÃ­n",20.8869,-76.2592,"CU"],["GonaÃ¯ves",19.4456,-72.6883,"HT"],["CamagÃ¼ey",21.3839,-77.9075,"CU"],["Puerto Plata",19.8,-70.6833,"DO"],["Croix-des-Bouquets",18.5761,-72.2269,"HT"],["Nassau",25.0781,-77.3386,"BS"],["Fort-de-France",14.6,-61.0667,"MQ"],["HigÃ¼ey",18.6167,-68.7,"DO"],["Santa Clara",22.4069,-79.9649,"CU"],["Bayamo",20.3817,-76.6428,"CU"]],[["Cairo",30.0444,31.2358,"EG"],["Lagos",6.455,3.3841,"NG"],["Kinshasa",-4.3219,15.3119,"CD"],["Luanda",-8.8383,13.2344,"AO"],["Johannesburg",-26.2044,28.0456,"ZA"],["Dar es Salaam",-6.8161,39.2803,"TZ"],["Douala",4.05,9.7,"CM"],["Giza",29.987,31.2118,"EG"],["Abidjan",5.3167,-4.0333,"CI"],["Cape Town",-33.9253,18.4239,"ZA"],["Bamako",12.6392,-8.0028,"ML"],["Abuja",9.0667,7.4833,"NG"],["Ibadan",7.3964,3.9167,"NG"],["Addis Ababa",9.03,38.74,"ET"],["Mbuji-Mayi",-6.15,23.6,"CD"],["Mogadishu",2.0392,45.3419,"SO"],["Lusaka",-15.4167,28.2833,"ZM"],["Antananarivo",-18.91,47.525,"MG"],["Awka",6.2069,7.0678,"NG"],["Bamenda",5.9614,10.1517,"CM"]],[["Tokyo",35.6897,139.6922,"JP"],["Delhi",28.61,77.23,"IN"],["Manila",14.5958,120.9772,"PH"],["Dhaka",23.7639,90.3889,"BD"],["Moscow",55.7558,37.6172,"RU"],["Ho Chi Minh City",10.7756,106.7019,"VN"],["Xiâan",34.2611,108.9422,"CN"],["Dongguan",23.021,113.752,"CN"],["Tongshan",34.204,117.284,"CN"],["Jining",35.4151,116.5871,"CN"],["Cangzhou",38.3047,116.8387,"CN"],["Shaoyang",27.2395,111.4679,"CN"],["Dalian",38.9,121.6,"CN"],["Ankara",39.93,32.85,"TR"],["Zhangzhou",24.513,117.647,"CN"],["Changsha",28.228,112.939,"CN"],["ÃrÃ¼mqi",43.8225,87.6125,"CN"],["Ningbo",29.8603,121.6245,"CN"],["Suihua",46.654,126.969,"CN"],["Deyang",31.127,104.398,"CN"]],[["London",51.5072,-.1275,"GB"],["Madrid",40.4169,-3.7033,"ES"],["Berlin",52.52,13.405,"DE"],["Barcelona",41.3828,2.1769,"ES"],["Athens",37.9842,23.7281,"GR"],["Budapest",47.4925,19.0514,"HU"],["Birmingham",52.48,-1.9025,"GB"],["Stuttgart",48.7775,9.18,"DE"],["Munich",48.1375,11.575,"DE"],["Hamburg",53.55,10,"DE"],["Bucharest",44.4325,26.1039,"RO"],["Vienna",48.2083,16.3725,"AT"],["Stockholm",59.3294,18.0686,"SE"],["Minsk",53.9,27.5667,"BY"],["Warsaw",52.23,21.0111,"PL"],["Valencia",39.47,-.3764,"ES"],["Amsterdam",52.3728,4.8936,"NL"],["Copenhagen",55.6761,12.5683,"DK"],["Porto",41.1621,-8.622,"PT"],["Brussels",50.8467,4.3525,"BE"]],[["New York",40.6943,-73.9249,"US"],["Los Angeles",34.1141,-118.4068,"US"],["Chicago",41.8375,-87.6866,"US"],["Miami",25.784,-80.2101,"US"],["Dallas",32.7935,-96.7667,"US"],["Philadelphia",40.0077,-75.1339,"US"],["Atlanta",33.7628,-84.422,"US"],["Boston",42.3188,-71.0852,"US"],["Phoenix",33.5722,-112.0892,"US"],["Detroit",42.3834,-83.1024,"US"],["Seattle",47.6211,-122.3244,"US"],["San Francisco",37.7558,-122.4449,"US"],["San Diego",32.8313,-117.1222,"US"],["Minneapolis",44.9635,-93.2678,"US"],["Brooklyn",40.6501,-73.9496,"US"],["Vancouver",49.25,-123.1,"CA"],["Riverside",33.9381,-117.3949,"US"],["Baltimore",39.3051,-76.6144,"US"],["Portland",45.5371,-122.65,"US"],["Sacramento",38.5677,-121.4685,"US"]],[["Melbourne",-37.8142,144.9631,"AU"],["Sydney",-33.8678,151.21,"AU"],["Brisbane",-27.4678,153.0281,"AU"],["Perth",-31.9559,115.8606,"AU"],["Auckland",-36.8406,174.74,"NZ"],["Adelaide",-34.9275,138.6,"AU"],["Port Moresby",-9.4789,147.1494,"PG"],["Gold Coast",-28.0167,153.4,"AU"],["Cranbourne",-38.0996,145.2834,"AU"],["Christchurch",-43.531,172.6365,"NZ"],["Manukau City",-37,174.885,"NZ"],["Central Coast",-33.3,151.2,"AU"],["Wollongong",-34.4331,150.8831,"AU"],["Ipswich",-27.6144,152.7608,"AU"],["Wellington",-41.2889,174.7772,"NZ"],["Northcote",-36.8019,174.7494,"NZ"],["Hobart",-42.8806,147.325,"AU"],["Lae",-6.7303,147.0008,"PG"],["Suva",-18.1416,178.4419,"FJ"],["NoumÃ©a",-22.2758,166.458,"NC"]],[["SÃ£o Paulo",-23.55,-46.6333,"BR"],["Buenos Aires",-34.6033,-58.3817,"AR"],["Rio de Janeiro",-22.9111,-43.2056,"BR"],["Lima",-12.06,-77.0375,"PE"],["BogotÃ¡",4.7111,-74.0722,"CO"],["Santiago",-33.4372,-70.6506,"CL"],["Belo Horizonte",-19.9167,-43.9333,"BR"],["Fortaleza",-3.7275,-38.5275,"BR"],["Santa Cruz de la Sierra",-17.7892,-63.1975,"BO"],["La Paz",-16.4958,-68.1333,"BO"],["Guayaquil",-2.19,-79.8875,"EC"],["MedellÃ­n",6.2308,-75.5906,"CO"],["Salvador",-12.9747,-38.4767,"BR"],["Caracas",10.4806,-66.9036,"VE"],["CÃ³rdoba",-31.4167,-64.1833,"AR"],["Santos",-23.9369,-46.325,"BR"],["Curitiba",-25.4297,-49.2711,"BR"],["Maracaibo",10.6333,-71.6333,"VE"],["Recife",-8.05,-34.9,"BR"],["Porto Alegre",-30.0331,-51.23,"BR"]]],us=[0,0,5,26,28,26,9,6],Vh=us.reduce((r,e)=>r+e,0),$h=us.reduce((r,e)=>{const t=r[r.length-1]??0;return r.push(t+e),r},[]),Qh=Array.from(pi($h,jh,(r,e)=>[r,e])),hr=new Date,wo=new Date(hr.getFullYear(),hr.getMonth(),hr.getDate()).valueOf();async function*Xh(){}function Kh(){const r=new Uint8Array(new Array(20).map(()=>0)).buffer;return{hash:new E("BLOCK",r),height:0,time:new Date(0),genTime:0,transactions:Xh(),numTransactions:0,proposer:[],size:0,fees:[]}}async function*Yh(r){let e=1,t=wo;for(;t<hr.valueOf();){const n=Math.floor(r.nextFloat()*14*1e3);yield Zh(new ur(e+n),e,t,t+n),t+=n,e++}}async function*_(r=new ur(wo)){yield Kh(),yield*Yh(r)}function Zh(r,e,t,n){const s=Math.floor(r.nextRange(0,5)),a=r.nextRange(0,ps.length),i=ps[a];return{hash:new E("BLOCK",r.fillBytes(32)),height:e,genTime:n-t,time:new Date(n),numTransactions:s,transactions:rp(new ur(e+t),e,t,n,s),proposer:[i.address],size:Math.floor(r.nextFloat()*1024*s)+8,fees:[J.ESP(BigInt(r.nextRange(0,1e9)*1e3))]}}const hs=Array.from(Wh.keys());function ep(r){return r.nextFloat()>.98?1:hs[r.nextRange(0,hs.length)]}async function*rp(r,e,t,n,s){const a=(n-t)/s;for(let i=0,u=t;u<n;u+=a,i++){const f=ep(r),w=Math.floor(1024*r.nextFloat());yield{block:e,index:i,size:w,hash:new E("COMMIT",r.fillBytes(32)),time:new Date(u),sender:new E("PUBKEY",r.fillBytes(32)),tree:{namespace:f,data:r.fillBytes(w)}}}}function tp(r){const e=r.nextRange(0,Vh),t=ni(Qh,([i])=>i<=e),[,n]=di(t),s=r.nextRange(0,n.length);return n[s]}function op(r){const e=r.nextRange(0,ls.length);return ls[e]}function np(r){const e=r.nextRange(0,ds.length);return ds[e]}function sp(r){const e=r.nextRange(0,is.length);return is[e]}function cp(r){const e=r.nextRange(0,as.length);return as[e]}function ap(r){const[e,t]=op(r),[,n,s,a]=tp(r),i=np(r),u=sp(r),f=cp(r);return{pubkey:new E("PUBKEY",r.fillBytes(32)),name:`${e} Node ${a} ${r.nextRange(0,100)}`,address:r.fillBytes(32),company:{name:e,website:t},location:{coords:[n,s],country:a},operatingSystem:i,networkType:f,nodeType:u}}function*ip(){const r=new ur(wo),e=r.nextRange(50,150);for(let t=0;t<e;t++)yield ap(r)}const ps=Array.from(ip());async function*dp(r){for(let e=r.next();!e.done;e=r.next())yield e.value}function lp(r){return dp(r[Symbol.iterator]())}async function*up(r){for(let e=await r.next();!e.done;e=await r.next())yield e.value}async function*mo(r,e){for(let t=await r.next();!t.done;t=await r.next())e(t.value)&&(yield t.value)}function ws(r,e){return mo(r[Symbol.asyncIterator](),e)}async function*he(r,e){for(let t=await r.next();!t.done;t=await r.next())yield await e(t.value)}function X(r,e){return he(r[Symbol.asyncIterator](),e)}async function*oe(r,e){for(let t=0;t<e;t++){const n=await r.next();if(n.done)return;yield n.value}}function fo(r,e){return oe(r[Symbol.asyncIterator](),e)}async function*go(r,e){for(let t=await r.next();!t.done&&e(t.value);t=await r.next())yield t.value}function Co(r,e){return go(r[Symbol.asyncIterator](),e)}async function*ne(r,e){for(let t=0;t<e;t++)if((await r.next()).done)return;yield*up(r)}function pr(r,e){return ne(r[Symbol.asyncIterator](),e)}async function _e(r){const e=await r.next();if(e.done)throw new xe;return e.value}async function hp(r){return _e(r[Symbol.asyncIterator]())}async function pp(r,e){for(let t=await r.next();!t.done;t=await r.next())if(e(t.value))return t.value}async function wp(r,e){return pp(r[Symbol.asyncIterator](),e)}async function ms(r){let e;for(let t=await r.next();!t.done;t=await r.next())e=t.value;if(e===void 0)throw new xe;return e}async function mp(r){return ms(r[Symbol.asyncIterator]())}async function*fs(r,e){for(let t=await r.next();!t.done;t=await r.next())yield*e(t.value)}function Ce(r,e){return fs(r[Symbol.asyncIterator](),e)}async function*yo(r){yield*ui(r)}async function fp(r,e,t){const n=t;let s=e;for(let a=await n.next();!a.done;a=await n.next())s=r(await s,a.value);return s}async function*wr(r){let e=null;for(let t=await r.next();!t.done;t=await r.next())e=ti(e,t.value);yield*fn(e)}function Le(r){return wr(r[Symbol.asyncIterator]())}function K(r){return fp(async(e,t)=>(e.push(t),e),Promise.resolve([]),r)}async function vo(r){return K(r[Symbol.asyncIterator]())}function mr(r){return new it(r.height,r.time.valueOf()/1e3,0,new nt(0,"00","00"),[],new ct(new ArrayBuffer(0)),new E("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new E("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new et(new ArrayBuffer(0),new ArrayBuffer(0),0),new tt(new ArrayBuffer(0),new ArrayBuffer(0)))}async function gp(r){return new lt(mr(r),new dt(await K(X(r.transactions,async e=>new Re(e.tree.namespace,Array.from(new Uint8Array(e.tree.data)))))),new E("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions)}function Cp(r){return new Ve(mr(r),new E("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions,r.proposer)}function yp(r){const e=r.transactions,t=mr(r);return X(e,async n=>new $e(n.hash,t,n.index,new Re(n.tree.namespace,Array.from(new Uint8Array(n.tree.data)))))}async function*vp(r){const e=mr(r),t=r.transactions;yield*X(t,async n=>new Dt(new Re(n.tree.namespace,Array.from(new Uint8Array(n.tree.data))),new E("BLOCK",new Uint8Array([0,0,0,0]).buffer),new It(new E("POS",new Uint8Array([0,0,0,0]).buffer),[new Ke(new E("EMPTY",new Uint8Array([0,0,0,0]).buffer),[])]),e.height,new E("COMMIT",n.tree.data.slice(0,32))))}class bp{async getLeafFromHeight(e){const t=await this.getBlockFromHeight(e);return new yt(new gt(e,new Xe(new Qe(new E("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new E("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null),new E("LEAF",new Uint8Array([0,0,0,0]).buffer),t.header,t.payload,[],t.header.timestamp,t.header.fee_info.account),new Xe(new Qe(new E("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new E("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null))}async getTransactionFromHeightAndOffset(e,t){const n=await _e(ne(_(),e)),s=vp(n);return await hp(pr(s,t))}async getBlockSummaries(e,t){const n=ne(_(),e),s=oe(n,t-e),a=he(s,async i=>Cp(i));return await K(a)}async getBlockFromHeight(e){const t=ne(_(),e),n=await _e(t);return gp(n)}async*streamTransactionSummaries(e){const t=go(_(),a=>a.height<=e),n=wr(t);yield*Ce(n,a=>Le(yp(a)))}async getTransactionSummaryRange(e,t,n){const s=this.streamTransactionSummaries(e),a=ne(s,t),i=oe(a,n);return await K(i)}async getTransactionSummaryRangeForRollup(e,t,n,s){const a=this.streamTransactionSummaries(t),i=mo(a,w=>w.transaction.vm===e),u=ne(i,n),f=oe(u,s);return await K(f)}}function gs(r){return new Nt(r.hash,r.height,r.time,r.numTransactions,r.proposer,r.proposer,r.size,r.fees)}function bo(r){return new Mt(r.hash,r.height,r.proposer,r.numTransactions,r.size,r.time)}function Cs(r,e){return new co(new no(e.hash,e.block,!0,e.index,r.numTransactions,e.size,e.time,[],[]),[new to(e.tree.namespace,e.tree.data)])}function fr(r,e){return new rr(e.hash,[e.tree.namespace],e.block,e.time,e.index,r.numTransactions)}class xp{async getBlockDetail(e){const t=e.target,n=await(t===me?mp(_()):_e(pr(_(),t)));return new _t(gs(n))}async getBlockSummaries(e){const t=go(_(),u=>e.from===me||u.height<=e.from),n=wr(t),s=oe(n,e.limit),a=he(s,async u=>bo(u)),i=await K(a);return new Ht(i)}async getTransactionDetail(e){const t=_();if(e instanceof Ue){const n=Co(t,u=>u.height<=e.height),s=Ce(n,u=>X(u.transactions,async f=>Cs(u,f))),a=pr(Le(s),e.offset),i=await _e(a);return new tr(i)}if(e instanceof Pe){const n=Ce(t,a=>X(a.transactions,async i=>Cs(a,i))),s=await wp(n,a=>a.details.hash===e.hash);if(!s)throw new $o(e.hash);return new tr(s)}throw new N}applyFilter(e,t){return t instanceof nr?ws(e,n=>n.height==t.block):t instanceof sr?ws(e,n=>n.rollups.indexOf(t.namespace)>=0):e}async getTransactionSummaries(e){const t=_(),{target:n,filter:s}=e;if(n instanceof ar){const i=Ce(t,y=>X(y.transactions,async g=>fr(y,g))),u=Le(i),f=this.applyFilter(u,s),w=await vo(fo(f,n.limit));return new Ne(w)}if(n instanceof ir){const a=Co(t,g=>g.height<=n.height),i=Ce(a,g=>X(g.transactions,async k=>fr(g,k))),u=Le(i),f=pr(u,n.offset),w=this.applyFilter(f,s),y=await vo(fo(w,n.limit));return new Ne(y)}if(n instanceof dr){const a=_(),i=Ce(a,g=>X(g.transactions,async k=>new rr(k.hash,[k.tree.namespace],k.block,k.time,k.index,g.numTransactions))),u=Co(i,g=>g.hash!==n.hash),f=Le(u),w=this.applyFilter(f,s),y=await vo(fo(w,n.limit));return new Ne(y)}throw new N}async getExplorerOverview(){let e;const t=W(11),n=W(51),s=W(51),a=W(51),i=W(51),u=W(11);let f=0,w=0;const y=new Map;for await(const g of _()){e=gs(g),t.put(bo(g)),n.put(g.size),s.put(Math.round(g.genTime/1e3)),a.put(g.numTransactions),i.put(g.height),f++,w+=g.numTransactions;for await(const k of g.transactions){u.put(fr(g,k));const z=y.get(k.tree.namespace)||0;y.set(k.tree.namespace,z+1)}}return new Qt(new Vt(e,new Gt(Array.from(y.keys()).length,w,f),Array.from(t),Array.from(u),new Jt(Array.from(s),Array.from(n),Array.from(a),Array.from(i))))}async getSearchResult(e){const t=W(101),n=W(10),s=W(10);for await(const a of _())t.put(a);for(const a of t){a.hash.toString().startsWith(e.query)&&n.put(bo(a));for await(const i of a.transactions)i.hash.toString().startsWith(e.query)&&s.put(fr(a,i))}return new Zt(new Kt(Array.from(n),Array.from(s)))}}class Ep{async getLatestRewardBalance(){return null}}class Sp{async blockHeight(){return(await ms(_())).height}}class kp{constructor(){o(this,"availability",new bp);o(this,"status",new Sp);o(this,"explorer",new xp);o(this,"rewardState",new Ep)}async setURL(){throw new N}}function H(r,e){return async t=>(await Rp(t,e),xo(t),r.convert(await t.json()))}async function Rp(r,e){if(!r.ok){if(r.status>=500&&r.status<600){try{if(xo(r),e!==void 0){const t=await r.json();throw e.convert(t)}}catch(t){if(t instanceof b)throw t;console.error("encountered an error attempting to decode a server error from the server",t)}throw new No(r.status,r)}if(r.status>=400&&r.status<500){try{if(xo(r),e!==void 0){const t=await r.json();throw e.convert(t)}}catch(t){if(t instanceof b)throw t;console.error("encountered an error attempting to decode a client error from the server",t)}throw new Do(r.status,r)}throw new Uo(r.status,r)}}function xo(r){const e=r.headers.get("content-type");if(!e||!e.startsWith("application/json"))throw Ee.fromResponse(r,e||"undefined")}class ys{constructor(e){o(this,"availability");this.availability=e}toJSON(){return vs.encode(this)}}class Bp{convert(e){return l(e,"Availability"),new ys(Y.decode(e.Availability))}}class Ip{convert(e){return h(e,ys),{Availability:Y.encode(e.availability)}}}class Ap extends d{constructor(){super(...arguments);o(this,"encoder",new Ip);o(this,"decoder",new Bp)}}const vs=new Ap;class Dp{convert(e){return vs.decode(e).availability}}const Eo=new Dp;async function Tp(r,e){return new Ve(r.header,r.hash,r.size,r.payload.transaction_nmt.length,[e.leaf.proposer_id])}async function*Up(r,e){const t=e[Symbol.asyncIterator]();yield*X(lp(r.leaf.block_payload.transaction_nmt),async n=>{const s=r.leaf.block_payload.transaction_nmt.indexOf(n),a=await t.next();if(a.done)throw new Error("Not enough transactions");return new $e(a.value.hash,r.leaf.block_header,s,n)})}class Pp{constructor(e,t){o(this,"fetcher");o(this,"baseURL");this.fetcher=e,this.baseURL=t}getLeafFromHeight(e){const t=new URL(`leaf/${e}`,this.baseURL);return this.fetcher(t).then(H(vt.decoder,Eo))}getTransactionFromHeightAndOffset(e,t){const n=new URL(`transaction/${e}/${t}`,this.baseURL);return this.fetcher(n).then(H(Tt.decoder,Eo))}async getBlockSummaries(e,t){const n=yo(t-e),s=he(n,i=>Promise.all([this.getBlockFromHeight(e+i),this.getLeafFromHeight(e+i)])),a=he(s,([i,u])=>Tp(i,u));return await K(a)}getBlockFromHeight(e){const t=new URL(`block/${e}`,this.baseURL);return this.fetcher(t).then(H(ut.decoder,Eo))}async*streamBlocksFromHeightRange(e,t){const n=yo(e),s=he(n,i=>this.getLeafFromHeight(e-i)),a=fs(s,i=>wr(Up(i,he(yo(i.leaf.block_payload.transaction_nmt.length),u=>this.getTransactionFromHeightAndOffset(i.leaf.block_header.height,u)))));if(t===void 0){yield*a;return}yield*oe(a,t)}async getTransactionSummaryRange(e,t,n){const s=this.streamBlocksFromHeightRange(e,50),a=ne(s,t),i=oe(a,n);return await K(i)}async getTransactionSummaryRangeForRollup(e,t,n,s){const a=this.streamBlocksFromHeightRange(t,50),i=mo(a,w=>w.transaction.vm===e),u=ne(i,n),f=oe(u,s);return await K(f)}}class bs{constructor(e){o(this,"explorer");this.explorer=e}toJSON(){return Es.encode(this)}}class Np{convert(e){return l(e,"Explorer"),new bs(So.decode(e.Explorer))}}class _p{convert(e){return h(e,bs),{Explorer:So.encode(e.explorer)}}}class Lp extends d{constructor(){super(...arguments);o(this,"encoder",new _p);o(this,"decoder",new Np)}}class xs{constructor(e){o(this,"error");this.error=e}toJSON(){return So.encode(this)}}class Op{convert(e){return l(e,"error"),new xs(Y.decode(e.error))}}class Mp{convert(e){return h(e,xs),{Explorer:Y.encode(e.error)}}}class Fp extends d{constructor(){super(...arguments);o(this,"encoder",new Mp);o(this,"decoder",new Op)}}const So=new Fp,Es=new Lp;class Hp{convert(e){return Es.decode(e).explorer.error}}const ye=new Hp;class zp{constructor(e,t){o(this,"fetcher");o(this,"baseURL");this.fetcher=e,this.baseURL=t}async getBlockDetail(e){const t=new URL(`block/${e.target}`,this.baseURL);return this.fetcher(t).then(H(Lt.decoder,ye))}async getBlockSummaries(e){const t=new URL(`blocks/${e.from}/${e.limit}`,this.baseURL);return this.fetcher(t).then(H(zt.decoder,ye))}async getTransactionDetail(e){let t=null;if(e instanceof Pe?t=new URL(`transaction/hash/${e.hash}`,this.baseURL):e instanceof Ue&&(t=new URL(`transaction/${e.height}/${e.offset}`,this.baseURL)),!t)throw new N;return this.fetcher(t).then(H(io.decoder,ye))}async getTransactionSummaries(e){const{target:t,filter:n}=e;let s=t.convertURL(this.baseURL);return s=n.convertURL(s),this.fetcher(s).then(H(po.decoder,ye))}async getExplorerOverview(){const e=new URL("explorer-summary",this.baseURL);return this.fetcher(e).then(H(Xt.decoder,ye))}async getSearchResult(e){const t=new URL(`search/${encodeURIComponent(e.query)}`,this.baseURL);return this.fetcher(t).then(H(eo.decoder,ye))}}class Gp{constructor(e,t){o(this,"fetcher");o(this,"baseURL");o(this,"rewardBalanceResponseValidator",H(qe.decoder));this.fetcher=e,this.baseURL=t}getLatestRewardBalance(e){return this.fetcher(new URL(`reward-balance/latest/${e}`,this.baseURL)).then(this.rewardBalanceResponseValidator)}}class Wp{constructor(e,t){o(this,"fetcher");o(this,"baseURL");o(this,"blockHeightURL");o(this,"blockHeightResponseValidator",H(c.decoder));this.fetcher=e,this.baseURL=t,this.blockHeightURL=new URL("block-height",this.baseURL)}blockHeight(){return this.fetcher(this.blockHeightURL).then(this.blockHeightResponseValidator)}}class Ss{constructor(e,t){o(this,"availability");o(this,"status");o(this,"explorer");o(this,"rewardState");this.availability=new Pp(e,new URL("availability/",t)),this.status=new Wp(e,new URL("status/",t)),this.explorer=new zp(e,new URL("explorer/",t)),this.rewardState=new Gp(e,new URL("reward-state/",t))}async setURL(){throw new N}}class Jp{constructor(e){o(this,"service");this.service=e}blockHeight(){return this.service.blockHeight()}async handleRequest(e){switch(e.method){case"blockHeight":return this.blockHeight();default:throw new N}}}class qp{constructor(e){o(this,"service");this.service=e}async getLeafFromHeight(e){return vt.encode(await this.service.getLeafFromHeight(e))}async getTransactionFromHeightAndOffset(e,t){return Tt.encode(await this.service.getTransactionFromHeightAndOffset(e,t))}async getBlockFromHeight(e){return ut.encode(await this.service.getBlockFromHeight(e))}async getBlockSummaries(e,t){return Sd.encode(await this.service.getBlockSummaries(e,t))}async getTransactionSummaryRange(e,t,n){return An.encode(await this.service.getTransactionSummaryRange(e,t,n))}async getTransactionSummaryRangeForRollup(e,t,n,s){return An.encode(await this.service.getTransactionSummaryRangeForRollup(e,t,n,s))}async handleRequest(e){switch(e.method){case"getLeafFromHeight":return await this.getLeafFromHeight(c.decode(e.param[0]));case"getTransactionFromHeightAndOffset":return await this.getTransactionFromHeightAndOffset(c.decode(e.param[0]),c.decode(e.param[1]));case"getBlockFromHeight":return await this.getBlockFromHeight(c.decode(e.param[0]));case"getBlockSummaries":return await this.getBlockSummaries(c.decode(e.param[0]),c.decode(e.param[1]));case"getTransactionSummaryRange":return await this.getTransactionSummaryRange(c.decode(e.param[0]),c.decode(e.param[1]),c.decode(e.param[2]));case"getTransactionSummaryRangeForRollup":return await this.getTransactionSummaryRangeForRollup(c.decode(e.param[0]),c.decode(e.param[1]),c.decode(e.param[2]),c.decode(e.param[3]));default:throw new N}}}class jp{constructor(e){o(this,"service");this.service=e}async getBlockDetail(e){return Lt.encode(await this.service.getBlockDetail(e))}async getBlockSummaries(e){return zt.encode(await this.service.getBlockSummaries(e))}async getTransactionDetail(e){return io.encode(await this.service.getTransactionDetail(e))}async getTransactionSummaries(e){return po.encode(await this.service.getTransactionSummaries(e))}async getExplorerOverview(){return Xt.encode(await this.service.getExplorerOverview())}async getSearchResult(e){return eo.encode(await this.service.getSearchResult(e))}async handleRequest(e){switch(e.method){case"getBlockDetail":return await this.getBlockDetail(Hn.decode(e.param[0]));case"getBlockSummaries":return await this.getBlockSummaries($n.decode(e.param[0]));case"getTransactionDetail":return this.getTransactionDetail(es.decode(e.param[0]));case"getTransactionSummaries":return this.getTransactionSummaries(ns.decode(e.param[0]));case"getExplorerOverview":return this.getExplorerOverview();case"getSearchResult":return this.getSearchResult(Zn.decode(e.param[0]))}}}class Vp{constructor(e){o(this,"service");this.service=e}async getLatestRewardBalance(e){return qe.encode(await this.service.getLatestRewardBalance(e))}async handleRequest(e){switch(e.method){case"getLatestRewardBalance":return await this.getLatestRewardBalance(p.decode(e.param[0]))}}}class ks{constructor(e){o(this,"availability");o(this,"status");o(this,"explorer");o(this,"rewardState");this.availability=new qp(e.availability),this.status=new Jp(e.status),this.explorer=new jp(e.explorer),this.rewardState=new Vp(e.rewardState)}async handleRequest(e){switch(e.api){case"availability":return this.availability.handleRequest(e);case"status":return this.status.handleRequest(e);case"explorer":return this.explorer.handleRequest(e);case"reward-state":return this.rewardState.handleRequest(e);default:throw new N}}}const Rs=async(r,e)=>{try{return await fetch(r,e)}catch(t){throw new _o(t)}};async function $p(){try{const e=await(await fetch("/config.json")).json();if(e.hotshot_query_service_url){const t=new URL(e.hotshot_query_service_url);return new Ss(Rs,t)}}catch{}return new kp}async function Qp(){return new ks(await $p())}class Xp{constructor(e){o(this,"service");o(this,"postMessage");o(this,"requestChannel");this.postMessage=e,this.service=Qp(),this.requestChannel=qa(10),this.processRequests()}async handleProxyRequest(e){if(e.method==="set-url"){const t=e.param[0];if(!t||typeof t!="string")throw new N("Invalid URL provided");return this.service=Promise.resolve(new ks(new Ss(Rs,new URL(t)))),!0}else throw new N(`Unknown proxy method: ${e.method}`)}async processRequests(){for await(const e of this.requestChannel)try{const t=await this.service;let n;e.api==="proxy"?n=await this.handleProxyRequest(e):n=await t.handleRequest(e),this.postMessage(kn.encode(new Yr(e.requestID,n)))}catch(t){this.postMessage(Rn.encode(new Zr(e.requestID,t)))}}async handleEvent(e){const t=zi.decode(e.data);await this.requestChannel.publish(t)}}self.addEventListener("message",new Xp(self.postMessage.bind(self)))})();
