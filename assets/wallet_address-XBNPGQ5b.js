import{I as fo,T as wo,N as _o,e as bo,f as zo}from"./string-IJEBdhwx.js";import{e as Ao,h as ao}from"./array_buffer-CaGbebEx.js";import"./url-Bph6d-ow.js";import{b as Co}from"./assert-BI051aL8.js";import{u as lo}from"./base64-MELtJYLj.js";import{U as go}from"./UnimplementedError-CdIPpzwU.js";import{g as ko,m as mo,z as So,i as yo}from"./functional-BkuSRiGx.js";const ho=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];function _(t){for(let o=0;o<24;++o){const n=t[0]^t[10]^t[20]^t[30]^t[40],c=t[1]^t[11]^t[21]^t[31]^t[41],h=t[2]^t[12]^t[22]^t[32]^t[42],d=t[3]^t[13]^t[23]^t[33]^t[43],u=t[4]^t[14]^t[24]^t[34]^t[44],w=t[5]^t[15]^t[25]^t[35]^t[45],i=t[6]^t[16]^t[26]^t[36]^t[46],r=t[7]^t[17]^t[27]^t[37]^t[47],a=t[8]^t[18]^t[28]^t[38]^t[48],f=t[9]^t[19]^t[29]^t[39]^t[49];let s=a^(h<<1|d>>>31),e=f^(d<<1|h>>>31);const ft=t[0]^s,uo=t[1]^e,wt=t[10]^s,_t=t[11]^e,bt=t[20]^s,zt=t[21]^e,At=t[30]^s,Ct=t[31]^e,gt=t[40]^s,kt=t[41]^e;s=n^(u<<1|w>>>31),e=c^(w<<1|u>>>31);const mt=t[2]^s,St=t[3]^e,yt=t[12]^s,pt=t[13]^e,Et=t[22]^s,xt=t[23]^e,Nt=t[32]^s,Ot=t[33]^e,Bt=t[42]^s,Dt=t[43]^e;s=h^(i<<1|r>>>31),e=d^(r<<1|i>>>31);const It=t[4]^s,Lt=t[5]^e,Ht=t[14]^s,qt=t[15]^e,Tt=t[24]^s,Ut=t[25]^e,vt=t[34]^s,Rt=t[35]^e,Wt=t[44]^s,Ft=t[45]^e;s=u^(a<<1|f>>>31),e=w^(f<<1|a>>>31);const Pt=t[6]^s,jt=t[7]^e,Kt=t[16]^s,Jt=t[17]^e,Mt=t[26]^s,Zt=t[27]^e,Gt=t[36]^s,Qt=t[37]^e,Vt=t[46]^s,Xt=t[47]^e;s=i^(n<<1|c>>>31),e=r^(c<<1|n>>>31);const Yt=t[8]^s,$t=t[9]^e,to=t[18]^s,oo=t[19]^e,eo=t[28]^s,so=t[29]^e,no=t[38]^s,co=t[39]^e,io=t[48]^s,ro=t[49]^e,z=ft,A=uo,C=_t<<4|wt>>>28,g=wt<<4|_t>>>28,k=bt<<3|zt>>>29,m=zt<<3|bt>>>29,S=Ct<<9|At>>>23,y=At<<9|Ct>>>23,p=gt<<18|kt>>>14,E=kt<<18|gt>>>14,x=mt<<1|St>>>31,N=St<<1|mt>>>31,O=pt<<12|yt>>>20,B=yt<<12|pt>>>20,D=Et<<10|xt>>>22,I=xt<<10|Et>>>22,L=Ot<<13|Nt>>>19,H=Nt<<13|Ot>>>19,q=Bt<<2|Dt>>>30,T=Dt<<2|Bt>>>30,U=Lt<<30|It>>>2,v=It<<30|Lt>>>2,R=Ht<<6|qt>>>26,W=qt<<6|Ht>>>26,F=Ut<<11|Tt>>>21,P=Tt<<11|Ut>>>21,j=vt<<15|Rt>>>17,K=Rt<<15|vt>>>17,J=Ft<<29|Wt>>>3,M=Wt<<29|Ft>>>3,Z=Pt<<28|jt>>>4,G=jt<<28|Pt>>>4,Q=Jt<<23|Kt>>>9,V=Kt<<23|Jt>>>9,X=Mt<<25|Zt>>>7,Y=Zt<<25|Mt>>>7,$=Gt<<21|Qt>>>11,tt=Qt<<21|Gt>>>11,ot=Xt<<24|Vt>>>8,et=Vt<<24|Xt>>>8,st=Yt<<27|$t>>>5,nt=$t<<27|Yt>>>5,ct=to<<20|oo>>>12,it=oo<<20|to>>>12,rt=so<<7|eo>>>25,ht=eo<<7|so>>>25,at=no<<8|co>>>24,lt=co<<8|no>>>24,dt=io<<14|ro>>>18,ut=ro<<14|io>>>18;t[0]=z^~O&F,t[1]=A^~B&P,t[10]=Z^~ct&k,t[11]=G^~it&m,t[20]=x^~R&X,t[21]=N^~W&Y,t[30]=st^~C&D,t[31]=nt^~g&I,t[40]=U^~Q&rt,t[41]=v^~V&ht,t[2]=O^~F&$,t[3]=B^~P&tt,t[12]=ct^~k&L,t[13]=it^~m&H,t[22]=R^~X&at,t[23]=W^~Y&lt,t[32]=C^~D&j,t[33]=g^~I&K,t[42]=Q^~rt&S,t[43]=V^~ht&y,t[4]=F^~$&dt,t[5]=P^~tt&ut,t[14]=k^~L&J,t[15]=m^~H&M,t[24]=X^~at&p,t[25]=Y^~lt&E,t[34]=D^~j&ot,t[35]=I^~K&et,t[44]=rt^~S&q,t[45]=ht^~y&T,t[6]=$^~dt&z,t[7]=tt^~ut&A,t[16]=L^~J&Z,t[17]=H^~M&G,t[26]=at^~p&x,t[27]=lt^~E&N,t[36]=j^~ot&st,t[37]=K^~et&nt,t[46]=S^~q&U,t[47]=y^~T&v,t[8]=dt^~z&O,t[9]=ut^~A&B,t[18]=J^~Z&ct,t[19]=M^~G&it,t[28]=p^~x&R,t[29]=E^~N&W,t[38]=ot^~st&C,t[39]=et^~nt&g,t[48]=q^~U&Q,t[49]=T^~v&V,t[0]^=ho[o*2],t[1]^=ho[o*2+1]}}class po{state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];blockSize=0;count=0;squeezing=!1;initialize(o,n){for(let c=0;c<50;++c)this.state[c]=0;this.blockSize=o/8,this.count=0,this.squeezing=!1}absorb(o){for(let n=0;n<o.length;++n)this.state[~~(this.count/4)]^=o[n]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(_(this.state),this.count=0)}absorbLastFewBits(o){this.state[~~(this.count/4)]^=o<<8*(this.count%4),(o&128)!==0&&this.count===this.blockSize-1&&_(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),_(this.state),this.count=0,this.squeezing=!0}squeeze(o){this.squeezing||this.absorbLastFewBits(1);const n=new Uint8Array(o);for(let c=0;c<o;++c)n[c]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(_(this.state),this.count=0);return n}copy(o){for(let n=0;n<50;++n)o.state[n]=this.state[n];o.blockSize=this.blockSize,o.count=this.count,o.squeezing=this.squeezing}}class l{_rate;_capacity;_delimitedSuffix;_hashBitLength;_state;_finalized;constructor(o,n,c,h){this._rate=o,this._capacity=n,this._delimitedSuffix=c,this._hashBitLength=h,this._state=new po,this._state.initialize(o,n),this._finalized=!1}update(o){if(this._finalized)throw new Error("Digest already called");return this._state.absorb(new Uint8Array(o)),this}digest(){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);const o=this._state.squeeze(this._hashBitLength/8);return this._resetState(),lo.encode(o)}_resetState(){return this._state.initialize(this._rate,this._capacity),this}}function Eo(t){switch(t.toLowerCase()){case"keccak224":return new l(1152,448,null,224);case"keccak256":return new l(1088,512,null,256);case"keccak384":return new l(832,768,null,384);case"keccak512":return new l(576,1024,null,512);case"sha3-224":return new l(1152,448,6,224);case"sha3-256":return new l(1088,512,6,256);case"sha3-384":return new l(832,768,6,384);case"sha3-512":return new l(576,1024,6,512);default:throw new Error("invalid algorithm: "+t)}}const xo=48,No=57,Oo=97,Bo=102;class Do{convert(o){if(Co(o,ArrayBuffer),o.byteLength!==20)throw new fo(typeof o,"20-byte ArrayBuffer");const c=[...ko(Ao(new Uint8Array(o)),i=>i.split(""))],h=Eo("keccak256"),d=new TextEncoder;h.update(lo.encode(d.encode(c.join(""))));const u=new Uint8Array(h.digest());return["0x",...mo(So(yo(o.byteLength*2),c,(i,r)=>[i,r]),([i,r])=>{const a=r.charCodeAt(0);if(a>=xo&&a<=No)return r;if(a>=Oo&&a<=Bo){const f=Math.floor(i/2),s=i&1,e=u[f];return(s===0?e>>4:e&15)>7?r.toUpperCase():r}throw new go})].join("")}}const Io=new Do;class Lo{address;constructor(o){this.address=o,Object.freeze(this)}toJSON(){return b.encode(this)}toString(){return b.encode(this)}}class Ho{convert(o){return o.address.byteLength!==20?ao.encode(o.address):Io.convert(o.address)}}class qo{convert(o){return new Lo(ao.decode(o))}}class To extends wo{encoder=new Ho;decoder=new qo}const b=new To;new _o(new bo(b),new zo(b));export{Lo as W,b as w};
