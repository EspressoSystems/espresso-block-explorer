import{R as h,j as e}from"./iframe-DfHNakLQ.js";import{n as T}from"./string-elRJFjrg.js";import"./ByteSizeText-DQ4WThAc.js";import"./TransactionsPerSecondText-Bx6tqdL4.js";import"./CopyHex-bWIoTUnL.js";import{D as F}from"./DateTimeText-28NgEk6B.js";import"./FullHexText-BBYWB1AK.js";import"./HexText-d4Cv2NYH.js";import"./MoneyText-BAAZD7rs.js";import{N as l}from"./NumberText-Djfs-eB4.js";import"./RelativeTimeText-Be7tEprs.js";import"./TaggedBase64Text-9C0KbZjD.js";import{T as i}from"./Text-BU7JBOLk.js";import"./TimeText-ByVYwMyL.js";import{c as x,a as N,E as u,u as p,H as z,C as U,W as V}from"./deserializer-CDhS7Crr.js";import"./UnimplementedError-CRtBpVRh.js";import{T as c}from"./TableLabeledValue-DTFQCev0.js";import{i as k}from"./data-DH9p-Qw3.js";import{W as v,c as P}from"./TransactionDetailLoader-vIkA3Cpk.js";class E{kind;poster;blockNumber;timestamp;requestID;l1BaseFee;constructor(a,s,r,o,d=null,n=null){this.kind=a,this.poster=s,this.blockNumber=r,this.timestamp=o,this.requestID=d,this.l1BaseFee=n,Object.freeze(this)}}function q(t){const a=x(N(new Uint8Array(t).buffer,u.big));try{const s=a.deserializeUint8(),r=a.deserializeBytes(),o=a.deserializeUint64(),d=a.deserializeUint64(),n=a.deserializeBytes(),g=a.deserializeUint64();return new E(s,new v(p.encode(r)),o,d,n.length>0?p.encode(n):null,g>0n?g:null)}catch(s){return console.debug("failed to decode nitro l1 incoming message header due to error",s),null}}class O{header;l2Msg;batchGasCost;constructor(a,s,r=null){this.header=a,this.l2Msg=s,this.batchGasCost=r,Object.freeze(this)}}function H(t){const a=x(N(new Uint8Array(t).buffer,u.big));try{const s=a.deserializeBytes(),r=a.deserializeBytes(),o=q(s);return T(o),new O(o,p.encode(r),null)}catch(s){return console.error("Failed to decode Nitro L1 Incoming Message",s),null}}class M{message;delayedMessagesRead;constructor(a,s){this.message=a,this.delayedMessagesRead=s,Object.freeze(this)}}function b(t){const a=x(N(new Uint8Array(t).buffer,u.big));try{const s=a.deserializeBytes(),r=x(N(new Uint8Array(s).buffer,u.big)),o=r.deserializeBytes(),d=r.deserializeUint64(),n=H(o);return T(n),new M(n,d)}catch(s){return console.debug("Failed to decode Nitro Message with Metadata",s),null}}class j{index;length;contents;messageWithMetadata;constructor(a,s,r,o){this.index=a,this.length=s,this.contents=r,this.messageWithMetadata=o,Object.freeze(this)}}class B{signature;messages;constructor(a,s){this.signature=a,this.messages=s,Object.freeze(this)}}function D(t){const a=[];let s=0;const r=new DataView(t.buffer),o=r.getBigUint64(0,!1);s+=8;const d=t.subarray(s,s+Number(o));s+=d.byteLength;const n=t.byteLength;for(;s<n;){const g=r.getBigUint64(s,!1);s+=8;const m=r.getBigUint64(s,!1);s+=8;const W=Number(m);if(s+W>n){console.error("nitro batch data is malformed, message size exceeds data length",s,W,n);break}const L=t.subarray(s,s+Number(m));s+=Number(m);const A=b(L);a.push(new j(g,m,p.encode(L),A))}return new B(p.encode(d),a)}const R=()=>{const a=h.useContext(P).tree;if(!k(a.namespace))return e.jsx(e.Fragment,{});const s=D(new Uint8Array(a.data));return s?e.jsx(y.Provider,{value:s,children:e.jsxs(c,{className:"card--padding nitro--section",children:[e.jsx(i,{text:"Nitro Batch"}),e.jsx(C,{})]})}):e.jsx(e.Fragment,{})},y=h.createContext(null),C=()=>{const t=h.useContext(y);return t?e.jsxs(e.Fragment,{children:[e.jsxs(c,{children:[e.jsx(i,{text:"Signature"}),e.jsx(z,{data:t.signature})]}),e.jsxs(c,{children:[e.jsx(i,{text:"Number of Messages"}),e.jsx(l,{number:t.messages.length})]}),t.messages.map((a,s)=>e.jsx(_.Provider,{value:a,children:e.jsx(f.Provider,{value:s,children:e.jsx(I,{},s)})},s))]}):e.jsx(e.Fragment,{})},_=h.createContext(null),f=h.createContext(0),I=()=>{const t=h.useContext(f),a=h.useContext(_);return a?e.jsxs(c,{children:[e.jsxs(e.Fragment,{children:[e.jsx(i,{text:"Message"}),e.jsx(i,{text:"Â "}),e.jsx(l,{number:t})]}),e.jsxs(e.Fragment,{children:[e.jsxs(c,{children:[e.jsx(i,{text:"Rollup Block Number"}),e.jsx(l,{number:a.index})]}),e.jsxs(c,{children:[e.jsx(i,{text:"Length"}),e.jsx(l,{number:a.length})]}),e.jsx("br",{}),e.jsx(z,{data:a.contents}),e.jsx("br",{}),e.jsx(w,{data:a.messageWithMetadata})]})]}):null},w=({data:t})=>t?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:e.jsx(i,{text:"Nitro Message with Metadata"})}),e.jsx("br",{}),e.jsxs(c,{children:[e.jsx(i,{text:"Kind"}),e.jsx(l,{number:t.message.header.kind})]}),e.jsxs(c,{children:[e.jsx(i,{text:"Poster"}),e.jsx(U,{value:t.message.header.poster,children:e.jsx(V,{value:t.message.header.poster})})]}),e.jsxs(c,{children:[e.jsx(i,{text:"L1 Block Number"}),e.jsx(l,{number:t.message.header.blockNumber})]}),e.jsxs(c,{children:[e.jsx(i,{text:"Timestamp"}),e.jsx(F,{date:new Date(Number(t.message.header.timestamp)*1e3)})]}),e.jsxs(c,{children:[e.jsx(i,{text:"Delayed Messages Read"}),e.jsx(l,{number:t.delayedMessagesRead})]}),e.jsx("br",{}),e.jsx(i,{text:"L2 Message"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(z,{data:t.message.l2Msg})]}):e.jsx(e.Fragment,{});try{b.displayName="decodeNitroMessageWithMetadata",b.__docgenInfo={description:`decodeNitroMessageWithMetadata attempts to decode a Nitro Message with
metadata from the provided data.

This data is RLP encoded.`,displayName:"decodeNitroMessageWithMetadata",props:{}}}catch{}try{D.displayName="extractNitroBatch",D.__docgenInfo={description:"extractNitroBatch extracts a Nitro Batch from the provided payload.",displayName:"extractNitroBatch",props:{}}}catch{}try{M.displayName="NitroMessageWithMetadata",M.__docgenInfo={description:`NitroMessageWithMetadata represents a Nitro Message with metadata
that is stored as part of a batch submitted for Nitro integration projects.

This layout is adapted from the Nitro's code base:
https://github.com/EspressoSystems/nitro-espresso-integration/blob/828cc2a47358a8aac2a4931fe087f07037351164/arbos/arbostypes/messagewithmeta.go#L17-L20`,displayName:"NitroMessageWithMetadata",props:{}}}catch{}try{j.displayName="NitroMessageV0",j.__docgenInfo={description:`NitroMessageV0 represents an opaque Nitro Message that is stored as part of a
batch submitted for Nitro integration projects that are submitted to
Espresso.`,displayName:"NitroMessageV0",props:{}}}catch{}try{B.displayName="NitroBatchV0",B.__docgenInfo={description:`NitroBatchV0 represents a Nitro Batch that is submitted to Espresso.
It contains a signature and a list of NitroMessages.`,displayName:"NitroBatchV0",props:{}}}catch{}try{R.displayName="NitroBatchDetectAndDisplay",R.__docgenInfo={description:`NitroBatchDisplay is a component that displays the Nitro Batch
information successfully parsed from data stored within a
TransactionDetail.`,displayName:"NitroBatchDetectAndDisplay",props:{}}}catch{}try{y.displayName="NitroBatchContext",y.__docgenInfo={description:`NitroBatchContext is a React Context that contains the Nitro Batch
information.`,displayName:"NitroBatchContext",props:{}}}catch{}try{C.displayName="NitroBatchDisplay",C.__docgenInfo={description:`NitroBatchDisplay is a component that displays the Nitro Batch detail contained
within the NitroBatchContext.`,displayName:"NitroBatchDisplay",props:{}}}catch{}try{_.displayName="NitroMessageContext",_.__docgenInfo={description:`NitroMessageContext is a React Context that contains the Nitro Message
information.`,displayName:"NitroMessageContext",props:{}}}catch{}try{f.displayName="NitroMessageIndexContext",f.__docgenInfo={description:`NitroMessageIndexContext is a React Context that contains the index offset of
the Nitro Message within the batch.`,displayName:"NitroMessageIndexContext",props:{}}}catch{}try{I.displayName="NitroMessageDisplay",I.__docgenInfo={description:`NitroMessageDisplay is a component that displays the Nitro Message
information successfully parsed from data.`,displayName:"NitroMessageDisplay",props:{}}}catch{}try{w.displayName="NitroMessageWithMetadataDisplay",w.__docgenInfo={description:`NitroMessageWithMetadataDisplay is a component that displays the Nitro
Message with Metadata information successfully parsed from data stored
within a TransactionDetail.`,displayName:"NitroMessageWithMetadataDisplay",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"NitroMessageWithMetadata | null"}}}}}catch{}export{y as N,C as a,R as b,D as e};
