var ah=Object.defineProperty;var ih=(te,q,ce)=>q in te?ah(te,q,{enumerable:!0,configurable:!0,writable:!0,value:ce}):te[q]=ce;var o=(te,q,ce)=>ih(te,typeof q!="symbol"?q+"":q,ce);(function(){"use strict";class te{assert(){}}function q(){return new te}const ce=q();function B(r,e){ce.assert(r,e)}function dr(r,e){B(typeof r===e,`type assertion failed: expected "${e}", received "${typeof r}"`)}function Vn(r){B(r!==null,"expected a non-null value, received null")}function h(r,e){B(r instanceof e,`given value is not an instance of "${e.name}", specific type is "${typeof r=="object"&&r!==null?r.constructor.name:typeof r}"`)}class lr extends Error{constructor(t,n,s=`expected object with key: "${n}", instead found ${t}`){super(s);o(this,"key");o(this,"haveType");this.haveType=t,this.key=n,Object.freeze(this)}toJSON(){return{code:lr.name,message:this.message,have:this.haveType,key:this.key}}}class E{encode(e){return this.encoder.convert(e)}decode(e){return this.decoder.convert(e)}}class l extends E{}function jn(r){return typeof r=="boolean"}function co(r){return typeof r=="number"}function ae(r){return typeof r=="string"}function $n(r){return typeof r=="object"&&r!==null}function _(r){return r!==void 0}function Qn(r,e){return Array.isArray(r)&&r.every(e)}function Xn(r){return e=>Qn(e,r)}function M(r,e,t){return $n(r)&&e in r&&t(r[e])}function d(r,...e){if(typeof r!="object")throw new Error("expected object");if(r===null)throw new Error("received null");for(const t of e)if(!(t in r))throw new lr("object",t)}function y(r,e){if(!ae(r.code))throw new Error("code must be a string");if(r.code!==e)throw new Error(`expected code to be ${e}, got ${r.code}`)}const ao=Xn(_);class Kn{convert(e){return e}}const io=new Kn;class Yn extends E{constructor(){super(...arguments);o(this,"encoder",io);o(this,"decoder",io)}}const _e=new Yn;class P{constructor(e){o(this,"itemCodec");this.itemCodec=e}convert(e){if(!ao(e)){const t=typeof e=="object"&&e!==null?e.constructor.name:typeof e,n="array";throw new Error(`invalid array value: have "${t}", want "${n}"`)}return e.map(t=>this.itemCodec.decode(t))}}class N{constructor(e){o(this,"itemCodec");this.itemCodec=e}convert(e){return h(e,Array),e.map(t=>this.itemCodec.encode(t))}}class O extends l{constructor(t,n){super();o(this,"encoder");o(this,"decoder");this.encoder=n,this.decoder=t}}class me{constructor(e){o(this,"itemCodec");this.itemCodec=e}convert(e){return e===null?null:this.itemCodec.decode(e)}}class pe{constructor(e){o(this,"itemCodec");this.itemCodec=e}convert(e){return e===null?null:(Vn(e),this.itemCodec.encode(e))}}class we extends l{constructor(t,n){super();o(this,"encoder");o(this,"decoder");this.encoder=n,this.decoder=t}}class Zn{convert(e){if(!ae(e))throw new R(typeof e,"string");return e}}class es{convert(e){return dr(e,"string"),e}}class rs extends l{constructor(){super(...arguments);o(this,"encoder",new es);o(this,"decoder",new Zn)}}const m=new rs;new O(new P(m),new N(m)),new we(new me(m),new pe(m));class x extends Error{constructor(e){super(e)}get code(){return this.constructor.name}toJSON(){return z.convert(this)}}class U{convert(e){return h(e,x),{code:e.code,message:e.message}}}const z=new U,ts="NoCodecFoundError";class Pe extends Error{constructor(t,n=`no codec found for: "${t}"`){super(n);o(this,"codec");this.codec=t,Object.freeze(this);debugger}toJSON(){return{code:m.encode(Pe.name),message:m.encode(this.message),codec:m.encode(this.codec)}}get code(){return ts}}const ur=new Map;class os{convert(e){d(e,"code");const t=m.decode(e.code),n=ur.get(t);if(!n)throw new Pe(t);return n.decode(e)}}class ns{convert(e){const t=ur.get(e.code);if(!t)throw new Pe(e.code);return t.encode(e)}}class ss extends E{constructor(){super(...arguments);o(this,"encoder",new ns);o(this,"decoder",new os)}}const Ne=new ss;function v(r,e){ur.set(r,e)}const hr="InvalidTypeError";class R extends x{constructor(t,n,s=`invalid type: have "${t}", want "${n}"`){super(s);o(this,"have");o(this,"want");this.have=t,this.want=n,Object.freeze(this)}toJSON(){return lo.encode(this)}get code(){return hr}}class cs{convert(e){return d(e,"code","have","want","message"),y(e,hr),new R(m.decode(e.have),m.decode(e.want),m.decode(e.message))}}class as{convert(e){return h(e,R),{...z.convert(e),have:m.encode(e.have),want:m.encode(e.want)}}}class is extends l{constructor(){super(...arguments);o(this,"encoder",new as);o(this,"decoder",new cs)}}const lo=new is;v(hr,lo);class ds{convert(e){if(!co(e))throw new R(typeof e,"number");return e}}class ls{convert(e){return dr(e,"number"),e}}class us extends l{constructor(){super(...arguments);o(this,"encoder",new ls);o(this,"decoder",new ds)}}const c=new us,I=new O(new P(c),new N(c)),mr="UnimplementedError";class K extends x{constructor(e="unimplemented"){super(e),Object.freeze(this);debugger}get code(){return mr}}class hs{convert(e){return d(e,"code","message"),y(e,mr),new K(m.decode(e.message))}}class ms extends U{}class ps extends l{constructor(){super(...arguments);o(this,"encoder",new ms);o(this,"decoder",new hs)}}const ws=new ps;v(mr,ws);const pr="InvalidInputError";class L extends x{constructor(e="invalid input"){super(e),Object.freeze(this)}get code(){return pr}}class fs{convert(e){return d(e,"code","message"),y(e,pr),new L(m.decode(e.message))}}class gs extends U{}class Cs extends l{constructor(){super(...arguments);o(this,"encoder",new gs);o(this,"decoder",new fs)}}const ys=new Cs;v(pr,ys);const ie=c;class uo{constructor(e,t,n,s){o(this,"requestID");o(this,"api");o(this,"method");o(this,"param");this.requestID=e,this.api=t,this.method=n,this.param=s}toJSON(){return{requestID:this.requestID,api:this.api,method:this.method,param:this.param}}}class vs{convert(e){return d(e,"requestID","api","method","param"),new uo(ie.decode(e.requestID),m.decode(e.api),m.decode(e.method),e.param)}}class bs{convert(e){return h(e,uo),{requestID:ie.encode(e.requestID),api:m.encode(e.api),method:m.encode(e.method),param:e.param}}}class xs extends l{constructor(){super(...arguments);o(this,"encoder",new bs);o(this,"decoder",new vs)}}const Es=new xs;class ho{constructor(e){o(this,"requestID");this.requestID=e}}class wr extends ho{constructor(t,n){super(t);o(this,"response");this.response=n}toJSON(){return mo.encode(this)}}class Ss{convert(e){return d(e,"requestID","response"),new wr(ie.decode(e.requestID),e.response)}}class ks{convert(e){return h(e,wr),{requestID:ie.encode(e.requestID),response:e.response}}}class Is extends l{constructor(){super(...arguments);o(this,"encoder",new ks);o(this,"decoder",new Ss)}}const mo=new Is;class fr extends ho{constructor(t,n){super(t);o(this,"error");this.error=n}toJSON(){return po.encode(this)}}class Bs{convert(e){return d(e,"requestID","error"),new fr(ie.decode(e.requestID),Ne.decode(e.error))}}class Rs{convert(e){return h(e,fr),{requestID:ie.encode(e.requestID),error:Ne.encode(e.error)}}}class Ts extends l{constructor(){super(...arguments);o(this,"encoder",new Rs);o(this,"decoder",new Bs)}}const po=new Ts,gr="CorruptBase64InputError";class Y extends x{constructor(t,n=`corrupt input error at ${t}`){super(n);o(this,"offset");this.offset=t,Object.freeze(this)}get code(){return gr}toJSON(){return wo.encode(this)}}class As{convert(e){return d(e,"code","offset","message"),y(e,gr),new Y(c.decode(e.offset),m.decode(e.message))}}class Ds{convert(e){return h(e,Y),{...z.convert(e),offset:c.encode(e.offset),message:m.encode(e.message)}}}class _s extends l{constructor(){super(...arguments);o(this,"encoder",new Ds);o(this,"decoder",new As)}}const wo=new _s;v(gr,wo);const Cr="IncorrectBase64PaddingError";class fo extends x{constructor(e="incorrect padding"){super(e),Object.freeze(this)}get code(){return Cr}}class Ps{convert(e){return d(e,"code","message"),y(e,Cr),new fo(m.decode(e.message))}}class Ns extends U{}class Os extends l{constructor(){super(...arguments);o(this,"encoder",new Ns);o(this,"decoder",new Ps)}}const Us=new Os;v(Cr,Us);const yr="InvalidBase64AlphabetLengthError";class vr extends x{constructor(t,n=`alphabet needs to be 64 characters, received ${t}`){super(n);o(this,"length");this.length=t,Object.freeze(this)}toJSON(){return go.encode(this)}get code(){return yr}}class Ls{convert(e){return d(e,"code","length","message"),y(e,yr),new vr(c.decode(e.length),m.decode(e.message))}}class Ms{convert(e){return h(e,vr),{...z.convert(e),length:c.encode(e.length)}}}class Fs extends l{constructor(){super(...arguments);o(this,"encoder",new Ms);o(this,"decoder",new Ls)}}const go=new Fs;v(yr,go);const Hs=new TextEncoder;function Co(r){return Hs.encode(r)}const zs=new TextDecoder;function Gs(r){return zs.decode(r)}function*yo(r){yield*Co(r)}function*Js(){for(let r=0;r<256;r++)yield 255}const fe=-1,Ws=61;class ge{constructor(e,t,n=Ws,s=!1){o(this,"encodeMap");o(this,"decodeMap");o(this,"padChar");o(this,"strict");this.encodeMap=e,this.decodeMap=t,this.padChar=n,this.strict=s}static withAlphabet(e){const t=e.length;if(t!==64)throw new vr(t);const n=Array.from(yo(e)),s=Array.from(Js());for(let a=0;a<t;a++)s[n[a]]=a;return new ge(n,s)}withPadding(e){return new ge(this.encodeMap,this.decodeMap,e,this.strict)}encode(e){if(e.byteLength===0)return new ArrayBuffer(0);let t=0,n=0;const s=Math.floor(e.byteLength/3)*3,a=Math.ceil(e.byteLength/3)*4,i=new ArrayBuffer(a),u=new DataView(e),f=new DataView(i);for(;n<s;){const g=u.getUint8(n+0)<<16|u.getUint8(n+1)<<8|u.getUint8(n+2);f.setUint8(t+0,this.encodeMap[g>>18&63]),f.setUint8(t+1,this.encodeMap[g>>12&63]),f.setUint8(t+2,this.encodeMap[g>>6&63]),f.setUint8(t+3,this.encodeMap[g&63]),n+=3,t+=4}const p=e.byteLength-n;if(p===0)return i;let C=u.getUint8(n+0)<<16;switch(p===2&&(C|=u.getUint8(n+1)<<8),f.setUint8(t+0,this.encodeMap[C>>18&63]),f.setUint8(t+1,this.encodeMap[C>>12&63]),p){case 2:return f.setUint8(t+2,this.encodeMap[C>>6&63]),this.padChar!==fe?(f.setUint8(t+3,this.padChar),i.slice(0,t+4)):i.slice(0,t+3);case 1:if(this.padChar!==fe)return f.setUint8(t+2,this.padChar),f.setUint8(t+3,this.padChar),i.slice(0,t+4);break}return i.slice(0,t+2)}decode(e){const t=e.byteLength;if(t===0)return new ArrayBuffer(0);const n=new DataView(e),s=new ArrayBuffer(Math.floor(t/4*3)),a=new DataView(s),i=new ArrayBuffer(4),u=new DataView(i);let f=0,p=0,C=0,g=!1;for(;p<t&&!g;){let k=3,H=4;for(let A=0;A<4;A++){if(p===t){if(A===0)return s;if(A===1||this.padChar!==fe)throw new Y(p-A);k=A-1,H=A,g=!0;break}const W=n.getUint8(p);p++;const qn=this.decodeMap[W];if(qn!==255){u.setUint8(A,qn);continue}if(W===10||W===13){A--;continue}if(W===this.padChar){switch(A){case 0:case 1:throw new fo;case 2:for(;p<t&&(n.getUint8(p)===10||n.getUint8(p)===13);)p++;if(p===t)throw new Y(t);p++}for(;p<t&&(n.getUint8(p)===10||n.getUint8(p)===13);)p++;if(p<t)throw new Y(p);k=3,H=A,g=!0;break}throw new Y(p-1)}const T=u.getUint8(0)<<18|u.getUint8(1)<<12|u.getUint8(2)<<6|u.getUint8(3);switch(u.setUint8(2,T>>0&255),u.setUint8(1,T>>8&255),u.setUint8(0,T>>16&255),H){case 4:a.setUint8(C+2,u.getUint8(2)),u.setUint8(2,0);case 3:if(a.setUint8(C+1,u.getUint8(1)),this.strict&&u.getUint8(2)!==0)throw new Y(p-1);case 2:if(a.setUint8(C+0,u.getUint8(0)),this.strict&&(u.getUint8(1)!==0||u.getUint8(2)!==0))throw new Y(p-2)}C+=k,f+=H-1}return s.slice(0,f)}decodeString(e){return this.decode(Co(e).buffer)}encodeToString(e){return Gs(this.encode(e))}}const vo=ge.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),qs=vo.withPadding(fe),bo=ge.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),br=bo.withPadding(fe),xr="InvalidTaggedBase64EncodingError";class xo extends x{constructor(e="invalid tagged base64 encoding"){super(e),Object.freeze(this)}toJSON(){return Eo.encode(this)}get code(){return xr}}class Vs{convert(e){return d(e,"code","message"),y(e,xr),new xo(m.decode(e.message))}}class js extends U{}class $s extends l{constructor(){super(...arguments);o(this,"encoder",new js);o(this,"decoder",new Vs)}}const Eo=new $s;v(xr,Eo);class b{constructor(e,t){o(this,"tag");o(this,"data");this.tag=e,this.data=t}static fromString(e){const t=e.indexOf("~");if(t<0)throw new xo;const n=e.substring(0,t),s=br.decodeString(e.substring(t+1));return new b(n,s)}static inflate(e){return w.decode(e)}toString(){return`${this.tag}~${br.encodeToString(this.data)}`}valueOf(){return this.toString()}toJSON(){return this.toString()}}class Qs{convert(e){if(typeof e!="string")throw new R(typeof e,"string");return b.fromString(e)}}class Xs{convert(e){return h(e,b),e.toString()}}class Ks extends l{constructor(){super(...arguments);o(this,"encoder",new Xs);o(this,"decoder",new Qs)}}const w=new Ks,Er="InvalidHexStringError";class Sr extends x{constructor(e="invalid hex string"){super(e),Object.freeze(this)}get code(){return Er}}class Ys{convert(e){return d(e,"code","message"),y(e,Er),new Sr(m.decode(e.message))}}class Zs extends U{}class ec extends l{constructor(){super(...arguments);o(this,"encoder",new Zs);o(this,"decoder",new Ys)}}const rc=new ec;v(Er,rc);const kr="InvalidHexValueError";class So extends x{constructor(t,n=`invalid hex value "${t}"`){super(n);o(this,"value");this.value=t,Object.freeze(this)}toJSON(){return ko.encode(this)}get code(){return kr}}class tc{convert(e){return d(e,"code","value","message"),y(e,kr),new So(c.decode(e.value),m.decode(e.message))}}class oc{convert(e){return{...z.convert(e),value:c.encode(e.value)}}}class nc extends l{constructor(){super(...arguments);o(this,"encoder",new oc);o(this,"decoder",new tc)}}const ko=new nc;v(kr,ko);class sc{constructor(e,t){o(this,"value");o(this,"next");this.value=e,this.next=t}[Symbol.iterator](){return Io(this)}}function cc(r,e){return new sc(e,r)}function*Io(r){if(r!==null)for(let e=r;e!==null;e=e.next)yield e.value}const Ir="MissingElementError";class Ce extends x{constructor(e="missing element"){super(e),Object.freeze(this)}get code(){return Ir}}class ac{convert(e){return d(e,"code","message"),y(e,Ir),new Ce(m.decode(e.message))}}class ic extends U{}class dc extends l{constructor(){super(...arguments);o(this,"encoder",new ic);o(this,"decoder",new ac)}}const lc=new dc;v(Ir,lc);function*uc(r,e){for(let t=r.next();!t.done;t=r.next())e(t.value)&&(yield t.value)}function hc(r,e){return uc(r[Symbol.iterator](),e)}function*Bo(r,e){for(let t=r.next();!t.done;t=r.next())yield e(t.value)}function mc(r,e){return Bo(r[Symbol.iterator](),e)}function*pc(r,e){for(let t=0;t<e;t++){const n=r.next();if(n.done)return;yield n.value}}function wc(r,e){return pc(r[Symbol.iterator](),e)}function fc(r){let e;for(let t=r.next();!t.done;t=r.next())e=t.value;if(e===void 0)throw new Ce;return e}function gc(r){return fc(r[Symbol.iterator]())}function*Cc(){let r=0;for(;;)yield r++}function yc(r){return wc(Cc(),Math.ceil(r))}function*vc(r,e,t){for(let n=r.next(),s=e.next();!n.done&&!s.done;n=r.next(),s=e.next())yield t(n.value,s.value)}function bc(r,e,t){return vc(r[Symbol.iterator](),e[Symbol.iterator](),t)}function Ro(r){if(r.startsWith("0x"))return Ro(r.substring(2));if(r.length&1)throw new Sr;const e=new ArrayBuffer(r.length/2);return xc(yo(r),e),e}function xc(r,e){const t=new DataView(e);let n=0;for(;n<e.byteLength;){const s=r.next(),a=r.next();if(s.done||a.done)throw new Sr;const i=To(s.value),u=To(a.value),f=i<<4|u;t.setUint8(n,f),n++}}function To(r){if(r>=48&&r<=57)return r-48;if(r>=97&&r<=102)return r-97+10;if(r>=65&&r<=70)return r-65+10;throw new So(r)}function Ec(r){return r.toString(16).padStart(2,"0")}function*Sc(r){yield*Bo(r,Ec)}function kc(r){return Sc(r[Symbol.iterator]())}class Ic{convert(e){if(typeof e!="string")throw new R(typeof e,"string");return Ro(e)}}class Bc{convert(e){return h(e,ArrayBuffer),["0x",...kc(new Uint8Array(e))].join("")}}class Rc extends l{constructor(){super(...arguments);o(this,"encoder",new Bc);o(this,"decoder",new Ic)}}const S=new Rc;new we(new me(S),new pe(S));class Tc{constructor(e){o(this,"encoding");this.encoding=e}convert(e){if(typeof e!="string")throw new R(typeof e,"string");return this.encoding.decodeString(e)}}class Ac{constructor(e){o(this,"encoding");this.encoding=e}convert(e){return this.encoding.encodeToString(e)}}class Oe extends l{constructor(t){super();o(this,"encoder");o(this,"decoder");this.encoder=new Ac(t),this.decoder=new Tc(t)}}new Oe(br),new Oe(qs);const Ao=new Oe(bo),Do=new Oe(vo);class Br{constructor(e,t,n){o(this,"r");o(this,"s");o(this,"v");this.r=e,this.s=t,this.v=n}toJSON(){return Rr.encode(this)}}class Dc{convert(e){return d(e,"r","s","v"),new Br(S.decode(e.r),S.decode(e.s),c.decode(e.v))}}class _c{convert(e){return h(e,Br),{r:S.encode(e.r),s:S.encode(e.s),v:c.encode(e.v)}}}class Pc extends l{constructor(){super(...arguments);o(this,"encoder",new _c);o(this,"decoder",new Dc)}}const Rr=new Pc;class Tr{constructor(e,t){o(this,"account");o(this,"amount");this.account=e,this.amount=t}toJSON(){return Ar.encode(this)}}class Nc{convert(e){return d(e,"account","amount"),new Tr(S.decode(e.account),S.decode(e.amount))}}class Oc{convert(e){return h(e,Tr),{account:S.encode(e.account),amount:S.encode(e.amount)}}}class Uc extends l{constructor(){super(...arguments);o(this,"encoder",new Oc);o(this,"decoder",new Nc)}}const Ar=new Uc;class Dr{constructor(e,t,n){o(this,"number");o(this,"timestamp");o(this,"hash");this.number=e,this.timestamp=t,this.hash=n}toJSON(){return _r.encode(this)}}class Lc{convert(e){return d(e,"number","timestamp","hash"),new Dr(c.decode(e.number),m.decode(e.timestamp),m.decode(e.hash))}}class Mc{convert(e){return h(e,Dr),{number:c.encode(e.number),timestamp:m.encode(e.timestamp),hash:m.encode(e.hash)}}}class Fc extends l{constructor(){super(...arguments);o(this,"encoder",new Mc);o(this,"decoder",new Lc)}}const _r=new Fc,_o=new we(new me(_r),new pe(_r));class Pr{constructor(e){o(this,"bytes");this.bytes=e}toJSON(){return Nr.encode(this)}}class Hc{convert(e){return d(e,"bytes"),new Pr(Ao.decode(e.bytes))}}class zc{convert(e){return h(e,Pr),{bytes:Ao.encode(e.bytes)}}}class Gc extends l{constructor(){super(...arguments);o(this,"encoder",new zc);o(this,"decoder",new Hc)}}const Nr=new Gc;class Or{constructor(e,t,n,s,a,i,u,f,p,C){o(this,"height");o(this,"timestamp");o(this,"l1_head");o(this,"l1_finalized");o(this,"payload_commitment");o(this,"ns_table");o(this,"block_merkle_root");o(this,"fee_merkle_root");o(this,"builder_signature");o(this,"fee_info");this.height=e,this.timestamp=t,this.l1_head=n,this.l1_finalized=s,this.payload_commitment=a,this.ns_table=i,this.block_merkle_root=u,this.fee_merkle_root=f,this.builder_signature=p,this.fee_info=C}toJSON(){return V.encode(this)}}class Jc{convert(e){return d(e,"height","timestamp","l1_head","l1_finalized","payload_commitment","ns_table","block_merkle_root","fee_merkle_root","builder_signature","fee_info"),new Or(c.decode(e.height),c.decode(e.timestamp),c.decode(e.l1_head),_o.decode(e.l1_finalized),I.decode(e.payload_commitment),Nr.decode(e.ns_table),w.decode(e.block_merkle_root),w.decode(e.fee_merkle_root),Rr.decode(e.builder_signature),Ar.decode(e.fee_info))}}class Wc{convert(e){return h(e,Or),{height:c.encode(e.height),timestamp:c.encode(e.timestamp),l1_head:c.encode(e.l1_head),l1_finalized:_o.encode(e.l1_finalized),payload_commitment:I.encode(e.payload_commitment),ns_table:Nr.encode(e.ns_table),block_merkle_root:w.encode(e.block_merkle_root),fee_merkle_root:w.encode(e.fee_merkle_root),builder_signature:Rr.encode(e.builder_signature),fee_info:Ar.encode(e.fee_info)}}}class qc extends l{constructor(){super(...arguments);o(this,"encoder",new Wc);o(this,"decoder",new Jc)}}const V=new qc;class ye{constructor(e,t){o(this,"vm");o(this,"payload");this.vm=e,this.payload=t}toJSON(){return oe.encode(this)}}class Vc{convert(e){return d(e,"vm","payload"),new ye(c.decode(e.vm),I.decode(e.payload))}}class jc{convert(e){return h(e,ye),{vm:c.encode(e.vm),payload:I.encode(e.payload)}}}class $c extends l{constructor(){super(...arguments);o(this,"encoder",new jc);o(this,"decoder",new Vc)}}const oe=new $c,Po=new O(new P(oe),new N(oe));class Ur{constructor(e){o(this,"transaction_nmt");this.transaction_nmt=e}toJSON(){return ve.encode(this)}}class Qc{convert(e){return d(e,"transaction_nmt"),new Ur(Po.decode(e.transaction_nmt))}}class Xc{convert(e){return h(e,Ur),{transaction_nmt:Po.encode(e.transaction_nmt)}}}class Kc extends l{constructor(){super(...arguments);o(this,"encoder",new Xc);o(this,"decoder",new Qc)}}const ve=new Kc;class Lr{constructor(e,t,n,s,a){o(this,"header");o(this,"payload");o(this,"hash");o(this,"size");o(this,"numTransactions");this.header=e,this.payload=t,this.hash=n,this.size=s,this.numTransactions=a}toJSON(){return Mr.encode(this)}}class Yc{convert(e){return d(e,"header","payload","hash","size","num_transactions"),new Lr(V.decode(e.header),ve.decode(e.payload),w.decode(e.hash),c.decode(e.size),c.decode(e.num_transactions))}}class Zc{convert(e){return h(e,Lr),{header:V.encode(e.header),payload:ve.encode(e.payload),hash:w.encode(e.hash),size:c.encode(e.size),num_transactions:c.encode(e.numTransactions)}}}class ea extends E{constructor(){super(...arguments);o(this,"encoder",new Zc);o(this,"decoder",new Yc)}}const Mr=new ea;class Ue{constructor(e,t,n,s,a){o(this,"header");o(this,"hash");o(this,"size");o(this,"num_transactions");o(this,"proposer_id");this.header=e,this.hash=t,this.size=n,this.num_transactions=s,this.proposer_id=a}toJSON(){return Fr.encode(this)}}class ra{convert(e){return d(e,"header","hash","size","num_transactions","proposer_id"),new Ue(V.decode(e.header),w.decode(e.hash),c.decode(e.size),c.decode(e.num_transactions),S.decode(e.proposer_id))}}class ta{convert(e){return h(e,Ue),{header:V.encode(e.header),hash:w.encode(e.hash),size:c.encode(e.size),num_transactions:c.encode(e.num_transactions),proposer_id:S.encode(e.proposer_id)}}}class oa extends l{constructor(){super(...arguments);o(this,"encoder",new ta);o(this,"decoder",new ra)}}const Fr=new oa,na=new O(new P(Fr),new N(Fr));class Le{constructor(e,t,n,s){o(this,"hash");o(this,"header");o(this,"offset");o(this,"transaction");this.hash=e,this.header=t,this.offset=n,this.transaction=s}toJSON(){return Hr.encode(this)}}class sa{convert(e){return d(e,"hash","header","offset","transaction"),new Le(w.decode(e.hash),V.decode(e.header),c.decode(e.offset),oe.decode(e.transaction))}}class ca{convert(e){return h(e,Le),{hash:w.encode(e.hash),header:V.encode(e.header),offset:c.encode(e.offset),transaction:oe.encode(e.transaction)}}}class aa extends l{constructor(){super(...arguments);o(this,"encoder",new ca);o(this,"decoder",new sa)}}const Hr=new aa,No=new O(new P(Hr),new N(Hr));class ia{convert(e){if(!jn(e))throw new R(typeof e,"boolean");return e}}class da{convert(e){return dr(e,"boolean"),e}}class la extends l{constructor(){super(...arguments);o(this,"encoder",new da);o(this,"decoder",new ia)}}const Me=new la;class Fe{constructor(e){o(this,"leaf_commit");this.leaf_commit=e}toJSON(){return zr.encode(this)}}class ua{convert(e){return d(e,"leaf_commit"),new Fe(w.decode(e.leaf_commit))}}class ha{convert(e){return h(e,Fe),{leaf_commit:w.encode(e.leaf_commit)}}}class ma extends l{constructor(){super(...arguments);o(this,"encoder",new ha);o(this,"decoder",new ua)}}const zr=new ma;class pa{convert(e){if(!ae(e))throw new R(typeof e,"string");const t=new Date(e);if(Number.isNaN(t.valueOf()))throw new R("NaN","number");return t}}class wa{convert(e){return h(e,Date),e.toISOString()}}class fa extends l{constructor(){super(...arguments);o(this,"encoder",new wa);o(this,"decoder",new pa)}}const Z=new fa;class ga{convert(e){if(!ae(e))throw new R(typeof e,"string");return new URL(e)}}class Ca{convert(e){return e.toString()}}class ya extends l{constructor(){super(...arguments);o(this,"encoder",new Ca);o(this,"decoder",new ga)}}const Oo=new ya;new we(new me(Oo),new pe(Oo));class Uo{constructor(e,t){o(this,"width");o(this,"index");this.width=e,this.index=t}toJSON(){return Gr.encode(this)}}class va{convert(e){return d(e,"width","index"),new Uo(c.decode(e.width),c.decode(e.index))}}class ba{convert(e){return h(e,Uo),{width:c.encode(e.width),index:c.encode(e.index)}}}class xa extends l{constructor(){super(...arguments);o(this,"encoder",new ba);o(this,"decoder",new va)}}const Gr=new xa;class be{static get lsb0(){return Sa}static get msb0(){return Ia}valueOf(){return this.toString()}toJSON(){return this.toString()}}const Lo="bitvec::order::Lsb0",Mo="bitvec::order::Msb0";class Ea extends be{toString(){return Lo}}const Sa=new Ea;class ka extends be{toString(){return Mo}}const Ia=new ka;class Ba{convert(e){if(typeof e!="string")throw new R(typeof e,"string");switch(e){case Lo:return be.lsb0;case Mo:return be.msb0;default:throw new R(e,"CappuccinoAPIBitVecOrder")}}}class Ra{convert(e){return e.toString()}}class Ta extends l{constructor(){super(...arguments);o(this,"encoder",new Ra);o(this,"decoder",new Ba)}}const Fo=new Ta;class Ho{constructor(e,t,n,s){o(this,"order");o(this,"head");o(this,"bits");o(this,"data");this.order=e,this.head=t,this.bits=n,this.data=s}getBitVecIndexIterable(){return this.order===be.lsb0?new Oa(this.head.width,this.bits):new La(this.head.width,this.bits)}[Symbol.iterator](){const e=this.getBitVecIndexIterable();return mc(e,t=>Pa(this.data,t))[Symbol.iterator]()}toJSON(){return xe.encode(this)}}class Aa{convert(e){return d(e,"order","head","bits","data"),new Ho(Fo.decode(e.order),Gr.decode(e.head),c.decode(e.bits),I.decode(e.data))}}class Da{convert(e){return h(e,Ho),{order:Fo.encode(e.order),head:Gr.encode(e.head),bits:c.encode(e.bits),data:I.encode(e.data)}}}class _a extends l{constructor(){super(...arguments);o(this,"encoder",new Da);o(this,"decoder",new Aa)}}const xe=new _a;new O(new P(xe),new N(xe));function Pa(r,e){return(r[e.bucket]>>e.bitOffset&1)===1}class zo{constructor(e,t){o(this,"bucket");o(this,"bitOffset");this.bucket=e,this.bitOffset=t}}function Go(r){switch(B(r===8||r===16||r===32,"bit width should be a power of two that is supported"),r){case 8:return 3;case 16:return 4;case 32:return 5;default:throw new K}}class Na{constructor(e,t){o(this,"totalBits");o(this,"bitWidthMask");o(this,"bitWidthShift");o(this,"offset",0);this.totalBits=t;const n=Go(e);this.bitWidthMask=e-1,this.bitWidthShift=n}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,t=this.offset&this.bitWidthMask;return this.offset+=1,{done:!1,value:new zo(e,t)}}}class Oa{constructor(e,t){o(this,"bitWidth");o(this,"totalBits");this.bitWidth=e,this.totalBits=t}[Symbol.iterator](){return new Na(this.bitWidth,this.totalBits)}}class Ua{constructor(e,t){o(this,"bitWidth");o(this,"totalBits");o(this,"bitWidthMask");o(this,"bitWidthShift");o(this,"offset",0);this.bitWidth=e,this.totalBits=t;const n=Go(e);this.bitWidthMask=e-1,this.bitWidthShift=n}next(){if(this.offset>=this.totalBits)return{done:!0,value:void 0};const e=this.offset>>this.bitWidthShift,t=this.bitWidth-1-(this.offset&this.bitWidthMask);return this.offset+=1,{done:!1,value:new zo(e,t)}}}class La{constructor(e,t){o(this,"bitWidth");o(this,"totalBits");this.bitWidth=e,this.totalBits=t}[Symbol.iterator](){return new Ua(this.bitWidth,this.totalBits)}}class Jo{constructor(e,t){o(this,"signature");o(this,"bitvec");this.signature=e,this.bitvec=t}toJSON(){return Jr.encode(this)}}class Ma{convert(e){if(!ao(e)||e.length!==2)throw new R(typeof e,"Array");return new Jo(w.decode(e[0]),xe.decode(e[1]))}}class Fa{convert(e){return h(e,Jo),[w.encode(e.signature),xe.encode(e.bitvec)]}}class Ha extends l{constructor(){super(...arguments);o(this,"encoder",new Fa);o(this,"decoder",new Ma)}}const Jr=new Ha,Wo=new we(new me(Jr),new pe(Jr));class He{constructor(e,t,n,s,a,i){o(this,"data");o(this,"vote_commitment");o(this,"view_number");o(this,"signatures");o(this,"is_genesis");o(this,"_pd");this.data=e,this.vote_commitment=t,this.view_number=n,this.signatures=s,this.is_genesis=a,this._pd=i}toJSON(){return Ee.encode(this)}}class za{convert(e){return d(e,"data","vote_commitment","view_number","signatures","is_genesis","_pd"),new He(zr.decode(e.data),w.decode(e.vote_commitment),c.decode(e.view_number),Wo.decode(e.signatures),Me.decode(e.is_genesis),null)}}class Ga{convert(e){return h(e,He),{data:zr.encode(e.data),vote_commitment:w.encode(e.vote_commitment),view_number:c.encode(e.view_number),signatures:Wo.encode(e.signatures),is_genesis:Me.encode(e.is_genesis),_pd:null}}}class Ja extends l{constructor(){super(...arguments);o(this,"encoder",new Ga);o(this,"decoder",new za)}}const Ee=new Ja;class Wr{constructor(e,t,n,s,a,i,u,f){o(this,"view_number");o(this,"justify_qc");o(this,"parent_commitment");o(this,"block_header");o(this,"block_payload");o(this,"rejected");o(this,"timestamp");o(this,"proposer_id");this.view_number=e,this.justify_qc=t,this.parent_commitment=n,this.block_header=s,this.block_payload=a,this.rejected=i,this.timestamp=u,this.proposer_id=f}toJSON(){return qr.encode(this)}}class Wa{convert(e){return d(e,"view_number","justify_qc","parent_commitment","block_header","block_payload","rejected","timestamp","proposer_id"),new Wr(c.decode(e.view_number),Ee.decode(e.justify_qc),w.decode(e.parent_commitment),V.decode(e.block_header),ve.decode(e.block_payload),I.decode(e.rejected),c.decode(e.timestamp),S.decode(e.proposer_id))}}class qa{convert(e){return h(e,Wr),{view_number:c.encode(e.view_number),justify_qc:Ee.encode(e.justify_qc),parent_commitment:w.encode(e.parent_commitment),block_header:V.encode(e.block_header),block_payload:ve.encode(e.block_payload),rejected:I.encode(e.rejected),timestamp:c.encode(e.timestamp),proposer_id:S.encode(e.proposer_id)}}}class Va extends l{constructor(){super(...arguments);o(this,"encoder",new qa);o(this,"decoder",new Wa)}}const qr=new Va;class Vr{constructor(e,t){o(this,"leaf");o(this,"qc");this.leaf=e,this.qc=t}toJSON(){return jr.encode(this)}}class ja{convert(e){return d(e,"leaf","qc"),new Vr(qr.decode(e.leaf),Ee.decode(e.qc))}}class $a{convert(e){return h(e,Vr),{leaf:qr.encode(e.leaf),qc:Ee.encode(e.qc)}}}class Qa extends l{constructor(){super(...arguments);o(this,"encoder",new $a);o(this,"decoder",new ja)}}const jr=new Qa;class Se{}class $r extends Se{toJSON(){return Qr.encode(this)}}class Xa{convert(e){if(!ae(e)||e!=="Empty")throw new L;return new $r}}class Ka{convert(e){return h(e,$r),"Empty"}}class Ya extends l{constructor(){super(...arguments);o(this,"encoder",new Ka);o(this,"decoder",new Xa)}}const Qr=new Ya;class Xr extends Se{constructor(t,n,s){super();o(this,"value");o(this,"pos");o(this,"elem");this.value=t,this.pos=n,this.elem=s}toJSON(){return Kr.encode(this)}}class Za{convert(e){d(e,"Leaf");const t=e.Leaf;return d(t,"value","pos","elem"),new Xr(w.decode(t.value),w.decode(t.pos),w.decode(t.elem))}}class ei{convert(e){return h(e,Xr),{Leaf:{value:w.encode(e.value),pos:w.encode(e.pos),elem:w.encode(e.elem)}}}}class ri extends E{constructor(){super(...arguments);o(this,"encoder",new ei);o(this,"decoder",new Za)}}const Kr=new ri;class Yr extends Se{constructor(t){super();o(this,"value");this.value=t}toJSON(){return Zr.encode(this)}}class ti{convert(e){d(e,"ForgettenSubtree");const t=e.ForgettenSubtree;return d(t,"value"),new Yr(w.decode(t.value))}}class oi{convert(e){return h(e,Yr),{ForgettenSubtree:{value:w.encode(e.value)}}}}class ni extends E{constructor(){super(...arguments);o(this,"encoder",new oi);o(this,"decoder",new ti)}}const Zr=new ni;class ze extends Se{constructor(t,n){super();o(this,"value");o(this,"children");this.value=t,this.children=n}toJSON(){return et.encode(this)}}class si{convert(e){d(e,"Branch");const t=e.Branch;return d(t,"value","children"),new ze(w.decode(t.value),Ge.decode(t.children))}}class ci{convert(e){return h(e,ze),{Branch:{value:w.encode(e.value),children:Ge.encode(e.children)}}}}class ai extends l{constructor(){super(...arguments);o(this,"encoder",new ci);o(this,"decoder",new si)}}const et=new ai;class ii{convert(e){if(M(e,"Leaf",_))return Kr.decoder.convert(e);if(M(e,"Branch",_))return et.decoder.convert(e);if(M(e,"ForgettenSubtree",_))return Zr.decoder.convert(e);if(ae(e))return Qr.decoder.convert(e);throw new L}}class di{convert(e){if(h(e,Se),e instanceof Xr)return Kr.encode(e);if(e instanceof ze)return et.encode(e);if(e instanceof Yr)return Zr.encode(e);if(e instanceof $r)return Qr.encode(e);throw new L}}class li extends l{constructor(){super(...arguments);o(this,"encoder",new di);o(this,"decoder",new ii)}}const qo=new li,Ge=new O(new P(qo),new N(qo));class rt{constructor(e,t){o(this,"pos");o(this,"proof");this.pos=e,this.proof=t}toJSON(){return tt.encode(this)}}class ui{convert(e){return d(e,"pos","proof"),new rt(w.decode(e.pos),Ge.decode(e.proof))}}class hi{convert(e){return h(e,rt),{pos:w.encode(e.pos),proof:Ge.encode(e.proof)}}}class mi extends l{constructor(){super(...arguments);o(this,"encoder",new hi);o(this,"decoder",new ui)}}const tt=new mi;class ot{constructor(e,t,n,s,a){o(this,"transaction");o(this,"block_hash");o(this,"proof");o(this,"height");o(this,"hash");this.transaction=e,this.block_hash=t,this.proof=n,this.height=s,this.hash=a}toJSON(){return nt.encode(this)}}class pi{convert(e){return d(e,"transaction","block_hash","proof","height","hash"),new ot(oe.decoder.convert(e.transaction),w.decode(e.block_hash),tt.decoder.convert(e.proof),c.decode(e.height),w.decode(e.hash))}}class wi{convert(e){return h(e,ot),{transaction:oe.encode(e.transaction),block_hash:w.encode(e.block_hash),proof:tt.encode(e.proof),height:c.encode(e.height),hash:w.encode(e.hash)}}}class fi extends l{constructor(){super(...arguments);o(this,"encoder",new wi);o(this,"decoder",new pi)}}const nt=new fi,de="latest";class st{constructor(e){o(this,"target");this.target=e}static latest(){return new jo}static height(e){return new $o(e)}toJSON(){return Vo.encode(this)}}class gi{convert(e){return h(e,st),typeof e.target=="number"?c.encode(e.target):m.encode(e.target)}}class Ci{convert(e){return e===de?new jo:new $o(c.decode(e))}}class yi extends E{constructor(){super(...arguments);o(this,"encoder",new gi);o(this,"decoder",new Ci)}}const Vo=new yi;class jo extends st{constructor(){super(de)}}class $o extends st{constructor(e){super(e)}}class j{constructor(e,t,n){o(this,"significantDigitsMultiplier");this.alpha3Code=e,this.code=t,this.significantDigits=n,this.alpha3Code=e,this.code=t,this.significantDigits=n,this.significantDigitsMultiplier=BigInt(10)**BigInt(this.significantDigits)}toJSON(){return Je.encode(this)}}const Qo=new j("JPY",392,0),vi=new j("GBP",826,2),Xo=new j("USD",840,2),bi=new j("EUR",978,2),xi=new j("XXX",999,2),Ko=new j("ETH",1001,18),ct=new j("XBT",1002,8),Yo=new j("ESP",10001,18),Ei=[Qo,vi,Xo,bi,xi,Ko,ct,Yo],Si=new Map(Ei.map(r=>[r.alpha3Code,r]));class ki{convert(e){if(typeof e!="string")throw new L("CurrencyCodeDecoder: expected string");if(e==="BTC")return ct;const t=Si.get(e);if(t===void 0)throw new L(`CurrencyCodeDecoder: unknown currency: "${e}"`);return t}}class Ii{convert(e){return h(e,j),e.alpha3Code}}class Bi extends l{constructor(){super(...arguments);o(this,"decoder",new ki);o(this,"encoder",new Ii)}}const Je=new Bi;class G{constructor(e,t){this.currency=e,this.value=t,this.currency=e,this.value=t}static USD(e){return new G(Xo,BigInt(e))}static ETH(e){return new G(Ko,BigInt(e))}static ESP(e){return new G(Yo,BigInt(e))}static JPY(e){return new G(Qo,BigInt(e))}static BTC(e){return new G(ct,BigInt(e))}toString(){return We.encode(this)}toJSON(){return We.encode(this)}}function Ri(r){return r==="."||r===","||r===" "}function Ti(r,e){let t=-1;const n=r.length;for(let s=0;s<n;s++)e(r[s])&&(t=s);return t}class Ai{parseCurrencyCode(e){return Je.decode(e)}parseValue(e,t){let n=1n;t[0]==="-"&&(n=-1n,t=t.substring(1));const s=Ti(t,Ri);if(s===-1){const p=BigInt(t.replace(/\D/g,""))*e.significantDigitsMultiplier;return n*p}const a=t.substring(0,s).replace(/\D/g,""),i=t.substring(s+1).replace(/\D/g,""),u=BigInt(a)*e.significantDigitsMultiplier,f=BigInt(i)*10n**BigInt(e.significantDigits-i.length);return n*(u+f)}convert(e){if(typeof e!="string")throw new L("MonetaryValueDecoder: expected string");const t=e.indexOf(" ");if(t<=-1)throw new L("MonetaryValueDecoder: missing non-breaking space");const n=e.substring(0,t),s=e.substring(t+1);if(/^-?[\d .,]+$/.test(n)){const i=this.parseCurrencyCode(s);return new G(i,this.parseValue(i,n))}const a=this.parseCurrencyCode(n);return new G(a,this.parseValue(a,s))}}class Di{convert(e){h(e,G);const t=e.value<0n?"-":"",n=e.value<0n?-e.value:e.value,s=n%e.currency.significantDigitsMultiplier,a=n/e.currency.significantDigitsMultiplier,i=String(a),u=String(s);return/^0+$/.test(u)?`${Je.encode(e.currency)} ${t}${i}`:`${Je.encode(e.currency)} ${t}${a}.${String(s).padStart(e.currency.significantDigits,"0")}`}}class _i extends l{constructor(){super(...arguments);o(this,"decoder",new Ai);o(this,"encoder",new Di)}}const We=new _i,Zo=new O(new P(We),new N(We));class at{constructor(e,t,n,s,a,i,u,f){o(this,"hash");o(this,"height");o(this,"time");o(this,"numTransactions");o(this,"proposerID");o(this,"feeRecipient");o(this,"size");o(this,"blockReward");this.hash=e,this.height=t,this.time=n,this.numTransactions=s,this.proposerID=a,this.feeRecipient=i,this.size=u,this.blockReward=f}toJSON(){return ne.encode(this)}}class Pi{convert(e){return d(e,"hash","height","time","num_transactions","proposer_id","fee_recipient","size","block_reward"),new at(w.decode(e.hash),c.decode(e.height),Z.decode(e.time),c.decode(e.num_transactions),S.decode(e.proposer_id),S.decode(e.fee_recipient),c.decode(e.size),Zo.decode(e.block_reward))}}class Ni{convert(e){return h(e,at),{hash:w.encode(e.hash),height:c.encode(e.height),time:Z.encode(e.time),num_transactions:c.encode(e.numTransactions),proposer_id:S.encode(e.proposerID),fee_recipient:S.encode(e.feeRecipient),size:c.encode(e.size),block_reward:Zo.encode(e.blockReward)}}}class Oi extends E{constructor(){super(...arguments);o(this,"encoder",new Ni);o(this,"decoder",new Pi)}}const ne=new Oi;new O(new P(ne),new N(ne));class it{constructor(e){o(this,"blockDetail");this.blockDetail=e}toJSON(){return dt.encode(this)}}class Ui{convert(e){return d(e,"block_detail"),new it(ne.decode(e.block_detail))}}class Li{convert(e){return h(e,it),{block_detail:ne.encode(e.blockDetail)}}}class Mi extends E{constructor(){super(...arguments);o(this,"encoder",new Li);o(this,"decoder",new Ui)}}const dt=new Mi;class lt{constructor(e){o(this,"limit");this.limit=e}static latest(e){return new rn(e)}static from(e,t){return new tn(e,t)}toJSON(){return en.encode(this)}}class Fi{convert(e){return h(e,lt),co(e.from)?{from:c.encode(e.from),limit:c.encode(e.limit)}:{from:m.encode(e.from),limit:c.encode(e.limit)}}}class Hi{convert(e){return d(e,"from","limit"),e.from===de?new rn(c.decode(e.limit)):new tn(c.decode(e.from),c.decode(e.limit))}}class zi extends E{constructor(){super(...arguments);o(this,"encoder",new Fi);o(this,"decoder",new Hi)}}const en=new zi;class rn extends lt{constructor(e){super(e)}get from(){return de}}class tn extends lt{constructor(t,n){super(n);o(this,"from");this.from=t}}class ut{constructor(e,t,n,s,a,i){o(this,"hash");o(this,"height");o(this,"proposerID");o(this,"numTransactions");o(this,"size");o(this,"time");this.hash=e,this.height=t,this.proposerID=n,this.numTransactions=s,this.size=a,this.time=i}toJSON(){return ht.encode(this)}}class Gi{convert(e){return d(e,"hash","height","proposer_id","num_transactions","size","time"),new ut(w.decode(e.hash),c.decode(e.height),S.decode(e.proposer_id),c.decode(e.num_transactions),c.decode(e.size),Z.decode(e.time))}}class Ji{convert(e){return h(e,ut),{hash:w.encode(e.hash),height:c.encode(e.height),proposer_id:S.encode(e.proposerID),num_transactions:c.encode(e.numTransactions),size:c.encode(e.size),time:Z.encode(e.time)}}}class Wi extends E{constructor(){super(...arguments);o(this,"encoder",new Ji);o(this,"decoder",new Gi)}}const ht=new Wi,le=new O(new P(ht),new N(ht));class mt{constructor(e){o(this,"blockSummaries");this.blockSummaries=e}toJSON(){return pt.encode(this)}}class qi{convert(e){return d(e,"block_summaries"),new mt(le.decode(e.block_summaries))}}class Vi{convert(e){return h(e,mt),{block_summaries:le.encode(e.blockSummaries)}}}class ji extends E{constructor(){super(...arguments);o(this,"encoder",new Vi);o(this,"decoder",new qi)}}const pt=new ji;class wt{constructor(e,t,n){o(this,"rollups");o(this,"transactions");o(this,"blocks");this.rollups=e,this.transactions=t,this.blocks=n}toJSON(){return ft.encode(this)}}class $i{convert(e){return d(e,"rollups","transactions","blocks"),new wt(c.decode(e.rollups),c.decode(e.transactions),c.decode(e.blocks))}}class Qi{convert(e){return h(e,wt),{rollups:c.encode(e.rollups),transactions:c.encode(e.transactions),blocks:c.encode(e.blocks)}}}class Xi extends l{constructor(){super(...arguments);o(this,"encoder",new Qi);o(this,"decoder",new $i)}}const ft=new Xi;function qe(r){return r!==null}function Ki(r,e){return r.blockHeights-e.blockHeights}class gt{constructor(e,t,n,s){o(this,"blockTime");o(this,"blockSize");o(this,"blockTransactions");o(this,"blockHeights");const a=[],i=s.length;for(let T=0;T<i;T++)a.push({blockTime:e[T],blockSize:t[T],blockTransactions:n[T],blockHeights:s[T]});a.sort(Ki);const u=a[0].blockHeights,f=a[i-1].blockHeights,p=[],C=[],g=[],k=[];for(let T=u,A=0;T<=f;T++){const W=a[A];if(W.blockHeights!==T){p.push(null),C.push(null),g.push(null),k.push(null);continue}p.push(W.blockTime),C.push(W.blockSize),g.push(W.blockTransactions),k.push(W.blockHeights),A++}const H=Math.max(0,k.length-50);this.blockTime=p.slice(H),this.blockSize=C.slice(H),this.blockTransactions=g.slice(H),this.blockHeights=k.slice(H)}toJSON(){return Ct.encode(this)}}class Yi{convert(e){return d(e,"block_time","block_size","block_transactions","block_heights"),new gt(I.decode(e.block_time),I.decode(e.block_size),I.decode(e.block_transactions),I.decode(e.block_heights))}}class Zi{convert(e){return h(e,gt),{block_time:I.encode(e.blockTime.filter(qe)),block_size:I.encode(e.blockSize.filter(qe)),block_transactions:I.encode(e.blockTransactions.filter(qe)),block_heights:I.encode(e.blockHeights.filter(qe))}}}class ed extends l{constructor(){super(...arguments);o(this,"encoder",new Zi);o(this,"decoder",new Yi)}}const Ct=new ed,on=I;class Ve{constructor(e,t,n,s,a,i){o(this,"hash");o(this,"rollups");o(this,"height");o(this,"time");o(this,"offset");o(this,"numTransactions");this.hash=e,this.rollups=t,this.height=n,this.time=s,this.offset=a,this.numTransactions=i}toJSON(){return yt.encode(this)}}class rd{convert(e){return d(e,"hash","rollups","height","time","offset","num_transactions"),new Ve(w.decode(e.hash),on.decode(e.rollups),c.decode(e.height),Z.decode(e.time),c.decode(e.offset),c.decode(e.num_transactions))}}class td{convert(e){return h(e,Ve),{hash:w.encode(e.hash),rollups:on.encode(e.rollups),height:c.encode(e.height),time:Z.encode(e.time),offset:c.encode(e.offset),num_transactions:c.encode(e.numTransactions)}}}class od extends l{constructor(){super(...arguments);o(this,"encoder",new td);o(this,"decoder",new rd)}}const yt=new od,ue=new O(new P(yt),new N(yt));class vt{constructor(e,t,n,s,a){o(this,"latestBlock");o(this,"genesisOverview");o(this,"latestBlocks");o(this,"latestTransactions");o(this,"histograms");this.latestBlock=e,this.genesisOverview=t,this.latestBlocks=n,this.latestTransactions=s,this.histograms=a}toJSON(){return bt.encode(this)}}class nd{convert(e){return d(e,"latest_block","genesis_overview","latest_blocks","latest_transactions","histograms"),new vt(ne.decode(e.latest_block),ft.decode(e.genesis_overview),le.decode(e.latest_blocks),ue.decode(e.latest_transactions),Ct.decode(e.histograms))}}class sd{convert(e){return h(e,vt),{latest_block:ne.encode(e.latestBlock),genesis_overview:ft.encode(e.genesisOverview),latest_blocks:le.encode(e.latestBlocks),latest_transactions:ue.encode(e.latestTransactions),histograms:Ct.encode(e.histograms)}}}class cd extends l{constructor(){super(...arguments);o(this,"encoder",new sd);o(this,"decoder",new nd)}}const bt=new cd;class xt{constructor(e){o(this,"explorerSummary");this.explorerSummary=e}toJSON(){return Et.encode(this)}}class ad{convert(e){return d(e,"explorer_summary"),new xt(bt.decode(e.explorer_summary))}}class id{convert(e){return h(e,xt),{explorer_summary:bt.encode(e.explorerSummary)}}}class dd extends l{constructor(){super(...arguments);o(this,"encoder",new id);o(this,"decoder",new ad)}}const Et=new dd;class nn{constructor(e){o(this,"query");this.query=e}toJSON(){return sn.encode(this)}}class ld{convert(e){return h(e,nn),m.encode(e.query)}}class ud{convert(e){return new nn(m.decode(e))}}class hd extends E{constructor(){super(...arguments);o(this,"encoder",new ld);o(this,"decoder",new ud)}}const sn=new hd;class St{constructor(e,t){o(this,"blocks");o(this,"transactions");this.blocks=e,this.transactions=t}toJSON(){return kt.encode(this)}}class md{convert(e){return d(e,"blocks","transactions"),new St(le.decode(e.blocks),ue.decode(e.transactions))}}class pd{convert(e){return h(e,St),{blocks:le.encode(e.blocks),transactions:ue.encode(e.transactions)}}}class wd extends E{constructor(){super(...arguments);o(this,"encoder",new pd);o(this,"decoder",new md)}}const kt=new wd;class It{constructor(e){o(this,"searchResults");this.searchResults=e}toJSON(){return Bt.encode(this)}}class fd{convert(e){return d(e,"search_results"),new It(kt.decode(e.search_results))}}class gd{convert(e){return h(e,It),{search_results:kt.encode(e.searchResults)}}}class Cd extends E{constructor(){super(...arguments);o(this,"encoder",new gd);o(this,"decoder",new fd)}}const Bt=new Cd;class Rt{static heightAndOffset(e,t){return new ke(e,t)}static hash(e){return new Ie(e)}toJSON(){return cn.encode(this)}}class yd{convert(e){if(h(e,Rt),e instanceof ke)return{height:c.encode(e.height),offset:c.encode(e.offset)};if(e instanceof Ie)return{hash:w.encode(e.hash)};throw new L}}class vd{convert(e){if(M(e,"height",_)&&M(e,"offset",_))return new ke(c.decode(e.height),c.decode(e.offset));if(M(e,"hash",_))return new Ie(w.decode(e.hash));throw new L}}class bd extends l{constructor(){super(...arguments);o(this,"encoder",new yd);o(this,"decoder",new vd)}}const cn=new bd;class ke extends Rt{constructor(t,n){super();o(this,"height");o(this,"offset");this.height=t,this.offset=n}}class Ie extends Rt{constructor(t){super();o(this,"hash");this.hash=t}}const an=c;class Tt{constructor(e,t){o(this,"namespace");o(this,"payload");this.namespace=e,this.payload=t}toJSON(){return At.encode(this)}}class xd{convert(e){return d(e,"namespace","payload"),new Tt(an.decode(e.namespace),Do.decode(e.payload))}}class Ed{convert(e){return h(e,Tt),{namespace:an.encode(e.namespace),payload:Do.encode(e.payload)}}}class Sd extends l{constructor(){super(...arguments);o(this,"encoder",new Ed);o(this,"decoder",new xd)}}const At=new Sd,dn=new O(new P(At),new N(At));class Dt{constructor(e,t,n,s,a,i,u,f,p){o(this,"hash");o(this,"height");o(this,"blockConfirmed");o(this,"offset");o(this,"numTransactions");o(this,"size");o(this,"time");o(this,"sequencingFees");o(this,"feeDetails");this.hash=e,this.height=t,this.blockConfirmed=n,this.offset=s,this.numTransactions=a,this.size=i,this.time=u,this.sequencingFees=f,this.feeDetails=p}toJSON(){return _t.encode(this)}}class kd{convert(e){return d(e,"hash","height","block_confirmed","offset","num_transactions","size","time","sequencing_fees","fee_details"),new Dt(w.decode(e.hash),c.decode(e.height),Me.decode(e.block_confirmed),c.decode(e.offset),c.decode(e.num_transactions),c.decode(e.size),Z.decode(e.time),[],[])}}class Id{convert(e){return h(e,Dt),{hash:w.encode(e.hash),height:c.encode(e.height),block_confirmed:Me.encode(e.blockConfirmed),offset:c.encode(e.offset),num_transactions:c.encode(e.numTransactions),size:c.encode(e.size),time:Z.encode(e.time),sequencing_fees:[],fee_details:[]}}}class Bd extends l{constructor(){super(...arguments);o(this,"encoder",new Id);o(this,"decoder",new kd)}}const _t=new Bd;class Pt{constructor(e,t){o(this,"details");o(this,"data");this.details=e,this.data=t}toJSON(){return Nt.encode(this)}}class Rd{convert(e){return d(e,"details","data"),new Pt(_t.decode(e.details),dn.decode(e.data))}}class Td{convert(e){return h(e,Pt),{details:_t.encode(e.details),data:dn.encode(e.data)}}}class Ad extends l{constructor(){super(...arguments);o(this,"encoder",new Td);o(this,"decoder",new Rd)}}const Nt=new Ad;class je{constructor(e){o(this,"transactionDetail");this.transactionDetail=e}toJSON(){return Ot.encode(this)}}class Dd{convert(e){return d(e,"transaction_detail"),new je(Nt.decode(e.transaction_detail))}}class _d{convert(e){return h(e,je),{transaction_detail:Nt.encode(e.transactionDetail)}}}class Pd extends E{constructor(){super(...arguments);o(this,"encoder",new _d);o(this,"decoder",new Dd)}}const Ot=new Pd;class $e{constructor(){}static block(e){return new Qe(e)}static namespace(e){return new Xe(e)}static none(){return new Lt}toJSON(){return Ut.encode(this)}}class Nd{convert(e){return M(e,"block",_)?new Qe(c.decode(e.block)):M(e,"namespace",_)?new Xe(c.decode(e.namespace)):new Lt}}class Od{convert(e){if(h(e,$e),e instanceof Lt)return{};if(e instanceof Qe)return{block:c.encode(e.block)};if(e instanceof Xe)return{namespace:c.encode(e.namespace)};throw new L}}class Ud extends E{constructor(){super(...arguments);o(this,"encoder",new Od);o(this,"decoder",new Nd)}}const Ut=new Ud;class Lt extends $e{constructor(){super()}convertURL(e){return e}}class Qe extends $e{constructor(t){super();o(this,"block");this.block=t}convertURL(t){return new URL(`${t.pathname}/block/${this.block}`,t)}}class Xe extends $e{constructor(t){super();o(this,"namespace");this.namespace=t}convertURL(t){return new URL(`${t.pathname}/namespace/${this.namespace}`,t)}}class Ke{constructor(e){o(this,"limit");this.limit=e}static latest(e){return new Ye(e)}static heightAndOffset(e,t,n){return new Ze(e,t,n)}static hash(e,t){return new er(e,t)}toJSON(){return Mt.encode(this)}}class Ld{convert(e){return d(e,"limit"),M(e,"height",_)&&M(e,"offset",_)?new Ze(c.decode(e.height),c.decode(e.offset),c.decode(e.limit)):M(e,"hash",_)?new er(w.decode(e.hash),c.decode(e.limit)):new Ye(c.decode(e.limit))}}class Md{convert(e){if(h(e,Ke),e instanceof Ye)return{limit:c.encode(e.limit)};if(e instanceof Ze)return{height:c.encode(e.height),offset:c.encode(e.offset),limit:c.encode(e.limit)};if(e instanceof er)return{hash:w.encode(e.hash),limit:c.encode(e.limit)};throw new L}}class Fd extends E{constructor(){super(...arguments);o(this,"encoder",new Md);o(this,"decoder",new Ld)}}const Mt=new Fd;class Ye extends Ke{constructor(e){super(e)}convertURL(e){return new URL(`transactions/latest/${this.limit}`,e)}}class Ze extends Ke{constructor(t,n,s){super(s);o(this,"height");o(this,"offset");this.height=t,this.offset=n}convertURL(t){return new URL(`transactions/from/${this.height}/${this.offset}/${this.limit}`,t)}}class er extends Ke{constructor(t,n){super(n);o(this,"hash");this.hash=t}convertURL(t){return new URL(`transactions/hash/${this.hash}/${this.limit}`,t)}}class ln{constructor(e,t){o(this,"target");o(this,"filter");this.target=e,this.filter=t}toJSON(){return un.encode(this)}}class Hd{convert(e){return d(e,"filter","target"),new ln(Mt.decode(e.target),Ut.decode(e.filter))}}class zd{convert(e){return h(e,ln),{filter:Ut.encode(e.filter),target:Mt.encode(e.target)}}}class Gd extends E{constructor(){super(...arguments);o(this,"encoder",new zd);o(this,"decoder",new Hd)}}const un=new Gd;class Be{constructor(e){o(this,"transactionSummaries");this.transactionSummaries=e}toJSON(){return Ft.encode(this)}}class Jd{convert(e){return d(e,"transaction_summaries"),new Be(ue.decode(e.transaction_summaries))}}class Wd{convert(e){return h(e,Be),{transaction_summaries:ue.encode(e.transactionSummaries)}}}class qd extends E{constructor(){super(...arguments);o(this,"encoder",new Wd);o(this,"decoder",new Jd)}}const Ft=new qd;class F{constructor(e,t,n,s){o(this,"namespace");o(this,"name");o(this,"site");o(this,"blockExplorer");this.namespace=e,this.name=t,this.site=n,this.blockExplorer=s}}const Vd=new F(202374881,"Vienna",new URL("https://vienna.caldera.dev/"),new URL("https://vienna.calderaexplorer.xyz/")),jd=new F(202374882,"OP Stack",new URL("https://stack.optimism.io/"),new URL("https://www.blockscout.com/")),$d=new F(33914988448,"Arbitrum",new URL("https://arbitrum.io/"),new URL("https://arbiscan.io/")),Qd=new F(33914988449,"Eigen Layer",new URL("https://www.eigenlayer.xyz/"),new URL("https://www.blockscout.com/")),Xd=new F(33914988450,"Spire",new URL("https://www.spire.dev/"),new URL("https://www.blockscout.com/")),Kd=new F(33914988451,"Alt Layer",new URL("https://altlayer.io/"),new URL("https://www.blockscout.com/")),Yd=new F(33914988452,"Caldera",new URL("https://www.caldera.xyz/"),new URL("https://www.blockscout.com/")),Zd=new F(33914988453,"Vistara Labs",new URL("https://vistara.dev/"),new URL("https://www.blockscout.com/")),el=new F(33914988454,"Polygon",new URL("https://polygon.technology/"),new URL("https://www.blockscout.com/")),rl=new F(263,"Milan",new URL("https://milan.caldera.dev/"),new URL("https://milan-devnet.explorer.caldera.xyz/")),tl=new F(41234687,"Kyoto",new URL("https://example.com/"),new URL("https://kyoto-explorer.altlayer.io/")),ol=new Map([Vd,jd,$d,el,Qd,Xd,Kd,Yd,Zd,rl,tl].map(r=>[r.namespace,r])),hn=["Residential","Mobile","Enterprise","AWS","Azure","GCP"],mn=["Espresso v1.0","Espresso v1.1","Espresso v1.2","Espresso v1.3","Espresso v1.4"],pn=["Linux","Unix","Windows","MacOS"],wn=[["Espresso","https://espressosys.com/"],["BlockDaemon","https://www.blockdaemon.com/"],["Unit 410","https://unit410.com/"],["Nethermind","https://www.nethermind.io/"],["Sub7","https://sub7.xyz/"],["KudasaiJP","https://kudasai.co.jp/"],["Informal Systems","https://informal.systems/"],["P2P","https://p2p.org/"],["LinkPool","https://linkpool.com/"],["ZKV","https://zkvalidator.com/"],["Figment","https://figment.io/"]],rr=2147483648,nl=1103515245,sl=12345;class tr{constructor(e){o(this,"state");this.state=e!==void 0?e:Math.floor(Math.random()*(rr-1))}nextInt(){return this.state=(nl*this.state+sl)%rr,this.state}nextFloat(){return this.nextInt()/(rr-1)}nextRange(e,t){const n=t-e,s=this.nextInt()/rr;return e+Math.floor(s*n)}fillBytes(e){const t=new ArrayBuffer(e),n=new DataView(t);let s=0;for(;s<e-4;s+=4)n.setUint32(s,this.nextRange(0,4294967295));for(let a=s;a<e;a++)n.setUint8(a,this.nextRange(0,256));return t}}const cl=[[["Mexico City",19.4333,-99.1333,"MX"],["Guadalajara",20.6767,-103.3475,"MX"],["Monterrey",25.6667,-100.3,"MX"],["Guatemala City",14.6133,-90.5353,"GT"],["Tijuana",32.525,-117.0333,"MX"],["Ecatepec",19.6097,-99.06,"MX"],["Tegucigalpa",14.1058,-87.2047,"HN"],["León de los Aldama",21.1167,-101.6833,"MX"],["San José",9.9325,-84.08,"CR"],["Panama City",8.9833,-79.5167,"PA"],["Juárez",31.745,-106.485,"MX"],["Comayagüela",14.098,-87.21,"HN"],["Mexicali",32.6633,-115.4678,"MX"],["Nezahualcóyotl",19.4081,-99.0186,"MX"],["Managua",12.1364,-86.2514,"NI"],["Morelia",19.7683,-101.1894,"MX"],["Aguascalientes",21.876,-102.296,"MX"],["Mérida",20.97,-89.62,"MX"],["Saltillo",25.4231,-100.9919,"MX"],["Culiacán",24.8069,-107.3939,"MX"]],[["Havana",23.1367,-82.3589,"CU"],["San Juan",18.3985,-66.061,"PR"],["Santiago",19.4572,-70.6889,"DO"],["Santo Domingo",18.4667,-69.95,"DO"],["Port-au-Prince",18.5333,-72.3333,"HT"],["Santo Domingo Este",18.4855,-69.8734,"DO"],["Kingston",17.9714,-76.7931,"JM"],["Carrefour",18.5344,-72.4094,"HT"],["Santiago de Cuba",20.0217,-75.8294,"CU"],["Pétion-Ville",18.5128,-72.2864,"HT"],["Holguín",20.8869,-76.2592,"CU"],["Gonaïves",19.4456,-72.6883,"HT"],["Camagüey",21.3839,-77.9075,"CU"],["Puerto Plata",19.8,-70.6833,"DO"],["Croix-des-Bouquets",18.5761,-72.2269,"HT"],["Nassau",25.0781,-77.3386,"BS"],["Fort-de-France",14.6,-61.0667,"MQ"],["Higüey",18.6167,-68.7,"DO"],["Santa Clara",22.4069,-79.9649,"CU"],["Bayamo",20.3817,-76.6428,"CU"]],[["Cairo",30.0444,31.2358,"EG"],["Lagos",6.455,3.3841,"NG"],["Kinshasa",-4.3219,15.3119,"CD"],["Luanda",-8.8383,13.2344,"AO"],["Johannesburg",-26.2044,28.0456,"ZA"],["Dar es Salaam",-6.8161,39.2803,"TZ"],["Douala",4.05,9.7,"CM"],["Giza",29.987,31.2118,"EG"],["Abidjan",5.3167,-4.0333,"CI"],["Cape Town",-33.9253,18.4239,"ZA"],["Bamako",12.6392,-8.0028,"ML"],["Abuja",9.0667,7.4833,"NG"],["Ibadan",7.3964,3.9167,"NG"],["Addis Ababa",9.03,38.74,"ET"],["Mbuji-Mayi",-6.15,23.6,"CD"],["Mogadishu",2.0392,45.3419,"SO"],["Lusaka",-15.4167,28.2833,"ZM"],["Antananarivo",-18.91,47.525,"MG"],["Awka",6.2069,7.0678,"NG"],["Bamenda",5.9614,10.1517,"CM"]],[["Tokyo",35.6897,139.6922,"JP"],["Delhi",28.61,77.23,"IN"],["Manila",14.5958,120.9772,"PH"],["Dhaka",23.7639,90.3889,"BD"],["Moscow",55.7558,37.6172,"RU"],["Ho Chi Minh City",10.7756,106.7019,"VN"],["Xi’an",34.2611,108.9422,"CN"],["Dongguan",23.021,113.752,"CN"],["Tongshan",34.204,117.284,"CN"],["Jining",35.4151,116.5871,"CN"],["Cangzhou",38.3047,116.8387,"CN"],["Shaoyang",27.2395,111.4679,"CN"],["Dalian",38.9,121.6,"CN"],["Ankara",39.93,32.85,"TR"],["Zhangzhou",24.513,117.647,"CN"],["Changsha",28.228,112.939,"CN"],["Ürümqi",43.8225,87.6125,"CN"],["Ningbo",29.8603,121.6245,"CN"],["Suihua",46.654,126.969,"CN"],["Deyang",31.127,104.398,"CN"]],[["London",51.5072,-.1275,"GB"],["Madrid",40.4169,-3.7033,"ES"],["Berlin",52.52,13.405,"DE"],["Barcelona",41.3828,2.1769,"ES"],["Athens",37.9842,23.7281,"GR"],["Budapest",47.4925,19.0514,"HU"],["Birmingham",52.48,-1.9025,"GB"],["Stuttgart",48.7775,9.18,"DE"],["Munich",48.1375,11.575,"DE"],["Hamburg",53.55,10,"DE"],["Bucharest",44.4325,26.1039,"RO"],["Vienna",48.2083,16.3725,"AT"],["Stockholm",59.3294,18.0686,"SE"],["Minsk",53.9,27.5667,"BY"],["Warsaw",52.23,21.0111,"PL"],["Valencia",39.47,-.3764,"ES"],["Amsterdam",52.3728,4.8936,"NL"],["Copenhagen",55.6761,12.5683,"DK"],["Porto",41.1621,-8.622,"PT"],["Brussels",50.8467,4.3525,"BE"]],[["New York",40.6943,-73.9249,"US"],["Los Angeles",34.1141,-118.4068,"US"],["Chicago",41.8375,-87.6866,"US"],["Miami",25.784,-80.2101,"US"],["Dallas",32.7935,-96.7667,"US"],["Philadelphia",40.0077,-75.1339,"US"],["Atlanta",33.7628,-84.422,"US"],["Boston",42.3188,-71.0852,"US"],["Phoenix",33.5722,-112.0892,"US"],["Detroit",42.3834,-83.1024,"US"],["Seattle",47.6211,-122.3244,"US"],["San Francisco",37.7558,-122.4449,"US"],["San Diego",32.8313,-117.1222,"US"],["Minneapolis",44.9635,-93.2678,"US"],["Brooklyn",40.6501,-73.9496,"US"],["Vancouver",49.25,-123.1,"CA"],["Riverside",33.9381,-117.3949,"US"],["Baltimore",39.3051,-76.6144,"US"],["Portland",45.5371,-122.65,"US"],["Sacramento",38.5677,-121.4685,"US"]],[["Melbourne",-37.8142,144.9631,"AU"],["Sydney",-33.8678,151.21,"AU"],["Brisbane",-27.4678,153.0281,"AU"],["Perth",-31.9559,115.8606,"AU"],["Auckland",-36.8406,174.74,"NZ"],["Adelaide",-34.9275,138.6,"AU"],["Port Moresby",-9.4789,147.1494,"PG"],["Gold Coast",-28.0167,153.4,"AU"],["Cranbourne",-38.0996,145.2834,"AU"],["Christchurch",-43.531,172.6365,"NZ"],["Manukau City",-37,174.885,"NZ"],["Central Coast",-33.3,151.2,"AU"],["Wollongong",-34.4331,150.8831,"AU"],["Ipswich",-27.6144,152.7608,"AU"],["Wellington",-41.2889,174.7772,"NZ"],["Northcote",-36.8019,174.7494,"NZ"],["Hobart",-42.8806,147.325,"AU"],["Lae",-6.7303,147.0008,"PG"],["Suva",-18.1416,178.4419,"FJ"],["Nouméa",-22.2758,166.458,"NC"]],[["São Paulo",-23.55,-46.6333,"BR"],["Buenos Aires",-34.6033,-58.3817,"AR"],["Rio de Janeiro",-22.9111,-43.2056,"BR"],["Lima",-12.06,-77.0375,"PE"],["Bogotá",4.7111,-74.0722,"CO"],["Santiago",-33.4372,-70.6506,"CL"],["Belo Horizonte",-19.9167,-43.9333,"BR"],["Fortaleza",-3.7275,-38.5275,"BR"],["Santa Cruz de la Sierra",-17.7892,-63.1975,"BO"],["La Paz",-16.4958,-68.1333,"BO"],["Guayaquil",-2.19,-79.8875,"EC"],["Medellín",6.2308,-75.5906,"CO"],["Salvador",-12.9747,-38.4767,"BR"],["Caracas",10.4806,-66.9036,"VE"],["Córdoba",-31.4167,-64.1833,"AR"],["Santos",-23.9369,-46.325,"BR"],["Curitiba",-25.4297,-49.2711,"BR"],["Maracaibo",10.6333,-71.6333,"VE"],["Recife",-8.05,-34.9,"BR"],["Porto Alegre",-30.0331,-51.23,"BR"]]],fn=[0,0,5,26,28,26,9,6],al=fn.reduce((r,e)=>r+e,0),il=fn.reduce((r,e)=>{const t=r[r.length-1]??0;return r.push(t+e),r},[]),dl=Array.from(bc(il,cl,(r,e)=>[r,e])),or=new Date,Ht=new Date(or.getFullYear(),or.getMonth(),or.getDate()).valueOf();async function*ll(){}function ul(){const r=new Uint8Array(new Array(20).map(()=>0)).buffer;return{hash:new b("BLOCK",r),height:0,time:new Date(0),genTime:0,transactions:ll(),numTransactions:0,proposer:r,size:0,fees:[]}}async function*hl(r){let e=1,t=Ht;for(;t<or.valueOf();){const n=Math.floor(r.nextFloat()*14*1e3);yield ml(new tr(e+n),e,t,t+n),t+=n,e++}}async function*D(r=new tr(Ht)){yield ul(),yield*hl(r)}function ml(r,e,t,n){const s=Math.floor(r.nextRange(0,5)),a=r.nextRange(0,Cn.length),i=Cn[a];return{hash:new b("BLOCK",r.fillBytes(32)),height:e,genTime:n-t,time:new Date(n),numTransactions:s,transactions:wl(new tr(e+t),e,t,n,s),proposer:i.address,size:Math.floor(r.nextFloat()*1024*s)+8,fees:[G.ESP(BigInt(r.nextRange(0,1e9)*1e3))]}}const gn=Array.from(ol.keys());function pl(r){return r.nextFloat()>.98?1:gn[r.nextRange(0,gn.length)]}async function*wl(r,e,t,n,s){const a=(n-t)/s;for(let i=0,u=t;u<n;u+=a,i++){const f=pl(r),p=Math.floor(1024*r.nextFloat());yield{block:e,index:i,size:p,hash:new b("COMMIT",r.fillBytes(32)),time:new Date(u),sender:new b("PUBKEY",r.fillBytes(32)),tree:{namespace:f,data:r.fillBytes(p)}}}}function fl(r){const e=r.nextRange(0,al),t=hc(dl,([i])=>i<=e),[,n]=gc(t),s=r.nextRange(0,n.length);return n[s]}function gl(r){const e=r.nextRange(0,wn.length);return wn[e]}function Cl(r){const e=r.nextRange(0,pn.length);return pn[e]}function yl(r){const e=r.nextRange(0,mn.length);return mn[e]}function vl(r){const e=r.nextRange(0,hn.length);return hn[e]}function bl(r){const[e,t]=gl(r),[,n,s,a]=fl(r),i=Cl(r),u=yl(r),f=vl(r);return{pubkey:new b("PUBKEY",r.fillBytes(32)),name:`${e} Node ${a} ${r.nextRange(0,100)}`,address:r.fillBytes(32),company:{name:e,website:t},location:{coords:[n,s],country:a},operatingSystem:i,networkType:f,nodeType:u}}function*xl(){const r=new tr(Ht),e=r.nextRange(50,150);for(let t=0;t<e;t++)yield bl(r)}const Cn=Array.from(xl());async function*El(r){for(let e=r.next();!e.done;e=r.next())yield e.value}function Sl(r){return El(r[Symbol.iterator]())}async function*kl(r){for(let e=await r.next();!e.done;e=await r.next())yield e.value}async function*zt(r,e){for(let t=await r.next();!t.done;t=await r.next())e(t.value)&&(yield t.value)}function yn(r,e){return zt(r[Symbol.asyncIterator](),e)}async function*se(r,e){for(let t=await r.next();!t.done;t=await r.next())yield await e(t.value)}function $(r,e){return se(r[Symbol.asyncIterator](),e)}async function*ee(r,e){for(let t=0;t<e;t++){const n=await r.next();if(n.done)return;yield n.value}}function Gt(r,e){return ee(r[Symbol.asyncIterator](),e)}async function*Jt(r,e){for(let t=await r.next();!t.done&&e(t.value);t=await r.next())yield t.value}function Wt(r,e){return Jt(r[Symbol.asyncIterator](),e)}async function*re(r,e){for(let t=0;t<e;t++)if((await r.next()).done)return;yield*kl(r)}function nr(r,e){return re(r[Symbol.asyncIterator](),e)}async function Re(r){const e=await r.next();if(e.done)throw new Ce;return e.value}async function Il(r){return Re(r[Symbol.asyncIterator]())}async function Bl(r,e){for(let t=await r.next();!t.done;t=await r.next())if(e(t.value))return t.value}async function Rl(r,e){return Bl(r[Symbol.asyncIterator](),e)}async function vn(r){let e;for(let t=await r.next();!t.done;t=await r.next())e=t.value;if(e===void 0)throw new Ce;return e}async function Tl(r){return vn(r[Symbol.asyncIterator]())}async function*bn(r,e){for(let t=await r.next();!t.done;t=await r.next())yield*e(t.value)}function he(r,e){return bn(r[Symbol.asyncIterator](),e)}async function*qt(r){yield*yc(r)}async function Al(r,e,t){const n=t;let s=e;for(let a=await n.next();!a.done;a=await n.next())s=r(await s,a.value);return s}async function*sr(r){let e=null;for(let t=await r.next();!t.done;t=await r.next())e=cc(e,t.value);yield*Io(e)}function Te(r){return sr(r[Symbol.asyncIterator]())}function Q(r){return Al(async(e,t)=>(e.push(t),e),Promise.resolve([]),r)}async function Vt(r){return Q(r[Symbol.asyncIterator]())}function cr(r){return new Or(r.height,r.time.valueOf()/1e3,0,new Dr(0,"00","00"),[],new Pr(new ArrayBuffer(0)),new b("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new b("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new Br(new ArrayBuffer(0),new ArrayBuffer(0),0),new Tr(new ArrayBuffer(0),new ArrayBuffer(0)))}async function Dl(r){return new Lr(cr(r),new Ur(await Q($(r.transactions,async e=>new ye(e.tree.namespace,Array.from(new Uint8Array(e.tree.data)))))),new b("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions)}function _l(r){return new Ue(cr(r),new b("BLOCK",new Uint8Array([0,0,0,0]).buffer),r.size,r.numTransactions,r.proposer)}function Pl(r){const e=r.transactions,t=cr(r);return $(e,async n=>new Le(n.hash,t,n.index,new ye(n.tree.namespace,Array.from(new Uint8Array(n.tree.data)))))}async function*Nl(r){const e=cr(r),t=r.transactions;yield*$(t,async n=>new ot(new ye(n.tree.namespace,Array.from(new Uint8Array(n.tree.data))),new b("BLOCK",new Uint8Array([0,0,0,0]).buffer),new rt(new b("POS",new Uint8Array([0,0,0,0]).buffer),[new ze(new b("EMPTY",new Uint8Array([0,0,0,0]).buffer),[])]),e.height,new b("COMMIT",n.tree.data.slice(0,32))))}class Ol{async getLeafFromHeight(e){const t=await this.getBlockFromHeight(e);return new Vr(new Wr(e,new He(new Fe(new b("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new b("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null),new b("LEAF",new Uint8Array([0,0,0,0]).buffer),t.header,t.payload,[],t.header.timestamp,t.header.fee_info.account),new He(new Fe(new b("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new b("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null))}async getTransactionFromHeightAndOffset(e,t){const n=await Re(re(D(),e)),s=Nl(n);return await Il(nr(s,t))}async getBlockSummaries(e,t){const n=re(D(),e),s=ee(n,t-e),a=se(s,async i=>_l(i));return await Q(a)}async getBlockFromHeight(e){const t=re(D(),e),n=await Re(t);return Dl(n)}async*streamTransactionSummaries(e){const t=Jt(D(),a=>a.height<=e),n=sr(t);yield*he(n,a=>Te(Pl(a)))}async getTransactionSummaryRange(e,t,n){const s=this.streamTransactionSummaries(e),a=re(s,t),i=ee(a,n);return await Q(i)}async getTransactionSummaryRangeForRollup(e,t,n,s){const a=this.streamTransactionSummaries(t),i=zt(a,p=>p.transaction.vm===e),u=re(i,n),f=ee(u,s);return await Q(f)}}class Ae extends x{constructor(t,n,s){super(s);o(this,"response");o(this,"status");this.status=t,this.response=n}toJSON(){return xn.convert(this)}}class ar{convert(e){return h(e,Ae),{...z.convert(e),status:e.status}}}const xn=new ar,jt="BadResponseClientError";class En extends Ae{constructor(e,t,n="bad server response: client error"){super(e,t,n),Object.freeze(this)}get code(){return jt}toJSON(){return Sn.encode(this)}}class Ul{convert(e){return d(e,"code","message","status"),y(e,jt),new En(Number(e.status),null,m.decode(e.message))}}class Ll extends ar{}class Ml extends l{constructor(){super(...arguments);o(this,"encoder",new Ll);o(this,"decoder",new Ul)}}const Sn=new Ml;v(jt,Sn);const $t="BadResponseError";class kn extends Ae{constructor(e,t,n="bad server response"){super(e,t,n),Object.freeze(this)}get code(){return $t}toJSON(){return In.encode(this)}}class Fl{convert(e){return d(e,"code","message","status"),y(e,$t),new kn(Number(e.status),null,m.decode(e.message))}}class Hl extends ar{}class zl extends l{constructor(){super(...arguments);o(this,"encoder",new Hl);o(this,"decoder",new Fl)}}const In=new zl;v($t,In);class Bn extends Ae{constructor(e,t,n="bad server response: server error"){super(e,t,n),Object.freeze(this)}get code(){return Qt}}const Qt="BadResponseServerError";class Gl{convert(e){return d(e,"code","message","status"),y(e,Qt),new Bn(Number(e.status),null,m.decode(e.message))}}class Jl extends ar{}class Wl extends l{constructor(){super(...arguments);o(this,"encoder",new Jl);o(this,"decoder",new Gl)}}const ql=new Wl;v(Qt,ql);const Xt="ChannelClosedError";class Vl extends x{constructor(e="channel closed"){super(e),Object.freeze(this)}get code(){return Xt}}class jl{convert(e){return d(e,"code","message"),y(e,Xt),new Vl(m.decode(e.message))}}class $l extends U{}class Ql extends l{constructor(){super(...arguments);o(this,"encoder",new $l);o(this,"decoder",new jl)}}const Xl=new Ql;v(Xt,Xl);class Rn extends x{constructor(e="completer has already been completed"){super(e),Object.freeze(this)}get code(){return Tn}}const Tn="CompleterAlreadyCompletedError";class Kl{convert(e){return d(e,"code","message"),y(e,Tn),new Rn(m.decode(e.message))}}class Yl extends U{}class Zl extends l{constructor(){super(...arguments);o(this,"encoder",new Yl);o(this,"decoder",new Kl)}}const eu=new Zl;v(Rn.name,eu);const Kt="FetchError";class ru extends x{constructor(t,n=`fetch failed: ${String(t)}`){super(n);o(this,"cause");this.cause=t,Object.freeze(this)}get code(){return Kt}}class tu{convert(e){return d(e,"code","message"),y(e,Kt),new ru({},m.decode(e.message))}}class ou extends U{}class nu extends l{constructor(){super(...arguments);o(this,"encoder",new ou);o(this,"decoder",new tu)}}const su=new nu;v(Kt,su);const Yt="InvalidStringValueError";class An extends x{constructor(t,n,s=`invalid string value: have "${t}", want "${n}"`){super(s);o(this,"have");o(this,"want");this.have=t,this.want=n,Object.freeze(this)}toJSON(){return Dn.encode(this)}get code(){return Yt}}class cu{convert(e){return d(e,"code","have","want","message"),y(e,Yt),new An(m.decode(e.have),m.decode(e.want),m.decode(e.message))}}class au{convert(e){return h(e,An),{...z.convert(e),have:m.encode(e.have),want:m.encode(e.want)}}}class iu extends l{constructor(){super(...arguments);o(this,"encoder",new au);o(this,"decoder",new cu)}}const Dn=new iu;v(Yt,Dn);const Zt="NoCompleterFoundForRequestID";class _n extends x{constructor(t,n=`no completer found for request id "${t}"`){super(n);o(this,"requestID");this.requestID=t,Object.freeze(this)}toJSON(){return Pn.encode(this)}get code(){return Zt}}class du{convert(e){return d(e,"code","requestID","message"),y(e,Zt),new _n(_e.decode(e.requestID),m.decode(e.message))}}class lu{convert(e){return h(e,_n),{...z.convert(e),requestID:_e.encode(e.requestID)}}}class uu extends l{constructor(){super(...arguments);o(this,"encoder",new lu);o(this,"decoder",new du)}}const Pn=new uu;v(Zt,Pn);const eo="NoURLProvidedError";class hu extends x{constructor(e="no url provided"){super(e),Object.freeze(this)}get code(){return eo}}class mu{convert(e){return d(e,"code","message"),y(e,eo),new hu(m.decode(e.message))}}class pu extends U{}class wu extends l{constructor(){super(...arguments);o(this,"encoder",new pu);o(this,"decoder",new mu)}}const fu=new wu;v(eo,fu);const ro="NotFoundError";class Nn extends x{constructor(t,n=`Not Found: ${t}`){super(n);o(this,"key");this.key=t,Object.freeze(this)}get code(){return ro}}class On{constructor(e){o(this,"codec");this.codec=e}convert(e){return d(e,"code","key"),y(e,ro),new Nn(this.codec.decode(e.key))}}class Un{constructor(e){o(this,"codec");this.codec=e}convert(e){return{...z.convert(e),key:this.codec.encode(e.key)}}}class Ln extends l{constructor(t,n){super();o(this,"encoder");o(this,"decoder");this.encoder=t,this.decoder=n}}new Ln(new Un(m),new On(m));const gu=new Ln(new Un(_e),new On(_e));v(ro,gu);const Mn="ResponseContentTypeIsNotApplicationJSONError";class De extends Ae{constructor(t,n,s,a="response content type is not application/json"){super(n,s,a);o(this,"haveHeaderType");this.haveHeaderType=t,Object.freeze(this)}static fromResponse(t,n){return new De(t.headers.get("content-type")??"undefined",t.status,t,n)}toJSON(){return Fn.encode(this)}get code(){return Mn}}class Cu{convert(e){return d(e,"code","status","have","want","message"),y(e,Mn),new De(m.decode(e.code),c.decode(e.status),null,m.decode(e.message))}}class yu{convert(e){return{...xn.convert(e),have:m.encode(e.haveHeaderType),want:m.encode("application/json")}}}class vu extends l{constructor(){super(...arguments);o(this,"encoder",new yu);o(this,"decoder",new Cu)}}const Fn=new vu;v(De.name,Fn);const to="WebWorkerErrorResponse";class bu extends x{constructor(t,n="error in web worker"){super(n);o(this,"error");this.error=t,Object.freeze(this)}toJSON(){return Hn.encode(this)}get code(){return to}}class xu{convert(e){return d(e,"code","error","message"),y(e,to),new bu(Ne.decode(e.error),m.decode(e.message))}}class Eu{convert(e){return{...z.convert(e),error:Ne.encode(e.error)}}}class Su extends l{constructor(){super(...arguments);o(this,"encoder",new Eu);o(this,"decoder",new xu)}}const Hn=new Su;v(to,Hn);var oo=(r=>(r[r.success=0]="success",r[r.full=1]="full",r[r.failed=2]="failed",r))(oo||{});class ku{getFromEmpty(){}}class Iu{getFromEmpty(){return null}}class Bu{getFromEmpty(){throw new Ce}}const Ru={returnNull:new Iu,returnUndefined:new ku,throwMissingElement:new Bu};class Tu{constructor(e){o(this,"maxSize");B(!Number.isNaN(e),"maxSize must not be NaN"),B(Number.isInteger(e),"maxSize must be an integer"),B(e>0,"maxSize must be greater than 0"),this.maxSize=e}nextIndex(e){return B(e>=0,"index must be greater than or equal to 0"),(e+1)%this.maxSize}}class Au{constructor(e){o(this,"preComputedSizeMinus1");B(!Number.isNaN(e),"maxSize must not be NaN"),B(Number.isInteger(e),"maxSize must be an integer"),B(e>0,"maxSize must be greater than 0"),B(zn(e),"maxSize must be a power of two"),this.preComputedSizeMinus1=e-1}nextIndex(e){return B(e>=0,"index must be greater than or equal to 0"),e+1&this.preComputedSizeMinus1}}function zn(r){return(r&r-1)===0}const no="BufferFullError";class Gn extends x{constructor(e="buffer full"){super(e),Object.freeze(this)}get code(){return no}}class Du{convert(e){return d(e,"code","message"),y(e,no),new Gn(m.decode(e.message))}}class _u extends U{}class Pu extends l{constructor(){super(...arguments);o(this,"encoder",new _u);o(this,"decoder",new Du)}}const Nu=new Pu;v(no,Nu);class Ou{putToFull(e,t){return e.get(),e.put(t)}}class Uu{putToFull(){return oo.full}}class Lu{putToFull(){throw new Gn}}const Mu={overwriteOldest:new Ou,returnFull:new Uu,throw:new Lu};function Fu(r){return zn(r)?new Au(r):new Tu(r)}class Hu{constructor(e,t,n){o(this,"readIndex",0);o(this,"writeIndex",0);o(this,"buffer");o(this,"nextIndex");o(this,"getOnEmpty");o(this,"putOnFull");B(!Number.isNaN(e),"maxSize must not be NaN"),this.buffer=new Array(e),this.nextIndex=Fu(e),this.getOnEmpty=t,this.putOnFull=n}get maxSize(){return this.buffer.length}get length(){return this.writeIndex<this.readIndex?this.writeIndex+this.maxSize-this.readIndex:this.writeIndex-this.readIndex}put(e){const t=this.nextIndex.nextIndex(this.writeIndex);return t===this.readIndex?this.putOnFull.putToFull(this,e):(this.buffer[this.writeIndex]=e,this.writeIndex=t,oo.success)}get(){if(this.readIndex===this.writeIndex)return this.getOnEmpty.getFromEmpty(this);const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),e}[Symbol.iterator](){return new zu(this)}immutableIterable(){return{[Symbol.iterator]:()=>this.immutableIterator()}}immutableIterator(){return new Gu(this.readIndex,this.writeIndex,this.buffer,this.nextIndex)}}class zu{constructor(e){o(this,"buffer");this.buffer=e}next(){const e=this.buffer.get();return e==null?{value:void 0,done:!0}:{value:e,done:!1}}}class Gu{constructor(e,t,n,s){o(this,"readIndex");o(this,"writeIndex");o(this,"buffer");o(this,"nextIndex");this.readIndex=e,this.writeIndex=t,this.buffer=n,this.nextIndex=s}next(){if(this.readIndex===this.writeIndex)return{value:void 0,done:!0};const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),{value:e,done:!1}}}function X(r=32,e=Ru.returnUndefined,t=Mu.overwriteOldest){return new Hu(r,e,t)}function Jn(r){return new at(r.hash,r.height,r.time,r.numTransactions,r.proposer,r.proposer,r.size,r.fees)}function so(r){return new ut(r.hash,r.height,r.proposer,r.numTransactions,r.size,r.time)}function Wn(r,e){return new Pt(new Dt(e.hash,e.block,!0,e.index,r.numTransactions,e.size,e.time,[],[]),[new Tt(e.tree.namespace,e.tree.data)])}function ir(r,e){return new Ve(e.hash,[e.tree.namespace],e.block,e.time,e.index,r.numTransactions)}class Ju{async getBlockDetail(e){const t=e.target,n=await(t===de?Tl(D()):Re(nr(D(),t)));return new it(Jn(n))}async getBlockSummaries(e){const t=Jt(D(),u=>e.from===de||u.height<=e.from),n=sr(t),s=ee(n,e.limit),a=se(s,async u=>so(u)),i=await Q(a);return new mt(i)}async getTransactionDetail(e){const t=D();if(e instanceof ke){const n=Wt(t,u=>u.height<=e.height),s=he(n,u=>$(u.transactions,async f=>Wn(u,f))),a=nr(Te(s),e.offset),i=await Re(a);return new je(i)}if(e instanceof Ie){const n=he(t,a=>$(a.transactions,async i=>Wn(a,i))),s=await Rl(n,a=>a.details.hash===e.hash);if(!s)throw new Nn(e.hash);return new je(s)}throw new K}applyFilter(e,t){return t instanceof Qe?yn(e,n=>n.height==t.block):t instanceof Xe?yn(e,n=>n.rollups.indexOf(t.namespace)>=0):e}async getTransactionSummaries(e){const t=D(),{target:n,filter:s}=e;if(n instanceof Ye){const i=he(t,C=>$(C.transactions,async g=>ir(C,g))),u=Te(i),f=this.applyFilter(u,s),p=await Vt(Gt(f,n.limit));return new Be(p)}if(n instanceof Ze){const a=Wt(t,g=>g.height<=n.height),i=he(a,g=>$(g.transactions,async k=>ir(g,k))),u=Te(i),f=nr(u,n.offset),p=this.applyFilter(f,s),C=await Vt(Gt(p,n.limit));return new Be(C)}if(n instanceof er){const a=D(),i=he(a,g=>$(g.transactions,async k=>new Ve(k.hash,[k.tree.namespace],k.block,k.time,k.index,g.numTransactions))),u=Wt(i,g=>g.hash!==n.hash),f=Te(u),p=this.applyFilter(f,s),C=await Vt(Gt(p,n.limit));return new Be(C)}throw new K}async getExplorerOverview(){let e;const t=X(11),n=X(51),s=X(51),a=X(51),i=X(51),u=X(11);let f=0,p=0;const C=new Map;for await(const g of D()){e=Jn(g),t.put(so(g)),n.put(g.size),s.put(Math.round(g.genTime/1e3)),a.put(g.numTransactions),i.put(g.height),f++,p+=g.numTransactions;for await(const k of g.transactions){u.put(ir(g,k));const H=C.get(k.tree.namespace)||0;C.set(k.tree.namespace,H+1)}}return new xt(new vt(e,new wt(Array.from(C.keys()).length,p,f),Array.from(t),Array.from(u),new gt(Array.from(s),Array.from(n),Array.from(a),Array.from(i))))}async getSearchResult(e){const t=X(101),n=X(10),s=X(10);for await(const a of D())t.put(a);for(const a of t){a.hash.toString().startsWith(e.query)&&n.put(so(a));for await(const i of a.transactions)i.hash.toString().startsWith(e.query)&&s.put(ir(a,i))}return new It(new St(Array.from(n),Array.from(s)))}}class Wu{async blockHeight(){return(await vn(D())).height}}class qu{constructor(){o(this,"availability",new Ol);o(this,"status",new Wu);o(this,"explorer",new Ju)}}function J(r){return async e=>(Vu(e),ju(e),r.convert(await e.json()))}function Vu(r){if(!r.ok)throw r.status>=500&&r.status<600?new Bn(r.status,r):r.status>=400&&r.status<500?new En(r.status,r):new kn(r.status,r)}function ju(r){const e=r.headers.get("content-type");if(!e||!e.startsWith("application/json"))throw De.fromResponse(r,e||"undefined")}async function $u(r,e){return new Ue(r.header,r.hash,r.size,r.payload.transaction_nmt.length,e.leaf.proposer_id)}async function*Qu(r,e){const t=e[Symbol.asyncIterator]();yield*$(Sl(r.leaf.block_payload.transaction_nmt),async n=>{const s=r.leaf.block_payload.transaction_nmt.indexOf(n),a=await t.next();if(a.done)throw new Error("Not enough transactions");return new Le(a.value.hash,r.leaf.block_header,s,n)})}class Xu{constructor(e,t){o(this,"fetcher");o(this,"baseURL");this.fetcher=e,this.baseURL=t}getLeafFromHeight(e){const t=new URL(`leaf/${e}`,this.baseURL);return this.fetcher(t.toString()).then(J(jr.decoder))}getTransactionFromHeightAndOffset(e,t){const n=new URL(`transaction/${e}/${t}`,this.baseURL);return this.fetcher(n.toString()).then(J(nt.decoder))}async getBlockSummaries(e,t){const n=qt(t-e),s=se(n,i=>Promise.all([this.getBlockFromHeight(e+i),this.getLeafFromHeight(e+i)])),a=se(s,([i,u])=>$u(i,u));return await Q(a)}getBlockFromHeight(e){const t=new URL(`block/${e}`,this.baseURL);return this.fetcher(t.toString()).then(J(Mr.decoder))}async*streamBlocksFromHeightRange(e,t){const n=qt(e),s=se(n,i=>this.getLeafFromHeight(e-i)),a=bn(s,i=>sr(Qu(i,se(qt(i.leaf.block_payload.transaction_nmt.length),u=>this.getTransactionFromHeightAndOffset(i.leaf.block_header.height,u)))));if(t===void 0){yield*a;return}yield*ee(a,t)}async getTransactionSummaryRange(e,t,n){const s=this.streamBlocksFromHeightRange(e,50),a=re(s,t),i=ee(a,n);return await Q(i)}async getTransactionSummaryRangeForRollup(e,t,n,s){const a=this.streamBlocksFromHeightRange(t,50),i=zt(a,p=>p.transaction.vm===e),u=re(i,n),f=ee(u,s);return await Q(f)}}class Ku{constructor(e,t){o(this,"fetcher");o(this,"baseURL");this.fetcher=e,this.baseURL=t}async getBlockDetail(e){const t=new URL(`block/${e.target}`,this.baseURL);return this.fetcher(t.toString()).then(J(dt.decoder))}async getBlockSummaries(e){const t=new URL(`blocks/${e.from}/${e.limit}`,this.baseURL);return this.fetcher(t.toString()).then(J(pt.decoder))}async getTransactionDetail(e){let t=null;if(e instanceof Ie?t=new URL(`transaction/hash/${e.hash}`,this.baseURL):e instanceof ke&&(t=new URL(`transaction/${e.height}/${e.offset}`,this.baseURL)),!t)throw new K;return this.fetcher(t.toString()).then(J(Ot.decoder))}async getTransactionSummaries(e){const{target:t,filter:n}=e;let s=t.convertURL(this.baseURL);return s=n.convertURL(s),this.fetcher(s.toString()).then(J(Ft.decoder))}async getExplorerOverview(){const e=new URL("explorer-summary",this.baseURL);return this.fetcher(e.toString()).then(J(Et.decoder))}async getSearchResult(e){const t=new URL(`search/${encodeURIComponent(e.query)}`,this.baseURL);return this.fetcher(t.toString()).then(J(Bt.decoder))}}class Yu{constructor(e,t){o(this,"fetcher");o(this,"baseURL");o(this,"blockHeightURL");o(this,"blockHeightResponseValidator",J(c.decoder));this.fetcher=e,this.baseURL=t,this.blockHeightURL=new URL("block-height",this.baseURL)}blockHeight(){return this.fetcher(this.blockHeightURL).then(this.blockHeightResponseValidator)}}class Zu{constructor(e,t){o(this,"availability");o(this,"status");o(this,"explorer");this.availability=new Xu(e,new URL("availability/",t)),this.status=new Yu(e,new URL("status/",t)),this.explorer=new Ku(e,new URL("explorer/",t))}}class eh{constructor(e){o(this,"service");this.service=e}blockHeight(){return this.service.blockHeight()}async handleRequest(e){switch(e.method){case"blockHeight":return this.blockHeight();default:throw new K}}}class rh{constructor(e){o(this,"service");this.service=e}async getLeafFromHeight(e){return jr.encode(await this.service.getLeafFromHeight(e))}async getTransactionFromHeightAndOffset(e,t){return nt.encode(await this.service.getTransactionFromHeightAndOffset(e,t))}async getBlockFromHeight(e){return Mr.encode(await this.service.getBlockFromHeight(e))}async getBlockSummaries(e,t){return na.encode(await this.service.getBlockSummaries(e,t))}async getTransactionSummaryRange(e,t,n){return No.encode(await this.service.getTransactionSummaryRange(e,t,n))}async getTransactionSummaryRangeForRollup(e,t,n,s){return No.encode(await this.service.getTransactionSummaryRangeForRollup(e,t,n,s))}async handleRequest(e){switch(e.method){case"getLeafFromHeight":return await this.getLeafFromHeight(c.decode(e.param[0]));case"getTransactionFromHeightAndOffset":return await this.getTransactionFromHeightAndOffset(c.decode(e.param[0]),c.decode(e.param[1]));case"getBlockFromHeight":return await this.getBlockFromHeight(c.decode(e.param[0]));case"getBlockSummaries":return await this.getBlockSummaries(c.decode(e.param[0]),c.decode(e.param[1]));case"getTransactionSummaryRange":return await this.getTransactionSummaryRange(c.decode(e.param[0]),c.decode(e.param[1]),c.decode(e.param[2]));case"getTransactionSummaryRangeForRollup":return await this.getTransactionSummaryRangeForRollup(c.decode(e.param[0]),c.decode(e.param[1]),c.decode(e.param[2]),c.decode(e.param[3]));default:throw new K}}}class th{constructor(e){o(this,"service");this.service=e}async getBlockDetail(e){return dt.encode(await this.service.getBlockDetail(e))}async getBlockSummaries(e){return pt.encode(await this.service.getBlockSummaries(e))}async getTransactionDetail(e){return Ot.encode(await this.service.getTransactionDetail(e))}async getTransactionSummaries(e){return Ft.encode(await this.service.getTransactionSummaries(e))}async getExplorerOverview(){return Et.encode(await this.service.getExplorerOverview())}async getSearchResult(e){return Bt.encode(await this.service.getSearchResult(e))}async handleRequest(e){switch(e.method){case"getBlockDetail":return await this.getBlockDetail(Vo.decode(e.param[0]));case"getBlockSummaries":return await this.getBlockSummaries(en.decode(e.param[0]));case"getTransactionDetail":return this.getTransactionDetail(cn.decode(e.param[0]));case"getTransactionSummaries":return this.getTransactionSummaries(un.decode(e.param[0]));case"getExplorerOverview":return this.getExplorerOverview();case"getSearchResult":return this.getSearchResult(sn.decode(e.param[0]))}}}class oh{constructor(e){o(this,"availability");o(this,"status");o(this,"explorer");this.availability=new rh(e.availability),this.status=new eh(e.status),this.explorer=new th(e.explorer)}async handleRequest(e){switch(e.api){case"availability":return this.availability.handleRequest(e);case"status":return this.status.handleRequest(e);case"explorer":return this.explorer.handleRequest(e);default:throw new K}}}async function nh(){try{const e=await(await fetch("/config.json")).json();if(e.hotshot_query_service_url){const t=new URL(e.hotshot_query_service_url);return new Zu(fetch.bind(self),t)}}catch{}return new qu}async function sh(){return new oh(await nh())}class ch{constructor(e){o(this,"service");o(this,"postMessage");this.postMessage=e,this.service=sh()}async handleEvent(e){const t=Es.decode(e.data);try{const s=await(await this.service).handleRequest(t);this.postMessage(mo.encode(new wr(t.requestID,s)))}catch(n){this.postMessage(po.encode(new fr(t.requestID,n)))}}}self.addEventListener("message",new ch(self.postMessage.bind(self)))})();
