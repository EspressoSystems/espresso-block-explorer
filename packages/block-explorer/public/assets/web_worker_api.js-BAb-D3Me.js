var gi=Object.defineProperty;var yi=(v,u,y)=>u in v?gi(v,u,{enumerable:!0,configurable:!0,writable:!0,value:y}):v[u]=y;var n=(v,u,y)=>(yi(v,typeof u!="symbol"?u+"":u,y),y);(function(){"use strict";class v extends Error{constructor(e){super(e)}toJSON(){return{name:this.constructor.name,message:this.message}}}class u extends v{constructor(e="invalid input"){super(e)}}class y{encode(e){return this.encoder.convert(e)}decode(e){return this.decoder.convert(e)}}class p extends y{}function sn(t){return typeof t=="boolean"}function Ot(t){return typeof t=="number"}function J(t){return typeof t=="string"}function an(t){return typeof t=="object"&&t!==null}function s(t){return t!==void 0}function dn(t,e){return Array.isArray(t)&&t.every(e)}function ln(t){return e=>dn(e,t)}function c(t,e,r){return an(t)&&e in t&&r(t[e])}const Be=ln(s);class B{constructor(e){n(this,"itemCodec");this.itemCodec=e}convert(e){if(!Be(e))throw new u;return e.map(r=>this.itemCodec.decode(r))}}class A{constructor(e){n(this,"itemCodec");this.itemCodec=e}convert(e){return e.map(r=>this.itemCodec.encode(r))}}class _ extends p{constructor(r,o){super();n(this,"encoder");n(this,"decoder");this.encoder=o,this.decoder=r}}class un{convert(e){if(!Ot(e))throw new u;return e}}class hn{convert(e){return e}}class wn extends p{constructor(){super(...arguments);n(this,"encoder",new hn);n(this,"decoder",new un)}}const i=new wn,S=new _(new B(i),new A(i));class mn extends v{constructor(e="no url provided"){super(e)}}class $ extends v{constructor(e="unimplemented"){super(e),Object.freeze(this);debugger}}class pn{convert(e){if(!J(e))throw new u;return e}}class fn{convert(e){return e}}class gn extends p{constructor(){super(...arguments);n(this,"encoder",new fn);n(this,"decoder",new pn)}}const T=new gn;new _(new B(T),new A(T));const j=i;class yn{constructor(e,r,o,a){n(this,"requestID");n(this,"api");n(this,"method");n(this,"param");this.requestID=e,this.api=r,this.method=o,this.param=a}toJSON(){return{requestID:this.requestID,api:this.api,method:this.method,param:this.param}}}class Cn{convert(e){if(!c(e,"requestID",s)||!c(e,"api",s)||!c(e,"method",s)||!c(e,"param",s))throw new u;return new yn(j.decode(e.requestID),T.decode(e.api),T.decode(e.method),e.param)}}class vn{convert(e){return{requestID:j.encode(e.requestID),api:T.encode(e.api),method:T.encode(e.method),param:e.param}}}class xn extends p{constructor(){super(...arguments);n(this,"encoder",new vn);n(this,"decoder",new Cn)}}const bn=new xn;class Ut{constructor(e){n(this,"requestID");this.requestID=e}}class Lt extends Ut{constructor(r,o){super(r);n(this,"response");this.response=o}toJSON(){return Nt.encode(this)}}class Sn{convert(e){if(!c(e,"requestID",s)||!c(e,"response",s))throw new u;return new Lt(j.decode(e.requestID),e.response)}}class kn{convert(e){return{requestID:j.encode(e.requestID),response:e.response}}}class En extends p{constructor(){super(...arguments);n(this,"encoder",new kn);n(this,"decoder",new Sn)}}const Nt=new En;class Ft extends Ut{constructor(r,o){super(r);n(this,"error");this.error=o}toJSON(){return Mt.encode(this)}}class Tn{convert(e){if(!c(e,"requestID",s)||!c(e,"error",s))throw new u;return new Ft(j.decode(e.requestID),e.error)}}class Rn{convert(e){return{requestID:j.encode(e.requestID),error:e.error}}}class In extends p{constructor(){super(...arguments);n(this,"encoder",new Rn);n(this,"decoder",new Tn)}}const Mt=new In;class V extends v{constructor(r,o=`corrupt input error at ${r}`){super(o);n(this,"offset");this.offset=r,Object.freeze(this)}toJSON(){return{...super.toJSON(),offset:this.offset}}}class Bn extends v{constructor(e="incorrect padding"){super(e),Object.freeze(this)}}class An extends v{constructor(r,o=`alphabet needs to be 64 characters, received ${r}`){super(o);n(this,"length");this.length=r,Object.freeze(this)}toJSON(){return{...super.toJSON(),length:this.length}}}const _n=new TextEncoder;function Gt(t){return _n.encode(t)}const Dn=new TextDecoder;function Pn(t){return Dn.decode(t)}function*Ht(t){yield*Gt(t)}function*On(){for(let t=0;t<256;t++)yield 255}const Z=-1,Un=61;class ee{constructor(e,r,o=Un,a=!1){n(this,"encodeMap");n(this,"decodeMap");n(this,"padChar");n(this,"strict");this.encodeMap=e,this.decodeMap=r,this.padChar=o,this.strict=a}static withAlphabet(e){const r=e.length;if(r!==64)throw new An(r);const o=Array.from(Ht(e)),a=Array.from(On());for(let d=0;d<r;d++)a[o[d]]=d;return new ee(o,a)}withPadding(e){return new ee(this.encodeMap,this.decodeMap,e,this.strict)}encode(e){if(e.byteLength===0)return new ArrayBuffer(0);let r=0,o=0;const a=Math.floor(e.byteLength/3)*3,d=Math.ceil(e.byteLength/3)*4,l=new ArrayBuffer(d),h=new DataView(e),f=new DataView(l);for(;o<a;){const g=h.getUint8(o+0)<<16|h.getUint8(o+1)<<8|h.getUint8(o+2);f.setUint8(r+0,this.encodeMap[g>>18&63]),f.setUint8(r+1,this.encodeMap[g>>12&63]),f.setUint8(r+2,this.encodeMap[g>>6&63]),f.setUint8(r+3,this.encodeMap[g&63]),o+=3,r+=4}const m=e.byteLength-o;if(m===0)return l;let C=h.getUint8(o+0)<<16;switch(m===2&&(C|=h.getUint8(o+1)<<8),f.setUint8(r+0,this.encodeMap[C>>18&63]),f.setUint8(r+1,this.encodeMap[C>>12&63]),m){case 2:return f.setUint8(r+2,this.encodeMap[C>>6&63]),this.padChar!==Z?(f.setUint8(r+3,this.padChar),l.slice(0,r+4)):l.slice(0,r+3);case 1:if(this.padChar!==Z)return f.setUint8(r+2,this.padChar),f.setUint8(r+3,this.padChar),l.slice(0,r+4);break}return l.slice(0,r+2)}decode(e){const r=e.byteLength;if(r===0)return new ArrayBuffer(0);const o=new DataView(e),a=new ArrayBuffer(Math.floor(r/4*3)),d=new DataView(a),l=new ArrayBuffer(4),h=new DataView(l);let f=0,m=0,C=0,g=!1;for(;m<r&&!g;){let k=3,X=4;for(let I=0;I<4;I++){if(m===r){if(I===0)return a;if(I===1||this.padChar!==Z)throw new V(m-I);k=I-1,X=I,g=!0;break}const Ie=o.getUint8(m);m++;const cn=this.decodeMap[Ie];if(cn!==255){h.setUint8(I,cn);continue}if(Ie===10||Ie===13){I--;continue}if(Ie===this.padChar){switch(I){case 0:case 1:throw new Bn;case 2:for(;m<r&&(o.getUint8(m)===10||o.getUint8(m)===13);)m++;if(m===r)throw new V(r);m++}for(;m<r&&(o.getUint8(m)===10||o.getUint8(m)===13);)m++;if(m<r)throw new V(m);k=3,X=I,g=!0;break}throw new V(m-1)}const Pt=h.getUint8(0)<<18|h.getUint8(1)<<12|h.getUint8(2)<<6|h.getUint8(3);switch(h.setUint8(2,Pt>>0&255),h.setUint8(1,Pt>>8&255),h.setUint8(0,Pt>>16&255),X){case 4:d.setUint8(C+2,h.getUint8(2)),h.setUint8(2,0);case 3:if(d.setUint8(C+1,h.getUint8(1)),this.strict&&h.getUint8(2)!==0)throw new V(m-1);case 2:if(d.setUint8(C+0,h.getUint8(0)),this.strict&&(h.getUint8(1)!==0||h.getUint8(2)!==0))throw new V(m-2)}C+=k,f+=X-1}return a.slice(0,f)}decodeString(e){return this.decode(Gt(e).buffer)}encodeToString(e){return Pn(this.encode(e))}}const zt=ee.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Ln=zt.withPadding(Z),Jt=ee.withAlphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Ae=Jt.withPadding(Z);class _e extends v{constructor(e="invalid tagged base64 encoding"){super(e),Object.freeze(this)}toJSON(){return{name:_e.name,message:this.message}}}class ie extends v{constructor(r,o,a=`invalid type: have "${r}", want "${o}"`){super(a);n(this,"have");n(this,"want");this.have=r,this.want=o,Object.freeze(this)}toJSON(){return{...super.toJSON(),have:this.have,want:this.want}}}class x{constructor(e,r){n(this,"tag");n(this,"data");this.tag=e,this.data=r}static fromString(e){const r=e.indexOf("~");if(r<0)throw new _e;const o=e.substring(0,r),a=Ae.decodeString(e.substring(r+1));return new x(o,a)}static inflate(e){return w.decode(e)}toString(){return`${this.tag}~${Ae.encodeToString(this.data)}`}valueOf(){return this.toString()}toJSON(){return this.toString()}}class Nn{convert(e){if(typeof e!="string")throw new ie(typeof e,"string");return x.fromString(e)}}class Fn{convert(e){return e.toString()}}class Mn extends p{constructor(){super(...arguments);n(this,"encoder",new Fn);n(this,"decoder",new Nn)}}const w=new Mn;class qt extends v{constructor(e="invalid hex string"){super(e),Object.freeze(this)}}class Gn extends v{constructor(r,o=`invalid hex value "${r}"`){super(o);n(this,"value");this.value=r,Object.freeze(this)}toJSON(){return{...super.toJSON(),value:this.value}}}class Hn{constructor(e,r){n(this,"value");n(this,"next");this.value=e,this.next=r}[Symbol.iterator](){return Wt(this)}}function zn(t,e){return new Hn(e,t)}function*Wt(t){if(t!==null)for(let e=t;e!==null;e=e.next)yield e.value}class $t extends v{constructor(e="missing element"){super(e),Object.freeze(this)}}function*Jn(t,e){for(let r=t.next();!r.done;r=t.next())yield e(r.value)}function*qn(t,e){for(let r=0,o=t.next();r<e&&!o.done;r++,o=t.next())yield o.value}function Wn(t,e){return qn(t[Symbol.iterator](),e)}function*$n(){let t=0;for(;;)yield t++}function jn(t){return Wn($n(),Math.ceil(t))}function jt(t){if(t.startsWith("0x"))return jt(t.substring(2));if(t.length&1)throw new qt;const e=new ArrayBuffer(t.length/2);return Vn(Ht(t),e),e}function Vn(t,e){const r=new DataView(e);let o=0;for(;o<e.byteLength;){const a=t.next(),d=t.next();if(a.done||d.done)throw new qt;const l=Vt(a.value),h=Vt(d.value),f=l<<4|h;r.setUint8(o,f),o++}}function Vt(t){if(t>=48&&t<=57)return t-48;if(t>=97&&t<=102)return t-97+10;if(t>=65&&t<=70)return t-65+10;throw new Gn(t)}function Qn(t){return t.toString(16).padStart(2,"0")}function*Yn(t){yield*Jn(t,Qn)}function Kn(t){return Yn(t[Symbol.iterator]())}class Xn{convert(e){if(typeof e!="string")throw new ie(typeof e,"string");return jt(e)}}class Zn{convert(e){return["0x",...Kn(new Uint8Array(e))].join("")}}class eo extends p{constructor(){super(...arguments);n(this,"encoder",new Zn);n(this,"decoder",new Xn)}}const b=new eo;class to{constructor(e){n(this,"encoding");this.encoding=e}convert(e){if(typeof e!="string")throw new ie(typeof e,"string");return this.encoding.decodeString(e)}}class ro{constructor(e){n(this,"encoding");this.encoding=e}convert(e){return this.encoding.encodeToString(e)}}class de extends p{constructor(r){super();n(this,"encoder");n(this,"decoder");this.encoder=new ro(r),this.decoder=new to(r)}}new de(Ae),new de(Ln);const Qt=new de(Jt),Yt=new de(zt);class Kt{constructor(e,r,o){n(this,"r");n(this,"s");n(this,"v");this.r=e,this.s=r,this.v=o}toJSON(){return De.encode(this)}}class no{convert(e){if(!c(e,"r",s)||!c(e,"s",s)||!c(e,"v",s))throw new u;return new Kt(b.decode(e.r),b.decode(e.s),i.decode(e.v))}}class oo{convert(e){return{r:b.encode(e.r),s:b.encode(e.s),v:i.encode(e.v)}}}class co extends p{constructor(){super(...arguments);n(this,"encoder",new oo);n(this,"decoder",new no)}}const De=new co;class Xt{constructor(e,r){n(this,"account");n(this,"amount");this.account=e,this.amount=r}toJSON(){return Pe.encode(this)}}class so{convert(e){if(!c(e,"account",s)||!c(e,"amount",s))throw new u;return new Xt(b.decode(e.account),b.decode(e.amount))}}class ao{convert(e){return{account:b.encode(e.account),amount:b.encode(e.amount)}}}class io extends p{constructor(){super(...arguments);n(this,"encoder",new ao);n(this,"decoder",new so)}}const Pe=new io;class Zt{constructor(e){n(this,"itemCodec");this.itemCodec=e}convert(e){return e===null?null:this.itemCodec.decode(e)}}class er{constructor(e){n(this,"itemCodec");this.itemCodec=e}convert(e){return e===null?null:this.itemCodec.encode(e)}}class tr extends p{constructor(r,o){super();n(this,"encoder");n(this,"decoder");this.encoder=o,this.decoder=r}}class rr{constructor(e,r,o){n(this,"number");n(this,"timestamp");n(this,"hash");this.number=e,this.timestamp=r,this.hash=o}toJSON(){return Oe.encode(this)}}class lo{convert(e){if(!c(e,"number",Ot)||!c(e,"timestamp",J)||!c(e,"hash",J))throw new u;return new rr(e.number,e.timestamp,e.hash)}}class uo{convert(e){return{number:e.number,timestamp:e.timestamp,hash:e.hash}}}class ho extends p{constructor(){super(...arguments);n(this,"encoder",new uo);n(this,"decoder",new lo)}}const Oe=new ho,nr=new tr(new Zt(Oe),new er(Oe));class or{constructor(e){n(this,"bytes");this.bytes=e}toJSON(){return Ue.encode(this)}}class wo{convert(e){if(!c(e,"bytes",J))throw new u;return new or(Qt.decode(e.bytes))}}class mo{convert(e){return{bytes:Qt.encode(e.bytes)}}}class po extends p{constructor(){super(...arguments);n(this,"encoder",new mo);n(this,"decoder",new wo)}}const Ue=new po;class cr{constructor(e,r,o,a,d,l,h,f,m,C){n(this,"height");n(this,"timestamp");n(this,"l1_head");n(this,"l1_finalized");n(this,"payload_commitment");n(this,"ns_table");n(this,"block_merkle_root");n(this,"fee_merkle_root");n(this,"builder_signature");n(this,"fee_info");this.height=e,this.timestamp=r,this.l1_head=o,this.l1_finalized=a,this.payload_commitment=d,this.ns_table=l,this.block_merkle_root=h,this.fee_merkle_root=f,this.builder_signature=m,this.fee_info=C}toJSON(){return O.encode(this)}}class fo{convert(e){if(!c(e,"height",s)||!c(e,"timestamp",s)||!c(e,"l1_head",s)||!c(e,"l1_finalized",s)||!c(e,"payload_commitment",s)||!c(e,"ns_table",s)||!c(e,"block_merkle_root",s)||!c(e,"fee_merkle_root",s)||!c(e,"builder_signature",s)||!c(e,"fee_info",s))throw new u;return new cr(i.decode(e.height),i.decode(e.timestamp),i.decode(e.l1_head),nr.decode(e.l1_finalized),S.decode(e.payload_commitment),Ue.decode(e.ns_table),w.decode(e.block_merkle_root),w.decode(e.fee_merkle_root),De.decode(e.builder_signature),Pe.decode(e.fee_info))}}class go{convert(e){return{height:i.encode(e.height),timestamp:i.encode(e.timestamp),l1_head:i.encode(e.l1_head),l1_finalized:nr.encode(e.l1_finalized),payload_commitment:S.encode(e.payload_commitment),ns_table:Ue.encode(e.ns_table),block_merkle_root:w.encode(e.block_merkle_root),fee_merkle_root:w.encode(e.fee_merkle_root),builder_signature:De.encode(e.builder_signature),fee_info:Pe.encode(e.fee_info)}}}class yo extends p{constructor(){super(...arguments);n(this,"encoder",new go);n(this,"decoder",new fo)}}const O=new yo;class le{constructor(e,r){n(this,"vm");n(this,"payload");this.vm=e,this.payload=r}toJSON(){return q.encode(this)}}class Co{convert(e){if(!c(e,"vm",s)||!c(e,"payload",s))throw new u;return new le(i.decode(e.vm),S.decode(e.payload))}}class vo{convert(e){return{vm:i.encode(e.vm),payload:S.encode(e.payload)}}}class xo extends p{constructor(){super(...arguments);n(this,"encoder",new vo);n(this,"decoder",new Co)}}const q=new xo,sr=new _(new B(q),new A(q));class ar{constructor(e){n(this,"transaction_nmt");this.transaction_nmt=e}toJSON(){return te.encode(this)}}class bo{convert(e){if(!c(e,"transaction_nmt",s))throw new u;return new ar(sr.decode(e.transaction_nmt))}}class So{convert(e){return{transaction_nmt:sr.encode(e.transaction_nmt)}}}class ko extends p{constructor(){super(...arguments);n(this,"encoder",new So);n(this,"decoder",new bo)}}const te=new ko;class ir{constructor(e,r,o,a,d){n(this,"header");n(this,"payload");n(this,"hash");n(this,"size");n(this,"numTransactions");this.header=e,this.payload=r,this.hash=o,this.size=a,this.numTransactions=d}toJSON(){return Le.encode(this)}}class Eo{convert(e){if(!c(e,"header",s)||!c(e,"payload",s)||!c(e,"hash",s)||!c(e,"size",s)||!c(e,"num_transactions",s))throw new u;return new ir(O.decode(e.header),te.decode(e.payload),w.decode(e.hash),i.decode(e.size),i.decode(e.num_transactions))}}class To{convert(e){return{header:O.encode(e.header),payload:te.encode(e.payload),hash:w.encode(e.hash),size:i.encode(e.size),num_transactions:i.encode(e.numTransactions)}}}class Ro extends y{constructor(){super(...arguments);n(this,"encoder",new To);n(this,"decoder",new Eo)}}const Le=new Ro;class Ne{constructor(e,r,o,a,d){n(this,"header");n(this,"hash");n(this,"size");n(this,"num_transactions");n(this,"proposer_id");this.header=e,this.hash=r,this.size=o,this.num_transactions=a,this.proposer_id=d}toJSON(){return Fe.encode(this)}}class Io{convert(e){if(!c(e,"header",s)||!c(e,"hash",s)||!c(e,"size",s)||!c(e,"num_transactions",s)||!c(e,"proposer_id",s))throw new u;return new Ne(O.decode(e.header),w.decode(e.hash),i.decode(e.size),i.decode(e.num_transactions),b.decode(e.proposer_id))}}class Bo{convert(e){return{header:O.encode(e.header),hash:w.encode(e.hash),size:i.encode(e.size),num_transactions:i.encode(e.num_transactions),proposer_id:b.encode(e.proposer_id)}}}class Ao extends p{constructor(){super(...arguments);n(this,"encoder",new Bo);n(this,"decoder",new Io)}}const Fe=new Ao,_o=new _(new B(Fe),new A(Fe));class Me{constructor(e,r,o,a){n(this,"hash");n(this,"header");n(this,"offset");n(this,"transaction");this.hash=e,this.header=r,this.offset=o,this.transaction=a}toJSON(){return Ge.encode(this)}}class Do{convert(e){if(!c(e,"hash",s)||!c(e,"header",s)||!c(e,"offset",s)||!c(e,"transaction",s))throw new u;return new Me(w.decode(e.hash),O.decode(e.header),i.decode(e.offset),q.decode(e.transaction))}}class Po{convert(e){return{hash:w.encode(e.hash),header:O.encode(e.header),offset:i.encode(e.offset),transaction:q.encode(e.transaction)}}}class Oo extends p{constructor(){super(...arguments);n(this,"encoder",new Po);n(this,"decoder",new Do)}}const Ge=new Oo,dr=new _(new B(Ge),new A(Ge));class Uo{convert(e){if(!sn(e))throw new u;return e}}class Lo{convert(e){return e}}class No extends p{constructor(){super(...arguments);n(this,"encoder",new Lo);n(this,"decoder",new Uo)}}const ue=new No;class He{constructor(e){n(this,"leaf_commit");this.leaf_commit=e}toJSON(){return ze.encode(this)}}class Fo{convert(e){if(!c(e,"leaf_commit",s))throw new u;return new He(w.decode(e.leaf_commit))}}class Mo{convert(e){return{leaf_commit:w.encode(e.leaf_commit)}}}class Go extends p{constructor(){super(...arguments);n(this,"encoder",new Mo);n(this,"decoder",new Fo)}}const ze=new Go;class Ho{constructor(e,r){n(this,"width");n(this,"index");this.width=e,this.index=r}toJSON(){return Je.encode(this)}}class zo{convert(e){if(!c(e,"width",s)||!c(e,"index",s))throw new u;return new Ho(i.decode(e.width),i.decode(e.index))}}class Jo{convert(e){return{width:i.encode(e.width),index:i.encode(e.index)}}}class qo extends p{constructor(){super(...arguments);n(this,"encoder",new Jo);n(this,"decoder",new zo)}}const Je=new qo;class Wo{constructor(e,r,o,a){n(this,"order");n(this,"head");n(this,"bits");n(this,"data");this.order=e,this.head=r,this.bits=o,this.data=a}toJSON(){return qe.encode(this)}}class $o{convert(e){if(!c(e,"order",s)||!c(e,"head",s)||!c(e,"bits",s)||!c(e,"data",s))throw new u;return new Wo(T.decode(e.order),Je.decode(e.head),i.decode(e.bits),S.decode(e.data))}}class jo{convert(e){return{order:T.encode(e.order),head:Je.encode(e.head),bits:i.encode(e.bits),data:S.encode(e.data)}}}class Vo extends p{constructor(){super(...arguments);n(this,"encoder",new jo);n(this,"decoder",new $o)}}const qe=new Vo;class Qo{constructor(e,r){n(this,"signature");n(this,"bitvec");this.signature=e,this.bitvec=r}toJSON(){return We.encode(this)}}class Yo{convert(e){if(!Be(e)||e.length!==2)throw new u;return new Qo(w.decode(e[0]),qe.decode(e[1]))}}class Ko{convert(e){return[w.encode(e.signature),qe.encode(e.bitvec)]}}class Xo extends p{constructor(){super(...arguments);n(this,"encoder",new Ko);n(this,"decoder",new Yo)}}const We=new Xo,lr=new tr(new Zt(We),new er(We));class $e{constructor(e,r,o,a,d,l){n(this,"data");n(this,"vote_commitment");n(this,"view_number");n(this,"signatures");n(this,"is_genesis");n(this,"_pd");this.data=e,this.vote_commitment=r,this.view_number=o,this.signatures=a,this.is_genesis=d,this._pd=l}toJSON(){return re.encode(this)}}class Zo{convert(e){if(!c(e,"data",s)||!c(e,"vote_commitment",s)||!c(e,"view_number",s)||!c(e,"signatures",s)||!c(e,"is_genesis",s)||!c(e,"_pd",s))throw new u;return new $e(ze.decode(e.data),w.decode(e.vote_commitment),i.decode(e.view_number),lr.decode(e.signatures),ue.decode(e.is_genesis),null)}}class ec{convert(e){return{data:ze.encode(e.data),vote_commitment:w.encode(e.vote_commitment),view_number:i.encode(e.view_number),signatures:lr.encode(e.signatures),is_genesis:ue.encode(e.is_genesis),_pd:null}}}class tc extends p{constructor(){super(...arguments);n(this,"encoder",new ec);n(this,"decoder",new Zo)}}const re=new tc;class ur{constructor(e,r,o,a,d,l,h,f){n(this,"view_number");n(this,"justify_qc");n(this,"parent_commitment");n(this,"block_header");n(this,"block_payload");n(this,"rejected");n(this,"timestamp");n(this,"proposer_id");this.view_number=e,this.justify_qc=r,this.parent_commitment=o,this.block_header=a,this.block_payload=d,this.rejected=l,this.timestamp=h,this.proposer_id=f}toJSON(){return je.encode(this)}}class rc{convert(e){if(!c(e,"view_number",s)||!c(e,"justify_qc",s)||!c(e,"parent_commitment",s)||!c(e,"block_header",s)||!c(e,"block_payload",s)||!c(e,"rejected",s)||!c(e,"timestamp",s)||!c(e,"proposer_id",s))throw new u;return new ur(i.decode(e.view_number),re.decode(e.justify_qc),w.decode(e.parent_commitment),O.decode(e.block_header),te.decode(e.block_payload),S.decode(e.rejected),i.decode(e.timestamp),b.decode(e.proposer_id))}}class nc{convert(e){return{view_number:i.encode(e.view_number),justify_qc:re.encode(e.justify_qc),parent_commitment:w.encode(e.parent_commitment),block_header:O.encode(e.block_header),block_payload:te.encode(e.block_payload),rejected:S.encode(e.rejected),timestamp:i.encode(e.timestamp),proposer_id:b.encode(e.proposer_id)}}}class oc extends p{constructor(){super(...arguments);n(this,"encoder",new nc);n(this,"decoder",new rc)}}const je=new oc;class hr{constructor(e,r){n(this,"leaf");n(this,"qc");this.leaf=e,this.qc=r}toJSON(){return Ve.encode(this)}}class cc{convert(e){if(!c(e,"leaf",s)||!c(e,"qc",s))throw new u;return new hr(je.decode(e.leaf),re.decode(e.qc))}}class sc{convert(e){return{leaf:je.encode(e.leaf),qc:re.encode(e.qc)}}}class ac extends p{constructor(){super(...arguments);n(this,"encoder",new sc);n(this,"decoder",new cc)}}const Ve=new ac;class he{}class wr extends he{toJSON(){return Qe.encode(this)}}class ic{convert(e){if(!J(e)||e!=="Empty")throw new u;return new wr}}class dc{convert(){return"Empty"}}class lc extends p{constructor(){super(...arguments);n(this,"encoder",new dc);n(this,"decoder",new ic)}}const Qe=new lc;class mr extends he{constructor(r,o,a){super();n(this,"value");n(this,"pos");n(this,"elem");this.value=r,this.pos=o,this.elem=a}toJSON(){return Ye.encode(this)}}class uc{convert(e){if(!c(e,"Leaf",s))throw new u;const r=e.Leaf;if(!c(r,"value",s)||!c(r,"pos",s)||!c(r,"elem",s))throw new u;return new mr(w.decode(r.value),w.decode(r.pos),w.decode(r.elem))}}class hc{convert(e){return{Leaf:{value:w.encode(e.value),pos:w.encode(e.pos),elem:w.encode(e.elem)}}}}class wc extends y{constructor(){super(...arguments);n(this,"encoder",new hc);n(this,"decoder",new uc)}}const Ye=new wc;class pr extends he{constructor(r){super();n(this,"value");this.value=r}toJSON(){return Ke.encode(this)}}class mc{convert(e){if(!c(e,"ForgettenSubtree",s))throw new u;const r=e.ForgettenSubtree;if(!c(r,"value",s))throw new u;return new pr(w.decode(r.value))}}class pc{convert(e){return{ForgettenSubtree:{value:w.encode(e.value)}}}}class fc extends y{constructor(){super(...arguments);n(this,"encoder",new pc);n(this,"decoder",new mc)}}const Ke=new fc;class Xe extends he{constructor(r,o){super();n(this,"value");n(this,"children");this.value=r,this.children=o}toJSON(){return Ze.encode(this)}}class gc{convert(e){if(!c(e,"Branch",s))throw new u;const r=e.Branch;if(!c(r,"value",s)||!c(r,"children",s))throw new u;return new Xe(w.decode(r.value),we.decode(r.children))}}class yc{convert(e){return{Branch:{value:w.encode(e.value),children:we.encode(e.children)}}}}class Cc extends p{constructor(){super(...arguments);n(this,"encoder",new yc);n(this,"decoder",new gc)}}const Ze=new Cc;class vc{convert(e){if(c(e,"Leaf",s))return Ye.decoder.convert(e);if(c(e,"Branch",s))return Ze.decoder.convert(e);if(c(e,"ForgettenSubtree",s))return Ke.decoder.convert(e);if(J(e))return Qe.decoder.convert(e);throw new u}}class xc{convert(e){if(e instanceof mr)return Ye.encode(e);if(e instanceof Xe)return Ze.encode(e);if(e instanceof pr)return Ke.encode(e);if(e instanceof wr)return Qe.encode(e);throw new u}}class bc extends p{constructor(){super(...arguments);n(this,"encoder",new xc);n(this,"decoder",new vc)}}const fr=new bc,we=new _(new B(fr),new A(fr));class gr{constructor(e,r){n(this,"pos");n(this,"proof");this.pos=e,this.proof=r}toJSON(){return et.encode(this)}}class Sc{convert(e){if(!c(e,"pos",s)||!c(e,"proof",Be))throw new u;return new gr(w.decode(e.pos),we.decode(e.proof))}}class kc{convert(e){return{pos:w.encode(e.pos),proof:we.encode(e.proof)}}}class Ec extends p{constructor(){super(...arguments);n(this,"encoder",new kc);n(this,"decoder",new Sc)}}const et=new Ec;class yr{constructor(e,r,o,a,d){n(this,"transaction");n(this,"block_hash");n(this,"proof");n(this,"height");n(this,"hash");this.transaction=e,this.block_hash=r,this.proof=o,this.height=a,this.hash=d}toJSON(){return tt.encode(this)}}class Tc{convert(e){if(!c(e,"transaction",s)||!c(e,"block_hash",s)||!c(e,"proof",s)||!c(e,"height",s)||!c(e,"hash",s))throw new u;return new yr(q.decoder.convert(e.transaction),w.decode(e.block_hash),et.decoder.convert(e.proof),i.decode(e.height),w.decode(e.hash))}}class Rc{convert(e){return{transaction:q.encode(e.transaction),block_hash:w.encode(e.block_hash),proof:et.encode(e.proof),height:i.encode(e.height),hash:w.encode(e.hash)}}}class Ic extends p{constructor(){super(...arguments);n(this,"encoder",new Rc);n(this,"decoder",new Tc)}}const tt=new Ic;class Cr{constructor(e){n(this,"target");this.target=e}static latest(){return new xr}static height(e){return new br(e)}toJSON(){return vr.encode(this)}}class Bc{convert(e){return typeof e.target=="number"?i.encode(e.target):T.encode(e.target)}}class Ac{convert(e){return e==="latest"?new xr:new br(i.decode(e))}}class _c extends y{constructor(){super(...arguments);n(this,"encoder",new Bc);n(this,"decoder",new Ac)}}const vr=new _c;class xr extends Cr{constructor(){super("latest")}}class br extends Cr{constructor(e){super(e)}}class Dc{convert(e){if(!J(e))throw new u;const r=new Date(e);if(Number.isNaN(r.valueOf()))throw new u;return r}}class Pc{convert(e){return e.toISOString()}}class Oc extends p{constructor(){super(...arguments);n(this,"encoder",new Pc);n(this,"decoder",new Dc)}}const M=new Oc;class G{constructor(e,r,o){n(this,"significantDigitsMultiplier");this.alpha3Code=e,this.code=r,this.significantDigits=o,this.alpha3Code=e,this.code=r,this.significantDigits=o,this.significantDigitsMultiplier=BigInt(10)**BigInt(this.significantDigits)}toJSON(){return me.encode(this)}}const Sr=new G("JPY",392,0),Uc=new G("GBP",826,2),kr=new G("USD",840,2),Lc=new G("EUR",978,2),Nc=new G("XXX",999,2),Er=new G("ETH",1001,18),rt=new G("XBT",1002,8),Tr=new G("ESP",10001,18),Fc=[Sr,Uc,kr,Lc,Nc,Er,rt,Tr],Mc=new Map(Fc.map(t=>[t.alpha3Code,t]));class Gc{convert(e){if(typeof e!="string")throw new u("CurrencyCodeDecoder: expected string");if(e==="BTC")return rt;const r=Mc.get(e);if(r===void 0)throw new u(`CurrencyCodeDecoder: unknown currency: "${e}"`);return r}}class Hc{convert(e){return e.alpha3Code}}class zc extends p{constructor(){super(...arguments);n(this,"decoder",new Gc);n(this,"encoder",new Hc)}}const me=new zc;class U{constructor(e,r){this.currency=e,this.value=r,this.currency=e,this.value=r}static USD(e){return new U(kr,BigInt(e))}static ETH(e){return new U(Er,BigInt(e))}static ESP(e){return new U(Tr,BigInt(e))}static JPY(e){return new U(Sr,BigInt(e))}static BTC(e){return new U(rt,BigInt(e))}toString(){return pe.encode(this)}toJSON(){return pe.encode(this)}}function Jc(t){return t==="."||t===","||t===" "}function qc(t,e){let r=-1;const o=t.length;for(let a=0;a<o;a++)e(t[a])&&(r=a);return r}class Wc{parseCurrencyCode(e){return me.decode(e)}parseValue(e,r){let o=1n;r[0]==="-"&&(o=-1n,r=r.substring(1));const a=qc(r,Jc);if(a===-1){const m=BigInt(r.replace(/\D/g,""))*e.significantDigitsMultiplier;return o*m}const d=r.substring(0,a).replace(/\D/g,""),l=r.substring(a+1).replace(/\D/g,""),h=BigInt(d)*e.significantDigitsMultiplier,f=BigInt(l)*10n**BigInt(e.significantDigits-l.length);return o*(h+f)}convert(e){if(typeof e!="string")throw new u("MonetaryValueDecoder: expected string");const r=e.indexOf(" ");if(r<=-1)throw new u("MonetaryValueDecoder: missing non-breaking space");const o=e.substring(0,r),a=e.substring(r+1);if(/^-?[\d .,]+$/.test(o)){const l=this.parseCurrencyCode(a);return new U(l,this.parseValue(l,o))}const d=this.parseCurrencyCode(o);return new U(d,this.parseValue(d,a))}}class $c{convert(e){const r=e.value<0n?"-":"",o=e.value<0n?-e.value:e.value,a=o%e.currency.significantDigitsMultiplier,d=o/e.currency.significantDigitsMultiplier,l=String(d),h=String(a);return/^0+$/.test(h)?`${me.encode(e.currency)} ${r}${l}`:`${me.encode(e.currency)} ${r}${d}.${String(a).padStart(e.currency.significantDigits,"0")}`}}class jc extends p{constructor(){super(...arguments);n(this,"decoder",new Wc);n(this,"encoder",new $c)}}const pe=new jc,Rr=new _(new B(pe),new A(pe));class Ir{constructor(e,r,o,a,d,l,h,f){n(this,"hash");n(this,"height");n(this,"time");n(this,"numTransactions");n(this,"proposerID");n(this,"feeRecipient");n(this,"size");n(this,"blockReward");this.hash=e,this.height=r,this.time=o,this.numTransactions=a,this.proposerID=d,this.feeRecipient=l,this.size=h,this.blockReward=f}toJSON(){return ne.encode(this)}}class Vc{convert(e){if(!c(e,"hash",s)||!c(e,"height",s)||!c(e,"time",s)||!c(e,"num_transactions",s)||!c(e,"proposer_id",s)||!c(e,"fee_recipient",s)||!c(e,"size",s)||!c(e,"block_reward",s))throw new u;return new Ir(w.decode(e.hash),i.decode(e.height),M.decode(e.time),i.decode(e.num_transactions),b.decode(e.proposer_id),b.decode(e.fee_recipient),i.decode(e.size),Rr.decode(e.block_reward))}}class Qc{convert(e){return{hash:w.encode(e.hash),height:i.encode(e.height),time:M.encode(e.time),num_transactions:i.encode(e.numTransactions),proposer_id:b.encode(e.proposerID),fee_recipient:b.encode(e.feeRecipient),size:i.encode(e.size),block_reward:Rr.encode(e.blockReward)}}}class Yc extends y{constructor(){super(...arguments);n(this,"encoder",new Qc);n(this,"decoder",new Vc)}}const ne=new Yc;class Br{constructor(e){n(this,"blockDetail");this.blockDetail=e}toJSON(){return nt.encode(this)}}class Kc{convert(e){if(!c(e,"block_detail",s))throw new u;return new Br(ne.decode(e.block_detail))}}class Xc{convert(e){return{block_detail:ne.encode(e.blockDetail)}}}class Zc extends y{constructor(){super(...arguments);n(this,"encoder",new Xc);n(this,"decoder",new Kc)}}const nt=new Zc;class Ar{constructor(e){n(this,"limit");this.limit=e}static latest(e){return new Dr(e)}static from(e,r){return new Pr(e,r)}toJSON(){return _r.encode(this)}}class es{convert(e){return typeof e.from=="number"?{from:i.encode(e.from),limit:i.encode(e.limit)}:{from:T.encode(e.from),limit:i.encode(e.limit)}}}class ts{convert(e){if(!c(e,"from",s)||!c(e,"limit",s))throw new u;return e.from==="latest"?new Dr(i.decode(e.limit)):new Pr(i.decode(e.from),i.decode(e.limit))}}class rs extends y{constructor(){super(...arguments);n(this,"encoder",new es);n(this,"decoder",new ts)}}const _r=new rs;class Dr extends Ar{constructor(e){super(e)}get from(){return"latest"}}class Pr extends Ar{constructor(r,o){super(o);n(this,"from");this.from=r}}class Or{constructor(e,r,o,a,d,l){n(this,"hash");n(this,"height");n(this,"proposerID");n(this,"numTransactions");n(this,"size");n(this,"time");this.hash=e,this.height=r,this.proposerID=o,this.numTransactions=a,this.size=d,this.time=l}toJSON(){return ot.encode(this)}}class ns{convert(e){if(!c(e,"hash",s)||!c(e,"height",s)||!c(e,"proposer_id",s)||!c(e,"num_transactions",s)||!c(e,"size",s)||!c(e,"time",s))throw new u;return new Or(w.decode(e.hash),i.decode(e.height),b.decode(e.proposer_id),i.decode(e.num_transactions),i.decode(e.size),M.decode(e.time))}}class os{convert(e){return{hash:w.encode(e.hash),height:i.encode(e.height),proposer_id:b.encode(e.proposerID),num_transactions:i.encode(e.numTransactions),size:i.encode(e.size),time:M.encode(e.time)}}}class cs extends y{constructor(){super(...arguments);n(this,"encoder",new os);n(this,"decoder",new ns)}}const ot=new cs,Q=new _(new B(ot),new A(ot));class Ur{constructor(e){n(this,"blockSummaries");this.blockSummaries=e}toJSON(){return ct.encode(this)}}class ss{convert(e){if(!c(e,"block_summaries",s))throw new u;return new Ur(Q.decode(e.block_summaries))}}class as{convert(e){return{block_summaries:Q.encode(e.blockSummaries)}}}class is extends y{constructor(){super(...arguments);n(this,"encoder",new as);n(this,"decoder",new ss)}}const ct=new is;class Lr{constructor(e,r,o){n(this,"rollups");n(this,"transactions");n(this,"blocks");this.rollups=e,this.transactions=r,this.blocks=o}toJSON(){return st.encode(this)}}class ds{convert(e){if(!c(e,"rollups",s)||!c(e,"transactions",s)||!c(e,"blocks",s))throw new u;return new Lr(i.decode(e.rollups),i.decode(e.transactions),i.decode(e.blocks))}}class ls{convert(e){return{rollups:i.encode(e.rollups),transactions:i.encode(e.transactions),blocks:i.encode(e.blocks)}}}class us extends p{constructor(){super(...arguments);n(this,"encoder",new ls);n(this,"decoder",new ds)}}const st=new us;class Nr{constructor(e,r,o,a){n(this,"blockTime");n(this,"blockSize");n(this,"blockTransactions");n(this,"blockHeights");this.blockTime=e,this.blockSize=r,this.blockTransactions=o,this.blockHeights=a}toJSON(){return at.encode(this)}}class hs{convert(e){if(!c(e,"block_time",s)||!c(e,"block_size",s)||!c(e,"block_transactions",s)||!c(e,"block_heights",s))throw new u;return new Nr(S.decode(e.block_time),S.decode(e.block_size),S.decode(e.block_transactions),S.decode(e.block_heights))}}class ws{convert(e){return{block_time:S.encode(e.blockTime),block_size:S.encode(e.blockSize),block_transactions:S.encode(e.blockTransactions),block_heights:S.encode(e.blockHeights)}}}class ms extends p{constructor(){super(...arguments);n(this,"encoder",new ws);n(this,"decoder",new hs)}}const at=new ms,Fr=S;class it{constructor(e,r,o,a,d,l){n(this,"hash");n(this,"rollups");n(this,"height");n(this,"time");n(this,"offset");n(this,"numTransactions");this.hash=e,this.rollups=r,this.height=o,this.time=a,this.offset=d,this.numTransactions=l}toJSON(){return dt.encode(this)}}class ps{convert(e){if(!c(e,"hash",s)||!c(e,"rollups",s)||!c(e,"height",s)||!c(e,"time",s)||!c(e,"offset",s)||!c(e,"num_transactions",s))throw new u;return new it(w.decode(e.hash),Fr.decode(e.rollups),i.decode(e.height),M.decode(e.time),i.decode(e.offset),i.decode(e.num_transactions))}}class fs{convert(e){return{hash:w.encode(e.hash),rollups:Fr.encode(e.rollups),height:i.encode(e.height),time:M.encode(e.time),offset:i.encode(e.offset),num_transactions:i.encode(e.numTransactions)}}}class gs extends p{constructor(){super(...arguments);n(this,"encoder",new fs);n(this,"decoder",new ps)}}const dt=new gs,Y=new _(new B(dt),new A(dt));class Mr{constructor(e,r,o,a,d){n(this,"latestBlock");n(this,"genesisOverview");n(this,"latestBlocks");n(this,"latestTransactions");n(this,"histograms");this.latestBlock=e,this.genesisOverview=r,this.latestBlocks=o,this.latestTransactions=a,this.histograms=d}toJSON(){return lt.encode(this)}}class ys{convert(e){if(!c(e,"latest_block",s)||!c(e,"genesis_overview",s)||!c(e,"latest_blocks",s)||!c(e,"latest_transactions",s)||!c(e,"histograms",s))throw new u;return new Mr(ne.decode(e.latest_block),st.decode(e.genesis_overview),Q.decode(e.latest_blocks),Y.decode(e.latest_transactions),at.decode(e.histograms))}}class Cs{convert(e){return{latest_block:ne.encode(e.latestBlock),genesis_overview:st.encode(e.genesisOverview),latest_blocks:Q.encode(e.latestBlocks),latest_transactions:Y.encode(e.latestTransactions),histograms:at.encode(e.histograms)}}}class vs extends p{constructor(){super(...arguments);n(this,"encoder",new Cs);n(this,"decoder",new ys)}}const lt=new vs;class Gr{constructor(e){n(this,"explorerSummary");this.explorerSummary=e}toJSON(){return ut.encode(this)}}class xs{convert(e){if(!c(e,"explorer_summary",s))throw new u;return new Gr(lt.decode(e.explorer_summary))}}class bs{convert(e){return{explorer_summary:lt.encode(e.explorerSummary)}}}class Ss extends p{constructor(){super(...arguments);n(this,"encoder",new bs);n(this,"decoder",new xs)}}const ut=new Ss;class ks{constructor(e){n(this,"query");this.query=e}toJSON(){return Hr.encode(this)}}class Es{convert(e){return T.encode(e.query)}}class Ts{convert(e){return new ks(T.decode(e))}}class Rs extends y{constructor(){super(...arguments);n(this,"encoder",new Es);n(this,"decoder",new Ts)}}const Hr=new Rs;class zr{constructor(e,r){n(this,"blocks");n(this,"transactions");this.blocks=e,this.transactions=r}toJSON(){return ht.encode(this)}}class Is{convert(e){if(!c(e,"blocks",s)||!c(e,"transactions",s))throw new u;return new zr(Q.decode(e.blocks),Y.decode(e.transactions))}}class Bs{convert(e){return{blocks:Q.encode(e.blocks),transactions:Y.encode(e.transactions)}}}class As extends y{constructor(){super(...arguments);n(this,"encoder",new Bs);n(this,"decoder",new Is)}}const ht=new As;class Jr{constructor(e){n(this,"searchResults");this.searchResults=e}toJSON(){return wt.encode(this)}}class _s{convert(e){if(!c(e,"search_results",s))throw new u;return new Jr(ht.decode(e.search_results))}}class Ds{convert(e){return{search_results:ht.encode(e.searchResults)}}}class Ps extends y{constructor(){super(...arguments);n(this,"encoder",new Ds);n(this,"decoder",new _s)}}const wt=new Ps;class qr{static heightAndOffset(e,r){return new oe(e,r)}static hash(e){return new ce(e)}toJSON(){return Wr.encode(this)}}class Os{convert(e){if(e instanceof oe)return{height:i.encode(e.height),offset:i.encode(e.offset)};if(e instanceof ce)return{hash:w.encode(e.hash)};throw new u}}class Us{convert(e){if(c(e,"height",s)&&c(e,"offset",s))return new oe(i.decode(e.height),i.decode(e.offset));if(c(e,"hash",s))return new ce(w.decode(e.hash));throw new u}}class Ls extends p{constructor(){super(...arguments);n(this,"encoder",new Os);n(this,"decoder",new Us)}}const Wr=new Ls;class oe extends qr{constructor(r,o){super();n(this,"height");n(this,"offset");this.height=r,this.offset=o}}class ce extends qr{constructor(r){super();n(this,"hash");this.hash=r}}const $r=i;class jr{constructor(e,r){n(this,"namespace");n(this,"payload");this.namespace=e,this.payload=r}toJSON(){return mt.encode(this)}}class Ns{convert(e){if(!c(e,"namespace",s)||!c(e,"payload",s))throw new u;return new jr($r.decode(e.namespace),Yt.decode(e.payload))}}class Fs{convert(e){return{namespace:$r.encode(e.namespace),payload:Yt.encode(e.payload)}}}class Ms extends p{constructor(){super(...arguments);n(this,"encoder",new Fs);n(this,"decoder",new Ns)}}const mt=new Ms,Vr=new _(new B(mt),new A(mt));class Qr{constructor(e,r,o,a,d,l,h,f,m){n(this,"hash");n(this,"height");n(this,"blockConfirmed");n(this,"offset");n(this,"numTransactions");n(this,"size");n(this,"time");n(this,"sequencingFees");n(this,"feeDetails");this.hash=e,this.height=r,this.blockConfirmed=o,this.offset=a,this.numTransactions=d,this.size=l,this.time=h,this.sequencingFees=f,this.feeDetails=m}toJSON(){return pt.encode(this)}}class Gs{convert(e){if(!c(e,"hash",s)||!c(e,"height",s)||!c(e,"block_confirmed",s)||!c(e,"offset",s)||!c(e,"num_transactions",s)||!c(e,"size",s)||!c(e,"time",s)||!c(e,"sequencing_fees",s)||!c(e,"fee_details",s))throw new u;return new Qr(w.decode(e.hash),i.decode(e.height),ue.decode(e.block_confirmed),i.decode(e.offset),i.decode(e.num_transactions),i.decode(e.size),M.decode(e.time),[],[])}}class Hs{convert(e){return{hash:w.encode(e.hash),height:i.encode(e.height),block_confirmed:ue.encode(e.blockConfirmed),offset:i.encode(e.offset),num_transactions:i.encode(e.numTransactions),size:i.encode(e.size),time:M.encode(e.time),sequencing_fees:[],fee_details:[]}}}class zs extends p{constructor(){super(...arguments);n(this,"encoder",new Hs);n(this,"decoder",new Gs)}}const pt=new zs;class Yr{constructor(e,r){n(this,"details");n(this,"data");this.details=e,this.data=r}toJSON(){return ft.encode(this)}}class Js{convert(e){if(!c(e,"details",s)||!c(e,"data",s))throw new u;return new Yr(pt.decode(e.details),Vr.decode(e.data))}}class qs{convert(e){return{details:pt.encode(e.details),data:Vr.encode(e.data)}}}class Ws extends p{constructor(){super(...arguments);n(this,"encoder",new qs);n(this,"decoder",new Js)}}const ft=new Ws;class gt{constructor(e){n(this,"transactionDetail");this.transactionDetail=e}toJSON(){return yt.encode(this)}}class $s{convert(e){if(!c(e,"transaction_detail",s))throw new u;return new gt(ft.decode(e.transaction_detail))}}class js{convert(e){return{transaction_detail:ft.encode(e.transactionDetail)}}}class Vs extends y{constructor(){super(...arguments);n(this,"encoder",new js);n(this,"decoder",new $s)}}const yt=new Vs;class Ct{constructor(){}static block(e){return new fe(e)}static namespace(e){return new ge(e)}static none(){return new xt}toJSON(){return vt.encode(this)}}class Qs{convert(e){return c(e,"block",s)?new fe(i.decode(e.block)):c(e,"namespace",s)?new ge(i.decode(e.namespace)):new xt}}class Ys{convert(e){if(e instanceof xt)return{};if(e instanceof fe)return{block:i.encode(e.block)};if(e instanceof ge)return{namespace:i.encode(e.namespace)};throw new u}}class Ks extends y{constructor(){super(...arguments);n(this,"encoder",new Ys);n(this,"decoder",new Qs)}}const vt=new Ks;class xt extends Ct{constructor(){super()}convertURL(e){return e}}class fe extends Ct{constructor(r){super();n(this,"block");this.block=r}convertURL(r){return new URL(`${r.pathname}/block/${this.block}`,r)}}class ge extends Ct{constructor(r){super();n(this,"namespace");this.namespace=r}convertURL(r){return new URL(`${r.pathname}/namespace/${this.namespace}`,r)}}class bt{constructor(e){n(this,"limit");this.limit=e}static latest(e){return new ye(e)}static heightAndOffset(e,r,o){return new Ce(e,r,o)}static hash(e,r){return new ve(e,r)}toJSON(){return St.encode(this)}}class Xs{convert(e){if(!c(e,"limit",s))throw new u;return c(e,"height",s)&&c(e,"offset",s)?new Ce(i.decode(e.height),i.decode(e.offset),i.decode(e.limit)):c(e,"hash",s)?new ve(w.decode(e.hash),i.decode(e.limit)):new ye(i.decode(e.limit))}}class Zs{convert(e){if(e instanceof ye)return{limit:i.encode(e.limit)};if(e instanceof Ce)return{height:i.encode(e.height),offset:i.encode(e.offset),limit:i.encode(e.limit)};if(e instanceof ve)return{hash:w.encode(e.hash),limit:i.encode(e.limit)};throw new u}}class ea extends y{constructor(){super(...arguments);n(this,"encoder",new Zs);n(this,"decoder",new Xs)}}const St=new ea;class ye extends bt{constructor(e){super(e)}convertURL(e){return new URL(`transactions/latest/${this.limit}`,e)}}class Ce extends bt{constructor(r,o,a){super(a);n(this,"height");n(this,"offset");this.height=r,this.offset=o}convertURL(r){return new URL(`transactions/from/${this.height}/${this.offset}/${this.limit}`,r)}}class ve extends bt{constructor(r,o){super(o);n(this,"hash");this.hash=r}convertURL(r){return new URL(`transactions/hash/${this.hash}/${this.limit}`,r)}}class ta{constructor(e,r){n(this,"target");n(this,"filter");this.target=e,this.filter=r}toJSON(){return Kr.encode(this)}}class ra{convert(e){if(!c(e,"filter",s)||!c(e,"target",s))throw new u;return new ta(St.decode(e.target),vt.decode(e.filter))}}class na{convert(e){return{filter:vt.encode(e.filter),target:St.encode(e.target)}}}class oa extends y{constructor(){super(...arguments);n(this,"encoder",new na);n(this,"decoder",new ra)}}const Kr=new oa;class xe{constructor(e){n(this,"transactionSummaries");this.transactionSummaries=e}toJSON(){return kt.encode(this)}}class ca{convert(e){if(!c(e,"transaction_summaries",s))throw new u;return new xe(Y.decode(e.transaction_summaries))}}class sa{convert(e){return{transaction_summaries:Y.encode(e.transactionSummaries)}}}class aa extends y{constructor(){super(...arguments);n(this,"encoder",new sa);n(this,"decoder",new ca)}}const kt=new aa;class R{constructor(e,r,o,a){n(this,"namespace");n(this,"name");n(this,"site");n(this,"blockExplorer");this.namespace=e,this.name=r,this.site=o,this.blockExplorer=a}}const ia=new R(202374881,"Vienna",new URL("https://vienna.caldera.dev/"),new URL("https://vienna.calderaexplorer.xyz/")),da=new R(202374882,"OP Stack",new URL("https://stack.optimism.io/"),new URL("https://www.blockscout.com/")),la=new R(33914988448,"Arbitrum",new URL("https://arbitrum.io/"),new URL("https://arbiscan.io/")),ua=new R(33914988449,"Eigen Layer",new URL("https://www.eigenlayer.xyz/"),new URL("https://www.blockscout.com/")),ha=new R(33914988450,"Spire",new URL("https://www.spire.dev/"),new URL("https://www.blockscout.com/")),wa=new R(33914988451,"Alt Layer",new URL("https://altlayer.io/"),new URL("https://www.blockscout.com/")),ma=new R(33914988452,"Caldera",new URL("https://www.caldera.xyz/"),new URL("https://www.blockscout.com/")),pa=new R(33914988453,"Vistara Labs",new URL("https://vistara.dev/"),new URL("https://www.blockscout.com/")),fa=new R(33914988454,"Polygon",new URL("https://polygon.technology/"),new URL("https://www.blockscout.com/")),ga=new R(263,"Milan",new URL("https://milan.caldera.dev/"),new URL("https://milan-devnet.explorer.caldera.xyz/")),ya=new R(41234687,"Kyoto",new URL("https://example.com/"),new URL("https://kyoto-explorer.altlayer.io/")),Ca=new Map([ia,da,la,fa,ua,ha,wa,ma,pa,ga,ya].map(t=>[t.namespace,t])),be=2147483648,va=1103515245,xa=12345;class Et{constructor(e){n(this,"state");this.state=e!==void 0?e:Math.floor(Math.random()*(be-1))}nextInt(){return this.state=(va*this.state+xa)%be,this.state}nextFloat(){return this.nextInt()/(be-1)}nextRange(e,r){const o=r-e,a=this.nextInt()/be;return e+Math.floor(a*o)}fillBytes(e){const r=new ArrayBuffer(e),o=new DataView(r);let a=0;for(;a<e-4;a+=4)o.setUint32(a,this.nextRange(0,4294967295));for(let d=a;d<e;d++)o.setUint8(d,this.nextRange(0,256));return r}}async function*E(){const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()).valueOf(),r=new Et(e);let o=0,a=e;for(;a<t.valueOf();){const d=Math.floor(r.nextFloat()*14*1e3);yield ba(new Et(o+d),o,a,a+d),a+=d,o++}}function ba(t,e,r,o){const a=Math.floor(t.nextFloat()*((o-r)/1e3)*12);return{hash:new x("BLOCK",t.fillBytes(32)),height:e,genTime:o-r,time:new Date(o),numTransactions:a,transactions:ka(new Et(e+r),e,r,o,a),proposer:t.fillBytes(30),size:Math.floor(t.nextFloat()*1024*a)+8,fees:[U.ESP(BigInt(t.nextRange(0,1e9)*1e3))]}}const Xr=Array.from(Ca.keys());function Sa(t){return t.nextFloat()>.98?1:Xr[t.nextRange(0,Xr.length)]}async function*ka(t,e,r,o,a){const d=(o-r)/a;for(let l=0,h=r;h<o;h+=d,l++){const f=Sa(t),m=Math.floor(1024*t.nextFloat());yield{block:e,index:l,size:m,hash:new x("COMMIT",t.fillBytes(32)),time:new Date(h),sender:new x("PUBKEY",t.fillBytes(32)),tree:{namespace:f,data:t.fillBytes(m)}}}}async function*Ea(t){for(let e=t.next();!e.done;e=t.next())yield e.value}function Ta(t){return Ea(t[Symbol.iterator]())}async function*Ra(t){for(let e=await t.next();!e.done;e=await t.next())yield e.value}async function*Tt(t,e){for(let r=await t.next();!r.done;r=await t.next())e(r.value)&&(yield r.value)}function Zr(t,e){return Tt(t[Symbol.asyncIterator](),e)}async function*W(t,e){for(let r=await t.next();!r.done;r=await t.next())yield await e(r.value)}function L(t,e){return W(t[Symbol.asyncIterator](),e)}async function*H(t,e){for(let r=0;r<e;r++){const o=await t.next();if(o.done)return;yield o.value}}function Rt(t,e){return H(t[Symbol.asyncIterator](),e)}async function*It(t,e){for(let r=await t.next();!r.done&&e(r.value);r=await t.next())yield r.value}function Bt(t,e){return It(t[Symbol.asyncIterator](),e)}async function*z(t,e){for(let r=0;r<e;r++)if((await t.next()).done)return;yield*Ra(t)}function Se(t,e){return z(t[Symbol.asyncIterator](),e)}async function se(t){const e=await t.next();if(e.done)throw new $t;return e.value}async function Ia(t){return se(t[Symbol.asyncIterator]())}async function Ba(t,e){for(let r=await t.next();!r.done;r=await t.next())if(e(r.value))return r.value}async function Aa(t,e){return Ba(t[Symbol.asyncIterator](),e)}async function en(t){let e;for(let r=await t.next();!r.done;r=await t.next())e=r.value;if(e===void 0)throw new $t;return e}async function _a(t){return en(t[Symbol.asyncIterator]())}async function*tn(t,e){for(let r=await t.next();!r.done;r=await t.next())yield*e(r.value)}function K(t,e){return tn(t[Symbol.asyncIterator](),e)}async function*At(t){yield*jn(t)}async function Da(t,e,r){const o=r;let a=e;for(let d=await o.next();!d.done;d=await o.next())a=t(await a,d.value);return a}async function*ke(t){let e=null;for(let r=await t.next();!r.done;r=await t.next())e=zn(e,r.value);yield*Wt(e)}function ae(t){return ke(t[Symbol.asyncIterator]())}function N(t){return Da(async(e,r)=>(e.push(r),e),Promise.resolve([]),t)}async function _t(t){return N(t[Symbol.asyncIterator]())}function Ee(t){return new cr(t.height,t.time.valueOf()/1e3,0,new rr(0,"00","00"),[],new or(new ArrayBuffer(0)),new x("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new x("MERKLE_COMM",new Uint8Array([0,0,0,0]).buffer),new Kt(new ArrayBuffer(0),new ArrayBuffer(0),0),new Xt(new ArrayBuffer(0),new ArrayBuffer(0)))}async function Pa(t){return new ir(Ee(t),new ar(await N(L(t.transactions,async e=>new le(e.tree.namespace,Array.from(new Uint8Array(e.tree.data)))))),new x("BLOCK",new Uint8Array([0,0,0,0]).buffer),t.size,t.numTransactions)}function Oa(t){return new Ne(Ee(t),new x("BLOCK",new Uint8Array([0,0,0,0]).buffer),t.size,t.numTransactions,t.proposer)}function Ua(t){const e=t.transactions,r=Ee(t);return L(e,async o=>new Me(o.hash,r,o.index,new le(o.tree.namespace,Array.from(new Uint8Array(o.tree.data)))))}async function*La(t){const e=Ee(t),r=t.transactions;yield*L(r,async o=>new yr(new le(o.tree.namespace,Array.from(new Uint8Array(o.tree.data))),new x("BLOCK",new Uint8Array([0,0,0,0]).buffer),new gr(new x("POS",new Uint8Array([0,0,0,0]).buffer),[new Xe(new x("EMPTY",new Uint8Array([0,0,0,0]).buffer),[])]),e.height,new x("COMMIT",o.tree.data.slice(0,32))))}class Na{async getLeafFromHeight(e){const r=await this.getBlockFromHeight(e);return new hr(new ur(e,new $e(new He(new x("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new x("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null),new x("LEAF",new Uint8Array([0,0,0,0]).buffer),r.header,r.payload,[],r.header.timestamp,r.header.fee_info.account),new $e(new He(new x("EMPTY",new Uint8Array([0,0,0,0]).buffer)),new x("EMPTY",new Uint8Array([0,0,0,0]).buffer),e,null,!1,null))}async getTransactionFromHeightAndOffset(e,r){const o=await se(z(E(),e)),a=La(o);return await Ia(Se(a,r))}async getBlockSummaries(e,r){const o=z(E(),e),a=H(o,r-e),d=W(a,async l=>Oa(l));return await N(d)}async getBlockFromHeight(e){const r=z(E(),e),o=await se(r);return Pa(o)}async*streamTransactionSummaries(e){const r=It(E(),d=>d.height<=e),o=ke(r);yield*K(o,d=>ae(Ua(d)))}async getTransactionSummaryRange(e,r,o){const a=this.streamTransactionSummaries(e),d=z(a,r),l=H(d,o);return await N(l)}async getTransactionSummaryRangeForRollup(e,r,o,a){const d=this.streamTransactionSummaries(r),l=Tt(d,m=>m.transaction.vm===e),h=z(l,o),f=H(h,a);return await N(f)}}class Fa{assert(){}}function Ma(){return new Fa}const Ga=Ma();function D(t,e){Ga.assert(t,e)}class Ha{constructor(e){n(this,"maxSize");D(!Number.isNaN(e),"maxSize must not be NaN"),D(Number.isInteger(e),"maxSize must be an integer"),D(e>0,"maxSize must be greater than 0"),this.maxSize=e}nextIndex(e){return D(e>=0,"index must be greater than or equal to 0"),(e+1)%this.maxSize}}class za{constructor(e){n(this,"preComputedSizeMinus1");D(!Number.isNaN(e),"maxSize must not be NaN"),D(Number.isInteger(e),"maxSize must be an integer"),D(e>0,"maxSize must be greater than 0"),D(rn(e),"maxSize must be a power of two"),this.preComputedSizeMinus1=e-1}nextIndex(e){return D(e>=0,"index must be greater than or equal to 0"),e+1&this.preComputedSizeMinus1}}class Ja{getFromEmpty(){}}class qa{getFromEmpty(){throw new Error("Missing element")}}const Wa={returnUndefined:new Ja,throwMissingElement:new qa};class $a{putToFull(e,r){return e.get(),e.put(r)}}class ja{putToFull(){return 1}}class Va{putToFull(){throw new Error("buffer full")}}const Qa={overwriteOldest:new $a,returnFull:new ja,throw:new Va};class Ya{constructor(e,r,o){n(this,"readIndex",0);n(this,"writeIndex",0);n(this,"buffer");n(this,"nextIndex");n(this,"getOnEmpty");n(this,"putOnFull");D(!Number.isNaN(e),"maxSize must not be NaN"),this.buffer=new Array(e),rn(e)?this.nextIndex=new za(e):this.nextIndex=new Ha(e),this.getOnEmpty=r,this.putOnFull=o}get maxSize(){return this.buffer.length}get length(){return this.writeIndex<this.readIndex?this.writeIndex+this.maxSize-this.readIndex:this.writeIndex-this.readIndex}put(e){const r=this.nextIndex.nextIndex(this.writeIndex);return r===this.readIndex?this.putOnFull.putToFull(this,e):(this.buffer[this.writeIndex]=e,this.writeIndex=r,0)}get(){if(this.readIndex===this.writeIndex)return this.getOnEmpty.getFromEmpty(this);const e=this.buffer[this.readIndex];return this.readIndex=this.nextIndex.nextIndex(this.readIndex),e}[Symbol.iterator](){return{next:()=>{const e=this.get();return e===void 0?{value:void 0,done:!0}:{value:e,done:!1}}}}}function rn(t){return(t&t-1)===0}function F(t=32,e=Wa.returnUndefined,r=Qa.overwriteOldest){return new Ya(t,e,r)}class Ka extends v{constructor(r,o=`Not Found: ${r}`){super(o);n(this,"key");this.key=r,Object.freeze(this)}toJSON(){return{...super.toJSON(),key:this.key}}}function nn(t){return new Ir(t.hash,t.height,t.time,t.numTransactions,t.proposer,t.proposer,t.size,t.fees)}function Dt(t){return new Or(t.hash,t.height,t.proposer,t.numTransactions,t.size,t.time)}function on(t,e){return new Yr(new Qr(e.hash,e.block,!0,e.index,t.numTransactions,e.size,e.time,[],[]),[new jr(e.tree.namespace,e.tree.data)])}function Te(t,e){return new it(e.hash,[e.tree.namespace],e.block,e.time,e.index,t.numTransactions)}class Xa{async getBlockDetail(e){const r=e.target,o=await(r==="latest"?_a(E()):se(Se(E(),r-1)));return new Br(nn(o))}async getBlockSummaries(e){const r=It(E(),h=>e.from==="latest"||h.height<=e.from),o=ke(r),a=H(o,e.limit),d=W(a,async h=>Dt(h)),l=await N(d);return new Ur(l)}async getTransactionDetail(e){const r=E();if(e instanceof oe){const o=Bt(r,h=>h.height<=e.height),a=K(o,h=>L(h.transactions,async f=>on(h,f))),d=Se(ae(a),e.offset),l=await se(d);return new gt(l)}if(e instanceof ce){const o=K(r,d=>L(d.transactions,async l=>on(d,l))),a=await Aa(o,d=>d.details.hash===e.hash);if(!a)throw new Ka(e.hash);return new gt(a)}throw new $}applyFilter(e,r){return r instanceof fe?Zr(e,o=>o.height==r.block):r instanceof ge?Zr(e,o=>o.rollups.indexOf(r.namespace)>=0):e}async getTransactionSummaries(e){const r=E(),{target:o,filter:a}=e;if(o instanceof ye){const l=K(r,C=>L(C.transactions,async g=>Te(C,g))),h=ae(l),f=this.applyFilter(h,a),m=await _t(Rt(f,o.limit));return new xe(m)}if(o instanceof Ce){const d=Bt(r,g=>g.height<=o.height),l=K(d,g=>L(g.transactions,async k=>Te(g,k))),h=ae(l),f=Se(h,o.offset),m=this.applyFilter(f,a),C=await _t(Rt(m,o.limit));return new xe(C)}if(o instanceof ve){const d=E(),l=K(d,g=>L(g.transactions,async k=>new it(k.hash,[k.tree.namespace],k.block,k.time,k.index,g.numTransactions))),h=Bt(l,g=>g.hash!==o.hash),f=ae(h),m=this.applyFilter(f,a),C=await _t(Rt(m,o.limit));return new xe(C)}throw new $}async getExplorerOverview(){let e;const r=F(11),o=F(51),a=F(51),d=F(51),l=F(51),h=F(11);let f=0,m=0;const C=new Map;for await(const g of E()){e=nn(g),r.put(Dt(g)),o.put(g.size),a.put(Math.round(g.genTime/1e3)),d.put(g.numTransactions),l.put(g.height),f++,m+=g.numTransactions;for await(const k of g.transactions){h.put(Te(g,k));const X=C.get(k.tree.namespace)||0;C.set(k.tree.namespace,X+1)}}return new Gr(new Mr(e,new Lr(Array.from(C.keys()).length,m,f),Array.from(r),Array.from(h),new Nr(Array.from(a),Array.from(o),Array.from(d),Array.from(l))))}async getSearchResult(e){const r=F(101),o=F(10),a=F(10);for await(const d of E())r.put(d);for(const d of r){d.hash.toString().startsWith(e.query)&&o.put(Dt(d));for await(const l of d.transactions)l.hash.toString().startsWith(e.query)&&a.put(Te(d,l))}return new Jr(new zr(Array.from(o),Array.from(a)))}}class Za{async blockHeight(){return(await en(E())).height}}class ei{constructor(){n(this,"availability",new Na);n(this,"status",new Za);n(this,"explorer",new Xa)}}class Re extends v{constructor(r,o="bad server response"){super(o);n(this,"response");this.response=r,Object.freeze(this)}toJSON(){return{...super.toJSON(),status:this.response.status}}}let ti=class extends Re{constructor(e,r="bad sever response: client error"){super(e,r)}};class ri extends Re{constructor(e,r="bad sever response: client error"){super(e,r)}}class ni extends Re{get haveHeaderType(){return this.response.headers.get("content-type")??"undefined"}constructor(e,r="response content type is not application/json"){super(e,r)}toJSON(){return{...super.toJSON(),have:this.haveHeaderType,want:"application/json"}}}function P(t){return async e=>(oi(e),ci(e),t.convert(await e.json()))}function oi(t){if(!t.ok)throw t.status>=500&&t.status<600?new ri(t):t.status>=400&&t.status<500?new ti(t):new Re(t)}function ci(t){const e=t.headers.get("content-type");if(!e||!e.startsWith("application/json"))throw new ni(t,e||"undefined")}async function si(t,e){return new Ne(t.header,t.hash,t.size,t.payload.transaction_nmt.length,e.leaf.proposer_id)}async function*ai(t,e){const r=e[Symbol.asyncIterator]();yield*L(Ta(t.leaf.block_payload.transaction_nmt),async o=>{const a=t.leaf.block_payload.transaction_nmt.indexOf(o),d=await r.next();if(d.done)throw new Error("Not enough transactions");return new Me(d.value.hash,t.leaf.block_header,a,o)})}class ii{constructor(e,r){n(this,"fetcher");n(this,"baseURL");this.fetcher=e,this.baseURL=r}getLeafFromHeight(e){const r=new URL(`leaf/${e}`,this.baseURL);return this.fetcher(r.toString()).then(P(Ve.decoder))}getTransactionFromHeightAndOffset(e,r){const o=new URL(`transaction/${e}/${r}`,this.baseURL);return this.fetcher(o.toString()).then(P(tt.decoder))}async getBlockSummaries(e,r){const o=At(r-e),a=W(o,l=>Promise.all([this.getBlockFromHeight(e+l),this.getLeafFromHeight(e+l)])),d=W(a,([l,h])=>si(l,h));return await N(d)}getBlockFromHeight(e){const r=new URL(`block/${e}`,this.baseURL);return this.fetcher(r.toString()).then(P(Le.decoder))}async*streamBlocksFromHeightRange(e,r){const o=At(e),a=W(o,l=>this.getLeafFromHeight(e-l)),d=tn(a,l=>ke(ai(l,W(At(l.leaf.block_payload.transaction_nmt.length),h=>this.getTransactionFromHeightAndOffset(l.leaf.block_header.height,h)))));if(r===void 0){yield*d;return}yield*H(d,r)}async getTransactionSummaryRange(e,r,o){const a=this.streamBlocksFromHeightRange(e,50),d=z(a,r),l=H(d,o);return await N(l)}async getTransactionSummaryRangeForRollup(e,r,o,a){const d=this.streamBlocksFromHeightRange(r,50),l=Tt(d,m=>m.transaction.vm===e),h=z(l,o),f=H(h,a);return await N(f)}}class di{constructor(e,r){n(this,"fetcher");n(this,"baseURL");this.fetcher=e,this.baseURL=r}async getBlockDetail(e){const r=new URL(`block/${e.target}`,this.baseURL);return this.fetcher(r.toString()).then(P(nt.decoder))}async getBlockSummaries(e){const r=new URL(`blocks/${e.from}/${e.limit}`,this.baseURL);return this.fetcher(r.toString()).then(P(ct.decoder))}async getTransactionDetail(e){let r=null;if(e instanceof ce?r=new URL(`transaction/hash/${e.hash}`,this.baseURL):e instanceof oe&&(r=new URL(`transaction/${e.height}/${e.offset}`,this.baseURL)),!r)throw new $;return this.fetcher(r.toString()).then(P(yt.decoder))}async getTransactionSummaries(e){const{target:r,filter:o}=e;let a=r.convertURL(this.baseURL);return a=o.convertURL(a),this.fetcher(a.toString()).then(P(kt.decoder))}async getExplorerOverview(){const e=new URL("explorer-summary",this.baseURL);return this.fetcher(e.toString()).then(P(ut.decoder))}async getSearchResult(e){const r=new URL(`search/${encodeURIComponent(e.query)}`,this.baseURL);return this.fetcher(r.toString()).then(P(wt.decoder))}}class li{constructor(e,r){n(this,"fetcher");n(this,"baseURL");n(this,"blockHeightURL");n(this,"blockHeightResponseValidator",P({convert(e){if(typeof e!="number")throw new ie(typeof e,"number");return e}}));this.fetcher=e,this.baseURL=r,this.blockHeightURL=new URL("block-height",this.baseURL)}blockHeight(){return this.fetcher(this.blockHeightURL).then(this.blockHeightResponseValidator)}}class ui{constructor(e,r){n(this,"availability");n(this,"status");n(this,"explorer");this.availability=new ii(e,new URL("availability/",r)),this.status=new li(e,new URL("status/",r)),this.explorer=new di(e,new URL("explorer/",r))}}class hi{constructor(e){n(this,"service");this.service=e}blockHeight(){return this.service.blockHeight()}async handleRequest(e){switch(e.method){case"blockHeight":return this.blockHeight();default:throw new $}}}class wi{constructor(e){n(this,"service");this.service=e}async getLeafFromHeight(e){return Ve.encode(await this.service.getLeafFromHeight(e))}async getTransactionFromHeightAndOffset(e,r){return tt.encode(await this.service.getTransactionFromHeightAndOffset(e,r))}async getBlockFromHeight(e){return Le.encode(await this.service.getBlockFromHeight(e))}async getBlockSummaries(e,r){return _o.encode(await this.service.getBlockSummaries(e,r))}async getTransactionSummaryRange(e,r,o){return dr.encode(await this.service.getTransactionSummaryRange(e,r,o))}async getTransactionSummaryRangeForRollup(e,r,o,a){return dr.encode(await this.service.getTransactionSummaryRangeForRollup(e,r,o,a))}async handleRequest(e){switch(e.method){case"getLeafFromHeight":return await this.getLeafFromHeight(i.decode(e.param[0]));case"getTransactionFromHeightAndOffset":return await this.getTransactionFromHeightAndOffset(i.decode(e.param[0]),i.decode(e.param[1]));case"getBlockFromHeight":return await this.getBlockFromHeight(i.decode(e.param[0]));case"getBlockSummaries":return await this.getBlockSummaries(i.decode(e.param[0]),i.decode(e.param[1]));case"getTransactionSummaryRange":return await this.getTransactionSummaryRange(i.decode(e.param[0]),i.decode(e.param[1]),i.decode(e.param[2]));case"getTransactionSummaryRangeForRollup":return await this.getTransactionSummaryRangeForRollup(i.decode(e.param[0]),i.decode(e.param[1]),i.decode(e.param[2]),i.decode(e.param[3]));default:throw new $}}}class mi{constructor(e){n(this,"service");this.service=e}async getBlockDetail(e){return nt.encode(await this.service.getBlockDetail(e))}async getBlockSummaries(e){return ct.encode(await this.service.getBlockSummaries(e))}async getTransactionDetail(e){return yt.encode(await this.service.getTransactionDetail(e))}async getTransactionSummaries(e){return kt.encode(await this.service.getTransactionSummaries(e))}async getExplorerOverview(){return ut.encode(await this.service.getExplorerOverview())}async getSearchResult(e){return wt.encode(await this.service.getSearchResult(e))}async handleRequest(e){switch(e.method){case"getBlockDetail":return await this.getBlockDetail(vr.decode(e.param[0]));case"getBlockSummaries":return await this.getBlockSummaries(_r.decode(e.param[0]));case"getTransactionDetail":return this.getTransactionDetail(Wr.decode(e.param[0]));case"getTransactionSummaries":return this.getTransactionSummaries(Kr.decode(e.param[0]));case"getExplorerOverview":return this.getExplorerOverview();case"getSearchResult":return this.getSearchResult(Hr.decode(e.param[0]))}}}class pi{constructor(e){n(this,"availability");n(this,"status");n(this,"explorer");this.availability=new wi(e.availability),this.status=new hi(e.status),this.explorer=new mi(e.explorer)}async handleRequest(e){switch(e.api){case"availability":return this.availability.handleRequest(e);case"status":return this.status.handleRequest(e);case"explorer":return this.explorer.handleRequest(e);default:throw new $}}}class fi{constructor(e){n(this,"service");n(this,"postMessage");this.postMessage=e,this.service=fetch("/config.json").then(r=>r.json()).then(r=>{if(r.hotshot_query_service_url){const o=new URL(r.hotshot_query_service_url);return new ui(fetch.bind(self),o)}throw new mn}).catch(()=>new ei).then(r=>new pi(r))}async handleEvent(e){const r=bn.decode(e.data);try{const a=await(await this.service).handleRequest(r);this.postMessage(Nt.encode(new Lt(r.requestID,a)))}catch(o){this.postMessage(Mt.encode(new Ft(r.requestID,typeof o=="object"&&o!==null&&"toJSON"in o&&typeof o.toJSON=="function"?o.toJSON():o)))}}}self.addEventListener("message",new fi(self.postMessage.bind(self)))})();
//# sourceMappingURL=web_worker_api.js-BAb-D3Me.js.map
